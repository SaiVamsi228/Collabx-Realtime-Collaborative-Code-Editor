var I_e=Object.defineProperty;var D_e=(i,e,t)=>e in i?I_e(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var N_e=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var Xi=(i,e,t)=>D_e(i,typeof e!="symbol"?e+"":e,t);var Hlt=N_e((nr,x1e)=>{function R_e(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in i)){const r=Object.getOwnPropertyDescriptor(n,s);r&&Object.defineProperty(i,s,r.get?r:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function IR(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var mM={exports:{}},Lw={},pM={exports:{}},Mn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xq;function A_e(){if(xq)return Mn;xq=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;function h(X){return X===null||typeof X!="object"?null:(X=d&&X[d]||X["@@iterator"],typeof X=="function"?X:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,_={};function v(X,oe,Ne){this.props=X,this.context=oe,this.refs=_,this.updater=Ne||g}v.prototype.isReactComponent={},v.prototype.setState=function(X,oe){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,oe,"setState")},v.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function y(){}y.prototype=v.prototype;function w(X,oe,Ne){this.props=X,this.context=oe,this.refs=_,this.updater=Ne||g}var x=w.prototype=new y;x.constructor=w,p(x,v.prototype),x.isPureReactComponent=!0;var k=Array.isArray,T=Object.prototype.hasOwnProperty,R={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function I(X,oe,Ne){var Ie,Oe={},it=null,We=null;if(oe!=null)for(Ie in oe.ref!==void 0&&(We=oe.ref),oe.key!==void 0&&(it=""+oe.key),oe)T.call(oe,Ie)&&!L.hasOwnProperty(Ie)&&(Oe[Ie]=oe[Ie]);var at=arguments.length-2;if(at===1)Oe.children=Ne;else if(1<at){for(var Ft=Array(at),_t=0;_t<at;_t++)Ft[_t]=arguments[_t+2];Oe.children=Ft}if(X&&X.defaultProps)for(Ie in at=X.defaultProps,at)Oe[Ie]===void 0&&(Oe[Ie]=at[Ie]);return{$$typeof:i,type:X,key:it,ref:We,props:Oe,_owner:R.current}}function A(X,oe){return{$$typeof:i,type:X.type,key:oe,ref:X.ref,props:X.props,_owner:X._owner}}function B(X){return typeof X=="object"&&X!==null&&X.$$typeof===i}function V(X){var oe={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(Ne){return oe[Ne]})}var U=/\/+/g;function W(X,oe){return typeof X=="object"&&X!==null&&X.key!=null?V(""+X.key):oe.toString(36)}function G(X,oe,Ne,Ie,Oe){var it=typeof X;(it==="undefined"||it==="boolean")&&(X=null);var We=!1;if(X===null)We=!0;else switch(it){case"string":case"number":We=!0;break;case"object":switch(X.$$typeof){case i:case e:We=!0}}if(We)return We=X,Oe=Oe(We),X=Ie===""?"."+W(We,0):Ie,k(Oe)?(Ne="",X!=null&&(Ne=X.replace(U,"$&/")+"/"),G(Oe,oe,Ne,"",function(_t){return _t})):Oe!=null&&(B(Oe)&&(Oe=A(Oe,Ne+(!Oe.key||We&&We.key===Oe.key?"":(""+Oe.key).replace(U,"$&/")+"/")+X)),oe.push(Oe)),1;if(We=0,Ie=Ie===""?".":Ie+":",k(X))for(var at=0;at<X.length;at++){it=X[at];var Ft=Ie+W(it,at);We+=G(it,oe,Ne,Ft,Oe)}else if(Ft=h(X),typeof Ft=="function")for(X=Ft.call(X),at=0;!(it=X.next()).done;)it=it.value,Ft=Ie+W(it,at++),We+=G(it,oe,Ne,Ft,Oe);else if(it==="object")throw oe=String(X),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.");return We}function Z(X,oe,Ne){if(X==null)return X;var Ie=[],Oe=0;return G(X,Ie,"","",function(it){return oe.call(Ne,it,Oe++)}),Ie}function ne(X){if(X._status===-1){var oe=X._result;oe=oe(),oe.then(function(Ne){(X._status===0||X._status===-1)&&(X._status=1,X._result=Ne)},function(Ne){(X._status===0||X._status===-1)&&(X._status=2,X._result=Ne)}),X._status===-1&&(X._status=0,X._result=oe)}if(X._status===1)return X._result.default;throw X._result}var fe={current:null},te={transition:null},ce={ReactCurrentDispatcher:fe,ReactCurrentBatchConfig:te,ReactCurrentOwner:R};function ve(){throw Error("act(...) is not supported in production builds of React.")}return Mn.Children={map:Z,forEach:function(X,oe,Ne){Z(X,function(){oe.apply(this,arguments)},Ne)},count:function(X){var oe=0;return Z(X,function(){oe++}),oe},toArray:function(X){return Z(X,function(oe){return oe})||[]},only:function(X){if(!B(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},Mn.Component=v,Mn.Fragment=t,Mn.Profiler=s,Mn.PureComponent=w,Mn.StrictMode=n,Mn.Suspense=l,Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,Mn.act=ve,Mn.cloneElement=function(X,oe,Ne){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var Ie=p({},X.props),Oe=X.key,it=X.ref,We=X._owner;if(oe!=null){if(oe.ref!==void 0&&(it=oe.ref,We=R.current),oe.key!==void 0&&(Oe=""+oe.key),X.type&&X.type.defaultProps)var at=X.type.defaultProps;for(Ft in oe)T.call(oe,Ft)&&!L.hasOwnProperty(Ft)&&(Ie[Ft]=oe[Ft]===void 0&&at!==void 0?at[Ft]:oe[Ft])}var Ft=arguments.length-2;if(Ft===1)Ie.children=Ne;else if(1<Ft){at=Array(Ft);for(var _t=0;_t<Ft;_t++)at[_t]=arguments[_t+2];Ie.children=at}return{$$typeof:i,type:X.type,key:Oe,ref:it,props:Ie,_owner:We}},Mn.createContext=function(X){return X={$$typeof:o,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:r,_context:X},X.Consumer=X},Mn.createElement=I,Mn.createFactory=function(X){var oe=I.bind(null,X);return oe.type=X,oe},Mn.createRef=function(){return{current:null}},Mn.forwardRef=function(X){return{$$typeof:a,render:X}},Mn.isValidElement=B,Mn.lazy=function(X){return{$$typeof:u,_payload:{_status:-1,_result:X},_init:ne}},Mn.memo=function(X,oe){return{$$typeof:c,type:X,compare:oe===void 0?null:oe}},Mn.startTransition=function(X){var oe=te.transition;te.transition={};try{X()}finally{te.transition=oe}},Mn.unstable_act=ve,Mn.useCallback=function(X,oe){return fe.current.useCallback(X,oe)},Mn.useContext=function(X){return fe.current.useContext(X)},Mn.useDebugValue=function(){},Mn.useDeferredValue=function(X){return fe.current.useDeferredValue(X)},Mn.useEffect=function(X,oe){return fe.current.useEffect(X,oe)},Mn.useId=function(){return fe.current.useId()},Mn.useImperativeHandle=function(X,oe,Ne){return fe.current.useImperativeHandle(X,oe,Ne)},Mn.useInsertionEffect=function(X,oe){return fe.current.useInsertionEffect(X,oe)},Mn.useLayoutEffect=function(X,oe){return fe.current.useLayoutEffect(X,oe)},Mn.useMemo=function(X,oe){return fe.current.useMemo(X,oe)},Mn.useReducer=function(X,oe,Ne){return fe.current.useReducer(X,oe,Ne)},Mn.useRef=function(X){return fe.current.useRef(X)},Mn.useState=function(X){return fe.current.useState(X)},Mn.useSyncExternalStore=function(X,oe,Ne){return fe.current.useSyncExternalStore(X,oe,Ne)},Mn.useTransition=function(){return fe.current.useTransition()},Mn.version="18.3.1",Mn}var Eq;function sV(){return Eq||(Eq=1,pM.exports=A_e()),pM.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tq;function P_e(){if(Tq)return Lw;Tq=1;var i=sV(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var u,d={},h=null,g=null;c!==void 0&&(h=""+c),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(g=l.ref);for(u in l)n.call(l,u)&&!r.hasOwnProperty(u)&&(d[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)d[u]===void 0&&(d[u]=l[u]);return{$$typeof:e,type:a,key:h,ref:g,props:d,_owner:s.current}}return Lw.Fragment=t,Lw.jsx=o,Lw.jsxs=o,Lw}var Lq;function M_e(){return Lq||(Lq=1,mM.exports=P_e()),mM.exports}var D=M_e(),F=sV();const vo=IR(F),O_e=R_e({__proto__:null,default:vo},[F]);var dE={},_M={exports:{}},Ba={},vM={exports:{}},bM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iq;function F_e(){return Iq||(Iq=1,function(i){function e(te,ce){var ve=te.length;te.push(ce);e:for(;0<ve;){var X=ve-1>>>1,oe=te[X];if(0<s(oe,ce))te[X]=ce,te[ve]=oe,ve=X;else break e}}function t(te){return te.length===0?null:te[0]}function n(te){if(te.length===0)return null;var ce=te[0],ve=te.pop();if(ve!==ce){te[0]=ve;e:for(var X=0,oe=te.length,Ne=oe>>>1;X<Ne;){var Ie=2*(X+1)-1,Oe=te[Ie],it=Ie+1,We=te[it];if(0>s(Oe,ve))it<oe&&0>s(We,Oe)?(te[X]=We,te[it]=ve,X=it):(te[X]=Oe,te[Ie]=ve,X=Ie);else if(it<oe&&0>s(We,ve))te[X]=We,te[it]=ve,X=it;else break e}}return ce}function s(te,ce){var ve=te.sortIndex-ce.sortIndex;return ve!==0?ve:te.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();i.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,g=!1,p=!1,_=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(te){for(var ce=t(c);ce!==null;){if(ce.callback===null)n(c);else if(ce.startTime<=te)n(c),ce.sortIndex=ce.expirationTime,e(l,ce);else break;ce=t(c)}}function k(te){if(_=!1,x(te),!p)if(t(l)!==null)p=!0,ne(T);else{var ce=t(c);ce!==null&&fe(k,ce.startTime-te)}}function T(te,ce){p=!1,_&&(_=!1,y(I),I=-1),g=!0;var ve=h;try{for(x(ce),d=t(l);d!==null&&(!(d.expirationTime>ce)||te&&!V());){var X=d.callback;if(typeof X=="function"){d.callback=null,h=d.priorityLevel;var oe=X(d.expirationTime<=ce);ce=i.unstable_now(),typeof oe=="function"?d.callback=oe:d===t(l)&&n(l),x(ce)}else n(l);d=t(l)}if(d!==null)var Ne=!0;else{var Ie=t(c);Ie!==null&&fe(k,Ie.startTime-ce),Ne=!1}return Ne}finally{d=null,h=ve,g=!1}}var R=!1,L=null,I=-1,A=5,B=-1;function V(){return!(i.unstable_now()-B<A)}function U(){if(L!==null){var te=i.unstable_now();B=te;var ce=!0;try{ce=L(!0,te)}finally{ce?W():(R=!1,L=null)}}else R=!1}var W;if(typeof w=="function")W=function(){w(U)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Z=G.port2;G.port1.onmessage=U,W=function(){Z.postMessage(null)}}else W=function(){v(U,0)};function ne(te){L=te,R||(R=!0,W())}function fe(te,ce){I=v(function(){te(i.unstable_now())},ce)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(te){te.callback=null},i.unstable_continueExecution=function(){p||g||(p=!0,ne(T))},i.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<te?Math.floor(1e3/te):5},i.unstable_getCurrentPriorityLevel=function(){return h},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function(te){switch(h){case 1:case 2:case 3:var ce=3;break;default:ce=h}var ve=h;h=ce;try{return te()}finally{h=ve}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(te,ce){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ve=h;h=te;try{return ce()}finally{h=ve}},i.unstable_scheduleCallback=function(te,ce,ve){var X=i.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?X+ve:X):ve=X,te){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=ve+oe,te={id:u++,callback:ce,priorityLevel:te,startTime:ve,expirationTime:oe,sortIndex:-1},ve>X?(te.sortIndex=ve,e(c,te),t(l)===null&&te===t(c)&&(_?(y(I),I=-1):_=!0,fe(k,ve-X))):(te.sortIndex=oe,e(l,te),p||g||(p=!0,ne(T))),te},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(te){var ce=h;return function(){var ve=h;h=ce;try{return te.apply(this,arguments)}finally{h=ve}}}}(bM)),bM}var Dq;function B_e(){return Dq||(Dq=1,vM.exports=F_e()),vM.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nq;function V_e(){if(Nq)return Ba;Nq=1;var i=sV(),e=B_e();function t(f){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+f,b=1;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function r(f,m){o(f,m),o(f+"Capture",m)}function o(f,m){for(s[f]=m,f=0;f<m.length;f++)n.add(m[f])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},d={};function h(f){return l.call(d,f)?!0:l.call(u,f)?!1:c.test(f)?d[f]=!0:(u[f]=!0,!1)}function g(f,m,b,E){if(b!==null&&b.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return E?!1:b!==null?!b.acceptsBooleans:(f=f.toLowerCase().slice(0,5),f!=="data-"&&f!=="aria-");default:return!1}}function p(f,m,b,E){if(m===null||typeof m>"u"||g(f,m,b,E))return!0;if(E)return!1;if(b!==null)switch(b.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function _(f,m,b,E,N,O,z){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=E,this.attributeNamespace=N,this.mustUseProperty=b,this.propertyName=f,this.type=m,this.sanitizeURL=O,this.removeEmptyString=z}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){v[f]=new _(f,0,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var m=f[0];v[m]=new _(m,1,!1,f[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){v[f]=new _(f,2,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){v[f]=new _(f,2,!1,f,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){v[f]=new _(f,3,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(f){v[f]=new _(f,3,!0,f,null,!1,!1)}),["capture","download"].forEach(function(f){v[f]=new _(f,4,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(function(f){v[f]=new _(f,6,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(function(f){v[f]=new _(f,5,!1,f.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function w(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var m=f.replace(y,w);v[m]=new _(m,1,!1,f,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var m=f.replace(y,w);v[m]=new _(m,1,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var m=f.replace(y,w);v[m]=new _(m,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(f){v[f]=new _(f,1,!1,f.toLowerCase(),null,!1,!1)}),v.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(f){v[f]=new _(f,1,!1,f.toLowerCase(),null,!0,!0)});function x(f,m,b,E){var N=v.hasOwnProperty(m)?v[m]:null;(N!==null?N.type!==0:E||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(p(m,b,N,E)&&(b=null),E||N===null?h(m)&&(b===null?f.removeAttribute(m):f.setAttribute(m,""+b)):N.mustUseProperty?f[N.propertyName]=b===null?N.type===3?!1:"":b:(m=N.attributeName,E=N.attributeNamespace,b===null?f.removeAttribute(m):(N=N.type,b=N===3||N===4&&b===!0?"":""+b,E?f.setAttributeNS(E,m,b):f.setAttribute(m,b))))}var k=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),R=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),V=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),fe=Symbol.for("react.offscreen"),te=Symbol.iterator;function ce(f){return f===null||typeof f!="object"?null:(f=te&&f[te]||f["@@iterator"],typeof f=="function"?f:null)}var ve=Object.assign,X;function oe(f){if(X===void 0)try{throw Error()}catch(b){var m=b.stack.trim().match(/\n( *(at )?)/);X=m&&m[1]||""}return`
`+X+f}var Ne=!1;function Ie(f,m){if(!f||Ne)return"";Ne=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(Se){var E=Se}Reflect.construct(f,[],m)}else{try{m.call()}catch(Se){E=Se}f.call(m.prototype)}else{try{throw Error()}catch(Se){E=Se}f()}}catch(Se){if(Se&&E&&typeof Se.stack=="string"){for(var N=Se.stack.split(`
`),O=E.stack.split(`
`),z=N.length-1,ee=O.length-1;1<=z&&0<=ee&&N[z]!==O[ee];)ee--;for(;1<=z&&0<=ee;z--,ee--)if(N[z]!==O[ee]){if(z!==1||ee!==1)do if(z--,ee--,0>ee||N[z]!==O[ee]){var le=`
`+N[z].replace(" at new "," at ");return f.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",f.displayName)),le}while(1<=z&&0<=ee);break}}}finally{Ne=!1,Error.prepareStackTrace=b}return(f=f?f.displayName||f.name:"")?oe(f):""}function Oe(f){switch(f.tag){case 5:return oe(f.type);case 16:return oe("Lazy");case 13:return oe("Suspense");case 19:return oe("SuspenseList");case 0:case 2:case 15:return f=Ie(f.type,!1),f;case 11:return f=Ie(f.type.render,!1),f;case 1:return f=Ie(f.type,!0),f;default:return""}}function it(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case L:return"Fragment";case R:return"Portal";case A:return"Profiler";case I:return"StrictMode";case W:return"Suspense";case G:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case V:return(f.displayName||"Context")+".Consumer";case B:return(f._context.displayName||"Context")+".Provider";case U:var m=f.render;return f=f.displayName,f||(f=m.displayName||m.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case Z:return m=f.displayName||null,m!==null?m:it(f.type)||"Memo";case ne:m=f._payload,f=f._init;try{return it(f(m))}catch{}}return null}function We(f){var m=f.type;switch(f.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=m.render,f=f.displayName||f.name||"",m.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return it(m);case 8:return m===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function at(f){switch(typeof f){case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function Ft(f){var m=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function _t(f){var m=Ft(f)?"checked":"value",b=Object.getOwnPropertyDescriptor(f.constructor.prototype,m),E=""+f[m];if(!f.hasOwnProperty(m)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var N=b.get,O=b.set;return Object.defineProperty(f,m,{configurable:!0,get:function(){return N.call(this)},set:function(z){E=""+z,O.call(this,z)}}),Object.defineProperty(f,m,{enumerable:b.enumerable}),{getValue:function(){return E},setValue:function(z){E=""+z},stopTracking:function(){f._valueTracker=null,delete f[m]}}}}function Nt(f){f._valueTracker||(f._valueTracker=_t(f))}function Zt(f){if(!f)return!1;var m=f._valueTracker;if(!m)return!0;var b=m.getValue(),E="";return f&&(E=Ft(f)?f.checked?"true":"false":f.value),f=E,f!==b?(m.setValue(f),!0):!1}function on(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function zn(f,m){var b=m.checked;return ve({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??f._wrapperState.initialChecked})}function sr(f,m){var b=m.defaultValue==null?"":m.defaultValue,E=m.checked!=null?m.checked:m.defaultChecked;b=at(m.value!=null?m.value:b),f._wrapperState={initialChecked:E,initialValue:b,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function Or(f,m){m=m.checked,m!=null&&x(f,"checked",m,!1)}function Ts(f,m){Or(f,m);var b=at(m.value),E=m.type;if(b!=null)E==="number"?(b===0&&f.value===""||f.value!=b)&&(f.value=""+b):f.value!==""+b&&(f.value=""+b);else if(E==="submit"||E==="reset"){f.removeAttribute("value");return}m.hasOwnProperty("value")?Hs(f,m.type,b):m.hasOwnProperty("defaultValue")&&Hs(f,m.type,at(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(f.defaultChecked=!!m.defaultChecked)}function No(f,m,b){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var E=m.type;if(!(E!=="submit"&&E!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+f._wrapperState.initialValue,b||m===f.value||(f.value=m),f.defaultValue=m}b=f.name,b!==""&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,b!==""&&(f.name=b)}function Hs(f,m,b){(m!=="number"||on(f.ownerDocument)!==f)&&(b==null?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+b&&(f.defaultValue=""+b))}var wr=Array.isArray;function Ro(f,m,b,E){if(f=f.options,m){m={};for(var N=0;N<b.length;N++)m["$"+b[N]]=!0;for(b=0;b<f.length;b++)N=m.hasOwnProperty("$"+f[b].value),f[b].selected!==N&&(f[b].selected=N),N&&E&&(f[b].defaultSelected=!0)}else{for(b=""+at(b),m=null,N=0;N<f.length;N++){if(f[N].value===b){f[N].selected=!0,E&&(f[N].defaultSelected=!0);return}m!==null||f[N].disabled||(m=f[N])}m!==null&&(m.selected=!0)}}function jl(f,m){if(m.dangerouslySetInnerHTML!=null)throw Error(t(91));return ve({},m,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function aa(f,m){var b=m.value;if(b==null){if(b=m.children,m=m.defaultValue,b!=null){if(m!=null)throw Error(t(92));if(wr(b)){if(1<b.length)throw Error(t(93));b=b[0]}m=b}m==null&&(m=""),b=m}f._wrapperState={initialValue:at(b)}}function Ao(f,m){var b=at(m.value),E=at(m.defaultValue);b!=null&&(b=""+b,b!==f.value&&(f.value=b),m.defaultValue==null&&f.defaultValue!==b&&(f.defaultValue=b)),E!=null&&(f.defaultValue=""+E)}function Fr(f){var m=f.textContent;m===f._wrapperState.initialValue&&m!==""&&m!==null&&(f.value=m)}function yi(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ti(f,m){return f==null||f==="http://www.w3.org/1999/xhtml"?yi(m):f==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":f}var Po,La=function(f){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,b,E,N){MSApp.execUnsafeLocalFunction(function(){return f(m,b,E,N)})}:f}(function(f,m){if(f.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in f)f.innerHTML=m;else{for(Po=Po||document.createElement("div"),Po.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=Po.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;m.firstChild;)f.appendChild(m.firstChild)}});function Cr(f,m){if(m){var b=f.firstChild;if(b&&b===f.lastChild&&b.nodeType===3){b.nodeValue=m;return}}f.textContent=m}var cs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Us=["Webkit","ms","Moz","O"];Object.keys(cs).forEach(function(f){Us.forEach(function(m){m=m+f.charAt(0).toUpperCase()+f.substring(1),cs[m]=cs[f]})});function lo(f,m,b){return m==null||typeof m=="boolean"||m===""?"":b||typeof m!="number"||m===0||cs.hasOwnProperty(f)&&cs[f]?(""+m).trim():m+"px"}function Ci(f,m){f=f.style;for(var b in m)if(m.hasOwnProperty(b)){var E=b.indexOf("--")===0,N=lo(b,m[b],E);b==="float"&&(b="cssFloat"),E?f.setProperty(b,N):f[b]=N}}var ft=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ia(f,m){if(m){if(ft[f]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(t(137,f));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(t(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(t(61))}if(m.style!=null&&typeof m.style!="object")throw Error(t(62))}}function Br(f,m){if(f.indexOf("-")===-1)return typeof m.is=="string";switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hn=null;function Vr(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var ns=null,Wr=null,ri=null;function Sr(f){if(f=fw(f)){if(typeof ns!="function")throw Error(t(280));var m=f.stateNode;m&&(m=Ex(m),ns(f.stateNode,f.type,m))}}function la(f){Wr?ri?ri.push(f):ri=[f]:Wr=f}function Bi(){if(Wr){var f=Wr,m=ri;if(ri=Wr=null,Sr(f),m)for(f=0;f<m.length;f++)Sr(m[f])}}function rr(f,m){return f(m)}function kt(){}var $=!1;function q(f,m,b){if($)return f(m,b);$=!0;try{return rr(f,m,b)}finally{$=!1,(Wr!==null||ri!==null)&&(kt(),Bi())}}function Q(f,m){var b=f.stateNode;if(b===null)return null;var E=Ex(b);if(E===null)return null;b=E[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(f=f.type,E=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!E;break e;default:f=!1}if(f)return null;if(b&&typeof b!="function")throw Error(t(231,m,typeof b));return b}var ie=!1;if(a)try{var ae={};Object.defineProperty(ae,"passive",{get:function(){ie=!0}}),window.addEventListener("test",ae,ae),window.removeEventListener("test",ae,ae)}catch{ie=!1}function me(f,m,b,E,N,O,z,ee,le){var Se=Array.prototype.slice.call(arguments,3);try{m.apply(b,Se)}catch(He){this.onError(He)}}var Ce=!1,ze=null,Ye=!1,Rt=null,vn={onError:function(f){Ce=!0,ze=f}};function an(f,m,b,E,N,O,z,ee,le){Ce=!1,ze=null,me.apply(vn,arguments)}function Qn(f,m,b,E,N,O,z,ee,le){if(an.apply(this,arguments),Ce){if(Ce){var Se=ze;Ce=!1,ze=null}else throw Error(t(198));Ye||(Ye=!0,Rt=Se)}}function kn(f){var m=f,b=f;if(f.alternate)for(;m.return;)m=m.return;else{f=m;do m=f,(m.flags&4098)!==0&&(b=m.return),f=m.return;while(f)}return m.tag===3?b:null}function is(f){if(f.tag===13){var m=f.memoizedState;if(m===null&&(f=f.alternate,f!==null&&(m=f.memoizedState)),m!==null)return m.dehydrated}return null}function Vi(f){if(kn(f)!==f)throw Error(t(188))}function cl(f){var m=f.alternate;if(!m){if(m=kn(f),m===null)throw Error(t(188));return m!==f?null:f}for(var b=f,E=m;;){var N=b.return;if(N===null)break;var O=N.alternate;if(O===null){if(E=N.return,E!==null){b=E;continue}break}if(N.child===O.child){for(O=N.child;O;){if(O===b)return Vi(N),f;if(O===E)return Vi(N),m;O=O.sibling}throw Error(t(188))}if(b.return!==E.return)b=N,E=O;else{for(var z=!1,ee=N.child;ee;){if(ee===b){z=!0,b=N,E=O;break}if(ee===E){z=!0,E=N,b=O;break}ee=ee.sibling}if(!z){for(ee=O.child;ee;){if(ee===b){z=!0,b=O,E=N;break}if(ee===E){z=!0,E=O,b=N;break}ee=ee.sibling}if(!z)throw Error(t(189))}}if(b.alternate!==E)throw Error(t(190))}if(b.tag!==3)throw Error(t(188));return b.stateNode.current===b?f:m}function mt(f){return f=cl(f),f!==null?de(f):null}function de(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var m=de(f);if(m!==null)return m;f=f.sibling}return null}var je=e.unstable_scheduleCallback,dt=e.unstable_cancelCallback,oi=e.unstable_shouldYield,st=e.unstable_requestPaint,Be=e.unstable_now,vt=e.unstable_getCurrentPriorityLevel,ct=e.unstable_ImmediatePriority,fn=e.unstable_UserBlockingPriority,Gt=e.unstable_NormalPriority,zs=e.unstable_LowPriority,Ot=e.unstable_IdlePriority,xn=null,Fn=null;function Mo(f){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(xn,f,void 0,(f.current.flags&128)===128)}catch{}}var Yi=Math.clz32?Math.clz32:Kd,Of=Math.log,ul=Math.LN2;function Kd(f){return f>>>=0,f===0?32:31-(Of(f)/ul|0)|0}var Da=64,Gd=4194304;function dl(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function hl(f,m){var b=f.pendingLanes;if(b===0)return 0;var E=0,N=f.suspendedLanes,O=f.pingedLanes,z=b&268435455;if(z!==0){var ee=z&~N;ee!==0?E=dl(ee):(O&=z,O!==0&&(E=dl(O)))}else z=b&~N,z!==0?E=dl(z):O!==0&&(E=dl(O));if(E===0)return 0;if(m!==0&&m!==E&&(m&N)===0&&(N=E&-E,O=m&-m,N>=O||N===16&&(O&4194240)!==0))return m;if((E&4)!==0&&(E|=b&16),m=f.entangledLanes,m!==0)for(f=f.entanglements,m&=E;0<m;)b=31-Yi(m),N=1<<b,E|=f[b],m&=~N;return E}function Yd(f,m){switch(f){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qd(f,m){for(var b=f.suspendedLanes,E=f.pingedLanes,N=f.expirationTimes,O=f.pendingLanes;0<O;){var z=31-Yi(O),ee=1<<z,le=N[z];le===-1?((ee&b)===0||(ee&E)!==0)&&(N[z]=Yd(ee,m)):le<=m&&(f.expiredLanes|=ee),O&=~ee}}function fl(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function Ym(){var f=Da;return Da<<=1,(Da&4194240)===0&&(Da=64),f}function Ff(f){for(var m=[],b=0;31>b;b++)m.push(f);return m}function Bf(f,m,b){f.pendingLanes|=m,m!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,m=31-Yi(m),f[m]=b}function Wi(f,m){var b=f.pendingLanes&~m;f.pendingLanes=m,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=m,f.mutableReadLanes&=m,f.entangledLanes&=m,m=f.entanglements;var E=f.eventTimes;for(f=f.expirationTimes;0<b;){var N=31-Yi(b),O=1<<N;m[N]=0,E[N]=-1,f[N]=-1,b&=~O}}function Vf(f,m){var b=f.entangledLanes|=m;for(f=f.entanglements;b;){var E=31-Yi(b),N=1<<E;N&m|f[E]&m&&(f[E]|=m),b&=~N}}var Xn=0;function Wf(f){return f&=-f,1<f?4<f?(f&268435455)!==0?16:536870912:4:1}var rx,W1,ox,ax,lx,Zy=!1,Ru=[],co=null,xc=null,Ec=null,Hf=new Map,$l=new Map,Au=[],qA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cx(f,m){switch(f){case"focusin":case"focusout":co=null;break;case"dragenter":case"dragleave":xc=null;break;case"mouseover":case"mouseout":Ec=null;break;case"pointerover":case"pointerout":Hf.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(m.pointerId)}}function Na(f,m,b,E,N,O){return f===null||f.nativeEvent!==O?(f={blockedOn:m,domEventName:b,eventSystemFlags:E,nativeEvent:O,targetContainers:[N]},m!==null&&(m=fw(m),m!==null&&W1(m)),f):(f.eventSystemFlags|=E,m=f.targetContainers,N!==null&&m.indexOf(N)===-1&&m.push(N),f)}function KA(f,m,b,E,N){switch(m){case"focusin":return co=Na(co,f,m,b,E,N),!0;case"dragenter":return xc=Na(xc,f,m,b,E,N),!0;case"mouseover":return Ec=Na(Ec,f,m,b,E,N),!0;case"pointerover":var O=N.pointerId;return Hf.set(O,Na(Hf.get(O)||null,f,m,b,E,N)),!0;case"gotpointercapture":return O=N.pointerId,$l.set(O,Na($l.get(O)||null,f,m,b,E,N)),!0}return!1}function ux(f){var m=ep(f.target);if(m!==null){var b=kn(m);if(b!==null){if(m=b.tag,m===13){if(m=is(b),m!==null){f.blockedOn=m,lx(f.priority,function(){ox(b)});return}}else if(m===3&&b.stateNode.current.memoizedState.isDehydrated){f.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}f.blockedOn=null}function Xd(f){if(f.blockedOn!==null)return!1;for(var m=f.targetContainers;0<m.length;){var b=H1(f.domEventName,f.eventSystemFlags,m[0],f.nativeEvent);if(b===null){b=f.nativeEvent;var E=new b.constructor(b.type,b);hn=E,b.target.dispatchEvent(E),hn=null}else return m=fw(b),m!==null&&W1(m),f.blockedOn=b,!1;m.shift()}return!0}function Qm(f,m,b){Xd(f)&&b.delete(m)}function dx(){Zy=!1,co!==null&&Xd(co)&&(co=null),xc!==null&&Xd(xc)&&(xc=null),Ec!==null&&Xd(Ec)&&(Ec=null),Hf.forEach(Qm),$l.forEach(Qm)}function Tc(f,m){f.blockedOn===m&&(f.blockedOn=null,Zy||(Zy=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dx)))}function Lc(f){function m(N){return Tc(N,f)}if(0<Ru.length){Tc(Ru[0],f);for(var b=1;b<Ru.length;b++){var E=Ru[b];E.blockedOn===f&&(E.blockedOn=null)}}for(co!==null&&Tc(co,f),xc!==null&&Tc(xc,f),Ec!==null&&Tc(Ec,f),Hf.forEach(m),$l.forEach(m),b=0;b<Au.length;b++)E=Au[b],E.blockedOn===f&&(E.blockedOn=null);for(;0<Au.length&&(b=Au[0],b.blockedOn===null);)ux(b),b.blockedOn===null&&Au.shift()}var Zd=k.ReactCurrentBatchConfig,Uf=!0;function us(f,m,b,E){var N=Xn,O=Zd.transition;Zd.transition=null;try{Xn=1,Jy(f,m,b,E)}finally{Xn=N,Zd.transition=O}}function GA(f,m,b,E){var N=Xn,O=Zd.transition;Zd.transition=null;try{Xn=4,Jy(f,m,b,E)}finally{Xn=N,Zd.transition=O}}function Jy(f,m,b,E){if(Uf){var N=H1(f,m,b,E);if(N===null)rP(f,m,E,Xm,b),cx(f,E);else if(KA(N,f,m,b,E))E.stopPropagation();else if(cx(f,E),m&4&&-1<qA.indexOf(f)){for(;N!==null;){var O=fw(N);if(O!==null&&rx(O),O=H1(f,m,b,E),O===null&&rP(f,m,E,Xm,b),O===N)break;N=O}N!==null&&E.stopPropagation()}else rP(f,m,E,null,b)}}var Xm=null;function H1(f,m,b,E){if(Xm=null,f=Vr(E),f=ep(f),f!==null)if(m=kn(f),m===null)f=null;else if(b=m.tag,b===13){if(f=is(m),f!==null)return f;f=null}else if(b===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;f=null}else m!==f&&(f=null);return Xm=f,null}function ew(f){switch(f){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vt()){case ct:return 1;case fn:return 4;case Gt:case zs:return 16;case Ot:return 536870912;default:return 16}default:return 16}}var gl=null,U1=null,Ra=null;function tw(){if(Ra)return Ra;var f,m=U1,b=m.length,E,N="value"in gl?gl.value:gl.textContent,O=N.length;for(f=0;f<b&&m[f]===N[f];f++);var z=b-f;for(E=1;E<=z&&m[b-E]===N[O-E];E++);return Ra=N.slice(f,1<E?1-E:void 0)}function z1(f){var m=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&m===13&&(f=13)):f=m,f===10&&(f=13),32<=f||f===13?f:0}function Pu(){return!0}function nw(){return!1}function uo(f){function m(b,E,N,O,z){this._reactName=b,this._targetInst=N,this.type=E,this.nativeEvent=O,this.target=z,this.currentTarget=null;for(var ee in f)f.hasOwnProperty(ee)&&(b=f[ee],this[ee]=b?b(O):O[ee]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?Pu:nw,this.isPropagationStopped=nw,this}return ve(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=Pu)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=Pu)},persist:function(){},isPersistent:Pu}),m}var Ic={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},j1=uo(Ic),Mu=ve({},Ic,{view:0,detail:0}),YA=uo(Mu),$1,Jd,zf,Zm=ve({},Mu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ou,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==zf&&(zf&&f.type==="mousemove"?($1=f.screenX-zf.screenX,Jd=f.screenY-zf.screenY):Jd=$1=0,zf=f),$1)},movementY:function(f){return"movementY"in f?f.movementY:Jd}}),q1=uo(Zm),iw=ve({},Zm,{dataTransfer:0}),hx=uo(iw),K1=ve({},Mu,{relatedTarget:0}),G1=uo(K1),fx=ve({},Ic,{animationName:0,elapsedTime:0,pseudoElement:0}),eh=uo(fx),gx=ve({},Ic,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),mx=uo(gx),px=ve({},Ic,{data:0}),sw=uo(px),Y1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ca={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_x={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vx(f){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(f):(f=_x[f])?!!m[f]:!1}function Ou(){return vx}var C=ve({},Mu,{key:function(f){if(f.key){var m=Y1[f.key]||f.key;if(m!=="Unidentified")return m}return f.type==="keypress"?(f=z1(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?ca[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ou,charCode:function(f){return f.type==="keypress"?z1(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?z1(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),P=uo(C),H=ve({},Zm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K=uo(H),pe=ve({},Mu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ou}),Ee=uo(pe),nt=ve({},Ic,{propertyName:0,elapsedTime:0,pseudoElement:0}),Li=uo(nt),kr=ve({},Zm,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),ai=uo(kr),Hr=[9,13,27,32],or=a&&"CompositionEvent"in window,ql=null;a&&"documentMode"in document&&(ql=document.documentMode);var ml=a&&"TextEvent"in window&&!ql,Jm=a&&(!or||ql&&8<ql&&11>=ql),Q1=" ",bj=!1;function yj(f,m){switch(f){case"keyup":return Hr.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wj(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var X1=!1;function E1e(f,m){switch(f){case"compositionend":return wj(m);case"keypress":return m.which!==32?null:(bj=!0,Q1);case"textInput":return f=m.data,f===Q1&&bj?null:f;default:return null}}function T1e(f,m){if(X1)return f==="compositionend"||!or&&yj(f,m)?(f=tw(),Ra=U1=gl=null,X1=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return Jm&&m.locale!=="ko"?null:m.data;default:return null}}var L1e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cj(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m==="input"?!!L1e[f.type]:m==="textarea"}function Sj(f,m,b,E){la(E),m=Sx(m,"onChange"),0<m.length&&(b=new j1("onChange","change",null,b,E),f.push({event:b,listeners:m}))}var rw=null,ow=null;function I1e(f){Hj(f,0)}function bx(f){var m=n_(f);if(Zt(m))return f}function D1e(f,m){if(f==="change")return m}var kj=!1;if(a){var QA;if(a){var XA="oninput"in document;if(!XA){var xj=document.createElement("div");xj.setAttribute("oninput","return;"),XA=typeof xj.oninput=="function"}QA=XA}else QA=!1;kj=QA&&(!document.documentMode||9<document.documentMode)}function Ej(){rw&&(rw.detachEvent("onpropertychange",Tj),ow=rw=null)}function Tj(f){if(f.propertyName==="value"&&bx(ow)){var m=[];Sj(m,ow,f,Vr(f)),q(I1e,m)}}function N1e(f,m,b){f==="focusin"?(Ej(),rw=m,ow=b,rw.attachEvent("onpropertychange",Tj)):f==="focusout"&&Ej()}function R1e(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return bx(ow)}function A1e(f,m){if(f==="click")return bx(m)}function P1e(f,m){if(f==="input"||f==="change")return bx(m)}function M1e(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var Dc=typeof Object.is=="function"?Object.is:M1e;function aw(f,m){if(Dc(f,m))return!0;if(typeof f!="object"||f===null||typeof m!="object"||m===null)return!1;var b=Object.keys(f),E=Object.keys(m);if(b.length!==E.length)return!1;for(E=0;E<b.length;E++){var N=b[E];if(!l.call(m,N)||!Dc(f[N],m[N]))return!1}return!0}function Lj(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function Ij(f,m){var b=Lj(f);f=0;for(var E;b;){if(b.nodeType===3){if(E=f+b.textContent.length,f<=m&&E>=m)return{node:b,offset:m-f};f=E}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=Lj(b)}}function Dj(f,m){return f&&m?f===m?!0:f&&f.nodeType===3?!1:m&&m.nodeType===3?Dj(f,m.parentNode):"contains"in f?f.contains(m):f.compareDocumentPosition?!!(f.compareDocumentPosition(m)&16):!1:!1}function Nj(){for(var f=window,m=on();m instanceof f.HTMLIFrameElement;){try{var b=typeof m.contentWindow.location.href=="string"}catch{b=!1}if(b)f=m.contentWindow;else break;m=on(f.document)}return m}function ZA(f){var m=f&&f.nodeName&&f.nodeName.toLowerCase();return m&&(m==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||m==="textarea"||f.contentEditable==="true")}function O1e(f){var m=Nj(),b=f.focusedElem,E=f.selectionRange;if(m!==b&&b&&b.ownerDocument&&Dj(b.ownerDocument.documentElement,b)){if(E!==null&&ZA(b)){if(m=E.start,f=E.end,f===void 0&&(f=m),"selectionStart"in b)b.selectionStart=m,b.selectionEnd=Math.min(f,b.value.length);else if(f=(m=b.ownerDocument||document)&&m.defaultView||window,f.getSelection){f=f.getSelection();var N=b.textContent.length,O=Math.min(E.start,N);E=E.end===void 0?O:Math.min(E.end,N),!f.extend&&O>E&&(N=E,E=O,O=N),N=Ij(b,O);var z=Ij(b,E);N&&z&&(f.rangeCount!==1||f.anchorNode!==N.node||f.anchorOffset!==N.offset||f.focusNode!==z.node||f.focusOffset!==z.offset)&&(m=m.createRange(),m.setStart(N.node,N.offset),f.removeAllRanges(),O>E?(f.addRange(m),f.extend(z.node,z.offset)):(m.setEnd(z.node,z.offset),f.addRange(m)))}}for(m=[],f=b;f=f.parentNode;)f.nodeType===1&&m.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<m.length;b++)f=m[b],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var F1e=a&&"documentMode"in document&&11>=document.documentMode,Z1=null,JA=null,lw=null,eP=!1;function Rj(f,m,b){var E=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;eP||Z1==null||Z1!==on(E)||(E=Z1,"selectionStart"in E&&ZA(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),lw&&aw(lw,E)||(lw=E,E=Sx(JA,"onSelect"),0<E.length&&(m=new j1("onSelect","select",null,m,b),f.push({event:m,listeners:E}),m.target=Z1)))}function yx(f,m){var b={};return b[f.toLowerCase()]=m.toLowerCase(),b["Webkit"+f]="webkit"+m,b["Moz"+f]="moz"+m,b}var J1={animationend:yx("Animation","AnimationEnd"),animationiteration:yx("Animation","AnimationIteration"),animationstart:yx("Animation","AnimationStart"),transitionend:yx("Transition","TransitionEnd")},tP={},Aj={};a&&(Aj=document.createElement("div").style,"AnimationEvent"in window||(delete J1.animationend.animation,delete J1.animationiteration.animation,delete J1.animationstart.animation),"TransitionEvent"in window||delete J1.transitionend.transition);function wx(f){if(tP[f])return tP[f];if(!J1[f])return f;var m=J1[f],b;for(b in m)if(m.hasOwnProperty(b)&&b in Aj)return tP[f]=m[b];return f}var Pj=wx("animationend"),Mj=wx("animationiteration"),Oj=wx("animationstart"),Fj=wx("transitionend"),Bj=new Map,Vj="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jf(f,m){Bj.set(f,m),r(m,[f])}for(var nP=0;nP<Vj.length;nP++){var iP=Vj[nP],B1e=iP.toLowerCase(),V1e=iP[0].toUpperCase()+iP.slice(1);jf(B1e,"on"+V1e)}jf(Pj,"onAnimationEnd"),jf(Mj,"onAnimationIteration"),jf(Oj,"onAnimationStart"),jf("dblclick","onDoubleClick"),jf("focusin","onFocus"),jf("focusout","onBlur"),jf(Fj,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),r("onBeforeInput",["compositionend","keypress","textInput","paste"]),r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W1e=new Set("cancel close invalid load scroll toggle".split(" ").concat(cw));function Wj(f,m,b){var E=f.type||"unknown-event";f.currentTarget=b,Qn(E,m,void 0,f),f.currentTarget=null}function Hj(f,m){m=(m&4)!==0;for(var b=0;b<f.length;b++){var E=f[b],N=E.event;E=E.listeners;e:{var O=void 0;if(m)for(var z=E.length-1;0<=z;z--){var ee=E[z],le=ee.instance,Se=ee.currentTarget;if(ee=ee.listener,le!==O&&N.isPropagationStopped())break e;Wj(N,ee,Se),O=le}else for(z=0;z<E.length;z++){if(ee=E[z],le=ee.instance,Se=ee.currentTarget,ee=ee.listener,le!==O&&N.isPropagationStopped())break e;Wj(N,ee,Se),O=le}}}if(Ye)throw f=Rt,Ye=!1,Rt=null,f}function ss(f,m){var b=m[dP];b===void 0&&(b=m[dP]=new Set);var E=f+"__bubble";b.has(E)||(Uj(m,f,2,!1),b.add(E))}function sP(f,m,b){var E=0;m&&(E|=4),Uj(b,f,E,m)}var Cx="_reactListening"+Math.random().toString(36).slice(2);function uw(f){if(!f[Cx]){f[Cx]=!0,n.forEach(function(b){b!=="selectionchange"&&(W1e.has(b)||sP(b,!1,f),sP(b,!0,f))});var m=f.nodeType===9?f:f.ownerDocument;m===null||m[Cx]||(m[Cx]=!0,sP("selectionchange",!1,m))}}function Uj(f,m,b,E){switch(ew(m)){case 1:var N=us;break;case 4:N=GA;break;default:N=Jy}b=N.bind(null,m,b,f),N=void 0,!ie||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(N=!0),E?N!==void 0?f.addEventListener(m,b,{capture:!0,passive:N}):f.addEventListener(m,b,!0):N!==void 0?f.addEventListener(m,b,{passive:N}):f.addEventListener(m,b,!1)}function rP(f,m,b,E,N){var O=E;if((m&1)===0&&(m&2)===0&&E!==null)e:for(;;){if(E===null)return;var z=E.tag;if(z===3||z===4){var ee=E.stateNode.containerInfo;if(ee===N||ee.nodeType===8&&ee.parentNode===N)break;if(z===4)for(z=E.return;z!==null;){var le=z.tag;if((le===3||le===4)&&(le=z.stateNode.containerInfo,le===N||le.nodeType===8&&le.parentNode===N))return;z=z.return}for(;ee!==null;){if(z=ep(ee),z===null)return;if(le=z.tag,le===5||le===6){E=O=z;continue e}ee=ee.parentNode}}E=E.return}q(function(){var Se=O,He=Vr(b),qe=[];e:{var Ve=Bj.get(f);if(Ve!==void 0){var gt=j1,Ct=f;switch(f){case"keypress":if(z1(b)===0)break e;case"keydown":case"keyup":gt=P;break;case"focusin":Ct="focus",gt=G1;break;case"focusout":Ct="blur",gt=G1;break;case"beforeblur":case"afterblur":gt=G1;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gt=q1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gt=hx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gt=Ee;break;case Pj:case Mj:case Oj:gt=eh;break;case Fj:gt=Li;break;case"scroll":gt=YA;break;case"wheel":gt=ai;break;case"copy":case"cut":case"paste":gt=mx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gt=K}var Tt=(m&4)!==0,js=!Tt&&f==="scroll",_e=Tt?Ve!==null?Ve+"Capture":null:Ve;Tt=[];for(var he=Se,ye;he!==null;){ye=he;var Xe=ye.stateNode;if(ye.tag===5&&Xe!==null&&(ye=Xe,_e!==null&&(Xe=Q(he,_e),Xe!=null&&Tt.push(dw(he,Xe,ye)))),js)break;he=he.return}0<Tt.length&&(Ve=new gt(Ve,Ct,null,b,He),qe.push({event:Ve,listeners:Tt}))}}if((m&7)===0){e:{if(Ve=f==="mouseover"||f==="pointerover",gt=f==="mouseout"||f==="pointerout",Ve&&b!==hn&&(Ct=b.relatedTarget||b.fromElement)&&(ep(Ct)||Ct[th]))break e;if((gt||Ve)&&(Ve=He.window===He?He:(Ve=He.ownerDocument)?Ve.defaultView||Ve.parentWindow:window,gt?(Ct=b.relatedTarget||b.toElement,gt=Se,Ct=Ct?ep(Ct):null,Ct!==null&&(js=kn(Ct),Ct!==js||Ct.tag!==5&&Ct.tag!==6)&&(Ct=null)):(gt=null,Ct=Se),gt!==Ct)){if(Tt=q1,Xe="onMouseLeave",_e="onMouseEnter",he="mouse",(f==="pointerout"||f==="pointerover")&&(Tt=K,Xe="onPointerLeave",_e="onPointerEnter",he="pointer"),js=gt==null?Ve:n_(gt),ye=Ct==null?Ve:n_(Ct),Ve=new Tt(Xe,he+"leave",gt,b,He),Ve.target=js,Ve.relatedTarget=ye,Xe=null,ep(He)===Se&&(Tt=new Tt(_e,he+"enter",Ct,b,He),Tt.target=ye,Tt.relatedTarget=js,Xe=Tt),js=Xe,gt&&Ct)t:{for(Tt=gt,_e=Ct,he=0,ye=Tt;ye;ye=e_(ye))he++;for(ye=0,Xe=_e;Xe;Xe=e_(Xe))ye++;for(;0<he-ye;)Tt=e_(Tt),he--;for(;0<ye-he;)_e=e_(_e),ye--;for(;he--;){if(Tt===_e||_e!==null&&Tt===_e.alternate)break t;Tt=e_(Tt),_e=e_(_e)}Tt=null}else Tt=null;gt!==null&&zj(qe,Ve,gt,Tt,!1),Ct!==null&&js!==null&&zj(qe,js,Ct,Tt,!0)}}e:{if(Ve=Se?n_(Se):window,gt=Ve.nodeName&&Ve.nodeName.toLowerCase(),gt==="select"||gt==="input"&&Ve.type==="file")var Pt=D1e;else if(Cj(Ve))if(kj)Pt=P1e;else{Pt=R1e;var jt=N1e}else(gt=Ve.nodeName)&&gt.toLowerCase()==="input"&&(Ve.type==="checkbox"||Ve.type==="radio")&&(Pt=A1e);if(Pt&&(Pt=Pt(f,Se))){Sj(qe,Pt,b,He);break e}jt&&jt(f,Ve,Se),f==="focusout"&&(jt=Ve._wrapperState)&&jt.controlled&&Ve.type==="number"&&Hs(Ve,"number",Ve.value)}switch(jt=Se?n_(Se):window,f){case"focusin":(Cj(jt)||jt.contentEditable==="true")&&(Z1=jt,JA=Se,lw=null);break;case"focusout":lw=JA=Z1=null;break;case"mousedown":eP=!0;break;case"contextmenu":case"mouseup":case"dragend":eP=!1,Rj(qe,b,He);break;case"selectionchange":if(F1e)break;case"keydown":case"keyup":Rj(qe,b,He)}var $t;if(or)e:{switch(f){case"compositionstart":var sn="onCompositionStart";break e;case"compositionend":sn="onCompositionEnd";break e;case"compositionupdate":sn="onCompositionUpdate";break e}sn=void 0}else X1?yj(f,b)&&(sn="onCompositionEnd"):f==="keydown"&&b.keyCode===229&&(sn="onCompositionStart");sn&&(Jm&&b.locale!=="ko"&&(X1||sn!=="onCompositionStart"?sn==="onCompositionEnd"&&X1&&($t=tw()):(gl=He,U1="value"in gl?gl.value:gl.textContent,X1=!0)),jt=Sx(Se,sn),0<jt.length&&(sn=new sw(sn,f,null,b,He),qe.push({event:sn,listeners:jt}),$t?sn.data=$t:($t=wj(b),$t!==null&&(sn.data=$t)))),($t=ml?E1e(f,b):T1e(f,b))&&(Se=Sx(Se,"onBeforeInput"),0<Se.length&&(He=new sw("onBeforeInput","beforeinput",null,b,He),qe.push({event:He,listeners:Se}),He.data=$t))}Hj(qe,m)})}function dw(f,m,b){return{instance:f,listener:m,currentTarget:b}}function Sx(f,m){for(var b=m+"Capture",E=[];f!==null;){var N=f,O=N.stateNode;N.tag===5&&O!==null&&(N=O,O=Q(f,b),O!=null&&E.unshift(dw(f,O,N)),O=Q(f,m),O!=null&&E.push(dw(f,O,N))),f=f.return}return E}function e_(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5);return f||null}function zj(f,m,b,E,N){for(var O=m._reactName,z=[];b!==null&&b!==E;){var ee=b,le=ee.alternate,Se=ee.stateNode;if(le!==null&&le===E)break;ee.tag===5&&Se!==null&&(ee=Se,N?(le=Q(b,O),le!=null&&z.unshift(dw(b,le,ee))):N||(le=Q(b,O),le!=null&&z.push(dw(b,le,ee)))),b=b.return}z.length!==0&&f.push({event:m,listeners:z})}var H1e=/\r\n?/g,U1e=/\u0000|\uFFFD/g;function jj(f){return(typeof f=="string"?f:""+f).replace(H1e,`
`).replace(U1e,"")}function kx(f,m,b){if(m=jj(m),jj(f)!==m&&b)throw Error(t(425))}function xx(){}var oP=null,aP=null;function lP(f,m){return f==="textarea"||f==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var cP=typeof setTimeout=="function"?setTimeout:void 0,z1e=typeof clearTimeout=="function"?clearTimeout:void 0,$j=typeof Promise=="function"?Promise:void 0,j1e=typeof queueMicrotask=="function"?queueMicrotask:typeof $j<"u"?function(f){return $j.resolve(null).then(f).catch($1e)}:cP;function $1e(f){setTimeout(function(){throw f})}function uP(f,m){var b=m,E=0;do{var N=b.nextSibling;if(f.removeChild(b),N&&N.nodeType===8)if(b=N.data,b==="/$"){if(E===0){f.removeChild(N),Lc(m);return}E--}else b!=="$"&&b!=="$?"&&b!=="$!"||E++;b=N}while(b);Lc(m)}function $f(f){for(;f!=null;f=f.nextSibling){var m=f.nodeType;if(m===1||m===3)break;if(m===8){if(m=f.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return f}function qj(f){f=f.previousSibling;for(var m=0;f;){if(f.nodeType===8){var b=f.data;if(b==="$"||b==="$!"||b==="$?"){if(m===0)return f;m--}else b==="/$"&&m++}f=f.previousSibling}return null}var t_=Math.random().toString(36).slice(2),Fu="__reactFiber$"+t_,hw="__reactProps$"+t_,th="__reactContainer$"+t_,dP="__reactEvents$"+t_,q1e="__reactListeners$"+t_,K1e="__reactHandles$"+t_;function ep(f){var m=f[Fu];if(m)return m;for(var b=f.parentNode;b;){if(m=b[th]||b[Fu]){if(b=m.alternate,m.child!==null||b!==null&&b.child!==null)for(f=qj(f);f!==null;){if(b=f[Fu])return b;f=qj(f)}return m}f=b,b=f.parentNode}return null}function fw(f){return f=f[Fu]||f[th],!f||f.tag!==5&&f.tag!==6&&f.tag!==13&&f.tag!==3?null:f}function n_(f){if(f.tag===5||f.tag===6)return f.stateNode;throw Error(t(33))}function Ex(f){return f[hw]||null}var hP=[],i_=-1;function qf(f){return{current:f}}function rs(f){0>i_||(f.current=hP[i_],hP[i_]=null,i_--)}function Qi(f,m){i_++,hP[i_]=f.current,f.current=m}var Kf={},Oo=qf(Kf),Aa=qf(!1),tp=Kf;function s_(f,m){var b=f.type.contextTypes;if(!b)return Kf;var E=f.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===m)return E.__reactInternalMemoizedMaskedChildContext;var N={},O;for(O in b)N[O]=m[O];return E&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=m,f.__reactInternalMemoizedMaskedChildContext=N),N}function Pa(f){return f=f.childContextTypes,f!=null}function Tx(){rs(Aa),rs(Oo)}function Kj(f,m,b){if(Oo.current!==Kf)throw Error(t(168));Qi(Oo,m),Qi(Aa,b)}function Gj(f,m,b){var E=f.stateNode;if(m=m.childContextTypes,typeof E.getChildContext!="function")return b;E=E.getChildContext();for(var N in E)if(!(N in m))throw Error(t(108,We(f)||"Unknown",N));return ve({},b,E)}function Lx(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||Kf,tp=Oo.current,Qi(Oo,f),Qi(Aa,Aa.current),!0}function Yj(f,m,b){var E=f.stateNode;if(!E)throw Error(t(169));b?(f=Gj(f,m,tp),E.__reactInternalMemoizedMergedChildContext=f,rs(Aa),rs(Oo),Qi(Oo,f)):rs(Aa),Qi(Aa,b)}var nh=null,Ix=!1,fP=!1;function Qj(f){nh===null?nh=[f]:nh.push(f)}function G1e(f){Ix=!0,Qj(f)}function Gf(){if(!fP&&nh!==null){fP=!0;var f=0,m=Xn;try{var b=nh;for(Xn=1;f<b.length;f++){var E=b[f];do E=E(!0);while(E!==null)}nh=null,Ix=!1}catch(N){throw nh!==null&&(nh=nh.slice(f+1)),je(ct,Gf),N}finally{Xn=m,fP=!1}}return null}var r_=[],o_=0,Dx=null,Nx=0,Kl=[],Gl=0,np=null,ih=1,sh="";function ip(f,m){r_[o_++]=Nx,r_[o_++]=Dx,Dx=f,Nx=m}function Xj(f,m,b){Kl[Gl++]=ih,Kl[Gl++]=sh,Kl[Gl++]=np,np=f;var E=ih;f=sh;var N=32-Yi(E)-1;E&=~(1<<N),b+=1;var O=32-Yi(m)+N;if(30<O){var z=N-N%5;O=(E&(1<<z)-1).toString(32),E>>=z,N-=z,ih=1<<32-Yi(m)+N|b<<N|E,sh=O+f}else ih=1<<O|b<<N|E,sh=f}function gP(f){f.return!==null&&(ip(f,1),Xj(f,1,0))}function mP(f){for(;f===Dx;)Dx=r_[--o_],r_[o_]=null,Nx=r_[--o_],r_[o_]=null;for(;f===np;)np=Kl[--Gl],Kl[Gl]=null,sh=Kl[--Gl],Kl[Gl]=null,ih=Kl[--Gl],Kl[Gl]=null}var pl=null,_l=null,ds=!1,Nc=null;function Zj(f,m){var b=Zl(5,null,null,0);b.elementType="DELETED",b.stateNode=m,b.return=f,m=f.deletions,m===null?(f.deletions=[b],f.flags|=16):m.push(b)}function Jj(f,m){switch(f.tag){case 5:var b=f.type;return m=m.nodeType!==1||b.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(f.stateNode=m,pl=f,_l=$f(m.firstChild),!0):!1;case 6:return m=f.pendingProps===""||m.nodeType!==3?null:m,m!==null?(f.stateNode=m,pl=f,_l=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(b=np!==null?{id:ih,overflow:sh}:null,f.memoizedState={dehydrated:m,treeContext:b,retryLane:1073741824},b=Zl(18,null,null,0),b.stateNode=m,b.return=f,f.child=b,pl=f,_l=null,!0):!1;default:return!1}}function pP(f){return(f.mode&1)!==0&&(f.flags&128)===0}function _P(f){if(ds){var m=_l;if(m){var b=m;if(!Jj(f,m)){if(pP(f))throw Error(t(418));m=$f(b.nextSibling);var E=pl;m&&Jj(f,m)?Zj(E,b):(f.flags=f.flags&-4097|2,ds=!1,pl=f)}}else{if(pP(f))throw Error(t(418));f.flags=f.flags&-4097|2,ds=!1,pl=f}}}function e$(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;pl=f}function Rx(f){if(f!==pl)return!1;if(!ds)return e$(f),ds=!0,!1;var m;if((m=f.tag!==3)&&!(m=f.tag!==5)&&(m=f.type,m=m!=="head"&&m!=="body"&&!lP(f.type,f.memoizedProps)),m&&(m=_l)){if(pP(f))throw t$(),Error(t(418));for(;m;)Zj(f,m),m=$f(m.nextSibling)}if(e$(f),f.tag===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(t(317));e:{for(f=f.nextSibling,m=0;f;){if(f.nodeType===8){var b=f.data;if(b==="/$"){if(m===0){_l=$f(f.nextSibling);break e}m--}else b!=="$"&&b!=="$!"&&b!=="$?"||m++}f=f.nextSibling}_l=null}}else _l=pl?$f(f.stateNode.nextSibling):null;return!0}function t$(){for(var f=_l;f;)f=$f(f.nextSibling)}function a_(){_l=pl=null,ds=!1}function vP(f){Nc===null?Nc=[f]:Nc.push(f)}var Y1e=k.ReactCurrentBatchConfig;function gw(f,m,b){if(f=b.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(t(309));var E=b.stateNode}if(!E)throw Error(t(147,f));var N=E,O=""+f;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===O?m.ref:(m=function(z){var ee=N.refs;z===null?delete ee[O]:ee[O]=z},m._stringRef=O,m)}if(typeof f!="string")throw Error(t(284));if(!b._owner)throw Error(t(290,f))}return f}function Ax(f,m){throw f=Object.prototype.toString.call(m),Error(t(31,f==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":f))}function n$(f){var m=f._init;return m(f._payload)}function i$(f){function m(_e,he){if(f){var ye=_e.deletions;ye===null?(_e.deletions=[he],_e.flags|=16):ye.push(he)}}function b(_e,he){if(!f)return null;for(;he!==null;)m(_e,he),he=he.sibling;return null}function E(_e,he){for(_e=new Map;he!==null;)he.key!==null?_e.set(he.key,he):_e.set(he.index,he),he=he.sibling;return _e}function N(_e,he){return _e=ng(_e,he),_e.index=0,_e.sibling=null,_e}function O(_e,he,ye){return _e.index=ye,f?(ye=_e.alternate,ye!==null?(ye=ye.index,ye<he?(_e.flags|=2,he):ye):(_e.flags|=2,he)):(_e.flags|=1048576,he)}function z(_e){return f&&_e.alternate===null&&(_e.flags|=2),_e}function ee(_e,he,ye,Xe){return he===null||he.tag!==6?(he=cM(ye,_e.mode,Xe),he.return=_e,he):(he=N(he,ye),he.return=_e,he)}function le(_e,he,ye,Xe){var Pt=ye.type;return Pt===L?He(_e,he,ye.props.children,Xe,ye.key):he!==null&&(he.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===ne&&n$(Pt)===he.type)?(Xe=N(he,ye.props),Xe.ref=gw(_e,he,ye),Xe.return=_e,Xe):(Xe=iE(ye.type,ye.key,ye.props,null,_e.mode,Xe),Xe.ref=gw(_e,he,ye),Xe.return=_e,Xe)}function Se(_e,he,ye,Xe){return he===null||he.tag!==4||he.stateNode.containerInfo!==ye.containerInfo||he.stateNode.implementation!==ye.implementation?(he=uM(ye,_e.mode,Xe),he.return=_e,he):(he=N(he,ye.children||[]),he.return=_e,he)}function He(_e,he,ye,Xe,Pt){return he===null||he.tag!==7?(he=dp(ye,_e.mode,Xe,Pt),he.return=_e,he):(he=N(he,ye),he.return=_e,he)}function qe(_e,he,ye){if(typeof he=="string"&&he!==""||typeof he=="number")return he=cM(""+he,_e.mode,ye),he.return=_e,he;if(typeof he=="object"&&he!==null){switch(he.$$typeof){case T:return ye=iE(he.type,he.key,he.props,null,_e.mode,ye),ye.ref=gw(_e,null,he),ye.return=_e,ye;case R:return he=uM(he,_e.mode,ye),he.return=_e,he;case ne:var Xe=he._init;return qe(_e,Xe(he._payload),ye)}if(wr(he)||ce(he))return he=dp(he,_e.mode,ye,null),he.return=_e,he;Ax(_e,he)}return null}function Ve(_e,he,ye,Xe){var Pt=he!==null?he.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return Pt!==null?null:ee(_e,he,""+ye,Xe);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case T:return ye.key===Pt?le(_e,he,ye,Xe):null;case R:return ye.key===Pt?Se(_e,he,ye,Xe):null;case ne:return Pt=ye._init,Ve(_e,he,Pt(ye._payload),Xe)}if(wr(ye)||ce(ye))return Pt!==null?null:He(_e,he,ye,Xe,null);Ax(_e,ye)}return null}function gt(_e,he,ye,Xe,Pt){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return _e=_e.get(ye)||null,ee(he,_e,""+Xe,Pt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case T:return _e=_e.get(Xe.key===null?ye:Xe.key)||null,le(he,_e,Xe,Pt);case R:return _e=_e.get(Xe.key===null?ye:Xe.key)||null,Se(he,_e,Xe,Pt);case ne:var jt=Xe._init;return gt(_e,he,ye,jt(Xe._payload),Pt)}if(wr(Xe)||ce(Xe))return _e=_e.get(ye)||null,He(he,_e,Xe,Pt,null);Ax(he,Xe)}return null}function Ct(_e,he,ye,Xe){for(var Pt=null,jt=null,$t=he,sn=he=0,jr=null;$t!==null&&sn<ye.length;sn++){$t.index>sn?(jr=$t,$t=null):jr=$t.sibling;var _i=Ve(_e,$t,ye[sn],Xe);if(_i===null){$t===null&&($t=jr);break}f&&$t&&_i.alternate===null&&m(_e,$t),he=O(_i,he,sn),jt===null?Pt=_i:jt.sibling=_i,jt=_i,$t=jr}if(sn===ye.length)return b(_e,$t),ds&&ip(_e,sn),Pt;if($t===null){for(;sn<ye.length;sn++)$t=qe(_e,ye[sn],Xe),$t!==null&&(he=O($t,he,sn),jt===null?Pt=$t:jt.sibling=$t,jt=$t);return ds&&ip(_e,sn),Pt}for($t=E(_e,$t);sn<ye.length;sn++)jr=gt($t,_e,sn,ye[sn],Xe),jr!==null&&(f&&jr.alternate!==null&&$t.delete(jr.key===null?sn:jr.key),he=O(jr,he,sn),jt===null?Pt=jr:jt.sibling=jr,jt=jr);return f&&$t.forEach(function(ig){return m(_e,ig)}),ds&&ip(_e,sn),Pt}function Tt(_e,he,ye,Xe){var Pt=ce(ye);if(typeof Pt!="function")throw Error(t(150));if(ye=Pt.call(ye),ye==null)throw Error(t(151));for(var jt=Pt=null,$t=he,sn=he=0,jr=null,_i=ye.next();$t!==null&&!_i.done;sn++,_i=ye.next()){$t.index>sn?(jr=$t,$t=null):jr=$t.sibling;var ig=Ve(_e,$t,_i.value,Xe);if(ig===null){$t===null&&($t=jr);break}f&&$t&&ig.alternate===null&&m(_e,$t),he=O(ig,he,sn),jt===null?Pt=ig:jt.sibling=ig,jt=ig,$t=jr}if(_i.done)return b(_e,$t),ds&&ip(_e,sn),Pt;if($t===null){for(;!_i.done;sn++,_i=ye.next())_i=qe(_e,_i.value,Xe),_i!==null&&(he=O(_i,he,sn),jt===null?Pt=_i:jt.sibling=_i,jt=_i);return ds&&ip(_e,sn),Pt}for($t=E(_e,$t);!_i.done;sn++,_i=ye.next())_i=gt($t,_e,sn,_i.value,Xe),_i!==null&&(f&&_i.alternate!==null&&$t.delete(_i.key===null?sn:_i.key),he=O(_i,he,sn),jt===null?Pt=_i:jt.sibling=_i,jt=_i);return f&&$t.forEach(function(L_e){return m(_e,L_e)}),ds&&ip(_e,sn),Pt}function js(_e,he,ye,Xe){if(typeof ye=="object"&&ye!==null&&ye.type===L&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case T:e:{for(var Pt=ye.key,jt=he;jt!==null;){if(jt.key===Pt){if(Pt=ye.type,Pt===L){if(jt.tag===7){b(_e,jt.sibling),he=N(jt,ye.props.children),he.return=_e,_e=he;break e}}else if(jt.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===ne&&n$(Pt)===jt.type){b(_e,jt.sibling),he=N(jt,ye.props),he.ref=gw(_e,jt,ye),he.return=_e,_e=he;break e}b(_e,jt);break}else m(_e,jt);jt=jt.sibling}ye.type===L?(he=dp(ye.props.children,_e.mode,Xe,ye.key),he.return=_e,_e=he):(Xe=iE(ye.type,ye.key,ye.props,null,_e.mode,Xe),Xe.ref=gw(_e,he,ye),Xe.return=_e,_e=Xe)}return z(_e);case R:e:{for(jt=ye.key;he!==null;){if(he.key===jt)if(he.tag===4&&he.stateNode.containerInfo===ye.containerInfo&&he.stateNode.implementation===ye.implementation){b(_e,he.sibling),he=N(he,ye.children||[]),he.return=_e,_e=he;break e}else{b(_e,he);break}else m(_e,he);he=he.sibling}he=uM(ye,_e.mode,Xe),he.return=_e,_e=he}return z(_e);case ne:return jt=ye._init,js(_e,he,jt(ye._payload),Xe)}if(wr(ye))return Ct(_e,he,ye,Xe);if(ce(ye))return Tt(_e,he,ye,Xe);Ax(_e,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,he!==null&&he.tag===6?(b(_e,he.sibling),he=N(he,ye),he.return=_e,_e=he):(b(_e,he),he=cM(ye,_e.mode,Xe),he.return=_e,_e=he),z(_e)):b(_e,he)}return js}var l_=i$(!0),s$=i$(!1),Px=qf(null),Mx=null,c_=null,bP=null;function yP(){bP=c_=Mx=null}function wP(f){var m=Px.current;rs(Px),f._currentValue=m}function CP(f,m,b){for(;f!==null;){var E=f.alternate;if((f.childLanes&m)!==m?(f.childLanes|=m,E!==null&&(E.childLanes|=m)):E!==null&&(E.childLanes&m)!==m&&(E.childLanes|=m),f===b)break;f=f.return}}function u_(f,m){Mx=f,bP=c_=null,f=f.dependencies,f!==null&&f.firstContext!==null&&((f.lanes&m)!==0&&(Ma=!0),f.firstContext=null)}function Yl(f){var m=f._currentValue;if(bP!==f)if(f={context:f,memoizedValue:m,next:null},c_===null){if(Mx===null)throw Error(t(308));c_=f,Mx.dependencies={lanes:0,firstContext:f}}else c_=c_.next=f;return m}var sp=null;function SP(f){sp===null?sp=[f]:sp.push(f)}function r$(f,m,b,E){var N=m.interleaved;return N===null?(b.next=b,SP(m)):(b.next=N.next,N.next=b),m.interleaved=b,rh(f,E)}function rh(f,m){f.lanes|=m;var b=f.alternate;for(b!==null&&(b.lanes|=m),b=f,f=f.return;f!==null;)f.childLanes|=m,b=f.alternate,b!==null&&(b.childLanes|=m),b=f,f=f.return;return b.tag===3?b.stateNode:null}var Yf=!1;function kP(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function o$(f,m){f=f.updateQueue,m.updateQueue===f&&(m.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function oh(f,m){return{eventTime:f,lane:m,tag:0,payload:null,callback:null,next:null}}function Qf(f,m,b){var E=f.updateQueue;if(E===null)return null;if(E=E.shared,(gi&2)!==0){var N=E.pending;return N===null?m.next=m:(m.next=N.next,N.next=m),E.pending=m,rh(f,b)}return N=E.interleaved,N===null?(m.next=m,SP(E)):(m.next=N.next,N.next=m),E.interleaved=m,rh(f,b)}function Ox(f,m,b){if(m=m.updateQueue,m!==null&&(m=m.shared,(b&4194240)!==0)){var E=m.lanes;E&=f.pendingLanes,b|=E,m.lanes=b,Vf(f,b)}}function a$(f,m){var b=f.updateQueue,E=f.alternate;if(E!==null&&(E=E.updateQueue,b===E)){var N=null,O=null;if(b=b.firstBaseUpdate,b!==null){do{var z={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};O===null?N=O=z:O=O.next=z,b=b.next}while(b!==null);O===null?N=O=m:O=O.next=m}else N=O=m;b={baseState:E.baseState,firstBaseUpdate:N,lastBaseUpdate:O,shared:E.shared,effects:E.effects},f.updateQueue=b;return}f=b.lastBaseUpdate,f===null?b.firstBaseUpdate=m:f.next=m,b.lastBaseUpdate=m}function Fx(f,m,b,E){var N=f.updateQueue;Yf=!1;var O=N.firstBaseUpdate,z=N.lastBaseUpdate,ee=N.shared.pending;if(ee!==null){N.shared.pending=null;var le=ee,Se=le.next;le.next=null,z===null?O=Se:z.next=Se,z=le;var He=f.alternate;He!==null&&(He=He.updateQueue,ee=He.lastBaseUpdate,ee!==z&&(ee===null?He.firstBaseUpdate=Se:ee.next=Se,He.lastBaseUpdate=le))}if(O!==null){var qe=N.baseState;z=0,He=Se=le=null,ee=O;do{var Ve=ee.lane,gt=ee.eventTime;if((E&Ve)===Ve){He!==null&&(He=He.next={eventTime:gt,lane:0,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null});e:{var Ct=f,Tt=ee;switch(Ve=m,gt=b,Tt.tag){case 1:if(Ct=Tt.payload,typeof Ct=="function"){qe=Ct.call(gt,qe,Ve);break e}qe=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=Tt.payload,Ve=typeof Ct=="function"?Ct.call(gt,qe,Ve):Ct,Ve==null)break e;qe=ve({},qe,Ve);break e;case 2:Yf=!0}}ee.callback!==null&&ee.lane!==0&&(f.flags|=64,Ve=N.effects,Ve===null?N.effects=[ee]:Ve.push(ee))}else gt={eventTime:gt,lane:Ve,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},He===null?(Se=He=gt,le=qe):He=He.next=gt,z|=Ve;if(ee=ee.next,ee===null){if(ee=N.shared.pending,ee===null)break;Ve=ee,ee=Ve.next,Ve.next=null,N.lastBaseUpdate=Ve,N.shared.pending=null}}while(!0);if(He===null&&(le=qe),N.baseState=le,N.firstBaseUpdate=Se,N.lastBaseUpdate=He,m=N.shared.interleaved,m!==null){N=m;do z|=N.lane,N=N.next;while(N!==m)}else O===null&&(N.shared.lanes=0);ap|=z,f.lanes=z,f.memoizedState=qe}}function l$(f,m,b){if(f=m.effects,m.effects=null,f!==null)for(m=0;m<f.length;m++){var E=f[m],N=E.callback;if(N!==null){if(E.callback=null,E=b,typeof N!="function")throw Error(t(191,N));N.call(E)}}}var mw={},Bu=qf(mw),pw=qf(mw),_w=qf(mw);function rp(f){if(f===mw)throw Error(t(174));return f}function xP(f,m){switch(Qi(_w,m),Qi(pw,f),Qi(Bu,mw),f=m.nodeType,f){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:Ti(null,"");break;default:f=f===8?m.parentNode:m,m=f.namespaceURI||null,f=f.tagName,m=Ti(m,f)}rs(Bu),Qi(Bu,m)}function d_(){rs(Bu),rs(pw),rs(_w)}function c$(f){rp(_w.current);var m=rp(Bu.current),b=Ti(m,f.type);m!==b&&(Qi(pw,f),Qi(Bu,b))}function EP(f){pw.current===f&&(rs(Bu),rs(pw))}var ps=qf(0);function Bx(f){for(var m=f;m!==null;){if(m.tag===13){var b=m.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var TP=[];function LP(){for(var f=0;f<TP.length;f++)TP[f]._workInProgressVersionPrimary=null;TP.length=0}var Vx=k.ReactCurrentDispatcher,IP=k.ReactCurrentBatchConfig,op=0,_s=null,xr=null,Ur=null,Wx=!1,vw=!1,bw=0,Q1e=0;function Fo(){throw Error(t(321))}function DP(f,m){if(m===null)return!1;for(var b=0;b<m.length&&b<f.length;b++)if(!Dc(f[b],m[b]))return!1;return!0}function NP(f,m,b,E,N,O){if(op=O,_s=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,Vx.current=f===null||f.memoizedState===null?e_e:t_e,f=b(E,N),vw){O=0;do{if(vw=!1,bw=0,25<=O)throw Error(t(301));O+=1,Ur=xr=null,m.updateQueue=null,Vx.current=n_e,f=b(E,N)}while(vw)}if(Vx.current=zx,m=xr!==null&&xr.next!==null,op=0,Ur=xr=_s=null,Wx=!1,m)throw Error(t(300));return f}function RP(){var f=bw!==0;return bw=0,f}function Vu(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ur===null?_s.memoizedState=Ur=f:Ur=Ur.next=f,Ur}function Ql(){if(xr===null){var f=_s.alternate;f=f!==null?f.memoizedState:null}else f=xr.next;var m=Ur===null?_s.memoizedState:Ur.next;if(m!==null)Ur=m,xr=f;else{if(f===null)throw Error(t(310));xr=f,f={memoizedState:xr.memoizedState,baseState:xr.baseState,baseQueue:xr.baseQueue,queue:xr.queue,next:null},Ur===null?_s.memoizedState=Ur=f:Ur=Ur.next=f}return Ur}function yw(f,m){return typeof m=="function"?m(f):m}function AP(f){var m=Ql(),b=m.queue;if(b===null)throw Error(t(311));b.lastRenderedReducer=f;var E=xr,N=E.baseQueue,O=b.pending;if(O!==null){if(N!==null){var z=N.next;N.next=O.next,O.next=z}E.baseQueue=N=O,b.pending=null}if(N!==null){O=N.next,E=E.baseState;var ee=z=null,le=null,Se=O;do{var He=Se.lane;if((op&He)===He)le!==null&&(le=le.next={lane:0,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null}),E=Se.hasEagerState?Se.eagerState:f(E,Se.action);else{var qe={lane:He,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null};le===null?(ee=le=qe,z=E):le=le.next=qe,_s.lanes|=He,ap|=He}Se=Se.next}while(Se!==null&&Se!==O);le===null?z=E:le.next=ee,Dc(E,m.memoizedState)||(Ma=!0),m.memoizedState=E,m.baseState=z,m.baseQueue=le,b.lastRenderedState=E}if(f=b.interleaved,f!==null){N=f;do O=N.lane,_s.lanes|=O,ap|=O,N=N.next;while(N!==f)}else N===null&&(b.lanes=0);return[m.memoizedState,b.dispatch]}function PP(f){var m=Ql(),b=m.queue;if(b===null)throw Error(t(311));b.lastRenderedReducer=f;var E=b.dispatch,N=b.pending,O=m.memoizedState;if(N!==null){b.pending=null;var z=N=N.next;do O=f(O,z.action),z=z.next;while(z!==N);Dc(O,m.memoizedState)||(Ma=!0),m.memoizedState=O,m.baseQueue===null&&(m.baseState=O),b.lastRenderedState=O}return[O,E]}function u$(){}function d$(f,m){var b=_s,E=Ql(),N=m(),O=!Dc(E.memoizedState,N);if(O&&(E.memoizedState=N,Ma=!0),E=E.queue,MP(g$.bind(null,b,E,f),[f]),E.getSnapshot!==m||O||Ur!==null&&Ur.memoizedState.tag&1){if(b.flags|=2048,ww(9,f$.bind(null,b,E,N,m),void 0,null),zr===null)throw Error(t(349));(op&30)!==0||h$(b,m,N)}return N}function h$(f,m,b){f.flags|=16384,f={getSnapshot:m,value:b},m=_s.updateQueue,m===null?(m={lastEffect:null,stores:null},_s.updateQueue=m,m.stores=[f]):(b=m.stores,b===null?m.stores=[f]:b.push(f))}function f$(f,m,b,E){m.value=b,m.getSnapshot=E,m$(m)&&p$(f)}function g$(f,m,b){return b(function(){m$(m)&&p$(f)})}function m$(f){var m=f.getSnapshot;f=f.value;try{var b=m();return!Dc(f,b)}catch{return!0}}function p$(f){var m=rh(f,1);m!==null&&Mc(m,f,1,-1)}function _$(f){var m=Vu();return typeof f=="function"&&(f=f()),m.memoizedState=m.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yw,lastRenderedState:f},m.queue=f,f=f.dispatch=J1e.bind(null,_s,f),[m.memoizedState,f]}function ww(f,m,b,E){return f={tag:f,create:m,destroy:b,deps:E,next:null},m=_s.updateQueue,m===null?(m={lastEffect:null,stores:null},_s.updateQueue=m,m.lastEffect=f.next=f):(b=m.lastEffect,b===null?m.lastEffect=f.next=f:(E=b.next,b.next=f,f.next=E,m.lastEffect=f)),f}function v$(){return Ql().memoizedState}function Hx(f,m,b,E){var N=Vu();_s.flags|=f,N.memoizedState=ww(1|m,b,void 0,E===void 0?null:E)}function Ux(f,m,b,E){var N=Ql();E=E===void 0?null:E;var O=void 0;if(xr!==null){var z=xr.memoizedState;if(O=z.destroy,E!==null&&DP(E,z.deps)){N.memoizedState=ww(m,b,O,E);return}}_s.flags|=f,N.memoizedState=ww(1|m,b,O,E)}function b$(f,m){return Hx(8390656,8,f,m)}function MP(f,m){return Ux(2048,8,f,m)}function y$(f,m){return Ux(4,2,f,m)}function w$(f,m){return Ux(4,4,f,m)}function C$(f,m){if(typeof m=="function")return f=f(),m(f),function(){m(null)};if(m!=null)return f=f(),m.current=f,function(){m.current=null}}function S$(f,m,b){return b=b!=null?b.concat([f]):null,Ux(4,4,C$.bind(null,m,f),b)}function OP(){}function k$(f,m){var b=Ql();m=m===void 0?null:m;var E=b.memoizedState;return E!==null&&m!==null&&DP(m,E[1])?E[0]:(b.memoizedState=[f,m],f)}function x$(f,m){var b=Ql();m=m===void 0?null:m;var E=b.memoizedState;return E!==null&&m!==null&&DP(m,E[1])?E[0]:(f=f(),b.memoizedState=[f,m],f)}function E$(f,m,b){return(op&21)===0?(f.baseState&&(f.baseState=!1,Ma=!0),f.memoizedState=b):(Dc(b,m)||(b=Ym(),_s.lanes|=b,ap|=b,f.baseState=!0),m)}function X1e(f,m){var b=Xn;Xn=b!==0&&4>b?b:4,f(!0);var E=IP.transition;IP.transition={};try{f(!1),m()}finally{Xn=b,IP.transition=E}}function T$(){return Ql().memoizedState}function Z1e(f,m,b){var E=eg(f);if(b={lane:E,action:b,hasEagerState:!1,eagerState:null,next:null},L$(f))I$(m,b);else if(b=r$(f,m,b,E),b!==null){var N=da();Mc(b,f,E,N),D$(b,m,E)}}function J1e(f,m,b){var E=eg(f),N={lane:E,action:b,hasEagerState:!1,eagerState:null,next:null};if(L$(f))I$(m,N);else{var O=f.alternate;if(f.lanes===0&&(O===null||O.lanes===0)&&(O=m.lastRenderedReducer,O!==null))try{var z=m.lastRenderedState,ee=O(z,b);if(N.hasEagerState=!0,N.eagerState=ee,Dc(ee,z)){var le=m.interleaved;le===null?(N.next=N,SP(m)):(N.next=le.next,le.next=N),m.interleaved=N;return}}catch{}finally{}b=r$(f,m,N,E),b!==null&&(N=da(),Mc(b,f,E,N),D$(b,m,E))}}function L$(f){var m=f.alternate;return f===_s||m!==null&&m===_s}function I$(f,m){vw=Wx=!0;var b=f.pending;b===null?m.next=m:(m.next=b.next,b.next=m),f.pending=m}function D$(f,m,b){if((b&4194240)!==0){var E=m.lanes;E&=f.pendingLanes,b|=E,m.lanes=b,Vf(f,b)}}var zx={readContext:Yl,useCallback:Fo,useContext:Fo,useEffect:Fo,useImperativeHandle:Fo,useInsertionEffect:Fo,useLayoutEffect:Fo,useMemo:Fo,useReducer:Fo,useRef:Fo,useState:Fo,useDebugValue:Fo,useDeferredValue:Fo,useTransition:Fo,useMutableSource:Fo,useSyncExternalStore:Fo,useId:Fo,unstable_isNewReconciler:!1},e_e={readContext:Yl,useCallback:function(f,m){return Vu().memoizedState=[f,m===void 0?null:m],f},useContext:Yl,useEffect:b$,useImperativeHandle:function(f,m,b){return b=b!=null?b.concat([f]):null,Hx(4194308,4,C$.bind(null,m,f),b)},useLayoutEffect:function(f,m){return Hx(4194308,4,f,m)},useInsertionEffect:function(f,m){return Hx(4,2,f,m)},useMemo:function(f,m){var b=Vu();return m=m===void 0?null:m,f=f(),b.memoizedState=[f,m],f},useReducer:function(f,m,b){var E=Vu();return m=b!==void 0?b(m):m,E.memoizedState=E.baseState=m,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:m},E.queue=f,f=f.dispatch=Z1e.bind(null,_s,f),[E.memoizedState,f]},useRef:function(f){var m=Vu();return f={current:f},m.memoizedState=f},useState:_$,useDebugValue:OP,useDeferredValue:function(f){return Vu().memoizedState=f},useTransition:function(){var f=_$(!1),m=f[0];return f=X1e.bind(null,f[1]),Vu().memoizedState=f,[m,f]},useMutableSource:function(){},useSyncExternalStore:function(f,m,b){var E=_s,N=Vu();if(ds){if(b===void 0)throw Error(t(407));b=b()}else{if(b=m(),zr===null)throw Error(t(349));(op&30)!==0||h$(E,m,b)}N.memoizedState=b;var O={value:b,getSnapshot:m};return N.queue=O,b$(g$.bind(null,E,O,f),[f]),E.flags|=2048,ww(9,f$.bind(null,E,O,b,m),void 0,null),b},useId:function(){var f=Vu(),m=zr.identifierPrefix;if(ds){var b=sh,E=ih;b=(E&~(1<<32-Yi(E)-1)).toString(32)+b,m=":"+m+"R"+b,b=bw++,0<b&&(m+="H"+b.toString(32)),m+=":"}else b=Q1e++,m=":"+m+"r"+b.toString(32)+":";return f.memoizedState=m},unstable_isNewReconciler:!1},t_e={readContext:Yl,useCallback:k$,useContext:Yl,useEffect:MP,useImperativeHandle:S$,useInsertionEffect:y$,useLayoutEffect:w$,useMemo:x$,useReducer:AP,useRef:v$,useState:function(){return AP(yw)},useDebugValue:OP,useDeferredValue:function(f){var m=Ql();return E$(m,xr.memoizedState,f)},useTransition:function(){var f=AP(yw)[0],m=Ql().memoizedState;return[f,m]},useMutableSource:u$,useSyncExternalStore:d$,useId:T$,unstable_isNewReconciler:!1},n_e={readContext:Yl,useCallback:k$,useContext:Yl,useEffect:MP,useImperativeHandle:S$,useInsertionEffect:y$,useLayoutEffect:w$,useMemo:x$,useReducer:PP,useRef:v$,useState:function(){return PP(yw)},useDebugValue:OP,useDeferredValue:function(f){var m=Ql();return xr===null?m.memoizedState=f:E$(m,xr.memoizedState,f)},useTransition:function(){var f=PP(yw)[0],m=Ql().memoizedState;return[f,m]},useMutableSource:u$,useSyncExternalStore:d$,useId:T$,unstable_isNewReconciler:!1};function Rc(f,m){if(f&&f.defaultProps){m=ve({},m),f=f.defaultProps;for(var b in f)m[b]===void 0&&(m[b]=f[b]);return m}return m}function FP(f,m,b,E){m=f.memoizedState,b=b(E,m),b=b==null?m:ve({},m,b),f.memoizedState=b,f.lanes===0&&(f.updateQueue.baseState=b)}var jx={isMounted:function(f){return(f=f._reactInternals)?kn(f)===f:!1},enqueueSetState:function(f,m,b){f=f._reactInternals;var E=da(),N=eg(f),O=oh(E,N);O.payload=m,b!=null&&(O.callback=b),m=Qf(f,O,N),m!==null&&(Mc(m,f,N,E),Ox(m,f,N))},enqueueReplaceState:function(f,m,b){f=f._reactInternals;var E=da(),N=eg(f),O=oh(E,N);O.tag=1,O.payload=m,b!=null&&(O.callback=b),m=Qf(f,O,N),m!==null&&(Mc(m,f,N,E),Ox(m,f,N))},enqueueForceUpdate:function(f,m){f=f._reactInternals;var b=da(),E=eg(f),N=oh(b,E);N.tag=2,m!=null&&(N.callback=m),m=Qf(f,N,E),m!==null&&(Mc(m,f,E,b),Ox(m,f,E))}};function N$(f,m,b,E,N,O,z){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(E,O,z):m.prototype&&m.prototype.isPureReactComponent?!aw(b,E)||!aw(N,O):!0}function R$(f,m,b){var E=!1,N=Kf,O=m.contextType;return typeof O=="object"&&O!==null?O=Yl(O):(N=Pa(m)?tp:Oo.current,E=m.contextTypes,O=(E=E!=null)?s_(f,N):Kf),m=new m(b,O),f.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=jx,f.stateNode=m,m._reactInternals=f,E&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=N,f.__reactInternalMemoizedMaskedChildContext=O),m}function A$(f,m,b,E){f=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(b,E),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(b,E),m.state!==f&&jx.enqueueReplaceState(m,m.state,null)}function BP(f,m,b,E){var N=f.stateNode;N.props=b,N.state=f.memoizedState,N.refs={},kP(f);var O=m.contextType;typeof O=="object"&&O!==null?N.context=Yl(O):(O=Pa(m)?tp:Oo.current,N.context=s_(f,O)),N.state=f.memoizedState,O=m.getDerivedStateFromProps,typeof O=="function"&&(FP(f,m,O,b),N.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(m=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),m!==N.state&&jx.enqueueReplaceState(N,N.state,null),Fx(f,b,N,E),N.state=f.memoizedState),typeof N.componentDidMount=="function"&&(f.flags|=4194308)}function h_(f,m){try{var b="",E=m;do b+=Oe(E),E=E.return;while(E);var N=b}catch(O){N=`
Error generating stack: `+O.message+`
`+O.stack}return{value:f,source:m,stack:N,digest:null}}function VP(f,m,b){return{value:f,source:null,stack:b??null,digest:m??null}}function WP(f,m){try{console.error(m.value)}catch(b){setTimeout(function(){throw b})}}var i_e=typeof WeakMap=="function"?WeakMap:Map;function P$(f,m,b){b=oh(-1,b),b.tag=3,b.payload={element:null};var E=m.value;return b.callback=function(){Xx||(Xx=!0,tM=E),WP(f,m)},b}function M$(f,m,b){b=oh(-1,b),b.tag=3;var E=f.type.getDerivedStateFromError;if(typeof E=="function"){var N=m.value;b.payload=function(){return E(N)},b.callback=function(){WP(f,m)}}var O=f.stateNode;return O!==null&&typeof O.componentDidCatch=="function"&&(b.callback=function(){WP(f,m),typeof E!="function"&&(Zf===null?Zf=new Set([this]):Zf.add(this));var z=m.stack;this.componentDidCatch(m.value,{componentStack:z!==null?z:""})}),b}function O$(f,m,b){var E=f.pingCache;if(E===null){E=f.pingCache=new i_e;var N=new Set;E.set(m,N)}else N=E.get(m),N===void 0&&(N=new Set,E.set(m,N));N.has(b)||(N.add(b),f=__e.bind(null,f,m,b),m.then(f,f))}function F$(f){do{var m;if((m=f.tag===13)&&(m=f.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return f;f=f.return}while(f!==null);return null}function B$(f,m,b,E,N){return(f.mode&1)===0?(f===m?f.flags|=65536:(f.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(m=oh(-1,1),m.tag=2,Qf(b,m,1))),b.lanes|=1),f):(f.flags|=65536,f.lanes=N,f)}var s_e=k.ReactCurrentOwner,Ma=!1;function ua(f,m,b,E){m.child=f===null?s$(m,null,b,E):l_(m,f.child,b,E)}function V$(f,m,b,E,N){b=b.render;var O=m.ref;return u_(m,N),E=NP(f,m,b,E,O,N),b=RP(),f!==null&&!Ma?(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~N,ah(f,m,N)):(ds&&b&&gP(m),m.flags|=1,ua(f,m,E,N),m.child)}function W$(f,m,b,E,N){if(f===null){var O=b.type;return typeof O=="function"&&!lM(O)&&O.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(m.tag=15,m.type=O,H$(f,m,O,E,N)):(f=iE(b.type,null,E,m,m.mode,N),f.ref=m.ref,f.return=m,m.child=f)}if(O=f.child,(f.lanes&N)===0){var z=O.memoizedProps;if(b=b.compare,b=b!==null?b:aw,b(z,E)&&f.ref===m.ref)return ah(f,m,N)}return m.flags|=1,f=ng(O,E),f.ref=m.ref,f.return=m,m.child=f}function H$(f,m,b,E,N){if(f!==null){var O=f.memoizedProps;if(aw(O,E)&&f.ref===m.ref)if(Ma=!1,m.pendingProps=E=O,(f.lanes&N)!==0)(f.flags&131072)!==0&&(Ma=!0);else return m.lanes=f.lanes,ah(f,m,N)}return HP(f,m,b,E,N)}function U$(f,m,b){var E=m.pendingProps,N=E.children,O=f!==null?f.memoizedState:null;if(E.mode==="hidden")if((m.mode&1)===0)m.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qi(g_,vl),vl|=b;else{if((b&1073741824)===0)return f=O!==null?O.baseLanes|b:b,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:f,cachePool:null,transitions:null},m.updateQueue=null,Qi(g_,vl),vl|=f,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=O!==null?O.baseLanes:b,Qi(g_,vl),vl|=E}else O!==null?(E=O.baseLanes|b,m.memoizedState=null):E=b,Qi(g_,vl),vl|=E;return ua(f,m,N,b),m.child}function z$(f,m){var b=m.ref;(f===null&&b!==null||f!==null&&f.ref!==b)&&(m.flags|=512,m.flags|=2097152)}function HP(f,m,b,E,N){var O=Pa(b)?tp:Oo.current;return O=s_(m,O),u_(m,N),b=NP(f,m,b,E,O,N),E=RP(),f!==null&&!Ma?(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~N,ah(f,m,N)):(ds&&E&&gP(m),m.flags|=1,ua(f,m,b,N),m.child)}function j$(f,m,b,E,N){if(Pa(b)){var O=!0;Lx(m)}else O=!1;if(u_(m,N),m.stateNode===null)qx(f,m),R$(m,b,E),BP(m,b,E,N),E=!0;else if(f===null){var z=m.stateNode,ee=m.memoizedProps;z.props=ee;var le=z.context,Se=b.contextType;typeof Se=="object"&&Se!==null?Se=Yl(Se):(Se=Pa(b)?tp:Oo.current,Se=s_(m,Se));var He=b.getDerivedStateFromProps,qe=typeof He=="function"||typeof z.getSnapshotBeforeUpdate=="function";qe||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(ee!==E||le!==Se)&&A$(m,z,E,Se),Yf=!1;var Ve=m.memoizedState;z.state=Ve,Fx(m,E,z,N),le=m.memoizedState,ee!==E||Ve!==le||Aa.current||Yf?(typeof He=="function"&&(FP(m,b,He,E),le=m.memoizedState),(ee=Yf||N$(m,b,ee,E,Ve,le,Se))?(qe||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(m.flags|=4194308)):(typeof z.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=E,m.memoizedState=le),z.props=E,z.state=le,z.context=Se,E=ee):(typeof z.componentDidMount=="function"&&(m.flags|=4194308),E=!1)}else{z=m.stateNode,o$(f,m),ee=m.memoizedProps,Se=m.type===m.elementType?ee:Rc(m.type,ee),z.props=Se,qe=m.pendingProps,Ve=z.context,le=b.contextType,typeof le=="object"&&le!==null?le=Yl(le):(le=Pa(b)?tp:Oo.current,le=s_(m,le));var gt=b.getDerivedStateFromProps;(He=typeof gt=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(ee!==qe||Ve!==le)&&A$(m,z,E,le),Yf=!1,Ve=m.memoizedState,z.state=Ve,Fx(m,E,z,N);var Ct=m.memoizedState;ee!==qe||Ve!==Ct||Aa.current||Yf?(typeof gt=="function"&&(FP(m,b,gt,E),Ct=m.memoizedState),(Se=Yf||N$(m,b,Se,E,Ve,Ct,le)||!1)?(He||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(E,Ct,le),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(E,Ct,le)),typeof z.componentDidUpdate=="function"&&(m.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof z.componentDidUpdate!="function"||ee===f.memoizedProps&&Ve===f.memoizedState||(m.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||ee===f.memoizedProps&&Ve===f.memoizedState||(m.flags|=1024),m.memoizedProps=E,m.memoizedState=Ct),z.props=E,z.state=Ct,z.context=le,E=Se):(typeof z.componentDidUpdate!="function"||ee===f.memoizedProps&&Ve===f.memoizedState||(m.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||ee===f.memoizedProps&&Ve===f.memoizedState||(m.flags|=1024),E=!1)}return UP(f,m,b,E,O,N)}function UP(f,m,b,E,N,O){z$(f,m);var z=(m.flags&128)!==0;if(!E&&!z)return N&&Yj(m,b,!1),ah(f,m,O);E=m.stateNode,s_e.current=m;var ee=z&&typeof b.getDerivedStateFromError!="function"?null:E.render();return m.flags|=1,f!==null&&z?(m.child=l_(m,f.child,null,O),m.child=l_(m,null,ee,O)):ua(f,m,ee,O),m.memoizedState=E.state,N&&Yj(m,b,!0),m.child}function $$(f){var m=f.stateNode;m.pendingContext?Kj(f,m.pendingContext,m.pendingContext!==m.context):m.context&&Kj(f,m.context,!1),xP(f,m.containerInfo)}function q$(f,m,b,E,N){return a_(),vP(N),m.flags|=256,ua(f,m,b,E),m.child}var zP={dehydrated:null,treeContext:null,retryLane:0};function jP(f){return{baseLanes:f,cachePool:null,transitions:null}}function K$(f,m,b){var E=m.pendingProps,N=ps.current,O=!1,z=(m.flags&128)!==0,ee;if((ee=z)||(ee=f!==null&&f.memoizedState===null?!1:(N&2)!==0),ee?(O=!0,m.flags&=-129):(f===null||f.memoizedState!==null)&&(N|=1),Qi(ps,N&1),f===null)return _P(m),f=m.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?((m.mode&1)===0?m.lanes=1:f.data==="$!"?m.lanes=8:m.lanes=1073741824,null):(z=E.children,f=E.fallback,O?(E=m.mode,O=m.child,z={mode:"hidden",children:z},(E&1)===0&&O!==null?(O.childLanes=0,O.pendingProps=z):O=sE(z,E,0,null),f=dp(f,E,b,null),O.return=m,f.return=m,O.sibling=f,m.child=O,m.child.memoizedState=jP(b),m.memoizedState=zP,f):$P(m,z));if(N=f.memoizedState,N!==null&&(ee=N.dehydrated,ee!==null))return r_e(f,m,z,E,ee,N,b);if(O){O=E.fallback,z=m.mode,N=f.child,ee=N.sibling;var le={mode:"hidden",children:E.children};return(z&1)===0&&m.child!==N?(E=m.child,E.childLanes=0,E.pendingProps=le,m.deletions=null):(E=ng(N,le),E.subtreeFlags=N.subtreeFlags&14680064),ee!==null?O=ng(ee,O):(O=dp(O,z,b,null),O.flags|=2),O.return=m,E.return=m,E.sibling=O,m.child=E,E=O,O=m.child,z=f.child.memoizedState,z=z===null?jP(b):{baseLanes:z.baseLanes|b,cachePool:null,transitions:z.transitions},O.memoizedState=z,O.childLanes=f.childLanes&~b,m.memoizedState=zP,E}return O=f.child,f=O.sibling,E=ng(O,{mode:"visible",children:E.children}),(m.mode&1)===0&&(E.lanes=b),E.return=m,E.sibling=null,f!==null&&(b=m.deletions,b===null?(m.deletions=[f],m.flags|=16):b.push(f)),m.child=E,m.memoizedState=null,E}function $P(f,m){return m=sE({mode:"visible",children:m},f.mode,0,null),m.return=f,f.child=m}function $x(f,m,b,E){return E!==null&&vP(E),l_(m,f.child,null,b),f=$P(m,m.pendingProps.children),f.flags|=2,m.memoizedState=null,f}function r_e(f,m,b,E,N,O,z){if(b)return m.flags&256?(m.flags&=-257,E=VP(Error(t(422))),$x(f,m,z,E)):m.memoizedState!==null?(m.child=f.child,m.flags|=128,null):(O=E.fallback,N=m.mode,E=sE({mode:"visible",children:E.children},N,0,null),O=dp(O,N,z,null),O.flags|=2,E.return=m,O.return=m,E.sibling=O,m.child=E,(m.mode&1)!==0&&l_(m,f.child,null,z),m.child.memoizedState=jP(z),m.memoizedState=zP,O);if((m.mode&1)===0)return $x(f,m,z,null);if(N.data==="$!"){if(E=N.nextSibling&&N.nextSibling.dataset,E)var ee=E.dgst;return E=ee,O=Error(t(419)),E=VP(O,E,void 0),$x(f,m,z,E)}if(ee=(z&f.childLanes)!==0,Ma||ee){if(E=zr,E!==null){switch(z&-z){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}N=(N&(E.suspendedLanes|z))!==0?0:N,N!==0&&N!==O.retryLane&&(O.retryLane=N,rh(f,N),Mc(E,f,N,-1))}return aM(),E=VP(Error(t(421))),$x(f,m,z,E)}return N.data==="$?"?(m.flags|=128,m.child=f.child,m=v_e.bind(null,f),N._reactRetry=m,null):(f=O.treeContext,_l=$f(N.nextSibling),pl=m,ds=!0,Nc=null,f!==null&&(Kl[Gl++]=ih,Kl[Gl++]=sh,Kl[Gl++]=np,ih=f.id,sh=f.overflow,np=m),m=$P(m,E.children),m.flags|=4096,m)}function G$(f,m,b){f.lanes|=m;var E=f.alternate;E!==null&&(E.lanes|=m),CP(f.return,m,b)}function qP(f,m,b,E,N){var O=f.memoizedState;O===null?f.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:E,tail:b,tailMode:N}:(O.isBackwards=m,O.rendering=null,O.renderingStartTime=0,O.last=E,O.tail=b,O.tailMode=N)}function Y$(f,m,b){var E=m.pendingProps,N=E.revealOrder,O=E.tail;if(ua(f,m,E.children,b),E=ps.current,(E&2)!==0)E=E&1|2,m.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=m.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&G$(f,b,m);else if(f.tag===19)G$(f,b,m);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===m)break e;for(;f.sibling===null;){if(f.return===null||f.return===m)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}E&=1}if(Qi(ps,E),(m.mode&1)===0)m.memoizedState=null;else switch(N){case"forwards":for(b=m.child,N=null;b!==null;)f=b.alternate,f!==null&&Bx(f)===null&&(N=b),b=b.sibling;b=N,b===null?(N=m.child,m.child=null):(N=b.sibling,b.sibling=null),qP(m,!1,N,b,O);break;case"backwards":for(b=null,N=m.child,m.child=null;N!==null;){if(f=N.alternate,f!==null&&Bx(f)===null){m.child=N;break}f=N.sibling,N.sibling=b,b=N,N=f}qP(m,!0,b,null,O);break;case"together":qP(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function qx(f,m){(m.mode&1)===0&&f!==null&&(f.alternate=null,m.alternate=null,m.flags|=2)}function ah(f,m,b){if(f!==null&&(m.dependencies=f.dependencies),ap|=m.lanes,(b&m.childLanes)===0)return null;if(f!==null&&m.child!==f.child)throw Error(t(153));if(m.child!==null){for(f=m.child,b=ng(f,f.pendingProps),m.child=b,b.return=m;f.sibling!==null;)f=f.sibling,b=b.sibling=ng(f,f.pendingProps),b.return=m;b.sibling=null}return m.child}function o_e(f,m,b){switch(m.tag){case 3:$$(m),a_();break;case 5:c$(m);break;case 1:Pa(m.type)&&Lx(m);break;case 4:xP(m,m.stateNode.containerInfo);break;case 10:var E=m.type._context,N=m.memoizedProps.value;Qi(Px,E._currentValue),E._currentValue=N;break;case 13:if(E=m.memoizedState,E!==null)return E.dehydrated!==null?(Qi(ps,ps.current&1),m.flags|=128,null):(b&m.child.childLanes)!==0?K$(f,m,b):(Qi(ps,ps.current&1),f=ah(f,m,b),f!==null?f.sibling:null);Qi(ps,ps.current&1);break;case 19:if(E=(b&m.childLanes)!==0,(f.flags&128)!==0){if(E)return Y$(f,m,b);m.flags|=128}if(N=m.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),Qi(ps,ps.current),E)break;return null;case 22:case 23:return m.lanes=0,U$(f,m,b)}return ah(f,m,b)}var Q$,KP,X$,Z$;Q$=function(f,m){for(var b=m.child;b!==null;){if(b.tag===5||b.tag===6)f.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===m)break;for(;b.sibling===null;){if(b.return===null||b.return===m)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},KP=function(){},X$=function(f,m,b,E){var N=f.memoizedProps;if(N!==E){f=m.stateNode,rp(Bu.current);var O=null;switch(b){case"input":N=zn(f,N),E=zn(f,E),O=[];break;case"select":N=ve({},N,{value:void 0}),E=ve({},E,{value:void 0}),O=[];break;case"textarea":N=jl(f,N),E=jl(f,E),O=[];break;default:typeof N.onClick!="function"&&typeof E.onClick=="function"&&(f.onclick=xx)}Ia(b,E);var z;b=null;for(Se in N)if(!E.hasOwnProperty(Se)&&N.hasOwnProperty(Se)&&N[Se]!=null)if(Se==="style"){var ee=N[Se];for(z in ee)ee.hasOwnProperty(z)&&(b||(b={}),b[z]="")}else Se!=="dangerouslySetInnerHTML"&&Se!=="children"&&Se!=="suppressContentEditableWarning"&&Se!=="suppressHydrationWarning"&&Se!=="autoFocus"&&(s.hasOwnProperty(Se)?O||(O=[]):(O=O||[]).push(Se,null));for(Se in E){var le=E[Se];if(ee=N!=null?N[Se]:void 0,E.hasOwnProperty(Se)&&le!==ee&&(le!=null||ee!=null))if(Se==="style")if(ee){for(z in ee)!ee.hasOwnProperty(z)||le&&le.hasOwnProperty(z)||(b||(b={}),b[z]="");for(z in le)le.hasOwnProperty(z)&&ee[z]!==le[z]&&(b||(b={}),b[z]=le[z])}else b||(O||(O=[]),O.push(Se,b)),b=le;else Se==="dangerouslySetInnerHTML"?(le=le?le.__html:void 0,ee=ee?ee.__html:void 0,le!=null&&ee!==le&&(O=O||[]).push(Se,le)):Se==="children"?typeof le!="string"&&typeof le!="number"||(O=O||[]).push(Se,""+le):Se!=="suppressContentEditableWarning"&&Se!=="suppressHydrationWarning"&&(s.hasOwnProperty(Se)?(le!=null&&Se==="onScroll"&&ss("scroll",f),O||ee===le||(O=[])):(O=O||[]).push(Se,le))}b&&(O=O||[]).push("style",b);var Se=O;(m.updateQueue=Se)&&(m.flags|=4)}},Z$=function(f,m,b,E){b!==E&&(m.flags|=4)};function Cw(f,m){if(!ds)switch(f.tailMode){case"hidden":m=f.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?f.tail=null:b.sibling=null;break;case"collapsed":b=f.tail;for(var E=null;b!==null;)b.alternate!==null&&(E=b),b=b.sibling;E===null?m||f.tail===null?f.tail=null:f.tail.sibling=null:E.sibling=null}}function Bo(f){var m=f.alternate!==null&&f.alternate.child===f.child,b=0,E=0;if(m)for(var N=f.child;N!==null;)b|=N.lanes|N.childLanes,E|=N.subtreeFlags&14680064,E|=N.flags&14680064,N.return=f,N=N.sibling;else for(N=f.child;N!==null;)b|=N.lanes|N.childLanes,E|=N.subtreeFlags,E|=N.flags,N.return=f,N=N.sibling;return f.subtreeFlags|=E,f.childLanes=b,m}function a_e(f,m,b){var E=m.pendingProps;switch(mP(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bo(m),null;case 1:return Pa(m.type)&&Tx(),Bo(m),null;case 3:return E=m.stateNode,d_(),rs(Aa),rs(Oo),LP(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(f===null||f.child===null)&&(Rx(m)?m.flags|=4:f===null||f.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Nc!==null&&(sM(Nc),Nc=null))),KP(f,m),Bo(m),null;case 5:EP(m);var N=rp(_w.current);if(b=m.type,f!==null&&m.stateNode!=null)X$(f,m,b,E,N),f.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!E){if(m.stateNode===null)throw Error(t(166));return Bo(m),null}if(f=rp(Bu.current),Rx(m)){E=m.stateNode,b=m.type;var O=m.memoizedProps;switch(E[Fu]=m,E[hw]=O,f=(m.mode&1)!==0,b){case"dialog":ss("cancel",E),ss("close",E);break;case"iframe":case"object":case"embed":ss("load",E);break;case"video":case"audio":for(N=0;N<cw.length;N++)ss(cw[N],E);break;case"source":ss("error",E);break;case"img":case"image":case"link":ss("error",E),ss("load",E);break;case"details":ss("toggle",E);break;case"input":sr(E,O),ss("invalid",E);break;case"select":E._wrapperState={wasMultiple:!!O.multiple},ss("invalid",E);break;case"textarea":aa(E,O),ss("invalid",E)}Ia(b,O),N=null;for(var z in O)if(O.hasOwnProperty(z)){var ee=O[z];z==="children"?typeof ee=="string"?E.textContent!==ee&&(O.suppressHydrationWarning!==!0&&kx(E.textContent,ee,f),N=["children",ee]):typeof ee=="number"&&E.textContent!==""+ee&&(O.suppressHydrationWarning!==!0&&kx(E.textContent,ee,f),N=["children",""+ee]):s.hasOwnProperty(z)&&ee!=null&&z==="onScroll"&&ss("scroll",E)}switch(b){case"input":Nt(E),No(E,O,!0);break;case"textarea":Nt(E),Fr(E);break;case"select":case"option":break;default:typeof O.onClick=="function"&&(E.onclick=xx)}E=N,m.updateQueue=E,E!==null&&(m.flags|=4)}else{z=N.nodeType===9?N:N.ownerDocument,f==="http://www.w3.org/1999/xhtml"&&(f=yi(b)),f==="http://www.w3.org/1999/xhtml"?b==="script"?(f=z.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild)):typeof E.is=="string"?f=z.createElement(b,{is:E.is}):(f=z.createElement(b),b==="select"&&(z=f,E.multiple?z.multiple=!0:E.size&&(z.size=E.size))):f=z.createElementNS(f,b),f[Fu]=m,f[hw]=E,Q$(f,m,!1,!1),m.stateNode=f;e:{switch(z=Br(b,E),b){case"dialog":ss("cancel",f),ss("close",f),N=E;break;case"iframe":case"object":case"embed":ss("load",f),N=E;break;case"video":case"audio":for(N=0;N<cw.length;N++)ss(cw[N],f);N=E;break;case"source":ss("error",f),N=E;break;case"img":case"image":case"link":ss("error",f),ss("load",f),N=E;break;case"details":ss("toggle",f),N=E;break;case"input":sr(f,E),N=zn(f,E),ss("invalid",f);break;case"option":N=E;break;case"select":f._wrapperState={wasMultiple:!!E.multiple},N=ve({},E,{value:void 0}),ss("invalid",f);break;case"textarea":aa(f,E),N=jl(f,E),ss("invalid",f);break;default:N=E}Ia(b,N),ee=N;for(O in ee)if(ee.hasOwnProperty(O)){var le=ee[O];O==="style"?Ci(f,le):O==="dangerouslySetInnerHTML"?(le=le?le.__html:void 0,le!=null&&La(f,le)):O==="children"?typeof le=="string"?(b!=="textarea"||le!=="")&&Cr(f,le):typeof le=="number"&&Cr(f,""+le):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(s.hasOwnProperty(O)?le!=null&&O==="onScroll"&&ss("scroll",f):le!=null&&x(f,O,le,z))}switch(b){case"input":Nt(f),No(f,E,!1);break;case"textarea":Nt(f),Fr(f);break;case"option":E.value!=null&&f.setAttribute("value",""+at(E.value));break;case"select":f.multiple=!!E.multiple,O=E.value,O!=null?Ro(f,!!E.multiple,O,!1):E.defaultValue!=null&&Ro(f,!!E.multiple,E.defaultValue,!0);break;default:typeof N.onClick=="function"&&(f.onclick=xx)}switch(b){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}}E&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Bo(m),null;case 6:if(f&&m.stateNode!=null)Z$(f,m,f.memoizedProps,E);else{if(typeof E!="string"&&m.stateNode===null)throw Error(t(166));if(b=rp(_w.current),rp(Bu.current),Rx(m)){if(E=m.stateNode,b=m.memoizedProps,E[Fu]=m,(O=E.nodeValue!==b)&&(f=pl,f!==null))switch(f.tag){case 3:kx(E.nodeValue,b,(f.mode&1)!==0);break;case 5:f.memoizedProps.suppressHydrationWarning!==!0&&kx(E.nodeValue,b,(f.mode&1)!==0)}O&&(m.flags|=4)}else E=(b.nodeType===9?b:b.ownerDocument).createTextNode(E),E[Fu]=m,m.stateNode=E}return Bo(m),null;case 13:if(rs(ps),E=m.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(ds&&_l!==null&&(m.mode&1)!==0&&(m.flags&128)===0)t$(),a_(),m.flags|=98560,O=!1;else if(O=Rx(m),E!==null&&E.dehydrated!==null){if(f===null){if(!O)throw Error(t(318));if(O=m.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(t(317));O[Fu]=m}else a_(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Bo(m),O=!1}else Nc!==null&&(sM(Nc),Nc=null),O=!0;if(!O)return m.flags&65536?m:null}return(m.flags&128)!==0?(m.lanes=b,m):(E=E!==null,E!==(f!==null&&f.memoizedState!==null)&&E&&(m.child.flags|=8192,(m.mode&1)!==0&&(f===null||(ps.current&1)!==0?Er===0&&(Er=3):aM())),m.updateQueue!==null&&(m.flags|=4),Bo(m),null);case 4:return d_(),KP(f,m),f===null&&uw(m.stateNode.containerInfo),Bo(m),null;case 10:return wP(m.type._context),Bo(m),null;case 17:return Pa(m.type)&&Tx(),Bo(m),null;case 19:if(rs(ps),O=m.memoizedState,O===null)return Bo(m),null;if(E=(m.flags&128)!==0,z=O.rendering,z===null)if(E)Cw(O,!1);else{if(Er!==0||f!==null&&(f.flags&128)!==0)for(f=m.child;f!==null;){if(z=Bx(f),z!==null){for(m.flags|=128,Cw(O,!1),E=z.updateQueue,E!==null&&(m.updateQueue=E,m.flags|=4),m.subtreeFlags=0,E=b,b=m.child;b!==null;)O=b,f=E,O.flags&=14680066,z=O.alternate,z===null?(O.childLanes=0,O.lanes=f,O.child=null,O.subtreeFlags=0,O.memoizedProps=null,O.memoizedState=null,O.updateQueue=null,O.dependencies=null,O.stateNode=null):(O.childLanes=z.childLanes,O.lanes=z.lanes,O.child=z.child,O.subtreeFlags=0,O.deletions=null,O.memoizedProps=z.memoizedProps,O.memoizedState=z.memoizedState,O.updateQueue=z.updateQueue,O.type=z.type,f=z.dependencies,O.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),b=b.sibling;return Qi(ps,ps.current&1|2),m.child}f=f.sibling}O.tail!==null&&Be()>m_&&(m.flags|=128,E=!0,Cw(O,!1),m.lanes=4194304)}else{if(!E)if(f=Bx(z),f!==null){if(m.flags|=128,E=!0,b=f.updateQueue,b!==null&&(m.updateQueue=b,m.flags|=4),Cw(O,!0),O.tail===null&&O.tailMode==="hidden"&&!z.alternate&&!ds)return Bo(m),null}else 2*Be()-O.renderingStartTime>m_&&b!==1073741824&&(m.flags|=128,E=!0,Cw(O,!1),m.lanes=4194304);O.isBackwards?(z.sibling=m.child,m.child=z):(b=O.last,b!==null?b.sibling=z:m.child=z,O.last=z)}return O.tail!==null?(m=O.tail,O.rendering=m,O.tail=m.sibling,O.renderingStartTime=Be(),m.sibling=null,b=ps.current,Qi(ps,E?b&1|2:b&1),m):(Bo(m),null);case 22:case 23:return oM(),E=m.memoizedState!==null,f!==null&&f.memoizedState!==null!==E&&(m.flags|=8192),E&&(m.mode&1)!==0?(vl&1073741824)!==0&&(Bo(m),m.subtreeFlags&6&&(m.flags|=8192)):Bo(m),null;case 24:return null;case 25:return null}throw Error(t(156,m.tag))}function l_e(f,m){switch(mP(m),m.tag){case 1:return Pa(m.type)&&Tx(),f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 3:return d_(),rs(Aa),rs(Oo),LP(),f=m.flags,(f&65536)!==0&&(f&128)===0?(m.flags=f&-65537|128,m):null;case 5:return EP(m),null;case 13:if(rs(ps),f=m.memoizedState,f!==null&&f.dehydrated!==null){if(m.alternate===null)throw Error(t(340));a_()}return f=m.flags,f&65536?(m.flags=f&-65537|128,m):null;case 19:return rs(ps),null;case 4:return d_(),null;case 10:return wP(m.type._context),null;case 22:case 23:return oM(),null;case 24:return null;default:return null}}var Kx=!1,Vo=!1,c_e=typeof WeakSet=="function"?WeakSet:Set,bt=null;function f_(f,m){var b=f.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(E){Ls(f,m,E)}else b.current=null}function GP(f,m,b){try{b()}catch(E){Ls(f,m,E)}}var J$=!1;function u_e(f,m){if(oP=Uf,f=Nj(),ZA(f)){if("selectionStart"in f)var b={start:f.selectionStart,end:f.selectionEnd};else e:{b=(b=f.ownerDocument)&&b.defaultView||window;var E=b.getSelection&&b.getSelection();if(E&&E.rangeCount!==0){b=E.anchorNode;var N=E.anchorOffset,O=E.focusNode;E=E.focusOffset;try{b.nodeType,O.nodeType}catch{b=null;break e}var z=0,ee=-1,le=-1,Se=0,He=0,qe=f,Ve=null;t:for(;;){for(var gt;qe!==b||N!==0&&qe.nodeType!==3||(ee=z+N),qe!==O||E!==0&&qe.nodeType!==3||(le=z+E),qe.nodeType===3&&(z+=qe.nodeValue.length),(gt=qe.firstChild)!==null;)Ve=qe,qe=gt;for(;;){if(qe===f)break t;if(Ve===b&&++Se===N&&(ee=z),Ve===O&&++He===E&&(le=z),(gt=qe.nextSibling)!==null)break;qe=Ve,Ve=qe.parentNode}qe=gt}b=ee===-1||le===-1?null:{start:ee,end:le}}else b=null}b=b||{start:0,end:0}}else b=null;for(aP={focusedElem:f,selectionRange:b},Uf=!1,bt=m;bt!==null;)if(m=bt,f=m.child,(m.subtreeFlags&1028)!==0&&f!==null)f.return=m,bt=f;else for(;bt!==null;){m=bt;try{var Ct=m.alternate;if((m.flags&1024)!==0)switch(m.tag){case 0:case 11:case 15:break;case 1:if(Ct!==null){var Tt=Ct.memoizedProps,js=Ct.memoizedState,_e=m.stateNode,he=_e.getSnapshotBeforeUpdate(m.elementType===m.type?Tt:Rc(m.type,Tt),js);_e.__reactInternalSnapshotBeforeUpdate=he}break;case 3:var ye=m.stateNode.containerInfo;ye.nodeType===1?ye.textContent="":ye.nodeType===9&&ye.documentElement&&ye.removeChild(ye.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Xe){Ls(m,m.return,Xe)}if(f=m.sibling,f!==null){f.return=m.return,bt=f;break}bt=m.return}return Ct=J$,J$=!1,Ct}function Sw(f,m,b){var E=m.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var N=E=E.next;do{if((N.tag&f)===f){var O=N.destroy;N.destroy=void 0,O!==void 0&&GP(m,b,O)}N=N.next}while(N!==E)}}function Gx(f,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var b=m=m.next;do{if((b.tag&f)===f){var E=b.create;b.destroy=E()}b=b.next}while(b!==m)}}function YP(f){var m=f.ref;if(m!==null){var b=f.stateNode;switch(f.tag){case 5:f=b;break;default:f=b}typeof m=="function"?m(f):m.current=f}}function eq(f){var m=f.alternate;m!==null&&(f.alternate=null,eq(m)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(m=f.stateNode,m!==null&&(delete m[Fu],delete m[hw],delete m[dP],delete m[q1e],delete m[K1e])),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function tq(f){return f.tag===5||f.tag===3||f.tag===4}function nq(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||tq(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function QP(f,m,b){var E=f.tag;if(E===5||E===6)f=f.stateNode,m?b.nodeType===8?b.parentNode.insertBefore(f,m):b.insertBefore(f,m):(b.nodeType===8?(m=b.parentNode,m.insertBefore(f,b)):(m=b,m.appendChild(f)),b=b._reactRootContainer,b!=null||m.onclick!==null||(m.onclick=xx));else if(E!==4&&(f=f.child,f!==null))for(QP(f,m,b),f=f.sibling;f!==null;)QP(f,m,b),f=f.sibling}function XP(f,m,b){var E=f.tag;if(E===5||E===6)f=f.stateNode,m?b.insertBefore(f,m):b.appendChild(f);else if(E!==4&&(f=f.child,f!==null))for(XP(f,m,b),f=f.sibling;f!==null;)XP(f,m,b),f=f.sibling}var ho=null,Ac=!1;function Xf(f,m,b){for(b=b.child;b!==null;)iq(f,m,b),b=b.sibling}function iq(f,m,b){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(xn,b)}catch{}switch(b.tag){case 5:Vo||f_(b,m);case 6:var E=ho,N=Ac;ho=null,Xf(f,m,b),ho=E,Ac=N,ho!==null&&(Ac?(f=ho,b=b.stateNode,f.nodeType===8?f.parentNode.removeChild(b):f.removeChild(b)):ho.removeChild(b.stateNode));break;case 18:ho!==null&&(Ac?(f=ho,b=b.stateNode,f.nodeType===8?uP(f.parentNode,b):f.nodeType===1&&uP(f,b),Lc(f)):uP(ho,b.stateNode));break;case 4:E=ho,N=Ac,ho=b.stateNode.containerInfo,Ac=!0,Xf(f,m,b),ho=E,Ac=N;break;case 0:case 11:case 14:case 15:if(!Vo&&(E=b.updateQueue,E!==null&&(E=E.lastEffect,E!==null))){N=E=E.next;do{var O=N,z=O.destroy;O=O.tag,z!==void 0&&((O&2)!==0||(O&4)!==0)&&GP(b,m,z),N=N.next}while(N!==E)}Xf(f,m,b);break;case 1:if(!Vo&&(f_(b,m),E=b.stateNode,typeof E.componentWillUnmount=="function"))try{E.props=b.memoizedProps,E.state=b.memoizedState,E.componentWillUnmount()}catch(ee){Ls(b,m,ee)}Xf(f,m,b);break;case 21:Xf(f,m,b);break;case 22:b.mode&1?(Vo=(E=Vo)||b.memoizedState!==null,Xf(f,m,b),Vo=E):Xf(f,m,b);break;default:Xf(f,m,b)}}function sq(f){var m=f.updateQueue;if(m!==null){f.updateQueue=null;var b=f.stateNode;b===null&&(b=f.stateNode=new c_e),m.forEach(function(E){var N=b_e.bind(null,f,E);b.has(E)||(b.add(E),E.then(N,N))})}}function Pc(f,m){var b=m.deletions;if(b!==null)for(var E=0;E<b.length;E++){var N=b[E];try{var O=f,z=m,ee=z;e:for(;ee!==null;){switch(ee.tag){case 5:ho=ee.stateNode,Ac=!1;break e;case 3:ho=ee.stateNode.containerInfo,Ac=!0;break e;case 4:ho=ee.stateNode.containerInfo,Ac=!0;break e}ee=ee.return}if(ho===null)throw Error(t(160));iq(O,z,N),ho=null,Ac=!1;var le=N.alternate;le!==null&&(le.return=null),N.return=null}catch(Se){Ls(N,m,Se)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)rq(m,f),m=m.sibling}function rq(f,m){var b=f.alternate,E=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(Pc(m,f),Wu(f),E&4){try{Sw(3,f,f.return),Gx(3,f)}catch(Tt){Ls(f,f.return,Tt)}try{Sw(5,f,f.return)}catch(Tt){Ls(f,f.return,Tt)}}break;case 1:Pc(m,f),Wu(f),E&512&&b!==null&&f_(b,b.return);break;case 5:if(Pc(m,f),Wu(f),E&512&&b!==null&&f_(b,b.return),f.flags&32){var N=f.stateNode;try{Cr(N,"")}catch(Tt){Ls(f,f.return,Tt)}}if(E&4&&(N=f.stateNode,N!=null)){var O=f.memoizedProps,z=b!==null?b.memoizedProps:O,ee=f.type,le=f.updateQueue;if(f.updateQueue=null,le!==null)try{ee==="input"&&O.type==="radio"&&O.name!=null&&Or(N,O),Br(ee,z);var Se=Br(ee,O);for(z=0;z<le.length;z+=2){var He=le[z],qe=le[z+1];He==="style"?Ci(N,qe):He==="dangerouslySetInnerHTML"?La(N,qe):He==="children"?Cr(N,qe):x(N,He,qe,Se)}switch(ee){case"input":Ts(N,O);break;case"textarea":Ao(N,O);break;case"select":var Ve=N._wrapperState.wasMultiple;N._wrapperState.wasMultiple=!!O.multiple;var gt=O.value;gt!=null?Ro(N,!!O.multiple,gt,!1):Ve!==!!O.multiple&&(O.defaultValue!=null?Ro(N,!!O.multiple,O.defaultValue,!0):Ro(N,!!O.multiple,O.multiple?[]:"",!1))}N[hw]=O}catch(Tt){Ls(f,f.return,Tt)}}break;case 6:if(Pc(m,f),Wu(f),E&4){if(f.stateNode===null)throw Error(t(162));N=f.stateNode,O=f.memoizedProps;try{N.nodeValue=O}catch(Tt){Ls(f,f.return,Tt)}}break;case 3:if(Pc(m,f),Wu(f),E&4&&b!==null&&b.memoizedState.isDehydrated)try{Lc(m.containerInfo)}catch(Tt){Ls(f,f.return,Tt)}break;case 4:Pc(m,f),Wu(f);break;case 13:Pc(m,f),Wu(f),N=f.child,N.flags&8192&&(O=N.memoizedState!==null,N.stateNode.isHidden=O,!O||N.alternate!==null&&N.alternate.memoizedState!==null||(eM=Be())),E&4&&sq(f);break;case 22:if(He=b!==null&&b.memoizedState!==null,f.mode&1?(Vo=(Se=Vo)||He,Pc(m,f),Vo=Se):Pc(m,f),Wu(f),E&8192){if(Se=f.memoizedState!==null,(f.stateNode.isHidden=Se)&&!He&&(f.mode&1)!==0)for(bt=f,He=f.child;He!==null;){for(qe=bt=He;bt!==null;){switch(Ve=bt,gt=Ve.child,Ve.tag){case 0:case 11:case 14:case 15:Sw(4,Ve,Ve.return);break;case 1:f_(Ve,Ve.return);var Ct=Ve.stateNode;if(typeof Ct.componentWillUnmount=="function"){E=Ve,b=Ve.return;try{m=E,Ct.props=m.memoizedProps,Ct.state=m.memoizedState,Ct.componentWillUnmount()}catch(Tt){Ls(E,b,Tt)}}break;case 5:f_(Ve,Ve.return);break;case 22:if(Ve.memoizedState!==null){lq(qe);continue}}gt!==null?(gt.return=Ve,bt=gt):lq(qe)}He=He.sibling}e:for(He=null,qe=f;;){if(qe.tag===5){if(He===null){He=qe;try{N=qe.stateNode,Se?(O=N.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none"):(ee=qe.stateNode,le=qe.memoizedProps.style,z=le!=null&&le.hasOwnProperty("display")?le.display:null,ee.style.display=lo("display",z))}catch(Tt){Ls(f,f.return,Tt)}}}else if(qe.tag===6){if(He===null)try{qe.stateNode.nodeValue=Se?"":qe.memoizedProps}catch(Tt){Ls(f,f.return,Tt)}}else if((qe.tag!==22&&qe.tag!==23||qe.memoizedState===null||qe===f)&&qe.child!==null){qe.child.return=qe,qe=qe.child;continue}if(qe===f)break e;for(;qe.sibling===null;){if(qe.return===null||qe.return===f)break e;He===qe&&(He=null),qe=qe.return}He===qe&&(He=null),qe.sibling.return=qe.return,qe=qe.sibling}}break;case 19:Pc(m,f),Wu(f),E&4&&sq(f);break;case 21:break;default:Pc(m,f),Wu(f)}}function Wu(f){var m=f.flags;if(m&2){try{e:{for(var b=f.return;b!==null;){if(tq(b)){var E=b;break e}b=b.return}throw Error(t(160))}switch(E.tag){case 5:var N=E.stateNode;E.flags&32&&(Cr(N,""),E.flags&=-33);var O=nq(f);XP(f,O,N);break;case 3:case 4:var z=E.stateNode.containerInfo,ee=nq(f);QP(f,ee,z);break;default:throw Error(t(161))}}catch(le){Ls(f,f.return,le)}f.flags&=-3}m&4096&&(f.flags&=-4097)}function d_e(f,m,b){bt=f,oq(f)}function oq(f,m,b){for(var E=(f.mode&1)!==0;bt!==null;){var N=bt,O=N.child;if(N.tag===22&&E){var z=N.memoizedState!==null||Kx;if(!z){var ee=N.alternate,le=ee!==null&&ee.memoizedState!==null||Vo;ee=Kx;var Se=Vo;if(Kx=z,(Vo=le)&&!Se)for(bt=N;bt!==null;)z=bt,le=z.child,z.tag===22&&z.memoizedState!==null?cq(N):le!==null?(le.return=z,bt=le):cq(N);for(;O!==null;)bt=O,oq(O),O=O.sibling;bt=N,Kx=ee,Vo=Se}aq(f)}else(N.subtreeFlags&8772)!==0&&O!==null?(O.return=N,bt=O):aq(f)}}function aq(f){for(;bt!==null;){var m=bt;if((m.flags&8772)!==0){var b=m.alternate;try{if((m.flags&8772)!==0)switch(m.tag){case 0:case 11:case 15:Vo||Gx(5,m);break;case 1:var E=m.stateNode;if(m.flags&4&&!Vo)if(b===null)E.componentDidMount();else{var N=m.elementType===m.type?b.memoizedProps:Rc(m.type,b.memoizedProps);E.componentDidUpdate(N,b.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var O=m.updateQueue;O!==null&&l$(m,O,E);break;case 3:var z=m.updateQueue;if(z!==null){if(b=null,m.child!==null)switch(m.child.tag){case 5:b=m.child.stateNode;break;case 1:b=m.child.stateNode}l$(m,z,b)}break;case 5:var ee=m.stateNode;if(b===null&&m.flags&4){b=ee;var le=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":le.autoFocus&&b.focus();break;case"img":le.src&&(b.src=le.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var Se=m.alternate;if(Se!==null){var He=Se.memoizedState;if(He!==null){var qe=He.dehydrated;qe!==null&&Lc(qe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Vo||m.flags&512&&YP(m)}catch(Ve){Ls(m,m.return,Ve)}}if(m===f){bt=null;break}if(b=m.sibling,b!==null){b.return=m.return,bt=b;break}bt=m.return}}function lq(f){for(;bt!==null;){var m=bt;if(m===f){bt=null;break}var b=m.sibling;if(b!==null){b.return=m.return,bt=b;break}bt=m.return}}function cq(f){for(;bt!==null;){var m=bt;try{switch(m.tag){case 0:case 11:case 15:var b=m.return;try{Gx(4,m)}catch(le){Ls(m,b,le)}break;case 1:var E=m.stateNode;if(typeof E.componentDidMount=="function"){var N=m.return;try{E.componentDidMount()}catch(le){Ls(m,N,le)}}var O=m.return;try{YP(m)}catch(le){Ls(m,O,le)}break;case 5:var z=m.return;try{YP(m)}catch(le){Ls(m,z,le)}}}catch(le){Ls(m,m.return,le)}if(m===f){bt=null;break}var ee=m.sibling;if(ee!==null){ee.return=m.return,bt=ee;break}bt=m.return}}var h_e=Math.ceil,Yx=k.ReactCurrentDispatcher,ZP=k.ReactCurrentOwner,Xl=k.ReactCurrentBatchConfig,gi=0,zr=null,ar=null,fo=0,vl=0,g_=qf(0),Er=0,kw=null,ap=0,Qx=0,JP=0,xw=null,Oa=null,eM=0,m_=1/0,lh=null,Xx=!1,tM=null,Zf=null,Zx=!1,Jf=null,Jx=0,Ew=0,nM=null,eE=-1,tE=0;function da(){return(gi&6)!==0?Be():eE!==-1?eE:eE=Be()}function eg(f){return(f.mode&1)===0?1:(gi&2)!==0&&fo!==0?fo&-fo:Y1e.transition!==null?(tE===0&&(tE=Ym()),tE):(f=Xn,f!==0||(f=window.event,f=f===void 0?16:ew(f.type)),f)}function Mc(f,m,b,E){if(50<Ew)throw Ew=0,nM=null,Error(t(185));Bf(f,b,E),((gi&2)===0||f!==zr)&&(f===zr&&((gi&2)===0&&(Qx|=b),Er===4&&tg(f,fo)),Fa(f,E),b===1&&gi===0&&(m.mode&1)===0&&(m_=Be()+500,Ix&&Gf()))}function Fa(f,m){var b=f.callbackNode;Qd(f,m);var E=hl(f,f===zr?fo:0);if(E===0)b!==null&&dt(b),f.callbackNode=null,f.callbackPriority=0;else if(m=E&-E,f.callbackPriority!==m){if(b!=null&&dt(b),m===1)f.tag===0?G1e(dq.bind(null,f)):Qj(dq.bind(null,f)),j1e(function(){(gi&6)===0&&Gf()}),b=null;else{switch(Wf(E)){case 1:b=ct;break;case 4:b=fn;break;case 16:b=Gt;break;case 536870912:b=Ot;break;default:b=Gt}b=bq(b,uq.bind(null,f))}f.callbackPriority=m,f.callbackNode=b}}function uq(f,m){if(eE=-1,tE=0,(gi&6)!==0)throw Error(t(327));var b=f.callbackNode;if(p_()&&f.callbackNode!==b)return null;var E=hl(f,f===zr?fo:0);if(E===0)return null;if((E&30)!==0||(E&f.expiredLanes)!==0||m)m=nE(f,E);else{m=E;var N=gi;gi|=2;var O=fq();(zr!==f||fo!==m)&&(lh=null,m_=Be()+500,cp(f,m));do try{m_e();break}catch(ee){hq(f,ee)}while(!0);yP(),Yx.current=O,gi=N,ar!==null?m=0:(zr=null,fo=0,m=Er)}if(m!==0){if(m===2&&(N=fl(f),N!==0&&(E=N,m=iM(f,N))),m===1)throw b=kw,cp(f,0),tg(f,E),Fa(f,Be()),b;if(m===6)tg(f,E);else{if(N=f.current.alternate,(E&30)===0&&!f_e(N)&&(m=nE(f,E),m===2&&(O=fl(f),O!==0&&(E=O,m=iM(f,O))),m===1))throw b=kw,cp(f,0),tg(f,E),Fa(f,Be()),b;switch(f.finishedWork=N,f.finishedLanes=E,m){case 0:case 1:throw Error(t(345));case 2:up(f,Oa,lh);break;case 3:if(tg(f,E),(E&130023424)===E&&(m=eM+500-Be(),10<m)){if(hl(f,0)!==0)break;if(N=f.suspendedLanes,(N&E)!==E){da(),f.pingedLanes|=f.suspendedLanes&N;break}f.timeoutHandle=cP(up.bind(null,f,Oa,lh),m);break}up(f,Oa,lh);break;case 4:if(tg(f,E),(E&4194240)===E)break;for(m=f.eventTimes,N=-1;0<E;){var z=31-Yi(E);O=1<<z,z=m[z],z>N&&(N=z),E&=~O}if(E=N,E=Be()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*h_e(E/1960))-E,10<E){f.timeoutHandle=cP(up.bind(null,f,Oa,lh),E);break}up(f,Oa,lh);break;case 5:up(f,Oa,lh);break;default:throw Error(t(329))}}}return Fa(f,Be()),f.callbackNode===b?uq.bind(null,f):null}function iM(f,m){var b=xw;return f.current.memoizedState.isDehydrated&&(cp(f,m).flags|=256),f=nE(f,m),f!==2&&(m=Oa,Oa=b,m!==null&&sM(m)),f}function sM(f){Oa===null?Oa=f:Oa.push.apply(Oa,f)}function f_e(f){for(var m=f;;){if(m.flags&16384){var b=m.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var E=0;E<b.length;E++){var N=b[E],O=N.getSnapshot;N=N.value;try{if(!Dc(O(),N))return!1}catch{return!1}}}if(b=m.child,m.subtreeFlags&16384&&b!==null)b.return=m,m=b;else{if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function tg(f,m){for(m&=~JP,m&=~Qx,f.suspendedLanes|=m,f.pingedLanes&=~m,f=f.expirationTimes;0<m;){var b=31-Yi(m),E=1<<b;f[b]=-1,m&=~E}}function dq(f){if((gi&6)!==0)throw Error(t(327));p_();var m=hl(f,0);if((m&1)===0)return Fa(f,Be()),null;var b=nE(f,m);if(f.tag!==0&&b===2){var E=fl(f);E!==0&&(m=E,b=iM(f,E))}if(b===1)throw b=kw,cp(f,0),tg(f,m),Fa(f,Be()),b;if(b===6)throw Error(t(345));return f.finishedWork=f.current.alternate,f.finishedLanes=m,up(f,Oa,lh),Fa(f,Be()),null}function rM(f,m){var b=gi;gi|=1;try{return f(m)}finally{gi=b,gi===0&&(m_=Be()+500,Ix&&Gf())}}function lp(f){Jf!==null&&Jf.tag===0&&(gi&6)===0&&p_();var m=gi;gi|=1;var b=Xl.transition,E=Xn;try{if(Xl.transition=null,Xn=1,f)return f()}finally{Xn=E,Xl.transition=b,gi=m,(gi&6)===0&&Gf()}}function oM(){vl=g_.current,rs(g_)}function cp(f,m){f.finishedWork=null,f.finishedLanes=0;var b=f.timeoutHandle;if(b!==-1&&(f.timeoutHandle=-1,z1e(b)),ar!==null)for(b=ar.return;b!==null;){var E=b;switch(mP(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&Tx();break;case 3:d_(),rs(Aa),rs(Oo),LP();break;case 5:EP(E);break;case 4:d_();break;case 13:rs(ps);break;case 19:rs(ps);break;case 10:wP(E.type._context);break;case 22:case 23:oM()}b=b.return}if(zr=f,ar=f=ng(f.current,null),fo=vl=m,Er=0,kw=null,JP=Qx=ap=0,Oa=xw=null,sp!==null){for(m=0;m<sp.length;m++)if(b=sp[m],E=b.interleaved,E!==null){b.interleaved=null;var N=E.next,O=b.pending;if(O!==null){var z=O.next;O.next=N,E.next=z}b.pending=E}sp=null}return f}function hq(f,m){do{var b=ar;try{if(yP(),Vx.current=zx,Wx){for(var E=_s.memoizedState;E!==null;){var N=E.queue;N!==null&&(N.pending=null),E=E.next}Wx=!1}if(op=0,Ur=xr=_s=null,vw=!1,bw=0,ZP.current=null,b===null||b.return===null){Er=1,kw=m,ar=null;break}e:{var O=f,z=b.return,ee=b,le=m;if(m=fo,ee.flags|=32768,le!==null&&typeof le=="object"&&typeof le.then=="function"){var Se=le,He=ee,qe=He.tag;if((He.mode&1)===0&&(qe===0||qe===11||qe===15)){var Ve=He.alternate;Ve?(He.updateQueue=Ve.updateQueue,He.memoizedState=Ve.memoizedState,He.lanes=Ve.lanes):(He.updateQueue=null,He.memoizedState=null)}var gt=F$(z);if(gt!==null){gt.flags&=-257,B$(gt,z,ee,O,m),gt.mode&1&&O$(O,Se,m),m=gt,le=Se;var Ct=m.updateQueue;if(Ct===null){var Tt=new Set;Tt.add(le),m.updateQueue=Tt}else Ct.add(le);break e}else{if((m&1)===0){O$(O,Se,m),aM();break e}le=Error(t(426))}}else if(ds&&ee.mode&1){var js=F$(z);if(js!==null){(js.flags&65536)===0&&(js.flags|=256),B$(js,z,ee,O,m),vP(h_(le,ee));break e}}O=le=h_(le,ee),Er!==4&&(Er=2),xw===null?xw=[O]:xw.push(O),O=z;do{switch(O.tag){case 3:O.flags|=65536,m&=-m,O.lanes|=m;var _e=P$(O,le,m);a$(O,_e);break e;case 1:ee=le;var he=O.type,ye=O.stateNode;if((O.flags&128)===0&&(typeof he.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(Zf===null||!Zf.has(ye)))){O.flags|=65536,m&=-m,O.lanes|=m;var Xe=M$(O,ee,m);a$(O,Xe);break e}}O=O.return}while(O!==null)}mq(b)}catch(Pt){m=Pt,ar===b&&b!==null&&(ar=b=b.return);continue}break}while(!0)}function fq(){var f=Yx.current;return Yx.current=zx,f===null?zx:f}function aM(){(Er===0||Er===3||Er===2)&&(Er=4),zr===null||(ap&268435455)===0&&(Qx&268435455)===0||tg(zr,fo)}function nE(f,m){var b=gi;gi|=2;var E=fq();(zr!==f||fo!==m)&&(lh=null,cp(f,m));do try{g_e();break}catch(N){hq(f,N)}while(!0);if(yP(),gi=b,Yx.current=E,ar!==null)throw Error(t(261));return zr=null,fo=0,Er}function g_e(){for(;ar!==null;)gq(ar)}function m_e(){for(;ar!==null&&!oi();)gq(ar)}function gq(f){var m=vq(f.alternate,f,vl);f.memoizedProps=f.pendingProps,m===null?mq(f):ar=m,ZP.current=null}function mq(f){var m=f;do{var b=m.alternate;if(f=m.return,(m.flags&32768)===0){if(b=a_e(b,m,vl),b!==null){ar=b;return}}else{if(b=l_e(b,m),b!==null){b.flags&=32767,ar=b;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{Er=6,ar=null;return}}if(m=m.sibling,m!==null){ar=m;return}ar=m=f}while(m!==null);Er===0&&(Er=5)}function up(f,m,b){var E=Xn,N=Xl.transition;try{Xl.transition=null,Xn=1,p_e(f,m,b,E)}finally{Xl.transition=N,Xn=E}return null}function p_e(f,m,b,E){do p_();while(Jf!==null);if((gi&6)!==0)throw Error(t(327));b=f.finishedWork;var N=f.finishedLanes;if(b===null)return null;if(f.finishedWork=null,f.finishedLanes=0,b===f.current)throw Error(t(177));f.callbackNode=null,f.callbackPriority=0;var O=b.lanes|b.childLanes;if(Wi(f,O),f===zr&&(ar=zr=null,fo=0),(b.subtreeFlags&2064)===0&&(b.flags&2064)===0||Zx||(Zx=!0,bq(Gt,function(){return p_(),null})),O=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||O){O=Xl.transition,Xl.transition=null;var z=Xn;Xn=1;var ee=gi;gi|=4,ZP.current=null,u_e(f,b),rq(b,f),O1e(aP),Uf=!!oP,aP=oP=null,f.current=b,d_e(b),st(),gi=ee,Xn=z,Xl.transition=O}else f.current=b;if(Zx&&(Zx=!1,Jf=f,Jx=N),O=f.pendingLanes,O===0&&(Zf=null),Mo(b.stateNode),Fa(f,Be()),m!==null)for(E=f.onRecoverableError,b=0;b<m.length;b++)N=m[b],E(N.value,{componentStack:N.stack,digest:N.digest});if(Xx)throw Xx=!1,f=tM,tM=null,f;return(Jx&1)!==0&&f.tag!==0&&p_(),O=f.pendingLanes,(O&1)!==0?f===nM?Ew++:(Ew=0,nM=f):Ew=0,Gf(),null}function p_(){if(Jf!==null){var f=Wf(Jx),m=Xl.transition,b=Xn;try{if(Xl.transition=null,Xn=16>f?16:f,Jf===null)var E=!1;else{if(f=Jf,Jf=null,Jx=0,(gi&6)!==0)throw Error(t(331));var N=gi;for(gi|=4,bt=f.current;bt!==null;){var O=bt,z=O.child;if((bt.flags&16)!==0){var ee=O.deletions;if(ee!==null){for(var le=0;le<ee.length;le++){var Se=ee[le];for(bt=Se;bt!==null;){var He=bt;switch(He.tag){case 0:case 11:case 15:Sw(8,He,O)}var qe=He.child;if(qe!==null)qe.return=He,bt=qe;else for(;bt!==null;){He=bt;var Ve=He.sibling,gt=He.return;if(eq(He),He===Se){bt=null;break}if(Ve!==null){Ve.return=gt,bt=Ve;break}bt=gt}}}var Ct=O.alternate;if(Ct!==null){var Tt=Ct.child;if(Tt!==null){Ct.child=null;do{var js=Tt.sibling;Tt.sibling=null,Tt=js}while(Tt!==null)}}bt=O}}if((O.subtreeFlags&2064)!==0&&z!==null)z.return=O,bt=z;else e:for(;bt!==null;){if(O=bt,(O.flags&2048)!==0)switch(O.tag){case 0:case 11:case 15:Sw(9,O,O.return)}var _e=O.sibling;if(_e!==null){_e.return=O.return,bt=_e;break e}bt=O.return}}var he=f.current;for(bt=he;bt!==null;){z=bt;var ye=z.child;if((z.subtreeFlags&2064)!==0&&ye!==null)ye.return=z,bt=ye;else e:for(z=he;bt!==null;){if(ee=bt,(ee.flags&2048)!==0)try{switch(ee.tag){case 0:case 11:case 15:Gx(9,ee)}}catch(Pt){Ls(ee,ee.return,Pt)}if(ee===z){bt=null;break e}var Xe=ee.sibling;if(Xe!==null){Xe.return=ee.return,bt=Xe;break e}bt=ee.return}}if(gi=N,Gf(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(xn,f)}catch{}E=!0}return E}finally{Xn=b,Xl.transition=m}}return!1}function pq(f,m,b){m=h_(b,m),m=P$(f,m,1),f=Qf(f,m,1),m=da(),f!==null&&(Bf(f,1,m),Fa(f,m))}function Ls(f,m,b){if(f.tag===3)pq(f,f,b);else for(;m!==null;){if(m.tag===3){pq(m,f,b);break}else if(m.tag===1){var E=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Zf===null||!Zf.has(E))){f=h_(b,f),f=M$(m,f,1),m=Qf(m,f,1),f=da(),m!==null&&(Bf(m,1,f),Fa(m,f));break}}m=m.return}}function __e(f,m,b){var E=f.pingCache;E!==null&&E.delete(m),m=da(),f.pingedLanes|=f.suspendedLanes&b,zr===f&&(fo&b)===b&&(Er===4||Er===3&&(fo&130023424)===fo&&500>Be()-eM?cp(f,0):JP|=b),Fa(f,m)}function _q(f,m){m===0&&((f.mode&1)===0?m=1:(m=Gd,Gd<<=1,(Gd&130023424)===0&&(Gd=4194304)));var b=da();f=rh(f,m),f!==null&&(Bf(f,m,b),Fa(f,b))}function v_e(f){var m=f.memoizedState,b=0;m!==null&&(b=m.retryLane),_q(f,b)}function b_e(f,m){var b=0;switch(f.tag){case 13:var E=f.stateNode,N=f.memoizedState;N!==null&&(b=N.retryLane);break;case 19:E=f.stateNode;break;default:throw Error(t(314))}E!==null&&E.delete(m),_q(f,b)}var vq;vq=function(f,m,b){if(f!==null)if(f.memoizedProps!==m.pendingProps||Aa.current)Ma=!0;else{if((f.lanes&b)===0&&(m.flags&128)===0)return Ma=!1,o_e(f,m,b);Ma=(f.flags&131072)!==0}else Ma=!1,ds&&(m.flags&1048576)!==0&&Xj(m,Nx,m.index);switch(m.lanes=0,m.tag){case 2:var E=m.type;qx(f,m),f=m.pendingProps;var N=s_(m,Oo.current);u_(m,b),N=NP(null,m,E,f,N,b);var O=RP();return m.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,Pa(E)?(O=!0,Lx(m)):O=!1,m.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,kP(m),N.updater=jx,m.stateNode=N,N._reactInternals=m,BP(m,E,f,b),m=UP(null,m,E,!0,O,b)):(m.tag=0,ds&&O&&gP(m),ua(null,m,N,b),m=m.child),m;case 16:E=m.elementType;e:{switch(qx(f,m),f=m.pendingProps,N=E._init,E=N(E._payload),m.type=E,N=m.tag=w_e(E),f=Rc(E,f),N){case 0:m=HP(null,m,E,f,b);break e;case 1:m=j$(null,m,E,f,b);break e;case 11:m=V$(null,m,E,f,b);break e;case 14:m=W$(null,m,E,Rc(E.type,f),b);break e}throw Error(t(306,E,""))}return m;case 0:return E=m.type,N=m.pendingProps,N=m.elementType===E?N:Rc(E,N),HP(f,m,E,N,b);case 1:return E=m.type,N=m.pendingProps,N=m.elementType===E?N:Rc(E,N),j$(f,m,E,N,b);case 3:e:{if($$(m),f===null)throw Error(t(387));E=m.pendingProps,O=m.memoizedState,N=O.element,o$(f,m),Fx(m,E,null,b);var z=m.memoizedState;if(E=z.element,O.isDehydrated)if(O={element:E,isDehydrated:!1,cache:z.cache,pendingSuspenseBoundaries:z.pendingSuspenseBoundaries,transitions:z.transitions},m.updateQueue.baseState=O,m.memoizedState=O,m.flags&256){N=h_(Error(t(423)),m),m=q$(f,m,E,b,N);break e}else if(E!==N){N=h_(Error(t(424)),m),m=q$(f,m,E,b,N);break e}else for(_l=$f(m.stateNode.containerInfo.firstChild),pl=m,ds=!0,Nc=null,b=s$(m,null,E,b),m.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(a_(),E===N){m=ah(f,m,b);break e}ua(f,m,E,b)}m=m.child}return m;case 5:return c$(m),f===null&&_P(m),E=m.type,N=m.pendingProps,O=f!==null?f.memoizedProps:null,z=N.children,lP(E,N)?z=null:O!==null&&lP(E,O)&&(m.flags|=32),z$(f,m),ua(f,m,z,b),m.child;case 6:return f===null&&_P(m),null;case 13:return K$(f,m,b);case 4:return xP(m,m.stateNode.containerInfo),E=m.pendingProps,f===null?m.child=l_(m,null,E,b):ua(f,m,E,b),m.child;case 11:return E=m.type,N=m.pendingProps,N=m.elementType===E?N:Rc(E,N),V$(f,m,E,N,b);case 7:return ua(f,m,m.pendingProps,b),m.child;case 8:return ua(f,m,m.pendingProps.children,b),m.child;case 12:return ua(f,m,m.pendingProps.children,b),m.child;case 10:e:{if(E=m.type._context,N=m.pendingProps,O=m.memoizedProps,z=N.value,Qi(Px,E._currentValue),E._currentValue=z,O!==null)if(Dc(O.value,z)){if(O.children===N.children&&!Aa.current){m=ah(f,m,b);break e}}else for(O=m.child,O!==null&&(O.return=m);O!==null;){var ee=O.dependencies;if(ee!==null){z=O.child;for(var le=ee.firstContext;le!==null;){if(le.context===E){if(O.tag===1){le=oh(-1,b&-b),le.tag=2;var Se=O.updateQueue;if(Se!==null){Se=Se.shared;var He=Se.pending;He===null?le.next=le:(le.next=He.next,He.next=le),Se.pending=le}}O.lanes|=b,le=O.alternate,le!==null&&(le.lanes|=b),CP(O.return,b,m),ee.lanes|=b;break}le=le.next}}else if(O.tag===10)z=O.type===m.type?null:O.child;else if(O.tag===18){if(z=O.return,z===null)throw Error(t(341));z.lanes|=b,ee=z.alternate,ee!==null&&(ee.lanes|=b),CP(z,b,m),z=O.sibling}else z=O.child;if(z!==null)z.return=O;else for(z=O;z!==null;){if(z===m){z=null;break}if(O=z.sibling,O!==null){O.return=z.return,z=O;break}z=z.return}O=z}ua(f,m,N.children,b),m=m.child}return m;case 9:return N=m.type,E=m.pendingProps.children,u_(m,b),N=Yl(N),E=E(N),m.flags|=1,ua(f,m,E,b),m.child;case 14:return E=m.type,N=Rc(E,m.pendingProps),N=Rc(E.type,N),W$(f,m,E,N,b);case 15:return H$(f,m,m.type,m.pendingProps,b);case 17:return E=m.type,N=m.pendingProps,N=m.elementType===E?N:Rc(E,N),qx(f,m),m.tag=1,Pa(E)?(f=!0,Lx(m)):f=!1,u_(m,b),R$(m,E,N),BP(m,E,N,b),UP(null,m,E,!0,f,b);case 19:return Y$(f,m,b);case 22:return U$(f,m,b)}throw Error(t(156,m.tag))};function bq(f,m){return je(f,m)}function y_e(f,m,b,E){this.tag=f,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zl(f,m,b,E){return new y_e(f,m,b,E)}function lM(f){return f=f.prototype,!(!f||!f.isReactComponent)}function w_e(f){if(typeof f=="function")return lM(f)?1:0;if(f!=null){if(f=f.$$typeof,f===U)return 11;if(f===Z)return 14}return 2}function ng(f,m){var b=f.alternate;return b===null?(b=Zl(f.tag,m,f.key,f.mode),b.elementType=f.elementType,b.type=f.type,b.stateNode=f.stateNode,b.alternate=f,f.alternate=b):(b.pendingProps=m,b.type=f.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=f.flags&14680064,b.childLanes=f.childLanes,b.lanes=f.lanes,b.child=f.child,b.memoizedProps=f.memoizedProps,b.memoizedState=f.memoizedState,b.updateQueue=f.updateQueue,m=f.dependencies,b.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},b.sibling=f.sibling,b.index=f.index,b.ref=f.ref,b}function iE(f,m,b,E,N,O){var z=2;if(E=f,typeof f=="function")lM(f)&&(z=1);else if(typeof f=="string")z=5;else e:switch(f){case L:return dp(b.children,N,O,m);case I:z=8,N|=8;break;case A:return f=Zl(12,b,m,N|2),f.elementType=A,f.lanes=O,f;case W:return f=Zl(13,b,m,N),f.elementType=W,f.lanes=O,f;case G:return f=Zl(19,b,m,N),f.elementType=G,f.lanes=O,f;case fe:return sE(b,N,O,m);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case B:z=10;break e;case V:z=9;break e;case U:z=11;break e;case Z:z=14;break e;case ne:z=16,E=null;break e}throw Error(t(130,f==null?f:typeof f,""))}return m=Zl(z,b,m,N),m.elementType=f,m.type=E,m.lanes=O,m}function dp(f,m,b,E){return f=Zl(7,f,E,m),f.lanes=b,f}function sE(f,m,b,E){return f=Zl(22,f,E,m),f.elementType=fe,f.lanes=b,f.stateNode={isHidden:!1},f}function cM(f,m,b){return f=Zl(6,f,null,m),f.lanes=b,f}function uM(f,m,b){return m=Zl(4,f.children!==null?f.children:[],f.key,m),m.lanes=b,m.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},m}function C_e(f,m,b,E,N){this.tag=m,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ff(0),this.expirationTimes=Ff(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ff(0),this.identifierPrefix=E,this.onRecoverableError=N,this.mutableSourceEagerHydrationData=null}function dM(f,m,b,E,N,O,z,ee,le){return f=new C_e(f,m,b,ee,le),m===1?(m=1,O===!0&&(m|=8)):m=0,O=Zl(3,null,null,m),f.current=O,O.stateNode=f,O.memoizedState={element:E,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},kP(O),f}function S_e(f,m,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:E==null?null:""+E,children:f,containerInfo:m,implementation:b}}function yq(f){if(!f)return Kf;f=f._reactInternals;e:{if(kn(f)!==f||f.tag!==1)throw Error(t(170));var m=f;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(Pa(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(t(171))}if(f.tag===1){var b=f.type;if(Pa(b))return Gj(f,b,m)}return m}function wq(f,m,b,E,N,O,z,ee,le){return f=dM(b,E,!0,f,N,O,z,ee,le),f.context=yq(null),b=f.current,E=da(),N=eg(b),O=oh(E,N),O.callback=m??null,Qf(b,O,N),f.current.lanes=N,Bf(f,N,E),Fa(f,E),f}function rE(f,m,b,E){var N=m.current,O=da(),z=eg(N);return b=yq(b),m.context===null?m.context=b:m.pendingContext=b,m=oh(O,z),m.payload={element:f},E=E===void 0?null:E,E!==null&&(m.callback=E),f=Qf(N,m,z),f!==null&&(Mc(f,N,z,O),Ox(f,N,z)),z}function oE(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return f.child.stateNode;default:return f.child.stateNode}}function Cq(f,m){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var b=f.retryLane;f.retryLane=b!==0&&b<m?b:m}}function hM(f,m){Cq(f,m),(f=f.alternate)&&Cq(f,m)}function k_e(){return null}var Sq=typeof reportError=="function"?reportError:function(f){console.error(f)};function fM(f){this._internalRoot=f}aE.prototype.render=fM.prototype.render=function(f){var m=this._internalRoot;if(m===null)throw Error(t(409));rE(f,m,null,null)},aE.prototype.unmount=fM.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var m=f.containerInfo;lp(function(){rE(null,f,null,null)}),m[th]=null}};function aE(f){this._internalRoot=f}aE.prototype.unstable_scheduleHydration=function(f){if(f){var m=ax();f={blockedOn:null,target:f,priority:m};for(var b=0;b<Au.length&&m!==0&&m<Au[b].priority;b++);Au.splice(b,0,f),b===0&&ux(f)}};function gM(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function lE(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11&&(f.nodeType!==8||f.nodeValue!==" react-mount-point-unstable "))}function kq(){}function x_e(f,m,b,E,N){if(N){if(typeof E=="function"){var O=E;E=function(){var Se=oE(z);O.call(Se)}}var z=wq(m,E,f,0,null,!1,!1,"",kq);return f._reactRootContainer=z,f[th]=z.current,uw(f.nodeType===8?f.parentNode:f),lp(),z}for(;N=f.lastChild;)f.removeChild(N);if(typeof E=="function"){var ee=E;E=function(){var Se=oE(le);ee.call(Se)}}var le=dM(f,0,!1,null,null,!1,!1,"",kq);return f._reactRootContainer=le,f[th]=le.current,uw(f.nodeType===8?f.parentNode:f),lp(function(){rE(m,le,b,E)}),le}function cE(f,m,b,E,N){var O=b._reactRootContainer;if(O){var z=O;if(typeof N=="function"){var ee=N;N=function(){var le=oE(z);ee.call(le)}}rE(m,z,f,N)}else z=x_e(b,m,f,N,E);return oE(z)}rx=function(f){switch(f.tag){case 3:var m=f.stateNode;if(m.current.memoizedState.isDehydrated){var b=dl(m.pendingLanes);b!==0&&(Vf(m,b|1),Fa(m,Be()),(gi&6)===0&&(m_=Be()+500,Gf()))}break;case 13:lp(function(){var E=rh(f,1);if(E!==null){var N=da();Mc(E,f,1,N)}}),hM(f,1)}},W1=function(f){if(f.tag===13){var m=rh(f,134217728);if(m!==null){var b=da();Mc(m,f,134217728,b)}hM(f,134217728)}},ox=function(f){if(f.tag===13){var m=eg(f),b=rh(f,m);if(b!==null){var E=da();Mc(b,f,m,E)}hM(f,m)}},ax=function(){return Xn},lx=function(f,m){var b=Xn;try{return Xn=f,m()}finally{Xn=b}},ns=function(f,m,b){switch(m){case"input":if(Ts(f,b),m=b.name,b.type==="radio"&&m!=null){for(b=f;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<b.length;m++){var E=b[m];if(E!==f&&E.form===f.form){var N=Ex(E);if(!N)throw Error(t(90));Zt(E),Ts(E,N)}}}break;case"textarea":Ao(f,b);break;case"select":m=b.value,m!=null&&Ro(f,!!b.multiple,m,!1)}},rr=rM,kt=lp;var E_e={usingClientEntryPoint:!1,Events:[fw,n_,Ex,la,Bi,rM]},Tw={findFiberByHostInstance:ep,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},T_e={bundleType:Tw.bundleType,version:Tw.version,rendererPackageName:Tw.rendererPackageName,rendererConfig:Tw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(f){return f=mt(f),f===null?null:f.stateNode},findFiberByHostInstance:Tw.findFiberByHostInstance||k_e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uE.isDisabled&&uE.supportsFiber)try{xn=uE.inject(T_e),Fn=uE}catch{}}return Ba.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E_e,Ba.createPortal=function(f,m){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gM(m))throw Error(t(200));return S_e(f,m,null,b)},Ba.createRoot=function(f,m){if(!gM(f))throw Error(t(299));var b=!1,E="",N=Sq;return m!=null&&(m.unstable_strictMode===!0&&(b=!0),m.identifierPrefix!==void 0&&(E=m.identifierPrefix),m.onRecoverableError!==void 0&&(N=m.onRecoverableError)),m=dM(f,1,!1,null,null,b,!1,E,N),f[th]=m.current,uw(f.nodeType===8?f.parentNode:f),new fM(m)},Ba.findDOMNode=function(f){if(f==null)return null;if(f.nodeType===1)return f;var m=f._reactInternals;if(m===void 0)throw typeof f.render=="function"?Error(t(188)):(f=Object.keys(f).join(","),Error(t(268,f)));return f=mt(m),f=f===null?null:f.stateNode,f},Ba.flushSync=function(f){return lp(f)},Ba.hydrate=function(f,m,b){if(!lE(m))throw Error(t(200));return cE(null,f,m,!0,b)},Ba.hydrateRoot=function(f,m,b){if(!gM(f))throw Error(t(405));var E=b!=null&&b.hydratedSources||null,N=!1,O="",z=Sq;if(b!=null&&(b.unstable_strictMode===!0&&(N=!0),b.identifierPrefix!==void 0&&(O=b.identifierPrefix),b.onRecoverableError!==void 0&&(z=b.onRecoverableError)),m=wq(m,null,f,1,b??null,N,!1,O,z),f[th]=m.current,uw(f),E)for(f=0;f<E.length;f++)b=E[f],N=b._getVersion,N=N(b._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[b,N]:m.mutableSourceEagerHydrationData.push(b,N);return new aE(m)},Ba.render=function(f,m,b){if(!lE(m))throw Error(t(200));return cE(null,f,m,!1,b)},Ba.unmountComponentAtNode=function(f){if(!lE(f))throw Error(t(40));return f._reactRootContainer?(lp(function(){cE(null,null,f,!1,function(){f._reactRootContainer=null,f[th]=null})}),!0):!1},Ba.unstable_batchedUpdates=rM,Ba.unstable_renderSubtreeIntoContainer=function(f,m,b,E){if(!lE(b))throw Error(t(200));if(f==null||f._reactInternals===void 0)throw Error(t(38));return cE(f,m,b,!1,E)},Ba.version="18.3.1-next-f1338f8080-20240426",Ba}var Rq;function Yne(){if(Rq)return _M.exports;Rq=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),_M.exports=V_e(),_M.exports}var Aq;function W_e(){if(Aq)return dE;Aq=1;var i=Yne();return dE.createRoot=i.createRoot,dE.hydrateRoot=i.hydrateRoot,dE}var H_e=W_e();const U_e=IR(H_e);var Iw={},Pq;function z_e(){if(Pq)return Iw;Pq=1,Object.defineProperty(Iw,"__esModule",{value:!0}),Iw.parse=o,Iw.serialize=c;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,r=(()=>{const h=function(){};return h.prototype=Object.create(null),h})();function o(h,g){const p=new r,_=h.length;if(_<2)return p;const v=(g==null?void 0:g.decode)||u;let y=0;do{const w=h.indexOf("=",y);if(w===-1)break;const x=h.indexOf(";",y),k=x===-1?_:x;if(w>k){y=h.lastIndexOf(";",w-1)+1;continue}const T=a(h,y,w),R=l(h,w,T),L=h.slice(T,R);if(p[L]===void 0){let I=a(h,w+1,k),A=l(h,k,I);const B=v(h.slice(I,A));p[L]=B}y=k+1}while(y<_);return p}function a(h,g,p){do{const _=h.charCodeAt(g);if(_!==32&&_!==9)return g}while(++g<p);return p}function l(h,g,p){for(;g>p;){const _=h.charCodeAt(--g);if(_!==32&&_!==9)return g+1}return p}function c(h,g,p){const _=(p==null?void 0:p.encode)||encodeURIComponent;if(!i.test(h))throw new TypeError(`argument name is invalid: ${h}`);const v=_(g);if(!e.test(v))throw new TypeError(`argument val is invalid: ${g}`);let y=h+"="+v;if(!p)return y;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);y+="; Max-Age="+p.maxAge}if(p.domain){if(!t.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);y+="; Domain="+p.domain}if(p.path){if(!n.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);y+="; Path="+p.path}if(p.expires){if(!d(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);y+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(y+="; HttpOnly"),p.secure&&(y+="; Secure"),p.partitioned&&(y+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":y+="; Priority=Low";break;case"medium":y+="; Priority=Medium";break;case"high":y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":y+="; SameSite=Strict";break;case"lax":y+="; SameSite=Lax";break;case"none":y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return y}function u(h){if(h.indexOf("%")===-1)return h;try{return decodeURIComponent(h)}catch{return h}}function d(h){return s.call(h)==="[object Date]"}return Iw}z_e();/**
 * react-router v7.4.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Mq="popstate";function j_e(i={}){function e(n,s){let{pathname:r,search:o,hash:a}=n.location;return l5("",{pathname:r,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:BS(s)}return q_e(e,t,null,i)}function ms(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function cu(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $_e(){return Math.random().toString(36).substring(2,10)}function Oq(i,e){return{usr:i.state,key:i.key,idx:e}}function l5(i,e,t=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?gy(e):e,state:t,key:e&&e.key||n||$_e()}}function BS({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function gy(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substring(n),i=i.substring(0,n)),i&&(e.pathname=i)}return e}function q_e(i,e,t,n={}){let{window:s=document.defaultView,v5Compat:r=!1}=n,o=s.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function d(){a="POP";let v=u(),y=v==null?null:v-c;c=v,l&&l({action:a,location:_.location,delta:y})}function h(v,y){a="PUSH";let w=l5(_.location,v,y);c=u()+1;let x=Oq(w,c),k=_.createHref(w);try{o.pushState(x,"",k)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(k)}r&&l&&l({action:a,location:_.location,delta:1})}function g(v,y){a="REPLACE";let w=l5(_.location,v,y);c=u();let x=Oq(w,c),k=_.createHref(w);o.replaceState(x,"",k),r&&l&&l({action:a,location:_.location,delta:0})}function p(v){let y=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof v=="string"?v:BS(v);return w=w.replace(/ $/,"%20"),ms(y,`No window.location.(origin|href) available to create URL for href: ${w}`),new URL(w,y)}let _={get action(){return a},get location(){return i(s,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Mq,d),l=v,()=>{s.removeEventListener(Mq,d),l=null}},createHref(v){return e(s,v)},createURL:p,encodeLocation(v){let y=p(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:g,go(v){return o.go(v)}};return _}function Qne(i,e,t="/"){return K_e(i,e,t,!1)}function K_e(i,e,t,n){let s=typeof e=="string"?gy(e):e,r=lf(s.pathname||"/",t);if(r==null)return null;let o=Xne(i);G_e(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=rve(r);a=ive(o[l],c,n)}return a}function Xne(i,e=[],t=[],n=""){let s=(r,o,a)=>{let l={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};l.relativePath.startsWith("/")&&(ms(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length));let c=Qh([n,l.relativePath]),u=t.concat(l);r.children&&r.children.length>0&&(ms(r.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),Xne(r.children,e,u,c)),!(r.path==null&&!r.index)&&e.push({path:c,score:tve(c,r.index),routesMeta:u})};return i.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))s(r,o);else for(let l of Zne(r.path))s(r,o,l)}),e}function Zne(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),r=t.replace(/\?$/,"");if(n.length===0)return s?[r,""]:[r];let o=Zne(n.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),s&&a.push(...o),a.map(l=>i.startsWith("/")&&l===""?"/":l)}function G_e(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:nve(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var Y_e=/^:[\w-]+$/,Q_e=3,X_e=2,Z_e=1,J_e=10,eve=-2,Fq=i=>i==="*";function tve(i,e){let t=i.split("/"),n=t.length;return t.some(Fq)&&(n+=eve),e&&(n+=X_e),t.filter(s=>!Fq(s)).reduce((s,r)=>s+(Y_e.test(r)?Q_e:r===""?Z_e:J_e),n)}function nve(i,e){return i.length===e.length&&i.slice(0,-1).every((n,s)=>n===e[s])?i[i.length-1]-e[e.length-1]:0}function ive(i,e,t=!1){let{routesMeta:n}=i,s={},r="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,u=r==="/"?e:e.slice(r.length)||"/",d=zL({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d&&c&&t&&!n[n.length-1].route.index&&(d=zL({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Qh([r,d.pathname]),pathnameBase:cve(Qh([r,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(r=Qh([r,d.pathnameBase]))}return o}function zL(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=sve(i.path,i.caseSensitive,i.end),s=e.match(t);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((c,{paramName:u,isOptional:d},h)=>{if(u==="*"){let p=a[h]||"";o=r.slice(0,r.length-p.length).replace(/(.)\/+$/,"$1")}const g=a[h];return d&&!g?c[u]=void 0:c[u]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:o,pattern:i}}function sve(i,e=!1,t=!0){cu(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function rve(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cu(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function lf(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}function ove(i,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof i=="string"?gy(i):i;return{pathname:t?t.startsWith("/")?t:ave(t,e):e,search:uve(n),hash:dve(s)}}function ave(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function yM(i,e,t,n){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lve(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function rV(i){let e=lve(i);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function oV(i,e,t,n=!1){let s;typeof i=="string"?s=gy(i):(s={...i},ms(!s.pathname||!s.pathname.includes("?"),yM("?","pathname","search",s)),ms(!s.pathname||!s.pathname.includes("#"),yM("#","pathname","hash",s)),ms(!s.search||!s.search.includes("#"),yM("#","search","hash",s)));let r=i===""||s.pathname==="",o=r?"/":s.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=ove(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(r||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Qh=i=>i.join("/").replace(/\/\/+/g,"/"),cve=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),uve=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,dve=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function hve(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var Jne=["POST","PUT","PATCH","DELETE"];new Set(Jne);var fve=["GET",...Jne];new Set(fve);var my=F.createContext(null);my.displayName="DataRouter";var DR=F.createContext(null);DR.displayName="DataRouterState";var eie=F.createContext({isTransitioning:!1});eie.displayName="ViewTransition";var gve=F.createContext(new Map);gve.displayName="Fetchers";var mve=F.createContext(null);mve.displayName="Await";var Cu=F.createContext(null);Cu.displayName="Navigation";var o2=F.createContext(null);o2.displayName="Location";var Su=F.createContext({outlet:null,matches:[],isDataRoute:!1});Su.displayName="Route";var aV=F.createContext(null);aV.displayName="RouteError";function pve(i,{relative:e}={}){ms(py(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=F.useContext(Cu),{hash:s,pathname:r,search:o}=a2(i,{relative:e}),a=r;return t!=="/"&&(a=r==="/"?t:Qh([t,r])),n.createHref({pathname:a,search:o,hash:s})}function py(){return F.useContext(o2)!=null}function ku(){return ms(py(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(o2).location}var tie="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nie(i){F.useContext(Cu).static||F.useLayoutEffect(i)}function _y(){let{isDataRoute:i}=F.useContext(Su);return i?Dve():_ve()}function _ve(){ms(py(),"useNavigate() may be used only in the context of a <Router> component.");let i=F.useContext(my),{basename:e,navigator:t}=F.useContext(Cu),{matches:n}=F.useContext(Su),{pathname:s}=ku(),r=JSON.stringify(rV(n)),o=F.useRef(!1);return nie(()=>{o.current=!0}),F.useCallback((l,c={})=>{if(cu(o.current,tie),!o.current)return;if(typeof l=="number"){t.go(l);return}let u=oV(l,JSON.parse(r),s,c.relative==="path");i==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Qh([e,u.pathname])),(c.replace?t.replace:t.push)(u,c.state,c)},[e,t,r,s,i])}F.createContext(null);function vve(){let{matches:i}=F.useContext(Su),e=i[i.length-1];return e?e.params:{}}function a2(i,{relative:e}={}){let{matches:t}=F.useContext(Su),{pathname:n}=ku(),s=JSON.stringify(rV(t));return F.useMemo(()=>oV(i,JSON.parse(s),n,e==="path"),[i,s,n,e])}function bve(i,e){return iie(i,e)}function iie(i,e,t,n){var w;ms(py(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:r}=F.useContext(Cu),{matches:o}=F.useContext(Su),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",d=a&&a.route;{let x=d&&d.path||"";sie(c,!d||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let h=ku(),g;if(e){let x=typeof e=="string"?gy(e):e;ms(u==="/"||((w=x.pathname)==null?void 0:w.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${x.pathname}" was given in the \`location\` prop.`),g=x}else g=h;let p=g.pathname||"/",_=p;if(u!=="/"){let x=u.replace(/^\//,"").split("/");_="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=!r&&t&&t.matches&&t.matches.length>0?t.matches:Qne(i,{pathname:_});cu(d||v!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),cu(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=kve(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Qh([u,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:Qh([u,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,t,n);return e&&y?F.createElement(o2.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},y):y}function yve(){let i=Ive(),e=hve(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},r={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",i),o=F.createElement(F.Fragment,null,F.createElement("p",null," Hey developer "),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:r},"ErrorBoundary")," or"," ",F.createElement("code",{style:r},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:s},t):null,o)}var wve=F.createElement(yve,null),Cve=class extends F.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?F.createElement(Su.Provider,{value:this.props.routeContext},F.createElement(aV.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Sve({routeContext:i,match:e,children:t}){let n=F.useContext(my);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),F.createElement(Su.Provider,{value:i},t)}function kve(i,e=[],t=null,n=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let s=i,r=t==null?void 0:t.errors;if(r!=null){let l=s.findIndex(c=>c.route.id&&(r==null?void 0:r[c.route.id])!==void 0);ms(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let o=!1,a=-1;if(t)for(let l=0;l<s.length;l++){let c=s[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:u,errors:d}=t,h=c.route.loader&&!u.hasOwnProperty(c.route.id)&&(!d||d[c.route.id]===void 0);if(c.route.lazy||h){o=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((l,c,u)=>{let d,h=!1,g=null,p=null;t&&(d=r&&c.route.id?r[c.route.id]:void 0,g=c.route.errorElement||wve,o&&(a<0&&u===0?(sie("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):a===u&&(h=!0,p=c.route.hydrateFallbackElement||null)));let _=e.concat(s.slice(0,u+1)),v=()=>{let y;return d?y=g:h?y=p:c.route.Component?y=F.createElement(c.route.Component,null):c.route.element?y=c.route.element:y=l,F.createElement(Sve,{match:c,routeContext:{outlet:l,matches:_,isDataRoute:t!=null},children:y})};return t&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?F.createElement(Cve,{location:t.location,revalidation:t.revalidation,component:g,error:d,children:v(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):v()},null)}function lV(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xve(i){let e=F.useContext(my);return ms(e,lV(i)),e}function Eve(i){let e=F.useContext(DR);return ms(e,lV(i)),e}function Tve(i){let e=F.useContext(Su);return ms(e,lV(i)),e}function cV(i){let e=Tve(i),t=e.matches[e.matches.length-1];return ms(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function Lve(){return cV("useRouteId")}function Ive(){var n;let i=F.useContext(aV),e=Eve("useRouteError"),t=cV("useRouteError");return i!==void 0?i:(n=e.errors)==null?void 0:n[t]}function Dve(){let{router:i}=xve("useNavigate"),e=cV("useNavigate"),t=F.useRef(!1);return nie(()=>{t.current=!0}),F.useCallback(async(s,r={})=>{cu(t.current,tie),t.current&&(typeof s=="number"?i.navigate(s):await i.navigate(s,{fromRouteId:e,...r}))},[i,e])}var Bq={};function sie(i,e,t){!e&&!Bq[i]&&(Bq[i]=!0,cu(!1,t))}F.memo(Nve);function Nve({routes:i,future:e,state:t}){return iie(i,void 0,t,e)}function VS({to:i,replace:e,state:t,relative:n}){ms(py(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=F.useContext(Cu);cu(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:r}=F.useContext(Su),{pathname:o}=ku(),a=_y(),l=oV(i,rV(r),o,n==="path"),c=JSON.stringify(l);return F.useEffect(()=>{a(JSON.parse(c),{replace:e,state:t,relative:n})},[a,c,n,e,t]),null}function wp(i){ms(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Rve({basename:i="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:r=!1}){ms(!py(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=i.replace(/^\/*/,"/"),a=F.useMemo(()=>({basename:o,navigator:s,static:r,future:{}}),[o,s,r]);typeof t=="string"&&(t=gy(t));let{pathname:l="/",search:c="",hash:u="",state:d=null,key:h="default"}=t,g=F.useMemo(()=>{let p=lf(l,o);return p==null?null:{location:{pathname:p,search:c,hash:u,state:d,key:h},navigationType:n}},[o,l,c,u,d,h,n]);return cu(g!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:F.createElement(Cu.Provider,{value:a},F.createElement(o2.Provider,{children:e,value:g}))}function Ave({children:i,location:e}){return bve(c5(i),e)}function c5(i,e=[]){let t=[];return F.Children.forEach(i,(n,s)=>{if(!F.isValidElement(n))return;let r=[...e,s];if(n.type===F.Fragment){t.push.apply(t,c5(n.props.children,r));return}ms(n.type===wp,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ms(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||r.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=c5(n.props.children,r)),t.push(o)}),t}var IT="get",DT="application/x-www-form-urlencoded";function NR(i){return i!=null&&typeof i.tagName=="string"}function Pve(i){return NR(i)&&i.tagName.toLowerCase()==="button"}function Mve(i){return NR(i)&&i.tagName.toLowerCase()==="form"}function Ove(i){return NR(i)&&i.tagName.toLowerCase()==="input"}function Fve(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function Bve(i,e){return i.button===0&&(!e||e==="_self")&&!Fve(i)}var hE=null;function Vve(){if(hE===null)try{new FormData(document.createElement("form"),0),hE=!1}catch{hE=!0}return hE}var Wve=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wM(i){return i!=null&&!Wve.has(i)?(cu(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${DT}"`),null):i}function Hve(i,e){let t,n,s,r,o;if(Mve(i)){let a=i.getAttribute("action");n=a?lf(a,e):null,t=i.getAttribute("method")||IT,s=wM(i.getAttribute("enctype"))||DT,r=new FormData(i)}else if(Pve(i)||Ove(i)&&(i.type==="submit"||i.type==="image")){let a=i.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=i.getAttribute("formaction")||a.getAttribute("action");if(n=l?lf(l,e):null,t=i.getAttribute("formmethod")||a.getAttribute("method")||IT,s=wM(i.getAttribute("formenctype"))||wM(a.getAttribute("enctype"))||DT,r=new FormData(a,i),!Vve()){let{name:c,type:u,value:d}=i;if(u==="image"){let h=c?`${c}.`:"";r.append(`${h}x`,"0"),r.append(`${h}y`,"0")}else c&&r.append(c,d)}}else{if(NR(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=IT,n=null,s=DT,o=i}return r&&s==="text/plain"&&(o=r,r=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:r,body:o}}function uV(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function Uve(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function zve(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function jve(i,e,t){let n=await Promise.all(i.map(async s=>{let r=e.routes[s.route.id];if(r){let o=await Uve(r,t);return o.links?o.links():[]}return[]}));return Gve(n.flat(1).filter(zve).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Vq(i,e,t,n,s,r){let o=(l,c)=>t[c]?l.route.id!==t[c].route.id:!0,a=(l,c)=>{var u;return t[c].pathname!==l.pathname||((u=t[c].route.path)==null?void 0:u.endsWith("*"))&&t[c].params["*"]!==l.params["*"]};return r==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):r==="data"?e.filter((l,c)=>{var d;let u=n.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((d=t[0])==null?void 0:d.params)||{},nextUrl:new URL(i,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function $ve(i,e,{includeHydrateFallback:t}={}){return qve(i.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let r=[s.module];return s.clientActionModule&&(r=r.concat(s.clientActionModule)),s.clientLoaderModule&&(r=r.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(r=r.concat(s.hydrateFallbackModule)),s.imports&&(r=r.concat(s.imports)),r}).flat(1))}function qve(i){return[...new Set(i)]}function Kve(i){let e={},t=Object.keys(i).sort();for(let n of t)e[n]=i[n];return e}function Gve(i,e){let t=new Set;return new Set(e),i.reduce((n,s)=>{let r=JSON.stringify(Kve(s));return t.has(r)||(t.add(r),n.push({key:r,link:s})),n},[])}function Yve(i,e){let t=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t.pathname==="/"?t.pathname="_root.data":e&&lf(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function rie(){let i=F.useContext(my);return uV(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function Qve(){let i=F.useContext(DR);return uV(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var dV=F.createContext(void 0);dV.displayName="FrameworkContext";function oie(){let i=F.useContext(dV);return uV(i,"You must render this element inside a <HydratedRouter> element"),i}function Xve(i,e){let t=F.useContext(dV),[n,s]=F.useState(!1),[r,o]=F.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=e,h=F.useRef(null);F.useEffect(()=>{if(i==="render"&&o(!0),i==="viewport"){let _=y=>{y.forEach(w=>{o(w.isIntersecting)})},v=new IntersectionObserver(_,{threshold:.5});return h.current&&v.observe(h.current),()=>{v.disconnect()}}},[i]),F.useEffect(()=>{if(n){let _=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(_)}}},[n]);let g=()=>{s(!0)},p=()=>{s(!1),o(!1)};return t?i!=="intent"?[r,h,{}]:[r,h,{onFocus:Dw(a,g),onBlur:Dw(l,p),onMouseEnter:Dw(c,g),onMouseLeave:Dw(u,p),onTouchStart:Dw(d,g)}]:[!1,h,{}]}function Dw(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function Zve({page:i,...e}){let{router:t}=rie(),n=F.useMemo(()=>Qne(t.routes,i,t.basename),[t.routes,i,t.basename]);return n?F.createElement(ebe,{page:i,matches:n,...e}):null}function Jve(i){let{manifest:e,routeModules:t}=oie(),[n,s]=F.useState([]);return F.useEffect(()=>{let r=!1;return jve(i,e,t).then(o=>{r||s(o)}),()=>{r=!0}},[i,e,t]),n}function ebe({page:i,matches:e,...t}){let n=ku(),{manifest:s,routeModules:r}=oie(),{basename:o}=rie(),{loaderData:a,matches:l}=Qve(),c=F.useMemo(()=>Vq(i,e,l,s,n,"data"),[i,e,l,s,n]),u=F.useMemo(()=>Vq(i,e,l,s,n,"assets"),[i,e,l,s,n]),d=F.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let p=new Set,_=!1;if(e.forEach(y=>{var x;let w=s.routes[y.route.id];!w||!w.hasLoader||(!c.some(k=>k.route.id===y.route.id)&&y.route.id in a&&((x=r[y.route.id])!=null&&x.shouldRevalidate)||w.hasClientLoader?_=!0:p.add(y.route.id))}),p.size===0)return[];let v=Yve(i,o);return _&&p.size>0&&v.searchParams.set("_routes",e.filter(y=>p.has(y.route.id)).map(y=>y.route.id).join(",")),[v.pathname+v.search]},[o,a,n,s,c,e,i,r]),h=F.useMemo(()=>$ve(u,s),[u,s]),g=Jve(u);return F.createElement(F.Fragment,null,d.map(p=>F.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...t})),h.map(p=>F.createElement("link",{key:p,rel:"modulepreload",href:p,...t})),g.map(({key:p,link:_})=>F.createElement("link",{key:p,..._})))}function tbe(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var aie=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{aie&&(window.__reactRouterVersion="7.4.1")}catch{}function nbe({basename:i,children:e,window:t}){let n=F.useRef();n.current==null&&(n.current=j_e({window:t,v5Compat:!0}));let s=n.current,[r,o]=F.useState({action:s.action,location:s.location}),a=F.useCallback(l=>{F.startTransition(()=>o(l))},[o]);return F.useLayoutEffect(()=>s.listen(a),[s,a]),F.createElement(Rve,{basename:i,children:e,location:r.location,navigationType:r.action,navigator:s})}var lie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vg=F.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:r,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d,...h},g){let{basename:p}=F.useContext(Cu),_=typeof c=="string"&&lie.test(c),v,y=!1;if(typeof c=="string"&&_&&(v=c,aie))try{let A=new URL(window.location.href),B=c.startsWith("//")?new URL(A.protocol+c):new URL(c),V=lf(B.pathname,p);B.origin===A.origin&&V!=null?c=V+B.search+B.hash:y=!0}catch{cu(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=pve(c,{relative:s}),[x,k,T]=Xve(n,h),R=obe(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:d});function L(A){e&&e(A),A.defaultPrevented||R(A)}let I=F.createElement("a",{...h,...T,href:v||w,onClick:y||r?e:L,ref:tbe(g,k),target:l,"data-discover":!_&&t==="render"?"true":void 0});return x&&!_?F.createElement(F.Fragment,null,I,F.createElement(Zve,{page:w})):I});vg.displayName="Link";var ibe=F.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:r,to:o,viewTransition:a,children:l,...c},u){let d=a2(o,{relative:c.relative}),h=ku(),g=F.useContext(DR),{navigator:p,basename:_}=F.useContext(Cu),v=g!=null&&dbe(d)&&a===!0,y=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,w=h.pathname,x=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(w=w.toLowerCase(),x=x?x.toLowerCase():null,y=y.toLowerCase()),x&&_&&(x=lf(x,_)||x);const k=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let T=w===y||!s&&w.startsWith(y)&&w.charAt(k)==="/",R=x!=null&&(x===y||!s&&x.startsWith(y)&&x.charAt(y.length)==="/"),L={isActive:T,isPending:R,isTransitioning:v},I=T?e:void 0,A;typeof n=="function"?A=n(L):A=[n,T?"active":null,R?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let B=typeof r=="function"?r(L):r;return F.createElement(vg,{...c,"aria-current":I,className:A,ref:u,style:B,to:o,viewTransition:a},typeof l=="function"?l(L):l)});ibe.displayName="NavLink";var sbe=F.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:r,method:o=IT,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,...h},g)=>{let p=cbe(),_=ube(a,{relative:c}),v=o.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&lie.test(a),w=x=>{if(l&&l(x),x.defaultPrevented)return;x.preventDefault();let k=x.nativeEvent.submitter,T=(k==null?void 0:k.getAttribute("formmethod"))||o;p(k||x.currentTarget,{fetcherKey:e,method:T,navigate:t,replace:s,state:r,relative:c,preventScrollReset:u,viewTransition:d})};return F.createElement("form",{ref:g,method:v,action:_,onSubmit:n?l:w,...h,"data-discover":!y&&i==="render"?"true":void 0})});sbe.displayName="Form";function rbe(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cie(i){let e=F.useContext(my);return ms(e,rbe(i)),e}function obe(i,{target:e,replace:t,state:n,preventScrollReset:s,relative:r,viewTransition:o}={}){let a=_y(),l=ku(),c=a2(i,{relative:r});return F.useCallback(u=>{if(Bve(u,e)){u.preventDefault();let d=t!==void 0?t:BS(l)===BS(c);a(i,{replace:d,state:n,preventScrollReset:s,relative:r,viewTransition:o})}},[l,a,c,t,n,e,i,s,r,o])}var abe=0,lbe=()=>`__${String(++abe)}__`;function cbe(){let{router:i}=cie("useSubmit"),{basename:e}=F.useContext(Cu),t=Lve();return F.useCallback(async(n,s={})=>{let{action:r,method:o,encType:a,formData:l,body:c}=Hve(n,e);if(s.navigate===!1){let u=s.fetcherKey||lbe();await i.fetch(u,t,s.action||r,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await i.navigate(s.action||r,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[i,e,t])}function ube(i,{relative:e}={}){let{basename:t}=F.useContext(Cu),n=F.useContext(Su);ms(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),r={...a2(i||".",{relative:e})},o=ku();if(i==null){r.search=o.search;let a=new URLSearchParams(r.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();r.search=u?`?${u}`:""}}return(!i||i===".")&&s.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(r.pathname=r.pathname==="/"?t:Qh([t,r.pathname])),BS(r)}function dbe(i,e={}){let t=F.useContext(eie);ms(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=cie("useViewTransitionState"),s=a2(i,{relative:e.relative});if(!t.isTransitioning)return!1;let r=lf(t.currentLocation.pathname,n)||t.currentLocation.pathname,o=lf(t.nextLocation.pathname,n)||t.nextLocation.pathname;return zL(s.pathname,o)!=null||zL(s.pathname,r)!=null}new TextEncoder;var l2=Yne();const hbe=IR(l2);function uie(i){var e,t,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var s=i.length;for(e=0;e<s;e++)i[e]&&(t=uie(i[e]))&&(n&&(n+=" "),n+=t)}else for(t in i)i[t]&&(n&&(n+=" "),n+=t);return n}function fbe(){for(var i,e,t=0,n="",s=arguments.length;t<s;t++)(i=arguments[t])&&(e=uie(i))&&(n&&(n+=" "),n+=e);return n}const hV="-",gbe=i=>{const e=pbe(i),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=i;return{getClassGroupId:o=>{const a=o.split(hV);return a[0]===""&&a.length!==1&&a.shift(),die(a,e)||mbe(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&n[o]?[...l,...n[o]]:l}}},die=(i,e)=>{var o;if(i.length===0)return e.classGroupId;const t=i[0],n=e.nextPart.get(t),s=n?die(i.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const r=i.join(hV);return(o=e.validators.find(({validator:a})=>a(r)))==null?void 0:o.classGroupId},Wq=/^\[(.+)\]$/,mbe=i=>{if(Wq.test(i)){const e=Wq.exec(i)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},pbe=i=>{const{theme:e,classGroups:t}=i,n={nextPart:new Map,validators:[]};for(const s in t)u5(t[s],n,s,e);return n},u5=(i,e,t,n)=>{i.forEach(s=>{if(typeof s=="string"){const r=s===""?e:Hq(e,s);r.classGroupId=t;return}if(typeof s=="function"){if(_be(s)){u5(s(n),e,t,n);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([r,o])=>{u5(o,Hq(e,r),t,n)})})},Hq=(i,e)=>{let t=i;return e.split(hV).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},_be=i=>i.isThemeGetter,vbe=i=>{if(i<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const s=(r,o)=>{t.set(r,o),e++,e>i&&(e=0,n=t,t=new Map)};return{get(r){let o=t.get(r);if(o!==void 0)return o;if((o=n.get(r))!==void 0)return s(r,o),o},set(r,o){t.has(r)?t.set(r,o):s(r,o)}}},d5="!",h5=":",bbe=h5.length,ybe=i=>{const{prefix:e,experimentalParseClassName:t}=i;let n=s=>{const r=[];let o=0,a=0,l=0,c;for(let p=0;p<s.length;p++){let _=s[p];if(o===0&&a===0){if(_===h5){r.push(s.slice(l,p)),l=p+bbe;continue}if(_==="/"){c=p;continue}}_==="["?o++:_==="]"?o--:_==="("?a++:_===")"&&a--}const u=r.length===0?s:s.substring(l),d=wbe(u),h=d!==u,g=c&&c>l?c-l:void 0;return{modifiers:r,hasImportantModifier:h,baseClassName:d,maybePostfixModifierPosition:g}};if(e){const s=e+h5,r=n;n=o=>o.startsWith(s)?r(o.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(t){const s=n;n=r=>t({className:r,parseClassName:s})}return n},wbe=i=>i.endsWith(d5)?i.substring(0,i.length-1):i.startsWith(d5)?i.substring(1):i,Cbe=i=>{const e=Object.fromEntries(i.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const s=[];let r=[];return n.forEach(o=>{o[0]==="["||e[o]?(s.push(...r.sort(),o),r=[]):r.push(o)}),s.push(...r.sort()),s}},Sbe=i=>({cache:vbe(i.cacheSize),parseClassName:ybe(i),sortModifiers:Cbe(i),...gbe(i)}),kbe=/\s+/,xbe=(i,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:s,sortModifiers:r}=e,o=[],a=i.trim().split(kbe);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:d,modifiers:h,hasImportantModifier:g,baseClassName:p,maybePostfixModifierPosition:_}=t(u);if(d){l=u+(l.length>0?" "+l:l);continue}let v=!!_,y=n(v?p.substring(0,_):p);if(!y){if(!v){l=u+(l.length>0?" "+l:l);continue}if(y=n(p),!y){l=u+(l.length>0?" "+l:l);continue}v=!1}const w=r(h).join(":"),x=g?w+d5:w,k=x+y;if(o.includes(k))continue;o.push(k);const T=s(y,v);for(let R=0;R<T.length;++R){const L=T[R];o.push(x+L)}l=u+(l.length>0?" "+l:l)}return l};function Ebe(){let i=0,e,t,n="";for(;i<arguments.length;)(e=arguments[i++])&&(t=hie(e))&&(n&&(n+=" "),n+=t);return n}const hie=i=>{if(typeof i=="string")return i;let e,t="";for(let n=0;n<i.length;n++)i[n]&&(e=hie(i[n]))&&(t&&(t+=" "),t+=e);return t};function Tbe(i,...e){let t,n,s,r=o;function o(l){const c=e.reduce((u,d)=>d(u),i());return t=Sbe(c),n=t.cache.get,s=t.cache.set,r=a,a(l)}function a(l){const c=n(l);if(c)return c;const u=xbe(l,t);return s(l,u),u}return function(){return r(Ebe.apply(null,arguments))}}const $r=i=>{const e=t=>t[i]||[];return e.isThemeGetter=!0,e},fie=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,gie=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Lbe=/^\d+\/\d+$/,Ibe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Dbe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Nbe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Rbe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Abe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,__=i=>Lbe.test(i),jn=i=>!!i&&!Number.isNaN(Number(i)),sg=i=>!!i&&Number.isInteger(Number(i)),Uq=i=>i.endsWith("%")&&jn(i.slice(0,-1)),rg=i=>Ibe.test(i),Pbe=()=>!0,Mbe=i=>Dbe.test(i)&&!Nbe.test(i),fV=()=>!1,Obe=i=>Rbe.test(i),Fbe=i=>Abe.test(i),Bbe=i=>!xt(i)&&!Et(i),Vbe=i=>vy(i,_ie,fV),xt=i=>fie.test(i),hp=i=>vy(i,vie,Mbe),CM=i=>vy(i,Qbe,jn),Wbe=i=>vy(i,mie,fV),Hbe=i=>vy(i,pie,Fbe),Ube=i=>vy(i,fV,Obe),Et=i=>gie.test(i),Nw=i=>by(i,vie),zbe=i=>by(i,Xbe),jbe=i=>by(i,mie),$be=i=>by(i,_ie),qbe=i=>by(i,pie),Kbe=i=>by(i,Zbe,!0),vy=(i,e,t)=>{const n=fie.exec(i);return n?n[1]?e(n[1]):t(n[2]):!1},by=(i,e,t=!1)=>{const n=gie.exec(i);return n?n[1]?e(n[1]):t:!1},mie=i=>i==="position",Gbe=new Set(["image","url"]),pie=i=>Gbe.has(i),Ybe=new Set(["length","size","percentage"]),_ie=i=>Ybe.has(i),vie=i=>i==="length",Qbe=i=>i==="number",Xbe=i=>i==="family-name",Zbe=i=>i==="shadow",Jbe=()=>{const i=$r("color"),e=$r("font"),t=$r("text"),n=$r("font-weight"),s=$r("tracking"),r=$r("leading"),o=$r("breakpoint"),a=$r("container"),l=$r("spacing"),c=$r("radius"),u=$r("shadow"),d=$r("inset-shadow"),h=$r("drop-shadow"),g=$r("blur"),p=$r("perspective"),_=$r("aspect"),v=$r("ease"),y=$r("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],x=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],k=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto","contain","none"],R=()=>[Et,xt,l],L=()=>[__,"full","auto",...R()],I=()=>[sg,"none","subgrid",Et,xt],A=()=>["auto",{span:["full",sg,Et,xt]},sg,Et,xt],B=()=>[sg,"auto",Et,xt],V=()=>["auto","min","max","fr",Et,xt],U=()=>["start","end","center","between","around","evenly","stretch","baseline"],W=()=>["start","end","center","stretch"],G=()=>["auto",...R()],Z=()=>[__,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],ne=()=>[i,Et,xt],fe=()=>[Uq,Nw,hp],te=()=>["","none","full",c,Et,xt],ce=()=>["",jn,Nw,hp],ve=()=>["solid","dashed","dotted","double"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],oe=()=>["","none",g,Et,xt],Ne=()=>["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Et,xt],Ie=()=>["none",jn,Et,xt],Oe=()=>["none",jn,Et,xt],it=()=>[jn,Et,xt],We=()=>[__,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[rg],breakpoint:[rg],color:[Pbe],container:[rg],"drop-shadow":[rg],ease:["in","out","in-out"],font:[Bbe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[rg],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[rg],shadow:[rg],spacing:["px",jn],text:[rg],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",__,xt,Et,_]}],container:["container"],columns:[{columns:[jn,xt,Et,a]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...x(),xt,Et]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:L()}],"inset-x":[{"inset-x":L()}],"inset-y":[{"inset-y":L()}],start:[{start:L()}],end:[{end:L()}],top:[{top:L()}],right:[{right:L()}],bottom:[{bottom:L()}],left:[{left:L()}],visibility:["visible","invisible","collapse"],z:[{z:[sg,"auto",Et,xt]}],basis:[{basis:[__,"full","auto",a,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[jn,__,"auto","initial","none",xt]}],grow:[{grow:["",jn,Et,xt]}],shrink:[{shrink:["",jn,Et,xt]}],order:[{order:[sg,"first","last","none",Et,xt]}],"grid-cols":[{"grid-cols":I()}],"col-start-end":[{col:A()}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":I()}],"row-start-end":[{row:A()}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":V()}],"auto-rows":[{"auto-rows":V()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...U(),"normal"]}],"justify-items":[{"justify-items":[...W(),"normal"]}],"justify-self":[{"justify-self":["auto",...W()]}],"align-content":[{content:["normal",...U()]}],"align-items":[{items:[...W(),"baseline"]}],"align-self":[{self:["auto",...W(),"baseline"]}],"place-content":[{"place-content":U()}],"place-items":[{"place-items":[...W(),"baseline"]}],"place-self":[{"place-self":["auto",...W()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:Z()}],w:[{w:[a,"screen",...Z()]}],"min-w":[{"min-w":[a,"screen","none",...Z()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...Z()]}],h:[{h:["screen",...Z()]}],"min-h":[{"min-h":["screen","none",...Z()]}],"max-h":[{"max-h":["screen",...Z()]}],"font-size":[{text:["base",t,Nw,hp]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Et,CM]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Uq,xt]}],"font-family":[{font:[zbe,xt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Et,xt]}],"line-clamp":[{"line-clamp":[jn,"none",Et,CM]}],leading:[{leading:[r,...R()]}],"list-image":[{"list-image":["none",Et,xt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Et,xt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ne()}],"text-color":[{text:ne()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ve(),"wavy"]}],"text-decoration-thickness":[{decoration:[jn,"from-font","auto",Et,hp]}],"text-decoration-color":[{decoration:ne()}],"underline-offset":[{"underline-offset":[jn,"auto",Et,xt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Et,xt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Et,xt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...x(),jbe,Wbe]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:["auto","cover","contain",$be,Vbe]}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},sg,Et,xt],radial:["",Et,xt],conic:[sg,Et,xt]},qbe,Hbe]}],"bg-color":[{bg:ne()}],"gradient-from-pos":[{from:fe()}],"gradient-via-pos":[{via:fe()}],"gradient-to-pos":[{to:fe()}],"gradient-from":[{from:ne()}],"gradient-via":[{via:ne()}],"gradient-to":[{to:ne()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:ce()}],"border-w-x":[{"border-x":ce()}],"border-w-y":[{"border-y":ce()}],"border-w-s":[{"border-s":ce()}],"border-w-e":[{"border-e":ce()}],"border-w-t":[{"border-t":ce()}],"border-w-r":[{"border-r":ce()}],"border-w-b":[{"border-b":ce()}],"border-w-l":[{"border-l":ce()}],"divide-x":[{"divide-x":ce()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ce()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ve(),"hidden","none"]}],"divide-style":[{divide:[...ve(),"hidden","none"]}],"border-color":[{border:ne()}],"border-color-x":[{"border-x":ne()}],"border-color-y":[{"border-y":ne()}],"border-color-s":[{"border-s":ne()}],"border-color-e":[{"border-e":ne()}],"border-color-t":[{"border-t":ne()}],"border-color-r":[{"border-r":ne()}],"border-color-b":[{"border-b":ne()}],"border-color-l":[{"border-l":ne()}],"divide-color":[{divide:ne()}],"outline-style":[{outline:[...ve(),"none","hidden"]}],"outline-offset":[{"outline-offset":[jn,Et,xt]}],"outline-w":[{outline:["",jn,Nw,hp]}],"outline-color":[{outline:[i]}],shadow:[{shadow:["","none",u,Kbe,Ube]}],"shadow-color":[{shadow:ne()}],"inset-shadow":[{"inset-shadow":["none",Et,xt,d]}],"inset-shadow-color":[{"inset-shadow":ne()}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ne()}],"ring-offset-w":[{"ring-offset":[jn,hp]}],"ring-offset-color":[{"ring-offset":ne()}],"inset-ring-w":[{"inset-ring":ce()}],"inset-ring-color":[{"inset-ring":ne()}],opacity:[{opacity:[jn,Et,xt]}],"mix-blend":[{"mix-blend":[...X(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none",Et,xt]}],blur:[{blur:oe()}],brightness:[{brightness:[jn,Et,xt]}],contrast:[{contrast:[jn,Et,xt]}],"drop-shadow":[{"drop-shadow":["","none",h,Et,xt]}],grayscale:[{grayscale:["",jn,Et,xt]}],"hue-rotate":[{"hue-rotate":[jn,Et,xt]}],invert:[{invert:["",jn,Et,xt]}],saturate:[{saturate:[jn,Et,xt]}],sepia:[{sepia:["",jn,Et,xt]}],"backdrop-filter":[{"backdrop-filter":["","none",Et,xt]}],"backdrop-blur":[{"backdrop-blur":oe()}],"backdrop-brightness":[{"backdrop-brightness":[jn,Et,xt]}],"backdrop-contrast":[{"backdrop-contrast":[jn,Et,xt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",jn,Et,xt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[jn,Et,xt]}],"backdrop-invert":[{"backdrop-invert":["",jn,Et,xt]}],"backdrop-opacity":[{"backdrop-opacity":[jn,Et,xt]}],"backdrop-saturate":[{"backdrop-saturate":[jn,Et,xt]}],"backdrop-sepia":[{"backdrop-sepia":["",jn,Et,xt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Et,xt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[jn,"initial",Et,xt]}],ease:[{ease:["linear","initial",v,Et,xt]}],delay:[{delay:[jn,Et,xt]}],animate:[{animate:["none",y,Et,xt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,Et,xt]}],"perspective-origin":[{"perspective-origin":Ne()}],rotate:[{rotate:Ie()}],"rotate-x":[{"rotate-x":Ie()}],"rotate-y":[{"rotate-y":Ie()}],"rotate-z":[{"rotate-z":Ie()}],scale:[{scale:Oe()}],"scale-x":[{"scale-x":Oe()}],"scale-y":[{"scale-y":Oe()}],"scale-z":[{"scale-z":Oe()}],"scale-3d":["scale-3d"],skew:[{skew:it()}],"skew-x":[{"skew-x":it()}],"skew-y":[{"skew-y":it()}],transform:[{transform:[Et,xt,"","none","gpu","cpu"]}],"transform-origin":[{origin:Ne()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:We()}],"translate-x":[{"translate-x":We()}],"translate-y":[{"translate-y":We()}],"translate-z":[{"translate-z":We()}],"translate-none":["translate-none"],accent:[{accent:ne()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ne()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Et,xt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Et,xt]}],fill:[{fill:["none",...ne()]}],"stroke-w":[{stroke:[jn,Nw,hp,CM]}],stroke:[{stroke:["none",...ne()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["before","after","placeholder","file","marker","selection","first-line","first-letter","backdrop","*","**"]}},eye=Tbe(Jbe);function Js(...i){return eye(fbe(i))}function Zi({children:i,className:e,variant:t,size:n,...s}){const r="inline-flex items-center justify-center font-medium transition-colors",o={default:"bg-primary text-primary-foreground hover:bg-primary/90",outline:"border bg-transparent hover:bg-gray-100"},a={icon:"h-10 w-10",default:"h-10 px-4 py-2"},l=o[t]||o.default,c=a[n]||a.default;return D.jsx("button",{className:Js(r,l,c,e),...s,children:i})}const tye=()=>{};var zq={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bie=function(i){const e=[];let t=0;for(let n=0;n<i.length;n++){let s=i.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(i.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},nye=function(i){const e=[];let t=0,n=0;for(;t<i.length;){const s=i[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const r=i[t++];e[n++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=i[t++],o=i[t++],a=i[t++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const r=i[t++],o=i[t++];e[n++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},yie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<i.length;s+=3){const r=i[s],o=s+1<i.length,a=o?i[s+1]:0,l=s+2<i.length,c=l?i[s+2]:0,u=r>>2,d=(r&3)<<4|a>>4;let h=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(h=64)),n.push(t[u],t[d],t[h],t[g])}return n.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(bie(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):nye(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<i.length;){const r=t[i.charAt(s++)],a=s<i.length?t[i.charAt(s)]:0;++s;const c=s<i.length?t[i.charAt(s)]:64;++s;const d=s<i.length?t[i.charAt(s)]:64;if(++s,r==null||a==null||c==null||d==null)throw new iye;const h=r<<2|a>>4;if(n.push(h),c!==64){const g=a<<4&240|c>>2;if(n.push(g),d!==64){const p=c<<6&192|d;n.push(p)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class iye extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sye=function(i){const e=bie(i);return yie.encodeByteArray(e,!0)},jL=function(i){return sye(i).replace(/\./g,"")},wie=function(i){try{return yie.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rye(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oye=()=>rye().__FIREBASE_DEFAULTS__,aye=()=>{if(typeof process>"u"||typeof zq>"u")return;const i=zq.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},lye=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&wie(i[1]);return e&&JSON.parse(e)},RR=()=>{try{return tye()||oye()||aye()||lye()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Cie=i=>{var e,t;return(t=(e=RR())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},cye=i=>{const e=Cie(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},Sie=()=>{var i;return(i=RR())===null||i===void 0?void 0:i.config},kie=i=>{var e;return(e=RR())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dye(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=i.iat||0,r=i.sub||i.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},i);return[jL(JSON.stringify(t)),jL(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hye(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ta())}function fye(){var i;const e=(i=RR())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gye(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xie(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function mye(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pye(){const i=ta();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function _ye(){return!fye()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Eie(){try{return typeof indexedDB=="object"}catch{return!1}}function Tie(){return new Promise((i,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),i(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(t){e(t)}})}function vye(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bye="FirebaseError";class xu extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=bye,Object.setPrototypeOf(this,xu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,h1.prototype.create)}}class h1{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?yye(r,n):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new xu(s,a,n)}}function yye(i,e){return i.replace(wye,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const wye=/\{\$([^}]+)}/g;function Cye(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function cm(i,e){if(i===e)return!0;const t=Object.keys(i),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const r=i[s],o=e[s];if(jq(r)&&jq(o)){if(!cm(r,o))return!1}else if(r!==o)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function jq(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(i){const e=[];for(const[t,n]of Object.entries(i))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function oC(i){const e={};return i.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,r]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function aC(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function Sye(i,e){const t=new kye(i,e);return t.subscribe.bind(t)}class kye{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");xye(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=SM),s.error===void 0&&(s.error=SM),s.complete===void 0&&(s.complete=SM);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xye(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function SM(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eye=1e3,Tye=2,Lye=4*60*60*1e3,Iye=.5;function $q(i,e=Eye,t=Tye){const n=e*Math.pow(t,i),s=Math.round(Iye*n*(Math.random()-.5)*2);return Math.min(Lye,n+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(i){return i&&i._delegate?i._delegate:i}class uu{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dye=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new uye;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Rye(e))try{this.getOrInitializeService({instanceIdentifier:Cp})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const r=this.getOrInitializeService({instanceIdentifier:s});n.resolve(r)}catch{}}}}clearInstance(e=Cp){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cp){return this.instances.has(e)}getOptions(e=Cp){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);n===a&&o.resolve(s)}return s}onInit(e,t){var n;const s=this.normalizeInstanceIdentifier(t),r=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Nye(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Cp){return this.component?this.component.multipleInstances?e:Cp:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Nye(i){return i===Cp?void 0:i}function Rye(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aye{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Dye(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $n;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})($n||($n={}));const Pye={debug:$n.DEBUG,verbose:$n.VERBOSE,info:$n.INFO,warn:$n.WARN,error:$n.ERROR,silent:$n.SILENT},Mye=$n.INFO,Oye={[$n.DEBUG]:"log",[$n.VERBOSE]:"log",[$n.INFO]:"info",[$n.WARN]:"warn",[$n.ERROR]:"error"},Fye=(i,e,...t)=>{if(e<i.logLevel)return;const n=new Date().toISOString(),s=Oye[e];if(s)console[s](`[${n}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class AR{constructor(e){this.name=e,this._logLevel=Mye,this._logHandler=Fye,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $n))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Pye[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$n.DEBUG,...e),this._logHandler(this,$n.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$n.VERBOSE,...e),this._logHandler(this,$n.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$n.INFO,...e),this._logHandler(this,$n.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$n.WARN,...e),this._logHandler(this,$n.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$n.ERROR,...e),this._logHandler(this,$n.ERROR,...e)}}const Bye=(i,e)=>e.some(t=>i instanceof t);let qq,Kq;function Vye(){return qq||(qq=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wye(){return Kq||(Kq=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Lie=new WeakMap,f5=new WeakMap,Iie=new WeakMap,kM=new WeakMap,gV=new WeakMap;function Hye(i){const e=new Promise((t,n)=>{const s=()=>{i.removeEventListener("success",r),i.removeEventListener("error",o)},r=()=>{t(Gg(i.result)),s()},o=()=>{n(i.error),s()};i.addEventListener("success",r),i.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Lie.set(t,i)}).catch(()=>{}),gV.set(e,i),e}function Uye(i){if(f5.has(i))return;const e=new Promise((t,n)=>{const s=()=>{i.removeEventListener("complete",r),i.removeEventListener("error",o),i.removeEventListener("abort",o)},r=()=>{t(),s()},o=()=>{n(i.error||new DOMException("AbortError","AbortError")),s()};i.addEventListener("complete",r),i.addEventListener("error",o),i.addEventListener("abort",o)});f5.set(i,e)}let g5={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return f5.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Iie.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Gg(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function zye(i){g5=i(g5)}function jye(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=i.call(xM(this),e,...t);return Iie.set(n,e.sort?e.sort():[e]),Gg(n)}:Wye().includes(i)?function(...e){return i.apply(xM(this),e),Gg(Lie.get(this))}:function(...e){return Gg(i.apply(xM(this),e))}}function $ye(i){return typeof i=="function"?jye(i):(i instanceof IDBTransaction&&Uye(i),Bye(i,Vye())?new Proxy(i,g5):i)}function Gg(i){if(i instanceof IDBRequest)return Hye(i);if(kM.has(i))return kM.get(i);const e=$ye(i);return e!==i&&(kM.set(i,e),gV.set(e,i)),e}const xM=i=>gV.get(i);function Die(i,e,{blocked:t,upgrade:n,blocking:s,terminated:r}={}){const o=indexedDB.open(i,e),a=Gg(o);return n&&o.addEventListener("upgradeneeded",l=>{n(Gg(o.result),l.oldVersion,l.newVersion,Gg(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const qye=["get","getKey","getAll","getAllKeys","count"],Kye=["put","add","delete","clear"],EM=new Map;function Gq(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(EM.get(e))return EM.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=Kye.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||qye.includes(t)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),s&&l.done]))[0]};return EM.set(e,r),r}zye(i=>({...i,get:(e,t,n)=>Gq(e,t)||i.get(e,t,n),has:(e,t)=>!!Gq(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gye{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Yye(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function Yye(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const m5="@firebase/app",Yq="0.11.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf=new AR("@firebase/app"),Qye="@firebase/app-compat",Xye="@firebase/analytics-compat",Zye="@firebase/analytics",Jye="@firebase/app-check-compat",ewe="@firebase/app-check",twe="@firebase/auth",nwe="@firebase/auth-compat",iwe="@firebase/database",swe="@firebase/data-connect",rwe="@firebase/database-compat",owe="@firebase/functions",awe="@firebase/functions-compat",lwe="@firebase/installations",cwe="@firebase/installations-compat",uwe="@firebase/messaging",dwe="@firebase/messaging-compat",hwe="@firebase/performance",fwe="@firebase/performance-compat",gwe="@firebase/remote-config",mwe="@firebase/remote-config-compat",pwe="@firebase/storage",_we="@firebase/storage-compat",vwe="@firebase/firestore",bwe="@firebase/vertexai",ywe="@firebase/firestore-compat",wwe="firebase",Cwe="11.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5="[DEFAULT]",Swe={[m5]:"fire-core",[Qye]:"fire-core-compat",[Zye]:"fire-analytics",[Xye]:"fire-analytics-compat",[ewe]:"fire-app-check",[Jye]:"fire-app-check-compat",[twe]:"fire-auth",[nwe]:"fire-auth-compat",[iwe]:"fire-rtdb",[swe]:"fire-data-connect",[rwe]:"fire-rtdb-compat",[owe]:"fire-fn",[awe]:"fire-fn-compat",[lwe]:"fire-iid",[cwe]:"fire-iid-compat",[uwe]:"fire-fcm",[dwe]:"fire-fcm-compat",[hwe]:"fire-perf",[fwe]:"fire-perf-compat",[gwe]:"fire-rc",[mwe]:"fire-rc-compat",[pwe]:"fire-gcs",[_we]:"fire-gcs-compat",[vwe]:"fire-fst",[ywe]:"fire-fst-compat",[bwe]:"fire-vertex","fire-js":"fire-js",[wwe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=new Map,kwe=new Map,_5=new Map;function Qq(i,e){try{i.container.addComponent(e)}catch(t){cf.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function xd(i){const e=i.name;if(_5.has(e))return cf.debug(`There were multiple attempts to register component ${e}.`),!1;_5.set(e,i);for(const t of $L.values())Qq(t,i);for(const t of kwe.values())Qq(t,i);return!0}function f1(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function El(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xwe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yg=new h1("app","Firebase",xwe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ewe{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new uu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yg.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy=Cwe;function Nie(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const n=Object.assign({name:p5,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw Yg.create("bad-app-name",{appName:String(s)});if(t||(t=Sie()),!t)throw Yg.create("no-options");const r=$L.get(s);if(r){if(cm(t,r.options)&&cm(n,r.config))return r;throw Yg.create("duplicate-app",{appName:s})}const o=new Aye(s);for(const l of _5.values())o.addComponent(l);const a=new Ewe(t,n,o);return $L.set(s,a),a}function mV(i=p5){const e=$L.get(i);if(!e&&i===p5&&Sie())return Nie();if(!e)throw Yg.create("no-app",{appName:i});return e}function hc(i,e,t){var n;let s=(n=Swe[i])!==null&&n!==void 0?n:i;t&&(s+=`-${t}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${s}" with version "${e}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cf.warn(a.join(" "));return}xd(new uu(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Twe="firebase-heartbeat-database",Lwe=1,WS="firebase-heartbeat-store";let TM=null;function Rie(){return TM||(TM=Die(Twe,Lwe,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(WS)}catch(t){console.warn(t)}}}}).catch(i=>{throw Yg.create("idb-open",{originalErrorMessage:i.message})})),TM}async function Iwe(i){try{const t=(await Rie()).transaction(WS),n=await t.objectStore(WS).get(Aie(i));return await t.done,n}catch(e){if(e instanceof xu)cf.warn(e.message);else{const t=Yg.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});cf.warn(t.message)}}}async function Xq(i,e){try{const n=(await Rie()).transaction(WS,"readwrite");await n.objectStore(WS).put(e,Aie(i)),await n.done}catch(t){if(t instanceof xu)cf.warn(t.message);else{const n=Yg.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});cf.warn(n.message)}}}function Aie(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dwe=1024,Nwe=30;class Rwe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Pwe(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Zq();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>Nwe){const o=Mwe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){cf.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Zq(),{heartbeatsToSend:n,unsentEntries:s}=Awe(this._heartbeatsCache.heartbeats),r=jL(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return cf.warn(t),""}}}function Zq(){return new Date().toISOString().substring(0,10)}function Awe(i,e=Dwe){const t=[];let n=i.slice();for(const s of i){const r=t.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),Jq(t)>e){r.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Jq(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class Pwe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Eie()?Tie().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Iwe(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Xq(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Xq(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Jq(i){return jL(JSON.stringify({version:2,heartbeats:i})).length}function Mwe(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let n=1;n<i.length;n++)i[n].date<t&&(t=i[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Owe(i){xd(new uu("platform-logger",e=>new Gye(e),"PRIVATE")),xd(new uu("heartbeat",e=>new Rwe(e),"PRIVATE")),hc(m5,Yq,i),hc(m5,Yq,"esm2017"),hc("fire-js","")}Owe("");var Fwe="firebase",Bwe="11.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hc(Fwe,Bwe,"app");var ud=function(){return ud=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ud.apply(this,arguments)};function u2(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t}function Vwe(i,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,r;n<s;n++)(r||!(n in e))&&(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return i.concat(r||Array.prototype.slice.call(e))}function Pie(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Wwe=Pie,Mie=new h1("auth","Firebase",Pie());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=new AR("@firebase/auth");function Hwe(i,...e){qL.logLevel<=$n.WARN&&qL.warn(`Auth (${yy}): ${i}`,...e)}function NT(i,...e){qL.logLevel<=$n.ERROR&&qL.error(`Auth (${yy}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(i,...e){throw _V(i,...e)}function ou(i,...e){return _V(i,...e)}function pV(i,e,t){const n=Object.assign(Object.assign({},Wwe()),{[e]:t});return new h1("auth","Firebase",n).create(e,{appName:i.name})}function Xh(i){return pV(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Uwe(i,e,t){const n=t;if(!(e instanceof n))throw n.name!==e.constructor.name&&mc(i,"argument-error"),pV(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _V(i,...e){if(typeof i!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=i.name),i._errorFactory.create(t,...n)}return Mie.create(i,...e)}function en(i,e,...t){if(!i)throw _V(e,...t)}function Hh(i){const e="INTERNAL ASSERTION FAILED: "+i;throw NT(e),new Error(e)}function uf(i,e){i||Hh(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function zwe(){return eK()==="http:"||eK()==="https:"}function eK(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jwe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zwe()||xie()||"connection"in navigator)?navigator.onLine:!0}function $we(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,t){this.shortDelay=e,this.longDelay=t,uf(t>e,"Short delay should be less than long delay!"),this.isMobile=hye()||mye()}get(){return jwe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vV(i,e){uf(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oie{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qwe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kwe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Gwe=new d2(3e4,6e4);function xf(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Ef(i,e,t,n,s={}){return Fie(i,s,async()=>{let r={},o={};n&&(e==="GET"?o=n:r={body:JSON.stringify(n)});const a=c2(Object.assign({key:i.config.apiKey},o)).slice(1),l=await i._getAdditionalHeaders();l["Content-Type"]="application/json",i.languageCode&&(l["X-Firebase-Locale"]=i.languageCode);const c=Object.assign({method:e,headers:l},r);return gye()||(c.referrerPolicy="no-referrer"),Oie.fetch()(await Bie(i,i.config.apiHost,t,a),c)})}async function Fie(i,e,t){i._canInitEmulator=!1;const n=Object.assign(Object.assign({},qwe),e);try{const s=new Qwe(i),r=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw fE(i,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw fE(i,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw fE(i,"email-already-in-use",o);if(l==="USER_DISABLED")throw fE(i,"user-disabled",o);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw pV(i,u,c);mc(i,u)}}catch(s){if(s instanceof xu)throw s;mc(i,"network-request-failed",{message:String(s)})}}async function h2(i,e,t,n,s={}){const r=await Ef(i,e,t,n,s);return"mfaPendingCredential"in r&&mc(i,"multi-factor-auth-required",{_serverResponse:r}),r}async function Bie(i,e,t,n){const s=`${e}${t}?${n}`,r=i,o=r.config.emulator?vV(i.config,s):`${i.config.apiScheme}://${s}`;return Kwe.includes(t)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function Ywe(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Qwe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(ou(this.auth,"network-request-failed")),Gwe.get())})}}function fE(i,e,t){const n={appName:i.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=ou(i,e,n);return s.customData._tokenResponse=t,s}function tK(i){return i!==void 0&&i.enterprise!==void 0}class Xwe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ywe(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Zwe(i,e){return Ef(i,"GET","/v2/recaptchaConfig",xf(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jwe(i,e){return Ef(i,"POST","/v1/accounts:delete",e)}async function KL(i,e){return Ef(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eCe(i,e=!1){const t=Rr(i),n=await t.getIdToken(e),s=bV(n);en(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:s,token:n,authTime:LC(LM(s.auth_time)),issuedAtTime:LC(LM(s.iat)),expirationTime:LC(LM(s.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function LM(i){return Number(i)*1e3}function bV(i){const[e,t,n]=i.split(".");if(e===void 0||t===void 0||n===void 0)return NT("JWT malformed, contained fewer than 3 sections"),null;try{const s=wie(t);return s?JSON.parse(s):(NT("Failed to decode base64 JWT payload"),null)}catch(s){return NT("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function nK(i){const e=bV(i);return en(e,"internal-error"),en(typeof e.exp<"u","internal-error"),en(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HS(i,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof xu&&tCe(n)&&i.auth.currentUser===i&&await i.auth.signOut(),n}}function tCe({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nCe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=LC(this.lastLoginAt),this.creationTime=LC(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GL(i){var e;const t=i.auth,n=await i.getIdToken(),s=await HS(i,KL(t,{idToken:n}));en(s==null?void 0:s.users.length,t,"internal-error");const r=s.users[0];i._notifyReloadListener(r);const o=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?Vie(r.providerUserInfo):[],a=sCe(i.providerData,o),l=i.isAnonymous,c=!(i.email&&r.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new b5(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(i,d)}async function iCe(i){const e=Rr(i);await GL(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sCe(i,e){return[...i.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function Vie(i){return i.map(e=>{var{providerId:t}=e,n=u2(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rCe(i,e){const t=await Fie(i,{},async()=>{const n=c2({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=i.config,o=await Bie(i,s,"/v1/token",`key=${r}`),a=await i._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Oie.fetch()(o,{method:"POST",headers:a,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function oCe(i,e){return Ef(i,"POST","/v2/accounts:revokeToken",xf(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){en(e.idToken,"internal-error"),en(typeof e.idToken<"u","internal-error"),en(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nK(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){en(e.length!==0,"internal-error");const t=nK(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(en(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:r}=await rCe(e,t);this.updateTokensAndExpiration(n,s,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:r}=t,o=new Av;return n&&(en(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),s&&(en(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),r&&(en(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Av,this.toJSON())}_performRefresh(){return Hh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(i,e){en(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class tu{constructor(e){var{uid:t,auth:n,stsTokenManager:s}=e,r=u2(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nCe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new b5(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await HS(this,this.stsTokenManager.getToken(this.auth,e));return en(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return eCe(this,e)}reload(){return iCe(this)}_assign(e){this!==e&&(en(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new tu(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){en(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await GL(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(El(this.auth.app))return Promise.reject(Xh(this.auth));const e=await this.getIdToken();return await HS(this,Jwe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,s,r,o,a,l,c,u;const d=(n=t.displayName)!==null&&n!==void 0?n:void 0,h=(s=t.email)!==null&&s!==void 0?s:void 0,g=(r=t.phoneNumber)!==null&&r!==void 0?r:void 0,p=(o=t.photoURL)!==null&&o!==void 0?o:void 0,_=(a=t.tenantId)!==null&&a!==void 0?a:void 0,v=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=t.createdAt)!==null&&c!==void 0?c:void 0,w=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:x,emailVerified:k,isAnonymous:T,providerData:R,stsTokenManager:L}=t;en(x&&L,e,"internal-error");const I=Av.fromJSON(this.name,L);en(typeof x=="string",e,"internal-error"),og(d,e.name),og(h,e.name),en(typeof k=="boolean",e,"internal-error"),en(typeof T=="boolean",e,"internal-error"),og(g,e.name),og(p,e.name),og(_,e.name),og(v,e.name),og(y,e.name),og(w,e.name);const A=new tu({uid:x,auth:e,email:h,emailVerified:k,displayName:d,isAnonymous:T,photoURL:p,phoneNumber:g,tenantId:_,stsTokenManager:I,createdAt:y,lastLoginAt:w});return R&&Array.isArray(R)&&(A.providerData=R.map(B=>Object.assign({},B))),v&&(A._redirectEventId=v),A}static async _fromIdTokenResponse(e,t,n=!1){const s=new Av;s.updateFromServerResponse(t);const r=new tu({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await GL(r),r}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];en(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?Vie(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),a=new Av;a.updateFromIdToken(n);const l=new tu({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new b5(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iK=new Map;function Uh(i){uf(i instanceof Function,"Expected a class definition");let e=iK.get(i);return e?(uf(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,iK.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wie{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Wie.type="NONE";const sK=Wie;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(i,e,t){return`firebase:${i}:${e}:${t}`}class Pv{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:r}=this.auth;this.fullUserKey=RT(this.userKey,s.apiKey,r),this.fullPersistenceKey=RT("persistence",s.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await KL(this.auth,{idToken:e}).catch(()=>{});return t?tu._fromGetAccountInfoResponse(this.auth,t,e):null}return tu._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Pv(Uh(sK),e,n);const s=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=s[0]||Uh(sK);const o=RT(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=await c._get(o);if(u){let d;if(typeof u=="string"){const h=await KL(e,{idToken:u}).catch(()=>{});if(!h)break;d=await tu._fromGetAccountInfoResponse(e,h,u)}else d=tu._fromJSON(e,u);c!==r&&(a=d),r=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new Pv(r,e,n):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new Pv(r,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rK(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jie(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Hie(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qie(e))return"Blackberry";if(Kie(e))return"Webos";if(Uie(e))return"Safari";if((e.includes("chrome/")||zie(e))&&!e.includes("edge/"))return"Chrome";if($ie(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=i.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Hie(i=ta()){return/firefox\//i.test(i)}function Uie(i=ta()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zie(i=ta()){return/crios\//i.test(i)}function jie(i=ta()){return/iemobile/i.test(i)}function $ie(i=ta()){return/android/i.test(i)}function qie(i=ta()){return/blackberry/i.test(i)}function Kie(i=ta()){return/webos/i.test(i)}function yV(i=ta()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function aCe(i=ta()){var e;return yV(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lCe(){return pye()&&document.documentMode===10}function Gie(i=ta()){return yV(i)||$ie(i)||Kie(i)||qie(i)||/windows phone/i.test(i)||jie(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yie(i,e=[]){let t;switch(i){case"Browser":t=rK(ta());break;case"Worker":t=`${rK(ta())}-${i}`;break;default:t=i}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${yy}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cCe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=r=>new Promise((o,a)=>{try{const l=e(r);o(l)}catch(l){a(l)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uCe(i,e={}){return Ef(i,"GET","/v2/passwordPolicy",xf(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dCe=6;class hCe{constructor(e){var t,n,s,r;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:dCe,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,s,r,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(r=l.containsUppercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fCe{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oK(this),this.idTokenSubscription=new oK(this),this.beforeStateQueue=new cCe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mie,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Uh(t)),this._initializationPromise=this.queue(async()=>{var n,s,r;if(!this._deleted&&(this.persistenceManager=await Pv.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await KL(this,{idToken:e}),n=await tu._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(El(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return en(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await GL(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$we()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(El(this.app))return Promise.reject(Xh(this));const t=e?Rr(e):null;return t&&en(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&en(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return El(this.app)?Promise.reject(Xh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return El(this.app)?Promise.reject(Xh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Uh(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uCe(this),t=new hCe(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new h1("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await oCe(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Uh(e)||this._popupRedirectResolver;en(t,this,"argument-error"),this.redirectPersistenceManager=await Pv.create(this,[Uh(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const r=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(en(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,n,s);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return en(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Yie(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(El(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Hwe(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Tf(i){return Rr(i)}class oK{constructor(e){this.auth=e,this.observer=null,this.addObserver=Sye(t=>this.observer=t)}get next(){return en(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PR={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gCe(i){PR=i}function Qie(i){return PR.loadJS(i)}function mCe(){return PR.recaptchaEnterpriseScript}function pCe(){return PR.gapiScript}function _Ce(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class vCe{constructor(){this.enterprise=new bCe}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class bCe{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const yCe="recaptcha-enterprise",Xie="NO_RECAPTCHA";class wCe{constructor(e){this.type=yCe,this.auth=Tf(e)}async verify(e="verify",t=!1){async function n(r){if(!t){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{Zwe(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new Xwe(l);return r.tenantId==null?r._agentRecaptchaConfig=c:r._tenantRecaptchaConfigs[r.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(r,o,a){const l=window.grecaptcha;tK(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:e}).then(c=>{o(c)}).catch(()=>{o(Xie)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new vCe().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{n(this.auth).then(a=>{if(!t&&tK(window.grecaptcha))s(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=mCe();l.length!==0&&(l+=a),Qie(l).then(()=>{s(a,r,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function aK(i,e,t,n=!1,s=!1){const r=new wCe(i);let o;if(s)o=Xie;else try{o=await r.verify(t)}catch{o=await r.verify(t,!0)}const a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return n?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function YL(i,e,t,n,s){var r;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await aK(i,e,t,t==="getOobCode");return n(i,o)}else return n(i,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await aK(i,e,t,t==="getOobCode");return n(i,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CCe(i,e){const t=f1(i,"auth");if(t.isInitialized()){const s=t.getImmediate(),r=t.getOptions();if(cm(r,e??{}))return s;mc(s,"already-initialized")}return t.initialize({options:e})}function SCe(i,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(Uh);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function kCe(i,e,t){const n=Tf(i);en(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,r=Zie(e),{host:o,port:a}=xCe(e),l=a===null?"":`:${a}`,c={url:`${r}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){en(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),en(cm(c,n.config.emulator)&&cm(u,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=c,n.emulatorConfig=u,n.settings.appVerificationDisabledForTesting=!0,ECe()}function Zie(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function xCe(i){const e=Zie(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const r=s[1];return{host:r,port:lK(n.substr(r.length+1))}}else{const[r,o]=n.split(":");return{host:r,port:lK(o)}}}function lK(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function ECe(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Hh("not implemented")}_getIdTokenResponse(e){return Hh("not implemented")}_linkToIdToken(e,t){return Hh("not implemented")}_getReauthenticationResolver(e){return Hh("not implemented")}}async function TCe(i,e){return Ef(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LCe(i,e){return h2(i,"POST","/v1/accounts:signInWithPassword",xf(i,e))}async function ICe(i,e){return Ef(i,"POST","/v1/accounts:sendOobCode",xf(i,e))}async function DCe(i,e){return ICe(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NCe(i,e){return h2(i,"POST","/v1/accounts:signInWithEmailLink",xf(i,e))}async function RCe(i,e){return h2(i,"POST","/v1/accounts:signInWithEmailLink",xf(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US extends wV{constructor(e,t,n,s=null){super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new US(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new US(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return YL(e,t,"signInWithPassword",LCe);case"emailLink":return NCe(e,{email:this._email,oobCode:this._password});default:mc(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return YL(e,n,"signUpPassword",TCe);case"emailLink":return RCe(e,{idToken:t,email:this._email,oobCode:this._password});default:mc(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mv(i,e){return h2(i,"POST","/v1/accounts:signInWithIdp",xf(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ACe="http://localhost";class M0 extends wV{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new M0(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):mc("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=t,r=u2(t,["providerId","signInMethod"]);if(!n||!s)return null;const o=new M0(n,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Mv(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Mv(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Mv(e,t)}buildRequest(){const e={requestUri:ACe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=c2(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PCe(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function MCe(i){const e=oC(aC(i)).link,t=e?oC(aC(e)).deep_link_id:null,n=oC(aC(i)).deep_link_id;return(n?oC(aC(n)).link:null)||n||t||e||i}class CV{constructor(e){var t,n,s,r,o,a;const l=oC(aC(e)),c=(t=l.apiKey)!==null&&t!==void 0?t:null,u=(n=l.oobCode)!==null&&n!==void 0?n:null,d=PCe((s=l.mode)!==null&&s!==void 0?s:null);en(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(r=l.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=MCe(e);try{return new CV(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(){this.providerId=wy.PROVIDER_ID}static credential(e,t){return US._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=CV.parseLink(t);return en(n,"argument-error"),US._fromEmailAndCode(e,n.code,n.tenantId)}}wy.PROVIDER_ID="password";wy.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wy.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2 extends SV{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg extends f2{constructor(){super("facebook.com")}static credential(e){return M0._fromParams({providerId:Eg.PROVIDER_ID,signInMethod:Eg.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Eg.credentialFromTaggedObject(e)}static credentialFromError(e){return Eg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Eg.credential(e.oauthAccessToken)}catch{return null}}}Eg.FACEBOOK_SIGN_IN_METHOD="facebook.com";Eg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh extends f2{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return M0._fromParams({providerId:Dh.PROVIDER_ID,signInMethod:Dh.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Dh.credentialFromTaggedObject(e)}static credentialFromError(e){return Dh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Dh.credential(t,n)}catch{return null}}}Dh.GOOGLE_SIGN_IN_METHOD="google.com";Dh.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends f2{constructor(){super("github.com")}static credential(e){return M0._fromParams({providerId:Nh.PROVIDER_ID,signInMethod:Nh.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nh.credentialFromTaggedObject(e)}static credentialFromError(e){return Nh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nh.credential(e.oauthAccessToken)}catch{return null}}}Nh.GITHUB_SIGN_IN_METHOD="github.com";Nh.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg extends f2{constructor(){super("twitter.com")}static credential(e,t){return M0._fromParams({providerId:Tg.PROVIDER_ID,signInMethod:Tg.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Tg.credentialFromTaggedObject(e)}static credentialFromError(e){return Tg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Tg.credential(t,n)}catch{return null}}}Tg.TWITTER_SIGN_IN_METHOD="twitter.com";Tg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OCe(i,e){return h2(i,"POST","/v1/accounts:signUp",xf(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const r=await tu._fromIdTokenResponse(e,n,s),o=cK(n);return new O0({user:r,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=cK(n);return new O0({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function cK(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL extends xu{constructor(e,t,n,s){var r;super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,QL.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new QL(e,t,n,s)}}function Jie(i,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?QL._fromErrorAndOperation(i,r,e,n):r})}async function FCe(i,e,t=!1){const n=await HS(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return O0._forOperation(i,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BCe(i,e,t=!1){const{auth:n}=i;if(El(n.app))return Promise.reject(Xh(n));const s="reauthenticate";try{const r=await HS(i,Jie(n,s,e,i),t);en(r.idToken,n,"internal-error");const o=bV(r.idToken);en(o,n,"internal-error");const{sub:a}=o;return en(i.uid===a,n,"user-mismatch"),O0._forOperation(i,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&mc(n,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ese(i,e,t=!1){if(El(i.app))return Promise.reject(Xh(i));const n="signIn",s=await Jie(i,n,e),r=await O0._fromIdTokenResponse(i,n,s);return t||await i._updateCurrentUser(r.user),r}async function VCe(i,e){return ese(Tf(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tse(i){const e=Tf(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WCe(i,e,t){const n=Tf(i);await YL(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",DCe)}async function HCe(i,e,t){if(El(i.app))return Promise.reject(Xh(i));const n=Tf(i),o=await YL(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",OCe).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&tse(i),l}),a=await O0._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(a.user),a}function UCe(i,e,t){return El(i.app)?Promise.reject(Xh(i)):VCe(Rr(i),wy.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&tse(i),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zCe(i,e){return Rr(i).setPersistence(e)}function jCe(i,e,t,n){return Rr(i).onIdTokenChanged(e,t,n)}function $Ce(i,e,t){return Rr(i).beforeAuthStateChanged(e,t)}function qCe(i,e,t,n){return Rr(i).onAuthStateChanged(e,t,n)}function KCe(i){return Rr(i).signOut()}const XL="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nse{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(XL,"1"),this.storage.removeItem(XL),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GCe=1e3,YCe=10;class ise extends nse{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Gie(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(n);!t&&this.localCache[n]===o||this.notifyListeners(n,o)},r=this.storage.getItem(n);lCe()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,YCe):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},GCe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ise.type="LOCAL";const sse=ise;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rse extends nse{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}rse.type="SESSION";const ose=rse;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QCe(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const n=new MR(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:r}=t.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const a=Array.from(o).map(async c=>c(t.origin,r)),l=await QCe(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}MR.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kV(i="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XCe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=kV("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);o={messageChannel:s,onMessage(d){const h=d;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(h.data.response);break;default:clearTimeout(u),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(){return window}function ZCe(i){pd().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ase(){return typeof pd().WorkerGlobalScope<"u"&&typeof pd().importScripts=="function"}async function JCe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eSe(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function tSe(){return ase()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lse="firebaseLocalStorageDb",nSe=1,ZL="firebaseLocalStorage",cse="fbase_key";class g2{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function OR(i,e){return i.transaction([ZL],e?"readwrite":"readonly").objectStore(ZL)}function iSe(){const i=indexedDB.deleteDatabase(lse);return new g2(i).toPromise()}function y5(){const i=indexedDB.open(lse,nSe);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const n=i.result;try{n.createObjectStore(ZL,{keyPath:cse})}catch(s){t(s)}}),i.addEventListener("success",async()=>{const n=i.result;n.objectStoreNames.contains(ZL)?e(n):(n.close(),await iSe(),e(await y5()))})})}async function uK(i,e,t){const n=OR(i,!0).put({[cse]:e,value:t});return new g2(n).toPromise()}async function sSe(i,e){const t=OR(i,!1).get(e),n=await new g2(t).toPromise();return n===void 0?null:n.value}function dK(i,e){const t=OR(i,!0).delete(e);return new g2(t).toPromise()}const rSe=800,oSe=3;class use{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await y5(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>oSe)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ase()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=MR._getInstance(tSe()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await JCe(),!this.activeServiceWorker)return;this.sender=new XCe(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eSe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await y5();return await uK(e,XL,"1"),await dK(e,XL),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>uK(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>sSe(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>dK(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=OR(s,!1).getAll();return new g2(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rSe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}use.type="LOCAL";const aSe=use;new d2(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dse(i,e){return e?Uh(e):(en(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV extends wV{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mv(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Mv(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Mv(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function lSe(i){return ese(i.auth,new xV(i),i.bypassAuthState)}function cSe(i){const{auth:e,user:t}=i;return en(t,e,"internal-error"),BCe(t,new xV(i),i.bypassAuthState)}async function uSe(i){const{auth:e,user:t}=i;return en(t,e,"internal-error"),FCe(t,new xV(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hse{constructor(e,t,n,s,r=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lSe;case"linkViaPopup":case"linkViaRedirect":return uSe;case"reauthViaPopup":case"reauthViaRedirect":return cSe;default:mc(this.auth,"internal-error")}}resolve(e){uf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){uf(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dSe=new d2(2e3,1e4);async function hK(i,e,t){if(El(i.app))return Promise.reject(ou(i,"operation-not-supported-in-this-environment"));const n=Tf(i);Uwe(i,e,SV);const s=dse(n,t);return new Zp(n,"signInViaPopup",e,s).executeNotNull()}class Zp extends hse{constructor(e,t,n,s,r){super(e,t,s,r),this.provider=n,this.authWindow=null,this.pollId=null,Zp.currentPopupAction&&Zp.currentPopupAction.cancel(),Zp.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return en(e,this.auth,"internal-error"),e}async onExecution(){uf(this.filter.length===1,"Popup operations only handle one event");const e=kV();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ou(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ou(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zp.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ou(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dSe.get())};e()}}Zp.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hSe="pendingRedirect",AT=new Map;class fSe extends hse{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=AT.get(this.auth._key());if(!e){try{const n=await gSe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}AT.set(this.auth._key(),e)}return this.bypassAuthState||AT.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gSe(i,e){const t=_Se(e),n=pSe(i);if(!await n._isAvailable())return!1;const s=await n._get(t)==="true";return await n._remove(t),s}function mSe(i,e){AT.set(i._key(),e)}function pSe(i){return Uh(i._redirectPersistence)}function _Se(i){return RT(hSe,i.config.apiKey,i.name)}async function vSe(i,e,t=!1){if(El(i.app))return Promise.reject(Xh(i));const n=Tf(i),s=dse(n,e),o=await new fSe(n,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bSe=10*60*1e3;class ySe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wSe(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!fse(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(ou(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bSe&&this.cachedEventUids.clear(),this.cachedEventUids.has(fK(e))}saveEventToCache(e){this.cachedEventUids.add(fK(e)),this.lastProcessedEventTime=Date.now()}}function fK(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function fse({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wSe(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fse(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CSe(i,e={}){return Ef(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SSe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kSe=/^https?/;async function xSe(i){if(i.config.emulator)return;const{authorizedDomains:e}=await CSe(i);for(const t of e)try{if(ESe(t))return}catch{}mc(i,"unauthorized-domain")}function ESe(i){const e=v5(),{protocol:t,hostname:n}=new URL(e);if(i.startsWith("chrome-extension://")){const o=new URL(i);return o.hostname===""&&n===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===n}if(!kSe.test(t))return!1;if(SSe.test(i))return n===i;const s=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TSe=new d2(3e4,6e4);function gK(){const i=pd().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function LSe(i){return new Promise((e,t)=>{var n,s,r;function o(){gK(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gK(),t(ou(i,"network-request-failed"))},timeout:TSe.get()})}if(!((s=(n=pd().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((r=pd().gapi)===null||r===void 0)&&r.load)o();else{const a=_Ce("iframefcb");return pd()[a]=()=>{gapi.load?o():t(ou(i,"network-request-failed"))},Qie(`${pCe()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw PT=null,e})}let PT=null;function ISe(i){return PT=PT||LSe(i),PT}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DSe=new d2(5e3,15e3),NSe="__/auth/iframe",RSe="emulator/auth/iframe",ASe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PSe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MSe(i){const e=i.config;en(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?vV(e,RSe):`https://${i.config.authDomain}/${NSe}`,n={apiKey:e.apiKey,appName:i.name,v:yy},s=PSe.get(i.config.apiHost);s&&(n.eid=s);const r=i._getFrameworks();return r.length&&(n.fw=r.join(",")),`${t}?${c2(n).slice(1)}`}async function OSe(i){const e=await ISe(i),t=pd().gapi;return en(t,i,"internal-error"),e.open({where:document.body,url:MSe(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ASe,dontclear:!0},n=>new Promise(async(s,r)=>{await n.restyle({setHideOnLeave:!1});const o=ou(i,"network-request-failed"),a=pd().setTimeout(()=>{r(o)},DSe.get());function l(){pd().clearTimeout(a),s(n)}n.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FSe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BSe=500,VSe=600,WSe="_blank",HSe="http://localhost";class mK{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function USe(i,e,t,n=BSe,s=VSe){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const l=Object.assign(Object.assign({},FSe),{width:n.toString(),height:s.toString(),top:r,left:o}),c=ta().toLowerCase();t&&(a=zie(c)?WSe:t),Hie(c)&&(e=e||HSe,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[g,p])=>`${h}${g}=${p},`,"");if(aCe(c)&&a!=="_self")return zSe(e||"",a),new mK(null);const d=window.open(e||"",a,u);en(d,i,"popup-blocked");try{d.focus()}catch{}return new mK(d)}function zSe(i,e){const t=document.createElement("a");t.href=i,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jSe="__/auth/handler",$Se="emulator/auth/handler",qSe=encodeURIComponent("fac");async function pK(i,e,t,n,s,r){en(i.config.authDomain,i,"auth-domain-config-required"),en(i.config.apiKey,i,"invalid-api-key");const o={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:n,v:yy,eventId:s};if(e instanceof SV){e.setDefaultLanguage(i.languageCode),o.providerId=e.providerId||"",Cye(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(e instanceof f2){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}i.tenantId&&(o.tid=i.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await i._getAppCheckToken(),c=l?`#${qSe}=${encodeURIComponent(l)}`:"";return`${KSe(i)}?${c2(a).slice(1)}${c}`}function KSe({config:i}){return i.emulator?vV(i,$Se):`https://${i.authDomain}/${jSe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM="webStorageSupport";class GSe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ose,this._completeRedirectFn=vSe,this._overrideRedirectResult=mSe}async _openPopup(e,t,n,s){var r;uf((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await pK(e,t,n,v5(),s);return USe(e,o,kV())}async _openRedirect(e,t,n,s){await this._originValidation(e);const r=await pK(e,t,n,v5(),s);return ZCe(r),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:r}=this.eventManagers[t];return s?Promise.resolve(s):(uf(r,"If manager is not set, promise should be"),r)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await OSe(e),n=new ySe(e);return t.register("authEvent",s=>(en(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(IM,{type:IM},s=>{var r;const o=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[IM];o!==void 0&&t(!!o),mc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xSe(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Gie()||Uie()||yV()}}const YSe=GSe;var _K="@firebase/auth",vK="1.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QSe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){en(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XSe(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZSe(i){xd(new uu("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=n.options;en(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:o,authDomain:a,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yie(i)},c=new fCe(n,s,r,l);return SCe(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),xd(new uu("auth-internal",e=>{const t=Tf(e.getProvider("auth").getImmediate());return(n=>new QSe(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),hc(_K,vK,XSe(i)),hc(_K,vK,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JSe=5*60,eke=kie("authIdTokenMaxAge")||JSe;let bK=null;const tke=i=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>eke)return;const s=t==null?void 0:t.token;bK!==s&&(bK=s,await fetch(i,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function nke(i=mV()){const e=f1(i,"auth");if(e.isInitialized())return e.getImmediate();const t=CCe(i,{popupRedirectResolver:YSe,persistence:[aSe,sse,ose]}),n=kie("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(n,location.origin);if(location.origin===r.origin){const o=tke(r.toString());$Ce(t,o,()=>o(t.currentUser)),jCe(t,a=>o(a))}}const s=Cie("auth");return s&&kCe(t,`http://${s}`),t}function ike(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}gCe({loadJS(i){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",i),n.onload=e,n.onerror=s=>{const r=ou("internal-error");r.customData=s,t(r)},n.type="text/javascript",n.charset="UTF-8",ike().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZSe("Browser");const gse="@firebase/installations",EV="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mse=1e4,pse=`w:${EV}`,_se="FIS_v2",ske="https://firebaseinstallations.googleapis.com/v1",rke=60*60*1e3,oke="installations",ake="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lke={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},F0=new h1(oke,ake,lke);function vse(i){return i instanceof xu&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bse({projectId:i}){return`${ske}/projects/${i}/installations`}function yse(i){return{token:i.token,requestStatus:2,expiresIn:uke(i.expiresIn),creationTime:Date.now()}}async function wse(i,e){const n=(await e.json()).error;return F0.create("request-failed",{requestName:i,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Cse({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function cke(i,{refreshToken:e}){const t=Cse(i);return t.append("Authorization",dke(e)),t}async function Sse(i){const e=await i();return e.status>=500&&e.status<600?i():e}function uke(i){return Number(i.replace("s","000"))}function dke(i){return`${_se} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hke({appConfig:i,heartbeatServiceProvider:e},{fid:t}){const n=bse(i),s=Cse(i),r=e.getImmediate({optional:!0});if(r){const c=await r.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:t,authVersion:_se,appId:i.appId,sdkVersion:pse},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await Sse(()=>fetch(n,a));if(l.ok){const c=await l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:yse(c.authToken)}}else throw await wse("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kse(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fke(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gke=/^[cdef][\w-]{21}$/,w5="";function mke(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const t=pke(i);return gke.test(t)?t:w5}catch{return w5}}function pke(i){return fke(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xse=new Map;function Ese(i,e){const t=FR(i);Tse(t,e),_ke(t,e)}function Tse(i,e){const t=xse.get(i);if(t)for(const n of t)n(e)}function _ke(i,e){const t=vke();t&&t.postMessage({key:i,fid:e}),bke()}let Jp=null;function vke(){return!Jp&&"BroadcastChannel"in self&&(Jp=new BroadcastChannel("[Firebase] FID Change"),Jp.onmessage=i=>{Tse(i.data.key,i.data.fid)}),Jp}function bke(){xse.size===0&&Jp&&(Jp.close(),Jp=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yke="firebase-installations-database",wke=1,B0="firebase-installations-store";let DM=null;function TV(){return DM||(DM=Die(yke,wke,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(B0)}}})),DM}async function JL(i,e){const t=FR(i),s=(await TV()).transaction(B0,"readwrite"),r=s.objectStore(B0),o=await r.get(t);return await r.put(e,t),await s.done,(!o||o.fid!==e.fid)&&Ese(i,e.fid),e}async function Lse(i){const e=FR(i),n=(await TV()).transaction(B0,"readwrite");await n.objectStore(B0).delete(e),await n.done}async function BR(i,e){const t=FR(i),s=(await TV()).transaction(B0,"readwrite"),r=s.objectStore(B0),o=await r.get(t),a=e(o);return a===void 0?await r.delete(t):await r.put(a,t),await s.done,a&&(!o||o.fid!==a.fid)&&Ese(i,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LV(i){let e;const t=await BR(i.appConfig,n=>{const s=Cke(n),r=Ske(i,s);return e=r.registrationPromise,r.installationEntry});return t.fid===w5?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function Cke(i){const e=i||{fid:mke(),registrationStatus:0};return Ise(e)}function Ske(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(F0.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=kke(i,t);return{installationEntry:t,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:xke(i)}:{installationEntry:e}}async function kke(i,e){try{const t=await hke(i,e);return JL(i.appConfig,t)}catch(t){throw vse(t)&&t.customData.serverCode===409?await Lse(i.appConfig):await JL(i.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function xke(i){let e=await yK(i.appConfig);for(;e.registrationStatus===1;)await kse(100),e=await yK(i.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:n}=await LV(i);return n||t}return e}function yK(i){return BR(i,e=>{if(!e)throw F0.create("installation-not-found");return Ise(e)})}function Ise(i){return Eke(i)?{fid:i.fid,registrationStatus:0}:i}function Eke(i){return i.registrationStatus===1&&i.registrationTime+mse<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tke({appConfig:i,heartbeatServiceProvider:e},t){const n=Lke(i,t),s=cke(i,t),r=e.getImmediate({optional:!0});if(r){const c=await r.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:pse,appId:i.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await Sse(()=>fetch(n,a));if(l.ok){const c=await l.json();return yse(c)}else throw await wse("Generate Auth Token",l)}function Lke(i,{fid:e}){return`${bse(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IV(i,e=!1){let t;const n=await BR(i.appConfig,r=>{if(!Dse(r))throw F0.create("not-registered");const o=r.authToken;if(!e&&Nke(o))return r;if(o.requestStatus===1)return t=Ike(i,e),r;{if(!navigator.onLine)throw F0.create("app-offline");const a=Ake(r);return t=Dke(i,a),a}});return t?await t:n.authToken}async function Ike(i,e){let t=await wK(i.appConfig);for(;t.authToken.requestStatus===1;)await kse(100),t=await wK(i.appConfig);const n=t.authToken;return n.requestStatus===0?IV(i,e):n}function wK(i){return BR(i,e=>{if(!Dse(e))throw F0.create("not-registered");const t=e.authToken;return Pke(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Dke(i,e){try{const t=await Tke(i,e),n=Object.assign(Object.assign({},e),{authToken:t});return await JL(i.appConfig,n),t}catch(t){if(vse(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Lse(i.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await JL(i.appConfig,n)}throw t}}function Dse(i){return i!==void 0&&i.registrationStatus===2}function Nke(i){return i.requestStatus===2&&!Rke(i)}function Rke(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+rke}function Ake(i){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},i),{authToken:e})}function Pke(i){return i.requestStatus===1&&i.requestTime+mse<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mke(i){const e=i,{installationEntry:t,registrationPromise:n}=await LV(e);return n?n.catch(console.error):IV(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oke(i,e=!1){const t=i;return await Fke(t),(await IV(t,e)).token}async function Fke(i){const{registrationPromise:e}=await LV(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bke(i){if(!i||!i.options)throw NM("App Configuration");if(!i.name)throw NM("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!i.options[t])throw NM(t);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function NM(i){return F0.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nse="installations",Vke="installations-internal",Wke=i=>{const e=i.getProvider("app").getImmediate(),t=Bke(e),n=f1(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},Hke=i=>{const e=i.getProvider("app").getImmediate(),t=f1(e,Nse).getImmediate();return{getId:()=>Mke(t),getToken:s=>Oke(t,s)}};function Uke(){xd(new uu(Nse,Wke,"PUBLIC")),xd(new uu(Vke,Hke,"PRIVATE"))}Uke();hc(gse,EV);hc(gse,EV,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="analytics",zke="firebase_id",jke="origin",$ke=60*1e3,qke="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",DV="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=new AR("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kke={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Pl=new h1("analytics","Analytics",Kke);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gke(i){if(!i.startsWith(DV)){const e=Pl.create("invalid-gtag-resource",{gtagURL:i});return Za.warn(e.message),""}return i}function Rse(i){return Promise.all(i.map(e=>e.catch(t=>t)))}function Yke(i,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(i,e)),t}function Qke(i,e){const t=Yke("firebase-js-sdk-policy",{createScriptURL:Gke}),n=document.createElement("script"),s=`${DV}?l=${i}&id=${e}`;n.src=t?t==null?void 0:t.createScriptURL(s):s,n.async=!0,document.head.appendChild(n)}function Xke(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function Zke(i,e,t,n,s,r){const o=n[s];try{if(o)await e[o];else{const l=(await Rse(t)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){Za.error(a)}i("config",s,r)}async function Jke(i,e,t,n,s){try{let r=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await Rse(t);for(const l of o){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(u)r.push(u);else{r=[];break}}}r.length===0&&(r=Object.values(e)),await Promise.all(r),i("event",n,s||{})}catch(r){Za.error(r)}}function e2e(i,e,t,n){async function s(r,...o){try{if(r==="event"){const[a,l]=o;await Jke(i,e,t,a,l)}else if(r==="config"){const[a,l]=o;await Zke(i,e,t,n,a,l)}else if(r==="consent"){const[a,l]=o;i("consent",a,l)}else if(r==="get"){const[a,l,c]=o;i("get",a,l,c)}else if(r==="set"){const[a]=o;i("set",a)}else i(r,...o)}catch(a){Za.error(a)}}return s}function t2e(i,e,t,n,s){let r=function(...o){window[n].push(arguments)};return window[s]&&typeof window[s]=="function"&&(r=window[s]),window[s]=e2e(r,i,e,t),{gtagCore:r,wrappedGtag:window[s]}}function n2e(i){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(DV)&&t.src.includes(i))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2e=30,s2e=1e3;class r2e{constructor(e={},t=s2e){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Ase=new r2e;function o2e(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function a2e(i){var e;const{appId:t,apiKey:n}=i,s={method:"GET",headers:o2e(n)},r=qke.replace("{app-id}",t),o=await fetch(r,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Pl.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function l2e(i,e=Ase,t){const{appId:n,apiKey:s,measurementId:r}=i.options;if(!n)throw Pl.create("no-app-id");if(!s){if(r)return{measurementId:r,appId:n};throw Pl.create("no-api-key")}const o=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new d2e;return setTimeout(async()=>{a.abort()},$ke),Pse({appId:n,apiKey:s,measurementId:r},o,a,e)}async function Pse(i,{throttleEndTimeMillis:e,backoffCount:t},n,s=Ase){var r;const{appId:o,measurementId:a}=i;try{await c2e(n,e)}catch(l){if(a)return Za.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await a2e(i);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!u2e(c)){if(s.deleteThrottleMetadata(o),a)return Za.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const u=Number((r=c==null?void 0:c.customData)===null||r===void 0?void 0:r.httpStatus)===503?$q(t,s.intervalMillis,i2e):$q(t,s.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:t+1};return s.setThrottleMetadata(o,d),Za.debug(`Calling attemptFetch again in ${u} millis`),Pse(i,d,n,s)}}function c2e(i,e){return new Promise((t,n)=>{const s=Math.max(e-Date.now(),0),r=setTimeout(t,s);i.addEventListener(()=>{clearTimeout(r),n(Pl.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function u2e(i){if(!(i instanceof xu)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class d2e{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function h2e(i,e,t,n,s){if(s&&s.global){i("event",t,n);return}else{const r=await e,o=Object.assign(Object.assign({},n),{send_to:r});i("event",t,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f2e(){if(Eie())try{await Tie()}catch(i){return Za.warn(Pl.create("indexeddb-unavailable",{errorInfo:i==null?void 0:i.toString()}).message),!1}else return Za.warn(Pl.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function g2e(i,e,t,n,s,r,o){var a;const l=l2e(i);l.then(g=>{t[g.measurementId]=g.appId,i.options.measurementId&&g.measurementId!==i.options.measurementId&&Za.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Za.error(g)),e.push(l);const c=f2e().then(g=>{if(g)return n.getId()}),[u,d]=await Promise.all([l,c]);n2e(r)||Qke(r,u.measurementId),s("js",new Date);const h=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return h[jke]="firebase",h.update=!0,d!=null&&(h[zke]=d),s("config",u.measurementId,h),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2e{constructor(e){this.app=e}_delete(){return delete IC[this.app.options.appId],Promise.resolve()}}let IC={},CK=[];const SK={};let RM="dataLayer",p2e="gtag",kK,Mse,xK=!1;function _2e(){const i=[];if(xie()&&i.push("This is a browser extension environment."),vye()||i.push("Cookies are not available."),i.length>0){const e=i.map((n,s)=>`(${s+1}) ${n}`).join(" "),t=Pl.create("invalid-analytics-context",{errorInfo:e});Za.warn(t.message)}}function v2e(i,e,t){_2e();const n=i.options.appId;if(!n)throw Pl.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)Za.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Pl.create("no-api-key");if(IC[n]!=null)throw Pl.create("already-exists",{id:n});if(!xK){Xke(RM);const{wrappedGtag:r,gtagCore:o}=t2e(IC,CK,SK,RM,p2e);Mse=r,kK=o,xK=!0}return IC[n]=g2e(i,CK,SK,e,kK,RM,t),new m2e(i)}function b2e(i=mV()){i=Rr(i);const e=f1(i,eI);return e.isInitialized()?e.getImmediate():y2e(i)}function y2e(i,e={}){const t=f1(i,eI);if(t.isInitialized()){const s=t.getImmediate();if(cm(e,t.getOptions()))return s;throw Pl.create("already-initialized")}return t.initialize({options:e})}function w2e(i,e,t,n){i=Rr(i),h2e(Mse,IC[i.app.options.appId],e,t,n).catch(s=>Za.error(s))}const EK="@firebase/analytics",TK="0.10.12";function C2e(){xd(new uu(eI,(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return v2e(n,s,t)},"PUBLIC")),xd(new uu("analytics-internal",i,"PRIVATE")),hc(EK,TK),hc(EK,TK,"esm2017");function i(e){try{const t=e.getProvider(eI).getImmediate();return{logEvent:(n,s,r)=>w2e(t,n,s,r)}}catch(t){throw Pl.create("interop-component-reg-failed",{reason:t})}}}C2e();var LK=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qg,Ose;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,I){function A(){}A.prototype=I.prototype,L.D=I.prototype,L.prototype=new A,L.prototype.constructor=L,L.C=function(B,V,U){for(var W=Array(arguments.length-2),G=2;G<arguments.length;G++)W[G-2]=arguments[G];return I.prototype[V].apply(B,W)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(L,I,A){A||(A=0);var B=Array(16);if(typeof I=="string")for(var V=0;16>V;++V)B[V]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(V=0;16>V;++V)B[V]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=L.g[0],A=L.g[1],V=L.g[2];var U=L.g[3],W=I+(U^A&(V^U))+B[0]+3614090360&4294967295;I=A+(W<<7&4294967295|W>>>25),W=U+(V^I&(A^V))+B[1]+3905402710&4294967295,U=I+(W<<12&4294967295|W>>>20),W=V+(A^U&(I^A))+B[2]+606105819&4294967295,V=U+(W<<17&4294967295|W>>>15),W=A+(I^V&(U^I))+B[3]+3250441966&4294967295,A=V+(W<<22&4294967295|W>>>10),W=I+(U^A&(V^U))+B[4]+4118548399&4294967295,I=A+(W<<7&4294967295|W>>>25),W=U+(V^I&(A^V))+B[5]+1200080426&4294967295,U=I+(W<<12&4294967295|W>>>20),W=V+(A^U&(I^A))+B[6]+2821735955&4294967295,V=U+(W<<17&4294967295|W>>>15),W=A+(I^V&(U^I))+B[7]+4249261313&4294967295,A=V+(W<<22&4294967295|W>>>10),W=I+(U^A&(V^U))+B[8]+1770035416&4294967295,I=A+(W<<7&4294967295|W>>>25),W=U+(V^I&(A^V))+B[9]+2336552879&4294967295,U=I+(W<<12&4294967295|W>>>20),W=V+(A^U&(I^A))+B[10]+4294925233&4294967295,V=U+(W<<17&4294967295|W>>>15),W=A+(I^V&(U^I))+B[11]+2304563134&4294967295,A=V+(W<<22&4294967295|W>>>10),W=I+(U^A&(V^U))+B[12]+1804603682&4294967295,I=A+(W<<7&4294967295|W>>>25),W=U+(V^I&(A^V))+B[13]+4254626195&4294967295,U=I+(W<<12&4294967295|W>>>20),W=V+(A^U&(I^A))+B[14]+2792965006&4294967295,V=U+(W<<17&4294967295|W>>>15),W=A+(I^V&(U^I))+B[15]+1236535329&4294967295,A=V+(W<<22&4294967295|W>>>10),W=I+(V^U&(A^V))+B[1]+4129170786&4294967295,I=A+(W<<5&4294967295|W>>>27),W=U+(A^V&(I^A))+B[6]+3225465664&4294967295,U=I+(W<<9&4294967295|W>>>23),W=V+(I^A&(U^I))+B[11]+643717713&4294967295,V=U+(W<<14&4294967295|W>>>18),W=A+(U^I&(V^U))+B[0]+3921069994&4294967295,A=V+(W<<20&4294967295|W>>>12),W=I+(V^U&(A^V))+B[5]+3593408605&4294967295,I=A+(W<<5&4294967295|W>>>27),W=U+(A^V&(I^A))+B[10]+38016083&4294967295,U=I+(W<<9&4294967295|W>>>23),W=V+(I^A&(U^I))+B[15]+3634488961&4294967295,V=U+(W<<14&4294967295|W>>>18),W=A+(U^I&(V^U))+B[4]+3889429448&4294967295,A=V+(W<<20&4294967295|W>>>12),W=I+(V^U&(A^V))+B[9]+568446438&4294967295,I=A+(W<<5&4294967295|W>>>27),W=U+(A^V&(I^A))+B[14]+3275163606&4294967295,U=I+(W<<9&4294967295|W>>>23),W=V+(I^A&(U^I))+B[3]+4107603335&4294967295,V=U+(W<<14&4294967295|W>>>18),W=A+(U^I&(V^U))+B[8]+1163531501&4294967295,A=V+(W<<20&4294967295|W>>>12),W=I+(V^U&(A^V))+B[13]+2850285829&4294967295,I=A+(W<<5&4294967295|W>>>27),W=U+(A^V&(I^A))+B[2]+4243563512&4294967295,U=I+(W<<9&4294967295|W>>>23),W=V+(I^A&(U^I))+B[7]+1735328473&4294967295,V=U+(W<<14&4294967295|W>>>18),W=A+(U^I&(V^U))+B[12]+2368359562&4294967295,A=V+(W<<20&4294967295|W>>>12),W=I+(A^V^U)+B[5]+4294588738&4294967295,I=A+(W<<4&4294967295|W>>>28),W=U+(I^A^V)+B[8]+2272392833&4294967295,U=I+(W<<11&4294967295|W>>>21),W=V+(U^I^A)+B[11]+1839030562&4294967295,V=U+(W<<16&4294967295|W>>>16),W=A+(V^U^I)+B[14]+4259657740&4294967295,A=V+(W<<23&4294967295|W>>>9),W=I+(A^V^U)+B[1]+2763975236&4294967295,I=A+(W<<4&4294967295|W>>>28),W=U+(I^A^V)+B[4]+1272893353&4294967295,U=I+(W<<11&4294967295|W>>>21),W=V+(U^I^A)+B[7]+4139469664&4294967295,V=U+(W<<16&4294967295|W>>>16),W=A+(V^U^I)+B[10]+3200236656&4294967295,A=V+(W<<23&4294967295|W>>>9),W=I+(A^V^U)+B[13]+681279174&4294967295,I=A+(W<<4&4294967295|W>>>28),W=U+(I^A^V)+B[0]+3936430074&4294967295,U=I+(W<<11&4294967295|W>>>21),W=V+(U^I^A)+B[3]+3572445317&4294967295,V=U+(W<<16&4294967295|W>>>16),W=A+(V^U^I)+B[6]+76029189&4294967295,A=V+(W<<23&4294967295|W>>>9),W=I+(A^V^U)+B[9]+3654602809&4294967295,I=A+(W<<4&4294967295|W>>>28),W=U+(I^A^V)+B[12]+3873151461&4294967295,U=I+(W<<11&4294967295|W>>>21),W=V+(U^I^A)+B[15]+530742520&4294967295,V=U+(W<<16&4294967295|W>>>16),W=A+(V^U^I)+B[2]+3299628645&4294967295,A=V+(W<<23&4294967295|W>>>9),W=I+(V^(A|~U))+B[0]+4096336452&4294967295,I=A+(W<<6&4294967295|W>>>26),W=U+(A^(I|~V))+B[7]+1126891415&4294967295,U=I+(W<<10&4294967295|W>>>22),W=V+(I^(U|~A))+B[14]+2878612391&4294967295,V=U+(W<<15&4294967295|W>>>17),W=A+(U^(V|~I))+B[5]+4237533241&4294967295,A=V+(W<<21&4294967295|W>>>11),W=I+(V^(A|~U))+B[12]+1700485571&4294967295,I=A+(W<<6&4294967295|W>>>26),W=U+(A^(I|~V))+B[3]+2399980690&4294967295,U=I+(W<<10&4294967295|W>>>22),W=V+(I^(U|~A))+B[10]+4293915773&4294967295,V=U+(W<<15&4294967295|W>>>17),W=A+(U^(V|~I))+B[1]+2240044497&4294967295,A=V+(W<<21&4294967295|W>>>11),W=I+(V^(A|~U))+B[8]+1873313359&4294967295,I=A+(W<<6&4294967295|W>>>26),W=U+(A^(I|~V))+B[15]+4264355552&4294967295,U=I+(W<<10&4294967295|W>>>22),W=V+(I^(U|~A))+B[6]+2734768916&4294967295,V=U+(W<<15&4294967295|W>>>17),W=A+(U^(V|~I))+B[13]+1309151649&4294967295,A=V+(W<<21&4294967295|W>>>11),W=I+(V^(A|~U))+B[4]+4149444226&4294967295,I=A+(W<<6&4294967295|W>>>26),W=U+(A^(I|~V))+B[11]+3174756917&4294967295,U=I+(W<<10&4294967295|W>>>22),W=V+(I^(U|~A))+B[2]+718787259&4294967295,V=U+(W<<15&4294967295|W>>>17),W=A+(U^(V|~I))+B[9]+3951481745&4294967295,L.g[0]=L.g[0]+I&4294967295,L.g[1]=L.g[1]+(V+(W<<21&4294967295|W>>>11))&4294967295,L.g[2]=L.g[2]+V&4294967295,L.g[3]=L.g[3]+U&4294967295}n.prototype.u=function(L,I){I===void 0&&(I=L.length);for(var A=I-this.blockSize,B=this.B,V=this.h,U=0;U<I;){if(V==0)for(;U<=A;)s(this,L,U),U+=this.blockSize;if(typeof L=="string"){for(;U<I;)if(B[V++]=L.charCodeAt(U++),V==this.blockSize){s(this,B),V=0;break}}else for(;U<I;)if(B[V++]=L[U++],V==this.blockSize){s(this,B),V=0;break}}this.h=V,this.o+=I},n.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var I=1;I<L.length-8;++I)L[I]=0;var A=8*this.o;for(I=L.length-8;I<L.length;++I)L[I]=A&255,A/=256;for(this.u(L),L=Array(16),I=A=0;4>I;++I)for(var B=0;32>B;B+=8)L[A++]=this.g[I]>>>B&255;return L};function r(L,I){var A=a;return Object.prototype.hasOwnProperty.call(A,L)?A[L]:A[L]=I(L)}function o(L,I){this.h=I;for(var A=[],B=!0,V=L.length-1;0<=V;V--){var U=L[V]|0;B&&U==I||(A[V]=U,B=!1)}this.g=A}var a={};function l(L){return-128<=L&&128>L?r(L,function(I){return new o([I|0],0>I?-1:0)}):new o([L|0],0>L?-1:0)}function c(L){if(isNaN(L)||!isFinite(L))return d;if(0>L)return v(c(-L));for(var I=[],A=1,B=0;L>=A;B++)I[B]=L/A|0,A*=4294967296;return new o(I,0)}function u(L,I){if(L.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(L.charAt(0)=="-")return v(u(L.substring(1),I));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(I,8)),B=d,V=0;V<L.length;V+=8){var U=Math.min(8,L.length-V),W=parseInt(L.substring(V,V+U),I);8>U?(U=c(Math.pow(I,U)),B=B.j(U).add(c(W))):(B=B.j(A),B=B.add(c(W)))}return B}var d=l(0),h=l(1),g=l(16777216);i=o.prototype,i.m=function(){if(_(this))return-v(this).m();for(var L=0,I=1,A=0;A<this.g.length;A++){var B=this.i(A);L+=(0<=B?B:4294967296+B)*I,I*=4294967296}return L},i.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(p(this))return"0";if(_(this))return"-"+v(this).toString(L);for(var I=c(Math.pow(L,6)),A=this,B="";;){var V=k(A,I).g;A=y(A,V.j(I));var U=((0<A.g.length?A.g[0]:A.h)>>>0).toString(L);if(A=V,p(A))return U+B;for(;6>U.length;)U="0"+U;B=U+B}},i.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function p(L){if(L.h!=0)return!1;for(var I=0;I<L.g.length;I++)if(L.g[I]!=0)return!1;return!0}function _(L){return L.h==-1}i.l=function(L){return L=y(this,L),_(L)?-1:p(L)?0:1};function v(L){for(var I=L.g.length,A=[],B=0;B<I;B++)A[B]=~L.g[B];return new o(A,~L.h).add(h)}i.abs=function(){return _(this)?v(this):this},i.add=function(L){for(var I=Math.max(this.g.length,L.g.length),A=[],B=0,V=0;V<=I;V++){var U=B+(this.i(V)&65535)+(L.i(V)&65535),W=(U>>>16)+(this.i(V)>>>16)+(L.i(V)>>>16);B=W>>>16,U&=65535,W&=65535,A[V]=W<<16|U}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(L,I){return L.add(v(I))}i.j=function(L){if(p(this)||p(L))return d;if(_(this))return _(L)?v(this).j(v(L)):v(v(this).j(L));if(_(L))return v(this.j(v(L)));if(0>this.l(g)&&0>L.l(g))return c(this.m()*L.m());for(var I=this.g.length+L.g.length,A=[],B=0;B<2*I;B++)A[B]=0;for(B=0;B<this.g.length;B++)for(var V=0;V<L.g.length;V++){var U=this.i(B)>>>16,W=this.i(B)&65535,G=L.i(V)>>>16,Z=L.i(V)&65535;A[2*B+2*V]+=W*Z,w(A,2*B+2*V),A[2*B+2*V+1]+=U*Z,w(A,2*B+2*V+1),A[2*B+2*V+1]+=W*G,w(A,2*B+2*V+1),A[2*B+2*V+2]+=U*G,w(A,2*B+2*V+2)}for(B=0;B<I;B++)A[B]=A[2*B+1]<<16|A[2*B];for(B=I;B<2*I;B++)A[B]=0;return new o(A,0)};function w(L,I){for(;(L[I]&65535)!=L[I];)L[I+1]+=L[I]>>>16,L[I]&=65535,I++}function x(L,I){this.g=L,this.h=I}function k(L,I){if(p(I))throw Error("division by zero");if(p(L))return new x(d,d);if(_(L))return I=k(v(L),I),new x(v(I.g),v(I.h));if(_(I))return I=k(L,v(I)),new x(v(I.g),I.h);if(30<L.g.length){if(_(L)||_(I))throw Error("slowDivide_ only works with positive integers.");for(var A=h,B=I;0>=B.l(L);)A=T(A),B=T(B);var V=R(A,1),U=R(B,1);for(B=R(B,2),A=R(A,2);!p(B);){var W=U.add(B);0>=W.l(L)&&(V=V.add(A),U=W),B=R(B,1),A=R(A,1)}return I=y(L,V.j(I)),new x(V,I)}for(V=d;0<=L.l(I);){for(A=Math.max(1,Math.floor(L.m()/I.m())),B=Math.ceil(Math.log(A)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),U=c(A),W=U.j(I);_(W)||0<W.l(L);)A-=B,U=c(A),W=U.j(I);p(U)&&(U=h),V=V.add(U),L=y(L,W)}return new x(V,L)}i.A=function(L){return k(this,L).h},i.and=function(L){for(var I=Math.max(this.g.length,L.g.length),A=[],B=0;B<I;B++)A[B]=this.i(B)&L.i(B);return new o(A,this.h&L.h)},i.or=function(L){for(var I=Math.max(this.g.length,L.g.length),A=[],B=0;B<I;B++)A[B]=this.i(B)|L.i(B);return new o(A,this.h|L.h)},i.xor=function(L){for(var I=Math.max(this.g.length,L.g.length),A=[],B=0;B<I;B++)A[B]=this.i(B)^L.i(B);return new o(A,this.h^L.h)};function T(L){for(var I=L.g.length+1,A=[],B=0;B<I;B++)A[B]=L.i(B)<<1|L.i(B-1)>>>31;return new o(A,L.h)}function R(L,I){var A=I>>5;I%=32;for(var B=L.g.length-A,V=[],U=0;U<B;U++)V[U]=0<I?L.i(U+A)>>>I|L.i(U+A+1)<<32-I:L.i(U+A);return new o(V,L.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Ose=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Qg=o}).apply(typeof LK<"u"?LK:typeof self<"u"?self:typeof window<"u"?window:{});var gE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fse,lC,Bse,MT,C5,Vse,Wse,Hse;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(C,P,H){return C==Array.prototype||C==Object.prototype||(C[P]=H.value),C};function t(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof gE=="object"&&gE];for(var P=0;P<C.length;++P){var H=C[P];if(H&&H.Math==Math)return H}throw Error("Cannot find global object")}var n=t(this);function s(C,P){if(P)e:{var H=n;C=C.split(".");for(var K=0;K<C.length-1;K++){var pe=C[K];if(!(pe in H))break e;H=H[pe]}C=C[C.length-1],K=H[C],P=P(K),P!=K&&P!=null&&e(H,C,{configurable:!0,writable:!0,value:P})}}function r(C,P){C instanceof String&&(C+="");var H=0,K=!1,pe={next:function(){if(!K&&H<C.length){var Ee=H++;return{value:P(Ee,C[Ee]),done:!1}}return K=!0,{done:!0,value:void 0}}};return pe[Symbol.iterator]=function(){return pe},pe}s("Array.prototype.values",function(C){return C||function(){return r(this,function(P,H){return H})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(C){var P=typeof C;return P=P!="object"?P:C?Array.isArray(C)?"array":P:"null",P=="array"||P=="object"&&typeof C.length=="number"}function c(C){var P=typeof C;return P=="object"&&C!=null||P=="function"}function u(C,P,H){return C.call.apply(C.bind,arguments)}function d(C,P,H){if(!C)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var pe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(pe,K),C.apply(P,pe)}}return function(){return C.apply(P,arguments)}}function h(C,P,H){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,h.apply(null,arguments)}function g(C,P){var H=Array.prototype.slice.call(arguments,1);return function(){var K=H.slice();return K.push.apply(K,arguments),C.apply(this,K)}}function p(C,P){function H(){}H.prototype=P.prototype,C.aa=P.prototype,C.prototype=new H,C.prototype.constructor=C,C.Qb=function(K,pe,Ee){for(var nt=Array(arguments.length-2),Li=2;Li<arguments.length;Li++)nt[Li-2]=arguments[Li];return P.prototype[pe].apply(K,nt)}}function _(C){const P=C.length;if(0<P){const H=Array(P);for(let K=0;K<P;K++)H[K]=C[K];return H}return[]}function v(C,P){for(let H=1;H<arguments.length;H++){const K=arguments[H];if(l(K)){const pe=C.length||0,Ee=K.length||0;C.length=pe+Ee;for(let nt=0;nt<Ee;nt++)C[pe+nt]=K[nt]}else C.push(K)}}class y{constructor(P,H){this.i=P,this.j=H,this.h=0,this.g=null}get(){let P;return 0<this.h?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function w(C){return/^[\s\xa0]*$/.test(C)}function x(){var C=a.navigator;return C&&(C=C.userAgent)?C:""}function k(C){return k[" "](C),C}k[" "]=function(){};var T=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function R(C,P,H){for(const K in C)P.call(H,C[K],K,C)}function L(C,P){for(const H in C)P.call(void 0,C[H],H,C)}function I(C){const P={};for(const H in C)P[H]=C[H];return P}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(C,P){let H,K;for(let pe=1;pe<arguments.length;pe++){K=arguments[pe];for(H in K)C[H]=K[H];for(let Ee=0;Ee<A.length;Ee++)H=A[Ee],Object.prototype.hasOwnProperty.call(K,H)&&(C[H]=K[H])}}function V(C){var P=1;C=C.split(":");const H=[];for(;0<P&&C.length;)H.push(C.shift()),P--;return C.length&&H.push(C.join(":")),H}function U(C){a.setTimeout(()=>{throw C},0)}function W(){var C=ce;let P=null;return C.g&&(P=C.g,C.g=C.g.next,C.g||(C.h=null),P.next=null),P}class G{constructor(){this.h=this.g=null}add(P,H){const K=Z.get();K.set(P,H),this.h?this.h.next=K:this.g=K,this.h=K}}var Z=new y(()=>new ne,C=>C.reset());class ne{constructor(){this.next=this.g=this.h=null}set(P,H){this.h=P,this.g=H,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,te=!1,ce=new G,ve=()=>{const C=a.Promise.resolve(void 0);fe=()=>{C.then(X)}};var X=()=>{for(var C;C=W();){try{C.h.call(C.g)}catch(H){U(H)}var P=Z;P.j(C),100>P.h&&(P.h++,C.next=P.g,P.g=C)}te=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ne(C,P){this.type=C,this.g=this.target=P,this.defaultPrevented=!1}Ne.prototype.h=function(){this.defaultPrevented=!0};var Ie=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var C=!1,P=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const H=()=>{};a.addEventListener("test",H,P),a.removeEventListener("test",H,P)}catch{}return C}();function Oe(C,P){if(Ne.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C){var H=this.type=C.type,K=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;if(this.target=C.target||C.srcElement,this.g=P,P=C.relatedTarget){if(T){e:{try{k(P.nodeName);var pe=!0;break e}catch{}pe=!1}pe||(P=null)}}else H=="mouseover"?P=C.fromElement:H=="mouseout"&&(P=C.toElement);this.relatedTarget=P,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=typeof C.pointerType=="string"?C.pointerType:it[C.pointerType]||"",this.state=C.state,this.i=C,C.defaultPrevented&&Oe.aa.h.call(this)}}p(Oe,Ne);var it={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var We="closure_listenable_"+(1e6*Math.random()|0),at=0;function Ft(C,P,H,K,pe){this.listener=C,this.proxy=null,this.src=P,this.type=H,this.capture=!!K,this.ha=pe,this.key=++at,this.da=this.fa=!1}function _t(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function Nt(C){this.src=C,this.g={},this.h=0}Nt.prototype.add=function(C,P,H,K,pe){var Ee=C.toString();C=this.g[Ee],C||(C=this.g[Ee]=[],this.h++);var nt=on(C,P,K,pe);return-1<nt?(P=C[nt],H||(P.fa=!1)):(P=new Ft(P,this.src,Ee,!!K,pe),P.fa=H,C.push(P)),P};function Zt(C,P){var H=P.type;if(H in C.g){var K=C.g[H],pe=Array.prototype.indexOf.call(K,P,void 0),Ee;(Ee=0<=pe)&&Array.prototype.splice.call(K,pe,1),Ee&&(_t(P),C.g[H].length==0&&(delete C.g[H],C.h--))}}function on(C,P,H,K){for(var pe=0;pe<C.length;++pe){var Ee=C[pe];if(!Ee.da&&Ee.listener==P&&Ee.capture==!!H&&Ee.ha==K)return pe}return-1}var zn="closure_lm_"+(1e6*Math.random()|0),sr={};function Or(C,P,H,K,pe){if(Array.isArray(P)){for(var Ee=0;Ee<P.length;Ee++)Or(C,P[Ee],H,K,pe);return null}return H=Fr(H),C&&C[We]?C.K(P,H,c(K)?!!K.capture:!1,pe):Ts(C,P,H,!1,K,pe)}function Ts(C,P,H,K,pe,Ee){if(!P)throw Error("Invalid event type");var nt=c(pe)?!!pe.capture:!!pe,Li=aa(C);if(Li||(C[zn]=Li=new Nt(C)),H=Li.add(P,H,K,nt,Ee),H.proxy)return H;if(K=No(),H.proxy=K,K.src=C,K.listener=H,C.addEventListener)Ie||(pe=nt),pe===void 0&&(pe=!1),C.addEventListener(P.toString(),K,pe);else if(C.attachEvent)C.attachEvent(Ro(P.toString()),K);else if(C.addListener&&C.removeListener)C.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return H}function No(){function C(H){return P.call(C.src,C.listener,H)}const P=jl;return C}function Hs(C,P,H,K,pe){if(Array.isArray(P))for(var Ee=0;Ee<P.length;Ee++)Hs(C,P[Ee],H,K,pe);else K=c(K)?!!K.capture:!!K,H=Fr(H),C&&C[We]?(C=C.i,P=String(P).toString(),P in C.g&&(Ee=C.g[P],H=on(Ee,H,K,pe),-1<H&&(_t(Ee[H]),Array.prototype.splice.call(Ee,H,1),Ee.length==0&&(delete C.g[P],C.h--)))):C&&(C=aa(C))&&(P=C.g[P.toString()],C=-1,P&&(C=on(P,H,K,pe)),(H=-1<C?P[C]:null)&&wr(H))}function wr(C){if(typeof C!="number"&&C&&!C.da){var P=C.src;if(P&&P[We])Zt(P.i,C);else{var H=C.type,K=C.proxy;P.removeEventListener?P.removeEventListener(H,K,C.capture):P.detachEvent?P.detachEvent(Ro(H),K):P.addListener&&P.removeListener&&P.removeListener(K),(H=aa(P))?(Zt(H,C),H.h==0&&(H.src=null,P[zn]=null)):_t(C)}}}function Ro(C){return C in sr?sr[C]:sr[C]="on"+C}function jl(C,P){if(C.da)C=!0;else{P=new Oe(P,this);var H=C.listener,K=C.ha||C.src;C.fa&&wr(C),C=H.call(K,P)}return C}function aa(C){return C=C[zn],C instanceof Nt?C:null}var Ao="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fr(C){return typeof C=="function"?C:(C[Ao]||(C[Ao]=function(P){return C.handleEvent(P)}),C[Ao])}function yi(){oe.call(this),this.i=new Nt(this),this.M=this,this.F=null}p(yi,oe),yi.prototype[We]=!0,yi.prototype.removeEventListener=function(C,P,H,K){Hs(this,C,P,H,K)};function Ti(C,P){var H,K=C.F;if(K)for(H=[];K;K=K.F)H.push(K);if(C=C.M,K=P.type||P,typeof P=="string")P=new Ne(P,C);else if(P instanceof Ne)P.target=P.target||C;else{var pe=P;P=new Ne(K,C),B(P,pe)}if(pe=!0,H)for(var Ee=H.length-1;0<=Ee;Ee--){var nt=P.g=H[Ee];pe=Po(nt,K,!0,P)&&pe}if(nt=P.g=C,pe=Po(nt,K,!0,P)&&pe,pe=Po(nt,K,!1,P)&&pe,H)for(Ee=0;Ee<H.length;Ee++)nt=P.g=H[Ee],pe=Po(nt,K,!1,P)&&pe}yi.prototype.N=function(){if(yi.aa.N.call(this),this.i){var C=this.i,P;for(P in C.g){for(var H=C.g[P],K=0;K<H.length;K++)_t(H[K]);delete C.g[P],C.h--}}this.F=null},yi.prototype.K=function(C,P,H,K){return this.i.add(String(C),P,!1,H,K)},yi.prototype.L=function(C,P,H,K){return this.i.add(String(C),P,!0,H,K)};function Po(C,P,H,K){if(P=C.i.g[String(P)],!P)return!0;P=P.concat();for(var pe=!0,Ee=0;Ee<P.length;++Ee){var nt=P[Ee];if(nt&&!nt.da&&nt.capture==H){var Li=nt.listener,kr=nt.ha||nt.src;nt.fa&&Zt(C.i,nt),pe=Li.call(kr,K)!==!1&&pe}}return pe&&!K.defaultPrevented}function La(C,P,H){if(typeof C=="function")H&&(C=h(C,H));else if(C&&typeof C.handleEvent=="function")C=h(C.handleEvent,C);else throw Error("Invalid listener argument");return 2147483647<Number(P)?-1:a.setTimeout(C,P||0)}function Cr(C){C.g=La(()=>{C.g=null,C.i&&(C.i=!1,Cr(C))},C.l);const P=C.h;C.h=null,C.m.apply(null,P)}class cs extends oe{constructor(P,H){super(),this.m=P,this.l=H,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:Cr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Us(C){oe.call(this),this.h=C,this.g={}}p(Us,oe);var lo=[];function Ci(C){R(C.g,function(P,H){this.g.hasOwnProperty(H)&&wr(P)},C),C.g={}}Us.prototype.N=function(){Us.aa.N.call(this),Ci(this)},Us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ft=a.JSON.stringify,Ia=a.JSON.parse,Br=class{stringify(C){return a.JSON.stringify(C,void 0)}parse(C){return a.JSON.parse(C,void 0)}};function hn(){}hn.prototype.h=null;function Vr(C){return C.h||(C.h=C.i())}function ns(){}var Wr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ri(){Ne.call(this,"d")}p(ri,Ne);function Sr(){Ne.call(this,"c")}p(Sr,Ne);var la={},Bi=null;function rr(){return Bi=Bi||new yi}la.La="serverreachability";function kt(C){Ne.call(this,la.La,C)}p(kt,Ne);function $(C){const P=rr();Ti(P,new kt(P))}la.STAT_EVENT="statevent";function q(C,P){Ne.call(this,la.STAT_EVENT,C),this.stat=P}p(q,Ne);function Q(C){const P=rr();Ti(P,new q(P,C))}la.Ma="timingevent";function ie(C,P){Ne.call(this,la.Ma,C),this.size=P}p(ie,Ne);function ae(C,P){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){C()},P)}function me(){this.g=!0}me.prototype.xa=function(){this.g=!1};function Ce(C,P,H,K,pe,Ee){C.info(function(){if(C.g)if(Ee)for(var nt="",Li=Ee.split("&"),kr=0;kr<Li.length;kr++){var ai=Li[kr].split("=");if(1<ai.length){var Hr=ai[0];ai=ai[1];var or=Hr.split("_");nt=2<=or.length&&or[1]=="type"?nt+(Hr+"="+ai+"&"):nt+(Hr+"=redacted&")}}else nt=null;else nt=Ee;return"XMLHTTP REQ ("+K+") [attempt "+pe+"]: "+P+`
`+H+`
`+nt})}function ze(C,P,H,K,pe,Ee,nt){C.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+pe+"]: "+P+`
`+H+`
`+Ee+" "+nt})}function Ye(C,P,H,K){C.info(function(){return"XMLHTTP TEXT ("+P+"): "+vn(C,H)+(K?" "+K:"")})}function Rt(C,P){C.info(function(){return"TIMEOUT: "+P})}me.prototype.info=function(){};function vn(C,P){if(!C.g)return P;if(!P)return null;try{var H=JSON.parse(P);if(H){for(C=0;C<H.length;C++)if(Array.isArray(H[C])){var K=H[C];if(!(2>K.length)){var pe=K[1];if(Array.isArray(pe)&&!(1>pe.length)){var Ee=pe[0];if(Ee!="noop"&&Ee!="stop"&&Ee!="close")for(var nt=1;nt<pe.length;nt++)pe[nt]=""}}}}return ft(H)}catch{return P}}var an={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kn;function is(){}p(is,hn),is.prototype.g=function(){return new XMLHttpRequest},is.prototype.i=function(){return{}},kn=new is;function Vi(C,P,H,K){this.j=C,this.i=P,this.l=H,this.R=K||1,this.U=new Us(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cl}function cl(){this.i=null,this.g="",this.h=!1}var mt={},de={};function je(C,P,H){C.L=1,C.v=Vf(fl(P)),C.m=H,C.P=!0,dt(C,null)}function dt(C,P){C.F=Date.now(),Be(C),C.A=fl(C.v);var H=C.A,K=C.R;Array.isArray(K)||(K=[String(K)]),Hf(H.i,"t",K),C.C=0,H=C.j.J,C.h=new cl,C.g=px(C.j,H?P:null,!C.m),0<C.O&&(C.M=new cs(h(C.Y,C,C.g),C.O)),P=C.U,H=C.g,K=C.ca;var pe="readystatechange";Array.isArray(pe)||(pe&&(lo[0]=pe.toString()),pe=lo);for(var Ee=0;Ee<pe.length;Ee++){var nt=Or(H,pe[Ee],K||P.handleEvent,!1,P.h||P);if(!nt)break;P.g[nt.key]=nt}P=C.H?I(C.H):{},C.m?(C.u||(C.u="POST"),P["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.A,C.u,C.m,P)):(C.u="GET",C.g.ea(C.A,C.u,null,P)),$(),Ce(C.i,C.u,C.A,C.l,C.R,C.m)}Vi.prototype.ca=function(C){C=C.target;const P=this.M;P&&Ra(C)==3?P.j():this.Y(C)},Vi.prototype.Y=function(C){try{if(C==this.g)e:{const or=Ra(this.g);var P=this.g.Ba();const ql=this.g.Z();if(!(3>or)&&(or!=3||this.g&&(this.h.h||this.g.oa()||tw(this.g)))){this.J||or!=4||P==7||(P==8||0>=ql?$(3):$(2)),ct(this);var H=this.g.Z();this.X=H;t:if(oi(this)){var K=tw(this.g);C="";var pe=K.length,Ee=Ra(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gt(this),fn(this);var nt="";break t}this.h.i=new a.TextDecoder}for(P=0;P<pe;P++)this.h.h=!0,C+=this.h.i.decode(K[P],{stream:!(Ee&&P==pe-1)});K.length=0,this.h.g+=C,this.C=0,nt=this.h.g}else nt=this.g.oa();if(this.o=H==200,ze(this.i,this.u,this.A,this.l,this.R,or,H),this.o){if(this.T&&!this.K){t:{if(this.g){var Li,kr=this.g;if((Li=kr.g?kr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Li)){var ai=Li;break t}}ai=null}if(H=ai)Ye(this.i,this.l,H,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zs(this,H);else{this.o=!1,this.s=3,Q(12),Gt(this),fn(this);break e}}if(this.P){H=!0;let ml;for(;!this.J&&this.C<nt.length;)if(ml=st(this,nt),ml==de){or==4&&(this.s=4,Q(14),H=!1),Ye(this.i,this.l,null,"[Incomplete Response]");break}else if(ml==mt){this.s=4,Q(15),Ye(this.i,this.l,nt,"[Invalid Chunk]"),H=!1;break}else Ye(this.i,this.l,ml,null),zs(this,ml);if(oi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),or!=4||nt.length!=0||this.h.h||(this.s=1,Q(16),H=!1),this.o=this.o&&H,!H)Ye(this.i,this.l,nt,"[Invalid Chunked Response]"),Gt(this),fn(this);else if(0<nt.length&&!this.W){this.W=!0;var Hr=this.j;Hr.g==this&&Hr.ba&&!Hr.M&&(Hr.j.info("Great, no buffering proxy detected. Bytes received: "+nt.length),iw(Hr),Hr.M=!0,Q(11))}}else Ye(this.i,this.l,nt,null),zs(this,nt);or==4&&Gt(this),this.o&&!this.J&&(or==4?G1(this.j,this):(this.o=!1,Be(this)))}else z1(this.g),H==400&&0<nt.indexOf("Unknown SID")?(this.s=3,Q(12)):(this.s=0,Q(13)),Gt(this),fn(this)}}}catch{}finally{}};function oi(C){return C.g?C.u=="GET"&&C.L!=2&&C.j.Ca:!1}function st(C,P){var H=C.C,K=P.indexOf(`
`,H);return K==-1?de:(H=Number(P.substring(H,K)),isNaN(H)?mt:(K+=1,K+H>P.length?de:(P=P.slice(K,K+H),C.C=K+H,P)))}Vi.prototype.cancel=function(){this.J=!0,Gt(this)};function Be(C){C.S=Date.now()+C.I,vt(C,C.I)}function vt(C,P){if(C.B!=null)throw Error("WatchDog timer not null");C.B=ae(h(C.ba,C),P)}function ct(C){C.B&&(a.clearTimeout(C.B),C.B=null)}Vi.prototype.ba=function(){this.B=null;const C=Date.now();0<=C-this.S?(Rt(this.i,this.A),this.L!=2&&($(),Q(17)),Gt(this),this.s=2,fn(this)):vt(this,this.S-C)};function fn(C){C.j.G==0||C.J||G1(C.j,C)}function Gt(C){ct(C);var P=C.M;P&&typeof P.ma=="function"&&P.ma(),C.M=null,Ci(C.U),C.g&&(P=C.g,C.g=null,P.abort(),P.ma())}function zs(C,P){try{var H=C.j;if(H.G!=0&&(H.g==C||Yi(H.h,C))){if(!C.K&&Yi(H.h,C)&&H.G==3){try{var K=H.Da.g.parse(P)}catch{K=null}if(Array.isArray(K)&&K.length==3){var pe=K;if(pe[0]==0){e:if(!H.u){if(H.g)if(H.g.F+3e3<C.F)K1(H),Ic(H);else break e;q1(H),Q(18)}}else H.za=pe[1],0<H.za-H.T&&37500>pe[2]&&H.F&&H.v==0&&!H.C&&(H.C=ae(h(H.Za,H),6e3));if(1>=Mo(H.h)&&H.ca){try{H.ca()}catch{}H.ca=void 0}}else eh(H,11)}else if((C.K||H.g==C)&&K1(H),!w(P))for(pe=H.Da.g.parse(P),P=0;P<pe.length;P++){let ai=pe[P];if(H.T=ai[0],ai=ai[1],H.G==2)if(ai[0]=="c"){H.K=ai[1],H.ia=ai[2];const Hr=ai[3];Hr!=null&&(H.la=Hr,H.j.info("VER="+H.la));const or=ai[4];or!=null&&(H.Aa=or,H.j.info("SVER="+H.Aa));const ql=ai[5];ql!=null&&typeof ql=="number"&&0<ql&&(K=1.5*ql,H.L=K,H.j.info("backChannelRequestTimeoutMs_="+K)),K=H;const ml=C.g;if(ml){const Jm=ml.g?ml.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jm){var Ee=K.h;Ee.g||Jm.indexOf("spdy")==-1&&Jm.indexOf("quic")==-1&&Jm.indexOf("h2")==-1||(Ee.j=Ee.l,Ee.g=new Set,Ee.h&&(Of(Ee,Ee.h),Ee.h=null))}if(K.D){const Q1=ml.g?ml.g.getResponseHeader("X-HTTP-Session-Id"):null;Q1&&(K.ya=Q1,Wi(K.I,K.D,Q1))}}H.G=3,H.l&&H.l.ua(),H.ba&&(H.R=Date.now()-C.F,H.j.info("Handshake RTT: "+H.R+"ms")),K=H;var nt=C;if(K.qa=mx(K,K.J?K.ia:null,K.W),nt.K){ul(K.h,nt);var Li=nt,kr=K.L;kr&&(Li.I=kr),Li.B&&(ct(Li),Be(Li)),K.g=nt}else Zm(K);0<H.i.length&&Mu(H)}else ai[0]!="stop"&&ai[0]!="close"||eh(H,7);else H.G==3&&(ai[0]=="stop"||ai[0]=="close"?ai[0]=="stop"?eh(H,7):uo(H):ai[0]!="noop"&&H.l&&H.l.ta(ai),H.v=0)}}$(4)}catch{}}var Ot=class{constructor(C,P){this.g=C,this.map=P}};function xn(C){this.l=C||10,a.PerformanceNavigationTiming?(C=a.performance.getEntriesByType("navigation"),C=0<C.length&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fn(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function Mo(C){return C.h?1:C.g?C.g.size:0}function Yi(C,P){return C.h?C.h==P:C.g?C.g.has(P):!1}function Of(C,P){C.g?C.g.add(P):C.h=P}function ul(C,P){C.h&&C.h==P?C.h=null:C.g&&C.g.has(P)&&C.g.delete(P)}xn.prototype.cancel=function(){if(this.i=Kd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function Kd(C){if(C.h!=null)return C.i.concat(C.h.D);if(C.g!=null&&C.g.size!==0){let P=C.i;for(const H of C.g.values())P=P.concat(H.D);return P}return _(C.i)}function Da(C){if(C.V&&typeof C.V=="function")return C.V();if(typeof Map<"u"&&C instanceof Map||typeof Set<"u"&&C instanceof Set)return Array.from(C.values());if(typeof C=="string")return C.split("");if(l(C)){for(var P=[],H=C.length,K=0;K<H;K++)P.push(C[K]);return P}P=[],H=0;for(K in C)P[H++]=C[K];return P}function Gd(C){if(C.na&&typeof C.na=="function")return C.na();if(!C.V||typeof C.V!="function"){if(typeof Map<"u"&&C instanceof Map)return Array.from(C.keys());if(!(typeof Set<"u"&&C instanceof Set)){if(l(C)||typeof C=="string"){var P=[];C=C.length;for(var H=0;H<C;H++)P.push(H);return P}P=[],H=0;for(const K in C)P[H++]=K;return P}}}function dl(C,P){if(C.forEach&&typeof C.forEach=="function")C.forEach(P,void 0);else if(l(C)||typeof C=="string")Array.prototype.forEach.call(C,P,void 0);else for(var H=Gd(C),K=Da(C),pe=K.length,Ee=0;Ee<pe;Ee++)P.call(void 0,K[Ee],H&&H[Ee],C)}var hl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yd(C,P){if(C){C=C.split("&");for(var H=0;H<C.length;H++){var K=C[H].indexOf("="),pe=null;if(0<=K){var Ee=C[H].substring(0,K);pe=C[H].substring(K+1)}else Ee=C[H];P(Ee,pe?decodeURIComponent(pe.replace(/\+/g," ")):"")}}}function Qd(C){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,C instanceof Qd){this.h=C.h,Ym(this,C.j),this.o=C.o,this.g=C.g,Ff(this,C.s),this.l=C.l;var P=C.i,H=new Ru;H.i=P.i,P.g&&(H.g=new Map(P.g),H.h=P.h),Bf(this,H),this.m=C.m}else C&&(P=String(C).match(hl))?(this.h=!1,Ym(this,P[1]||"",!0),this.o=Xn(P[2]||""),this.g=Xn(P[3]||"",!0),Ff(this,P[4]),this.l=Xn(P[5]||"",!0),Bf(this,P[6]||"",!0),this.m=Xn(P[7]||"")):(this.h=!1,this.i=new Ru(null,this.h))}Qd.prototype.toString=function(){var C=[],P=this.j;P&&C.push(Wf(P,W1,!0),":");var H=this.g;return(H||P=="file")&&(C.push("//"),(P=this.o)&&C.push(Wf(P,W1,!0),"@"),C.push(encodeURIComponent(String(H)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),H=this.s,H!=null&&C.push(":",String(H))),(H=this.l)&&(this.g&&H.charAt(0)!="/"&&C.push("/"),C.push(Wf(H,H.charAt(0)=="/"?ax:ox,!0))),(H=this.i.toString())&&C.push("?",H),(H=this.m)&&C.push("#",Wf(H,Zy)),C.join("")};function fl(C){return new Qd(C)}function Ym(C,P,H){C.j=H?Xn(P,!0):P,C.j&&(C.j=C.j.replace(/:$/,""))}function Ff(C,P){if(P){if(P=Number(P),isNaN(P)||0>P)throw Error("Bad port number "+P);C.s=P}else C.s=null}function Bf(C,P,H){P instanceof Ru?(C.i=P,Au(C.i,C.h)):(H||(P=Wf(P,lx)),C.i=new Ru(P,C.h))}function Wi(C,P,H){C.i.set(P,H)}function Vf(C){return Wi(C,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),C}function Xn(C,P){return C?P?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function Wf(C,P,H){return typeof C=="string"?(C=encodeURI(C).replace(P,rx),H&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function rx(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var W1=/[#\/\?@]/g,ox=/[#\?:]/g,ax=/[#\?]/g,lx=/[#\?@]/g,Zy=/#/g;function Ru(C,P){this.h=this.g=null,this.i=C||null,this.j=!!P}function co(C){C.g||(C.g=new Map,C.h=0,C.i&&Yd(C.i,function(P,H){C.add(decodeURIComponent(P.replace(/\+/g," ")),H)}))}i=Ru.prototype,i.add=function(C,P){co(this),this.i=null,C=$l(this,C);var H=this.g.get(C);return H||this.g.set(C,H=[]),H.push(P),this.h+=1,this};function xc(C,P){co(C),P=$l(C,P),C.g.has(P)&&(C.i=null,C.h-=C.g.get(P).length,C.g.delete(P))}function Ec(C,P){return co(C),P=$l(C,P),C.g.has(P)}i.forEach=function(C,P){co(this),this.g.forEach(function(H,K){H.forEach(function(pe){C.call(P,pe,K,this)},this)},this)},i.na=function(){co(this);const C=Array.from(this.g.values()),P=Array.from(this.g.keys()),H=[];for(let K=0;K<P.length;K++){const pe=C[K];for(let Ee=0;Ee<pe.length;Ee++)H.push(P[K])}return H},i.V=function(C){co(this);let P=[];if(typeof C=="string")Ec(this,C)&&(P=P.concat(this.g.get($l(this,C))));else{C=Array.from(this.g.values());for(let H=0;H<C.length;H++)P=P.concat(C[H])}return P},i.set=function(C,P){return co(this),this.i=null,C=$l(this,C),Ec(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[P]),this.h+=1,this},i.get=function(C,P){return C?(C=this.V(C),0<C.length?String(C[0]):P):P};function Hf(C,P,H){xc(C,P),0<H.length&&(C.i=null,C.g.set($l(C,P),_(H)),C.h+=H.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],P=Array.from(this.g.keys());for(var H=0;H<P.length;H++){var K=P[H];const Ee=encodeURIComponent(String(K)),nt=this.V(K);for(K=0;K<nt.length;K++){var pe=Ee;nt[K]!==""&&(pe+="="+encodeURIComponent(String(nt[K]))),C.push(pe)}}return this.i=C.join("&")};function $l(C,P){return P=String(P),C.j&&(P=P.toLowerCase()),P}function Au(C,P){P&&!C.j&&(co(C),C.i=null,C.g.forEach(function(H,K){var pe=K.toLowerCase();K!=pe&&(xc(this,K),Hf(this,pe,H))},C)),C.j=P}function qA(C,P){const H=new me;if(a.Image){const K=new Image;K.onload=g(Na,H,"TestLoadImage: loaded",!0,P,K),K.onerror=g(Na,H,"TestLoadImage: error",!1,P,K),K.onabort=g(Na,H,"TestLoadImage: abort",!1,P,K),K.ontimeout=g(Na,H,"TestLoadImage: timeout",!1,P,K),a.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=C}else P(!1)}function cx(C,P){const H=new me,K=new AbortController,pe=setTimeout(()=>{K.abort(),Na(H,"TestPingServer: timeout",!1,P)},1e4);fetch(C,{signal:K.signal}).then(Ee=>{clearTimeout(pe),Ee.ok?Na(H,"TestPingServer: ok",!0,P):Na(H,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(pe),Na(H,"TestPingServer: error",!1,P)})}function Na(C,P,H,K,pe){try{pe&&(pe.onload=null,pe.onerror=null,pe.onabort=null,pe.ontimeout=null),K(H)}catch{}}function KA(){this.g=new Br}function ux(C,P,H){const K=H||"";try{dl(C,function(pe,Ee){let nt=pe;c(pe)&&(nt=ft(pe)),P.push(K+Ee+"="+encodeURIComponent(nt))})}catch(pe){throw P.push(K+"type="+encodeURIComponent("_badmap")),pe}}function Xd(C){this.l=C.Ub||null,this.j=C.eb||!1}p(Xd,hn),Xd.prototype.g=function(){return new Qm(this.l,this.j)},Xd.prototype.i=function(C){return function(){return C}}({});function Qm(C,P){yi.call(this),this.D=C,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Qm,yi),i=Qm.prototype,i.open=function(C,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=C,this.A=P,this.readyState=1,Lc(this)},i.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const P={headers:this.u,method:this.B,credentials:this.m,cache:void 0};C&&(P.body=C),(this.D||a).fetch(new Request(this.A,P)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tc(this)),this.readyState=0},i.Sa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,Lc(this)),this.g&&(this.readyState=3,Lc(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dx(this)}else C.text().then(this.Ra.bind(this),this.ga.bind(this))};function dx(C){C.j.read().then(C.Pa.bind(C)).catch(C.ga.bind(C))}i.Pa=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var P=C.value?C.value:new Uint8Array(0);(P=this.v.decode(P,{stream:!C.done}))&&(this.response=this.responseText+=P)}C.done?Tc(this):Lc(this),this.readyState==3&&dx(this)}},i.Ra=function(C){this.g&&(this.response=this.responseText=C,Tc(this))},i.Qa=function(C){this.g&&(this.response=C,Tc(this))},i.ga=function(){this.g&&Tc(this)};function Tc(C){C.readyState=4,C.l=null,C.j=null,C.v=null,Lc(C)}i.setRequestHeader=function(C,P){this.u.append(C,P)},i.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],P=this.h.entries();for(var H=P.next();!H.done;)H=H.value,C.push(H[0]+": "+H[1]),H=P.next();return C.join(`\r
`)};function Lc(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(Qm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function Zd(C){let P="";return R(C,function(H,K){P+=K,P+=":",P+=H,P+=`\r
`}),P}function Uf(C,P,H){e:{for(K in H){var K=!1;break e}K=!0}K||(H=Zd(H),typeof C=="string"?H!=null&&encodeURIComponent(String(H)):Wi(C,P,H))}function us(C){yi.call(this),this.headers=new Map,this.o=C||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(us,yi);var GA=/^https?$/i,Jy=["POST","PUT"];i=us.prototype,i.Ha=function(C){this.J=C},i.ea=function(C,P,H,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);P=P?P.toUpperCase():"GET",this.D=C,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kn.g(),this.v=this.o?Vr(this.o):Vr(kn),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(P,String(C),!0),this.B=!1}catch(Ee){Xm(this,Ee);return}if(C=H||"",H=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var pe in K)H.set(pe,K[pe]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const Ee of K.keys())H.set(Ee,K.get(Ee));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(H.keys()).find(Ee=>Ee.toLowerCase()=="content-type"),pe=a.FormData&&C instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Jy,P,void 0))||K||pe||H.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ee,nt]of H)this.g.setRequestHeader(Ee,nt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{U1(this),this.u=!0,this.g.send(C),this.u=!1}catch(Ee){Xm(this,Ee)}};function Xm(C,P){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=P,C.m=5,H1(C),gl(C)}function H1(C){C.A||(C.A=!0,Ti(C,"complete"),Ti(C,"error"))}i.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=C||7,Ti(this,"complete"),Ti(this,"abort"),gl(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gl(this,!0)),us.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?ew(this):this.bb())},i.bb=function(){ew(this)};function ew(C){if(C.h&&typeof o<"u"&&(!C.v[1]||Ra(C)!=4||C.Z()!=2)){if(C.u&&Ra(C)==4)La(C.Ea,0,C);else if(Ti(C,"readystatechange"),Ra(C)==4){C.h=!1;try{const nt=C.Z();e:switch(nt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var H;if(!(H=P)){var K;if(K=nt===0){var pe=String(C.D).match(hl)[1]||null;!pe&&a.self&&a.self.location&&(pe=a.self.location.protocol.slice(0,-1)),K=!GA.test(pe?pe.toLowerCase():"")}H=K}if(H)Ti(C,"complete"),Ti(C,"success");else{C.m=6;try{var Ee=2<Ra(C)?C.g.statusText:""}catch{Ee=""}C.l=Ee+" ["+C.Z()+"]",H1(C)}}finally{gl(C)}}}}function gl(C,P){if(C.g){U1(C);const H=C.g,K=C.v[0]?()=>{}:null;C.g=null,C.v=null,P||Ti(C,"ready");try{H.onreadystatechange=K}catch{}}}function U1(C){C.I&&(a.clearTimeout(C.I),C.I=null)}i.isActive=function(){return!!this.g};function Ra(C){return C.g?C.g.readyState:0}i.Z=function(){try{return 2<Ra(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(C){if(this.g){var P=this.g.responseText;return C&&P.indexOf(C)==0&&(P=P.substring(C.length)),Ia(P)}};function tw(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.H){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function z1(C){const P={};C=(C.g&&2<=Ra(C)&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<C.length;K++){if(w(C[K]))continue;var H=V(C[K]);const pe=H[0];if(H=H[1],typeof H!="string")continue;H=H.trim();const Ee=P[pe]||[];P[pe]=Ee,Ee.push(H)}L(P,function(K){return K.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pu(C,P,H){return H&&H.internalChannelParams&&H.internalChannelParams[C]||P}function nw(C){this.Aa=0,this.i=[],this.j=new me,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pu("failFast",!1,C),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pu("baseRetryDelayMs",5e3,C),this.cb=Pu("retryDelaySeedMs",1e4,C),this.Wa=Pu("forwardChannelMaxRetries",2,C),this.wa=Pu("forwardChannelRequestTimeoutMs",2e4,C),this.pa=C&&C.xmlHttpFactory||void 0,this.Xa=C&&C.Tb||void 0,this.Ca=C&&C.useFetchStreams||!1,this.L=void 0,this.J=C&&C.supportsCrossDomainXhr||!1,this.K="",this.h=new xn(C&&C.concurrentRequestLimit),this.Da=new KA,this.P=C&&C.fastHandshake||!1,this.O=C&&C.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=C&&C.Rb||!1,C&&C.xa&&this.j.xa(),C&&C.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&C&&C.detectBufferingProxy||!1,this.ja=void 0,C&&C.longPollingTimeout&&0<C.longPollingTimeout&&(this.ja=C.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=nw.prototype,i.la=8,i.G=1,i.connect=function(C,P,H,K){Q(0),this.W=C,this.H=P||{},H&&K!==void 0&&(this.H.OSID=H,this.H.OAID=K),this.F=this.X,this.I=mx(this,null,this.W),Mu(this)};function uo(C){if(j1(C),C.G==3){var P=C.U++,H=fl(C.I);if(Wi(H,"SID",C.K),Wi(H,"RID",P),Wi(H,"TYPE","terminate"),Jd(C,H),P=new Vi(C,C.j,P),P.L=2,P.v=Vf(fl(H)),H=!1,a.navigator&&a.navigator.sendBeacon)try{H=a.navigator.sendBeacon(P.v.toString(),"")}catch{}!H&&a.Image&&(new Image().src=P.v,H=!0),H||(P.g=px(P.j,null),P.g.ea(P.v)),P.F=Date.now(),Be(P)}gx(C)}function Ic(C){C.g&&(iw(C),C.g.cancel(),C.g=null)}function j1(C){Ic(C),C.u&&(a.clearTimeout(C.u),C.u=null),K1(C),C.h.cancel(),C.s&&(typeof C.s=="number"&&a.clearTimeout(C.s),C.s=null)}function Mu(C){if(!Fn(C.h)&&!C.s){C.s=!0;var P=C.Ga;fe||ve(),te||(fe(),te=!0),ce.add(P,C),C.B=0}}function YA(C,P){return Mo(C.h)>=C.h.j-(C.s?1:0)?!1:C.s?(C.i=P.D.concat(C.i),!0):C.G==1||C.G==2||C.B>=(C.Va?0:C.Wa)?!1:(C.s=ae(h(C.Ga,C,P),fx(C,C.B)),C.B++,!0)}i.Ga=function(C){if(this.s)if(this.s=null,this.G==1){if(!C){this.U=Math.floor(1e5*Math.random()),C=this.U++;const pe=new Vi(this,this.j,C);let Ee=this.o;if(this.S&&(Ee?(Ee=I(Ee),B(Ee,this.S)):Ee=this.S),this.m!==null||this.O||(pe.H=Ee,Ee=null),this.P)e:{for(var P=0,H=0;H<this.i.length;H++){t:{var K=this.i[H];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(P+=K,4096<P){P=H;break e}if(P===4096||H===this.i.length-1){P=H+1;break e}}P=1e3}else P=1e3;P=zf(this,pe,P),H=fl(this.I),Wi(H,"RID",C),Wi(H,"CVER",22),this.D&&Wi(H,"X-HTTP-Session-Id",this.D),Jd(this,H),Ee&&(this.O?P="headers="+encodeURIComponent(String(Zd(Ee)))+"&"+P:this.m&&Uf(H,this.m,Ee)),Of(this.h,pe),this.Ua&&Wi(H,"TYPE","init"),this.P?(Wi(H,"$req",P),Wi(H,"SID","null"),pe.T=!0,je(pe,H,null)):je(pe,H,P),this.G=2}}else this.G==3&&(C?$1(this,C):this.i.length==0||Fn(this.h)||$1(this))};function $1(C,P){var H;P?H=P.l:H=C.U++;const K=fl(C.I);Wi(K,"SID",C.K),Wi(K,"RID",H),Wi(K,"AID",C.T),Jd(C,K),C.m&&C.o&&Uf(K,C.m,C.o),H=new Vi(C,C.j,H,C.B+1),C.m===null&&(H.H=C.o),P&&(C.i=P.D.concat(C.i)),P=zf(C,H,1e3),H.I=Math.round(.5*C.wa)+Math.round(.5*C.wa*Math.random()),Of(C.h,H),je(H,K,P)}function Jd(C,P){C.H&&R(C.H,function(H,K){Wi(P,K,H)}),C.l&&dl({},function(H,K){Wi(P,K,H)})}function zf(C,P,H){H=Math.min(C.i.length,H);var K=C.l?h(C.l.Na,C.l,C):null;e:{var pe=C.i;let Ee=-1;for(;;){const nt=["count="+H];Ee==-1?0<H?(Ee=pe[0].g,nt.push("ofs="+Ee)):Ee=0:nt.push("ofs="+Ee);let Li=!0;for(let kr=0;kr<H;kr++){let ai=pe[kr].g;const Hr=pe[kr].map;if(ai-=Ee,0>ai)Ee=Math.max(0,pe[kr].g-100),Li=!1;else try{ux(Hr,nt,"req"+ai+"_")}catch{K&&K(Hr)}}if(Li){K=nt.join("&");break e}}}return C=C.i.splice(0,H),P.D=C,K}function Zm(C){if(!C.g&&!C.u){C.Y=1;var P=C.Fa;fe||ve(),te||(fe(),te=!0),ce.add(P,C),C.v=0}}function q1(C){return C.g||C.u||3<=C.v?!1:(C.Y++,C.u=ae(h(C.Fa,C),fx(C,C.v)),C.v++,!0)}i.Fa=function(){if(this.u=null,hx(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var C=2*this.R;this.j.info("BP detection timer enabled: "+C),this.A=ae(h(this.ab,this),C)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Q(10),Ic(this),hx(this))};function iw(C){C.A!=null&&(a.clearTimeout(C.A),C.A=null)}function hx(C){C.g=new Vi(C,C.j,"rpc",C.Y),C.m===null&&(C.g.H=C.o),C.g.O=0;var P=fl(C.qa);Wi(P,"RID","rpc"),Wi(P,"SID",C.K),Wi(P,"AID",C.T),Wi(P,"CI",C.F?"0":"1"),!C.F&&C.ja&&Wi(P,"TO",C.ja),Wi(P,"TYPE","xmlhttp"),Jd(C,P),C.m&&C.o&&Uf(P,C.m,C.o),C.L&&(C.g.I=C.L);var H=C.g;C=C.ia,H.L=1,H.v=Vf(fl(P)),H.m=null,H.P=!0,dt(H,C)}i.Za=function(){this.C!=null&&(this.C=null,Ic(this),q1(this),Q(19))};function K1(C){C.C!=null&&(a.clearTimeout(C.C),C.C=null)}function G1(C,P){var H=null;if(C.g==P){K1(C),iw(C),C.g=null;var K=2}else if(Yi(C.h,P))H=P.D,ul(C.h,P),K=1;else return;if(C.G!=0){if(P.o)if(K==1){H=P.m?P.m.length:0,P=Date.now()-P.F;var pe=C.B;K=rr(),Ti(K,new ie(K,H)),Mu(C)}else Zm(C);else if(pe=P.s,pe==3||pe==0&&0<P.X||!(K==1&&YA(C,P)||K==2&&q1(C)))switch(H&&0<H.length&&(P=C.h,P.i=P.i.concat(H)),pe){case 1:eh(C,5);break;case 4:eh(C,10);break;case 3:eh(C,6);break;default:eh(C,2)}}}function fx(C,P){let H=C.Ta+Math.floor(Math.random()*C.cb);return C.isActive()||(H*=2),H*P}function eh(C,P){if(C.j.info("Error code "+P),P==2){var H=h(C.fb,C),K=C.Xa;const pe=!K;K=new Qd(K||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ym(K,"https"),Vf(K),pe?qA(K.toString(),H):cx(K.toString(),H)}else Q(2);C.G=0,C.l&&C.l.sa(P),gx(C),j1(C)}i.fb=function(C){C?(this.j.info("Successfully pinged google.com"),Q(2)):(this.j.info("Failed to ping google.com"),Q(1))};function gx(C){if(C.G=0,C.ka=[],C.l){const P=Kd(C.h);(P.length!=0||C.i.length!=0)&&(v(C.ka,P),v(C.ka,C.i),C.h.i.length=0,_(C.i),C.i.length=0),C.l.ra()}}function mx(C,P,H){var K=H instanceof Qd?fl(H):new Qd(H);if(K.g!="")P&&(K.g=P+"."+K.g),Ff(K,K.s);else{var pe=a.location;K=pe.protocol,P=P?P+"."+pe.hostname:pe.hostname,pe=+pe.port;var Ee=new Qd(null);K&&Ym(Ee,K),P&&(Ee.g=P),pe&&Ff(Ee,pe),H&&(Ee.l=H),K=Ee}return H=C.D,P=C.ya,H&&P&&Wi(K,H,P),Wi(K,"VER",C.la),Jd(C,K),K}function px(C,P,H){if(P&&!C.J)throw Error("Can't create secondary domain capable XhrIo object.");return P=C.Ca&&!C.pa?new us(new Xd({eb:H})):new us(C.pa),P.Ha(C.J),P}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function sw(){}i=sw.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Y1(){}Y1.prototype.g=function(C,P){return new ca(C,P)};function ca(C,P){yi.call(this),this.g=new nw(P),this.l=C,this.h=P&&P.messageUrlParams||null,C=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(C?C["X-WebChannel-Content-Type"]=P.messageContentType:C={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.va&&(C?C["X-WebChannel-Client-Profile"]=P.va:C={"X-WebChannel-Client-Profile":P.va}),this.g.S=C,(C=P&&P.Sb)&&!w(C)&&(this.g.m=C),this.v=P&&P.supportsCrossDomainXhr||!1,this.u=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!w(P)&&(this.g.D=P,C=this.h,C!==null&&P in C&&(C=this.h,P in C&&delete C[P])),this.j=new Ou(this)}p(ca,yi),ca.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ca.prototype.close=function(){uo(this.g)},ca.prototype.o=function(C){var P=this.g;if(typeof C=="string"){var H={};H.__data__=C,C=H}else this.u&&(H={},H.__data__=ft(C),C=H);P.i.push(new Ot(P.Ya++,C)),P.G==3&&Mu(P)},ca.prototype.N=function(){this.g.l=null,delete this.j,uo(this.g),delete this.g,ca.aa.N.call(this)};function _x(C){ri.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var P=C.__sm__;if(P){e:{for(const H in P){C=H;break e}C=void 0}(this.i=C)&&(C=this.i,P=P!==null&&C in P?P[C]:void 0),this.data=P}else this.data=C}p(_x,ri);function vx(){Sr.call(this),this.status=1}p(vx,Sr);function Ou(C){this.g=C}p(Ou,sw),Ou.prototype.ua=function(){Ti(this.g,"a")},Ou.prototype.ta=function(C){Ti(this.g,new _x(C))},Ou.prototype.sa=function(C){Ti(this.g,new vx)},Ou.prototype.ra=function(){Ti(this.g,"b")},Y1.prototype.createWebChannel=Y1.prototype.g,ca.prototype.send=ca.prototype.o,ca.prototype.open=ca.prototype.m,ca.prototype.close=ca.prototype.close,Hse=function(){return new Y1},Wse=function(){return rr()},Vse=la,C5={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},an.NO_ERROR=0,an.TIMEOUT=8,an.HTTP_ERROR=6,MT=an,Qn.COMPLETE="complete",Bse=Qn,ns.EventType=Wr,Wr.OPEN="a",Wr.CLOSE="b",Wr.ERROR="c",Wr.MESSAGE="d",yi.prototype.listen=yi.prototype.K,lC=ns,us.prototype.listenOnce=us.prototype.L,us.prototype.getLastError=us.prototype.Ka,us.prototype.getLastErrorCode=us.prototype.Ba,us.prototype.getStatus=us.prototype.Z,us.prototype.getResponseJson=us.prototype.Oa,us.prototype.getResponseText=us.prototype.oa,us.prototype.send=us.prototype.ea,us.prototype.setWithCredentials=us.prototype.Ha,Fse=us}).apply(typeof gE<"u"?gE:typeof self<"u"?self:typeof window<"u"?window:{});const IK="@firebase/firestore",DK="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jo.UNAUTHENTICATED=new jo(null),jo.GOOGLE_CREDENTIALS=new jo("google-credentials-uid"),jo.FIRST_PARTY=new jo("first-party-uid"),jo.MOCK_USER=new jo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cy="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=new AR("@firebase/firestore");function V_(){return V0.logLevel}function pt(i,...e){if(V0.logLevel<=$n.DEBUG){const t=e.map(NV);V0.debug(`Firestore (${Cy}): ${i}`,...t)}}function df(i,...e){if(V0.logLevel<=$n.ERROR){const t=e.map(NV);V0.error(`Firestore (${Cy}): ${i}`,...t)}}function xb(i,...e){if(V0.logLevel<=$n.WARN){const t=e.map(NV);V0.warn(`Firestore (${Cy}): ${i}`,...t)}}function NV(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(i="Unexpected state"){const e=`FIRESTORE (${Cy}) INTERNAL ASSERTION FAILED: `+i;throw df(e),new Error(e)}function Ei(i,e){i||tn()}function wn(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class St extends xu{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Use{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class S2e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(jo.UNAUTHENTICATED))}shutdown(){}}class k2e{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class x2e{constructor(e){this.t=e,this.currentUser=jo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ei(this.o===void 0);let n=this.i;const s=l=>this.i!==n?(n=this.i,t(l)):Promise.resolve();let r=new u0;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new u0,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=r;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new u0)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ei(typeof n.accessToken=="string"),new Use(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ei(e===null||typeof e=="string"),new jo(e)}}class E2e{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=jo.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class T2e{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new E2e(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(jo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class NK{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class L2e{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,El(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Ei(this.o===void 0);const n=r=>{r.error!=null&&pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.R;return this.R=r.token,pt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>n(r))};const s=r=>{pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?s(r):pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new NK(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ei(typeof t.token=="string"),this.R=t.token,new NK(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2e(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<i;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zse(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jse{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=I2e(40);for(let r=0;r<s.length;++r)n.length<20&&s[r]<t&&(n+=e.charAt(s[r]%62))}return n}}function An(i,e){return i<e?-1:i>e?1:0}function S5(i,e){let t=0;for(;t<i.length&&t<e.length;){const n=i.codePointAt(t),s=e.codePointAt(t);if(n!==s){if(n<128&&s<128)return An(n,s);{const r=zse(),o=D2e(r.encode(RK(i,t)),r.encode(RK(e,t)));return o!==0?o:An(n,s)}}t+=n>65535?2:1}return An(i.length,e.length)}function RK(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function D2e(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return An(i[t],e[t]);return An(i.length,e.length)}function Eb(i,e,t){return i.length===e.length&&i.every((n,s)=>t(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AK=-62135596800,PK=1e6;let ya=class OT{static now(){return OT.fromMillis(Date.now())}static fromDate(e){return OT.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*PK);return new OT(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new St(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new St(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<AK)throw new St(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new St(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/PK}_compareTo(e){return this.seconds===e.seconds?An(this.nanoseconds,e.nanoseconds):An(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-AK;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{static fromTimestamp(e){return new mn(e)}static min(){return new mn(new ya(0,0))}static max(){return new mn(new ya(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MK="__name__";class ed{constructor(e,t,n){t===void 0?t=0:t>e.length&&tn(),n===void 0?n=e.length-t:n>e.length-t&&tn(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return ed.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ed?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const r=ed.compareSegments(e.get(s),t.get(s));if(r!==0)return r}return An(e.length,t.length)}static compareSegments(e,t){const n=ed.isNumericId(e),s=ed.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?ed.extractNumericId(e).compare(ed.extractNumericId(t)):S5(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qg.fromString(e.substring(4,e.length-2))}}class os extends ed{construct(e,t,n){return new os(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new St(Pe.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(s=>s.length>0))}return new os(t)}static emptyPath(){return new os([])}}const N2e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yo extends ed{construct(e,t,n){return new yo(e,t,n)}static isValidIdentifier(e){return N2e.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yo.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===MK}static keyField(){return new yo([MK])}static fromServerFormat(e){const t=[];let n="",s=0;const r=()=>{if(n.length===0)throw new St(Pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new St(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new St(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(n+=a,s++):(r(),s++)}if(r(),o)throw new St(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yo(t)}static emptyPath(){return new yo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.path=e}static fromPath(e){return new zt(os.fromString(e))}static fromName(e){return new zt(os.fromString(e).popFirst(5))}static empty(){return new zt(os.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&os.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return os.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new zt(new os(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=-1;function R2e(i,e){const t=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,s=mn.fromTimestamp(n===1e9?new ya(t+1,0):new ya(t,n));return new um(s,zt.empty(),e)}function A2e(i){return new um(i.readTime,i.key,zS)}class um{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new um(mn.min(),zt.empty(),zS)}static max(){return new um(mn.max(),zt.empty(),zS)}}function P2e(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=zt.comparator(i.documentKey,e.documentKey),t!==0?t:An(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2e="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class O2e{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sy(i){if(i.code!==Pe.FAILED_PRECONDITION||i.message!==M2e)throw i;pt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ae((n,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(n,s)},this.catchCallback=r=>{this.wrapFailure(t,r).next(n,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ae?t:Ae.resolve(t)}catch(t){return Ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ae.reject(t)}static resolve(e){return new Ae((t,n)=>{t(e)})}static reject(e){return new Ae((t,n)=>{n(e)})}static waitFor(e){return new Ae((t,n)=>{let s=0,r=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++r,o&&r===s&&t()},l=>n(l))}),o=!0,r===s&&t()})}static or(e){let t=Ae.resolve(!1);for(const n of e)t=t.next(s=>s?Ae.resolve(s):n());return t}static forEach(e,t){const n=[];return e.forEach((s,r)=>{n.push(t.call(this,s,r))}),this.waitFor(n)}static mapArray(e,t){return new Ae((n,s)=>{const r=e.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===r&&n(o)},u=>s(u))}})}static doWhile(e,t){return new Ae((n,s)=>{const r=()=>{e()===!0?t().next(()=>{r()},s):n()};r()})}}function F2e(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ky(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.oe(n),this._e=n=>t.writeSequenceNumber(n))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}VR.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=-1;function WR(i){return i==null}function tI(i){return i===0&&1/i==-1/0}function B2e(i){return typeof i=="number"&&Number.isInteger(i)&&!tI(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $se="";function V2e(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=OK(e)),e=W2e(i.get(t),e);return OK(e)}function W2e(i,e){let t=e;const n=i.length;for(let s=0;s<n;s++){const r=i.charAt(s);switch(r){case"\0":t+="";break;case $se:t+="";break;default:t+=r}}return t}function OK(i){return i+$se+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FK(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function g1(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function qse(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,t){this.comparator=e,this.root=t||_o.EMPTY}insert(e,t){return new xs(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_o.BLACK,null,null))}remove(e){return new xs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_o.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mE(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mE(this.root,e,this.comparator,!1)}getReverseIterator(){return new mE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mE(this.root,e,this.comparator,!0)}}class mE{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _o{constructor(e,t,n,s,r){this.key=e,this.value=t,this.color=n??_o.RED,this.left=s??_o.EMPTY,this.right=r??_o.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,r){return new _o(e??this.key,t??this.value,n??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const r=n(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,t,n),null):r===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return _o.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return _o.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_o.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_o.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tn();const e=this.left.check();if(e!==this.right.check())throw tn();return e+(this.isRed()?0:1)}}_o.EMPTY=null,_o.RED=!0,_o.BLACK=!1;_o.EMPTY=new class{constructor(){this.size=0}get key(){throw tn()}get value(){throw tn()}get color(){throw tn()}get left(){throw tn()}get right(){throw tn()}copy(e,t,n,s,r){return this}insert(e,t,n){return new _o(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.comparator=e,this.data=new xs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new BK(this.data.getIterator())}getIteratorFrom(e){return new BK(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof Dr)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=n.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Dr(this.comparator);return t.data=e,t}}class BK{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e){this.fields=e,e.sort(yo.comparator)}static empty(){return new nu([])}unionWith(e){let t=new Dr(yo.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new nu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Eb(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kse extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Kse("Invalid base64 string: "+r):r}}(e);return new xo(t)}static fromUint8Array(e){const t=function(s){let r="";for(let o=0;o<s.length;++o)r+=String.fromCharCode(s[o]);return r}(e);return new xo(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return An(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xo.EMPTY_BYTE_STRING=new xo("");const H2e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dm(i){if(Ei(!!i),typeof i=="string"){let e=0;const t=H2e.exec(i);if(Ei(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ks(i.seconds),nanos:Ks(i.nanos)}}function Ks(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function hm(i){return typeof i=="string"?xo.fromBase64String(i):xo.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gse="server_timestamp",Yse="__type__",Qse="__previous_value__",Xse="__local_write_time__";function AV(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Yse])===null||t===void 0?void 0:t.stringValue)===Gse}function HR(i){const e=i.mapValue.fields[Qse];return AV(e)?HR(e):e}function jS(i){const e=dm(i.mapValue.fields[Xse].timestampValue);return new ya(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2e{constructor(e,t,n,s,r,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const nI="(default)";class $S{constructor(e,t){this.projectId=e,this.database=t||nI}static empty(){return new $S("","")}get isDefaultDatabase(){return this.database===nI}isEqual(e){return e instanceof $S&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zse="__type__",z2e="__max__",pE={mapValue:{}},Jse="__vector__",iI="value";function fm(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?AV(i)?4:$2e(i)?9007199254740991:j2e(i)?10:11:tn()}function Ed(i,e){if(i===e)return!0;const t=fm(i);if(t!==fm(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return jS(i).isEqual(jS(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const o=dm(s.timestampValue),a=dm(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(s,r){return hm(s.bytesValue).isEqual(hm(r.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,r){return Ks(s.geoPointValue.latitude)===Ks(r.geoPointValue.latitude)&&Ks(s.geoPointValue.longitude)===Ks(r.geoPointValue.longitude)}(i,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Ks(s.integerValue)===Ks(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const o=Ks(s.doubleValue),a=Ks(r.doubleValue);return o===a?tI(o)===tI(a):isNaN(o)&&isNaN(a)}return!1}(i,e);case 9:return Eb(i.arrayValue.values||[],e.arrayValue.values||[],Ed);case 10:case 11:return function(s,r){const o=s.mapValue.fields||{},a=r.mapValue.fields||{};if(FK(o)!==FK(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ed(o[l],a[l])))return!1;return!0}(i,e);default:return tn()}}function qS(i,e){return(i.values||[]).find(t=>Ed(t,e))!==void 0}function Tb(i,e){if(i===e)return 0;const t=fm(i),n=fm(e);if(t!==n)return An(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return An(i.booleanValue,e.booleanValue);case 2:return function(r,o){const a=Ks(r.integerValue||r.doubleValue),l=Ks(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(i,e);case 3:return VK(i.timestampValue,e.timestampValue);case 4:return VK(jS(i),jS(e));case 5:return S5(i.stringValue,e.stringValue);case 6:return function(r,o){const a=hm(r),l=hm(o);return a.compareTo(l)}(i.bytesValue,e.bytesValue);case 7:return function(r,o){const a=r.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=An(a[c],l[c]);if(u!==0)return u}return An(a.length,l.length)}(i.referenceValue,e.referenceValue);case 8:return function(r,o){const a=An(Ks(r.latitude),Ks(o.latitude));return a!==0?a:An(Ks(r.longitude),Ks(o.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return WK(i.arrayValue,e.arrayValue);case 10:return function(r,o){var a,l,c,u;const d=r.fields||{},h=o.fields||{},g=(a=d[iI])===null||a===void 0?void 0:a.arrayValue,p=(l=h[iI])===null||l===void 0?void 0:l.arrayValue,_=An(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0);return _!==0?_:WK(g,p)}(i.mapValue,e.mapValue);case 11:return function(r,o){if(r===pE.mapValue&&o===pE.mapValue)return 0;if(r===pE.mapValue)return 1;if(o===pE.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const h=S5(l[d],u[d]);if(h!==0)return h;const g=Tb(a[l[d]],c[u[d]]);if(g!==0)return g}return An(l.length,u.length)}(i.mapValue,e.mapValue);default:throw tn()}}function VK(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return An(i,e);const t=dm(i),n=dm(e),s=An(t.seconds,n.seconds);return s!==0?s:An(t.nanos,n.nanos)}function WK(i,e){const t=i.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const r=Tb(t[s],n[s]);if(r)return r}return An(t.length,n.length)}function Lb(i){return k5(i)}function k5(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const n=dm(t);return`time(${n.seconds},${n.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return hm(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return zt.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let n="[",s=!0;for(const r of t.values||[])s?s=!1:n+=",",n+=k5(r);return n+"]"}(i.arrayValue):"mapValue"in i?function(t){const n=Object.keys(t.fields||{}).sort();let s="{",r=!0;for(const o of n)r?r=!1:s+=",",s+=`${o}:${k5(t.fields[o])}`;return s+"}"}(i.mapValue):tn()}function FT(i){switch(fm(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=HR(i);return e?16+FT(e):16;case 5:return 2*i.stringValue.length;case 6:return hm(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,r)=>s+FT(r),0)}(i.arrayValue);case 10:case 11:return function(n){let s=0;return g1(n.fields,(r,o)=>{s+=r.length+FT(o)}),s}(i.mapValue);default:throw tn()}}function HK(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function x5(i){return!!i&&"integerValue"in i}function PV(i){return!!i&&"arrayValue"in i}function UK(i){return!!i&&"nullValue"in i}function zK(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function BT(i){return!!i&&"mapValue"in i}function j2e(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[Zse])===null||t===void 0?void 0:t.stringValue)===Jse}function DC(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return g1(i.mapValue.fields,(t,n)=>e.mapValue.fields[t]=DC(n)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=DC(i.arrayValue.values[t]);return e}return Object.assign({},i)}function $2e(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===z2e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e){this.value=e}static empty(){return new rc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!BT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=DC(t)}setAll(e){let t=yo.emptyPath(),n={},s=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,n,s),n={},s=[],t=a.popLast()}o?n[a.lastSegment()]=DC(o):s.push(a.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,n,s)}delete(e){const t=this.field(e.popLast());BT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ed(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];BT(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){g1(t,(s,r)=>e[s]=r);for(const s of n)delete e[s]}clone(){return new rc(DC(this.value))}}function ere(i){const e=[];return g1(i.fields,(t,n)=>{const s=new yo([t]);if(BT(n)){const r=ere(n.mapValue).fields;if(r.length===0)e.push(s);else for(const o of r)e.push(s.child(o))}else e.push(s)}),new nu(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,t,n,s,r,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ko(e,0,mn.min(),mn.min(),mn.min(),rc.empty(),0)}static newFoundDocument(e,t,n,s){return new Ko(e,1,t,mn.min(),n,s,0)}static newNoDocument(e,t){return new Ko(e,2,t,mn.min(),mn.min(),rc.empty(),0)}static newUnknownDocument(e,t){return new Ko(e,3,t,mn.min(),mn.min(),rc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(mn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ko&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ko(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,t){this.position=e,this.inclusive=t}}function jK(i,e,t){let n=0;for(let s=0;s<i.position.length;s++){const r=e[s],o=i.position[s];if(r.field.isKeyField()?n=zt.comparator(zt.fromName(o.referenceValue),t.key):n=Tb(o,t.data.field(r.field)),r.dir==="desc"&&(n*=-1),n!==0)break}return n}function $K(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Ed(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,t="asc"){this.field=e,this.dir=t}}function q2e(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tre{}class mr extends tre{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new G2e(e,t,n):t==="array-contains"?new X2e(e,n):t==="in"?new Z2e(e,n):t==="not-in"?new J2e(e,n):t==="array-contains-any"?new exe(e,n):new mr(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new Y2e(e,n):new Q2e(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Tb(t,this.value)):t!==null&&fm(this.value)===fm(t)&&this.matchesComparison(Tb(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return tn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class du extends tre{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new du(e,t)}matches(e){return nre(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function nre(i){return i.op==="and"}function ire(i){return K2e(i)&&nre(i)}function K2e(i){for(const e of i.filters)if(e instanceof du)return!1;return!0}function E5(i){if(i instanceof mr)return i.field.canonicalString()+i.op.toString()+Lb(i.value);if(ire(i))return i.filters.map(e=>E5(e)).join(",");{const e=i.filters.map(t=>E5(t)).join(",");return`${i.op}(${e})`}}function sre(i,e){return i instanceof mr?function(n,s){return s instanceof mr&&n.op===s.op&&n.field.isEqual(s.field)&&Ed(n.value,s.value)}(i,e):i instanceof du?function(n,s){return s instanceof du&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((r,o,a)=>r&&sre(o,s.filters[a]),!0):!1}(i,e):void tn()}function rre(i){return i instanceof mr?function(t){return`${t.field.canonicalString()} ${t.op} ${Lb(t.value)}`}(i):i instanceof du?function(t){return t.op.toString()+" {"+t.getFilters().map(rre).join(" ,")+"}"}(i):"Filter"}class G2e extends mr{constructor(e,t,n){super(e,t,n),this.key=zt.fromName(n.referenceValue)}matches(e){const t=zt.comparator(e.key,this.key);return this.matchesComparison(t)}}class Y2e extends mr{constructor(e,t){super(e,"in",t),this.keys=ore("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Q2e extends mr{constructor(e,t){super(e,"not-in",t),this.keys=ore("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ore(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>zt.fromName(n.referenceValue))}class X2e extends mr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return PV(t)&&qS(t.arrayValue,this.value)}}class Z2e extends mr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&qS(this.value.arrayValue,t)}}class J2e extends mr{constructor(e,t){super(e,"not-in",t)}matches(e){if(qS(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!qS(this.value.arrayValue,t)}}class exe extends mr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!PV(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>qS(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class txe{constructor(e,t=null,n=[],s=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.le=null}}function qK(i,e=null,t=[],n=[],s=null,r=null,o=null){return new txe(i,e,t,n,s,r,o)}function MV(i){const e=wn(i);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>E5(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(r){return r.field.canonicalString()+r.dir}(n)).join(","),WR(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>Lb(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>Lb(n)).join(",")),e.le=t}return e.le}function OV(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!q2e(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!sre(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!$K(i.startAt,e.startAt)&&$K(i.endAt,e.endAt)}function T5(i){return zt.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,t=null,n=[],s=[],r=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function nxe(i,e,t,n,s,r,o,a){return new xy(i,e,t,n,s,r,o,a)}function FV(i){return new xy(i)}function KK(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function are(i){return i.collectionGroup!==null}function NC(i){const e=wn(i);if(e.he===null){e.he=[];const t=new Set;for(const r of e.explicitOrderBy)e.he.push(r),t.add(r.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Dr(yo.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(r=>{t.has(r.canonicalString())||r.isKeyField()||e.he.push(new KS(r,n))}),t.has(yo.keyField().canonicalString())||e.he.push(new KS(yo.keyField(),n))}return e.he}function _d(i){const e=wn(i);return e.Pe||(e.Pe=ixe(e,NC(i))),e.Pe}function ixe(i,e){if(i.limitType==="F")return qK(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new KS(s.field,r)});const t=i.endAt?new sI(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new sI(i.startAt.position,i.startAt.inclusive):null;return qK(i.path,i.collectionGroup,e,i.filters,i.limit,t,n)}}function L5(i,e){const t=i.filters.concat([e]);return new xy(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function I5(i,e,t){return new xy(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function UR(i,e){return OV(_d(i),_d(e))&&i.limitType===e.limitType}function lre(i){return`${MV(_d(i))}|lt:${i.limitType}`}function W_(i){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(s=>rre(s)).join(", ")}]`),WR(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>Lb(s)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>Lb(s)).join(",")),`Target(${n})`}(_d(i))}; limitType=${i.limitType})`}function zR(i,e){return e.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):zt.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(i,e)&&function(n,s){for(const r of NC(n))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(i,e)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(i,e)&&function(n,s){return!(n.startAt&&!function(o,a,l){const c=jK(o,a,l);return o.inclusive?c<=0:c<0}(n.startAt,NC(n),s)||n.endAt&&!function(o,a,l){const c=jK(o,a,l);return o.inclusive?c>=0:c>0}(n.endAt,NC(n),s))}(i,e)}function sxe(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function cre(i){return(e,t)=>{let n=!1;for(const s of NC(i)){const r=rxe(s,e,t);if(r!==0)return r;n=n||s.field.isKeyField()}return 0}}function rxe(i,e,t){const n=i.field.isKeyField()?zt.comparator(e.key,t.key):function(r,o,a){const l=o.data.field(r),c=a.data.field(r);return l!==null&&c!==null?Tb(l,c):tn()}(i.field,e,t);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return tn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,r]of n)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){g1(this.inner,(t,n)=>{for(const[s,r]of n)e(s,r)})}isEmpty(){return qse(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oxe=new xs(zt.comparator);function hf(){return oxe}const ure=new xs(zt.comparator);function cC(...i){let e=ure;for(const t of i)e=e.insert(t.key,t);return e}function dre(i){let e=ure;return i.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function e0(){return RC()}function hre(){return RC()}function RC(){return new m1(i=>i.toString(),(i,e)=>i.isEqual(e))}const axe=new xs(zt.comparator),lxe=new Dr(zt.comparator);function qn(...i){let e=lxe;for(const t of i)e=e.add(t);return e}const cxe=new Dr(An);function uxe(){return cxe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tI(e)?"-0":e}}function fre(i){return{integerValue:""+i}}function dxe(i,e){return B2e(e)?fre(e):BV(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(){this._=void 0}}function hxe(i,e,t){return i instanceof rI?function(s,r){const o={fields:{[Yse]:{stringValue:Gse},[Xse]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&AV(r)&&(r=HR(r)),r&&(o.fields[Qse]=r),{mapValue:o}}(t,e):i instanceof GS?mre(i,e):i instanceof YS?pre(i,e):function(s,r){const o=gre(s,r),a=GK(o)+GK(s.Ie);return x5(o)&&x5(s.Ie)?fre(a):BV(s.serializer,a)}(i,e)}function fxe(i,e,t){return i instanceof GS?mre(i,e):i instanceof YS?pre(i,e):t}function gre(i,e){return i instanceof oI?function(n){return x5(n)||function(r){return!!r&&"doubleValue"in r}(n)}(e)?e:{integerValue:0}:null}class rI extends jR{}class GS extends jR{constructor(e){super(),this.elements=e}}function mre(i,e){const t=_re(e);for(const n of i.elements)t.some(s=>Ed(s,n))||t.push(n);return{arrayValue:{values:t}}}class YS extends jR{constructor(e){super(),this.elements=e}}function pre(i,e){let t=_re(e);for(const n of i.elements)t=t.filter(s=>!Ed(s,n));return{arrayValue:{values:t}}}class oI extends jR{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function GK(i){return Ks(i.integerValue||i.doubleValue)}function _re(i){return PV(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function gxe(i,e){return i.field.isEqual(e.field)&&function(n,s){return n instanceof GS&&s instanceof GS||n instanceof YS&&s instanceof YS?Eb(n.elements,s.elements,Ed):n instanceof oI&&s instanceof oI?Ed(n.Ie,s.Ie):n instanceof rI&&s instanceof rI}(i.transform,e.transform)}class mxe{constructor(e,t){this.version=e,this.transformResults=t}}class vd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vd}static exists(e){return new vd(void 0,e)}static updateTime(e){return new vd(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function VT(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class $R{}function vre(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new yre(i.key,vd.none()):new m2(i.key,i.data,vd.none());{const t=i.data,n=rc.empty();let s=new Dr(yo.comparator);for(let r of e.fields)if(!s.has(r)){let o=t.field(r);o===null&&r.length>1&&(r=r.popLast(),o=t.field(r)),o===null?n.delete(r):n.set(r,o),s=s.add(r)}return new p1(i.key,n,new nu(s.toArray()),vd.none())}}function pxe(i,e,t){i instanceof m2?function(s,r,o){const a=s.value.clone(),l=QK(s.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(i,e,t):i instanceof p1?function(s,r,o){if(!VT(s.precondition,r))return void r.convertToUnknownDocument(o.version);const a=QK(s.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(bre(s)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(i,e,t):function(s,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function AC(i,e,t,n){return i instanceof m2?function(r,o,a,l){if(!VT(r.precondition,o))return a;const c=r.value.clone(),u=XK(r.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(i,e,t,n):i instanceof p1?function(r,o,a,l){if(!VT(r.precondition,o))return a;const c=XK(r.fieldTransforms,l,o),u=o.data;return u.setAll(bre(r)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(d=>d.field))}(i,e,t,n):function(r,o,a){return VT(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(i,e,t)}function _xe(i,e){let t=null;for(const n of i.fieldTransforms){const s=e.data.field(n.field),r=gre(n.transform,s||null);r!=null&&(t===null&&(t=rc.empty()),t.set(n.field,r))}return t||null}function YK(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Eb(n,s,(r,o)=>gxe(r,o))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class m2 extends $R{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class p1 extends $R{constructor(e,t,n,s,r=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function bre(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=i.data.field(t);e.set(t,n)}}),e}function QK(i,e,t){const n=new Map;Ei(i.length===t.length);for(let s=0;s<t.length;s++){const r=i[s],o=r.transform,a=e.data.field(r.field);n.set(r.field,fxe(o,a,t[s]))}return n}function XK(i,e,t){const n=new Map;for(const s of i){const r=s.transform,o=t.data.field(s.field);n.set(s.field,hxe(r,o,e))}return n}class yre extends $R{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vxe extends $R{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bxe{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&pxe(r,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=AC(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=AC(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=hre();return this.mutations.forEach(s=>{const r=e.get(s.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=t.has(s.key)?null:a;const l=vre(o,a);l!==null&&n.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(mn.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qn())}isEqual(e){return this.batchId===e.batchId&&Eb(this.mutations,e.mutations,(t,n)=>YK(t,n))&&Eb(this.baseMutations,e.baseMutations,(t,n)=>YK(t,n))}}class VV{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){Ei(e.mutations.length===n.length);let s=function(){return axe}();const r=e.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,n[o].version);return new VV(e,t,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yxe{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wxe{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hr,li;function Cxe(i){switch(i){case Pe.OK:return tn();case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0;default:return tn()}}function wre(i){if(i===void 0)return df("GRPC error has no .code"),Pe.UNKNOWN;switch(i){case hr.OK:return Pe.OK;case hr.CANCELLED:return Pe.CANCELLED;case hr.UNKNOWN:return Pe.UNKNOWN;case hr.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case hr.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case hr.INTERNAL:return Pe.INTERNAL;case hr.UNAVAILABLE:return Pe.UNAVAILABLE;case hr.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case hr.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case hr.NOT_FOUND:return Pe.NOT_FOUND;case hr.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case hr.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case hr.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case hr.ABORTED:return Pe.ABORTED;case hr.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case hr.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case hr.DATA_LOSS:return Pe.DATA_LOSS;default:return tn()}}(li=hr||(hr={}))[li.OK=0]="OK",li[li.CANCELLED=1]="CANCELLED",li[li.UNKNOWN=2]="UNKNOWN",li[li.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",li[li.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",li[li.NOT_FOUND=5]="NOT_FOUND",li[li.ALREADY_EXISTS=6]="ALREADY_EXISTS",li[li.PERMISSION_DENIED=7]="PERMISSION_DENIED",li[li.UNAUTHENTICATED=16]="UNAUTHENTICATED",li[li.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",li[li.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",li[li.ABORTED=10]="ABORTED",li[li.OUT_OF_RANGE=11]="OUT_OF_RANGE",li[li.UNIMPLEMENTED=12]="UNIMPLEMENTED",li[li.INTERNAL=13]="INTERNAL",li[li.UNAVAILABLE=14]="UNAVAILABLE",li[li.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sxe=new Qg([4294967295,4294967295],0);function ZK(i){const e=zse().encode(i),t=new Ose;return t.update(e),new Uint8Array(t.digest())}function JK(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Qg([t,n],0),new Qg([s,r],0)]}class WV{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new uC(`Invalid padding: ${t}`);if(n<0)throw new uC(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new uC(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new uC(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Qg.fromNumber(this.Ee)}Ae(e,t,n){let s=e.add(t.multiply(Qg.fromNumber(n)));return s.compare(Sxe)===1&&(s=new Qg([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=ZK(e),[n,s]=JK(t);for(let r=0;r<this.hashCount;r++){const o=this.Ae(n,s,r);if(!this.Re(o))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new WV(r,s,t);return n.forEach(a=>o.insert(a)),o}insert(e){if(this.Ee===0)return;const t=ZK(e),[n,s]=JK(t);for(let r=0;r<this.hashCount;r++){const o=this.Ae(n,s,r);this.Ve(o)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class uC extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,t,n,s,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,p2.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new qR(mn.min(),s,new xs(An),hf(),qn())}}class p2{constructor(e,t,n,s,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new p2(n,t,qn(),qn(),qn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,t,n,s){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=s}}class Cre{constructor(e,t){this.targetId=e,this.ge=t}}class Sre{constructor(e,t,n=xo.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class eG{constructor(){this.pe=0,this.ye=tG(),this.we=xo.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=qn(),t=qn(),n=qn();return this.ye.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:tn()}}),new p2(this.we,this.Se,e,t,n)}Me(){this.be=!1,this.ye=tG()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ei(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class kxe{constructor(e){this.ke=e,this.qe=new Map,this.Qe=hf(),this.$e=_E(),this.Ue=_E(),this.Ke=new xs(An)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:tn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((n,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,n=e.ge.count,s=this.Xe(t);if(s){const r=s.target;if(T5(r))if(n===0){const o=new zt(r.path);this.ze(t,o,Ko.newNoDocument(o,mn.min()))}else Ei(n===1);else{const o=this.et(t);if(o!==n){const a=this.tt(e),l=a?this.nt(a,e,o):1;if(l!==0){this.Ye(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,c)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:r=0}=t;let o,a;try{o=hm(n).toUint8Array()}catch(l){if(l instanceof Kse)return xb("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new WV(o,s,r)}catch(l){return xb(l instanceof uC?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let s=0;return n.forEach(r=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,r,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((r,o)=>{const a=this.Xe(o);if(a){if(r.current&&T5(a.target)){const l=new zt(a.target.path);this._t(l).has(o)||this.ut(o,l)||this.ze(o,l,Ko.newNoDocument(l,e))}r.ve&&(t.set(o,r.Fe()),r.Me())}});let n=qn();this.Ue.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xe(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(r))}),this.Qe.forEach((r,o)=>o.setReadTime(e));const s=new qR(e,t,this.Ke,this.Qe,n);return this.Qe=hf(),this.$e=_E(),this.Ue=_E(),this.Ke=new xs(An),s}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new eG,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Dr(An),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Dr(An),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||pt("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new eG),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function _E(){return new xs(zt.comparator)}function tG(){return new xs(zt.comparator)}const xxe={asc:"ASCENDING",desc:"DESCENDING"},Exe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Txe={and:"AND",or:"OR"};class Lxe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function D5(i,e){return i.useProto3Json||WR(e)?e:{value:e}}function aI(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kre(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Ixe(i,e){return aI(i,e.toTimestamp())}function bd(i){return Ei(!!i),mn.fromTimestamp(function(t){const n=dm(t);return new ya(n.seconds,n.nanos)}(i))}function HV(i,e){return N5(i,e).canonicalString()}function N5(i,e){const t=function(s){return new os(["projects",s.projectId,"databases",s.database])}(i).child("documents");return e===void 0?t:t.child(e)}function xre(i){const e=os.fromString(i);return Ei(Dre(e)),e}function R5(i,e){return HV(i.databaseId,e.path)}function AM(i,e){const t=xre(e);if(t.get(1)!==i.databaseId.projectId)throw new St(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new St(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new zt(Tre(t))}function Ere(i,e){return HV(i.databaseId,e)}function Dxe(i){const e=xre(i);return e.length===4?os.emptyPath():Tre(e)}function A5(i){return new os(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Tre(i){return Ei(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function nG(i,e,t){return{name:R5(i,e),fields:t.value.mapValue.fields}}function Nxe(i,e){let t;if("targetChange"in e){e.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:tn()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(c,u){return c.useProto3Json?(Ei(u===void 0||typeof u=="string"),xo.fromBase64String(u||"")):(Ei(u===void 0||u instanceof Buffer||u instanceof Uint8Array),xo.fromUint8Array(u||new Uint8Array))}(i,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?Pe.UNKNOWN:wre(c.code);return new St(u,c.message||"")}(o);t=new Sre(n,s,r,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=AM(i,n.document.name),r=bd(n.document.updateTime),o=n.document.createTime?bd(n.document.createTime):mn.min(),a=new rc({mapValue:{fields:n.document.fields}}),l=Ko.newFoundDocument(s,r,o,a),c=n.targetIds||[],u=n.removedTargetIds||[];t=new WT(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=AM(i,n.document),r=n.readTime?bd(n.readTime):mn.min(),o=Ko.newNoDocument(s,r),a=n.removedTargetIds||[];t=new WT([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=AM(i,n.document),r=n.removedTargetIds||[];t=new WT([],r,s,null)}else{if(!("filter"in e))return tn();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:r}=n,o=new wxe(s,r),a=n.targetId;t=new Cre(a,o)}}return t}function Rxe(i,e){let t;if(e instanceof m2)t={update:nG(i,e.key,e.value)};else if(e instanceof yre)t={delete:R5(i,e.key)};else if(e instanceof p1)t={update:nG(i,e.key,e.data),updateMask:Hxe(e.fieldMask)};else{if(!(e instanceof vxe))return tn();t={verify:R5(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(r,o){const a=o.transform;if(a instanceof rI)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof GS)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof YS)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof oI)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw tn()}(0,n))),e.precondition.isNone||(t.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:Ixe(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:tn()}(i,e.precondition)),t}function Axe(i,e){return i&&i.length>0?(Ei(e!==void 0),i.map(t=>function(s,r){let o=s.updateTime?bd(s.updateTime):bd(r);return o.isEqual(mn.min())&&(o=bd(r)),new mxe(o,s.transformResults||[])}(t,e))):[]}function Pxe(i,e){return{documents:[Ere(i,e.path)]}}function Mxe(i,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=Ere(i,s);const r=function(c){if(c.length!==0)return Ire(du.create(c,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const o=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:H_(h.field),direction:Bxe(h.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=D5(i,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:t,parent:s}}function Oxe(i){let e=Dxe(i.parent);const t=i.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){Ei(n===1);const u=t.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let r=[];t.where&&(r=function(d){const h=Lre(d);return h instanceof du&&ire(h)?h.getFilters():[h]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(h=>function(p){return new KS(U_(p.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(h))}(t.orderBy));let a=null;t.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,WR(h)?null:h}(t.limit));let l=null;t.startAt&&(l=function(d){const h=!!d.before,g=d.values||[];return new sI(g,h)}(t.startAt));let c=null;return t.endAt&&(c=function(d){const h=!d.before,g=d.values||[];return new sI(g,h)}(t.endAt)),nxe(e,s,o,r,a,"F",l,c)}function Fxe(i,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tn()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Lre(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=U_(t.unaryFilter.field);return mr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=U_(t.unaryFilter.field);return mr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=U_(t.unaryFilter.field);return mr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=U_(t.unaryFilter.field);return mr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return tn()}}(i):i.fieldFilter!==void 0?function(t){return mr.create(U_(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tn()}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return du.create(t.compositeFilter.filters.map(n=>Lre(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return tn()}}(t.compositeFilter.op))}(i):tn()}function Bxe(i){return xxe[i]}function Vxe(i){return Exe[i]}function Wxe(i){return Txe[i]}function H_(i){return{fieldPath:i.canonicalString()}}function U_(i){return yo.fromServerFormat(i.fieldPath)}function Ire(i){return i instanceof mr?function(t){if(t.op==="=="){if(zK(t.value))return{unaryFilter:{field:H_(t.field),op:"IS_NAN"}};if(UK(t.value))return{unaryFilter:{field:H_(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(zK(t.value))return{unaryFilter:{field:H_(t.field),op:"IS_NOT_NAN"}};if(UK(t.value))return{unaryFilter:{field:H_(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:H_(t.field),op:Vxe(t.op),value:t.value}}}(i):i instanceof du?function(t){const n=t.getFilters().map(s=>Ire(s));return n.length===1?n[0]:{compositeFilter:{op:Wxe(t.op),filters:n}}}(i):tn()}function Hxe(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Dre(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,t,n,s,r=mn.min(),o=mn.min(),a=xo.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Fg(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fg(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uxe{constructor(e){this.Tt=e}}function zxe(i){const e=Oxe({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?I5(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jxe{constructor(){this.Tn=new $xe}addToCollectionParentIndex(e,t){return this.Tn.add(t),Ae.resolve()}getCollectionParents(e,t){return Ae.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return Ae.resolve()}deleteFieldIndex(e,t){return Ae.resolve()}deleteAllFieldIndexes(e){return Ae.resolve()}createTargetIndexes(e,t){return Ae.resolve()}getDocumentsMatchingTarget(e,t){return Ae.resolve(null)}getIndexType(e,t){return Ae.resolve(0)}getFieldIndexes(e,t){return Ae.resolve([])}getNextCollectionGroupToUpdate(e){return Ae.resolve(null)}getMinOffset(e,t){return Ae.resolve(um.min())}getMinOffsetFromCollectionGroup(e,t){return Ae.resolve(um.min())}updateCollectionGroup(e,t,n){return Ae.resolve()}updateIndexEntries(e,t){return Ae.resolve()}}class $xe{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new Dr(os.comparator),r=!s.has(n);return this.index[t]=s.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Dr(os.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iG={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Nre=41943040;class Ua{static withCacheSize(e){return new Ua(e,Ua.DEFAULT_COLLECTION_PERCENTILE,Ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ua.DEFAULT_COLLECTION_PERCENTILE=10,Ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ua.DEFAULT=new Ua(Nre,Ua.DEFAULT_COLLECTION_PERCENTILE,Ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ua.DISABLED=new Ua(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Ib(0)}static Kn(){return new Ib(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sG="LruGarbageCollector",qxe=1048576;function rG([i,e],[t,n]){const s=An(i,t);return s===0?An(e,n):s}class Kxe{constructor(e){this.Hn=e,this.buffer=new Dr(rG),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();rG(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Gxe{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){pt(sG,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ky(t)?pt(sG,"Ignoring IndexedDB error during garbage collection: ",t):await Sy(t)}await this.er(3e5)})}}class Yxe{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return Ae.resolve(VR.ae);const n=new Kxe(t);return this.tr.forEachTarget(e,s=>n.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>n.Zn(s))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pt("LruGarbageCollector","Garbage collection skipped; disabled"),Ae.resolve(iG)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(pt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iG):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,s,r,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(pt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s))).next(d=>(n=d,a=Date.now(),this.removeTargets(e,n,t))).next(d=>(r=d,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(d=>(c=Date.now(),V_()<=$n.DEBUG&&pt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${r} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),Ae.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:d})))}}function Qxe(i,e){return new Yxe(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xxe{constructor(){this.changes=new m1(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ko.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?Ae.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zxe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jxe{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(n!==null&&AC(n.mutation,s,nu.empty(),ya.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,qn()).next(()=>n))}getLocalViewOfDocuments(e,t,n=qn()){const s=e0();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,n).next(r=>{let o=cC();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const n=e0();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,qn()))}populateOverlays(e,t,n){const s=[];return n.forEach(r=>{t.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,n,s){let r=hf();const o=RC(),a=function(){return RC()}();return t.forEach((l,c)=>{const u=n.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof p1)?r=r.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),AC(u.mutation,c,u.mutation.getFieldMask(),ya.now())):o.set(c.key,nu.empty())}),this.recalculateAndSaveOverlays(e,r).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var d;return a.set(c,new Zxe(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){const n=RC();let s=new xs((o,a)=>o-a),r=qn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=n.get(l)||nu.empty();u=a.applyToLocalView(c,u),n.set(l,u);const d=(s.get(a.batchId)||qn()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=hre();u.forEach(h=>{if(!r.has(h)){const g=vre(t.get(h),n.get(h));g!==null&&d.set(h,g),r=r.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return Ae.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,s){return function(o){return zt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):are(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next(r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-r.size):Ae.resolve(e0());let a=zS,l=r;return o.next(c=>Ae.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),r.get(u)?Ae.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,r)).next(()=>this.computeViews(e,l,c,qn())).next(u=>({batchId:a,changes:dre(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new zt(t)).next(n=>{let s=cC();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const r=t.collectionGroup;let o=cC();return this.indexManager.getCollectionParents(e,r).next(a=>Ae.forEach(a,l=>{const c=function(d,h){return new xy(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(r));return this.getDocumentsMatchingCollectionQuery(e,c,n,s).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r,s))).next(o=>{r.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Ko.newInvalidDocument(u)))});let a=cC();return o.forEach((l,c)=>{const u=r.get(l);u!==void 0&&AC(u.mutation,c,nu.empty(),ya.now()),zR(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eEe{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return Ae.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:bd(s.createTime)}}(t)),Ae.resolve()}getNamedQuery(e,t){return Ae.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:zxe(s.bundledQuery),readTime:bd(s.readTime)}}(t)),Ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tEe{constructor(){this.overlays=new xs(zt.comparator),this.Rr=new Map}getOverlay(e,t){return Ae.resolve(this.overlays.get(t))}getOverlays(e,t){const n=e0();return Ae.forEach(t,s=>this.getOverlay(e,s).next(r=>{r!==null&&n.set(s,r)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((s,r)=>{this.Et(e,t,r)}),Ae.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.Rr.get(n);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.Rr.delete(n)),Ae.resolve()}getOverlaysForCollection(e,t,n){const s=e0(),r=t.length+1,o=new zt(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>n&&s.set(l.getKey(),l)}return Ae.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let r=new xs((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>n){let u=r.get(c.largestBatchId);u===null&&(u=e0(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=e0(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return Ae.resolve(a)}Et(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const o=this.Rr.get(s.largestBatchId).delete(n.key);this.Rr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new yxe(t,n));let r=this.Rr.get(t);r===void 0&&(r=qn(),this.Rr.set(t,r)),this.Rr.set(t,r.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nEe{constructor(){this.sessionToken=xo.EMPTY_BYTE_STRING}getSessionToken(e){return Ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(){this.Vr=new Dr(Xr.mr),this.gr=new Dr(Xr.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new Xr(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.wr(new Xr(e,t))}Sr(e,t){e.forEach(n=>this.removeReference(n,t))}br(e){const t=new zt(new os([])),n=new Xr(t,e),s=new Xr(t,e+1),r=[];return this.gr.forEachInRange([n,s],o=>{this.wr(o),r.push(o.key)}),r}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new zt(new os([])),n=new Xr(t,e),s=new Xr(t,e+1);let r=qn();return this.gr.forEachInRange([n,s],o=>{r=r.add(o.key)}),r}containsKey(e){const t=new Xr(e,0),n=this.Vr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Xr{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return zt.comparator(e.key,t.key)||An(e.Cr,t.Cr)}static pr(e,t){return An(e.Cr,t.Cr)||zt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iEe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Dr(Xr.mr)}checkEmpty(e){return Ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const r=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new bxe(r,t,n,s);this.mutationQueue.push(o);for(const a of s)this.Mr=this.Mr.add(new Xr(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ae.resolve(o)}lookupMutationBatch(e,t){return Ae.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.Nr(n),r=s<0?0:s;return Ae.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Ae.resolve(this.mutationQueue.length===0?RV:this.Fr-1)}getAllMutationBatches(e){return Ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Xr(t,0),s=new Xr(t,Number.POSITIVE_INFINITY),r=[];return this.Mr.forEachInRange([n,s],o=>{const a=this.Or(o.Cr);r.push(a)}),Ae.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Dr(An);return t.forEach(s=>{const r=new Xr(s,0),o=new Xr(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([r,o],a=>{n=n.add(a.Cr)})}),Ae.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let r=n;zt.isDocumentKey(r)||(r=r.child(""));const o=new Xr(new zt(r),0);let a=new Dr(An);return this.Mr.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Cr)),!0)},o),Ae.resolve(this.Br(a))}Br(e){const t=[];return e.forEach(n=>{const s=this.Or(n);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Ei(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.Mr;return Ae.forEach(t.mutations,s=>{const r=new Xr(s.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=n})}qn(e){}containsKey(e,t){const n=new Xr(t,0),s=this.Mr.firstAfterOrEqual(n);return Ae.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ae.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sEe{constructor(e){this.kr=e,this.docs=function(){return new xs(zt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),r=s?s.size:0,o=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ae.resolve(n?n.document.mutableCopy():Ko.newInvalidDocument(t))}getEntries(e,t){let n=hf();return t.forEach(s=>{const r=this.docs.get(s);n=n.insert(s,r?r.document.mutableCopy():Ko.newInvalidDocument(s))}),Ae.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let r=hf();const o=t.path,a=new zt(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||P2e(A2e(u),n)<=0||(s.has(u.key)||zR(t,u))&&(r=r.insert(u.key,u.mutableCopy()))}return Ae.resolve(r)}getAllFromCollectionGroup(e,t,n,s){tn()}qr(e,t){return Ae.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new rEe(this)}getSize(e){return Ae.resolve(this.size)}}class rEe extends Xxe{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(n)}),Ae.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oEe{constructor(e){this.persistence=e,this.Qr=new m1(t=>MV(t),OV),this.lastRemoteSnapshotVersion=mn.min(),this.highestTargetId=0,this.$r=0,this.Ur=new UV,this.targetCount=0,this.Kr=Ib.Un()}forEachTarget(e,t){return this.Qr.forEach((n,s)=>t(s)),Ae.resolve()}getLastRemoteSnapshotVersion(e){return Ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ae.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),Ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),Ae.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Ib(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,Ae.resolve()}updateTargetData(e,t){return this.zn(t),Ae.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,Ae.resolve()}removeTargets(e,t,n){let s=0;const r=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=t&&n.get(a.targetId)===null&&(this.Qr.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),Ae.waitFor(r).next(()=>s)}getTargetCount(e){return Ae.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return Ae.resolve(n)}addMatchingKeys(e,t,n){return this.Ur.yr(t,n),Ae.resolve()}removeMatchingKeys(e,t,n){this.Ur.Sr(t,n);const s=this.persistence.referenceDelegate,r=[];return s&&t.forEach(o=>{r.push(s.markPotentiallyOrphaned(e,o))}),Ae.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),Ae.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ur.vr(t);return Ae.resolve(n)}containsKey(e,t){return Ae.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rre{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new VR(0),this.zr=!1,this.zr=!0,this.jr=new nEe,this.referenceDelegate=e(this),this.Hr=new oEe(this),this.indexManager=new jxe,this.remoteDocumentCache=function(s){return new sEe(s)}(n=>this.referenceDelegate.Jr(n)),this.serializer=new Uxe(t),this.Yr=new eEe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tEe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new iEe(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){pt("MemoryPersistence","Starting transaction:",e);const s=new aEe(this.Gr.next());return this.referenceDelegate.Zr(),n(s).next(r=>this.referenceDelegate.Xr(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}ei(e,t){return Ae.or(Object.values(this.Wr).map(n=>()=>n.containsKey(e,t)))}}class aEe extends O2e{constructor(e){super(),this.currentSequenceNumber=e}}class zV{constructor(e){this.persistence=e,this.ti=new UV,this.ni=null}static ri(e){return new zV(e)}get ii(){if(this.ni)return this.ni;throw tn()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),Ae.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),Ae.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),Ae.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(s=>this.ii.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(r=>this.ii.add(r.toString()))}).next(()=>n.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ae.forEach(this.ii,n=>{const s=zt.fromPath(n);return this.si(e,s).next(r=>{r||t.removeEntry(s,mn.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(n=>{n?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return Ae.or([()=>Ae.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class lI{constructor(e,t){this.persistence=e,this.oi=new m1(n=>V2e(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=Qxe(this,t)}static ri(e,t){return new lI(e,t)}Zr(){}Xr(e){return Ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(s=>n+s))}sr(e){let t=0;return this.rr(e,n=>{t++}).next(()=>t)}rr(e,t){return Ae.forEach(this.oi,(n,s)=>this.ar(e,n,s).next(r=>r?Ae.resolve():t(s)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.qr(e,o=>this.ar(e,o,t).next(a=>{a||(n++,r.removeEntry(o,mn.min()))})).next(()=>r.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),Ae.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),Ae.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),Ae.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),Ae.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=FT(e.data.value)),t}ar(e,t,n){return Ae.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return Ae.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=s}static Yi(e,t){let n=qn(),s=qn();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new jV(e,t.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lEe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cEe{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return _ye()?8:F2e(ta())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,s){const r={result:null};return this.rs(e,t).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.ss(e,t,s,n).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new lEe;return this._s(e,t,o).next(a=>{if(r.result=a,this.Xi)return this.us(e,t,o,a.size)})}).next(()=>r.result)}us(e,t,n,s){return n.documentReadCount<this.es?(V_()<=$n.DEBUG&&pt("QueryEngine","SDK will not create cache indexes for query:",W_(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Ae.resolve()):(V_()<=$n.DEBUG&&pt("QueryEngine","Query:",W_(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.ts*s?(V_()<=$n.DEBUG&&pt("QueryEngine","The SDK decides to create cache indexes for query:",W_(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_d(t))):Ae.resolve())}rs(e,t){if(KK(t))return Ae.resolve(null);let n=_d(t);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=I5(t,null,"F"),n=_d(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const o=qn(...r);return this.ns.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,n).next(l=>{const c=this.cs(t,a);return this.ls(t,c,o,l.readTime)?this.rs(e,I5(t,null,"F")):this.hs(e,c,t,l)}))})))}ss(e,t,n,s){return KK(t)||s.isEqual(mn.min())?Ae.resolve(null):this.ns.getDocuments(e,n).next(r=>{const o=this.cs(t,r);return this.ls(t,o,n,s)?Ae.resolve(null):(V_()<=$n.DEBUG&&pt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),W_(t)),this.hs(e,o,t,R2e(s,zS)).next(a=>a))})}cs(e,t){let n=new Dr(cre(e));return t.forEach((s,r)=>{zR(e,r)&&(n=n.add(r))}),n}ls(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const r=e.limitType==="F"?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}_s(e,t,n){return V_()<=$n.DEBUG&&pt("QueryEngine","Using full collection scan to execute query:",W_(t)),this.ns.getDocumentsMatchingQuery(e,t,um.min(),n)}hs(e,t,n,s){return this.ns.getDocumentsMatchingQuery(e,n,s).next(r=>(t.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V="LocalStore",uEe=3e8;class dEe{constructor(e,t,n,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new xs(An),this.Is=new m1(r=>MV(r),OV),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Jxe(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function hEe(i,e,t,n){return new dEe(i,e,t,n)}async function Are(i,e){const t=wn(i);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next(r=>(s=r,t.As(e),t.mutationQueue.getAllMutationBatches(n))).next(r=>{const o=[],a=[];let l=qn();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of r){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(n,l).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function fEe(i,e){const t=wn(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),r=t.ds.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,h=d.keys();let g=Ae.resolve();return h.forEach(p=>{g=g.next(()=>u.getEntry(l,p)).next(_=>{const v=c.docVersions.get(p);Ei(v!==null),_.version.compareTo(v)<0&&(d.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),u.addEntry(_)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(t,n,e,r).next(()=>r.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let l=qn();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(n,s))})}function Pre(i){const e=wn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function gEe(i,e){const t=wn(i),n=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const a=[];e.targetChanges.forEach((u,d)=>{const h=s.get(d);if(!h)return;a.push(t.Hr.removeMatchingKeys(r,u.removedDocuments,d).next(()=>t.Hr.addMatchingKeys(r,u.addedDocuments,d)));let g=h.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(xo.EMPTY_BYTE_STRING,mn.min()).withLastLimboFreeSnapshotVersion(mn.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,n)),s=s.insert(d,g),function(_,v,y){return _.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=uEe?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,g,u)&&a.push(t.Hr.updateTargetData(r,g))});let l=hf(),c=qn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(r,u))}),a.push(mEe(r,o,e.documentUpdates).next(u=>{l=u.Vs,c=u.fs})),!n.isEqual(mn.min())){const u=t.Hr.getLastRemoteSnapshotVersion(r).next(d=>t.Hr.setTargetsMetadata(r,r.currentSequenceNumber,n));a.push(u)}return Ae.waitFor(a).next(()=>o.apply(r)).next(()=>t.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(t.Ts=s,r))}function mEe(i,e,t){let n=qn(),s=qn();return t.forEach(r=>n=n.add(r)),e.getEntries(i,n).next(r=>{let o=hf();return t.forEach((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(mn.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):pt($V,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Vs:o,fs:s}})}function pEe(i,e){const t=wn(i);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=RV),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function _Ee(i,e){const t=wn(i);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return t.Hr.getTargetData(n,e).next(r=>r?(s=r,Ae.resolve(s)):t.Hr.allocateTargetId(n).next(o=>(s=new Fg(e,o,"TargetPurposeListen",n.currentSequenceNumber),t.Hr.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=t.Ts.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(n.targetId,n),t.Is.set(e,n.targetId)),n})}async function P5(i,e,t){const n=wn(i),s=n.Ts.get(e),r=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",r,o=>n.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ky(o))throw o;pt($V,`Failed to update sequence numbers for target ${e}: ${o}`)}n.Ts=n.Ts.remove(e),n.Is.delete(s.target)}function oG(i,e,t){const n=wn(i);let s=mn.min(),r=qn();return n.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=wn(l),h=d.Is.get(u);return h!==void 0?Ae.resolve(d.Ts.get(h)):d.Hr.getTargetData(c,u)}(n,o,_d(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,n.Hr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>n.Ps.getDocumentsMatchingQuery(o,e,t?s:mn.min(),t?r:qn())).next(a=>(vEe(n,sxe(e),a),{documents:a,gs:r})))}function vEe(i,e,t){let n=i.Es.get(e)||mn.min();t.forEach((s,r)=>{r.readTime.compareTo(n)>0&&(n=r.readTime)}),i.Es.set(e,n)}class aG{constructor(){this.activeTargetIds=uxe()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bEe{constructor(){this.ho=new aG,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new aG,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yEe{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lG="ConnectivityMonitor";class cG{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){pt(lG,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){pt(lG,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vE=null;function M5(){return vE===null?vE=function(){return 268435456+Math.round(2147483648*Math.random())}():vE++,"0x"+vE.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM="RestConnection",wEe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class CEe{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${s}`,this.wo=this.databaseId.database===nI?`project_id=${n}`:`project_id=${n}&database_id=${s}`}So(e,t,n,s,r){const o=M5(),a=this.bo(e,t.toUriEncodedString());pt(PM,`Sending RPC '${e}' ${o}:`,a,n);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,s,r),this.vo(e,a,l,n).then(c=>(pt(PM,`Received RPC '${e}' ${o}: `,c),c),c=>{throw xb(PM,`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",n),c})}Co(e,t,n,s,r,o){return this.So(e,t,n,s,r)}Do(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cy}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,r)=>e[r]=s),n&&n.headers.forEach((s,r)=>e[r]=s)}bo(e,t){const n=wEe[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SEe{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="WebChannelConnection";class kEe extends CEe{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,s){const r=M5();return new Promise((o,a)=>{const l=new Fse;l.setWithCredentials(!0),l.listenOnce(Bse.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case MT.NO_ERROR:const u=l.getResponseJson();pt(Wo,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(u)),o(u);break;case MT.TIMEOUT:pt(Wo,`RPC '${e}' ${r} timed out`),a(new St(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case MT.HTTP_ERROR:const d=l.getStatus();if(pt(Wo,`RPC '${e}' ${r} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const g=h==null?void 0:h.error;if(g&&g.status&&g.message){const p=function(v){const y=v.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(y)>=0?y:Pe.UNKNOWN}(g.status);a(new St(p,g.message))}else a(new St(Pe.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new St(Pe.UNAVAILABLE,"Connection failed."));break;default:tn()}}finally{pt(Wo,`RPC '${e}' ${r} completed.`)}});const c=JSON.stringify(s);pt(Wo,`RPC '${e}' ${r} sending request:`,s),l.send(t,"POST",c,n,15)})}Wo(e,t,n){const s=M5(),r=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Hse(),a=Wse(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,t,n),l.encodeInitMessageHeaders=!0;const u=r.join("");pt(Wo,`Creating RPC '${e}' stream ${s}: ${u}`,l);const d=o.createWebChannel(u,l);let h=!1,g=!1;const p=new SEe({Fo:v=>{g?pt(Wo,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(h||(pt(Wo,`Opening RPC '${e}' stream ${s} transport.`),d.open(),h=!0),pt(Wo,`RPC '${e}' stream ${s} sending:`,v),d.send(v))},Mo:()=>d.close()}),_=(v,y,w)=>{v.listen(y,x=>{try{w(x)}catch(k){setTimeout(()=>{throw k},0)}})};return _(d,lC.EventType.OPEN,()=>{g||(pt(Wo,`RPC '${e}' stream ${s} transport opened.`),p.Qo())}),_(d,lC.EventType.CLOSE,()=>{g||(g=!0,pt(Wo,`RPC '${e}' stream ${s} transport closed`),p.Uo())}),_(d,lC.EventType.ERROR,v=>{g||(g=!0,xb(Wo,`RPC '${e}' stream ${s} transport errored:`,v),p.Uo(new St(Pe.UNAVAILABLE,"The operation could not be completed")))}),_(d,lC.EventType.MESSAGE,v=>{var y;if(!g){const w=v.data[0];Ei(!!w);const x=w,k=(x==null?void 0:x.error)||((y=x[0])===null||y===void 0?void 0:y.error);if(k){pt(Wo,`RPC '${e}' stream ${s} received error:`,k);const T=k.status;let R=function(A){const B=hr[A];if(B!==void 0)return wre(B)}(T),L=k.message;R===void 0&&(R=Pe.INTERNAL,L="Unknown error status: "+T+" with message "+k.message),g=!0,p.Uo(new St(R,L)),d.close()}else pt(Wo,`RPC '${e}' stream ${s} received:`,w),p.Ko(w)}}),_(a,Vse.STAT_EVENT,v=>{v.stat===C5.PROXY?pt(Wo,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===C5.NOPROXY&&pt(Wo,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{p.$o()},0),p}}function MM(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(i){return new Lxe(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mre{constructor(e,t,n=1e3,s=1.5,r=6e4){this.Ti=e,this.timerId=t,this.Go=n,this.zo=s,this.jo=r,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-n);s>0&&pt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uG="PersistentStream";class Ore{constructor(e,t,n,s,r,o,a,l){this.Ti=e,this.n_=n,this.r_=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Mre(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Pe.RESOURCE_EXHAUSTED?(df(t.toString()),df("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.i_===t&&this.V_(n,s)},n=>{e(()=>{const s=new St(Pe.UNKNOWN,"Fetching auth token failed: "+n.message);return this.m_(s)})})}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{n(()=>this.listener.xo())}),this.stream.No(()=>{n(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{n(()=>this.m_(s))}),this.stream.onMessage(s=>{n(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return pt(uG,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(pt(uG,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xEe extends Ore{constructor(e,t,n,s,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,o),this.serializer=r}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=Nxe(this.serializer,e),n=function(r){if(!("targetChange"in r))return mn.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?mn.min():o.readTime?bd(o.readTime):mn.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=A5(this.serializer),t.addTarget=function(r,o){let a;const l=o.target;if(a=T5(l)?{documents:Pxe(r,l)}:{query:Mxe(r,l).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=kre(r,o.resumeToken);const c=D5(r,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(mn.min())>0){a.readTime=aI(r,o.snapshotVersion.toTimestamp());const c=D5(r,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const n=Fxe(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=A5(this.serializer),t.removeTarget=e,this.I_(t)}}class EEe extends Ore{constructor(e,t,n,s,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,o),this.serializer=r}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Ei(!!e.streamToken),this.lastStreamToken=e.streamToken,Ei(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ei(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=Axe(e.writeResults,e.commitTime),n=bd(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=A5(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>Rxe(this.serializer,n))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TEe{}class LEe extends TEe{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new St(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.So(e,N5(t,n),s,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new St(Pe.UNKNOWN,r.toString())})}Co(e,t,n,s,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,N5(t,n),s,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new St(Pe.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class IEe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(df(t),this.N_=!1):pt("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="RemoteStore";class DEe{constructor(e,t,n,s,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=r,this.z_.To(o=>{n.enqueueAndForget(async()=>{_1(this)&&(pt(W0,"Restarting streams for network reachability change."),await async function(l){const c=wn(l);c.W_.add(4),await _2(c),c.j_.set("Unknown"),c.W_.delete(4),await GR(c)}(this))})}),this.j_=new IEe(n,s)}}async function GR(i){if(_1(i))for(const e of i.G_)await e(!0)}async function _2(i){for(const e of i.G_)await e(!1)}function Fre(i,e){const t=wn(i);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),YV(t)?GV(t):Ey(t).c_()&&KV(t,e))}function qV(i,e){const t=wn(i),n=Ey(t);t.K_.delete(e),n.c_()&&Bre(t,e),t.K_.size===0&&(n.c_()?n.P_():_1(t)&&t.j_.set("Unknown"))}function KV(i,e){if(i.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(mn.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ey(i).y_(e)}function Bre(i,e){i.H_.Ne(e),Ey(i).w_(e)}function GV(i){i.H_=new kxe({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>i.K_.get(e)||null,it:()=>i.datastore.serializer.databaseId}),Ey(i).start(),i.j_.B_()}function YV(i){return _1(i)&&!Ey(i).u_()&&i.K_.size>0}function _1(i){return wn(i).W_.size===0}function Vre(i){i.H_=void 0}async function NEe(i){i.j_.set("Online")}async function REe(i){i.K_.forEach((e,t)=>{KV(i,e)})}async function AEe(i,e){Vre(i),YV(i)?(i.j_.q_(e),GV(i)):i.j_.set("Unknown")}async function PEe(i,e,t){if(i.j_.set("Online"),e instanceof Sre&&e.state===2&&e.cause)try{await async function(s,r){const o=r.cause;for(const a of r.targetIds)s.K_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.K_.delete(a),s.H_.removeTarget(a))}(i,e)}catch(n){pt(W0,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await cI(i,n)}else if(e instanceof WT?i.H_.We(e):e instanceof Cre?i.H_.Ze(e):i.H_.je(e),!t.isEqual(mn.min()))try{const n=await Pre(i.localStore);t.compareTo(n)>=0&&await function(r,o){const a=r.H_.ot(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=r.K_.get(c);u&&r.K_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=r.K_.get(l);if(!u)return;r.K_.set(l,u.withResumeToken(xo.EMPTY_BYTE_STRING,u.snapshotVersion)),Bre(r,l);const d=new Fg(u.target,l,c,u.sequenceNumber);KV(r,d)}),r.remoteSyncer.applyRemoteEvent(a)}(i,t)}catch(n){pt(W0,"Failed to raise snapshot:",n),await cI(i,n)}}async function cI(i,e,t){if(!ky(e))throw e;i.W_.add(1),await _2(i),i.j_.set("Offline"),t||(t=()=>Pre(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{pt(W0,"Retrying IndexedDB access"),await t(),i.W_.delete(1),await GR(i)})}function Wre(i,e){return e().catch(t=>cI(i,t,e))}async function YR(i){const e=wn(i),t=gm(e);let n=e.U_.length>0?e.U_[e.U_.length-1].batchId:RV;for(;MEe(e);)try{const s=await pEe(e.localStore,n);if(s===null){e.U_.length===0&&t.P_();break}n=s.batchId,OEe(e,s)}catch(s){await cI(e,s)}Hre(e)&&Ure(e)}function MEe(i){return _1(i)&&i.U_.length<10}function OEe(i,e){i.U_.push(e);const t=gm(i);t.c_()&&t.S_&&t.b_(e.mutations)}function Hre(i){return _1(i)&&!gm(i).u_()&&i.U_.length>0}function Ure(i){gm(i).start()}async function FEe(i){gm(i).C_()}async function BEe(i){const e=gm(i);for(const t of i.U_)e.b_(t.mutations)}async function VEe(i,e,t){const n=i.U_.shift(),s=VV.from(n,e,t);await Wre(i,()=>i.remoteSyncer.applySuccessfulWrite(s)),await YR(i)}async function WEe(i,e){e&&gm(i).S_&&await async function(n,s){if(function(o){return Cxe(o)&&o!==Pe.ABORTED}(s.code)){const r=n.U_.shift();gm(n).h_(),await Wre(n,()=>n.remoteSyncer.rejectFailedWrite(r.batchId,s)),await YR(n)}}(i,e),Hre(i)&&Ure(i)}async function dG(i,e){const t=wn(i);t.asyncQueue.verifyOperationInProgress(),pt(W0,"RemoteStore received new credentials");const n=_1(t);t.W_.add(3),await _2(t),n&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await GR(t)}async function HEe(i,e){const t=wn(i);e?(t.W_.delete(2),await GR(t)):e||(t.W_.add(2),await _2(t),t.j_.set("Unknown"))}function Ey(i){return i.J_||(i.J_=function(t,n,s){const r=wn(t);return r.M_(),new xEe(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(i.datastore,i.asyncQueue,{xo:NEe.bind(null,i),No:REe.bind(null,i),Lo:AEe.bind(null,i),p_:PEe.bind(null,i)}),i.G_.push(async e=>{e?(i.J_.h_(),YV(i)?GV(i):i.j_.set("Unknown")):(await i.J_.stop(),Vre(i))})),i.J_}function gm(i){return i.Y_||(i.Y_=function(t,n,s){const r=wn(t);return r.M_(),new EEe(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(i.datastore,i.asyncQueue,{xo:()=>Promise.resolve(),No:FEe.bind(null,i),Lo:WEe.bind(null,i),D_:BEe.bind(null,i),v_:VEe.bind(null,i)}),i.G_.push(async e=>{e?(i.Y_.h_(),await YR(i)):(await i.Y_.stop(),i.U_.length>0&&(pt(W0,`Stopping write stream with ${i.U_.length} pending writes`),i.U_=[]))})),i.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e,t,n,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=r,this.deferred=new u0,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,r){const o=Date.now()+n,a=new QV(e,t,o,s,r);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new St(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function XV(i,e){if(df("AsyncQueue",`${e}: ${i}`),ky(i))return new St(Pe.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{static emptySet(e){return new Ov(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||zt.comparator(t.key,n.key):(t,n)=>zt.comparator(t.key,n.key),this.keyedMap=cC(),this.sortedSet=new xs(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ov)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=n.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Ov;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hG{constructor(){this.Z_=new xs(zt.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?e.type!==0&&n.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&n.type!==1?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.Z_=this.Z_.remove(t):e.type===1&&n.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):tn():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,n)=>{e.push(n)}),e}}class Db{constructor(e,t,n,s,r,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,s,r){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Db(e,t,Ov.emptySet(t),o,n,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&UR(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UEe{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class zEe{constructor(){this.queries=fG(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,n){const s=wn(t),r=s.queries;s.queries=fG(),r.forEach((o,a)=>{for(const l of a.ta)l.onError(n)})})(this,new St(Pe.ABORTED,"Firestore shutting down"))}}function fG(){return new m1(i=>lre(i),UR)}async function jEe(i,e){const t=wn(i);let n=3;const s=e.query;let r=t.queries.get(s);r?!r.na()&&e.ra()&&(n=2):(r=new UEe,n=e.ra()?0:1);try{switch(n){case 0:r.ea=await t.onListen(s,!0);break;case 1:r.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const a=XV(o,`Initialization of query '${W_(e.query)}' failed`);return void e.onError(a)}t.queries.set(s,r),r.ta.push(e),e.sa(t.onlineState),r.ea&&e.oa(r.ea)&&ZV(t)}async function $Ee(i,e){const t=wn(i),n=e.query;let s=3;const r=t.queries.get(n);if(r){const o=r.ta.indexOf(e);o>=0&&(r.ta.splice(o,1),r.ta.length===0?s=e.ra()?0:1:!r.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function qEe(i,e){const t=wn(i);let n=!1;for(const s of e){const r=s.query,o=t.queries.get(r);if(o){for(const a of o.ta)a.oa(s)&&(n=!0);o.ea=s}}n&&ZV(t)}function KEe(i,e,t){const n=wn(i),s=n.queries.get(e);if(s)for(const r of s.ta)r.onError(t);n.queries.delete(e)}function ZV(i){i.ia.forEach(e=>{e.next()})}var O5,gG;(gG=O5||(O5={}))._a="default",gG.Cache="cache";class GEe{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Db(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const n=t!=="Offline";return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Db.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==O5.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zre{constructor(e){this.key=e}}class jre{constructor(e){this.key=e}}class YEe{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=qn(),this.mutatedKeys=qn(),this.ya=cre(e),this.wa=new Ov(this.ya)}get Sa(){return this.fa}ba(e,t){const n=t?t.Da:new hG,s=t?t.wa:this.wa;let r=t?t.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,d)=>{const h=s.get(u),g=zR(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),_=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let v=!1;h&&g?h.data.isEqual(g.data)?p!==_&&(n.track({type:3,doc:g}),v=!0):this.va(h,g)||(n.track({type:2,doc:g}),v=!0,(l&&this.ya(g,l)>0||c&&this.ya(g,c)<0)&&(a=!0)):!h&&g?(n.track({type:0,doc:g}),v=!0):h&&!g&&(n.track({type:1,doc:h}),v=!0,(l||c)&&(a=!0)),v&&(g?(o=o.add(g),r=_?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),n.track({type:1,doc:u})}return{wa:o,Da:n,ls:a,mutatedKeys:r}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const r=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((u,d)=>function(g,p){const _=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tn()}};return _(g)-_(p)}(u.type,d.type)||this.ya(u.doc,d.doc)),this.Ca(n),s=s!=null&&s;const a=t&&!s?this.Fa():[],l=this.pa.size===0&&this.current&&!s?1:0,c=l!==this.ga;return this.ga=l,o.length!==0||c?{snapshot:new Db(this.query,e.wa,r,o,e.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new hG,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=qn(),this.wa.forEach(n=>{this.xa(n.key)&&(this.pa=this.pa.add(n.key))});const t=[];return e.forEach(n=>{this.pa.has(n)||t.push(new jre(n))}),this.pa.forEach(n=>{e.has(n)||t.push(new zre(n))}),t}Oa(e){this.fa=e.gs,this.pa=qn();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Db.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const JV="SyncEngine";class QEe{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class XEe{constructor(e){this.key=e,this.Ba=!1}}class ZEe{constructor(e,t,n,s,r,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new m1(a=>lre(a),UR),this.qa=new Map,this.Qa=new Set,this.$a=new xs(zt.comparator),this.Ua=new Map,this.Ka=new UV,this.Wa={},this.Ga=new Map,this.za=Ib.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function JEe(i,e,t=!0){const n=Qre(i);let s;const r=n.ka.get(e);return r?(n.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.Na()):s=await $re(n,e,t,!0),s}async function eTe(i,e){const t=Qre(i);await $re(t,e,!0,!1)}async function $re(i,e,t,n){const s=await _Ee(i.localStore,_d(e)),r=s.targetId,o=i.sharedClientState.addLocalQueryTarget(r,t);let a;return n&&(a=await tTe(i,e,r,o==="current",s.resumeToken)),i.isPrimaryClient&&t&&Fre(i.remoteStore,s),a}async function tTe(i,e,t,n,s){i.Ha=(d,h,g)=>async function(_,v,y,w){let x=v.view.ba(y);x.ls&&(x=await oG(_.localStore,v.query,!1).then(({documents:L})=>v.view.ba(L,x)));const k=w&&w.targetChanges.get(v.targetId),T=w&&w.targetMismatches.get(v.targetId)!=null,R=v.view.applyChanges(x,_.isPrimaryClient,k,T);return pG(_,v.targetId,R.Ma),R.snapshot}(i,d,h,g);const r=await oG(i.localStore,e,!0),o=new YEe(e,r.gs),a=o.ba(r.documents),l=p2.createSynthesizedTargetChangeForCurrentChange(t,n&&i.onlineState!=="Offline",s),c=o.applyChanges(a,i.isPrimaryClient,l);pG(i,t,c.Ma);const u=new QEe(e,t,o);return i.ka.set(e,u),i.qa.has(t)?i.qa.get(t).push(e):i.qa.set(t,[e]),c.snapshot}async function nTe(i,e,t){const n=wn(i),s=n.ka.get(e),r=n.qa.get(s.targetId);if(r.length>1)return n.qa.set(s.targetId,r.filter(o=>!UR(o,e))),void n.ka.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await P5(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),t&&qV(n.remoteStore,s.targetId),F5(n,s.targetId)}).catch(Sy)):(F5(n,s.targetId),await P5(n.localStore,s.targetId,!0))}async function iTe(i,e){const t=wn(i),n=t.ka.get(e),s=t.qa.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),qV(t.remoteStore,n.targetId))}async function sTe(i,e,t){const n=dTe(i);try{const s=await function(o,a){const l=wn(o),c=ya.now(),u=a.reduce((g,p)=>g.add(p.key),qn());let d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let p=hf(),_=qn();return l.ds.getEntries(g,u).next(v=>{p=v,p.forEach((y,w)=>{w.isValidDocument()||(_=_.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,p)).next(v=>{d=v;const y=[];for(const w of a){const x=_xe(w,d.get(w.key).overlayedDocument);x!=null&&y.push(new p1(w.key,x,ere(x.value.mapValue),vd.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,y,a)}).next(v=>{h=v;const y=v.applyToLocalDocumentSet(d,_);return l.documentOverlayCache.saveOverlays(g,v.batchId,y)})}).then(()=>({batchId:h.batchId,changes:dre(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Wa[o.currentUser.toKey()];c||(c=new xs(An)),c=c.insert(a,l),o.Wa[o.currentUser.toKey()]=c}(n,s.batchId,t),await v2(n,s.changes),await YR(n.remoteStore)}catch(s){const r=XV(s,"Failed to persist write");t.reject(r)}}async function qre(i,e){const t=wn(i);try{const n=await gEe(t.localStore,e);e.targetChanges.forEach((s,r)=>{const o=t.Ua.get(r);o&&(Ei(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ba=!0:s.modifiedDocuments.size>0?Ei(o.Ba):s.removedDocuments.size>0&&(Ei(o.Ba),o.Ba=!1))}),await v2(t,n,e)}catch(n){await Sy(n)}}function mG(i,e,t){const n=wn(i);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.ka.forEach((r,o)=>{const a=o.view.sa(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=wn(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const h of d.ta)h.sa(a)&&(c=!0)}),c&&ZV(l)}(n.eventManager,e),s.length&&n.La.p_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function rTe(i,e,t){const n=wn(i);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Ua.get(e),r=s&&s.key;if(r){let o=new xs(zt.comparator);o=o.insert(r,Ko.newNoDocument(r,mn.min()));const a=qn().add(r),l=new qR(mn.min(),new Map,new xs(An),o,a);await qre(n,l),n.$a=n.$a.remove(r),n.Ua.delete(e),eW(n)}else await P5(n.localStore,e,!1).then(()=>F5(n,e,t)).catch(Sy)}async function oTe(i,e){const t=wn(i),n=e.batch.batchId;try{const s=await fEe(t.localStore,e);Gre(t,n,null),Kre(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await v2(t,s)}catch(s){await Sy(s)}}async function aTe(i,e,t){const n=wn(i);try{const s=await function(o,a){const l=wn(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Ei(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(n.localStore,e);Gre(n,e,t),Kre(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await v2(n,s)}catch(s){await Sy(s)}}function Kre(i,e){(i.Ga.get(e)||[]).forEach(t=>{t.resolve()}),i.Ga.delete(e)}function Gre(i,e,t){const n=wn(i);let s=n.Wa[n.currentUser.toKey()];if(s){const r=s.get(e);r&&(t?r.reject(t):r.resolve(),s=s.remove(e)),n.Wa[n.currentUser.toKey()]=s}}function F5(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const n of i.qa.get(e))i.ka.delete(n),t&&i.La.Ja(n,t);i.qa.delete(e),i.isPrimaryClient&&i.Ka.br(e).forEach(n=>{i.Ka.containsKey(n)||Yre(i,n)})}function Yre(i,e){i.Qa.delete(e.path.canonicalString());const t=i.$a.get(e);t!==null&&(qV(i.remoteStore,t),i.$a=i.$a.remove(e),i.Ua.delete(t),eW(i))}function pG(i,e,t){for(const n of t)n instanceof zre?(i.Ka.addReference(n.key,e),lTe(i,n)):n instanceof jre?(pt(JV,"Document no longer in limbo: "+n.key),i.Ka.removeReference(n.key,e),i.Ka.containsKey(n.key)||Yre(i,n.key)):tn()}function lTe(i,e){const t=e.key,n=t.path.canonicalString();i.$a.get(t)||i.Qa.has(n)||(pt(JV,"New document in limbo: "+t),i.Qa.add(n),eW(i))}function eW(i){for(;i.Qa.size>0&&i.$a.size<i.maxConcurrentLimboResolutions;){const e=i.Qa.values().next().value;i.Qa.delete(e);const t=new zt(os.fromString(e)),n=i.za.next();i.Ua.set(n,new XEe(t)),i.$a=i.$a.insert(t,n),Fre(i.remoteStore,new Fg(_d(FV(t.path)),n,"TargetPurposeLimboResolution",VR.ae))}}async function v2(i,e,t){const n=wn(i),s=[],r=[],o=[];n.ka.isEmpty()||(n.ka.forEach((a,l)=>{o.push(n.Ha(l,e,t).then(c=>{var u;if((c||t)&&n.isPrimaryClient){const d=c?!c.fromCache:(u=t==null?void 0:t.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;n.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=jV.Yi(l.targetId,c);r.push(d)}}))}),await Promise.all(o),n.La.p_(s),await async function(l,c){const u=wn(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Ae.forEach(c,h=>Ae.forEach(h.Hi,g=>u.persistence.referenceDelegate.addReference(d,h.targetId,g)).next(()=>Ae.forEach(h.Ji,g=>u.persistence.referenceDelegate.removeReference(d,h.targetId,g)))))}catch(d){if(!ky(d))throw d;pt($V,"Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const g=u.Ts.get(h),p=g.snapshotVersion,_=g.withLastLimboFreeSnapshotVersion(p);u.Ts=u.Ts.insert(h,_)}}}(n.localStore,r))}async function cTe(i,e){const t=wn(i);if(!t.currentUser.isEqual(e)){pt(JV,"User change. New user:",e.toKey());const n=await Are(t.localStore,e);t.currentUser=e,function(r,o){r.Ga.forEach(a=>{a.forEach(l=>{l.reject(new St(Pe.CANCELLED,o))})}),r.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await v2(t,n.Rs)}}function uTe(i,e){const t=wn(i),n=t.Ua.get(e);if(n&&n.Ba)return qn().add(n.key);{let s=qn();const r=t.qa.get(e);if(!r)return s;for(const o of r){const a=t.ka.get(o);s=s.unionWith(a.view.Sa)}return s}}function Qre(i){const e=wn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=qre.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uTe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rTe.bind(null,e),e.La.p_=qEe.bind(null,e.eventManager),e.La.Ja=KEe.bind(null,e.eventManager),e}function dTe(i){const e=wn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oTe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aTe.bind(null,e),e}class uI{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=KR(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return hEe(this.persistence,new cEe,e.initialUser,this.serializer)}Xa(e){return new Rre(zV.ri,this.serializer)}Za(e){return new bEe}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uI.provider={build:()=>new uI};class hTe extends uI{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Ei(this.persistence.referenceDelegate instanceof lI);const n=this.persistence.referenceDelegate.garbageCollector;return new Gxe(n,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Ua.withCacheSize(this.cacheSizeBytes):Ua.DEFAULT;return new Rre(n=>lI.ri(n,t),this.serializer)}}class B5{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>mG(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=cTe.bind(null,this.syncEngine),await HEe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zEe}()}createDatastore(e){const t=KR(e.databaseInfo.databaseId),n=function(r){return new kEe(r)}(e.databaseInfo);return function(r,o,a,l){return new LEe(r,o,a,l)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,s,r,o,a){return new DEe(n,s,r,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>mG(this.syncEngine,t,0),function(){return cG.D()?new cG:new yEe}())}createSyncEngine(e,t){return function(s,r,o,a,l,c,u){const d=new ZEe(s,r,o,a,l,c);return u&&(d.ja=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const r=wn(s);pt(W0,"RemoteStore shutting down."),r.W_.add(5),await _2(r),r.z_.shutdown(),r.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}B5.provider={build:()=>new B5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fTe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):df("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="FirestoreClient";class gTe{constructor(e,t,n,s,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=jo.UNAUTHENTICATED,this.clientId=jse.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(n,async o=>{pt(mm,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(pt(mm,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new u0;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=XV(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function OM(i,e){i.asyncQueue.verifyOperationInProgress(),pt(mm,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let n=t.initialUser;i.setCredentialChangeListener(async s=>{n.isEqual(s)||(await Are(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function _G(i,e){i.asyncQueue.verifyOperationInProgress();const t=await mTe(i);pt(mm,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(n=>dG(e.remoteStore,n)),i.setAppCheckTokenChangeListener((n,s)=>dG(e.remoteStore,s)),i._onlineComponents=e}async function mTe(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){pt(mm,"Using user provided OfflineComponentProvider");try{await OM(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===Pe.FAILED_PRECONDITION||s.code===Pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;xb("Error using user provided cache. Falling back to memory cache: "+t),await OM(i,new uI)}}else pt(mm,"Using default OfflineComponentProvider"),await OM(i,new hTe(void 0));return i._offlineComponents}async function Xre(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(pt(mm,"Using user provided OnlineComponentProvider"),await _G(i,i._uninitializedComponentsProvider._online)):(pt(mm,"Using default OnlineComponentProvider"),await _G(i,new B5))),i._onlineComponents}function pTe(i){return Xre(i).then(e=>e.syncEngine)}async function vG(i){const e=await Xre(i),t=e.eventManager;return t.onListen=JEe.bind(null,e.syncEngine),t.onUnlisten=nTe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=eTe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=iTe.bind(null,e.syncEngine),t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zre(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bG=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jre(i,e,t){if(!t)throw new St(Pe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function _Te(i,e,t,n){if(e===!0&&n===!0)throw new St(Pe.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function yG(i){if(!zt.isDocumentKey(i))throw new St(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function wG(i){if(zt.isDocumentKey(i))throw new St(Pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function QR(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":tn()}function d0(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new St(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=QR(i);throw new St(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eoe="firestore.googleapis.com",CG=!0;class SG{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new St(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eoe,this.ssl=CG}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:CG;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Nre;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qxe)throw new St(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_Te("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zre((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new St(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new St(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new St(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class XR{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SG({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new St(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new St(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SG(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new S2e;switch(n.type){case"firstParty":return new T2e(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new St(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=bG.get(t);n&&(pt("ComponentProvider","Removing Datastore"),bG.delete(t),n.terminate())}(this),Promise.resolve()}}function vTe(i,e,t,n={}){var s;const r=(i=d0(i,XR))._getSettings(),o=Object.assign(Object.assign({},r),{emulatorOptions:i._getEmulatorOptions()}),a=`${e}:${t}`;r.host!==eoe&&r.host!==a&&xb("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},r),{host:a,ssl:!1,emulatorOptions:n});if(!cm(l,o)&&(i._setSettings(l),n.mockUserToken)){let c,u;if(typeof n.mockUserToken=="string")c=n.mockUserToken,u=jo.MOCK_USER;else{c=dye(n.mockUserToken,(s=i._app)===null||s===void 0?void 0:s.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new St(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new jo(d)}i._authCredentials=new k2e(new Use(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new v1(this.firestore,e,this._query)}}class Ja{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ja(this.firestore,e,this._key)}}class Xg extends v1{constructor(e,t,n){super(e,t,FV(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ja(this.firestore,null,new zt(e))}withConverter(e){return new Xg(this.firestore,e,this._path)}}function V5(i,e,...t){if(i=Rr(i),Jre("collection","path",e),i instanceof XR){const n=os.fromString(e,...t);return wG(n),new Xg(i,null,n)}{if(!(i instanceof Ja||i instanceof Xg))throw new St(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(os.fromString(e,...t));return wG(n),new Xg(i.firestore,null,n)}}function dI(i,e,...t){if(i=Rr(i),arguments.length===1&&(e=jse.newId()),Jre("doc","path",e),i instanceof XR){const n=os.fromString(e,...t);return yG(n),new Ja(i,null,new zt(n))}{if(!(i instanceof Ja||i instanceof Xg))throw new St(Pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(os.fromString(e,...t));return yG(n),new Ja(i.firestore,i instanceof Xg?i.converter:null,new zt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kG="AsyncQueue";class xG{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Mre(this,"async_queue_retry"),this.Su=()=>{const n=MM();n&&pt(kG,"Visibility state changed to "+n.visibilityState),this.a_.t_()},this.bu=e;const t=MM();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=MM();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new u0;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!ky(e))throw e;pt(kG,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(n=>{this.gu=n,this.pu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(n);throw df("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.pu=!1,n))));return this.bu=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=QV.createAndSchedule(this,e,t,n,r=>this.Fu(r));return this.fu.push(s),s}Du(){this.gu&&tn()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function EG(i){return function(t,n){if(typeof t!="object"||t===null)return!1;const s=t;for(const r of n)if(r in s&&typeof s[r]=="function")return!0;return!1}(i,["next","error","complete"])}class QS extends XR{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new xG,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xG(e),this._firestoreClient=void 0,await e}}}function bTe(i,e){const t=typeof i=="object"?i:mV(),n=typeof i=="string"?i:nI,s=f1(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const r=cye("firestore");r&&vTe(s,...r)}return s}function toe(i){if(i._terminated)throw new St(Pe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||yTe(i),i._firestoreClient}function yTe(i){var e,t,n;const s=i._freezeSettings(),r=function(a,l,c,u){return new U2e(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,Zre(u.experimentalLongPollingOptions),u.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,s);i._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(i._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),i._firestoreClient=new gTe(i._authCredentials,i._appCheckCredentials,i._queue,r,i._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nb(xo.fromBase64String(e))}catch(t){throw new St(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Nb(xo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new St(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yo(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class noe{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new St(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new St(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return An(this._lat,e._lat)||An(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let r=0;r<n.length;++r)if(n[r]!==s[r])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wTe=/^__.*__$/;class CTe{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new p1(e,this.data,this.fieldMask,t,this.fieldTransforms):new m2(e,this.data,t,this.fieldTransforms)}}function ioe(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tn()}}class sW{constructor(e,t,n,s,r,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,r===void 0&&this.Bu(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new sW(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:n,Qu:!1});return s.$u(e),s}Uu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:n,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return hI(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(ioe(this.Lu)&&wTe.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class STe{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||KR(e)}ju(e,t,n,s=!1){return new sW({Lu:e,methodName:t,zu:n,path:yo.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rW(i){const e=i._freezeSettings(),t=KR(i._databaseId);return new STe(i._databaseId,!!e.ignoreUndefinedProperties,t)}function soe(i,e,t,n,s,r={}){const o=i.ju(r.merge||r.mergeFields?2:0,e,t,s);aoe("Data must be an object, but it was:",o,n);const a=roe(n,o);let l,c;if(r.merge)l=new nu(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const u=[];for(const d of r.mergeFields){const h=xTe(e,d,t);if(!o.contains(h))throw new St(Pe.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);TTe(u,h)||u.push(h)}l=new nu(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new CTe(new rc(a),l,c)}function kTe(i,e,t,n=!1){return oW(t,i.ju(n?4:3,e))}function oW(i,e){if(ooe(i=Rr(i)))return aoe("Unsupported field value:",e,i),roe(i,e);if(i instanceof noe)return function(n,s){if(!ioe(s.Lu))throw s.Wu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(n,s){const r=[];let o=0;for(const a of n){let l=oW(a,s.Ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}}(i,e)}return function(n,s){if((n=Rr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return dxe(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=ya.fromDate(n);return{timestampValue:aI(s.serializer,r)}}if(n instanceof ya){const r=new ya(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:aI(s.serializer,r)}}if(n instanceof nW)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Nb)return{bytesValue:kre(s.serializer,n._byteString)};if(n instanceof Ja){const r=s.databaseId,o=n.firestore._databaseId;if(!o.isEqual(r))throw s.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:HV(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof iW)return function(o,a){return{mapValue:{fields:{[Zse]:{stringValue:Jse},[iI]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Wu("VectorValues must only contain numeric values.");return BV(a.serializer,c)})}}}}}}(n,s);throw s.Wu(`Unsupported field value: ${QR(n)}`)}(i,e)}function roe(i,e){const t={};return qse(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):g1(i,(n,s)=>{const r=oW(s,e.qu(n));r!=null&&(t[n]=r)}),{mapValue:{fields:t}}}function ooe(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ya||i instanceof nW||i instanceof Nb||i instanceof Ja||i instanceof noe||i instanceof iW)}function aoe(i,e,t){if(!ooe(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const n=QR(t);throw n==="an object"?e.Wu(i+" a custom object"):e.Wu(i+" "+n)}}function xTe(i,e,t){if((e=Rr(e))instanceof tW)return e._internalPath;if(typeof e=="string")return loe(i,e);throw hI("Field path arguments must be of type string or ",i,!1,void 0,t)}const ETe=new RegExp("[~\\*/\\[\\]]");function loe(i,e,t){if(e.search(ETe)>=0)throw hI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new tW(...e.split("."))._internalPath}catch{throw hI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function hI(i,e,t,n,s){const r=n&&!n.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${n}`),o&&(l+=` in document ${s}`),l+=")"),new St(Pe.INVALID_ARGUMENT,a+i+l)}function TTe(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class coe{constructor(e,t,n,s,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Ja(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LTe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(aW("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class LTe extends coe{data(){return super.data()}}function aW(i,e){return typeof e=="string"?loe(i,e):e instanceof tW?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ITe(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new St(Pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lW{}class uoe extends lW{}function DTe(i,e,...t){let n=[];e instanceof lW&&n.push(e),n=n.concat(t),function(r){const o=r.filter(l=>l instanceof uW).length,a=r.filter(l=>l instanceof cW).length;if(o>1||o>0&&a>0)throw new St(Pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)i=s._apply(i);return i}class cW extends uoe{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new cW(e,t,n)}_apply(e){const t=this._parse(e);return doe(e._query,t),new v1(e.firestore,e.converter,L5(e._query,t))}_parse(e){const t=rW(e.firestore);return function(r,o,a,l,c,u,d){let h;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new St(Pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){LG(d,u);const p=[];for(const _ of d)p.push(TG(l,r,_));h={arrayValue:{values:p}}}else h=TG(l,r,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||LG(d,u),h=kTe(a,o,d,u==="in"||u==="not-in");return mr.create(c,u,h)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class uW extends lW{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new uW(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:du.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,r){let o=s;const a=r.getFlattenedFilters();for(const l of a)doe(o,l),o=L5(o,l)}(e._query,t),new v1(e.firestore,e.converter,L5(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dW extends uoe{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new dW(e,t)}_apply(e){const t=function(s,r,o){if(s.startAt!==null)throw new St(Pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new St(Pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new KS(r,o)}(e._query,this._field,this._direction);return new v1(e.firestore,e.converter,function(s,r){const o=s.explicitOrderBy.concat([r]);return new xy(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function NTe(i,e="asc"){const t=e,n=aW("orderBy",i);return dW._create(n,t)}function TG(i,e,t){if(typeof(t=Rr(t))=="string"){if(t==="")throw new St(Pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!are(e)&&t.indexOf("/")!==-1)throw new St(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(os.fromString(t));if(!zt.isDocumentKey(n))throw new St(Pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return HK(i,new zt(n))}if(t instanceof Ja)return HK(i,t._key);throw new St(Pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${QR(t)}.`)}function LG(i,e){if(!Array.isArray(i)||i.length===0)throw new St(Pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function doe(i,e){const t=function(s,r){for(const o of s)for(const a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(i.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new St(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new St(Pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class RTe{convertValue(e,t="none"){switch(fm(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ks(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw tn()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return g1(e,(s,r)=>{n[s]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,s;const r=(s=(n=(t=e.fields)===null||t===void 0?void 0:t[iI].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(o=>Ks(o.doubleValue));return new iW(r)}convertGeoPoint(e){return new nW(Ks(e.latitude),Ks(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=HR(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(jS(e));default:return null}}convertTimestamp(e){const t=dm(e);return new ya(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=os.fromString(e);Ei(Dre(n));const s=new $S(n.get(1),n.get(3)),r=new zt(n.popFirst(5));return s.isEqual(t)||df(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hoe(i,e,t){let n;return n=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class foe extends coe{constructor(e,t,n,s,r,o){super(e,t,n,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new HT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(aW("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class HT extends foe{data(e={}){return super.data(e)}}class ATe{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new dC(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new HT(this._firestore,this._userDataWriter,n.key,n,new dC(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new St(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new HT(s._firestore,s._userDataWriter,a.doc.key,a.doc,new dC(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const l=new HT(s._firestore,s._userDataWriter,a.doc.key,a.doc,new dC(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:PTe(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function PTe(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tn()}}class goe extends RTe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nb(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ja(this.firestore,null,t)}}function IG(i,e,t){i=d0(i,Ja);const n=d0(i.firestore,QS),s=hoe(i.converter,e,t);return moe(n,[soe(rW(n),"setDoc",i._key,s,i.converter!==null,t).toMutation(i._key,vd.none())])}function MTe(i,e){const t=d0(i.firestore,QS),n=dI(i),s=hoe(i.converter,e);return moe(t,[soe(rW(i.firestore),"addDoc",n._key,s,i.converter!==null,{}).toMutation(n._key,vd.exists(!1))]).then(()=>n)}function W5(i,...e){var t,n,s;i=Rr(i);let r={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||EG(e[o])||(r=e[o],o++);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(EG(e[o])){const d=e[o];e[o]=(t=d.next)===null||t===void 0?void 0:t.bind(d),e[o+1]=(n=d.error)===null||n===void 0?void 0:n.bind(d),e[o+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let l,c,u;if(i instanceof Ja)c=d0(i.firestore,QS),u=FV(i._key.path),l={next:d=>{e[o]&&e[o](OTe(c,i,d))},error:e[o+1],complete:e[o+2]};else{const d=d0(i,v1);c=d0(d.firestore,QS),u=d._query;const h=new goe(c);l={next:g=>{e[o]&&e[o](new ATe(c,h,d,g))},error:e[o+1],complete:e[o+2]},ITe(i._query)}return function(h,g,p,_){const v=new fTe(_),y=new GEe(g,v,p);return h.asyncQueue.enqueueAndForget(async()=>jEe(await vG(h),y)),()=>{v.su(),h.asyncQueue.enqueueAndForget(async()=>$Ee(await vG(h),y))}}(toe(c),u,a,l)}function moe(i,e){return function(n,s){const r=new u0;return n.asyncQueue.enqueueAndForget(async()=>sTe(await pTe(n),s,r)),r.promise}(toe(i),e)}function OTe(i,e,t){const n=t.docs.get(e._key),s=new goe(i);return new foe(i,s,e._key,n,new dC(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){Cy=s})(yy),xd(new uu("firestore",(n,{instanceIdentifier:s,options:r})=>{const o=n.getProvider("app").getImmediate(),a=new QS(new x2e(n.getProvider("auth-internal")),new L2e(o,n.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new St(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $S(c.options.projectId,u)}(o,s),o);return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),hc(IK,DK,e),hc(IK,DK,"esm2017")})();const FTe={apiKey:"AIzaSyDpdS8FgbNqWmTtlRLBw7onOVdK2rW7bgE",authDomain:"rtce-4df05.firebaseapp.com",projectId:"rtce-4df05",storageBucket:"rtce-4df05.firebasestorage.app",messagingSenderId:"634860330071",appId:"1:634860330071:web:fcd4187460a85517005712",measurementId:"G-2M9J12VWRM"},hW=Nie(FTe),ki=nke(hW),Fv=bTe(hW);b2e(hW);const poe=new Dh,BTe=new Nh;poe.setCustomParameters({prompt:"select_account"});zCe(ki,sse).then(()=>console.log("Auth persistence set to LOCAL")).catch(i=>console.error("Persistence error:",i));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function VTe(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):s(u.value).then(a,l)}c((n=n.apply(i,[])).next())})}function WTe(i,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,s,r,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(r=c[0]&2?s.return:c[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,c[1])).done)return r;switch(s=0,r&&(c=[c[0]&2,r.value]),c[0]){case 0:case 1:r=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,s=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){t.label=c[1];break}if(c[0]===6&&t.label<r[1]){t.label=r[1],r=c;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(c);break}r[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(i,t)}catch(u){c=[6,u],s=0}finally{n=r=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var K_=function(){return K_=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},K_.apply(this,arguments)},_oe=function(i){return{loading:i==null,value:i}},HTe=function(){return function(i,e){switch(e.type){case"error":return K_(K_({},i),{error:e.error,loading:!1,value:void 0});case"reset":return _oe(e.defaultValue);case"value":return K_(K_({},i),{error:void 0,loading:!1,value:e.value});default:return i}}},UTe=function(i){var e=i?i():void 0,t=F.useReducer(HTe(),_oe(e)),n=t[0],s=t[1],r=F.useCallback(function(){var l=i?i():void 0;s({type:"reset",defaultValue:l})},[i]),o=F.useCallback(function(l){s({type:"error",error:l})},[]),a=F.useCallback(function(l){s({type:"value",value:l})},[]);return F.useMemo(function(){return{error:n.error,loading:n.loading,reset:r,setError:o,setValue:a,value:n.value}},[n.error,n.loading,r,o,a,n.value])},ZR=function(i,e){var t=UTe(function(){return i.currentUser}),n=t.error,s=t.loading,r=t.setError,o=t.setValue,a=t.value;return F.useEffect(function(){var l=qCe(i,function(c){return VTe(void 0,void 0,void 0,function(){var u;return WTe(this,function(d){switch(d.label){case 0:return[3,4];case 1:return d.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return d.sent(),[3,4];case 3:return u=d.sent(),r(u),[3,4];case 4:return o(c),[2]}})})},r);return function(){l()}},[i]),[a,s,n]};function zTe(){const[i,e]=F.useState(!1),[t,n]=F.useState(!1),[s,r]=F.useState(!1),[o,a]=ZR(ki),l=_y();F.useEffect(()=>{const u=()=>{e(window.scrollY>5)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const c=async()=>{await ki.signOut(),l("/")};return a?null:D.jsxs("header",{className:Js("fixed top-0 left-0 right-0 z-50 transition-all duration-300",i?"bg-white/100 backdrop-blur-md shadow-sm":"bg-transparent"),children:[D.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[D.jsx("div",{className:"text-[1.8rem] font-bold text-primary",children:D.jsxs("svg",{width:"215.39307556152343",height:"50.626132567226996",viewBox:"0 0 383.8999938964844 90.23211137541728",class:"looka-1j8o68f",children:[D.jsx("defs",{id:"SvgjsDefs4865"}),D.jsx("g",{id:"SvgjsG4866",featurekey:"symbolFeature-0",transform:"matrix(0.6898787855261039,0,0,0.6898787855261039,-13.310095387583845,-2.90760899534669)",fill:`${i?"#000000":"#EFEFEF"}`,children:D.jsx("path",{xmlns:"http://www.w3.org/2000/svg",d:"M96.63 57.12q11.83 7.36 23.98 14.42c4.75 2.76 4.29 5.89-.18 8.46q-3.3 1.89-6.48 3.64-.8.44-.02.91l6.97 4.19a4.64 4.63-74.5 0 1 2.24 3.97v17.42a4.2 4.2 0 0 1-2.05 3.61q-10.37 6.18-21.01 12.58c-2.5 1.51-3.82 1.71-6.39.13q-13.16-8.08-21.94-13.31a.63.63 0 0 0-.64 0l-23.23 13.88a4.18 4.15 45 0 1-4.27-.01l-21.55-12.96a3.87 3.86 15.6 0 1-1.87-3.31q.01-11.33-.01-17.49-.02-3.31 2.55-4.76 3.07-1.73 6.62-4.05a.31.31 0 0 0-.02-.53q-6.07-3.54-8.62-5.19-1.57-1.02-1.4-3.41c.15-1.92 1.7-2.78 3.31-3.74q9.73-5.76 23.85-14.27.46-.28.16-.73c-.49-.73-1.02-1.43-1.03-2.51q-.02-17.99.01-25.14a4.73 4.72 74.6 0 1 2.28-4.03q9.96-5.99 20.84-12.4 2.97-1.75 5.04-.52 15.95 9.45 20.69 12.07 3.17 1.74 3.2 4.7.1 12.03-.04 25.02-.01.82-1.17 2.58-.31.48.18.78m-25.56-12.7q.53-2.61 2.69-3.93 5.89-3.61 17.45-11.03a.31.31 0 0 0-.01-.53L72.17 17.49a.79.79 0 0 0-.82 0L52.33 28.85a1.95 1.95 0 0 0-.94 1.67v22.29a2.23 2.22 15.7 0 0 1.07 1.9l18.03 10.84a.36.35-74.5 0 0 .54-.31l.02-20.56a1.77 1.64-42.8 0 1 .02-.26m26.42 28.32c2.06 1.44 2.23 4.4-.02 5.75Q79.09 89.54 73.35 92.96a3.74 3.72 44.9 0 1-3.83-.01Q59.11 86.71 47.76 79.7c-1.31-.81-2.87-1.56-3.41-2.97-.87-2.26.63-3.76 2.48-4.89q5.13-3.1 11.23-6.78a.16.16 0 0 0 0-.27l-6.3-3.78q-.24-.15-.48 0L27.46 75.24a.47.47 0 0 0-.01.81l43.38 26.09a1.14 1.12 44.6 0 0 1.15 0l43.89-26.22a.3.3 0 0 0 0-.52L91.29 60.62q-.17-.11-.34 0l-6.4 3.82a.18.17 44 0 0 .01.3q8.83 5.14 12.93 8m-32 11.01q0 .18.08.23 2.9 1.66 5.73 3.44.01.01.14.02.06.01.12.01t.12-.01q.13-.01.14-.02 2.83-1.78 5.73-3.44.07-.05.07-.23t-.07-.23q-2.9-1.66-5.73-3.44-.01-.01-.14-.02-.06-.01-.12-.01t-.12.01q-.13.01-.14.02-2.83 1.78-5.73 3.44-.08.05-.08.23M45.6 121.56a.35.35 0 0 0 .36 0l22.62-13.51a.35.35 0 0 0 0-.6l-19.1-11.48a.35.35 0 0 0-.36 0l-22.62 13.5a.35.35 0 0 0 0 .6zm70.54-11.46a.34.34 0 0 0 0-.58L93.65 95.99a.34.34 0 0 0-.34 0l-19.13 11.43a.34.34 0 0 0 0 .58l22.49 13.53a.34.34 0 0 0 .34 0z"})}),D.jsxs("g",{id:"SvgjsG4867",featurekey:"textGroupContainer",transform:"matrix(1,0,0,1,92,4)",fill:`${i?"#000000":"#EFEFEF"}`,children:[D.jsx("rect",{xmlns:"http://www.w3.org/2000/svg",y:"0",x:"0",height:"1",width:"1",opacity:"0"}),D.jsx("rect",{xmlns:"http://www.w3.org/2000/svg",y:"80.88",x:"0",width:"28",height:"2"}),D.jsx("rect",{xmlns:"http://www.w3.org/2000/svg",y:"80.88",x:"263.9",width:"28",height:"2"})]}),D.jsx("g",{id:"SvgjsG4868",featurekey:"nameFeature-0",transform:"matrix(2.189502365161019,0,0,2.189502365161019,96.37259705740317,-26.274026293860054)",fill:`${i?"#000000":"#EFEFEF"}`,children:D.jsx("path",{d:"M4.92 40 l-3.72 -3.72 l0 -20.56 l3.72 -3.72 l8.8 0 l3.72 3.72 l0 5.24 l-5.04 0 l0 -3.16 l-0.76 -0.76 l-4.64 0 l-0.76 0.76 l0 16.4 l0.76 0.76 l4.64 0 l0.76 -0.76 l0 -3.16 l5.04 0 l0 5.24 l-3.72 3.72 l-8.8 0 z M24.137999999999998 40 l-3.72 -3.72 l0 -20.56 l3.72 -3.72 l9.08 0 l3.72 3.72 l0 20.56 l-3.72 3.72 l-9.08 0 z M26.218 34.96 l4.92 0 l0.76 -0.76 l0 -16.4 l-0.76 -0.76 l-4.92 0 l-0.76 0.76 l0 16.4 z M39.916000000000004 40 l0 -4.48 l0.84 -0.56 l0 -17.92 l-0.84 -0.56 l0 -4.48 l6.72 0 l0 4.48 l-0.84 0.56 l0 17.92 l2.8 0 l0.56 -0.84 l4.48 0 l0 5.88 l-13.72 0 z M56.614000000000004 40 l0 -4.48 l0.84 -0.56 l0 -17.92 l-0.84 -0.56 l0 -4.48 l6.72 0 l0 4.48 l-0.84 0.56 l0 17.92 l2.8 0 l0.56 -0.84 l4.48 0 l0 5.88 l-13.72 0 z M72.512 40 l0 -4.48 l0.84 -0.56 l3.64 -17.92 l-0.84 -0.56 l0 -4.48 l10.64 0 l0 4.48 l-0.84 0.56 l3.64 17.92 l0.84 0.56 l0 4.48 l-4.96 0 l-1.24 -6.16 l-5.52 0 l-1.24 6.16 l-4.96 0 z M79.752 28.8 l3.44 0 l-1.72 -8.56 z M92.61 40 l0 -4.48 l0.84 -0.56 l0 -17.92 l-0.84 -0.56 l0 -4.48 l12.52 0 l3.72 3.72 l0 8.24 l-2.04 2.04 l2.04 2.04 l0 8.24 l-3.72 3.72 l-12.52 0 z M98.49 34.96 l4.56 0 l0.76 -0.76 l0 -4.08 l-1.6 -1.6 l-3.72 0 l0 6.44 z M98.49 23.48 l3.72 0 l1.6 -1.6 l0 -4.08 l-0.76 -0.76 l-4.56 0 l0 6.44 z M111.828 40 l0 -4.48 l1.16 -0.76 l3.16 -8.76 l-3.16 -8.76 l-1.16 -0.76 l0 -4.48 l4.6 0 l3.52 9.68 l3.52 -9.68 l4.6 0 l0 4.48 l-1.16 0.76 l-3.16 8.76 l3.16 8.76 l1.16 0.76 l0 4.48 l-4.6 0 l-3.52 -9.68 l-3.52 9.68 l-4.6 0 z"})}),D.jsx("g",{id:"SvgjsG4869",featurekey:"sloganFeature-0",transform:"matrix(0.7101623092992436,0,0,0.7101623092992436,126.28983769070075,75.94364511632456)",fill:`${i?"#000000":"#EFEFEF"}`,children:D.jsx("path",{d:"M1.26 20 c-0.16 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.1 -0.26 0.26 -0.26 l4.88 0 c1.52 0 2.72 0.38 3.56 1.16 c1.24 1.12 1.66 3.24 1.06 4.8 c-0.22 0.56 -0.6 1.08 -1.08 1.46 c-0.28 0.22 -0.58 0.38 -0.88 0.54 c0.86 1.36 2.16 4.12 2.16 4.12 c0.02 0.04 0.06 0.1 0.06 0.16 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.96 0 c-0.08 0 -0.18 -0.06 -0.22 -0.14 l-1.74 -3.82 c-0.62 0.04 -1.1 0.02 -1.74 0.02 l0 3.68 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.58 0 z M4.1 13.280000000000001 c0 0 2.52 0.28 3.4 -0.3 c0.34 -0.22 0.54 -0.76 0.54 -1.16 c-0.02 -0.44 -0.24 -0.9 -0.6 -1.18 c-0.38 -0.32 -1.32 -0.42 -1.8 -0.42 l-1.54 0.04 l0 3.02 z M14.1455 20 l0 -11.98 c0 -0.5 0.1 -0.6 0.26 -0.6 l8.76 0 c0.14 0 0.26 0.1 0.26 0.24 l0 2.26 c0 0.14 -0.12 0.26 -0.26 0.26 l-5.92 0 l0 2.08 l3.74 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-3.74 0 l0 2.14 l5.9 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-8.74 0 z M26.791 20 c-0.08 0 -0.16 -0.04 -0.2 -0.12 c-0.06 -0.06 -0.06 -0.16 -0.04 -0.24 l4.66 -11.98 c0.04 -0.1 0.14 -0.16 0.24 -0.16 l2.68 0 c0.1 0 0.2 0.06 0.24 0.16 l4.58 11.98 c0.02 0.08 0.02 0.16 -0.04 0.24 c-0.04 0.08 -0.12 0.12 -0.2 0.12 l-2.78 0 c-0.1 0 -0.2 -0.06 -0.24 -0.16 l-0.74 -1.84 l-4.5 0.02 l-0.74 1.82 c-0.04 0.1 -0.14 0.16 -0.24 0.16 l-2.68 0 z M31.271 15.5 l2.88 0 l-1.44 -4.24 z M42.1365 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.6 0 c0.14 0 0.26 0.12 0.26 0.26 l0 9.36 l4.5 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.36 c0 0.14 -0.12 0.26 -0.26 0.26 l-7.36 0 z M62.6075 20 c-0.14 0 -0.24 -0.12 -0.24 -0.26 l0 -9.44 l-2.74 0 c-0.14 0 -0.26 -0.1 -0.26 -0.24 l0 -2.3 c0 -0.14 0.12 -0.26 0.26 -0.26 l8.58 0 c0.16 0 0.26 0.12 0.26 0.26 l0 2.3 c0 0.14 -0.1 0.24 -0.26 0.24 l-2.74 0 l0 9.44 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.6 0 z M71.833 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.6 0 c0.14 0 0.26 0.12 0.26 0.26 l0 11.98 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.6 0 z M78.0585 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.88 0 c0.1 0 0.2 0.06 0.24 0.14 l3 7.4 l2.98 -7.4 c0.04 -0.08 0.14 -0.14 0.24 -0.14 l2.88 0 c0.14 0 0.26 0.12 0.26 0.26 l0 11.98 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.34 0 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -6.44 l-2.44 6.2 c-0.04 0.08 -0.14 0.14 -0.22 0.14 l-1.68 0 c-0.1 0 -0.2 -0.06 -0.24 -0.14 l-2.46 -6.2 l0 6.44 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.32 0 z M93.64399999999999 20 l0 -11.98 c0 -0.5 0.1 -0.6 0.26 -0.6 l8.76 0 c0.14 0 0.26 0.1 0.26 0.24 l0 2.26 c0 0.14 -0.12 0.26 -0.26 0.26 l-5.92 0 l0 2.08 l3.74 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-3.74 0 l0 2.14 l5.9 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-8.74 0 c-0.16 0 -0.26 -0.12 -0.26 0.08 z M118.83499999999998 20 c-1.18 0 -2.26 -0.28 -3.22 -0.84 c-0.96 -0.58 -1.72 -1.36 -2.26 -2.34 s-0.82 -2.08 -0.82 -3.3 c0 -1.18 0.28 -2.28 0.84 -3.26 c0.56 -0.96 1.34 -1.74 2.3 -2.3 c0.98 -0.56 2.08 -0.84 3.24 -0.84 c0.88 0 1.74 0.2 2.58 0.56 c0.84 0.38 1.56 0.88 2.16 1.52 c0.08 0.1 0.08 0.24 0 0.34 l-1.9 1.56 c-0.06 0.06 -0.12 0.1 -0.2 0.1 s-0.16 -0.04 -0.2 -0.1 c-1.02 -1.24 -2.66 -1.5 -4.04 -0.64 c-1.2 0.74 -1.64 2.1 -1.58 3.46 c0.06 1.38 1.06 2.56 2.38 2.96 c1.2 0.36 2.38 0.08 3.24 -0.84 c0.06 -0.04 0.12 -0.08 0.2 -0.06 c0.08 0 0.14 0.02 0.18 0.08 l1.94 1.36 c0.08 0.1 0.08 0.24 0 0.34 c-0.64 0.68 -1.4 1.24 -2.24 1.64 c-0.86 0.4 -1.74 0.6 -2.6 0.6 z M133.2805 20 c-1.2 0 -2.3 -0.28 -3.26 -0.84 c-0.98 -0.56 -1.76 -1.36 -2.34 -2.32 c-0.56 -0.98 -0.84 -2.1 -0.84 -3.3 c0 -1.18 0.28 -2.28 0.84 -3.26 c0.58 -0.98 1.34 -1.76 2.32 -2.32 s2.08 -0.84 3.28 -0.84 c1.18 0 2.28 0.28 3.26 0.84 s1.76 1.34 2.32 2.32 c0.58 0.98 0.86 2.08 0.86 3.26 c0 1.2 -0.28 2.3 -0.86 3.28 c-0.56 0.98 -1.34 1.76 -2.32 2.34 c-0.98 0.56 -2.08 0.84 -3.26 0.84 z M133.32049999999998 17.12 c0.58 0 1.12 -0.16 1.6 -0.46 c0.5 -0.32 0.9 -0.74 1.18 -1.3 c0.3 -0.54 0.44 -1.16 0.44 -1.82 c0 -0.64 -0.14 -1.26 -0.44 -1.8 c-0.28 -0.54 -0.68 -0.96 -1.18 -1.28 c-0.48 -0.3 -1.02 -0.46 -1.6 -0.46 c-0.6 0 -1.14 0.16 -1.64 0.46 c-0.52 0.32 -0.92 0.74 -1.22 1.28 c-0.3 0.56 -0.44 1.16 -0.44 1.8 c0 0.66 0.14 1.28 0.44 1.82 c0.32 0.54 0.72 0.98 1.22 1.28 c0.5 0.32 1.04 0.48 1.64 0.48 z M143.08599999999996 20 c-0.16 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.1 -0.26 0.26 -0.26 l4.54 0 c1.2 0 2.3 0.26 3.26 0.8 c0.96 0.52 1.7 1.26 2.24 2.22 c0.52 0.94 0.8 2.02 0.8 3.22 c0 1.22 -0.28 2.3 -0.82 3.24 c-0.54 0.96 -1.3 1.7 -2.28 2.22 c-0.96 0.54 -2.08 0.8 -3.3 0.8 l-4.44 0 z M145.92599999999996 17.2 l1.76 0 c0.58 0 1.12 -0.14 1.58 -0.42 c0.46 -0.3 0.84 -0.7 1.1 -1.22 s0.4 -1.12 0.4 -1.8 c0 -0.66 -0.14 -1.28 -0.42 -1.8 c-0.28 -0.54 -0.66 -0.94 -1.14 -1.24 c-0.48 -0.28 -1.04 -0.44 -1.64 -0.44 l-1.64 0 l0 6.92 z M157.29149999999996 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.6 0 c0.14 0 0.26 0.12 0.26 0.26 l0 11.98 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.6 0 z M163.51699999999997 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.36 0 c0.08 0 0.16 0.04 0.22 0.1 l4.6 7.1 l0 -6.94 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.46 0 c0.14 0 0.26 0.12 0.26 0.26 l0 11.98 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.36 0 c-0.08 0 -0.16 -0.04 -0.22 -0.1 l-4.58 -7.06 l0 6.9 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.48 0 z M183.16249999999997 20 c-1.18 0 -2.28 -0.28 -3.24 -0.84 c-0.98 -0.58 -1.74 -1.36 -2.3 -2.32 c-0.56 -0.98 -0.84 -2.1 -0.84 -3.3 s0.28 -2.3 0.86 -3.26 c0.56 -0.98 1.36 -1.76 2.34 -2.32 c1 -0.56 2.12 -0.84 3.34 -0.84 c0.88 0 1.74 0.16 2.6 0.5 c0.84 0.32 1.58 0.78 2.18 1.36 c0.1 0.08 0.12 0.22 0.04 0.34 l-1.46 1.92 c-0.06 0.06 -0.12 0.1 -0.2 0.12 c-0.06 0 -0.14 -0.04 -0.2 -0.08 c-0.4 -0.4 -0.86 -0.72 -1.4 -0.94 c-0.52 -0.22 -1.04 -0.34 -1.56 -0.34 c-0.62 0 -1.2 0.16 -1.7 0.46 c-0.52 0.32 -0.92 0.74 -1.22 1.28 s-0.44 1.14 -0.44 1.8 s0.14 1.28 0.44 1.82 s0.72 0.98 1.22 1.3 c0.52 0.3 1.1 0.46 1.7 0.46 c0.32 0 0.66 -0.06 1.04 -0.16 c0.32 -0.1 0.66 -0.24 0.96 -0.4 l0 -0.92 l-1.38 0 c-0.08 0 -0.14 -0.02 -0.18 -0.08 c-0.06 -0.04 -0.08 -0.1 -0.08 -0.18 l0.02 -2.24 c0 -0.14 0.12 -0.26 0.26 -0.26 l3.88 0 c0.14 0 0.26 0.12 0.26 0.26 l0 5.02 c0 0.08 -0.04 0.16 -0.12 0.22 c-0.62 0.48 -1.38 0.88 -2.26 1.16 c-0.88 0.3 -1.74 0.46 -2.56 0.46 z M203.0135 20 c-1.08 0 -1.86 -0.22 -2.68 -0.66 c-0.8 -0.44 -1.44 -1.06 -1.88 -1.88 c-0.44 -0.8 -0.66 -1.76 -0.66 -2.86 l0 -7.04 c0 -0.14 0.12 -0.24 0.26 -0.24 l2.6 0 c0.14 0 0.24 0.1 0.24 0.24 l0 7.04 c0 0.8 0.22 1.42 0.64 1.86 s0.8 0.66 1.5 0.66 s1.06 -0.22 1.46 -0.64 c0.4 -0.44 0.6 -1.08 0.6 -1.88 l0 -7.04 c0 -0.14 0.12 -0.24 0.26 -0.24 l2.6 0 c0.14 0 0.26 0.1 0.26 0.24 l0 7.04 c0 1.1 -0.22 2.06 -0.66 2.86 c-0.42 0.82 -1.06 1.44 -1.86 1.88 s-1.6 0.66 -2.68 0.66 z M211.57899999999998 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.36 0 c0.08 0 0.16 0.04 0.22 0.1 l4.6 7.1 l0 -6.94 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.46 0 c0.14 0 0.26 0.12 0.26 0.26 l0 11.98 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.36 0 c-0.08 0 -0.16 -0.04 -0.22 -0.1 l-4.58 -7.06 l0 6.9 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.48 0 z M225.10449999999997 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.6 0 c0.14 0 0.26 0.12 0.26 0.26 l0 9.36 l4.5 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.36 c0 0.14 -0.12 0.26 -0.26 0.26 l-7.36 0 z M235.82999999999998 20 l0 -11.98 c0 -0.5 0.1 -0.6 0.26 -0.6 l8.76 0 c0.14 0 0.26 0.1 0.26 0.24 l0 2.26 c0 0.14 -0.12 0.26 -0.26 0.26 l-5.92 0 l0 2.08 l3.74 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-3.74 0 l0 2.14 l5.9 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-8.74 0 c-0.16 0 -0.26 -0.12 -0.26 0.08 z M248.47549999999998 20 c-0.08 0 -0.16 -0.04 -0.2 -0.12 c-0.06 -0.06 -0.06 -0.16 -0.04 -0.24 l4.66 -11.98 c0.04 -0.1 0.14 -0.16 0.24 -0.16 l2.68 0 c0.1 0 0.2 0.06 0.24 0.16 l4.58 11.98 c0.02 0.08 0.02 0.16 -0.04 0.24 c-0.04 0.08 -0.12 0.12 -0.2 0.12 l-2.78 0 c-0.1 0 -0.2 -0.06 -0.24 -0.16 l-0.74 -1.84 l-4.5 0.02 l-0.74 1.82 c-0.04 0.1 -0.14 0.16 -0.24 0.16 l-2.68 0 z M252.9555 15.5 l2.88 0 l-1.44 -4.24 z M268.70099999999996 20.12 c-0.96 0 -1.92 -0.18 -2.84 -0.54 c-0.92 -0.34 -1.74 -0.84 -2.42 -1.44 c-0.08 -0.08 -0.1 -0.2 -0.06 -0.3 l0.7 -2.38 c0.04 -0.08 0.1 -0.14 0.18 -0.14 c0.08 -0.02 0.16 0 0.22 0.06 c1.06 1 2.26 1.9 3.76 1.98 c0.4 0.02 0.84 0.04 1.22 -0.08 c1.18 -0.38 0.68 -1.58 -0.2 -1.94 c-0.3 -0.12 -0.72 -0.26 -1.26 -0.42 c-0.8 -0.22 -1.46 -0.46 -1.96 -0.7 c-0.54 -0.24 -1 -0.62 -1.4 -1.12 c-0.38 -0.52 -0.58 -1.2 -0.58 -2.02 c0 -0.78 0.2 -1.46 0.6 -2.04 s0.96 -1.04 1.66 -1.34 s1.52 -0.46 2.44 -0.46 c0.82 0 1.62 0.12 2.42 0.38 c0.78 0.24 1.48 0.58 2.1 0.98 c0.1 0.08 0.14 0.2 0.08 0.32 l-0.66 2.24 c-0.02 0.08 -0.08 0.12 -0.16 0.14 c-0.06 0.02 -0.14 0.02 -0.2 -0.02 c-0.9 -0.56 -1.8 -1.24 -2.86 -1.38 c-0.7 -0.1 -1.76 -0.06 -2 0.78 c-0.3 1.08 1.28 1.36 2 1.58 c0.8 0.24 1.46 0.48 1.98 0.72 c0.54 0.26 1.02 0.66 1.4 1.16 c0.4 0.52 0.6 1.22 0.6 2.06 c0 0.82 -0.22 1.52 -0.64 2.12 c-0.4 0.6 -0.98 1.04 -1.7 1.36 c-0.72 0.28 -1.52 0.44 -2.42 0.44 z M276.82649999999995 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.6 0 c0.14 0 0.26 0.12 0.26 0.26 l0 4.92 l4.52 0 l0 -4.92 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.6 0 c0.14 0 0.26 0.12 0.26 0.26 l0 11.98 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.6 0 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -4.3 l-4.52 0 l0 4.3 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.6 0 z M290.43199999999996 20 l0 -11.98 c0 -0.5 0.1 -0.6 0.26 -0.6 l8.76 0 c0.14 0 0.26 0.1 0.26 0.24 l0 2.26 c0 0.14 -0.12 0.26 -0.26 0.26 l-5.92 0 l0 2.08 l3.74 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-3.74 0 l0 2.14 l5.9 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-8.74 0 c-0.16 0 -0.26 -0.12 -0.26 0.08 z M303.07749999999993 20 c-0.16 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.1 -0.26 0.26 -0.26 l4.54 0 c1.2 0 2.3 0.26 3.26 0.8 c0.96 0.52 1.7 1.26 2.24 2.22 c0.52 0.94 0.8 2.02 0.8 3.22 c0 1.22 -0.28 2.3 -0.82 3.24 c-0.54 0.96 -1.3 1.7 -2.28 2.22 c-0.96 0.54 -2.08 0.8 -3.3 0.8 l-4.44 0 z M305.91749999999996 17.2 l1.76 0 c0.58 0 1.12 -0.14 1.58 -0.42 c0.46 -0.3 0.84 -0.7 1.1 -1.22 s0.4 -1.12 0.4 -1.8 c0 -0.66 -0.14 -1.28 -0.42 -1.8 c-0.28 -0.54 -0.66 -0.94 -1.14 -1.24 c-0.48 -0.28 -1.04 -0.44 -1.64 -0.44 l-1.64 0 l0 6.92 z"})})]})}),D.jsx("button",{className:"md:hidden",onClick:()=>n(!t),children:D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-primary",children:t?D.jsxs(D.Fragment,{children:[D.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),D.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}):D.jsxs(D.Fragment,{children:[D.jsx("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),D.jsx("line",{x1:"4",y1:"16",x2:"20",y2:"16"})]})})}),D.jsxs("nav",{className:"hidden md:flex items-center gap-8",children:[D.jsx("a",{href:"#features",className:"text-foreground hover:text-primary transition-colors",children:"Features"}),D.jsx("a",{href:"#demo",className:"text-foreground hover:text-primary transition-colors",children:"Demo"}),D.jsx("a",{href:"#testimonials",className:"text-foreground hover:text-primary transition-colors",children:"Testimonials"}),o?D.jsxs(D.Fragment,{children:[D.jsx(vg,{to:"/dashboard",className:"px-5 py-2 text-white bg-black rounded-md",children:"Dashboard"}),D.jsx("button",{onClick:c,className:"px-4 py-2 bg-white font-medium border border-black-2 text-black rounded-md",children:"Logout"})]}):D.jsxs(D.Fragment,{children:[D.jsx(vg,{to:"/auth",className:"px-5 py-2 text-white bg-black rounded-md",children:"Login"}),D.jsx(vg,{to:"/auth?signup=true",className:"px-4 py-2 bg-white font-medium border border-black-2 text-black rounded-md",children:"Sign Up"})]})]})]}),t&&D.jsx("div",{className:"md:hidden bg-backgroundA shadow-lg",children:D.jsxs("div",{className:"container mx-auto px-4 py-4 flex flex-col gap-4",children:[D.jsx("a",{href:"#features",className:"text-foreground hover:text-primary transition-colors py-2",children:"Features"}),D.jsx("a",{href:"#demo",className:"text-foreground hover:text-primary transition-colors py-2",children:"Demo"}),D.jsx("a",{href:"#testimonials",className:"text-foreground hover:text-primary transition-colors py-2",children:"Testimonials"}),o?D.jsxs(D.Fragment,{children:[D.jsx(Zi,{asChild:!0,children:D.jsx(vg,{to:"/dashboard",className:"w-full",children:"Dashboard"})}),D.jsx(Zi,{onClick:c,variant:"outline",className:"w-full",children:"Logout"})]}):D.jsxs(D.Fragment,{children:[D.jsx(Zi,{asChild:!0,variant:"outline",className:"w-full",children:D.jsx(vg,{to:"/auth",children:"Login"})}),D.jsx(Zi,{asChild:!0,className:"w-full",children:D.jsx(vg,{to:"/auth?signup=true",children:"Sign Up"})})]})]})})]})}function H5(){return H5=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},H5.apply(this,arguments)}var jTe={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(i){},onComplete:function(i){},preStringTyped:function(i,e){},onStringTyped:function(i,e){},onLastStringBackspaced:function(i){},onTypingPaused:function(i,e){},onTypingResumed:function(i,e){},onReset:function(i){},onStop:function(i,e){},onStart:function(i,e){},onDestroy:function(i){}},$Te=new(function(){function i(){}var e=i.prototype;return e.load=function(t,n,s){if(t.el=typeof s=="string"?document.querySelector(s):s,t.options=H5({},jTe,n),t.isInput=t.el.tagName.toLowerCase()==="input",t.attr=t.options.attr,t.bindInputFocusEvents=t.options.bindInputFocusEvents,t.showCursor=!t.isInput&&t.options.showCursor,t.cursorChar=t.options.cursorChar,t.cursorBlinking=!0,t.elContent=t.attr?t.el.getAttribute(t.attr):t.el.textContent,t.contentType=t.options.contentType,t.typeSpeed=t.options.typeSpeed,t.startDelay=t.options.startDelay,t.backSpeed=t.options.backSpeed,t.smartBackspace=t.options.smartBackspace,t.backDelay=t.options.backDelay,t.fadeOut=t.options.fadeOut,t.fadeOutClass=t.options.fadeOutClass,t.fadeOutDelay=t.options.fadeOutDelay,t.isPaused=!1,t.strings=t.options.strings.map(function(c){return c.trim()}),t.stringsElement=typeof t.options.stringsElement=="string"?document.querySelector(t.options.stringsElement):t.options.stringsElement,t.stringsElement){t.strings=[],t.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var r=Array.prototype.slice.apply(t.stringsElement.children),o=r.length;if(o)for(var a=0;a<o;a+=1)t.strings.push(r[a].innerHTML.trim())}for(var l in t.strPos=0,t.currentElContent=this.getCurrentElContent(t),t.currentElContent&&t.currentElContent.length>0&&(t.strPos=t.currentElContent.length-1,t.strings.unshift(t.currentElContent)),t.sequence=[],t.strings)t.sequence[l]=l;t.arrayPos=0,t.stopNum=0,t.loop=t.options.loop,t.loopCount=t.options.loopCount,t.curLoop=0,t.shuffle=t.options.shuffle,t.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},t.typingComplete=!1,t.autoInsertCss=t.options.autoInsertCss,t.autoInsertCss&&(this.appendCursorAnimationCss(t),this.appendFadeOutAnimationCss(t))},e.getCurrentElContent=function(t){return t.attr?t.el.getAttribute(t.attr):t.isInput?t.el.value:t.contentType==="html"?t.el.innerHTML:t.el.textContent},e.appendCursorAnimationCss=function(t){var n="data-typed-js-cursor-css";if(t.showCursor&&!document.querySelector("["+n+"]")){var s=document.createElement("style");s.setAttribute(n,"true"),s.innerHTML=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `,document.body.appendChild(s)}},e.appendFadeOutAnimationCss=function(t){var n="data-typed-fadeout-js-css";if(t.fadeOut&&!document.querySelector("["+n+"]")){var s=document.createElement("style");s.setAttribute(n,"true"),s.innerHTML=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `,document.body.appendChild(s)}},i}()),DG=new(function(){function i(){}var e=i.prototype;return e.typeHtmlChars=function(t,n,s){if(s.contentType!=="html")return n;var r=t.substring(n).charAt(0);if(r==="<"||r==="&"){var o;for(o=r==="<"?">":";";t.substring(n+1).charAt(0)!==o&&!(1+ ++n>t.length););n++}return n},e.backSpaceHtmlChars=function(t,n,s){if(s.contentType!=="html")return n;var r=t.substring(n).charAt(0);if(r===">"||r===";"){var o;for(o=r===">"?"<":"&";t.substring(n-1).charAt(0)!==o&&!(--n<0););n--}return n},i}()),qTe=function(){function i(t,n){$Te.load(this,n,t),this.begin()}var e=i.prototype;return e.toggle=function(){this.pause.status?this.start():this.stop()},e.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},e.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},e.destroy=function(){this.reset(!1),this.options.onDestroy(this)},e.reset=function(t){t===void 0&&(t=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,t&&(this.insertCursor(),this.options.onReset(this),this.begin())},e.begin=function(){var t=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){t.strPos===0?t.typewrite(t.strings[t.sequence[t.arrayPos]],t.strPos):t.backspace(t.strings[t.sequence[t.arrayPos]],t.strPos)},this.startDelay)},e.typewrite=function(t,n){var s=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var r=this.humanizer(this.typeSpeed),o=1;this.pause.status!==!0?this.timeout=setTimeout(function(){n=DG.typeHtmlChars(t,n,s);var a=0,l=t.substring(n);if(l.charAt(0)==="^"&&/^\^\d+/.test(l)){var c=1;c+=(l=/\d+/.exec(l)[0]).length,a=parseInt(l),s.temporaryPause=!0,s.options.onTypingPaused(s.arrayPos,s),t=t.substring(0,n)+t.substring(n+c),s.toggleBlinking(!0)}if(l.charAt(0)==="`"){for(;t.substring(n+o).charAt(0)!=="`"&&(o++,!(n+o>t.length)););var u=t.substring(0,n),d=t.substring(u.length+1,n+o),h=t.substring(n+o+1);t=u+d+h,o--}s.timeout=setTimeout(function(){s.toggleBlinking(!1),n>=t.length?s.doneTyping(t,n):s.keepTyping(t,n,o),s.temporaryPause&&(s.temporaryPause=!1,s.options.onTypingResumed(s.arrayPos,s))},a)},r):this.setPauseStatus(t,n,!0)},e.keepTyping=function(t,n,s){n===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var r=t.substring(0,n+=s);this.replaceText(r),this.typewrite(t,n)},e.doneTyping=function(t,n){var s=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){s.backspace(t,n)},this.backDelay))},e.backspace=function(t,n){var s=this;if(this.pause.status!==!0){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var r=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){n=DG.backSpaceHtmlChars(t,n,s);var o=t.substring(0,n);if(s.replaceText(o),s.smartBackspace){var a=s.strings[s.arrayPos+1];s.stopNum=a&&o===a.substring(0,n)?n:0}n>s.stopNum?(n--,s.backspace(t,n)):n<=s.stopNum&&(s.arrayPos++,s.arrayPos===s.strings.length?(s.arrayPos=0,s.options.onLastStringBackspaced(),s.shuffleStringsIfNeeded(),s.begin()):s.typewrite(s.strings[s.sequence[s.arrayPos]],n))},r)}else this.setPauseStatus(t,n,!1)},e.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},e.setPauseStatus=function(t,n,s){this.pause.typewrite=s,this.pause.curString=t,this.pause.curStrPos=n},e.toggleBlinking=function(t){this.cursor&&(this.pause.status||this.cursorBlinking!==t&&(this.cursorBlinking=t,t?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},e.humanizer=function(t){return Math.round(Math.random()*t/2)+t},e.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},e.initFadeOut=function(){var t=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){t.arrayPos++,t.replaceText(""),t.strings.length>t.arrayPos?t.typewrite(t.strings[t.sequence[t.arrayPos]],0):(t.typewrite(t.strings[0],0),t.arrayPos=0)},this.fadeOutDelay)},e.replaceText=function(t){this.attr?this.el.setAttribute(this.attr,t):this.isInput?this.el.value=t:this.contentType==="html"?this.el.innerHTML=t:this.el.textContent=t},e.bindFocusEvents=function(){var t=this;this.isInput&&(this.el.addEventListener("focus",function(n){t.stop()}),this.el.addEventListener("blur",function(n){t.el.value&&t.el.value.length!==0||t.start()}))},e.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},i}();/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KTe=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),GTe=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),NG=i=>{const e=GTe(i);return e.charAt(0).toUpperCase()+e.slice(1)},voe=(...i)=>i.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var YTe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QTe=F.forwardRef(({color:i="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:s="",children:r,iconNode:o,...a},l)=>F.createElement("svg",{ref:l,...YTe,width:e,height:e,stroke:i,strokeWidth:n?Number(t)*24/Number(e):t,className:voe("lucide",s),...a},[...o.map(([c,u])=>F.createElement(c,u)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=(i,e)=>{const t=F.forwardRef(({className:n,...s},r)=>F.createElement(QTe,{ref:r,iconNode:e,className:voe(`lucide-${KTe(NG(i))}`,`lucide-${i}`,n),...s}));return t.displayName=NG(i),t};/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XTe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],boe=ts("arrow-right",XTe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZTe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],yoe=ts("check",ZTe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JTe=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],fW=ts("chevron-down",JTe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eLe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],tLe=ts("chevron-left",eLe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nLe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],iLe=ts("chevron-right",nLe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sLe=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],rLe=ts("chevron-up",sLe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oLe=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],aLe=ts("code",oLe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lLe=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 15h10",key:"jfw4w8"}],["path",{d:"m9 18 3-3-3-3",key:"112psh"}]],cLe=ts("file-input",lLe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uLe=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],dLe=ts("git-branch",uLe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hLe=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],fLe=ts("github",hLe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gLe=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],mLe=ts("log-out",gLe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pLe=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],_Le=ts("message-square",pLe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vLe=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],woe=ts("mic-off",vLe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bLe=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],Coe=ts("mic",bLe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yLe=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],wLe=ts("moon",yLe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CLe=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],Soe=ts("pin",CLe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SLe=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],koe=ts("play",SLe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kLe=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xLe=ts("settings",kLe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ELe=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],xoe=ts("share",ELe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TLe=[["rect",{width:"3",height:"8",x:"13",y:"2",rx:"1.5",key:"diqz80"}],["path",{d:"M19 8.5V10h1.5A1.5 1.5 0 1 0 19 8.5",key:"183iwg"}],["rect",{width:"3",height:"8",x:"8",y:"14",rx:"1.5",key:"hqg7r1"}],["path",{d:"M5 15.5V14H3.5A1.5 1.5 0 1 0 5 15.5",key:"76g71w"}],["rect",{width:"8",height:"3",x:"14",y:"13",rx:"1.5",key:"1kmz0a"}],["path",{d:"M15.5 19H14v1.5a1.5 1.5 0 1 0 1.5-1.5",key:"jc4sz0"}],["rect",{width:"8",height:"3",x:"2",y:"8",rx:"1.5",key:"1omvl4"}],["path",{d:"M8.5 5H10V3.5A1.5 1.5 0 1 0 8.5 5",key:"16f3cl"}]],LLe=ts("slack",TLe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ILe=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],DLe=ts("sun",ILe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NLe=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],RLe=ts("twitter",NLe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ALe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Eoe=ts("users",ALe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PLe=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],JR=ts("video-off",PLe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MLe=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],e4=ts("video",MLe);/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OLe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],FM=ts("x",OLe);function FLe(){const i=F.useRef(null);return F.useEffect(()=>{const e=new qTe(i.current,{strings:["Code together in real-time.","Seamless multi-language support.","Integrated video chat.","Instant session sharing."],typeSpeed:50,backSpeed:25,backDelay:2e3,loop:!0});return()=>e.destroy()},[]),D.jsx("section",{className:"min-h-screen pt-20",style:{background:"linear-gradient(to bottom right, #1e1e1e 5%, #3a3a3a 15%, #E3E3E4 90%)"},children:D.jsxs("div",{className:"container mx-auto px-4 py-16 md:py-24 flex flex-col md:flex-row items-center",children:[D.jsxs("div",{className:"w-full md:w-1/2 text-white mb-12 md:mb-0",children:[D.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-[4.5rem] font-extrabold leading-tight mb-6",children:["Real-Time Code Collaboration"," ",D.jsx("span",{className:"text-accent",children:"Made Simple"})]}),D.jsx("div",{className:"h-16 mb-6",children:D.jsx("p",{className:"text-xl md:text-2xl font-medium",children:D.jsx("span",{ref:i})})}),D.jsx("p",{className:"text-lg md:text-xl opacity-90 mb-8 max-w-xl",children:"Pair program, debug together, and share knowledge in real-time with integrated video chat and multi-language support."}),D.jsxs(Zi,{className:"bg-slate-50 text-gray-800 hover:bg-gray-100 hover:translate-y-[-2px] transition-all text-lg px-7 py-5 h-auto font-550 rounded-lg ",children:["Start Coding Now",D.jsx(boe,{className:"ml-2 h-5 w-5"})]})]}),D.jsx("div",{className:"w-full md:w-1/2",children:D.jsxs("div",{className:"bg-slate-900 rounded-lg shadow-xl overflow-hidden max-w-xl mx-auto",children:[D.jsxs("div",{className:"bg-slate-800 px-4 py-2 flex items-center",children:[D.jsxs("div",{className:"flex space-x-2",children:[D.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),D.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),D.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"})]}),D.jsx("div",{className:"ml-4 text-gray-400 text-sm",children:"script.js"})]}),D.jsxs("div",{className:"p-6 relative font-mono text-[14px]",children:[D.jsxs("pre",{className:"text-gray-300 relative",children:[D.jsx("span",{className:"text-green-400",children:"// Collaborating in real-time"}),D.jsx("br",{}),D.jsx("span",{className:"text-blue-400",children:"function"})," ",D.jsxs("span",{className:"text-yellow-300 relative",children:["team",D.jsx("span",{className:"inline-block h-[18px] w-1 bg-blue-300 shadow shadow-blue-300/50 animate-pulse"}),"work"]}),"() ","{",D.jsx("br",{}),"  ",D.jsx("span",{className:"text-cyan-400",children:"console"}),".",D.jsxs("span",{className:"text-yellow-300 relative",children:["log",D.jsx("span",{className:"inline-block h-[18px] w-1 bg-purple-300 shadow shadow-purple-300/50 animate-pulse"})]}),"(",D.jsx("span",{className:"text-orange-300",children:"'Happy coding!'"}),");",D.jsx("br",{}),"}"]}),D.jsx("div",{className:"absolute top-[42px] left-[130px] text-xs bg-blue-500 text-white px-1 py-0.5 rounded-sm -mt-5 font-medium shadow-md",children:"Sarah"}),D.jsx("div",{className:"absolute top-[64px] left-[190px] text-xs bg-purple-500 text-white px-1 py-0.5 rounded-sm -mt-5 font-medium shadow-md",children:"Bob"}),D.jsxs("div",{className:"absolute top-2 right-2 flex space-x-2",children:[D.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 border-2 border-white flex items-center justify-center text-white font-medium shadow-lg",children:"S"}),D.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500 border-2 border-white flex items-center justify-center text-white font-medium shadow-lg",children:"B"})]})]})]})})]})})}function BLe(){const i=[{icon:D.jsx(Eoe,{className:"h-10 w-10 text-primary"}),title:"Live Collaboration",description:"See teammates' cursors in real-time with color-coded identifiers."},{icon:D.jsx(e4,{className:"h-10 w-10 text-primary"}),title:"Integrated Video Chat",description:"Discuss code face-to-face without leaving your coding environment."},{icon:D.jsx(xoe,{className:"h-10 w-10 text-primary"}),title:"Instant Session Sharing",description:"Share your coding session with a simple link. No setup required."},{icon:D.jsx(aLe,{className:"h-10 w-10 text-primary"}),title:"Multi-Language Support",description:"Support for over 40 programming languages with syntax highlighting."}];return D.jsx("section",{id:"features",className:"py-20 bg-white",children:D.jsxs("div",{className:"container mx-auto px-4",children:[D.jsx("div",{className:"text-left mb-16",children:D.jsx("h2",{className:`text-4xl font-bold inline-block relative after:content-[''] after:block after:w-full after:h-1 \r
                         after:bg-gradient-to-r after:from-black after:via-gray-500 after:to-transparent after:mt-1`,children:"Core Capabilities"})}),D.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:i.map((e,t)=>D.jsxs("div",{className:"bg-card p-8 rounded-lg shadow-md hover:shadow-lg hover:translate-y-[-4px] transition-all duration-300",children:[D.jsx("div",{className:"mb-4",children:e.icon}),D.jsx("h3",{className:"text-2xl font-semibold mb-3",children:e.title}),D.jsx("p",{className:"text-muted-foreground",children:e.description})]},t))})]})})}function VLe(){const i=["Real-time cursor tracking","Integrated video chat","Code history and playback","Multi-language support","Customizable editor themes","Instant session sharing"];return D.jsx("section",{id:"demo",className:"py-20 bg-[linear-gradient(to_bottom_right,var(--grey-gradient-start),var(--grey-gradient-end))]",children:D.jsxs("div",{className:"container mx-auto px-4",children:[D.jsxs("h2",{className:`text-4xl font-bold inline-block relative after:content-[''] after:block after:w-full after:h-1 mb-16\r
                         after:bg-gradient-to-r after:from-black after:via-gray-500 after:to-transparent after:mt-1`,children:["See CollabX in Action",D.jsx("span",{className:"absolute bottom-[-8px] left-0 right-0 h-1 bg-gradient-to-r from-primary to-accent"})]}),D.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-12 max-w-6xl mx-auto",children:[D.jsx("div",{className:"w-full md:w-3/5 relative",children:D.jsxs("div",{className:"aspect-video bg-slate-800 rounded-lg overflow-hidden relative",children:[D.jsx("img",{src:"/placeholder.svg",alt:"CollabX Demo Video",className:"w-full h-full object-cover"}),D.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:D.jsx("button",{className:"w-20 h-20 bg-black/50 hover:bg-primary rounded-full flex items-center justify-center transition-colors",children:D.jsx(koe,{className:"h-10 w-10 text-white",fill:"white"})})})]})}),D.jsxs("div",{className:"w-full md:w-2/5",children:[D.jsx("h3",{className:"text-2xl font-semibold mb-6",children:"Key Features"}),D.jsx("ul",{className:"space-y-4",children:i.map((e,t)=>D.jsxs("li",{className:"flex items-center",children:[D.jsx(yoe,{className:"h-6 w-6 text-accent mr-3"}),D.jsx("span",{className:"text-lg",children:e})]},t))})]})]})]})})}function WLe(){const[i,e]=F.useState(0),t=[{quote:"CollabX transformed our remote teams workflow. The real-time collaboration features have made our pair programming sessions incredibly productive.",author:"Priya S.",role:"Developer, Tech Co."},{quote:"The integrated video chat alongside real-time code editing is a game-changer. Weve cut our meeting time in half while improving code quality.",author:"Marcus J.",role:"Senior Engineer, StartupX"},{quote:"As a coding instructor, CollabX has revolutionized how I teach. I can see exactly where students are struggling in real-time.",author:"Elena R.",role:"Lead Instructor, CodeAcademy"},{quote:"Our distributed team relies on CollabX daily. The multi-language support and instant session sharing have made collaboration seamless.",author:"Jamal T.",role:"CTO, DevFlow"}],n=2,s=Math.ceil(t.length/n)-1;F.useEffect(()=>{const l=setInterval(()=>{e(c=>c<s?c+1:0)},7e3);return()=>clearInterval(l)},[s]);const r=()=>{e(l=>Math.max(l-1,0))},o=()=>{e(l=>Math.min(l+1,s))},a=t.slice(i*n,i*n+n);return D.jsx("section",{id:"testimonials",className:"py-20 min-h-[600px] bg-[linear-gradient(to_bottom_right,var(--grey-gradient-start),var(--grey-gradient-end))]",children:D.jsxs("div",{className:"container mx-auto px-4",children:[D.jsxs("h2",{className:`text-4xl font-bold inline-block relative mb-16 after:content-[''] after:block after:w-full after:h-1 \r
                         after:bg-gradient-to-r after:from-black after:via-gray-500 after:to-transparent after:mt-1`,children:["What Developers Say",D.jsx("span",{className:"absolute bottom-[-8px] left-0 right-0 h-1 bg-gradient-to-r from-primary to-accent"})]}),D.jsxs("div",{className:"relative max-w-6xl mx-auto",children:[D.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-5 z-10 hidden md:block",children:D.jsx(Zi,{variant:"outline",size:"icon",className:"rounded-full shadow-md",onClick:r,disabled:i===0,children:D.jsx(tLe,{className:"h-6 w-6"})})}),D.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 translate-x-5 z-10 hidden md:block",children:D.jsx(Zi,{variant:"outline",size:"icon",className:"rounded-full shadow-md",onClick:o,disabled:i===s,children:D.jsx(iLe,{className:"h-6 w-6"})})}),D.jsx("div",{className:"flex justify-center gap-6",children:a.map((l,c)=>D.jsxs("div",{className:"w-[300px] min-h-[325px] bg-card p-8 rounded-lg shadow-md hover:shadow-lg hover:translate-y-[-4px] transition-all duration-300 flex-shrink-0",children:[D.jsxs("p",{className:"text-lg mb-6 italic",children:['"',l.quote,'"']}),D.jsxs("div",{className:"flex items-center",children:[D.jsx("div",{className:"w-[60px] h-[60px] rounded-full bg-muted flex items-center justify-center text-primary font-bold text-xl mr-4",children:l.author.charAt(0)}),D.jsxs("div",{children:[D.jsx("p",{className:"font-semibold",children:l.author}),D.jsx("p",{className:"text-muted-foreground text-sm",children:l.role})]})]})]},c))})]})]})})}function HLe(){return D.jsx("section",{className:"py-20 bg-gradient-to-br from-primary to-secondary text-primary-foreground",children:D.jsxs("div",{className:"container mx-auto px-4 text-center max-w-3xl",children:[D.jsx("h2",{className:"text-4xl font-bold mb-6",children:"Ready to Code Together?"}),D.jsx("p",{className:"text-xl opacity-90 mb-10",children:"Join thousands of developers using CollabX to accelerate their projects."}),D.jsxs(Zi,{className:"relative overflow-hidden bg-background text-primary border border-primary text-lg px-6 py-6 font-semibold h-auto rounded-2xl transition-all group",children:[D.jsx("span",{className:"absolute inset-0 bg-[#150f37] scale-x-0 origin-left transition-transform duration-300 group-hover:scale-x-100"}),D.jsxs("span",{className:"relative group-hover:text-white flex items-center",children:["Start Coding Now",D.jsx(boe,{className:"ml-2 h-5 w-5"})]})]})]})})}function Toe(){return D.jsx("footer",{className:"bg-slate-900 text-slate-200 py-16",children:D.jsxs("div",{className:"container mx-auto px-4",children:[D.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-10",children:[D.jsxs("div",{children:[D.jsx("div",{className:"text-xl font-bold text-primary mb-4",children:D.jsxs("svg",{width:"198.82437744140623",height:"76.76786943937378",viewBox:"0 0 96 37.06645815275718",class:"looka-1j8o68f",children:[D.jsx("defs",{id:"SvgjsDefs3365"}),D.jsx("g",{id:"SvgjsG3366",featurekey:"symbolFeature-0",transform:"matrix(0.2483563627893974,0,0,0.2483563627893974,6.208365660469816,3.1532607616751918)",fill:"#DEDEDF",children:D.jsx("path",{xmlns:"http://www.w3.org/2000/svg",d:"M96.63 57.12q11.83 7.36 23.98 14.42c4.75 2.76 4.29 5.89-.18 8.46q-3.3 1.89-6.48 3.64-.8.44-.02.91l6.97 4.19a4.64 4.63-74.5 0 1 2.24 3.97v17.42a4.2 4.2 0 0 1-2.05 3.61q-10.37 6.18-21.01 12.58c-2.5 1.51-3.82 1.71-6.39.13q-13.16-8.08-21.94-13.31a.63.63 0 0 0-.64 0l-23.23 13.88a4.18 4.15 45 0 1-4.27-.01l-21.55-12.96a3.87 3.86 15.6 0 1-1.87-3.31q.01-11.33-.01-17.49-.02-3.31 2.55-4.76 3.07-1.73 6.62-4.05a.31.31 0 0 0-.02-.53q-6.07-3.54-8.62-5.19-1.57-1.02-1.4-3.41c.15-1.92 1.7-2.78 3.31-3.74q9.73-5.76 23.85-14.27.46-.28.16-.73c-.49-.73-1.02-1.43-1.03-2.51q-.02-17.99.01-25.14a4.73 4.72 74.6 0 1 2.28-4.03q9.96-5.99 20.84-12.4 2.97-1.75 5.04-.52 15.95 9.45 20.69 12.07 3.17 1.74 3.2 4.7.1 12.03-.04 25.02-.01.82-1.17 2.58-.31.48.18.78m-25.56-12.7q.53-2.61 2.69-3.93 5.89-3.61 17.45-11.03a.31.31 0 0 0-.01-.53L72.17 17.49a.79.79 0 0 0-.82 0L52.33 28.85a1.95 1.95 0 0 0-.94 1.67v22.29a2.23 2.22 15.7 0 0 1.07 1.9l18.03 10.84a.36.35-74.5 0 0 .54-.31l.02-20.56a1.77 1.64-42.8 0 1 .02-.26m26.42 28.32c2.06 1.44 2.23 4.4-.02 5.75Q79.09 89.54 73.35 92.96a3.74 3.72 44.9 0 1-3.83-.01Q59.11 86.71 47.76 79.7c-1.31-.81-2.87-1.56-3.41-2.97-.87-2.26.63-3.76 2.48-4.89q5.13-3.1 11.23-6.78a.16.16 0 0 0 0-.27l-6.3-3.78q-.24-.15-.48 0L27.46 75.24a.47.47 0 0 0-.01.81l43.38 26.09a1.14 1.12 44.6 0 0 1.15 0l43.89-26.22a.3.3 0 0 0 0-.52L91.29 60.62q-.17-.11-.34 0l-6.4 3.82a.18.17 44 0 0 .01.3q8.83 5.14 12.93 8m-32 11.01q0 .18.08.23 2.9 1.66 5.73 3.44.01.01.14.02.06.01.12.01t.12-.01q.13-.01.14-.02 2.83-1.78 5.73-3.44.07-.05.07-.23t-.07-.23q-2.9-1.66-5.73-3.44-.01-.01-.14-.02-.06-.01-.12-.01t-.12.01q-.13.01-.14.02-2.83 1.78-5.73 3.44-.08.05-.08.23M45.6 121.56a.35.35 0 0 0 .36 0l22.62-13.51a.35.35 0 0 0 0-.6l-19.1-11.48a.35.35 0 0 0-.36 0l-22.62 13.5a.35.35 0 0 0 0 .6zm70.54-11.46a.34.34 0 0 0 0-.58L93.65 95.99a.34.34 0 0 0-.34 0l-19.13 11.43a.34.34 0 0 0 0 .58l22.49 13.53a.34.34 0 0 0 .34 0z"})}),D.jsx("g",{id:"SvgjsG3367",featurekey:"nameFeature-0",transform:"matrix(1.323802076884185,0,0,1.323802076884185,44.411437444615174,-15.88562366013418)",fill:"#DEDEDF",children:D.jsx("path",{d:"M4.92 40 l-3.72 -3.72 l0 -20.56 l3.72 -3.72 l8.8 0 l3.72 3.72 l0 5.24 l-5.04 0 l0 -3.16 l-0.76 -0.76 l-4.64 0 l-0.76 0.76 l0 16.4 l0.76 0.76 l4.64 0 l0.76 -0.76 l0 -3.16 l5.04 0 l0 5.24 l-3.72 3.72 l-8.8 0 z M22.73 40 l0 -4.48 l1.16 -0.76 l3.16 -8.76 l-3.16 -8.76 l-1.16 -0.76 l0 -4.48 l4.6 0 l3.52 9.68 l3.52 -9.68 l4.6 0 l0 4.48 l-1.16 0.76 l-3.16 8.76 l3.16 8.76 l1.16 0.76 l0 4.48 l-4.6 0 l-3.52 -9.68 l-3.52 9.68 l-4.6 0 z"})})]})}),D.jsx("center",{className:"text-slate-400 max-w-xs",children:"Real-time code collaboration center platform for modern development teams."})]}),D.jsxs("div",{children:[D.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Product"}),D.jsxs("ul",{className:"space-y-2",children:[D.jsx("li",{children:D.jsx("a",{href:"#features",className:"text-slate-400 hover:text-primary transition-colors",children:"Features"})}),D.jsx("li",{children:D.jsx("a",{href:"#demo",className:"text-slate-400 hover:text-primary transition-colors",children:"Demo"})}),D.jsx("li",{children:D.jsx("a",{href:"#",className:"text-slate-400 hover:text-primary transition-colors",children:"Pricing"})})]})]}),D.jsxs("div",{children:[D.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Company"}),D.jsxs("ul",{className:"space-y-2",children:[D.jsx("li",{children:D.jsx("a",{href:"#",className:"text-slate-400 hover:text-primary transition-colors",children:"About"})}),D.jsx("li",{children:D.jsx("a",{href:"#",className:"text-slate-400 hover:text-primary transition-colors",children:"Contact"})}),D.jsx("li",{children:D.jsx("a",{href:"#",className:"text-slate-400 hover:text-primary transition-colors",children:"Careers"})})]})]}),D.jsxs("div",{children:[D.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Connect"}),D.jsxs("div",{className:"flex space-x-4",children:[D.jsx("a",{href:"#",className:"text-slate-400 hover:text-primary transition-colors",children:D.jsx(fLe,{className:"h-6 w-6"})}),D.jsx("a",{href:"#",className:"text-slate-400 hover:text-primary transition-colors",children:D.jsx(RLe,{className:"h-6 w-6"})}),D.jsx("a",{href:"#",className:"text-slate-400 hover:text-primary transition-colors",children:D.jsx(LLe,{className:"h-6 w-6"})})]})]})]}),D.jsxs("div",{className:"mt-12 pt-8 border-t border-slate-800 flex flex-col md:flex-row justify-between items-center",children:[D.jsx("div",{className:"text-slate-500 text-sm mb-4 md:mb-0",children:" 2025 CollabX. All rights reserved."}),D.jsxs("div",{className:"flex space-x-6",children:[D.jsx("a",{href:"#",className:"text-slate-500 text-sm hover:text-primary transition-colors",children:"Privacy Policy"}),D.jsx("a",{href:"#",className:"text-slate-500 text-sm hover:text-primary transition-colors",children:"Terms of Use"})]})]})]})})}const ULe=()=>{const[i,e]=F.useState(!0),[t,n]=F.useState(""),[s,r]=F.useState(""),[o,a]=F.useState(""),[l,c]=F.useState(""),[u,d]=F.useState(!1),h=ku(),g=_y();F.useEffect(()=>{new URLSearchParams(h.search).get("signup")==="true"&&e(!1),console.log("AuthPage: Mounted at URL:",window.location.href);const k=ki.onAuthStateChanged(T=>{console.log("AuthPage: onAuthStateChanged fired, user:",T==null?void 0:T.uid,"loading:",u),T&&(console.log("AuthPage: User authenticated, redirecting to /dashboard",T.uid),g("/dashboard",{replace:!0}))});return()=>{console.log("AuthPage: Cleaning up onAuthStateChanged listener"),k()}},[h,g]);const p=x=>{switch(x){case"auth/email-already-in-use":return"Email already registered. Try logging in.";case"auth/invalid-email":return"Invalid email address.";case"auth/weak-password":return"Password must be at least 6 characters.";case"auth/user-not-found":return"No account found.";case"auth/wrong-password":return"Incorrect password.";case"auth/too-many-requests":return"Too many attempts. Try later.";case"auth/invalid-credential":return"Invalid credentials.";default:return"Something went wrong."}},_=async()=>{d(!0),a(""),c("");try{console.log("AuthPage: Initiating Google popup");const x=await hK(ki,poe);console.log("AuthPage: Google popup successful, user:",x.user.uid)}catch(x){console.error("AuthPage: Google popup error:",x),a(p(x.code)||"Google login failed.")}finally{console.log("AuthPage: Resetting loading state after Google auth"),d(!1)}},v=async()=>{d(!0),a(""),c("");try{console.log("AuthPage: Initiating GitHub popup");const x=await hK(ki,BTe);console.log("AuthPage: GitHub popup successful, user:",x.user.uid)}catch(x){console.error("AuthPage: GitHub popup error:",x),a(p(x.code)||"GitHub login failed.")}finally{console.log("AuthPage: Resetting loading state after GitHub auth"),d(!1)}},y=async x=>{x.preventDefault(),d(!0),a(""),c("");try{i?(console.log("AuthPage: Attempting email login"),await UCe(ki,t,s),console.log("AuthPage: Email login successful, user:",ki.currentUser.uid)):(console.log("AuthPage: Attempting email signup"),await HCe(ki,t,s),console.log("AuthPage: Email signup successful, user:",ki.currentUser.uid))}catch(k){console.error("AuthPage: Email auth error:",k),a(p(k.code))}finally{console.log("AuthPage: Resetting loading state after email auth"),d(!1)}},w=async x=>{if(x.preventDefault(),!t){a("Please enter your email first.");return}d(!0),a(""),c("");try{await WCe(ki,t),c("Password reset email sent!")}catch(k){console.error("AuthPage: Password reset error:",k),a(p(k.code))}finally{d(!1)}};return D.jsxs(D.Fragment,{children:[D.jsx("header",{className:"bg-white/100 backdrop-blur-md shadow-sm",children:D.jsx("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:D.jsx("div",{className:"text-[1.8rem] font-bold text-primary",children:D.jsxs("svg",{width:"215.39307556152343",height:"50.626132567226996",viewBox:"0 0 383.8999938964844 90.23211137541728",class:"looka-1j8o68f",children:[D.jsx("defs",{id:"SvgjsDefs4865"}),D.jsx("g",{id:"SvgjsG4866",featurekey:"symbolFeature-0",transform:"matrix(0.6898787855261039,0,0,0.6898787855261039,-13.310095387583845,-2.90760899534669)",fill:"#000000",children:D.jsx("path",{xmlns:"http://www.w3.org/2000/svg",d:"M96.63 57.12q11.83 7.36 23.98 14.42c4.75 2.76 4.29 5.89-.18 8.46q-3.3 1.89-6.48 3.64-.8.44-.02.91l6.97 4.19a4.64 4.63-74.5 0 1 2.24 3.97v17.42a4.2 4.2 0 0 1-2.05 3.61q-10.37 6.18-21.01 12.58c-2.5 1.51-3.82 1.71-6.39.13q-13.16-8.08-21.94-13.31a.63.63 0 0 0-.64 0l-23.23 13.88a4.18 4.15 45 0 1-4.27-.01l-21.55-12.96a3.87 3.86 15.6 0 1-1.87-3.31q.01-11.33-.01-17.49-.02-3.31 2.55-4.76 3.07-1.73 6.62-4.05a.31.31 0 0 0-.02-.53q-6.07-3.54-8.62-5.19-1.57-1.02-1.4-3.41c.15-1.92 1.7-2.78 3.31-3.74q9.73-5.76 23.85-14.27.46-.28.16-.73c-.49-.73-1.02-1.43-1.03-2.51q-.02-17.99.01-25.14a4.73 4.72 74.6 0 1 2.28-4.03q9.96-5.99 20.84-12.4 2.97-1.75 5.04-.52 15.95 9.45 20.69 12.07 3.17 1.74 3.2 4.7.1 12.03-.04 25.02-.01.82-1.17 2.58-.31.48.18.78m-25.56-12.7q.53-2.61 2.69-3.93 5.89-3.61 17.45-11.03a.31.31 0 0 0-.01-.53L72.17 17.49a.79.79 0 0 0-.82 0L52.33 28.85a1.95 1.95 0 0 0-.94 1.67v22.29a2.23 2.22 15.7 0 0 1.07 1.9l18.03 10.84a.36.35-74.5 0 0 .54-.31l.02-20.56a1.77 1.64-42.8 0 1 .02-.26m26.42 28.32c2.06 1.44 2.23 4.4-.02 5.75Q79.09 89.54 73.35 92.96a3.74 3.72 44.9 0 1-3.83-.01Q59.11 86.71 47.76 79.7c-1.31-.81-2.87-1.56-3.41-2.97-.87-2.26.63-3.76 2.48-4.89q5.13-3.1 11.23-6.78a.16.16 0 0 0 0-.27l-6.3-3.78q-.24-.15-.48 0L27.46 75.24a.47.47 0 0 0-.01.81l43.38 26.09a1.14 1.12 44.6 0 0 1.15 0l43.89-26.22a.3.3 0 0 0 0-.52L91.29 60.62q-.17-.11-.34 0l-6.4 3.82a.18.17 44 0 0 .01.3q8.83 5.14 12.93 8m-32 11.01q0 .18.08.23 2.9 1.66 5.73 3.44.01.01.14.02.06.01.12.01t.12-.01q.13-.01.14-.02 2.83-1.78 5.73-3.44.07-.05.07-.23t-.07-.23q-2.9-1.66-5.73-3.44-.01-.01-.14-.02-.06-.01-.12-.01t-.12.01q-.13.01-.14.02-2.83 1.78-5.73 3.44-.08.05-.08.23M45.6 121.56a.35.35 0 0 0 .36 0l22.62-13.51a.35.35 0 0 0 0-.6l-19.1-11.48a.35.35 0 0 0-.36 0l-22.62 13.5a.35.35 0 0 0 0 .6zm70.54-11.46a.34.34 0 0 0 0-.58L93.65 95.99a.34.34 0 0 0-.34 0l-19.13 11.43a.34.34 0 0 0 0 .58l22.49 13.53a.34.34 0 0 0 .34 0z"})}),D.jsxs("g",{id:"SvgjsG4867",featurekey:"textGroupContainer",transform:"matrix(1,0,0,1,92,4)",fill:"#000000",children:[D.jsx("rect",{xmlns:"http://www.w3.org/2000/svg",y:"0",x:"0",height:"1",width:"1",opacity:"0"}),D.jsx("rect",{xmlns:"http://www.w3.org/2000/svg",y:"80.88",x:"0",width:"28",height:"2"}),D.jsx("rect",{xmlns:"http://www.w3.org/2000/svg",y:"80.88",x:"263.9",width:"28",height:"2"})]}),D.jsx("g",{id:"SvgjsG4868",featurekey:"nameFeature-0",transform:"matrix(2.189502365161019,0,0,2.189502365161019,96.37259705740317,-26.274026293860054)",fill:"#000000",children:D.jsx("path",{d:"M4.92 40 l-3.72 -3.72 l0 -20.56 l3.72 -3.72 l8.8 0 l3.72 3.72 l0 5.24 l-5.04 0 l0 -3.16 l-0.76 -0.76 l-4.64 0 l-0.76 0.76 l0 16.4 l0.76 0.76 l4.64 0 l0.76 -0.76 l0 -3.16 l5.04 0 l0 5.24 l-3.72 3.72 l-8.8 0 z M24.137999999999998 40 l-3.72 -3.72 l0 -20.56 l3.72 -3.72 l9.08 0 l3.72 3.72 l0 20.56 l-3.72 3.72 l-9.08 0 z M26.218 34.96 l4.92 0 l0.76 -0.76 l0 -16.4 l-0.76 -0.76 l-4.92 0 l-0.76 0.76 l0 16.4 z M39.916000000000004 40 l0 -4.48 l0.84 -0.56 l0 -17.92 l-0.84 -0.56 l0 -4.48 l6.72 0 l0 4.48 l-0.84 0.56 l0 17.92 l2.8 0 l0.56 -0.84 l4.48 0 l0 5.88 l-13.72 0 z M56.614000000000004 40 l0 -4.48 l0.84 -0.56 l0 -17.92 l-0.84 -0.56 l0 -4.48 l6.72 0 l0 4.48 l-0.84 0.56 l0 17.92 l2.8 0 l0.56 -0.84 l4.48 0 l0 5.88 l-13.72 0 z M72.512 40 l0 -4.48 l0.84 -0.56 l3.64 -17.92 l-0.84 -0.56 l0 -4.48 l10.64 0 l0 4.48 l-0.84 0.56 l3.64 17.92 l0.84 0.56 l0 4.48 l-4.96 0 l-1.24 -6.16 l-5.52 0 l-1.24 6.16 l-4.96 0 z M79.752 28.8 l3.44 0 l-1.72 -8.56 z M92.61 40 l0 -4.48 l0.84 -0.56 l0 -17.92 l-0.84 -0.56 l0 -4.48 l12.52 0 l3.72 3.72 l0 8.24 l-2.04 2.04 l2.04 2.04 l0 8.24 l-3.72 3.72 l-12.52 0 z M98.49 34.96 l4.56 0 l0.76 -0.76 l0 -4.08 l-1.6 -1.6 l-3.72 0 l0 6.44 z M98.49 23.48 l3.72 0 l1.6 -1.6 l0 -4.08 l-0.76 -0.76 l-4.56 0 l0 6.44 z M111.828 40 l0 -4.48 l1.16 -0.76 l3.16 -8.76 l-3.16 -8.76 l-1.16 -0.76 l0 -4.48 l4.6 0 l3.52 9.68 l3.52 -9.68 l4.6 0 l0 4.48 l-1.16 0.76 l-3.16 8.76 l3.16 8.76 l1.16 0.76 l0 4.48 l-4.6 0 l-3.52 -9.68 l-3.52 9.68 l-4.6 0 z"})}),D.jsx("g",{id:"SvgjsG4869",featurekey:"sloganFeature-0",transform:"matrix(0.7101623092992436,0,0,0.7101623092992436,126.28983769070075,75.94364511632456)",fill:"#000000",children:D.jsx("path",{d:"M1.26 20 c-0.16 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.1 -0.26 0.26 -0.26 l4.88 0 c1.52 0 2.72 0.38 3.56 1.16 c1.24 1.12 1.66 3.24 1.06 4.8 c-0.22 0.56 -0.6 1.08 -1.08 1.46 c-0.28 0.22 -0.58 0.38 -0.88 0.54 c0.86 1.36 2.16 4.12 2.16 4.12 c0.02 0.04 0.06 0.1 0.06 0.16 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.96 0 c-0.08 0 -0.18 -0.06 -0.22 -0.14 l-1.74 -3.82 c-0.62 0.04 -1.1 0.02 -1.74 0.02 l0 3.68 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.58 0 z M4.1 13.280000000000001 c0 0 2.52 0.28 3.4 -0.3 c0.34 -0.22 0.54 -0.76 0.54 -1.16 c-0.02 -0.44 -0.24 -0.9 -0.6 -1.18 c-0.38 -0.32 -1.32 -0.42 -1.8 -0.42 l-1.54 0.04 l0 3.02 z M14.1455 20 l0 -11.98 c0 -0.5 0.1 -0.6 0.26 -0.6 l8.76 0 c0.14 0 0.26 0.1 0.26 0.24 l0 2.26 c0 0.14 -0.12 0.26 -0.26 0.26 l-5.92 0 l0 2.08 l3.74 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-3.74 0 l0 2.14 l5.9 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-8.74 0 z M26.791 20 c-0.08 0 -0.16 -0.04 -0.2 -0.12 c-0.06 -0.06 -0.06 -0.16 -0.04 -0.24 l4.66 -11.98 c0.04 -0.1 0.14 -0.16 0.24 -0.16 l2.68 0 c0.1 0 0.2 0.06 0.24 0.16 l4.58 11.98 c0.02 0.08 0.02 0.16 -0.04 0.24 c-0.04 0.08 -0.12 0.12 -0.2 0.12 l-2.78 0 c-0.1 0 -0.2 -0.06 -0.24 -0.16 l-0.74 -1.84 l-4.5 0.02 l-0.74 1.82 c-0.04 0.1 -0.14 0.16 -0.24 0.16 l-2.68 0 z M31.271 15.5 l2.88 0 l-1.44 -4.24 z M42.1365 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.6 0 c0.14 0 0.26 0.12 0.26 0.26 l0 9.36 l4.5 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.36 c0 0.14 -0.12 0.26 -0.26 0.26 l-7.36 0 z M62.6075 20 c-0.14 0 -0.24 -0.12 -0.24 -0.26 l0 -9.44 l-2.74 0 c-0.14 0 -0.26 -0.1 -0.26 -0.24 l0 -2.3 c0 -0.14 0.12 -0.26 0.26 -0.26 l8.58 0 c0.16 0 0.26 0.12 0.26 0.26 l0 2.3 c0 0.14 -0.1 0.24 -0.26 0.24 l-2.74 0 l0 9.44 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.6 0 z M71.833 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.6 0 c0.14 0 0.26 0.12 0.26 0.26 l0 11.98 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.6 0 z M78.0585 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.88 0 c0.1 0 0.2 0.06 0.24 0.14 l3 7.4 l2.98 -7.4 c0.04 -0.08 0.14 -0.14 0.24 -0.14 l2.88 0 c0.14 0 0.26 0.12 0.26 0.26 l0 11.98 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.34 0 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -6.44 l-2.44 6.2 c-0.04 0.08 -0.14 0.14 -0.22 0.14 l-1.68 0 c-0.1 0 -0.2 -0.06 -0.24 -0.14 l-2.46 -6.2 l0 6.44 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.32 0 z M93.64399999999999 20 l0 -11.98 c0 -0.5 0.1 -0.6 0.26 -0.6 l8.76 0 c0.14 0 0.26 0.1 0.26 0.24 l0 2.26 c0 0.14 -0.12 0.26 -0.26 0.26 l-5.92 0 l0 2.08 l3.74 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-3.74 0 l0 2.14 l5.9 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-8.74 0 c-0.16 0 -0.26 -0.12 -0.26 0.08 z M118.83499999999998 20 c-1.18 0 -2.26 -0.28 -3.22 -0.84 c-0.96 -0.58 -1.72 -1.36 -2.26 -2.34 s-0.82 -2.08 -0.82 -3.3 c0 -1.18 0.28 -2.28 0.84 -3.26 c0.56 -0.96 1.34 -1.74 2.3 -2.3 c0.98 -0.56 2.08 -0.84 3.24 -0.84 c0.88 0 1.74 0.2 2.58 0.56 c0.84 0.38 1.56 0.88 2.16 1.52 c0.08 0.1 0.08 0.24 0 0.34 l-1.9 1.56 c-0.06 0.06 -0.12 0.1 -0.2 0.1 s-0.16 -0.04 -0.2 -0.1 c-1.02 -1.24 -2.66 -1.5 -4.04 -0.64 c-1.2 0.74 -1.64 2.1 -1.58 3.46 c0.06 1.38 1.06 2.56 2.38 2.96 c1.2 0.36 2.38 0.08 3.24 -0.84 c0.06 -0.04 0.12 -0.08 0.2 -0.06 c0.08 0 0.14 0.02 0.18 0.08 l1.94 1.36 c0.08 0.1 0.08 0.24 0 0.34 c-0.64 0.68 -1.4 1.24 -2.24 1.64 c-0.86 0.4 -1.74 0.6 -2.6 0.6 z M133.2805 20 c-1.2 0 -2.3 -0.28 -3.26 -0.84 c-0.98 -0.56 -1.76 -1.36 -2.34 -2.32 c-0.56 -0.98 -0.84 -2.1 -0.84 -3.3 c0 -1.18 0.28 -2.28 0.84 -3.26 c0.58 -0.98 1.34 -1.76 2.32 -2.32 s2.08 -0.84 3.28 -0.84 c1.18 0 2.28 0.28 3.26 0.84 s1.76 1.34 2.32 2.32 c0.58 0.98 0.86 2.08 0.86 3.26 c0 1.2 -0.28 2.3 -0.86 3.28 c-0.56 0.98 -1.34 1.76 -2.32 2.34 c-0.98 0.56 -2.08 0.84 -3.26 0.84 z M133.32049999999998 17.12 c0.58 0 1.12 -0.16 1.6 -0.46 c0.5 -0.32 0.9 -0.74 1.18 -1.3 c0.3 -0.54 0.44 -1.16 0.44 -1.82 c0 -0.64 -0.14 -1.26 -0.44 -1.8 c-0.28 -0.54 -0.68 -0.96 -1.18 -1.28 c-0.48 -0.3 -1.02 -0.46 -1.6 -0.46 c-0.6 0 -1.14 0.16 -1.64 0.46 c-0.52 0.32 -0.92 0.74 -1.22 1.28 c-0.3 0.56 -0.44 1.16 -0.44 1.8 c0 0.66 0.14 1.28 0.44 1.82 c0.32 0.54 0.72 0.98 1.22 1.28 c0.5 0.32 1.04 0.48 1.64 0.48 z M143.08599999999996 20 c-0.16 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.1 -0.26 0.26 -0.26 l4.54 0 c1.2 0 2.3 0.26 3.26 0.8 c0.96 0.52 1.7 1.26 2.24 2.22 c0.52 0.94 0.8 2.02 0.8 3.22 c0 1.22 -0.28 2.3 -0.82 3.24 c-0.54 0.96 -1.3 1.7 -2.28 2.22 c-0.96 0.54 -2.08 0.8 -3.3 0.8 l-4.44 0 z M145.92599999999996 17.2 l1.76 0 c0.58 0 1.12 -0.14 1.58 -0.42 c0.46 -0.3 0.84 -0.7 1.1 -1.22 s0.4 -1.12 0.4 -1.8 c0 -0.66 -0.14 -1.28 -0.42 -1.8 c-0.28 -0.54 -0.66 -0.94 -1.14 -1.24 c-0.48 -0.28 -1.04 -0.44 -1.64 -0.44 l-1.64 0 l0 6.92 z M157.29149999999996 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.6 0 c0.14 0 0.26 0.12 0.26 0.26 l0 11.98 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.6 0 z M163.51699999999997 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.36 0 c0.08 0 0.16 0.04 0.22 0.1 l4.6 7.1 l0 -6.94 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.46 0 c0.14 0 0.26 0.12 0.26 0.26 l0 11.98 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.36 0 c-0.08 0 -0.16 -0.04 -0.22 -0.1 l-4.58 -7.06 l0 6.9 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.48 0 z M183.16249999999997 20 c-1.18 0 -2.28 -0.28 -3.24 -0.84 c-0.98 -0.58 -1.74 -1.36 -2.3 -2.32 c-0.56 -0.98 -0.84 -2.1 -0.84 -3.3 s0.28 -2.3 0.86 -3.26 c0.56 -0.98 1.36 -1.76 2.34 -2.32 c1 -0.56 2.12 -0.84 3.34 -0.84 c0.88 0 1.74 0.16 2.6 0.5 c0.84 0.32 1.58 0.78 2.18 1.36 c0.1 0.08 0.12 0.22 0.04 0.34 l-1.46 1.92 c-0.06 0.06 -0.12 0.1 -0.2 0.12 c-0.06 0 -0.14 -0.04 -0.2 -0.08 c-0.4 -0.4 -0.86 -0.72 -1.4 -0.94 c-0.52 -0.22 -1.04 -0.34 -1.56 -0.34 c-0.62 0 -1.2 0.16 -1.7 0.46 c-0.52 0.32 -0.92 0.74 -1.22 1.28 s-0.44 1.14 -0.44 1.8 s0.14 1.28 0.44 1.82 s0.72 0.98 1.22 1.3 c0.52 0.3 1.1 0.46 1.7 0.46 c0.32 0 0.66 -0.06 1.04 -0.16 c0.32 -0.1 0.66 -0.24 0.96 -0.4 l0 -0.92 l-1.38 0 c-0.08 0 -0.14 -0.02 -0.18 -0.08 c-0.06 -0.04 -0.08 -0.1 -0.08 -0.18 l0.02 -2.24 c0 -0.14 0.12 -0.26 0.26 -0.26 l3.88 0 c0.14 0 0.26 0.12 0.26 0.26 l0 5.02 c0 0.08 -0.04 0.16 -0.12 0.22 c-0.62 0.48 -1.38 0.88 -2.26 1.16 c-0.88 0.3 -1.74 0.46 -2.56 0.46 z M203.0135 20 c-1.08 0 -1.86 -0.22 -2.68 -0.66 c-0.8 -0.44 -1.44 -1.06 -1.88 -1.88 c-0.44 -0.8 -0.66 -1.76 -0.66 -2.86 l0 -7.04 c0 -0.14 0.12 -0.24 0.26 -0.24 l2.6 0 c0.14 0 0.24 0.1 0.24 0.24 l0 7.04 c0 0.8 0.22 1.42 0.64 1.86 s0.8 0.66 1.5 0.66 s1.06 -0.22 1.46 -0.64 c0.4 -0.44 0.6 -1.08 0.6 -1.88 l0 -7.04 c0 -0.14 0.12 -0.24 0.26 -0.24 l2.6 0 c0.14 0 0.26 0.1 0.26 0.24 l0 7.04 c0 1.1 -0.22 2.06 -0.66 2.86 c-0.42 0.82 -1.06 1.44 -1.86 1.88 s-1.6 0.66 -2.68 0.66 z M211.57899999999998 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.36 0 c0.08 0 0.16 0.04 0.22 0.1 l4.6 7.1 l0 -6.94 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.46 0 c0.14 0 0.26 0.12 0.26 0.26 l0 11.98 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.36 0 c-0.08 0 -0.16 -0.04 -0.22 -0.1 l-4.58 -7.06 l0 6.9 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.48 0 z M225.10449999999997 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.6 0 c0.14 0 0.26 0.12 0.26 0.26 l0 9.36 l4.5 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.36 c0 0.14 -0.12 0.26 -0.26 0.26 l-7.36 0 z M235.82999999999998 20 l0 -11.98 c0 -0.5 0.1 -0.6 0.26 -0.6 l8.76 0 c0.14 0 0.26 0.1 0.26 0.24 l0 2.26 c0 0.14 -0.12 0.26 -0.26 0.26 l-5.92 0 l0 2.08 l3.74 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-3.74 0 l0 2.14 l5.9 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-8.74 0 c-0.16 0 -0.26 -0.12 -0.26 0.08 z M248.47549999999998 20 c-0.08 0 -0.16 -0.04 -0.2 -0.12 c-0.06 -0.06 -0.06 -0.16 -0.04 -0.24 l4.66 -11.98 c0.04 -0.1 0.14 -0.16 0.24 -0.16 l2.68 0 c0.1 0 0.2 0.06 0.24 0.16 l4.58 11.98 c0.02 0.08 0.02 0.16 -0.04 0.24 c-0.04 0.08 -0.12 0.12 -0.2 0.12 l-2.78 0 c-0.1 0 -0.2 -0.06 -0.24 -0.16 l-0.74 -1.84 l-4.5 0.02 l-0.74 1.82 c-0.04 0.1 -0.14 0.16 -0.24 0.16 l-2.68 0 z M252.9555 15.5 l2.88 0 l-1.44 -4.24 z M268.70099999999996 20.12 c-0.96 0 -1.92 -0.18 -2.84 -0.54 c-0.92 -0.34 -1.74 -0.84 -2.42 -1.44 c-0.08 -0.08 -0.1 -0.2 -0.06 -0.3 l0.7 -2.38 c0.04 -0.08 0.1 -0.14 0.18 -0.14 c0.08 -0.02 0.16 0 0.22 0.06 c1.06 1 2.26 1.9 3.76 1.98 c0.4 0.02 0.84 0.04 1.22 -0.08 c1.18 -0.38 0.68 -1.58 -0.2 -1.94 c-0.3 -0.12 -0.72 -0.26 -1.26 -0.42 c-0.8 -0.22 -1.46 -0.46 -1.96 -0.7 c-0.54 -0.24 -1 -0.62 -1.4 -1.12 c-0.38 -0.52 -0.58 -1.2 -0.58 -2.02 c0 -0.78 0.2 -1.46 0.6 -2.04 s0.96 -1.04 1.66 -1.34 s1.52 -0.46 2.44 -0.46 c0.82 0 1.62 0.12 2.42 0.38 c0.78 0.24 1.48 0.58 2.1 0.98 c0.1 0.08 0.14 0.2 0.08 0.32 l-0.66 2.24 c-0.02 0.08 -0.08 0.12 -0.16 0.14 c-0.06 0.02 -0.14 0.02 -0.2 -0.02 c-0.9 -0.56 -1.8 -1.24 -2.86 -1.38 c-0.7 -0.1 -1.76 -0.06 -2 0.78 c-0.3 1.08 1.28 1.36 2 1.58 c0.8 0.24 1.46 0.48 1.98 0.72 c0.54 0.26 1.02 0.66 1.4 1.16 c0.4 0.52 0.6 1.22 0.6 2.06 c0 0.82 -0.22 1.52 -0.64 2.12 c-0.4 0.6 -0.98 1.04 -1.7 1.36 c-0.72 0.28 -1.52 0.44 -2.42 0.44 z M276.82649999999995 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.6 0 c0.14 0 0.26 0.12 0.26 0.26 l0 4.92 l4.52 0 l0 -4.92 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.6 0 c0.14 0 0.26 0.12 0.26 0.26 l0 11.98 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.6 0 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -4.3 l-4.52 0 l0 4.3 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.6 0 z M290.43199999999996 20 l0 -11.98 c0 -0.5 0.1 -0.6 0.26 -0.6 l8.76 0 c0.14 0 0.26 0.1 0.26 0.24 l0 2.26 c0 0.14 -0.12 0.26 -0.26 0.26 l-5.92 0 l0 2.08 l3.74 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-3.74 0 l0 2.14 l5.9 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-8.74 0 c-0.16 0 -0.26 -0.12 -0.26 0.08 z M303.07749999999993 20 c-0.16 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.1 -0.26 0.26 -0.26 l4.54 0 c1.2 0 2.3 0.26 3.26 0.8 c0.96 0.52 1.7 1.26 2.24 2.22 c0.52 0.94 0.8 2.02 0.8 3.22 c0 1.22 -0.28 2.3 -0.82 3.24 c-0.54 0.96 -1.3 1.7 -2.28 2.22 c-0.96 0.54 -2.08 0.8 -3.3 0.8 l-4.44 0 z M305.91749999999996 17.2 l1.76 0 c0.58 0 1.12 -0.14 1.58 -0.42 c0.46 -0.3 0.84 -0.7 1.1 -1.22 s0.4 -1.12 0.4 -1.8 c0 -0.66 -0.14 -1.28 -0.42 -1.8 c-0.28 -0.54 -0.66 -0.94 -1.14 -1.24 c-0.48 -0.28 -1.04 -0.44 -1.64 -0.44 l-1.64 0 l0 6.92 z"})})]})})})}),D.jsx("div",{className:"card-container min-h-screen bg-gray-100",children:D.jsx("div",{className:"flex flex-col items-center mb-20",children:D.jsx("div",{className:"flex-grow flex justify-center items-center pt-20",children:D.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg w-full max-w-md text-center min-h-[72vh]",children:[D.jsxs("div",{className:"flex bg-gray-200 rounded-lg overflow-hidden mb-6",children:[D.jsx("button",{className:`flex-1 py-2 text-lg font-semibold transition-colors ${i?"bg-[#0B2273] text-white":"text-gray-600"}`,onClick:()=>e(!0),disabled:u,children:"Login"}),D.jsx("button",{className:`flex-1 py-2 text-lg font-semibold transition-colors ${i?"text-gray-600":"bg-[#0B2273] text-white"}`,onClick:()=>setIsLogin(!1),disabled:u,children:"Signup"})]}),D.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:i?"Login to Your Account":"Create a New Account"}),D.jsxs("button",{className:"flex items-center justify-center w-full py-2 border rounded-lg bg-white text-gray-700 mb-2 hover:bg-gray-100",onClick:_,disabled:u,children:[D.jsx("img",{src:"https://www.google.com/favicon.ico",alt:"Google",className:"w-5 mr-3"}),"Continue with Google"]}),D.jsxs("button",{className:"flex items-center justify-center w-full py-2 border rounded-lg bg-white text-gray-700 hover:bg-gray-100",onClick:v,disabled:u,children:[D.jsx("img",{src:"https://github.com/favicon.ico",alt:"GitHub",className:"w-5 mr-3"}),"Continue with GitHub"]}),D.jsxs("div",{className:"relative text-gray-600 text-sm my-4",children:[D.jsx("span",{className:"bg-white px-2 relative z-10",children:"or"}),D.jsx("div",{className:"absolute top-1/2 left-0 w-full h-px bg-gray-300"})]}),D.jsxs("form",{className:"space-y-3",onSubmit:y,children:[D.jsx("input",{type:"email",placeholder:"Email",value:t,onChange:x=>n(x.target.value),required:!0,disabled:u,className:"w-full p-2 border rounded-lg bg-gray-50 focus:border-blue-500 outline-none"}),D.jsx("input",{type:"password",placeholder:"Password",value:s,onChange:x=>r(x.target.value),required:!0,disabled:u,className:"w-full p-2 border rounded-lg bg-gray-50 focus:border-blue-500 outline-none"}),D.jsx("button",{type:"submit",disabled:u,className:"w-full py-2 bg-[#0B2273] text-white rounded-lg font-semibold hover:bg-white hover:text-black transition-colors duration-200 hover:border-black border-2 border-transparent",children:u?"Processing...":i?"Login":"Signup"})]}),i&&D.jsx("div",{className:"text-sm text-black mt-3",children:D.jsx("a",{href:"#",onClick:w,className:"hover:underline",children:"Forgot Password?"})}),o&&D.jsx("p",{className:"text-red-500 text-sm mt-4",children:o}),l&&D.jsx("p",{className:"text-green-500 text-sm mt-4",children:l})]})})})}),D.jsx(Toe,{})]})};/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function zLe(i,e,t){return(e=$Le(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function RG(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function Ge(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?RG(Object(t),!0).forEach(function(n){zLe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):RG(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function jLe(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function $Le(i){var e=jLe(i,"string");return typeof e=="symbol"?e:e+""}const AG=()=>{};let gW={},Loe={},Ioe=null,Doe={mark:AG,measure:AG};try{typeof window<"u"&&(gW=window),typeof document<"u"&&(Loe=document),typeof MutationObserver<"u"&&(Ioe=MutationObserver),typeof performance<"u"&&(Doe=performance)}catch{}const{userAgent:PG=""}=gW.navigator||{},pm=gW,as=Loe,MG=Ioe,bE=Doe;pm.document;const Lf=!!as.documentElement&&!!as.head&&typeof as.addEventListener=="function"&&typeof as.createElement=="function",Noe=~PG.indexOf("MSIE")||~PG.indexOf("Trident/");var qLe=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,KLe=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,Roe={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},GLe={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},Aoe=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],na="classic",t4="duotone",YLe="sharp",QLe="sharp-duotone",Poe=[na,t4,YLe,QLe],XLe={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},ZLe={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},JLe=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),eIe={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},tIe=["fak","fa-kit","fakd","fa-kit-duotone"],OG={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},nIe=["kit"],iIe={kit:{"fa-kit":"fak"}},sIe=["fak","fakd"],rIe={kit:{fak:"fa-kit"}},FG={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},yE={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},oIe=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],aIe=["fak","fa-kit","fakd","fa-kit-duotone"],lIe={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},cIe={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},uIe={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},U5={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},dIe=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],z5=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...oIe,...dIe],hIe=["solid","regular","light","thin","duotone","brands"],Moe=[1,2,3,4,5,6,7,8,9,10],fIe=Moe.concat([11,12,13,14,15,16,17,18,19,20]),gIe=[...Object.keys(uIe),...hIe,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",yE.GROUP,yE.SWAP_OPACITY,yE.PRIMARY,yE.SECONDARY].concat(Moe.map(i=>"".concat(i,"x"))).concat(fIe.map(i=>"w-".concat(i))),mIe={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const ff="___FONT_AWESOME___",j5=16,Ooe="fa",Foe="svg-inline--fa",H0="data-fa-i2svg",$5="data-fa-pseudo-element",pIe="data-fa-pseudo-element-pending",mW="data-prefix",pW="data-icon",BG="fontawesome-i2svg",_Ie="async",vIe=["HTML","HEAD","STYLE","SCRIPT"],Boe=(()=>{try{return!0}catch{return!1}})();function b2(i){return new Proxy(i,{get(e,t){return t in e?e[t]:e[na]}})}const Voe=Ge({},Roe);Voe[na]=Ge(Ge(Ge(Ge({},{"fa-duotone":"duotone"}),Roe[na]),OG.kit),OG["kit-duotone"]);const bIe=b2(Voe),q5=Ge({},eIe);q5[na]=Ge(Ge(Ge(Ge({},{duotone:"fad"}),q5[na]),FG.kit),FG["kit-duotone"]);const VG=b2(q5),K5=Ge({},U5);K5[na]=Ge(Ge({},K5[na]),rIe.kit);const _W=b2(K5),G5=Ge({},cIe);G5[na]=Ge(Ge({},G5[na]),iIe.kit);b2(G5);const yIe=qLe,Woe="fa-layers-text",wIe=KLe,CIe=Ge({},XLe);b2(CIe);const SIe=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],BM=GLe,kIe=[...nIe,...gIe],PC=pm.FontAwesomeConfig||{};function xIe(i){var e=as.querySelector("script["+i+"]");if(e)return e.getAttribute(i)}function EIe(i){return i===""?!0:i==="false"?!1:i==="true"?!0:i}as&&typeof as.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[t,n]=e;const s=EIe(xIe(t));s!=null&&(PC[n]=s)});const Hoe={styleDefault:"solid",familyDefault:na,cssPrefix:Ooe,replacementClass:Foe,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};PC.familyPrefix&&(PC.cssPrefix=PC.familyPrefix);const Rb=Ge(Ge({},Hoe),PC);Rb.autoReplaceSvg||(Rb.observeMutations=!1);const Bt={};Object.keys(Hoe).forEach(i=>{Object.defineProperty(Bt,i,{enumerable:!0,set:function(e){Rb[i]=e,MC.forEach(t=>t(Bt))},get:function(){return Rb[i]}})});Object.defineProperty(Bt,"familyPrefix",{enumerable:!0,set:function(i){Rb.cssPrefix=i,MC.forEach(e=>e(Bt))},get:function(){return Rb.cssPrefix}});pm.FontAwesomeConfig=Bt;const MC=[];function TIe(i){return MC.push(i),()=>{MC.splice(MC.indexOf(i),1)}}const ag=j5,gd={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function LIe(i){if(!i||!Lf)return;const e=as.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=i;const t=as.head.childNodes;let n=null;for(let s=t.length-1;s>-1;s--){const r=t[s],o=(r.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(n=r)}return as.head.insertBefore(e,n),i}const IIe="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function XS(){let i=12,e="";for(;i-- >0;)e+=IIe[Math.random()*62|0];return e}function Ty(i){const e=[];for(let t=(i||[]).length>>>0;t--;)e[t]=i[t];return e}function vW(i){return i.classList?Ty(i.classList):(i.getAttribute("class")||"").split(" ").filter(e=>e)}function Uoe(i){return"".concat(i).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function DIe(i){return Object.keys(i||{}).reduce((e,t)=>e+"".concat(t,'="').concat(Uoe(i[t]),'" '),"").trim()}function n4(i){return Object.keys(i||{}).reduce((e,t)=>e+"".concat(t,": ").concat(i[t].trim(),";"),"")}function bW(i){return i.size!==gd.size||i.x!==gd.x||i.y!==gd.y||i.rotate!==gd.rotate||i.flipX||i.flipY}function NIe(i){let{transform:e,containerWidth:t,iconWidth:n}=i;const s={transform:"translate(".concat(t/2," 256)")},r="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(r," ").concat(o," ").concat(a)},c={transform:"translate(".concat(n/2*-1," -256)")};return{outer:s,inner:l,path:c}}function RIe(i){let{transform:e,width:t=j5,height:n=j5,startCentered:s=!1}=i,r="";return s&&Noe?r+="translate(".concat(e.x/ag-t/2,"em, ").concat(e.y/ag-n/2,"em) "):s?r+="translate(calc(-50% + ".concat(e.x/ag,"em), calc(-50% + ").concat(e.y/ag,"em)) "):r+="translate(".concat(e.x/ag,"em, ").concat(e.y/ag,"em) "),r+="scale(".concat(e.size/ag*(e.flipX?-1:1),", ").concat(e.size/ag*(e.flipY?-1:1),") "),r+="rotate(".concat(e.rotate,"deg) "),r}var AIe=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function zoe(){const i=Ooe,e=Foe,t=Bt.cssPrefix,n=Bt.replacementClass;let s=AIe;if(t!==i||n!==e){const r=new RegExp("\\.".concat(i,"\\-"),"g"),o=new RegExp("\\--".concat(i,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");s=s.replace(r,".".concat(t,"-")).replace(o,"--".concat(t,"-")).replace(a,".".concat(n))}return s}let WG=!1;function VM(){Bt.autoAddCss&&!WG&&(LIe(zoe()),WG=!0)}var PIe={mixout(){return{dom:{css:zoe,insertCss:VM}}},hooks(){return{beforeDOMElementCreation(){VM()},beforeI2svg(){VM()}}}};const gf=pm||{};gf[ff]||(gf[ff]={});gf[ff].styles||(gf[ff].styles={});gf[ff].hooks||(gf[ff].hooks={});gf[ff].shims||(gf[ff].shims=[]);var md=gf[ff];const joe=[],$oe=function(){as.removeEventListener("DOMContentLoaded",$oe),fI=1,joe.map(i=>i())};let fI=!1;Lf&&(fI=(as.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(as.readyState),fI||as.addEventListener("DOMContentLoaded",$oe));function MIe(i){Lf&&(fI?setTimeout(i,0):joe.push(i))}function y2(i){const{tag:e,attributes:t={},children:n=[]}=i;return typeof i=="string"?Uoe(i):"<".concat(e," ").concat(DIe(t),">").concat(n.map(y2).join(""),"</").concat(e,">")}function HG(i,e,t){if(i&&i[e]&&i[e][t])return{prefix:e,iconName:t,icon:i[e][t]}}var WM=function(e,t,n,s){var r=Object.keys(e),o=r.length,a=t,l,c,u;for(n===void 0?(l=1,u=e[r[0]]):(l=0,u=n);l<o;l++)c=r[l],u=a(u,e[c],c,e);return u};function OIe(i){const e=[];let t=0;const n=i.length;for(;t<n;){const s=i.charCodeAt(t++);if(s>=55296&&s<=56319&&t<n){const r=i.charCodeAt(t++);(r&64512)==56320?e.push(((s&1023)<<10)+(r&1023)+65536):(e.push(s),t--)}else e.push(s)}return e}function Y5(i){const e=OIe(i);return e.length===1?e[0].toString(16):null}function FIe(i,e){const t=i.length;let n=i.charCodeAt(e),s;return n>=55296&&n<=56319&&t>e+1&&(s=i.charCodeAt(e+1),s>=56320&&s<=57343)?(n-55296)*1024+s-56320+65536:n}function UG(i){return Object.keys(i).reduce((e,t)=>{const n=i[t];return!!n.icon?e[n.iconName]=n.icon:e[t]=n,e},{})}function Q5(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:n=!1}=t,s=UG(e);typeof md.hooks.addPack=="function"&&!n?md.hooks.addPack(i,UG(e)):md.styles[i]=Ge(Ge({},md.styles[i]||{}),s),i==="fas"&&Q5("fa",e)}const{styles:ZS,shims:BIe}=md,qoe=Object.keys(_W),VIe=qoe.reduce((i,e)=>(i[e]=Object.keys(_W[e]),i),{});let yW=null,Koe={},Goe={},Yoe={},Qoe={},Xoe={};function WIe(i){return~kIe.indexOf(i)}function HIe(i,e){const t=e.split("-"),n=t[0],s=t.slice(1).join("-");return n===i&&s!==""&&!WIe(s)?s:null}const Zoe=()=>{const i=n=>WM(ZS,(s,r,o)=>(s[o]=WM(r,n,{}),s),{});Koe=i((n,s,r)=>(s[3]&&(n[s[3]]=r),s[2]&&s[2].filter(a=>typeof a=="number").forEach(a=>{n[a.toString(16)]=r}),n)),Goe=i((n,s,r)=>(n[r]=r,s[2]&&s[2].filter(a=>typeof a=="string").forEach(a=>{n[a]=r}),n)),Xoe=i((n,s,r)=>{const o=s[2];return n[r]=r,o.forEach(a=>{n[a]=r}),n});const e="far"in ZS||Bt.autoFetchSvg,t=WM(BIe,(n,s)=>{const r=s[0];let o=s[1];const a=s[2];return o==="far"&&!e&&(o="fas"),typeof r=="string"&&(n.names[r]={prefix:o,iconName:a}),typeof r=="number"&&(n.unicodes[r.toString(16)]={prefix:o,iconName:a}),n},{names:{},unicodes:{}});Yoe=t.names,Qoe=t.unicodes,yW=i4(Bt.styleDefault,{family:Bt.familyDefault})};TIe(i=>{yW=i4(i.styleDefault,{family:Bt.familyDefault})});Zoe();function wW(i,e){return(Koe[i]||{})[e]}function UIe(i,e){return(Goe[i]||{})[e]}function t0(i,e){return(Xoe[i]||{})[e]}function Joe(i){return Yoe[i]||{prefix:null,iconName:null}}function zIe(i){const e=Qoe[i],t=wW("fas",i);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}function _m(){return yW}const eae=()=>({prefix:null,iconName:null,rest:[]});function jIe(i){let e=na;const t=qoe.reduce((n,s)=>(n[s]="".concat(Bt.cssPrefix,"-").concat(s),n),{});return Poe.forEach(n=>{(i.includes(t[n])||i.some(s=>VIe[n].includes(s)))&&(e=n)}),e}function i4(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:t=na}=e,n=bIe[t][i];if(t===t4&&!i)return"fad";const s=VG[t][i]||VG[t][n],r=i in md.styles?i:null;return s||r||null}function $Ie(i){let e=[],t=null;return i.forEach(n=>{const s=HIe(Bt.cssPrefix,n);s?t=s:n&&e.push(n)}),{iconName:t,rest:e}}function zG(i){return i.sort().filter((e,t,n)=>n.indexOf(e)===t)}function s4(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:t=!1}=e;let n=null;const s=z5.concat(aIe),r=zG(i.filter(d=>s.includes(d))),o=zG(i.filter(d=>!z5.includes(d))),a=r.filter(d=>(n=d,!Aoe.includes(d))),[l=null]=a,c=jIe(r),u=Ge(Ge({},$Ie(o)),{},{prefix:i4(l,{family:c})});return Ge(Ge(Ge({},u),YIe({values:i,family:c,styles:ZS,config:Bt,canonical:u,givenPrefix:n})),qIe(t,n,u))}function qIe(i,e,t){let{prefix:n,iconName:s}=t;if(i||!n||!s)return{prefix:n,iconName:s};const r=e==="fa"?Joe(s):{},o=t0(n,s);return s=r.iconName||o||s,n=r.prefix||n,n==="far"&&!ZS.far&&ZS.fas&&!Bt.autoFetchSvg&&(n="fas"),{prefix:n,iconName:s}}const KIe=Poe.filter(i=>i!==na||i!==t4),GIe=Object.keys(U5).filter(i=>i!==na).map(i=>Object.keys(U5[i])).flat();function YIe(i){const{values:e,family:t,canonical:n,givenPrefix:s="",styles:r={},config:o={}}=i,a=t===t4,l=e.includes("fa-duotone")||e.includes("fad"),c=o.familyDefault==="duotone",u=n.prefix==="fad"||n.prefix==="fa-duotone";if(!a&&(l||c||u)&&(n.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(n.prefix="fab"),!n.prefix&&KIe.includes(t)&&(Object.keys(r).find(h=>GIe.includes(h))||o.autoFetchSvg)){const h=JLe.get(t).defaultShortPrefixId;n.prefix=h,n.iconName=t0(n.prefix,n.iconName)||n.iconName}return(n.prefix==="fa"||s==="fa")&&(n.prefix=_m()||"fas"),n}class QIe{constructor(){this.definitions={}}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=t.reduce(this._pullDefinitions,{});Object.keys(s).forEach(r=>{this.definitions[r]=Ge(Ge({},this.definitions[r]||{}),s[r]),Q5(r,s[r]);const o=_W[na][r];o&&Q5(o,s[r]),Zoe()})}reset(){this.definitions={}}_pullDefinitions(e,t){const n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map(s=>{const{prefix:r,iconName:o,icon:a}=n[s],l=a[2];e[r]||(e[r]={}),l.length>0&&l.forEach(c=>{typeof c=="string"&&(e[r][c]=a)}),e[r][o]=a}),e}}let jG=[],G_={};const Bv={},XIe=Object.keys(Bv);function ZIe(i,e){let{mixoutsTo:t}=e;return jG=i,G_={},Object.keys(Bv).forEach(n=>{XIe.indexOf(n)===-1&&delete Bv[n]}),jG.forEach(n=>{const s=n.mixout?n.mixout():{};if(Object.keys(s).forEach(r=>{typeof s[r]=="function"&&(t[r]=s[r]),typeof s[r]=="object"&&Object.keys(s[r]).forEach(o=>{t[r]||(t[r]={}),t[r][o]=s[r][o]})}),n.hooks){const r=n.hooks();Object.keys(r).forEach(o=>{G_[o]||(G_[o]=[]),G_[o].push(r[o])})}n.provides&&n.provides(Bv)}),t}function X5(i,e){for(var t=arguments.length,n=new Array(t>2?t-2:0),s=2;s<t;s++)n[s-2]=arguments[s];return(G_[i]||[]).forEach(o=>{e=o.apply(null,[e,...n])}),e}function U0(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];(G_[i]||[]).forEach(r=>{r.apply(null,t)})}function vm(){const i=arguments[0],e=Array.prototype.slice.call(arguments,1);return Bv[i]?Bv[i].apply(null,e):void 0}function Z5(i){i.prefix==="fa"&&(i.prefix="fas");let{iconName:e}=i;const t=i.prefix||_m();if(e)return e=t0(t,e)||e,HG(tae.definitions,t,e)||HG(md.styles,t,e)}const tae=new QIe,JIe=()=>{Bt.autoReplaceSvg=!1,Bt.observeMutations=!1,U0("noAuto")},eDe={i2svg:function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Lf?(U0("beforeI2svg",i),vm("pseudoElements2svg",i),vm("i2svg",i)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=i;Bt.autoReplaceSvg===!1&&(Bt.autoReplaceSvg=!0),Bt.observeMutations=!0,MIe(()=>{nDe({autoReplaceSvgRoot:e}),U0("watch",i)})}},tDe={icon:i=>{if(i===null)return null;if(typeof i=="object"&&i.prefix&&i.iconName)return{prefix:i.prefix,iconName:t0(i.prefix,i.iconName)||i.iconName};if(Array.isArray(i)&&i.length===2){const e=i[1].indexOf("fa-")===0?i[1].slice(3):i[1],t=i4(i[0]);return{prefix:t,iconName:t0(t,e)||e}}if(typeof i=="string"&&(i.indexOf("".concat(Bt.cssPrefix,"-"))>-1||i.match(yIe))){const e=s4(i.split(" "),{skipLookups:!0});return{prefix:e.prefix||_m(),iconName:t0(e.prefix,e.iconName)||e.iconName}}if(typeof i=="string"){const e=_m();return{prefix:e,iconName:t0(e,i)||i}}}},Ul={noAuto:JIe,config:Bt,dom:eDe,parse:tDe,library:tae,findIconDefinition:Z5,toHtml:y2},nDe=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=as}=i;(Object.keys(md.styles).length>0||Bt.autoFetchSvg)&&Lf&&Bt.autoReplaceSvg&&Ul.dom.i2svg({node:e})};function r4(i,e){return Object.defineProperty(i,"abstract",{get:e}),Object.defineProperty(i,"html",{get:function(){return i.abstract.map(t=>y2(t))}}),Object.defineProperty(i,"node",{get:function(){if(!Lf)return;const t=as.createElement("div");return t.innerHTML=i.html,t.children}}),i}function iDe(i){let{children:e,main:t,mask:n,attributes:s,styles:r,transform:o}=i;if(bW(o)&&t.found&&!n.found){const{width:a,height:l}=t,c={x:a/l/2,y:.5};s.style=n4(Ge(Ge({},r),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:s,children:e}]}function sDe(i){let{prefix:e,iconName:t,children:n,attributes:s,symbol:r}=i;const o=r===!0?"".concat(e,"-").concat(Bt.cssPrefix,"-").concat(t):r;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Ge(Ge({},s),{},{id:o}),children:n}]}]}function CW(i){const{icons:{main:e,mask:t},prefix:n,iconName:s,transform:r,symbol:o,title:a,maskId:l,titleId:c,extra:u,watchable:d=!1}=i,{width:h,height:g}=t.found?t:e,p=sIe.includes(n),_=[Bt.replacementClass,s?"".concat(Bt.cssPrefix,"-").concat(s):""].filter(T=>u.classes.indexOf(T)===-1).filter(T=>T!==""||!!T).concat(u.classes).join(" ");let v={children:[],attributes:Ge(Ge({},u.attributes),{},{"data-prefix":n,"data-icon":s,class:_,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(h," ").concat(g)})};const y=p&&!~u.classes.indexOf("fa-fw")?{width:"".concat(h/g*16*.0625,"em")}:{};d&&(v.attributes[H0]=""),a&&(v.children.push({tag:"title",attributes:{id:v.attributes["aria-labelledby"]||"title-".concat(c||XS())},children:[a]}),delete v.attributes.title);const w=Ge(Ge({},v),{},{prefix:n,iconName:s,main:e,mask:t,maskId:l,transform:r,symbol:o,styles:Ge(Ge({},y),u.styles)}),{children:x,attributes:k}=t.found&&e.found?vm("generateAbstractMask",w)||{children:[],attributes:{}}:vm("generateAbstractIcon",w)||{children:[],attributes:{}};return w.children=x,w.attributes=k,o?sDe(w):iDe(w)}function $G(i){const{content:e,width:t,height:n,transform:s,title:r,extra:o,watchable:a=!1}=i,l=Ge(Ge(Ge({},o.attributes),r?{title:r}:{}),{},{class:o.classes.join(" ")});a&&(l[H0]="");const c=Ge({},o.styles);bW(s)&&(c.transform=RIe({transform:s,startCentered:!0,width:t,height:n}),c["-webkit-transform"]=c.transform);const u=n4(c);u.length>0&&(l.style=u);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),r&&d.push({tag:"span",attributes:{class:"sr-only"},children:[r]}),d}function rDe(i){const{content:e,title:t,extra:n}=i,s=Ge(Ge(Ge({},n.attributes),t?{title:t}:{}),{},{class:n.classes.join(" ")}),r=n4(n.styles);r.length>0&&(s.style=r);const o=[];return o.push({tag:"span",attributes:s,children:[e]}),t&&o.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),o}const{styles:HM}=md;function J5(i){const e=i[0],t=i[1],[n]=i.slice(4);let s=null;return Array.isArray(n)?s={tag:"g",attributes:{class:"".concat(Bt.cssPrefix,"-").concat(BM.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Bt.cssPrefix,"-").concat(BM.SECONDARY),fill:"currentColor",d:n[0]}},{tag:"path",attributes:{class:"".concat(Bt.cssPrefix,"-").concat(BM.PRIMARY),fill:"currentColor",d:n[1]}}]}:s={tag:"path",attributes:{fill:"currentColor",d:n}},{found:!0,width:e,height:t,icon:s}}const oDe={found:!1,width:512,height:512};function aDe(i,e){!Boe&&!Bt.showMissingIcons&&i&&console.error('Icon with name "'.concat(i,'" and prefix "').concat(e,'" is missing.'))}function e3(i,e){let t=e;return e==="fa"&&Bt.styleDefault!==null&&(e=_m()),new Promise((n,s)=>{if(t==="fa"){const r=Joe(i)||{};i=r.iconName||i,e=r.prefix||e}if(i&&e&&HM[e]&&HM[e][i]){const r=HM[e][i];return n(J5(r))}aDe(i,e),n(Ge(Ge({},oDe),{},{icon:Bt.showMissingIcons&&i?vm("missingIconAbstract")||{}:{}}))})}const qG=()=>{},t3=Bt.measurePerformance&&bE&&bE.mark&&bE.measure?bE:{mark:qG,measure:qG},hC='FA "6.7.2"',lDe=i=>(t3.mark("".concat(hC," ").concat(i," begins")),()=>nae(i)),nae=i=>{t3.mark("".concat(hC," ").concat(i," ends")),t3.measure("".concat(hC," ").concat(i),"".concat(hC," ").concat(i," begins"),"".concat(hC," ").concat(i," ends"))};var SW={begin:lDe,end:nae};const UT=()=>{};function KG(i){return typeof(i.getAttribute?i.getAttribute(H0):null)=="string"}function cDe(i){const e=i.getAttribute?i.getAttribute(mW):null,t=i.getAttribute?i.getAttribute(pW):null;return e&&t}function uDe(i){return i&&i.classList&&i.classList.contains&&i.classList.contains(Bt.replacementClass)}function dDe(){return Bt.autoReplaceSvg===!0?zT.replace:zT[Bt.autoReplaceSvg]||zT.replace}function hDe(i){return as.createElementNS("http://www.w3.org/2000/svg",i)}function fDe(i){return as.createElement(i)}function iae(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:t=i.tag==="svg"?hDe:fDe}=e;if(typeof i=="string")return as.createTextNode(i);const n=t(i.tag);return Object.keys(i.attributes||[]).forEach(function(r){n.setAttribute(r,i.attributes[r])}),(i.children||[]).forEach(function(r){n.appendChild(iae(r,{ceFn:t}))}),n}function gDe(i){let e=" ".concat(i.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const zT={replace:function(i){const e=i[0];if(e.parentNode)if(i[1].forEach(t=>{e.parentNode.insertBefore(iae(t),e)}),e.getAttribute(H0)===null&&Bt.keepOriginalSource){let t=as.createComment(gDe(e));e.parentNode.replaceChild(t,e)}else e.remove()},nest:function(i){const e=i[0],t=i[1];if(~vW(e).indexOf(Bt.replacementClass))return zT.replace(i);const n=new RegExp("".concat(Bt.cssPrefix,"-.*"));if(delete t[0].attributes.id,t[0].attributes.class){const r=t[0].attributes.class.split(" ").reduce((o,a)=>(a===Bt.replacementClass||a.match(n)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});t[0].attributes.class=r.toSvg.join(" "),r.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",r.toNode.join(" "))}const s=t.map(r=>y2(r)).join(`
`);e.setAttribute(H0,""),e.innerHTML=s}};function GG(i){i()}function sae(i,e){const t=typeof e=="function"?e:UT;if(i.length===0)t();else{let n=GG;Bt.mutateApproach===_Ie&&(n=pm.requestAnimationFrame||GG),n(()=>{const s=dDe(),r=SW.begin("mutate");i.map(s),r(),t()})}}let kW=!1;function rae(){kW=!0}function n3(){kW=!1}let gI=null;function YG(i){if(!MG||!Bt.observeMutations)return;const{treeCallback:e=UT,nodeCallback:t=UT,pseudoElementsCallback:n=UT,observeMutationsRoot:s=as}=i;gI=new MG(r=>{if(kW)return;const o=_m();Ty(r).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!KG(a.addedNodes[0])&&(Bt.searchPseudoElements&&n(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&Bt.searchPseudoElements&&n(a.target.parentNode),a.type==="attributes"&&KG(a.target)&&~SIe.indexOf(a.attributeName))if(a.attributeName==="class"&&cDe(a.target)){const{prefix:l,iconName:c}=s4(vW(a.target));a.target.setAttribute(mW,l||o),c&&a.target.setAttribute(pW,c)}else uDe(a.target)&&t(a.target)})}),Lf&&gI.observe(s,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function mDe(){gI&&gI.disconnect()}function pDe(i){const e=i.getAttribute("style");let t=[];return e&&(t=e.split(";").reduce((n,s)=>{const r=s.split(":"),o=r[0],a=r.slice(1);return o&&a.length>0&&(n[o]=a.join(":").trim()),n},{})),t}function _De(i){const e=i.getAttribute("data-prefix"),t=i.getAttribute("data-icon"),n=i.innerText!==void 0?i.innerText.trim():"";let s=s4(vW(i));return s.prefix||(s.prefix=_m()),e&&t&&(s.prefix=e,s.iconName=t),s.iconName&&s.prefix||(s.prefix&&n.length>0&&(s.iconName=UIe(s.prefix,i.innerText)||wW(s.prefix,Y5(i.innerText))),!s.iconName&&Bt.autoFetchSvg&&i.firstChild&&i.firstChild.nodeType===Node.TEXT_NODE&&(s.iconName=i.firstChild.data)),s}function vDe(i){const e=Ty(i.attributes).reduce((s,r)=>(s.name!=="class"&&s.name!=="style"&&(s[r.name]=r.value),s),{}),t=i.getAttribute("title"),n=i.getAttribute("data-fa-title-id");return Bt.autoA11y&&(t?e["aria-labelledby"]="".concat(Bt.replacementClass,"-title-").concat(n||XS()):(e["aria-hidden"]="true",e.focusable="false")),e}function bDe(){return{iconName:null,title:null,titleId:null,prefix:null,transform:gd,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function QG(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:t,prefix:n,rest:s}=_De(i),r=vDe(i),o=X5("parseNodeAttributes",{},i);let a=e.styleParser?pDe(i):[];return Ge({iconName:t,title:i.getAttribute("title"),titleId:i.getAttribute("data-fa-title-id"),prefix:n,transform:gd,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:a,attributes:r}},o)}const{styles:yDe}=md;function oae(i){const e=Bt.autoReplaceSvg==="nest"?QG(i,{styleParser:!1}):QG(i);return~e.extra.classes.indexOf(Woe)?vm("generateLayersText",i,e):vm("generateSvgReplacementMutation",i,e)}function wDe(){return[...tIe,...z5]}function XG(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Lf)return Promise.resolve();const t=as.documentElement.classList,n=u=>t.add("".concat(BG,"-").concat(u)),s=u=>t.remove("".concat(BG,"-").concat(u)),r=Bt.autoFetchSvg?wDe():Aoe.concat(Object.keys(yDe));r.includes("fa")||r.push("fa");const o=[".".concat(Woe,":not([").concat(H0,"])")].concat(r.map(u=>".".concat(u,":not([").concat(H0,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=Ty(i.querySelectorAll(o))}catch{}if(a.length>0)n("pending"),s("complete");else return Promise.resolve();const l=SW.begin("onTree"),c=a.reduce((u,d)=>{try{const h=oae(d);h&&u.push(h)}catch(h){Boe||h.name==="MissingIcon"&&console.error(h)}return u},[]);return new Promise((u,d)=>{Promise.all(c).then(h=>{sae(h,()=>{n("active"),n("complete"),s("pending"),typeof e=="function"&&e(),l(),u()})}).catch(h=>{l(),d(h)})})}function CDe(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;oae(i).then(t=>{t&&sae([t],e)})}function SDe(i){return function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=(e||{}).icon?e:Z5(e||{});let{mask:s}=t;return s&&(s=(s||{}).icon?s:Z5(s||{})),i(n,Ge(Ge({},t),{},{mask:s}))}}const kDe=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:t=gd,symbol:n=!1,mask:s=null,maskId:r=null,title:o=null,titleId:a=null,classes:l=[],attributes:c={},styles:u={}}=e;if(!i)return;const{prefix:d,iconName:h,icon:g}=i;return r4(Ge({type:"icon"},i),()=>(U0("beforeDOMElementCreation",{iconDefinition:i,params:e}),Bt.autoA11y&&(o?c["aria-labelledby"]="".concat(Bt.replacementClass,"-title-").concat(a||XS()):(c["aria-hidden"]="true",c.focusable="false")),CW({icons:{main:J5(g),mask:s?J5(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:h,transform:Ge(Ge({},gd),t),symbol:n,title:o,maskId:r,titleId:a,extra:{attributes:c,styles:u,classes:l}})))};var xDe={mixout(){return{icon:SDe(kDe)}},hooks(){return{mutationObserverCallbacks(i){return i.treeCallback=XG,i.nodeCallback=CDe,i}}},provides(i){i.i2svg=function(e){const{node:t=as,callback:n=()=>{}}=e;return XG(t,n)},i.generateSvgReplacementMutation=function(e,t){const{iconName:n,title:s,titleId:r,prefix:o,transform:a,symbol:l,mask:c,maskId:u,extra:d}=t;return new Promise((h,g)=>{Promise.all([e3(n,o),c.iconName?e3(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(p=>{let[_,v]=p;h([e,CW({icons:{main:_,mask:v},prefix:o,iconName:n,transform:a,symbol:l,maskId:u,title:s,titleId:r,extra:d,watchable:!0})])}).catch(g)})},i.generateAbstractIcon=function(e){let{children:t,attributes:n,main:s,transform:r,styles:o}=e;const a=n4(o);a.length>0&&(n.style=a);let l;return bW(r)&&(l=vm("generateAbstractTransformGrouping",{main:s,transform:r,containerWidth:s.width,iconWidth:s.width})),t.push(l||s.icon),{children:t,attributes:n}}}},EDe={mixout(){return{layer(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:t=[]}=e;return r4({type:"layer"},()=>{U0("beforeDOMElementCreation",{assembler:i,params:e});let n=[];return i(s=>{Array.isArray(s)?s.map(r=>{n=n.concat(r.abstract)}):n=n.concat(s.abstract)}),[{tag:"span",attributes:{class:["".concat(Bt.cssPrefix,"-layers"),...t].join(" ")},children:n}]})}}}},TDe={mixout(){return{counter(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:t=null,classes:n=[],attributes:s={},styles:r={}}=e;return r4({type:"counter",content:i},()=>(U0("beforeDOMElementCreation",{content:i,params:e}),rDe({content:i.toString(),title:t,extra:{attributes:s,styles:r,classes:["".concat(Bt.cssPrefix,"-layers-counter"),...n]}})))}}}},LDe={mixout(){return{text(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:t=gd,title:n=null,classes:s=[],attributes:r={},styles:o={}}=e;return r4({type:"text",content:i},()=>(U0("beforeDOMElementCreation",{content:i,params:e}),$G({content:i,transform:Ge(Ge({},gd),t),title:n,extra:{attributes:r,styles:o,classes:["".concat(Bt.cssPrefix,"-layers-text"),...s]}})))}}},provides(i){i.generateLayersText=function(e,t){const{title:n,transform:s,extra:r}=t;let o=null,a=null;if(Noe){const l=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();o=c.width/l,a=c.height/l}return Bt.autoA11y&&!n&&(r.attributes["aria-hidden"]="true"),Promise.resolve([e,$G({content:e.innerHTML,width:o,height:a,transform:s,title:n,extra:r,watchable:!0})])}}};const IDe=new RegExp('"',"ug"),ZG=[1105920,1112319],JG=Ge(Ge(Ge(Ge({},{FontAwesome:{normal:"fas",400:"fas"}}),ZLe),mIe),lIe),i3=Object.keys(JG).reduce((i,e)=>(i[e.toLowerCase()]=JG[e],i),{}),DDe=Object.keys(i3).reduce((i,e)=>{const t=i3[e];return i[e]=t[900]||[...Object.entries(t)][0][1],i},{});function NDe(i){const e=i.replace(IDe,""),t=FIe(e,0),n=t>=ZG[0]&&t<=ZG[1],s=e.length===2?e[0]===e[1]:!1;return{value:Y5(s?e[0]:e),isSecondary:n||s}}function RDe(i,e){const t=i.replace(/^['"]|['"]$/g,"").toLowerCase(),n=parseInt(e),s=isNaN(n)?"normal":n;return(i3[t]||{})[s]||DDe[t]}function eY(i,e){const t="".concat(pIe).concat(e.replace(":","-"));return new Promise((n,s)=>{if(i.getAttribute(t)!==null)return n();const o=Ty(i.children).filter(h=>h.getAttribute($5)===e)[0],a=pm.getComputedStyle(i,e),l=a.getPropertyValue("font-family"),c=l.match(wIe),u=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!c)return i.removeChild(o),n();if(c&&d!=="none"&&d!==""){const h=a.getPropertyValue("content");let g=RDe(l,u);const{value:p,isSecondary:_}=NDe(h),v=c[0].startsWith("FontAwesome");let y=wW(g,p),w=y;if(v){const x=zIe(p);x.iconName&&x.prefix&&(y=x.iconName,g=x.prefix)}if(y&&!_&&(!o||o.getAttribute(mW)!==g||o.getAttribute(pW)!==w)){i.setAttribute(t,w),o&&i.removeChild(o);const x=bDe(),{extra:k}=x;k.attributes[$5]=e,e3(y,g).then(T=>{const R=CW(Ge(Ge({},x),{},{icons:{main:T,mask:eae()},prefix:g,iconName:w,extra:k,watchable:!0})),L=as.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?i.insertBefore(L,i.firstChild):i.appendChild(L),L.outerHTML=R.map(I=>y2(I)).join(`
`),i.removeAttribute(t),n()}).catch(s)}else n()}else n()})}function ADe(i){return Promise.all([eY(i,"::before"),eY(i,"::after")])}function PDe(i){return i.parentNode!==document.head&&!~vIe.indexOf(i.tagName.toUpperCase())&&!i.getAttribute($5)&&(!i.parentNode||i.parentNode.tagName!=="svg")}function tY(i){if(Lf)return new Promise((e,t)=>{const n=Ty(i.querySelectorAll("*")).filter(PDe).map(ADe),s=SW.begin("searchPseudoElements");rae(),Promise.all(n).then(()=>{s(),n3(),e()}).catch(()=>{s(),n3(),t()})})}var MDe={hooks(){return{mutationObserverCallbacks(i){return i.pseudoElementsCallback=tY,i}}},provides(i){i.pseudoElements2svg=function(e){const{node:t=as}=e;Bt.searchPseudoElements&&tY(t)}}};let nY=!1;var ODe={mixout(){return{dom:{unwatch(){rae(),nY=!0}}}},hooks(){return{bootstrap(){YG(X5("mutationObserverCallbacks",{}))},noAuto(){mDe()},watch(i){const{observeMutationsRoot:e}=i;nY?n3():YG(X5("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const iY=i=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return i.toLowerCase().split(" ").reduce((t,n)=>{const s=n.toLowerCase().split("-"),r=s[0];let o=s.slice(1).join("-");if(r&&o==="h")return t.flipX=!0,t;if(r&&o==="v")return t.flipY=!0,t;if(o=parseFloat(o),isNaN(o))return t;switch(r){case"grow":t.size=t.size+o;break;case"shrink":t.size=t.size-o;break;case"left":t.x=t.x-o;break;case"right":t.x=t.x+o;break;case"up":t.y=t.y-o;break;case"down":t.y=t.y+o;break;case"rotate":t.rotate=t.rotate+o;break}return t},e)};var FDe={mixout(){return{parse:{transform:i=>iY(i)}}},hooks(){return{parseNodeAttributes(i,e){const t=e.getAttribute("data-fa-transform");return t&&(i.transform=iY(t)),i}}},provides(i){i.generateAbstractTransformGrouping=function(e){let{main:t,transform:n,containerWidth:s,iconWidth:r}=e;const o={transform:"translate(".concat(s/2," 256)")},a="translate(".concat(n.x*32,", ").concat(n.y*32,") "),l="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),c="rotate(".concat(n.rotate," 0 0)"),u={transform:"".concat(a," ").concat(l," ").concat(c)},d={transform:"translate(".concat(r/2*-1," -256)")},h={outer:o,inner:u,path:d};return{tag:"g",attributes:Ge({},h.outer),children:[{tag:"g",attributes:Ge({},h.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:Ge(Ge({},t.icon.attributes),h.path)}]}]}}}};const UM={x:0,y:0,width:"100%",height:"100%"};function sY(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return i.attributes&&(i.attributes.fill||e)&&(i.attributes.fill="black"),i}function BDe(i){return i.tag==="g"?i.children:[i]}var VDe={hooks(){return{parseNodeAttributes(i,e){const t=e.getAttribute("data-fa-mask"),n=t?s4(t.split(" ").map(s=>s.trim())):eae();return n.prefix||(n.prefix=_m()),i.mask=n,i.maskId=e.getAttribute("data-fa-mask-id"),i}}},provides(i){i.generateAbstractMask=function(e){let{children:t,attributes:n,main:s,mask:r,maskId:o,transform:a}=e;const{width:l,icon:c}=s,{width:u,icon:d}=r,h=NIe({transform:a,containerWidth:u,iconWidth:l}),g={tag:"rect",attributes:Ge(Ge({},UM),{},{fill:"white"})},p=c.children?{children:c.children.map(sY)}:{},_={tag:"g",attributes:Ge({},h.inner),children:[sY(Ge({tag:c.tag,attributes:Ge(Ge({},c.attributes),h.path)},p))]},v={tag:"g",attributes:Ge({},h.outer),children:[_]},y="mask-".concat(o||XS()),w="clip-".concat(o||XS()),x={tag:"mask",attributes:Ge(Ge({},UM),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[g,v]},k={tag:"defs",children:[{tag:"clipPath",attributes:{id:w},children:BDe(d)},x]};return t.push(k,{tag:"rect",attributes:Ge({fill:"currentColor","clip-path":"url(#".concat(w,")"),mask:"url(#".concat(y,")")},UM)}),{children:t,attributes:n}}}},WDe={provides(i){let e=!1;pm.matchMedia&&(e=pm.matchMedia("(prefers-reduced-motion: reduce)").matches),i.missingIconAbstract=function(){const t=[],n={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};t.push({tag:"path",attributes:Ge(Ge({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const r=Ge(Ge({},s),{},{attributeName:"opacity"}),o={tag:"circle",attributes:Ge(Ge({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:Ge(Ge({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Ge(Ge({},r),{},{values:"1;0;1;1;0;1;"})}),t.push(o),t.push({tag:"path",attributes:Ge(Ge({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:Ge(Ge({},r),{},{values:"1;0;0;0;0;1;"})}]}),e||t.push({tag:"path",attributes:Ge(Ge({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Ge(Ge({},r),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:t}}}},HDe={hooks(){return{parseNodeAttributes(i,e){const t=e.getAttribute("data-fa-symbol"),n=t===null?!1:t===""?!0:t;return i.symbol=n,i}}}},UDe=[PIe,xDe,EDe,TDe,LDe,MDe,ODe,FDe,VDe,WDe,HDe];ZIe(UDe,{mixoutsTo:Ul});Ul.noAuto;Ul.config;Ul.library;Ul.dom;const s3=Ul.parse;Ul.findIconDefinition;Ul.toHtml;const zDe=Ul.icon;Ul.layer;Ul.text;Ul.counter;var zM={exports:{}},jM,rY;function jDe(){if(rY)return jM;rY=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return jM=i,jM}var $M,oY;function $De(){if(oY)return $M;oY=1;var i=jDe();function e(){}function t(){}return t.resetWarningCache=e,$M=function(){function n(o,a,l,c,u,d){if(d!==i){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}n.isRequired=n;function s(){return n}var r={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return r.PropTypes=r,r},$M}var aY;function qDe(){return aY||(aY=1,zM.exports=$De()()),zM.exports}var KDe=qDe();const Bn=IR(KDe);function lY(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function rd(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lY(Object(t),!0).forEach(function(n){Y_(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):lY(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function mI(i){"@babel/helpers - typeof";return mI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mI(i)}function Y_(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function GDe(i,e){if(i==null)return{};var t={},n=Object.keys(i),s,r;for(r=0;r<n.length;r++)s=n[r],!(e.indexOf(s)>=0)&&(t[s]=i[s]);return t}function YDe(i,e){if(i==null)return{};var t=GDe(i,e),n,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}function r3(i){return QDe(i)||XDe(i)||ZDe(i)||JDe()}function QDe(i){if(Array.isArray(i))return o3(i)}function XDe(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function ZDe(i,e){if(i){if(typeof i=="string")return o3(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o3(i,e)}}function o3(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function JDe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eNe(i){var e,t=i.beat,n=i.fade,s=i.beatFade,r=i.bounce,o=i.shake,a=i.flash,l=i.spin,c=i.spinPulse,u=i.spinReverse,d=i.pulse,h=i.fixedWidth,g=i.inverse,p=i.border,_=i.listItem,v=i.flip,y=i.size,w=i.rotation,x=i.pull,k=(e={"fa-beat":t,"fa-fade":n,"fa-beat-fade":s,"fa-bounce":r,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":d,"fa-fw":h,"fa-inverse":g,"fa-border":p,"fa-li":_,"fa-flip":v===!0,"fa-flip-horizontal":v==="horizontal"||v==="both","fa-flip-vertical":v==="vertical"||v==="both"},Y_(e,"fa-".concat(y),typeof y<"u"&&y!==null),Y_(e,"fa-rotate-".concat(w),typeof w<"u"&&w!==null&&w!==0),Y_(e,"fa-pull-".concat(x),typeof x<"u"&&x!==null),Y_(e,"fa-swap-opacity",i.swapOpacity),e);return Object.keys(k).map(function(T){return k[T]?T:null}).filter(function(T){return T})}function tNe(i){return i=i-0,i===i}function aae(i){return tNe(i)?i:(i=i.replace(/[\-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""}),i.substr(0,1).toLowerCase()+i.substr(1))}var nNe=["style"];function iNe(i){return i.charAt(0).toUpperCase()+i.slice(1)}function sNe(i){return i.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var n=t.indexOf(":"),s=aae(t.slice(0,n)),r=t.slice(n+1).trim();return s.startsWith("webkit")?e[iNe(s)]=r:e[s]=r,e},{})}function lae(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var n=(e.children||[]).map(function(l){return lae(i,l)}),s=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=sNe(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[aae(c)]=u}return l},{attrs:{}}),r=t.style,o=r===void 0?{}:r,a=YDe(t,nNe);return s.attrs.style=rd(rd({},s.attrs.style),o),i.apply(void 0,[e.tag,rd(rd({},s.attrs),a)].concat(r3(n)))}var cae=!1;try{cae=!0}catch{}function rNe(){if(!cae&&console&&typeof console.error=="function"){var i;(i=console).error.apply(i,arguments)}}function cY(i){if(i&&mI(i)==="object"&&i.prefix&&i.iconName&&i.icon)return i;if(s3.icon)return s3.icon(i);if(i===null)return null;if(i&&mI(i)==="object"&&i.prefix&&i.iconName)return i;if(Array.isArray(i)&&i.length===2)return{prefix:i[0],iconName:i[1]};if(typeof i=="string")return{prefix:"fas",iconName:i}}function qM(i,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Y_({},i,e):{}}var uY={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},bg=vo.forwardRef(function(i,e){var t=rd(rd({},uY),i),n=t.icon,s=t.mask,r=t.symbol,o=t.className,a=t.title,l=t.titleId,c=t.maskId,u=cY(n),d=qM("classes",[].concat(r3(eNe(t)),r3((o||"").split(" ")))),h=qM("transform",typeof t.transform=="string"?s3.transform(t.transform):t.transform),g=qM("mask",cY(s)),p=zDe(u,rd(rd(rd(rd({},d),h),g),{},{symbol:r,title:a,titleId:l,maskId:c}));if(!p)return rNe("Could not find icon",u),null;var _=p.abstract,v={ref:e};return Object.keys(t).forEach(function(y){uY.hasOwnProperty(y)||(v[y]=t[y])}),oNe(_[0],v)});bg.displayName="FontAwesomeIcon";bg.propTypes={beat:Bn.bool,border:Bn.bool,beatFade:Bn.bool,bounce:Bn.bool,className:Bn.string,fade:Bn.bool,flash:Bn.bool,mask:Bn.oneOfType([Bn.object,Bn.array,Bn.string]),maskId:Bn.string,fixedWidth:Bn.bool,inverse:Bn.bool,flip:Bn.oneOf([!0,!1,"horizontal","vertical","both"]),icon:Bn.oneOfType([Bn.object,Bn.array,Bn.string]),listItem:Bn.bool,pull:Bn.oneOf(["right","left"]),pulse:Bn.bool,rotation:Bn.oneOf([0,90,180,270]),shake:Bn.bool,size:Bn.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Bn.bool,spinPulse:Bn.bool,spinReverse:Bn.bool,symbol:Bn.oneOfType([Bn.bool,Bn.string]),title:Bn.string,titleId:Bn.string,transform:Bn.oneOfType([Bn.string,Bn.object]),swapOpacity:Bn.bool};var oNe=lae.bind(null,vo.createElement);/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const aNe={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},lNe=aNe,cNe={prefix:"fas",iconName:"unlock-keyhole",icon:[448,512,["unlock-alt"],"f13e","M224 64c-44.2 0-80 35.8-80 80l0 48 240 0c35.3 0 64 28.7 64 64l0 192c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 256c0-35.3 28.7-64 64-64l16 0 0-48C80 64.5 144.5 0 224 0c57.5 0 107 33.7 130.1 82.3c7.6 16 .8 35.1-15.2 42.6s-35.1 .8-42.6-15.2C283.4 82.6 255.9 64 224 64zm32 320c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0z"]},uNe=cNe,dNe={prefix:"fas",iconName:"lock",icon:[448,512,[128274],"f023","M144 144l0 48 160 0 0-48c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192l0-48C80 64.5 144.5 0 224 0s144 64.5 144 144l0 48 16 0c35.3 0 64 28.7 64 64l0 192c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 256c0-35.3 28.7-64 64-64l16 0z"]},hNe={prefix:"fas",iconName:"globe",icon:[512,512,[127760],"f0ac","M352 256c0 22.2-1.2 43.6-3.3 64l-185.3 0c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64l185.3 0c2.2 20.4 3.3 41.8 3.3 64zm28.8-64l123.1 0c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64l-123.1 0c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32l-116.7 0c-10-63.9-29.8-117.4-55.3-151.6c78.3 20.7 142 77.5 171.9 151.6zm-149.1 0l-176.6 0c6.1-36.4 15.5-68.6 27-94.7c10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5c11.6 26 20.9 58.2 27 94.7zm-209 0L18.6 160C48.6 85.9 112.2 29.1 190.6 8.4C165.1 42.6 145.3 96.1 135.3 160zM8.1 192l123.1 0c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64L8.1 320C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zM194.7 446.6c-11.6-26-20.9-58.2-27-94.6l176.6 0c-6.1 36.4-15.5 68.6-27 94.6c-10.5 23.6-22.2 40.7-33.5 51.5C272.6 508.8 263.3 512 256 512s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6C112.2 482.9 48.6 426.1 18.6 352l116.7 0zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6c25.5-34.2 45.2-87.7 55.3-151.6l116.7 0z"]},fNe={prefix:"fas",iconName:"arrow-right",icon:[448,512,[8594],"f061","M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"]},gNe={prefix:"fas",iconName:"bolt",icon:[448,512,[9889,"zap"],"f0e7","M349.4 44.6c5.9-13.7 1.5-29.7-10.6-38.5s-28.6-8-39.9 1.8l-256 224c-10 8.8-13.6 22.9-8.9 35.3S50.7 288 64 288l111.5 0L98.6 467.4c-5.9 13.7-1.5 29.7 10.6 38.5s28.6 8 39.9-1.8l256-224c10-8.8 13.6-22.9 8.9-35.3s-16.6-20.7-30-20.7l-111.5 0L349.4 44.6z"]};function mNe(){const[i,e]=F.useState("public"),[t,n]=F.useState([]),[s,r]=F.useState(""),[o,a]=F.useState(null),[l,c]=F.useState(null),u=_y();F.useEffect(()=>{const p=ki.onAuthStateChanged(_=>{if(c(_),!_){u("/");return}const v=W5(V5(Fv,"sessions"),y=>{const w=y.docs.map(x=>({id:x.id,...x.data()}));n(w)},y=>{console.error("Firestore listener error:",y)});return()=>v()});return()=>p()},[u]);const d=async()=>{if(!(!s||!l))try{a(null);const p=`${l.uid}-${Date.now()}`,_={name:s,creatorId:l.uid,creatorUsername:l.displayName||"Anonymous",participants:[{uid:l.uid,username:l.displayName||"Anonymous"}],createdAt:new Date().toISOString()};await IG(dI(Fv,"sessions",p),_),r(""),u(`/session/${p}`)}catch(p){a("Failed to create session: "+p.message)}},h=async p=>{if(!l){a("You must be logged in to join a session.");return}try{a(null);const _=dI(Fv,"sessions",p),v=t.find(y=>y.id===p);if(!v)throw new Error("Session not found");if(!v.participants.some(y=>y.uid===l.uid)){const y=[...v.participants,{uid:l.uid,username:l.displayName||"Anonymous"}];await IG(_,{participants:y},{merge:!0})}u(`/session/${p}`)}catch(_){a("Failed to join session: "+_.message)}},g=async()=>{try{await KCe(ki),u("/")}catch(p){a("Error signing out: "+p.message)}};return l?D.jsxs("div",{className:"bg-white min-h-screen",children:[D.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-white shadow-sm z-10",children:[D.jsxs("header",{className:"container mx-auto px-6 py-4 flex items-center justify-between",children:[D.jsx("div",{className:"text-[1.8rem] font-bold text-primary",children:D.jsx("div",{className:"w-[215px] h-[50px] bg-transparent"})}),D.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 border-2 font-bold border-black text-black rounded-xl hover:bg-black hover:text-white transition-all",children:[D.jsx(bg,{icon:lNe,className:"text-xs"}),D.jsx("span",{children:"Logout"})]})]}),D.jsx("div",{className:"container mx-auto px-6 pb-6",children:D.jsxs("div",{className:"max-w-3xl mx-auto",children:[D.jsxs("div",{className:"flex gap-4 mb-6",children:[D.jsx("input",{type:"text",className:"flex-1 px-5 py-3 border border-gray-200 rounded-lg text-base focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100",placeholder:"Name your session",value:s,onChange:p=>r(p.target.value)}),D.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-6 py-3 bg-indigo-900 text-white font-semibold rounded-lg hover:bg-gray-100 hover:text-black hover:border-black border border-transparent transition-all",children:[D.jsx(bg,{icon:gNe,className:"text-sm"}),D.jsx("span",{children:"Launch"})]})]}),o&&D.jsx("p",{className:"text-red-500 text-base",children:o})]})})]}),D.jsx("div",{className:"pt-40 px-6 pb-8",children:D.jsx("div",{className:"max-w-3xl mx-auto",children:D.jsxs("div",{className:"bg-white p-8 rounded-lg border border-gray-200",children:[D.jsxs("div",{className:"flex gap-3 mb-8 bg-gray-100 p-1 rounded-lg",children:[D.jsxs("button",{className:`flex-1 py-4 font-semibold rounded-md text-base transition-all ${i==="public"?"bg-indigo-900 text-white shadow-sm":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,onClick:()=>e("public"),children:[D.jsx(bg,{icon:hNe,className:"mr-2"}),"Public"]}),D.jsxs("button",{className:`flex-1 py-4 font-semibold rounded-md text-base transition-all ${i==="private"?"bg-indigo-900 text-white shadow-sm":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,onClick:()=>e("private"),children:[D.jsx(bg,{icon:dNe,className:"mr-2"}),"Private"]})]}),i==="public"?D.jsx("div",{className:"max-h-[70vh] overflow-y-auto pr-4",children:t.length?t.map(p=>D.jsx("div",{className:"bg-white p-6 rounded-md border border-gray-200 hover:-translate-y-0.5 hover:shadow-md transition-all mb-4",children:D.jsxs("div",{className:"flex justify-between items-center",children:[D.jsxs("div",{children:[D.jsx("h3",{className:"font-semibold text-lg",children:p.name}),D.jsxs("p",{className:"text-base text-gray-500",children:["by ",p.creatorUsername," "," ",p.participants.length," participants"]})]}),D.jsxs("button",{onClick:()=>h(p.id),className:"flex items-center gap-2 px-5 py-2.5 bg-indigo-900 text-white font-semibold rounded-lg hover:bg-gray-100 hover:text-black hover:border-black border border-transparent transition-all",children:[D.jsx(bg,{icon:fNe,className:"text-sm"}),D.jsx("span",{children:p.participants.some(_=>_.uid===(l==null?void 0:l.uid))?"Rejoin":"Join"})]})]})},p.id)):D.jsx("p",{className:"text-base text-gray-500",children:"No sessions yet. Create one!"})}):D.jsxs("div",{className:"space-y-6",children:[D.jsxs("div",{children:[D.jsx("label",{className:"block text-base text-gray-700 mb-2",children:"Room ID"}),D.jsx("input",{type:"text",className:"w-full px-5 py-3 border border-gray-200 rounded-lg text-base focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100",placeholder:"Enter Room ID"})]}),D.jsxs("div",{children:[D.jsx("label",{className:"block text-base text-gray-700 mb-2",children:"Password"}),D.jsx("input",{type:"password",className:"w-full px-5 py-3 border border-gray-200 rounded-lg text-base focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100",placeholder:"Enter Password"})]}),D.jsxs("button",{className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-indigo-900 text-white font-semibold rounded-lg hover:bg-gray-100 hover:text-black hover:border-black border border-transparent transition-all",children:[D.jsx(bg,{icon:uNe}),D.jsx("span",{children:"Access Room"})]})]})]})})})]}):D.jsx("div",{children:"Loading..."})}function pNe(){const i=F.useRef([]);F.useEffect(()=>{const t=new IntersectionObserver(n=>{n.forEach(s=>{s.isIntersecting&&s.target.classList.add("animate-section-in")})},{threshold:.2});return i.current.forEach(n=>t.observe(n)),()=>t.disconnect()},[]);const e=t=>{t&&!i.current.includes(t)&&i.current.push(t)};return D.jsxs("main",{className:"min-h-screen",children:[D.jsx(zTe,{}),D.jsx("section",{ref:e,children:D.jsx(FLe,{})}),D.jsx("section",{ref:e,children:D.jsx(BLe,{})}),D.jsx("section",{ref:e,children:D.jsx(VLe,{})}),D.jsx("section",{ref:e,children:D.jsx(WLe,{})}),D.jsx("section",{ref:e,children:D.jsx(HLe,{})}),D.jsx(Toe,{})]})}const _Ne="vs-dark",vNe=!0,bNe=JSON.parse('[{"background":"011627","token":""},{"foreground":"637777","token":"comment"},{"foreground":"addb67","token":"string"},{"foreground":"ecc48d","token":"vstring.quoted"},{"foreground":"ecc48d","token":"variable.other.readwrite.js"},{"foreground":"5ca7e4","token":"string.regexp"},{"foreground":"5ca7e4","token":"string.regexp keyword.other"},{"foreground":"5f7e97","token":"meta.function punctuation.separator.comma"},{"foreground":"f78c6c","token":"constant.numeric"},{"foreground":"f78c6c","token":"constant.character.numeric"},{"foreground":"addb67","token":"variable"},{"foreground":"c792ea","token":"keyword"},{"foreground":"c792ea","token":"punctuation.accessor"},{"foreground":"c792ea","token":"storage"},{"foreground":"c792ea","token":"meta.var.expr"},{"foreground":"c792ea","token":"meta.class meta.method.declaration meta.var.expr storage.type.jsm"},{"foreground":"c792ea","token":"storage.type.property.js"},{"foreground":"c792ea","token":"storage.type.property.ts"},{"foreground":"c792ea","token":"storage.type.property.tsx"},{"foreground":"82aaff","token":"storage.type"},{"foreground":"ffcb8b","token":"entity.name.class"},{"foreground":"ffcb8b","token":"meta.class entity.name.type.class"},{"foreground":"addb67","token":"entity.other.inherited-class"},{"foreground":"82aaff","token":"entity.name.function"},{"foreground":"addb67","token":"punctuation.definition.variable"},{"foreground":"d3423e","token":"punctuation.section.embedded"},{"foreground":"d6deeb","token":"punctuation.terminator.expression"},{"foreground":"d6deeb","token":"punctuation.definition.arguments"},{"foreground":"d6deeb","token":"punctuation.definition.array"},{"foreground":"d6deeb","token":"punctuation.section.array"},{"foreground":"d6deeb","token":"meta.array"},{"foreground":"d9f5dd","token":"punctuation.definition.list.begin"},{"foreground":"d9f5dd","token":"punctuation.definition.list.end"},{"foreground":"d9f5dd","token":"punctuation.separator.arguments"},{"foreground":"d9f5dd","token":"punctuation.definition.list"},{"foreground":"d3423e","token":"string.template meta.template.expression"},{"foreground":"d6deeb","token":"string.template punctuation.definition.string"},{"foreground":"c792ea","fontStyle":"italic","token":"italic"},{"foreground":"addb67","fontStyle":"bold","token":"bold"},{"foreground":"82aaff","token":"constant.language"},{"foreground":"82aaff","token":"punctuation.definition.constant"},{"foreground":"82aaff","token":"variable.other.constant"},{"foreground":"7fdbca","token":"support.function.construct"},{"foreground":"7fdbca","token":"keyword.other.new"},{"foreground":"82aaff","token":"constant.character"},{"foreground":"82aaff","token":"constant.other"},{"foreground":"f78c6c","token":"constant.character.escape"},{"foreground":"addb67","token":"entity.other.inherited-class"},{"foreground":"d7dbe0","token":"variable.parameter"},{"foreground":"7fdbca","token":"entity.name.tag"},{"foreground":"cc2996","token":"punctuation.definition.tag.html"},{"foreground":"cc2996","token":"punctuation.definition.tag.begin"},{"foreground":"cc2996","token":"punctuation.definition.tag.end"},{"foreground":"addb67","token":"entity.other.attribute-name"},{"foreground":"addb67","token":"entity.name.tag.custom"},{"foreground":"82aaff","token":"support.function"},{"foreground":"82aaff","token":"support.constant"},{"foreground":"7fdbca","token":"upport.constant.meta.property-value"},{"foreground":"addb67","token":"support.type"},{"foreground":"addb67","token":"support.class"},{"foreground":"addb67","token":"support.variable.dom"},{"foreground":"7fdbca","token":"support.constant"},{"foreground":"7fdbca","token":"keyword.other.special-method"},{"foreground":"7fdbca","token":"keyword.other.new"},{"foreground":"7fdbca","token":"keyword.other.debugger"},{"foreground":"7fdbca","token":"keyword.control"},{"foreground":"c792ea","token":"keyword.operator.comparison"},{"foreground":"c792ea","token":"keyword.control.flow.js"},{"foreground":"c792ea","token":"keyword.control.flow.ts"},{"foreground":"c792ea","token":"keyword.control.flow.tsx"},{"foreground":"c792ea","token":"keyword.control.ruby"},{"foreground":"c792ea","token":"keyword.control.module.ruby"},{"foreground":"c792ea","token":"keyword.control.class.ruby"},{"foreground":"c792ea","token":"keyword.control.def.ruby"},{"foreground":"c792ea","token":"keyword.control.loop.js"},{"foreground":"c792ea","token":"keyword.control.loop.ts"},{"foreground":"c792ea","token":"keyword.control.import.js"},{"foreground":"c792ea","token":"keyword.control.import.ts"},{"foreground":"c792ea","token":"keyword.control.import.tsx"},{"foreground":"c792ea","token":"keyword.control.from.js"},{"foreground":"c792ea","token":"keyword.control.from.ts"},{"foreground":"c792ea","token":"keyword.control.from.tsx"},{"foreground":"ffffff","background":"ff2c83","token":"invalid"},{"foreground":"ffffff","background":"d3423e","token":"invalid.deprecated"},{"foreground":"7fdbca","token":"keyword.operator"},{"foreground":"c792ea","token":"keyword.operator.relational"},{"foreground":"c792ea","token":"keyword.operator.assignement"},{"foreground":"c792ea","token":"keyword.operator.arithmetic"},{"foreground":"c792ea","token":"keyword.operator.bitwise"},{"foreground":"c792ea","token":"keyword.operator.increment"},{"foreground":"c792ea","token":"keyword.operator.ternary"},{"foreground":"637777","token":"comment.line.double-slash"},{"foreground":"cdebf7","token":"object"},{"foreground":"ff5874","token":"constant.language.null"},{"foreground":"d6deeb","token":"meta.brace"},{"foreground":"c792ea","token":"meta.delimiter.period"},{"foreground":"d9f5dd","token":"punctuation.definition.string"},{"foreground":"ff5874","token":"constant.language.boolean"},{"foreground":"ffffff","token":"object.comma"},{"foreground":"7fdbca","token":"variable.parameter.function"},{"foreground":"80cbc4","token":"support.type.vendor.property-name"},{"foreground":"80cbc4","token":"support.constant.vendor.property-value"},{"foreground":"80cbc4","token":"support.type.property-name"},{"foreground":"80cbc4","token":"meta.property-list entity.name.tag"},{"foreground":"57eaf1","token":"meta.property-list entity.name.tag.reference"},{"foreground":"f78c6c","token":"constant.other.color.rgb-value punctuation.definition.constant"},{"foreground":"ffeb95","token":"constant.other.color"},{"foreground":"ffeb95","token":"keyword.other.unit"},{"foreground":"c792ea","token":"meta.selector"},{"foreground":"fad430","token":"entity.other.attribute-name.id"},{"foreground":"80cbc4","token":"meta.property-name"},{"foreground":"c792ea","token":"entity.name.tag.doctype"},{"foreground":"c792ea","token":"meta.tag.sgml.doctype"},{"foreground":"d9f5dd","token":"punctuation.definition.parameters"},{"foreground":"ecc48d","token":"string.quoted"},{"foreground":"ecc48d","token":"string.quoted.double"},{"foreground":"ecc48d","token":"string.quoted.single"},{"foreground":"addb67","token":"support.constant.math"},{"foreground":"addb67","token":"support.type.property-name.json"},{"foreground":"addb67","token":"support.constant.json"},{"foreground":"c789d6","token":"meta.structure.dictionary.value.json string.quoted.double"},{"foreground":"80cbc4","token":"string.quoted.double.json punctuation.definition.string.json"},{"foreground":"ff5874","token":"meta.structure.dictionary.json meta.structure.dictionary.value constant.language"},{"foreground":"d6deeb","token":"variable.other.ruby"},{"foreground":"ecc48d","token":"entity.name.type.class.ruby"},{"foreground":"ecc48d","token":"keyword.control.class.ruby"},{"foreground":"ecc48d","token":"meta.class.ruby"},{"foreground":"7fdbca","token":"constant.language.symbol.hashkey.ruby"},{"foreground":"e0eddd","background":"a57706","fontStyle":"italic","token":"meta.diff"},{"foreground":"e0eddd","background":"a57706","fontStyle":"italic","token":"meta.diff.header"},{"foreground":"ef535090","fontStyle":"italic","token":"markup.deleted"},{"foreground":"a2bffc","fontStyle":"italic","token":"markup.changed"},{"foreground":"a2bffc","fontStyle":"italic","token":"meta.diff.header.git"},{"foreground":"a2bffc","fontStyle":"italic","token":"meta.diff.header.from-file"},{"foreground":"a2bffc","fontStyle":"italic","token":"meta.diff.header.to-file"},{"foreground":"219186","background":"eae3ca","token":"markup.inserted"},{"foreground":"d3201f","token":"other.package.exclude"},{"foreground":"d3201f","token":"other.remove"},{"foreground":"269186","token":"other.add"},{"foreground":"ff5874","token":"constant.language.python"},{"foreground":"82aaff","token":"variable.parameter.function.python"},{"foreground":"82aaff","token":"meta.function-call.arguments.python"},{"foreground":"b2ccd6","token":"meta.function-call.python"},{"foreground":"b2ccd6","token":"meta.function-call.generic.python"},{"foreground":"d6deeb","token":"punctuation.python"},{"foreground":"addb67","token":"entity.name.function.decorator.python"},{"foreground":"8eace3","token":"source.python variable.language.special"},{"foreground":"82b1ff","token":"markup.heading.markdown"},{"foreground":"c792ea","fontStyle":"italic","token":"markup.italic.markdown"},{"foreground":"addb67","fontStyle":"bold","token":"markup.bold.markdown"},{"foreground":"697098","token":"markup.quote.markdown"},{"foreground":"80cbc4","token":"markup.inline.raw.markdown"},{"foreground":"ff869a","token":"markup.underline.link.markdown"},{"foreground":"ff869a","token":"markup.underline.link.image.markdown"},{"foreground":"d6deeb","token":"string.other.link.title.markdown"},{"foreground":"d6deeb","token":"string.other.link.description.markdown"},{"foreground":"82b1ff","token":"punctuation.definition.string.markdown"},{"foreground":"82b1ff","token":"punctuation.definition.string.begin.markdown"},{"foreground":"82b1ff","token":"punctuation.definition.string.end.markdown"},{"foreground":"82b1ff","token":"meta.link.inline.markdown punctuation.definition.string"},{"foreground":"7fdbca","token":"punctuation.definition.metadata.markdown"},{"foreground":"82b1ff","token":"beginning.punctuation.definition.list.markdown"}]'),yNe={"editor.foreground":"#d6deeb","editor.background":"#011627","editor.selectionBackground":"#5f7e9779","editor.lineHighlightBackground":"#010E17","editorCursor.foreground":"#80a4c2","editorWhitespace.foreground":"#2e2040","editorIndentGuide.background":"#5e81ce52","editor.selectionHighlightBorder":"#122d42"},wNe={base:_Ne,inherit:vNe,rules:bNe,colors:yNe};function dY(i,e){if(typeof i=="function")return i(e);i!=null&&(i.current=e)}function uae(...i){return e=>{let t=!1;const n=i.map(s=>{const r=dY(s,e);return!t&&typeof r=="function"&&(t=!0),r});if(t)return()=>{for(let s=0;s<n.length;s++){const r=n[s];typeof r=="function"?r():dY(i[s],null)}}}}function Ki(...i){return F.useCallback(uae(...i),i)}var JS=F.forwardRef((i,e)=>{const{children:t,...n}=i,s=F.Children.toArray(t),r=s.find(CNe);if(r){const o=r.props.children,a=s.map(l=>l===r?F.Children.count(o)>1?F.Children.only(null):F.isValidElement(o)?o.props.children:null:l);return D.jsx(a3,{...n,ref:e,children:F.isValidElement(o)?F.cloneElement(o,void 0,a):null})}return D.jsx(a3,{...n,ref:e,children:t})});JS.displayName="Slot";var a3=F.forwardRef((i,e)=>{const{children:t,...n}=i;if(F.isValidElement(t)){const s=kNe(t),r=SNe(n,t.props);return t.type!==F.Fragment&&(r.ref=e?uae(e,s):s),F.cloneElement(t,r)}return F.Children.count(t)>1?F.Children.only(null):null});a3.displayName="SlotClone";var dae=({children:i})=>D.jsx(D.Fragment,{children:i});function CNe(i){return F.isValidElement(i)&&i.type===dae}function SNe(i,e){const t={...e};for(const n in e){const s=i[n],r=e[n];/^on[A-Z]/.test(n)?s&&r?t[n]=(...a)=>{r(...a),s(...a)}:s&&(t[n]=s):n==="style"?t[n]={...s,...r}:n==="className"&&(t[n]=[s,r].filter(Boolean).join(" "))}return{...i,...t}}function kNe(i){var n,s;let e=(n=Object.getOwnPropertyDescriptor(i.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=(s=Object.getOwnPropertyDescriptor(i,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}var xNe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],si=xNe.reduce((i,e)=>{const t=F.forwardRef((n,s)=>{const{asChild:r,...o}=n,a=r?JS:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),D.jsx(a,{...o,ref:s})});return t.displayName=`Primitive.${e}`,{...i,[e]:t}},{});function ENe(i,e){i&&l2.flushSync(()=>i.dispatchEvent(e))}var ao=globalThis!=null&&globalThis.document?F.useLayoutEffect:()=>{};function TNe(i,e){return F.useReducer((t,n)=>e[t][n]??t,i)}var b1=i=>{const{present:e,children:t}=i,n=LNe(e),s=typeof t=="function"?t({present:n.isPresent}):F.Children.only(t),r=Ki(n.ref,INe(s));return typeof t=="function"||n.isPresent?F.cloneElement(s,{ref:r}):null};b1.displayName="Presence";function LNe(i){const[e,t]=F.useState(),n=F.useRef({}),s=F.useRef(i),r=F.useRef("none"),o=i?"mounted":"unmounted",[a,l]=TNe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return F.useEffect(()=>{const c=wE(n.current);r.current=a==="mounted"?c:"none"},[a]),ao(()=>{const c=n.current,u=s.current;if(u!==i){const h=r.current,g=wE(c);i?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=i}},[i,l]),ao(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=g=>{const _=wE(n.current).includes(g.animationName);if(g.target===e&&_&&(l("ANIMATION_END"),!s.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},h=g=>{g.target===e&&(r.current=wE(n.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:F.useCallback(c=>{c&&(n.current=getComputedStyle(c)),t(c)},[])}}function wE(i){return(i==null?void 0:i.animationName)||"none"}function INe(i){var n,s;let e=(n=Object.getOwnPropertyDescriptor(i.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?i.ref:(e=(s=Object.getOwnPropertyDescriptor(i,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?i.props.ref:i.props.ref||i.ref)}function Vm(i,e=[]){let t=[];function n(r,o){const a=F.createContext(o),l=t.length;t=[...t,o];const c=d=>{var y;const{scope:h,children:g,...p}=d,_=((y=h==null?void 0:h[i])==null?void 0:y[l])||a,v=F.useMemo(()=>p,Object.values(p));return D.jsx(_.Provider,{value:v,children:g})};c.displayName=r+"Provider";function u(d,h){var _;const g=((_=h==null?void 0:h[i])==null?void 0:_[l])||a,p=F.useContext(g);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${r}\``)}return[c,u]}const s=()=>{const r=t.map(o=>F.createContext(o));return function(a){const l=(a==null?void 0:a[i])||r;return F.useMemo(()=>({[`__scope${i}`]:{...a,[i]:l}}),[a,l])}};return s.scopeName=i,[n,DNe(s,...e)]}function DNe(...i){const e=i[0];if(i.length===1)return e;const t=()=>{const n=i.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(r){const o=n.reduce((a,{useScope:l,scopeName:c})=>{const d=l(r)[`__scope${c}`];return{...a,...d}},{});return F.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function no(i){const e=F.useRef(i);return F.useEffect(()=>{e.current=i}),F.useMemo(()=>(...t)=>{var n;return(n=e.current)==null?void 0:n.call(e,...t)},[])}var NNe=F.createContext(void 0);function o4(i){const e=F.useContext(NNe);return i||e||"ltr"}function l3(i,[e,t]){return Math.min(t,Math.max(e,i))}function Ln(i,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(i==null||i(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function RNe(i,e){return F.useReducer((t,n)=>e[t][n]??t,i)}var xW="ScrollArea",[hae,$lt]=Vm(xW),[ANe,Cc]=hae(xW),fae=F.forwardRef((i,e)=>{const{__scopeScrollArea:t,type:n="hover",dir:s,scrollHideDelay:r=600,...o}=i,[a,l]=F.useState(null),[c,u]=F.useState(null),[d,h]=F.useState(null),[g,p]=F.useState(null),[_,v]=F.useState(null),[y,w]=F.useState(0),[x,k]=F.useState(0),[T,R]=F.useState(!1),[L,I]=F.useState(!1),A=Ki(e,V=>l(V)),B=o4(s);return D.jsx(ANe,{scope:t,type:n,dir:B,scrollHideDelay:r,scrollArea:a,viewport:c,onViewportChange:u,content:d,onContentChange:h,scrollbarX:g,onScrollbarXChange:p,scrollbarXEnabled:T,onScrollbarXEnabledChange:R,scrollbarY:_,onScrollbarYChange:v,scrollbarYEnabled:L,onScrollbarYEnabledChange:I,onCornerWidthChange:w,onCornerHeightChange:k,children:D.jsx(si.div,{dir:B,...o,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":x+"px",...i.style}})})});fae.displayName=xW;var gae="ScrollAreaViewport",mae=F.forwardRef((i,e)=>{const{__scopeScrollArea:t,children:n,nonce:s,...r}=i,o=Cc(gae,t),a=F.useRef(null),l=Ki(e,a,o.onViewportChange);return D.jsxs(D.Fragment,{children:[D.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),D.jsx(si.div,{"data-radix-scroll-area-viewport":"",...r,ref:l,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...i.style},children:D.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});mae.displayName=gae;var Fd="ScrollAreaScrollbar",EW=F.forwardRef((i,e)=>{const{forceMount:t,...n}=i,s=Cc(Fd,i.__scopeScrollArea),{onScrollbarXEnabledChange:r,onScrollbarYEnabledChange:o}=s,a=i.orientation==="horizontal";return F.useEffect(()=>(a?r(!0):o(!0),()=>{a?r(!1):o(!1)}),[a,r,o]),s.type==="hover"?D.jsx(PNe,{...n,ref:e,forceMount:t}):s.type==="scroll"?D.jsx(MNe,{...n,ref:e,forceMount:t}):s.type==="auto"?D.jsx(pae,{...n,ref:e,forceMount:t}):s.type==="always"?D.jsx(TW,{...n,ref:e}):null});EW.displayName=Fd;var PNe=F.forwardRef((i,e)=>{const{forceMount:t,...n}=i,s=Cc(Fd,i.__scopeScrollArea),[r,o]=F.useState(!1);return F.useEffect(()=>{const a=s.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},u=()=>{l=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),D.jsx(b1,{present:t||r,children:D.jsx(pae,{"data-state":r?"visible":"hidden",...n,ref:e})})}),MNe=F.forwardRef((i,e)=>{const{forceMount:t,...n}=i,s=Cc(Fd,i.__scopeScrollArea),r=i.orientation==="horizontal",o=l4(()=>l("SCROLL_END"),100),[a,l]=RNe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return F.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,s.scrollHideDelay,l]),F.useEffect(()=>{const c=s.viewport,u=r?"scrollLeft":"scrollTop";if(c){let d=c[u];const h=()=>{const g=c[u];d!==g&&(l("SCROLL"),o()),d=g};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[s.viewport,r,l,o]),D.jsx(b1,{present:t||a!=="hidden",children:D.jsx(TW,{"data-state":a==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:Ln(i.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Ln(i.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),pae=F.forwardRef((i,e)=>{const t=Cc(Fd,i.__scopeScrollArea),{forceMount:n,...s}=i,[r,o]=F.useState(!1),a=i.orientation==="horizontal",l=l4(()=>{if(t.viewport){const c=t.viewport.offsetWidth<t.viewport.scrollWidth,u=t.viewport.offsetHeight<t.viewport.scrollHeight;o(a?c:u)}},10);return Ab(t.viewport,l),Ab(t.content,l),D.jsx(b1,{present:n||r,children:D.jsx(TW,{"data-state":r?"visible":"hidden",...s,ref:e})})}),TW=F.forwardRef((i,e)=>{const{orientation:t="vertical",...n}=i,s=Cc(Fd,i.__scopeScrollArea),r=F.useRef(null),o=F.useRef(0),[a,l]=F.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=wae(a.viewport,a.content),u={...n,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>r.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function d(h,g){return HNe(h,o.current,a,g)}return t==="horizontal"?D.jsx(ONe,{...u,ref:e,onThumbPositionChange:()=>{if(s.viewport&&r.current){const h=s.viewport.scrollLeft,g=hY(h,a,s.dir);r.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,s.dir))}}):t==="vertical"?D.jsx(FNe,{...u,ref:e,onThumbPositionChange:()=>{if(s.viewport&&r.current){const h=s.viewport.scrollTop,g=hY(h,a);r.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),ONe=F.forwardRef((i,e)=>{const{sizes:t,onSizesChange:n,...s}=i,r=Cc(Fd,i.__scopeScrollArea),[o,a]=F.useState(),l=F.useRef(null),c=Ki(e,l,r.onScrollbarXChange);return F.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),D.jsx(vae,{"data-orientation":"horizontal",...s,ref:c,sizes:t,style:{bottom:0,left:r.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:r.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":a4(t)+"px",...i.style},onThumbPointerDown:u=>i.onThumbPointerDown(u.x),onDragScroll:u=>i.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(r.viewport){const h=r.viewport.scrollLeft+u.deltaX;i.onWheelScroll(h),Sae(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&r.viewport&&o&&n({content:r.viewport.scrollWidth,viewport:r.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:_I(o.paddingLeft),paddingEnd:_I(o.paddingRight)}})}})}),FNe=F.forwardRef((i,e)=>{const{sizes:t,onSizesChange:n,...s}=i,r=Cc(Fd,i.__scopeScrollArea),[o,a]=F.useState(),l=F.useRef(null),c=Ki(e,l,r.onScrollbarYChange);return F.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),D.jsx(vae,{"data-orientation":"vertical",...s,ref:c,sizes:t,style:{top:0,right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":a4(t)+"px",...i.style},onThumbPointerDown:u=>i.onThumbPointerDown(u.y),onDragScroll:u=>i.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(r.viewport){const h=r.viewport.scrollTop+u.deltaY;i.onWheelScroll(h),Sae(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&r.viewport&&o&&n({content:r.viewport.scrollHeight,viewport:r.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:_I(o.paddingTop),paddingEnd:_I(o.paddingBottom)}})}})}),[BNe,_ae]=hae(Fd),vae=F.forwardRef((i,e)=>{const{__scopeScrollArea:t,sizes:n,hasThumb:s,onThumbChange:r,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...h}=i,g=Cc(Fd,t),[p,_]=F.useState(null),v=Ki(e,A=>_(A)),y=F.useRef(null),w=F.useRef(""),x=g.viewport,k=n.content-n.viewport,T=no(u),R=no(l),L=l4(d,10);function I(A){if(y.current){const B=A.clientX-y.current.left,V=A.clientY-y.current.top;c({x:B,y:V})}}return F.useEffect(()=>{const A=B=>{const V=B.target;(p==null?void 0:p.contains(V))&&T(B,k)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[x,p,k,T]),F.useEffect(R,[n,R]),Ab(p,L),Ab(g.content,L),D.jsx(BNe,{scope:t,scrollbar:p,hasThumb:s,onThumbChange:no(r),onThumbPointerUp:no(o),onThumbPositionChange:R,onThumbPointerDown:no(a),children:D.jsx(si.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:Ln(i.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),y.current=p.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),I(A))}),onPointerMove:Ln(i.onPointerMove,I),onPointerUp:Ln(i.onPointerUp,A=>{const B=A.target;B.hasPointerCapture(A.pointerId)&&B.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=w.current,g.viewport&&(g.viewport.style.scrollBehavior=""),y.current=null})})})}),pI="ScrollAreaThumb",bae=F.forwardRef((i,e)=>{const{forceMount:t,...n}=i,s=_ae(pI,i.__scopeScrollArea);return D.jsx(b1,{present:t||s.hasThumb,children:D.jsx(VNe,{ref:e,...n})})}),VNe=F.forwardRef((i,e)=>{const{__scopeScrollArea:t,style:n,...s}=i,r=Cc(pI,t),o=_ae(pI,t),{onThumbPositionChange:a}=o,l=Ki(e,d=>o.onThumbChange(d)),c=F.useRef(void 0),u=l4(()=>{c.current&&(c.current(),c.current=void 0)},100);return F.useEffect(()=>{const d=r.viewport;if(d){const h=()=>{if(u(),!c.current){const g=UNe(d,a);c.current=g,a()}};return a(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[r.viewport,u,a]),D.jsx(si.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:Ln(i.onPointerDownCapture,d=>{const g=d.target.getBoundingClientRect(),p=d.clientX-g.left,_=d.clientY-g.top;o.onThumbPointerDown({x:p,y:_})}),onPointerUp:Ln(i.onPointerUp,o.onThumbPointerUp)})});bae.displayName=pI;var LW="ScrollAreaCorner",yae=F.forwardRef((i,e)=>{const t=Cc(LW,i.__scopeScrollArea),n=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&n?D.jsx(WNe,{...i,ref:e}):null});yae.displayName=LW;var WNe=F.forwardRef((i,e)=>{const{__scopeScrollArea:t,...n}=i,s=Cc(LW,t),[r,o]=F.useState(0),[a,l]=F.useState(0),c=!!(r&&a);return Ab(s.scrollbarX,()=>{var d;const u=((d=s.scrollbarX)==null?void 0:d.offsetHeight)||0;s.onCornerHeightChange(u),l(u)}),Ab(s.scrollbarY,()=>{var d;const u=((d=s.scrollbarY)==null?void 0:d.offsetWidth)||0;s.onCornerWidthChange(u),o(u)}),c?D.jsx(si.div,{...n,ref:e,style:{width:r,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...i.style}}):null});function _I(i){return i?parseInt(i,10):0}function wae(i,e){const t=i/e;return isNaN(t)?0:t}function a4(i){const e=wae(i.viewport,i.content),t=i.scrollbar.paddingStart+i.scrollbar.paddingEnd,n=(i.scrollbar.size-t)*e;return Math.max(n,18)}function HNe(i,e,t,n="ltr"){const s=a4(t),r=s/2,o=e||r,a=s-o,l=t.scrollbar.paddingStart+o,c=t.scrollbar.size-t.scrollbar.paddingEnd-a,u=t.content-t.viewport,d=n==="ltr"?[0,u]:[u*-1,0];return Cae([l,c],d)(i)}function hY(i,e,t="ltr"){const n=a4(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=e.scrollbar.size-s,o=e.content-e.viewport,a=r-n,l=t==="ltr"?[0,o]:[o*-1,0],c=l3(i,l);return Cae([0,o],[0,a])(c)}function Cae(i,e){return t=>{if(i[0]===i[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(i[1]-i[0]);return e[0]+n*(t-i[0])}}function Sae(i,e){return i>0&&i<e}var UNe=(i,e=()=>{})=>{let t={left:i.scrollLeft,top:i.scrollTop},n=0;return function s(){const r={left:i.scrollLeft,top:i.scrollTop},o=t.left!==r.left,a=t.top!==r.top;(o||a)&&e(),t=r,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function l4(i,e){const t=no(i),n=F.useRef(0);return F.useEffect(()=>()=>window.clearTimeout(n.current),[]),F.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(t,e)},[t,e])}function Ab(i,e){const t=no(e);ao(()=>{let n=0;if(i){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(t)});return s.observe(i),()=>{window.cancelAnimationFrame(n),s.unobserve(i)}}},[i,t])}var kae=fae,zNe=mae,jNe=yae;const Pb=F.forwardRef(({className:i,children:e,...t},n)=>D.jsxs(kae,{ref:n,className:Js("relative overflow-hidden",i),...t,children:[D.jsx(zNe,{className:"h-full w-full rounded-[inherit]",children:e}),D.jsx(xae,{}),D.jsx(jNe,{})]}));Pb.displayName=kae.displayName;const xae=F.forwardRef(({className:i,orientation:e="vertical",...t},n)=>D.jsx(EW,{ref:n,orientation:e,className:Js("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",i),...t,children:D.jsx(bae,{className:"relative flex-1 rounded-full bg-border"})}));xae.displayName=EW.displayName;var IW="Avatar",[$Ne,qlt]=Vm(IW),[qNe,Eae]=$Ne(IW),Tae=F.forwardRef((i,e)=>{const{__scopeAvatar:t,...n}=i,[s,r]=F.useState("idle");return D.jsx(qNe,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:r,children:D.jsx(si.span,{...n,ref:e})})});Tae.displayName=IW;var Lae="AvatarImage",Iae=F.forwardRef((i,e)=>{const{__scopeAvatar:t,src:n,onLoadingStatusChange:s=()=>{},...r}=i,o=Eae(Lae,t),a=KNe(n,r.referrerPolicy),l=no(c=>{s(c),o.onImageLoadingStatusChange(c)});return ao(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?D.jsx(si.img,{...r,ref:e,src:n}):null});Iae.displayName=Lae;var Dae="AvatarFallback",Nae=F.forwardRef((i,e)=>{const{__scopeAvatar:t,delayMs:n,...s}=i,r=Eae(Dae,t),[o,a]=F.useState(n===void 0);return F.useEffect(()=>{if(n!==void 0){const l=window.setTimeout(()=>a(!0),n);return()=>window.clearTimeout(l)}},[n]),o&&r.imageLoadingStatus!=="loaded"?D.jsx(si.span,{...s,ref:e}):null});Nae.displayName=Dae;function KNe(i,e){const[t,n]=F.useState("idle");return ao(()=>{if(!i){n("error");return}let s=!0;const r=new window.Image,o=a=>()=>{s&&n(a)};return n("loading"),r.onload=o("loaded"),r.onerror=o("error"),r.src=i,e&&(r.referrerPolicy=e),()=>{s=!1}},[i,e]),t}var Rae=Tae,Aae=Iae,Pae=Nae;const Mae=F.forwardRef(({className:i,...e},t)=>D.jsx(Rae,{ref:t,className:Js("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",i),...e}));Mae.displayName=Rae.displayName;const Oae=F.forwardRef(({className:i,...e},t)=>D.jsx(Aae,{ref:t,className:Js("aspect-square h-full w-full",i),...e}));Oae.displayName=Aae.displayName;const Fae=F.forwardRef(({className:i,...e},t)=>D.jsx(Pae,{ref:t,className:Js("flex h-full w-full items-center justify-center rounded-full bg-muted",i),...e}));Fae.displayName=Pae.displayName;const GNe=({theme:i,leftSidebarOpen:e,participants:t,activeEditors:n,livekitParticipants:s,providerRef:r})=>D.jsx("div",{className:`border-r transition-all duration-300 ${e?"w-64":"w-16"}`,children:D.jsxs("div",{className:"h-full flex flex-col",children:[D.jsx("div",{className:"p-4 border-b",children:D.jsx("h2",{className:`font-semibold ${!e&&"sr-only"}`,children:"Participants"})}),D.jsx(Pb,{className:"flex-1 p-2",children:t.map(o=>{var _,v;const a=((v=(_=r.current)==null?void 0:_.awareness)==null?void 0:v.getStates())||new Map,l=Array.from(a).find(([y,w])=>{var x;return((x=w.user)==null?void 0:x.id)===o.uid}),c=l?l[0]:null,u=n.has(c),d=s[o.uid],h=(d==null?void 0:d.isMicrophoneEnabled)||!1,g=(d==null?void 0:d.isCameraEnabled)||!1,p=o.username||"Anonymous";return D.jsxs("div",{className:`participant-container ${u?"active":""} flex items-center gap-2 p-2 rounded-md hover:bg-muted ${!e&&"justify-center"}`,children:[D.jsx("div",{className:"relative",children:D.jsxs(Mae,{className:u?"border-2 border-green-500":"",children:[D.jsx(Oae,{src:o.avatar,alt:p}),D.jsx(Fae,{children:p.split(" ").map(y=>y.charAt(0)).slice(0,2).join("").toUpperCase()})]})}),e&&D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx("span",{className:"text-sm",children:p}),D.jsxs("div",{className:"flex gap-1",children:[D.jsx("span",{className:h?"text-green-500":"text-red-500",children:h?D.jsx(Coe,{className:"h-4 w-4"}):D.jsx(woe,{className:"h-4 w-4"})}),D.jsx("span",{className:g?"text-green-500":"text-red-500",children:g?D.jsx(e4,{className:"h-4 w-4"}):D.jsx(JR,{className:"h-4 w-4"})})]})]})]},o.uid)})})]})});function Bae(i){const e=i+"CollectionProvider",[t,n]=Vm(e),[s,r]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:p,children:_}=g,v=vo.useRef(null),y=vo.useRef(new Map).current;return D.jsx(s,{scope:p,itemMap:y,collectionRef:v,children:_})};o.displayName=e;const a=i+"CollectionSlot",l=vo.forwardRef((g,p)=>{const{scope:_,children:v}=g,y=r(a,_),w=Ki(p,y.collectionRef);return D.jsx(JS,{ref:w,children:v})});l.displayName=a;const c=i+"CollectionItemSlot",u="data-radix-collection-item",d=vo.forwardRef((g,p)=>{const{scope:_,children:v,...y}=g,w=vo.useRef(null),x=Ki(p,w),k=r(c,_);return vo.useEffect(()=>(k.itemMap.set(w,{ref:w,...y}),()=>void k.itemMap.delete(w))),D.jsx(JS,{[u]:"",ref:x,children:v})});d.displayName=c;function h(g){const p=r(i+"CollectionConsumer",g);return vo.useCallback(()=>{const v=p.collectionRef.current;if(!v)return[];const y=Array.from(v.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((k,T)=>y.indexOf(k.ref.current)-y.indexOf(T.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},h,n]}function YNe(i,e=globalThis==null?void 0:globalThis.document){const t=no(i);F.useEffect(()=>{const n=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var QNe="DismissableLayer",c3="dismissableLayer.update",XNe="dismissableLayer.pointerDownOutside",ZNe="dismissableLayer.focusOutside",fY,Vae=F.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DW=F.forwardRef((i,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:r,onInteractOutside:o,onDismiss:a,...l}=i,c=F.useContext(Vae),[u,d]=F.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=F.useState({}),p=Ki(e,L=>d(L)),_=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=_.indexOf(v),w=u?_.indexOf(u):-1,x=c.layersWithOutsidePointerEventsDisabled.size>0,k=w>=y,T=tRe(L=>{const I=L.target,A=[...c.branches].some(B=>B.contains(I));!k||A||(s==null||s(L),o==null||o(L),L.defaultPrevented||a==null||a())},h),R=nRe(L=>{const I=L.target;[...c.branches].some(B=>B.contains(I))||(r==null||r(L),o==null||o(L),L.defaultPrevented||a==null||a())},h);return YNe(L=>{w===c.layers.size-1&&(n==null||n(L),!L.defaultPrevented&&a&&(L.preventDefault(),a()))},h),F.useEffect(()=>{if(u)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(fY=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),gY(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=fY)}},[u,h,t,c]),F.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),gY())},[u,c]),F.useEffect(()=>{const L=()=>g({});return document.addEventListener(c3,L),()=>document.removeEventListener(c3,L)},[]),D.jsx(si.div,{...l,ref:p,style:{pointerEvents:x?k?"auto":"none":void 0,...i.style},onFocusCapture:Ln(i.onFocusCapture,R.onFocusCapture),onBlurCapture:Ln(i.onBlurCapture,R.onBlurCapture),onPointerDownCapture:Ln(i.onPointerDownCapture,T.onPointerDownCapture)})});DW.displayName=QNe;var JNe="DismissableLayerBranch",eRe=F.forwardRef((i,e)=>{const t=F.useContext(Vae),n=F.useRef(null),s=Ki(e,n);return F.useEffect(()=>{const r=n.current;if(r)return t.branches.add(r),()=>{t.branches.delete(r)}},[t.branches]),D.jsx(si.div,{...i,ref:s})});eRe.displayName=JNe;function tRe(i,e=globalThis==null?void 0:globalThis.document){const t=no(i),n=F.useRef(!1),s=F.useRef(()=>{});return F.useEffect(()=>{const r=a=>{if(a.target&&!n.current){let l=function(){Wae(XNe,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",r),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function nRe(i,e=globalThis==null?void 0:globalThis.document){const t=no(i),n=F.useRef(!1);return F.useEffect(()=>{const s=r=>{r.target&&!n.current&&Wae(ZNe,t,{originalEvent:r},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function gY(){const i=new CustomEvent(c3);document.dispatchEvent(i)}function Wae(i,e,t,{discrete:n}){const s=t.originalEvent.target,r=new CustomEvent(i,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(i,e,{once:!0}),n?ENe(s,r):s.dispatchEvent(r)}var KM=0;function iRe(){F.useEffect(()=>{const i=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",i[0]??mY()),document.body.insertAdjacentElement("beforeend",i[1]??mY()),KM++,()=>{KM===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),KM--}},[])}function mY(){const i=document.createElement("span");return i.setAttribute("data-radix-focus-guard",""),i.tabIndex=0,i.style.outline="none",i.style.opacity="0",i.style.position="fixed",i.style.pointerEvents="none",i}var GM="focusScope.autoFocusOnMount",YM="focusScope.autoFocusOnUnmount",pY={bubbles:!1,cancelable:!0},sRe="FocusScope",Hae=F.forwardRef((i,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:r,...o}=i,[a,l]=F.useState(null),c=no(s),u=no(r),d=F.useRef(null),h=Ki(e,_=>l(_)),g=F.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;F.useEffect(()=>{if(n){let _=function(x){if(g.paused||!a)return;const k=x.target;a.contains(k)?d.current=k:fg(d.current,{select:!0})},v=function(x){if(g.paused||!a)return;const k=x.relatedTarget;k!==null&&(a.contains(k)||fg(d.current,{select:!0}))},y=function(x){if(document.activeElement===document.body)for(const T of x)T.removedNodes.length>0&&fg(a)};document.addEventListener("focusin",_),document.addEventListener("focusout",v);const w=new MutationObserver(y);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",v),w.disconnect()}}},[n,a,g.paused]),F.useEffect(()=>{if(a){vY.add(g);const _=document.activeElement;if(!a.contains(_)){const y=new CustomEvent(GM,pY);a.addEventListener(GM,c),a.dispatchEvent(y),y.defaultPrevented||(rRe(uRe(Uae(a)),{select:!0}),document.activeElement===_&&fg(a))}return()=>{a.removeEventListener(GM,c),setTimeout(()=>{const y=new CustomEvent(YM,pY);a.addEventListener(YM,u),a.dispatchEvent(y),y.defaultPrevented||fg(_??document.body,{select:!0}),a.removeEventListener(YM,u),vY.remove(g)},0)}}},[a,c,u,g]);const p=F.useCallback(_=>{if(!t&&!n||g.paused)return;const v=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,y=document.activeElement;if(v&&y){const w=_.currentTarget,[x,k]=oRe(w);x&&k?!_.shiftKey&&y===k?(_.preventDefault(),t&&fg(x,{select:!0})):_.shiftKey&&y===x&&(_.preventDefault(),t&&fg(k,{select:!0})):y===w&&_.preventDefault()}},[t,n,g.paused]);return D.jsx(si.div,{tabIndex:-1,...o,ref:h,onKeyDown:p})});Hae.displayName=sRe;function rRe(i,{select:e=!1}={}){const t=document.activeElement;for(const n of i)if(fg(n,{select:e}),document.activeElement!==t)return}function oRe(i){const e=Uae(i),t=_Y(e,i),n=_Y(e.reverse(),i);return[t,n]}function Uae(i){const e=[],t=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function _Y(i,e){for(const t of i)if(!aRe(t,{upTo:e}))return t}function aRe(i,{upTo:e}){if(getComputedStyle(i).visibility==="hidden")return!0;for(;i;){if(e!==void 0&&i===e)return!1;if(getComputedStyle(i).display==="none")return!0;i=i.parentElement}return!1}function lRe(i){return i instanceof HTMLInputElement&&"select"in i}function fg(i,{select:e=!1}={}){if(i&&i.focus){const t=document.activeElement;i.focus({preventScroll:!0}),i!==t&&lRe(i)&&e&&i.select()}}var vY=cRe();function cRe(){let i=[];return{add(e){const t=i[0];e!==t&&(t==null||t.pause()),i=bY(i,e),i.unshift(e)},remove(e){var t;i=bY(i,e),(t=i[0])==null||t.resume()}}}function bY(i,e){const t=[...i],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function uRe(i){return i.filter(e=>e.tagName!=="A")}var dRe=O_e.useId||(()=>{}),hRe=0;function Ly(i){const[e,t]=F.useState(dRe());return ao(()=>{t(n=>n??String(hRe++))},[i]),e?`radix-${e}`:""}const fRe=["top","right","bottom","left"],bm=Math.min,kl=Math.max,vI=Math.round,CE=Math.floor,yd=i=>({x:i,y:i}),gRe={left:"right",right:"left",bottom:"top",top:"bottom"},mRe={start:"end",end:"start"};function u3(i,e,t){return kl(i,bm(e,t))}function mf(i,e){return typeof i=="function"?i(e):i}function pf(i){return i.split("-")[0]}function Iy(i){return i.split("-")[1]}function NW(i){return i==="x"?"y":"x"}function RW(i){return i==="y"?"height":"width"}function ym(i){return["top","bottom"].includes(pf(i))?"y":"x"}function AW(i){return NW(ym(i))}function pRe(i,e,t){t===void 0&&(t=!1);const n=Iy(i),s=AW(i),r=RW(s);let o=s==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(o=bI(o)),[o,bI(o)]}function _Re(i){const e=bI(i);return[d3(i),e,d3(e)]}function d3(i){return i.replace(/start|end/g,e=>mRe[e])}function vRe(i,e,t){const n=["left","right"],s=["right","left"],r=["top","bottom"],o=["bottom","top"];switch(i){case"top":case"bottom":return t?e?s:n:e?n:s;case"left":case"right":return e?r:o;default:return[]}}function bRe(i,e,t,n){const s=Iy(i);let r=vRe(pf(i),t==="start",n);return s&&(r=r.map(o=>o+"-"+s),e&&(r=r.concat(r.map(d3)))),r}function bI(i){return i.replace(/left|right|bottom|top/g,e=>gRe[e])}function yRe(i){return{top:0,right:0,bottom:0,left:0,...i}}function zae(i){return typeof i!="number"?yRe(i):{top:i,right:i,bottom:i,left:i}}function yI(i){const{x:e,y:t,width:n,height:s}=i;return{width:n,height:s,top:t,left:e,right:e+n,bottom:t+s,x:e,y:t}}function yY(i,e,t){let{reference:n,floating:s}=i;const r=ym(e),o=AW(e),a=RW(o),l=pf(e),c=r==="y",u=n.x+n.width/2-s.width/2,d=n.y+n.height/2-s.height/2,h=n[a]/2-s[a]/2;let g;switch(l){case"top":g={x:u,y:n.y-s.height};break;case"bottom":g={x:u,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:d};break;case"left":g={x:n.x-s.width,y:d};break;default:g={x:n.x,y:n.y}}switch(Iy(e)){case"start":g[o]-=h*(t&&c?-1:1);break;case"end":g[o]+=h*(t&&c?-1:1);break}return g}const wRe=async(i,e,t)=>{const{placement:n="bottom",strategy:s="absolute",middleware:r=[],platform:o}=t,a=r.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:i,floating:e,strategy:s}),{x:u,y:d}=yY(c,n,l),h=n,g={},p=0;for(let _=0;_<a.length;_++){const{name:v,fn:y}=a[_],{x:w,y:x,data:k,reset:T}=await y({x:u,y:d,initialPlacement:n,placement:h,strategy:s,middlewareData:g,rects:c,platform:o,elements:{reference:i,floating:e}});u=w??u,d=x??d,g={...g,[v]:{...g[v],...k}},T&&p<=50&&(p++,typeof T=="object"&&(T.placement&&(h=T.placement),T.rects&&(c=T.rects===!0?await o.getElementRects({reference:i,floating:e,strategy:s}):T.rects),{x:u,y:d}=yY(c,h,l)),_=-1)}return{x:u,y:d,placement:h,strategy:s,middlewareData:g}};async function ek(i,e){var t;e===void 0&&(e={});const{x:n,y:s,platform:r,rects:o,elements:a,strategy:l}=i,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:g=0}=mf(e,i),p=zae(g),v=a[h?d==="floating"?"reference":"floating":d],y=yI(await r.getClippingRect({element:(t=await(r.isElement==null?void 0:r.isElement(v)))==null||t?v:v.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),w=d==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,x=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),k=await(r.isElement==null?void 0:r.isElement(x))?await(r.getScale==null?void 0:r.getScale(x))||{x:1,y:1}:{x:1,y:1},T=yI(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:x,strategy:l}):w);return{top:(y.top-T.top+p.top)/k.y,bottom:(T.bottom-y.bottom+p.bottom)/k.y,left:(y.left-T.left+p.left)/k.x,right:(T.right-y.right+p.right)/k.x}}const CRe=i=>({name:"arrow",options:i,async fn(e){const{x:t,y:n,placement:s,rects:r,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=mf(i,e)||{};if(c==null)return{};const d=zae(u),h={x:t,y:n},g=AW(s),p=RW(g),_=await o.getDimensions(c),v=g==="y",y=v?"top":"left",w=v?"bottom":"right",x=v?"clientHeight":"clientWidth",k=r.reference[p]+r.reference[g]-h[g]-r.floating[p],T=h[g]-r.reference[g],R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let L=R?R[x]:0;(!L||!await(o.isElement==null?void 0:o.isElement(R)))&&(L=a.floating[x]||r.floating[p]);const I=k/2-T/2,A=L/2-_[p]/2-1,B=bm(d[y],A),V=bm(d[w],A),U=B,W=L-_[p]-V,G=L/2-_[p]/2+I,Z=u3(U,G,W),ne=!l.arrow&&Iy(s)!=null&&G!==Z&&r.reference[p]/2-(G<U?B:V)-_[p]/2<0,fe=ne?G<U?G-U:G-W:0;return{[g]:h[g]+fe,data:{[g]:Z,centerOffset:G-Z-fe,...ne&&{alignmentOffset:fe}},reset:ne}}}),SRe=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(e){var t,n;const{placement:s,middlewareData:r,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:_=!0,...v}=mf(i,e);if((t=r.arrow)!=null&&t.alignmentOffset)return{};const y=pf(s),w=ym(a),x=pf(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(c.floating)),T=h||(x||!_?[bI(a)]:_Re(a)),R=p!=="none";!h&&R&&T.push(...bRe(a,_,p,k));const L=[a,...T],I=await ek(e,v),A=[];let B=((n=r.flip)==null?void 0:n.overflows)||[];if(u&&A.push(I[y]),d){const G=pRe(s,o,k);A.push(I[G[0]],I[G[1]])}if(B=[...B,{placement:s,overflows:A}],!A.every(G=>G<=0)){var V,U;const G=(((V=r.flip)==null?void 0:V.index)||0)+1,Z=L[G];if(Z)return{data:{index:G,overflows:B},reset:{placement:Z}};let ne=(U=B.filter(fe=>fe.overflows[0]<=0).sort((fe,te)=>fe.overflows[1]-te.overflows[1])[0])==null?void 0:U.placement;if(!ne)switch(g){case"bestFit":{var W;const fe=(W=B.filter(te=>{if(R){const ce=ym(te.placement);return ce===w||ce==="y"}return!0}).map(te=>[te.placement,te.overflows.filter(ce=>ce>0).reduce((ce,ve)=>ce+ve,0)]).sort((te,ce)=>te[1]-ce[1])[0])==null?void 0:W[0];fe&&(ne=fe);break}case"initialPlacement":ne=a;break}if(s!==ne)return{reset:{placement:ne}}}return{}}}};function wY(i,e){return{top:i.top-e.height,right:i.right-e.width,bottom:i.bottom-e.height,left:i.left-e.width}}function CY(i){return fRe.some(e=>i[e]>=0)}const kRe=function(i){return i===void 0&&(i={}),{name:"hide",options:i,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...s}=mf(i,e);switch(n){case"referenceHidden":{const r=await ek(e,{...s,elementContext:"reference"}),o=wY(r,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:CY(o)}}}case"escaped":{const r=await ek(e,{...s,altBoundary:!0}),o=wY(r,t.floating);return{data:{escapedOffsets:o,escaped:CY(o)}}}default:return{}}}}};async function xRe(i,e){const{placement:t,platform:n,elements:s}=i,r=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=pf(t),a=Iy(t),l=ym(t)==="y",c=["left","top"].includes(o)?-1:1,u=r&&l?-1:1,d=mf(e,i);let{mainAxis:h,crossAxis:g,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(g=a==="end"?p*-1:p),l?{x:g*u,y:h*c}:{x:h*c,y:g*u}}const ERe=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(e){var t,n;const{x:s,y:r,placement:o,middlewareData:a}=e,l=await xRe(e,i);return o===((t=a.offset)==null?void 0:t.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:r+l.y,data:{...l,placement:o}}}}},TRe=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(e){const{x:t,y:n,placement:s}=e,{mainAxis:r=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:y,y:w}=v;return{x:y,y:w}}},...l}=mf(i,e),c={x:t,y:n},u=await ek(e,l),d=ym(pf(s)),h=NW(d);let g=c[h],p=c[d];if(r){const v=h==="y"?"top":"left",y=h==="y"?"bottom":"right",w=g+u[v],x=g-u[y];g=u3(w,g,x)}if(o){const v=d==="y"?"top":"left",y=d==="y"?"bottom":"right",w=p+u[v],x=p-u[y];p=u3(w,p,x)}const _=a.fn({...e,[h]:g,[d]:p});return{..._,data:{x:_.x-t,y:_.y-n,enabled:{[h]:r,[d]:o}}}}}},LRe=function(i){return i===void 0&&(i={}),{options:i,fn(e){const{x:t,y:n,placement:s,rects:r,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=mf(i,e),u={x:t,y:n},d=ym(s),h=NW(d);let g=u[h],p=u[d];const _=mf(a,e),v=typeof _=="number"?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(l){const x=h==="y"?"height":"width",k=r.reference[h]-r.floating[x]+v.mainAxis,T=r.reference[h]+r.reference[x]-v.mainAxis;g<k?g=k:g>T&&(g=T)}if(c){var y,w;const x=h==="y"?"width":"height",k=["top","left"].includes(pf(s)),T=r.reference[d]-r.floating[x]+(k&&((y=o.offset)==null?void 0:y[d])||0)+(k?0:v.crossAxis),R=r.reference[d]+r.reference[x]+(k?0:((w=o.offset)==null?void 0:w[d])||0)-(k?v.crossAxis:0);p<T?p=T:p>R&&(p=R)}return{[h]:g,[d]:p}}}},IRe=function(i){return i===void 0&&(i={}),{name:"size",options:i,async fn(e){var t,n;const{placement:s,rects:r,platform:o,elements:a}=e,{apply:l=()=>{},...c}=mf(i,e),u=await ek(e,c),d=pf(s),h=Iy(s),g=ym(s)==="y",{width:p,height:_}=r.floating;let v,y;d==="top"||d==="bottom"?(v=d,y=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,v=h==="end"?"top":"bottom");const w=_-u.top-u.bottom,x=p-u.left-u.right,k=bm(_-u[v],w),T=bm(p-u[y],x),R=!e.middlewareData.shift;let L=k,I=T;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(I=x),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(L=w),R&&!h){const B=kl(u.left,0),V=kl(u.right,0),U=kl(u.top,0),W=kl(u.bottom,0);g?I=p-2*(B!==0||V!==0?B+V:kl(u.left,u.right)):L=_-2*(U!==0||W!==0?U+W:kl(u.top,u.bottom))}await l({...e,availableWidth:I,availableHeight:L});const A=await o.getDimensions(a.floating);return p!==A.width||_!==A.height?{reset:{rects:!0}}:{}}}};function c4(){return typeof window<"u"}function Dy(i){return jae(i)?(i.nodeName||"").toLowerCase():"#document"}function Ml(i){var e;return(i==null||(e=i.ownerDocument)==null?void 0:e.defaultView)||window}function Bd(i){var e;return(e=(jae(i)?i.ownerDocument:i.document)||window.document)==null?void 0:e.documentElement}function jae(i){return c4()?i instanceof Node||i instanceof Ml(i).Node:!1}function hu(i){return c4()?i instanceof Element||i instanceof Ml(i).Element:!1}function Td(i){return c4()?i instanceof HTMLElement||i instanceof Ml(i).HTMLElement:!1}function SY(i){return!c4()||typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof Ml(i).ShadowRoot}function w2(i){const{overflow:e,overflowX:t,overflowY:n,display:s}=fu(i);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!["inline","contents"].includes(s)}function DRe(i){return["table","td","th"].includes(Dy(i))}function u4(i){return[":popover-open",":modal"].some(e=>{try{return i.matches(e)}catch{return!1}})}function PW(i){const e=MW(),t=hu(i)?fu(i):i;return["transform","translate","scale","rotate","perspective"].some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(t.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(t.contain||"").includes(n))}function NRe(i){let e=wm(i);for(;Td(e)&&!Mb(e);){if(PW(e))return e;if(u4(e))return null;e=wm(e)}return null}function MW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Mb(i){return["html","body","#document"].includes(Dy(i))}function fu(i){return Ml(i).getComputedStyle(i)}function d4(i){return hu(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function wm(i){if(Dy(i)==="html")return i;const e=i.assignedSlot||i.parentNode||SY(i)&&i.host||Bd(i);return SY(e)?e.host:e}function $ae(i){const e=wm(i);return Mb(e)?i.ownerDocument?i.ownerDocument.body:i.body:Td(e)&&w2(e)?e:$ae(e)}function tk(i,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=$ae(i),r=s===((n=i.ownerDocument)==null?void 0:n.body),o=Ml(s);if(r){const a=h3(o);return e.concat(o,o.visualViewport||[],w2(s)?s:[],a&&t?tk(a):[])}return e.concat(s,tk(s,[],t))}function h3(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function qae(i){const e=fu(i);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=Td(i),r=s?i.offsetWidth:t,o=s?i.offsetHeight:n,a=vI(t)!==r||vI(n)!==o;return a&&(t=r,n=o),{width:t,height:n,$:a}}function OW(i){return hu(i)?i:i.contextElement}function Vv(i){const e=OW(i);if(!Td(e))return yd(1);const t=e.getBoundingClientRect(),{width:n,height:s,$:r}=qae(e);let o=(r?vI(t.width):t.width)/n,a=(r?vI(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const RRe=yd(0);function Kae(i){const e=Ml(i);return!MW()||!e.visualViewport?RRe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function ARe(i,e,t){return e===void 0&&(e=!1),!t||e&&t!==Ml(i)?!1:e}function z0(i,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=i.getBoundingClientRect(),r=OW(i);let o=yd(1);e&&(n?hu(n)&&(o=Vv(n)):o=Vv(i));const a=ARe(r,t,n)?Kae(r):yd(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,u=s.width/o.x,d=s.height/o.y;if(r){const h=Ml(r),g=n&&hu(n)?Ml(n):n;let p=h,_=h3(p);for(;_&&n&&g!==p;){const v=Vv(_),y=_.getBoundingClientRect(),w=fu(_),x=y.left+(_.clientLeft+parseFloat(w.paddingLeft))*v.x,k=y.top+(_.clientTop+parseFloat(w.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=x,c+=k,p=Ml(_),_=h3(p)}}return yI({width:u,height:d,x:l,y:c})}function FW(i,e){const t=d4(i).scrollLeft;return e?e.left+t:z0(Bd(i)).left+t}function Gae(i,e,t){t===void 0&&(t=!1);const n=i.getBoundingClientRect(),s=n.left+e.scrollLeft-(t?0:FW(i,n)),r=n.top+e.scrollTop;return{x:s,y:r}}function PRe(i){let{elements:e,rect:t,offsetParent:n,strategy:s}=i;const r=s==="fixed",o=Bd(n),a=e?u4(e.floating):!1;if(n===o||a&&r)return t;let l={scrollLeft:0,scrollTop:0},c=yd(1);const u=yd(0),d=Td(n);if((d||!d&&!r)&&((Dy(n)!=="body"||w2(o))&&(l=d4(n)),Td(n))){const g=z0(n);c=Vv(n),u.x=g.x+n.clientLeft,u.y=g.y+n.clientTop}const h=o&&!d&&!r?Gae(o,l,!0):yd(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:t.y*c.y-l.scrollTop*c.y+u.y+h.y}}function MRe(i){return Array.from(i.getClientRects())}function ORe(i){const e=Bd(i),t=d4(i),n=i.ownerDocument.body,s=kl(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),r=kl(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-t.scrollLeft+FW(i);const a=-t.scrollTop;return fu(n).direction==="rtl"&&(o+=kl(e.clientWidth,n.clientWidth)-s),{width:s,height:r,x:o,y:a}}function FRe(i,e){const t=Ml(i),n=Bd(i),s=t.visualViewport;let r=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;const c=MW();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a,y:l}}function BRe(i,e){const t=z0(i,!0,e==="fixed"),n=t.top+i.clientTop,s=t.left+i.clientLeft,r=Td(i)?Vv(i):yd(1),o=i.clientWidth*r.x,a=i.clientHeight*r.y,l=s*r.x,c=n*r.y;return{width:o,height:a,x:l,y:c}}function kY(i,e,t){let n;if(e==="viewport")n=FRe(i,t);else if(e==="document")n=ORe(Bd(i));else if(hu(e))n=BRe(e,t);else{const s=Kae(i);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return yI(n)}function Yae(i,e){const t=wm(i);return t===e||!hu(t)||Mb(t)?!1:fu(t).position==="fixed"||Yae(t,e)}function VRe(i,e){const t=e.get(i);if(t)return t;let n=tk(i,[],!1).filter(a=>hu(a)&&Dy(a)!=="body"),s=null;const r=fu(i).position==="fixed";let o=r?wm(i):i;for(;hu(o)&&!Mb(o);){const a=fu(o),l=PW(o);!l&&a.position==="fixed"&&(s=null),(r?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||w2(o)&&!l&&Yae(i,o))?n=n.filter(u=>u!==o):s=a,o=wm(o)}return e.set(i,n),n}function WRe(i){let{element:e,boundary:t,rootBoundary:n,strategy:s}=i;const o=[...t==="clippingAncestors"?u4(e)?[]:VRe(e,this._c):[].concat(t),n],a=o[0],l=o.reduce((c,u)=>{const d=kY(e,u,s);return c.top=kl(d.top,c.top),c.right=bm(d.right,c.right),c.bottom=bm(d.bottom,c.bottom),c.left=kl(d.left,c.left),c},kY(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function HRe(i){const{width:e,height:t}=qae(i);return{width:e,height:t}}function URe(i,e,t){const n=Td(e),s=Bd(e),r=t==="fixed",o=z0(i,!0,r,e);let a={scrollLeft:0,scrollTop:0};const l=yd(0);if(n||!n&&!r)if((Dy(e)!=="body"||w2(s))&&(a=d4(e)),n){const h=z0(e,!0,r,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else s&&(l.x=FW(s));const c=s&&!n&&!r?Gae(s,a):yd(0),u=o.left+a.scrollLeft-l.x-c.x,d=o.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:o.width,height:o.height}}function QM(i){return fu(i).position==="static"}function xY(i,e){if(!Td(i)||fu(i).position==="fixed")return null;if(e)return e(i);let t=i.offsetParent;return Bd(i)===t&&(t=t.ownerDocument.body),t}function Qae(i,e){const t=Ml(i);if(u4(i))return t;if(!Td(i)){let s=wm(i);for(;s&&!Mb(s);){if(hu(s)&&!QM(s))return s;s=wm(s)}return t}let n=xY(i,e);for(;n&&DRe(n)&&QM(n);)n=xY(n,e);return n&&Mb(n)&&QM(n)&&!PW(n)?t:n||NRe(i)||t}const zRe=async function(i){const e=this.getOffsetParent||Qae,t=this.getDimensions,n=await t(i.floating);return{reference:URe(i.reference,await e(i.floating),i.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function jRe(i){return fu(i).direction==="rtl"}const $Re={convertOffsetParentRelativeRectToViewportRelativeRect:PRe,getDocumentElement:Bd,getClippingRect:WRe,getOffsetParent:Qae,getElementRects:zRe,getClientRects:MRe,getDimensions:HRe,getScale:Vv,isElement:hu,isRTL:jRe};function Xae(i,e){return i.x===e.x&&i.y===e.y&&i.width===e.width&&i.height===e.height}function qRe(i,e){let t=null,n;const s=Bd(i);function r(){var a;clearTimeout(n),(a=t)==null||a.disconnect(),t=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),r();const c=i.getBoundingClientRect(),{left:u,top:d,width:h,height:g}=c;if(a||e(),!h||!g)return;const p=CE(d),_=CE(s.clientWidth-(u+h)),v=CE(s.clientHeight-(d+g)),y=CE(u),x={rootMargin:-p+"px "+-_+"px "+-v+"px "+-y+"px",threshold:kl(0,bm(1,l))||1};let k=!0;function T(R){const L=R[0].intersectionRatio;if(L!==l){if(!k)return o();L?o(!1,L):n=setTimeout(()=>{o(!1,1e-7)},1e3)}L===1&&!Xae(c,i.getBoundingClientRect())&&o(),k=!1}try{t=new IntersectionObserver(T,{...x,root:s.ownerDocument})}catch{t=new IntersectionObserver(T,x)}t.observe(i)}return o(!0),r}function KRe(i,e,t,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=OW(i),u=s||r?[...c?tk(c):[],...tk(e)]:[];u.forEach(y=>{s&&y.addEventListener("scroll",t,{passive:!0}),r&&y.addEventListener("resize",t)});const d=c&&a?qRe(c,t):null;let h=-1,g=null;o&&(g=new ResizeObserver(y=>{let[w]=y;w&&w.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var x;(x=g)==null||x.observe(e)})),t()}),c&&!l&&g.observe(c),g.observe(e));let p,_=l?z0(i):null;l&&v();function v(){const y=z0(i);_&&!Xae(_,y)&&t(),_=y,p=requestAnimationFrame(v)}return t(),()=>{var y;u.forEach(w=>{s&&w.removeEventListener("scroll",t),r&&w.removeEventListener("resize",t)}),d==null||d(),(y=g)==null||y.disconnect(),g=null,l&&cancelAnimationFrame(p)}}const GRe=ERe,YRe=TRe,QRe=SRe,XRe=IRe,ZRe=kRe,EY=CRe,JRe=LRe,e4e=(i,e,t)=>{const n=new Map,s={platform:$Re,...t},r={...s.platform,_c:n};return wRe(i,e,{...s,platform:r})};var jT=typeof document<"u"?F.useLayoutEffect:F.useEffect;function wI(i,e){if(i===e)return!0;if(typeof i!=typeof e)return!1;if(typeof i=="function"&&i.toString()===e.toString())return!0;let t,n,s;if(i&&e&&typeof i=="object"){if(Array.isArray(i)){if(t=i.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!wI(i[n],e[n]))return!1;return!0}if(s=Object.keys(i),t=s.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=t;n--!==0;){const r=s[n];if(!(r==="_owner"&&i.$$typeof)&&!wI(i[r],e[r]))return!1}return!0}return i!==i&&e!==e}function Zae(i){return typeof window>"u"?1:(i.ownerDocument.defaultView||window).devicePixelRatio||1}function TY(i,e){const t=Zae(i);return Math.round(e*t)/t}function XM(i){const e=F.useRef(i);return jT(()=>{e.current=i}),e}function t4e(i){i===void 0&&(i={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:s,elements:{reference:r,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=i,[u,d]=F.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[h,g]=F.useState(n);wI(h,n)||g(n);const[p,_]=F.useState(null),[v,y]=F.useState(null),w=F.useCallback(te=>{te!==R.current&&(R.current=te,_(te))},[]),x=F.useCallback(te=>{te!==L.current&&(L.current=te,y(te))},[]),k=r||p,T=o||v,R=F.useRef(null),L=F.useRef(null),I=F.useRef(u),A=l!=null,B=XM(l),V=XM(s),U=XM(c),W=F.useCallback(()=>{if(!R.current||!L.current)return;const te={placement:e,strategy:t,middleware:h};V.current&&(te.platform=V.current),e4e(R.current,L.current,te).then(ce=>{const ve={...ce,isPositioned:U.current!==!1};G.current&&!wI(I.current,ve)&&(I.current=ve,l2.flushSync(()=>{d(ve)}))})},[h,e,t,V,U]);jT(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,d(te=>({...te,isPositioned:!1})))},[c]);const G=F.useRef(!1);jT(()=>(G.current=!0,()=>{G.current=!1}),[]),jT(()=>{if(k&&(R.current=k),T&&(L.current=T),k&&T){if(B.current)return B.current(k,T,W);W()}},[k,T,W,B,A]);const Z=F.useMemo(()=>({reference:R,floating:L,setReference:w,setFloating:x}),[w,x]),ne=F.useMemo(()=>({reference:k,floating:T}),[k,T]),fe=F.useMemo(()=>{const te={position:t,left:0,top:0};if(!ne.floating)return te;const ce=TY(ne.floating,u.x),ve=TY(ne.floating,u.y);return a?{...te,transform:"translate("+ce+"px, "+ve+"px)",...Zae(ne.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:ce,top:ve}},[t,a,ne.floating,u.x,u.y]);return F.useMemo(()=>({...u,update:W,refs:Z,elements:ne,floatingStyles:fe}),[u,W,Z,ne,fe])}const n4e=i=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:i,fn(t){const{element:n,padding:s}=typeof i=="function"?i(t):i;return n&&e(n)?n.current!=null?EY({element:n.current,padding:s}).fn(t):{}:n?EY({element:n,padding:s}).fn(t):{}}}},i4e=(i,e)=>({...GRe(i),options:[i,e]}),s4e=(i,e)=>({...YRe(i),options:[i,e]}),r4e=(i,e)=>({...JRe(i),options:[i,e]}),o4e=(i,e)=>({...QRe(i),options:[i,e]}),a4e=(i,e)=>({...XRe(i),options:[i,e]}),l4e=(i,e)=>({...ZRe(i),options:[i,e]}),c4e=(i,e)=>({...n4e(i),options:[i,e]});var u4e="Arrow",Jae=F.forwardRef((i,e)=>{const{children:t,width:n=10,height:s=5,...r}=i;return D.jsx(si.svg,{...r,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:i.asChild?t:D.jsx("polygon",{points:"0,0 30,0 15,10"})})});Jae.displayName=u4e;var d4e=Jae;function h4e(i){const[e,t]=F.useState(void 0);return ao(()=>{if(i){t({width:i.offsetWidth,height:i.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const r=s[0];let o,a;if("borderBoxSize"in r){const l=r.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=i.offsetWidth,a=i.offsetHeight;t({width:o,height:a})});return n.observe(i,{box:"border-box"}),()=>n.unobserve(i)}else t(void 0)},[i]),e}var BW="Popper",[ele,h4]=Vm(BW),[f4e,tle]=ele(BW),nle=i=>{const{__scopePopper:e,children:t}=i,[n,s]=F.useState(null);return D.jsx(f4e,{scope:e,anchor:n,onAnchorChange:s,children:t})};nle.displayName=BW;var ile="PopperAnchor",sle=F.forwardRef((i,e)=>{const{__scopePopper:t,virtualRef:n,...s}=i,r=tle(ile,t),o=F.useRef(null),a=Ki(e,o);return F.useEffect(()=>{r.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:D.jsx(si.div,{...s,ref:a})});sle.displayName=ile;var VW="PopperContent",[g4e,m4e]=ele(VW),rle=F.forwardRef((i,e)=>{var We,at,Ft,_t,Nt,Zt;const{__scopePopper:t,side:n="bottom",sideOffset:s=0,align:r="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:g="optimized",onPlaced:p,..._}=i,v=tle(VW,t),[y,w]=F.useState(null),x=Ki(e,on=>w(on)),[k,T]=F.useState(null),R=h4e(k),L=(R==null?void 0:R.width)??0,I=(R==null?void 0:R.height)??0,A=n+(r!=="center"?"-"+r:""),B=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},V=Array.isArray(c)?c:[c],U=V.length>0,W={padding:B,boundary:V.filter(_4e),altBoundary:U},{refs:G,floatingStyles:Z,placement:ne,isPositioned:fe,middlewareData:te}=t4e({strategy:"fixed",placement:A,whileElementsMounted:(...on)=>KRe(...on,{animationFrame:g==="always"}),elements:{reference:v.anchor},middleware:[i4e({mainAxis:s+I,alignmentAxis:o}),l&&s4e({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?r4e():void 0,...W}),l&&o4e({...W}),a4e({...W,apply:({elements:on,rects:zn,availableWidth:sr,availableHeight:Or})=>{const{width:Ts,height:No}=zn.reference,Hs=on.floating.style;Hs.setProperty("--radix-popper-available-width",`${sr}px`),Hs.setProperty("--radix-popper-available-height",`${Or}px`),Hs.setProperty("--radix-popper-anchor-width",`${Ts}px`),Hs.setProperty("--radix-popper-anchor-height",`${No}px`)}}),k&&c4e({element:k,padding:a}),v4e({arrowWidth:L,arrowHeight:I}),h&&l4e({strategy:"referenceHidden",...W})]}),[ce,ve]=lle(ne),X=no(p);ao(()=>{fe&&(X==null||X())},[fe,X]);const oe=(We=te.arrow)==null?void 0:We.x,Ne=(at=te.arrow)==null?void 0:at.y,Ie=((Ft=te.arrow)==null?void 0:Ft.centerOffset)!==0,[Oe,it]=F.useState();return ao(()=>{y&&it(window.getComputedStyle(y).zIndex)},[y]),D.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...Z,transform:fe?Z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Oe,"--radix-popper-transform-origin":[(_t=te.transformOrigin)==null?void 0:_t.x,(Nt=te.transformOrigin)==null?void 0:Nt.y].join(" "),...((Zt=te.hide)==null?void 0:Zt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:i.dir,children:D.jsx(g4e,{scope:t,placedSide:ce,onArrowChange:T,arrowX:oe,arrowY:Ne,shouldHideArrow:Ie,children:D.jsx(si.div,{"data-side":ce,"data-align":ve,..._,ref:x,style:{..._.style,animation:fe?void 0:"none"}})})})});rle.displayName=VW;var ole="PopperArrow",p4e={top:"bottom",right:"left",bottom:"top",left:"right"},ale=F.forwardRef(function(e,t){const{__scopePopper:n,...s}=e,r=m4e(ole,n),o=p4e[r.placedSide];return D.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:D.jsx(d4e,{...s,ref:t,style:{...s.style,display:"block"}})})});ale.displayName=ole;function _4e(i){return i!==null}var v4e=i=>({name:"transformOrigin",options:i,fn(e){var v,y,w;const{placement:t,rects:n,middlewareData:s}=e,o=((v=s.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:i.arrowWidth,l=o?0:i.arrowHeight,[c,u]=lle(t),d={start:"0%",center:"50%",end:"100%"}[u],h=(((y=s.arrow)==null?void 0:y.x)??0)+a/2,g=(((w=s.arrow)==null?void 0:w.y)??0)+l/2;let p="",_="";return c==="bottom"?(p=o?d:`${h}px`,_=`${-l}px`):c==="top"?(p=o?d:`${h}px`,_=`${n.floating.height+l}px`):c==="right"?(p=`${-l}px`,_=o?d:`${g}px`):c==="left"&&(p=`${n.floating.width+l}px`,_=o?d:`${g}px`),{data:{x:p,y:_}}}});function lle(i){const[e,t="center"]=i.split("-");return[e,t]}var cle=nle,ule=sle,dle=rle,hle=ale,b4e="Portal",fle=F.forwardRef((i,e)=>{var a;const{container:t,...n}=i,[s,r]=F.useState(!1);ao(()=>r(!0),[]);const o=t||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?hbe.createPortal(D.jsx(si.div,{...n,ref:e}),o):null});fle.displayName=b4e;function nk({prop:i,defaultProp:e,onChange:t=()=>{}}){const[n,s]=y4e({defaultProp:e,onChange:t}),r=i!==void 0,o=r?i:n,a=no(t),l=F.useCallback(c=>{if(r){const d=typeof c=="function"?c(i):c;d!==i&&a(d)}else s(c)},[r,i,s,a]);return[o,l]}function y4e({defaultProp:i,onChange:e}){const t=F.useState(i),[n]=t,s=F.useRef(n),r=no(e);return F.useEffect(()=>{s.current!==n&&(r(n),s.current=n)},[n,s,r]),t}function w4e(i){const e=F.useRef({value:i,previous:i});return F.useMemo(()=>(e.current.value!==i&&(e.current.previous=e.current.value,e.current.value=i),e.current.previous),[i])}var C4e="VisuallyHidden",WW=F.forwardRef((i,e)=>D.jsx(si.span,{...i,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...i.style}}));WW.displayName=C4e;var S4e=WW,k4e=function(i){if(typeof document>"u")return null;var e=Array.isArray(i)?i[0]:i;return e.ownerDocument.body},v_=new WeakMap,SE=new WeakMap,kE={},ZM=0,gle=function(i){return i&&(i.host||gle(i.parentNode))},x4e=function(i,e){return e.map(function(t){if(i.contains(t))return t;var n=gle(t);return n&&i.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",i,". Doing nothing"),null)}).filter(function(t){return!!t})},E4e=function(i,e,t,n){var s=x4e(e,Array.isArray(i)?i:[i]);kE[t]||(kE[t]=new WeakMap);var r=kE[t],o=[],a=new Set,l=new Set(s),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};s.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var g=h.getAttribute(n),p=g!==null&&g!=="false",_=(v_.get(h)||0)+1,v=(r.get(h)||0)+1;v_.set(h,_),r.set(h,v),o.push(h),_===1&&p&&SE.set(h,!0),v===1&&h.setAttribute(t,"true"),p||h.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return u(e),a.clear(),ZM++,function(){o.forEach(function(d){var h=v_.get(d)-1,g=r.get(d)-1;v_.set(d,h),r.set(d,g),h||(SE.has(d)||d.removeAttribute(n),SE.delete(d)),g||d.removeAttribute(t)}),ZM--,ZM||(v_=new WeakMap,v_=new WeakMap,SE=new WeakMap,kE={})}},T4e=function(i,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(i)?i:[i]),s=k4e(i);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),E4e(n,s,t,"aria-hidden")):function(){return null}},$T="right-scroll-bar-position",qT="width-before-scroll-bar",L4e="with-scroll-bars-hidden",I4e="--removed-body-scroll-bar-size";function JM(i,e){return typeof i=="function"?i(e):i&&(i.current=e),i}function D4e(i,e){var t=F.useState(function(){return{value:i,callback:e,facade:{get current(){return t.value},set current(n){var s=t.value;s!==n&&(t.value=n,t.callback(n,s))}}}})[0];return t.callback=e,t.facade}var N4e=typeof window<"u"?F.useLayoutEffect:F.useEffect,LY=new WeakMap;function R4e(i,e){var t=D4e(null,function(n){return i.forEach(function(s){return JM(s,n)})});return N4e(function(){var n=LY.get(t);if(n){var s=new Set(n),r=new Set(i),o=t.current;s.forEach(function(a){r.has(a)||JM(a,null)}),r.forEach(function(a){s.has(a)||JM(a,o)})}LY.set(t,i)},[i]),t}function A4e(i){return i}function P4e(i,e){e===void 0&&(e=A4e);var t=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:i},useMedium:function(r){var o=e(r,n);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(r){for(n=!0;t.length;){var o=t;t=[],o.forEach(r)}t={push:function(a){return r(a)},filter:function(){return t}}},assignMedium:function(r){n=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(r),o=t}var l=function(){var u=o;o=[],u.forEach(r)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),t}}}};return s}function M4e(i){i===void 0&&(i={});var e=P4e(null);return e.options=ud({async:!0,ssr:!1},i),e}var mle=function(i){var e=i.sideCar,t=u2(i,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return F.createElement(n,ud({},t))};mle.isSideCarExport=!0;function O4e(i,e){return i.useMedium(e),mle}var ple=M4e(),eO=function(){},f4=F.forwardRef(function(i,e){var t=F.useRef(null),n=F.useState({onScrollCapture:eO,onWheelCapture:eO,onTouchMoveCapture:eO}),s=n[0],r=n[1],o=i.forwardProps,a=i.children,l=i.className,c=i.removeScrollBar,u=i.enabled,d=i.shards,h=i.sideCar,g=i.noIsolation,p=i.inert,_=i.allowPinchZoom,v=i.as,y=v===void 0?"div":v,w=i.gapMode,x=u2(i,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=h,T=R4e([t,e]),R=ud(ud({},x),s);return F.createElement(F.Fragment,null,u&&F.createElement(k,{sideCar:ple,removeScrollBar:c,shards:d,noIsolation:g,inert:p,setCallbacks:r,allowPinchZoom:!!_,lockRef:t,gapMode:w}),o?F.cloneElement(F.Children.only(a),ud(ud({},R),{ref:T})):F.createElement(y,ud({},R,{className:l,ref:T}),a))});f4.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};f4.classNames={fullWidth:qT,zeroRight:$T};var F4e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function B4e(){if(!document)return null;var i=document.createElement("style");i.type="text/css";var e=F4e();return e&&i.setAttribute("nonce",e),i}function V4e(i,e){i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}function W4e(i){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(i)}var H4e=function(){var i=0,e=null;return{add:function(t){i==0&&(e=B4e())&&(V4e(e,t),W4e(e)),i++},remove:function(){i--,!i&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},U4e=function(){var i=H4e();return function(e,t){F.useEffect(function(){return i.add(e),function(){i.remove()}},[e&&t])}},_le=function(){var i=U4e(),e=function(t){var n=t.styles,s=t.dynamic;return i(n,s),null};return e},z4e={left:0,top:0,right:0,gap:0},tO=function(i){return parseInt(i||"",10)||0},j4e=function(i){var e=window.getComputedStyle(document.body),t=e[i==="padding"?"paddingLeft":"marginLeft"],n=e[i==="padding"?"paddingTop":"marginTop"],s=e[i==="padding"?"paddingRight":"marginRight"];return[tO(t),tO(n),tO(s)]},$4e=function(i){if(i===void 0&&(i="margin"),typeof window>"u")return z4e;var e=j4e(i),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},q4e=_le(),Wv="data-scroll-locked",K4e=function(i,e,t,n){var s=i.left,r=i.top,o=i.right,a=i.gap;return t===void 0&&(t="margin"),`
  .`.concat(L4e,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(Wv,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(r,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat($T,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(qT,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat($T," .").concat($T,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(qT," .").concat(qT,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Wv,`] {
    `).concat(I4e,": ").concat(a,`px;
  }
`)},IY=function(){var i=parseInt(document.body.getAttribute(Wv)||"0",10);return isFinite(i)?i:0},G4e=function(){F.useEffect(function(){return document.body.setAttribute(Wv,(IY()+1).toString()),function(){var i=IY()-1;i<=0?document.body.removeAttribute(Wv):document.body.setAttribute(Wv,i.toString())}},[])},Y4e=function(i){var e=i.noRelative,t=i.noImportant,n=i.gapMode,s=n===void 0?"margin":n;G4e();var r=F.useMemo(function(){return $4e(s)},[s]);return F.createElement(q4e,{styles:K4e(r,!e,s,t?"":"!important")})},f3=!1;if(typeof window<"u")try{var xE=Object.defineProperty({},"passive",{get:function(){return f3=!0,!0}});window.addEventListener("test",xE,xE),window.removeEventListener("test",xE,xE)}catch{f3=!1}var b_=f3?{passive:!1}:!1,Q4e=function(i){return i.tagName==="TEXTAREA"},vle=function(i,e){if(!(i instanceof Element))return!1;var t=window.getComputedStyle(i);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!Q4e(i)&&t[e]==="visible")},X4e=function(i){return vle(i,"overflowY")},Z4e=function(i){return vle(i,"overflowX")},DY=function(i,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=ble(i,n);if(s){var r=yle(i,n),o=r[1],a=r[2];if(o>a)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},J4e=function(i){var e=i.scrollTop,t=i.scrollHeight,n=i.clientHeight;return[e,t,n]},eAe=function(i){var e=i.scrollLeft,t=i.scrollWidth,n=i.clientWidth;return[e,t,n]},ble=function(i,e){return i==="v"?X4e(e):Z4e(e)},yle=function(i,e){return i==="v"?J4e(e):eAe(e)},tAe=function(i,e){return i==="h"&&e==="rtl"?-1:1},nAe=function(i,e,t,n,s){var r=tAe(i,window.getComputedStyle(e).direction),o=r*n,a=t.target,l=e.contains(a),c=!1,u=o>0,d=0,h=0;do{var g=yle(i,a),p=g[0],_=g[1],v=g[2],y=_-v-r*p;(p||y)&&ble(i,a)&&(d+=y,h+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(c=!0),c},EE=function(i){return"changedTouches"in i?[i.changedTouches[0].clientX,i.changedTouches[0].clientY]:[0,0]},NY=function(i){return[i.deltaX,i.deltaY]},RY=function(i){return i&&"current"in i?i.current:i},iAe=function(i,e){return i[0]===e[0]&&i[1]===e[1]},sAe=function(i){return`
  .block-interactivity-`.concat(i,` {pointer-events: none;}
  .allow-interactivity-`).concat(i,` {pointer-events: all;}
`)},rAe=0,y_=[];function oAe(i){var e=F.useRef([]),t=F.useRef([0,0]),n=F.useRef(),s=F.useState(rAe++)[0],r=F.useState(_le)[0],o=F.useRef(i);F.useEffect(function(){o.current=i},[i]),F.useEffect(function(){if(i.inert){document.body.classList.add("block-interactivity-".concat(s));var _=Vwe([i.lockRef.current],(i.shards||[]).map(RY),!0).filter(Boolean);return _.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),_.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[i.inert,i.lockRef.current,i.shards]);var a=F.useCallback(function(_,v){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!o.current.allowPinchZoom;var y=EE(_),w=t.current,x="deltaX"in _?_.deltaX:w[0]-y[0],k="deltaY"in _?_.deltaY:w[1]-y[1],T,R=_.target,L=Math.abs(x)>Math.abs(k)?"h":"v";if("touches"in _&&L==="h"&&R.type==="range")return!1;var I=DY(L,R);if(!I)return!0;if(I?T=L:(T=L==="v"?"h":"v",I=DY(L,R)),!I)return!1;if(!n.current&&"changedTouches"in _&&(x||k)&&(n.current=T),!T)return!0;var A=n.current||T;return nAe(A,v,_,A==="h"?x:k)},[]),l=F.useCallback(function(_){var v=_;if(!(!y_.length||y_[y_.length-1]!==r)){var y="deltaY"in v?NY(v):EE(v),w=e.current.filter(function(T){return T.name===v.type&&(T.target===v.target||v.target===T.shadowParent)&&iAe(T.delta,y)})[0];if(w&&w.should){v.cancelable&&v.preventDefault();return}if(!w){var x=(o.current.shards||[]).map(RY).filter(Boolean).filter(function(T){return T.contains(v.target)}),k=x.length>0?a(v,x[0]):!o.current.noIsolation;k&&v.cancelable&&v.preventDefault()}}},[]),c=F.useCallback(function(_,v,y,w){var x={name:_,delta:v,target:y,should:w,shadowParent:aAe(y)};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(k){return k!==x})},1)},[]),u=F.useCallback(function(_){t.current=EE(_),n.current=void 0},[]),d=F.useCallback(function(_){c(_.type,NY(_),_.target,a(_,i.lockRef.current))},[]),h=F.useCallback(function(_){c(_.type,EE(_),_.target,a(_,i.lockRef.current))},[]);F.useEffect(function(){return y_.push(r),i.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,b_),document.addEventListener("touchmove",l,b_),document.addEventListener("touchstart",u,b_),function(){y_=y_.filter(function(_){return _!==r}),document.removeEventListener("wheel",l,b_),document.removeEventListener("touchmove",l,b_),document.removeEventListener("touchstart",u,b_)}},[]);var g=i.removeScrollBar,p=i.inert;return F.createElement(F.Fragment,null,p?F.createElement(r,{styles:sAe(s)}):null,g?F.createElement(Y4e,{gapMode:i.gapMode}):null)}function aAe(i){for(var e=null;i!==null;)i instanceof ShadowRoot&&(e=i.host,i=i.host),i=i.parentNode;return e}const lAe=O4e(ple,oAe);var wle=F.forwardRef(function(i,e){return F.createElement(f4,ud({},i,{ref:e,sideCar:lAe}))});wle.classNames=f4.classNames;var cAe=[" ","Enter","ArrowUp","ArrowDown"],uAe=[" ","Enter"],C2="Select",[g4,m4,dAe]=Bae(C2),[Ny,Klt]=Vm(C2,[dAe,h4]),p4=h4(),[hAe,Wm]=Ny(C2),[fAe,gAe]=Ny(C2),Cle=i=>{const{__scopeSelect:e,children:t,open:n,defaultOpen:s,onOpenChange:r,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:h,required:g,form:p}=i,_=p4(e),[v,y]=F.useState(null),[w,x]=F.useState(null),[k,T]=F.useState(!1),R=o4(c),[L=!1,I]=nk({prop:n,defaultProp:s,onChange:r}),[A,B]=nk({prop:o,defaultProp:a,onChange:l}),V=F.useRef(null),U=v?p||!!v.closest("form"):!0,[W,G]=F.useState(new Set),Z=Array.from(W).map(ne=>ne.props.value).join(";");return D.jsx(cle,{..._,children:D.jsxs(hAe,{required:g,scope:e,trigger:v,onTriggerChange:y,valueNode:w,onValueNodeChange:x,valueNodeHasChildren:k,onValueNodeHasChildrenChange:T,contentId:Ly(),value:A,onValueChange:B,open:L,onOpenChange:I,dir:R,triggerPointerDownPosRef:V,disabled:h,children:[D.jsx(g4.Provider,{scope:e,children:D.jsx(fAe,{scope:i.__scopeSelect,onNativeOptionAdd:F.useCallback(ne=>{G(fe=>new Set(fe).add(ne))},[]),onNativeOptionRemove:F.useCallback(ne=>{G(fe=>{const te=new Set(fe);return te.delete(ne),te})},[]),children:t})}),U?D.jsxs(Kle,{"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:d,value:A,onChange:ne=>B(ne.target.value),disabled:h,form:p,children:[A===void 0?D.jsx("option",{value:""}):null,Array.from(W)]},Z):null]})})};Cle.displayName=C2;var Sle="SelectTrigger",kle=F.forwardRef((i,e)=>{const{__scopeSelect:t,disabled:n=!1,...s}=i,r=p4(t),o=Wm(Sle,t),a=o.disabled||n,l=Ki(e,o.onTriggerChange),c=m4(t),u=F.useRef("touch"),[d,h,g]=Gle(_=>{const v=c().filter(x=>!x.disabled),y=v.find(x=>x.value===o.value),w=Yle(v,_,y);w!==void 0&&o.onValueChange(w.value)}),p=_=>{a||(o.onOpenChange(!0),g()),_&&(o.triggerPointerDownPosRef.current={x:Math.round(_.pageX),y:Math.round(_.pageY)})};return D.jsx(ule,{asChild:!0,...r,children:D.jsx(si.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":qle(o.value)?"":void 0,...s,ref:l,onClick:Ln(s.onClick,_=>{_.currentTarget.focus(),u.current!=="mouse"&&p(_)}),onPointerDown:Ln(s.onPointerDown,_=>{u.current=_.pointerType;const v=_.target;v.hasPointerCapture(_.pointerId)&&v.releasePointerCapture(_.pointerId),_.button===0&&_.ctrlKey===!1&&_.pointerType==="mouse"&&(p(_),_.preventDefault())}),onKeyDown:Ln(s.onKeyDown,_=>{const v=d.current!=="";!(_.ctrlKey||_.altKey||_.metaKey)&&_.key.length===1&&h(_.key),!(v&&_.key===" ")&&cAe.includes(_.key)&&(p(),_.preventDefault())})})})});kle.displayName=Sle;var xle="SelectValue",Ele=F.forwardRef((i,e)=>{const{__scopeSelect:t,className:n,style:s,children:r,placeholder:o="",...a}=i,l=Wm(xle,t),{onValueNodeHasChildrenChange:c}=l,u=r!==void 0,d=Ki(e,l.onValueNodeChange);return ao(()=>{c(u)},[c,u]),D.jsx(si.span,{...a,ref:d,style:{pointerEvents:"none"},children:qle(l.value)?D.jsx(D.Fragment,{children:o}):r})});Ele.displayName=xle;var mAe="SelectIcon",Tle=F.forwardRef((i,e)=>{const{__scopeSelect:t,children:n,...s}=i;return D.jsx(si.span,{"aria-hidden":!0,...s,ref:e,children:n||""})});Tle.displayName=mAe;var pAe="SelectPortal",Lle=i=>D.jsx(fle,{asChild:!0,...i});Lle.displayName=pAe;var j0="SelectContent",Ile=F.forwardRef((i,e)=>{const t=Wm(j0,i.__scopeSelect),[n,s]=F.useState();if(ao(()=>{s(new DocumentFragment)},[]),!t.open){const r=n;return r?l2.createPortal(D.jsx(Dle,{scope:i.__scopeSelect,children:D.jsx(g4.Slot,{scope:i.__scopeSelect,children:D.jsx("div",{children:i.children})})}),r):null}return D.jsx(Nle,{...i,ref:e})});Ile.displayName=j0;var zc=10,[Dle,Hm]=Ny(j0),_Ae="SelectContentImpl",Nle=F.forwardRef((i,e)=>{const{__scopeSelect:t,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:r,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:g,sticky:p,hideWhenDetached:_,avoidCollisions:v,...y}=i,w=Wm(j0,t),[x,k]=F.useState(null),[T,R]=F.useState(null),L=Ki(e,We=>k(We)),[I,A]=F.useState(null),[B,V]=F.useState(null),U=m4(t),[W,G]=F.useState(!1),Z=F.useRef(!1);F.useEffect(()=>{if(x)return T4e(x)},[x]),iRe();const ne=F.useCallback(We=>{const[at,...Ft]=U().map(Zt=>Zt.ref.current),[_t]=Ft.slice(-1),Nt=document.activeElement;for(const Zt of We)if(Zt===Nt||(Zt==null||Zt.scrollIntoView({block:"nearest"}),Zt===at&&T&&(T.scrollTop=0),Zt===_t&&T&&(T.scrollTop=T.scrollHeight),Zt==null||Zt.focus(),document.activeElement!==Nt))return},[U,T]),fe=F.useCallback(()=>ne([I,x]),[ne,I,x]);F.useEffect(()=>{W&&fe()},[W,fe]);const{onOpenChange:te,triggerPointerDownPosRef:ce}=w;F.useEffect(()=>{if(x){let We={x:0,y:0};const at=_t=>{var Nt,Zt;We={x:Math.abs(Math.round(_t.pageX)-(((Nt=ce.current)==null?void 0:Nt.x)??0)),y:Math.abs(Math.round(_t.pageY)-(((Zt=ce.current)==null?void 0:Zt.y)??0))}},Ft=_t=>{We.x<=10&&We.y<=10?_t.preventDefault():x.contains(_t.target)||te(!1),document.removeEventListener("pointermove",at),ce.current=null};return ce.current!==null&&(document.addEventListener("pointermove",at),document.addEventListener("pointerup",Ft,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",at),document.removeEventListener("pointerup",Ft,{capture:!0})}}},[x,te,ce]),F.useEffect(()=>{const We=()=>te(!1);return window.addEventListener("blur",We),window.addEventListener("resize",We),()=>{window.removeEventListener("blur",We),window.removeEventListener("resize",We)}},[te]);const[ve,X]=Gle(We=>{const at=U().filter(Nt=>!Nt.disabled),Ft=at.find(Nt=>Nt.ref.current===document.activeElement),_t=Yle(at,We,Ft);_t&&setTimeout(()=>_t.ref.current.focus())}),oe=F.useCallback((We,at,Ft)=>{const _t=!Z.current&&!Ft;(w.value!==void 0&&w.value===at||_t)&&(A(We),_t&&(Z.current=!0))},[w.value]),Ne=F.useCallback(()=>x==null?void 0:x.focus(),[x]),Ie=F.useCallback((We,at,Ft)=>{const _t=!Z.current&&!Ft;(w.value!==void 0&&w.value===at||_t)&&V(We)},[w.value]),Oe=n==="popper"?g3:Rle,it=Oe===g3?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:g,sticky:p,hideWhenDetached:_,avoidCollisions:v}:{};return D.jsx(Dle,{scope:t,content:x,viewport:T,onViewportChange:R,itemRefCallback:oe,selectedItem:I,onItemLeave:Ne,itemTextRefCallback:Ie,focusSelectedItem:fe,selectedItemText:B,position:n,isPositioned:W,searchRef:ve,children:D.jsx(wle,{as:JS,allowPinchZoom:!0,children:D.jsx(Hae,{asChild:!0,trapped:w.open,onMountAutoFocus:We=>{We.preventDefault()},onUnmountAutoFocus:Ln(s,We=>{var at;(at=w.trigger)==null||at.focus({preventScroll:!0}),We.preventDefault()}),children:D.jsx(DW,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:We=>We.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:D.jsx(Oe,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:We=>We.preventDefault(),...y,...it,onPlaced:()=>G(!0),ref:L,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Ln(y.onKeyDown,We=>{const at=We.ctrlKey||We.altKey||We.metaKey;if(We.key==="Tab"&&We.preventDefault(),!at&&We.key.length===1&&X(We.key),["ArrowUp","ArrowDown","Home","End"].includes(We.key)){let _t=U().filter(Nt=>!Nt.disabled).map(Nt=>Nt.ref.current);if(["ArrowUp","End"].includes(We.key)&&(_t=_t.slice().reverse()),["ArrowUp","ArrowDown"].includes(We.key)){const Nt=We.target,Zt=_t.indexOf(Nt);_t=_t.slice(Zt+1)}setTimeout(()=>ne(_t)),We.preventDefault()}})})})})})})});Nle.displayName=_Ae;var vAe="SelectItemAlignedPosition",Rle=F.forwardRef((i,e)=>{const{__scopeSelect:t,onPlaced:n,...s}=i,r=Wm(j0,t),o=Hm(j0,t),[a,l]=F.useState(null),[c,u]=F.useState(null),d=Ki(e,L=>u(L)),h=m4(t),g=F.useRef(!1),p=F.useRef(!0),{viewport:_,selectedItem:v,selectedItemText:y,focusSelectedItem:w}=o,x=F.useCallback(()=>{if(r.trigger&&r.valueNode&&a&&c&&_&&v&&y){const L=r.trigger.getBoundingClientRect(),I=c.getBoundingClientRect(),A=r.valueNode.getBoundingClientRect(),B=y.getBoundingClientRect();if(r.dir!=="rtl"){const Nt=B.left-I.left,Zt=A.left-Nt,on=L.left-Zt,zn=L.width+on,sr=Math.max(zn,I.width),Or=window.innerWidth-zc,Ts=l3(Zt,[zc,Math.max(zc,Or-sr)]);a.style.minWidth=zn+"px",a.style.left=Ts+"px"}else{const Nt=I.right-B.right,Zt=window.innerWidth-A.right-Nt,on=window.innerWidth-L.right-Zt,zn=L.width+on,sr=Math.max(zn,I.width),Or=window.innerWidth-zc,Ts=l3(Zt,[zc,Math.max(zc,Or-sr)]);a.style.minWidth=zn+"px",a.style.right=Ts+"px"}const V=h(),U=window.innerHeight-zc*2,W=_.scrollHeight,G=window.getComputedStyle(c),Z=parseInt(G.borderTopWidth,10),ne=parseInt(G.paddingTop,10),fe=parseInt(G.borderBottomWidth,10),te=parseInt(G.paddingBottom,10),ce=Z+ne+W+te+fe,ve=Math.min(v.offsetHeight*5,ce),X=window.getComputedStyle(_),oe=parseInt(X.paddingTop,10),Ne=parseInt(X.paddingBottom,10),Ie=L.top+L.height/2-zc,Oe=U-Ie,it=v.offsetHeight/2,We=v.offsetTop+it,at=Z+ne+We,Ft=ce-at;if(at<=Ie){const Nt=V.length>0&&v===V[V.length-1].ref.current;a.style.bottom="0px";const Zt=c.clientHeight-_.offsetTop-_.offsetHeight,on=Math.max(Oe,it+(Nt?Ne:0)+Zt+fe),zn=at+on;a.style.height=zn+"px"}else{const Nt=V.length>0&&v===V[0].ref.current;a.style.top="0px";const on=Math.max(Ie,Z+_.offsetTop+(Nt?oe:0)+it)+Ft;a.style.height=on+"px",_.scrollTop=at-Ie+_.offsetTop}a.style.margin=`${zc}px 0`,a.style.minHeight=ve+"px",a.style.maxHeight=U+"px",n==null||n(),requestAnimationFrame(()=>g.current=!0)}},[h,r.trigger,r.valueNode,a,c,_,v,y,r.dir,n]);ao(()=>x(),[x]);const[k,T]=F.useState();ao(()=>{c&&T(window.getComputedStyle(c).zIndex)},[c]);const R=F.useCallback(L=>{L&&p.current===!0&&(x(),w==null||w(),p.current=!1)},[x,w]);return D.jsx(yAe,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:R,children:D.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:D.jsx(si.div,{...s,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Rle.displayName=vAe;var bAe="SelectPopperPosition",g3=F.forwardRef((i,e)=>{const{__scopeSelect:t,align:n="start",collisionPadding:s=zc,...r}=i,o=p4(t);return D.jsx(dle,{...o,...r,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...r.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});g3.displayName=bAe;var[yAe,HW]=Ny(j0,{}),m3="SelectViewport",Ale=F.forwardRef((i,e)=>{const{__scopeSelect:t,nonce:n,...s}=i,r=Hm(m3,t),o=HW(m3,t),a=Ki(e,r.onViewportChange),l=F.useRef(0);return D.jsxs(D.Fragment,{children:[D.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),D.jsx(g4.Slot,{scope:t,children:D.jsx(si.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Ln(s.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&d){const g=Math.abs(l.current-u.scrollTop);if(g>0){const p=window.innerHeight-zc*2,_=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),y=Math.max(_,v);if(y<p){const w=y+g,x=Math.min(p,w),k=w-x;d.style.height=x+"px",d.style.bottom==="0px"&&(u.scrollTop=k>0?k:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});Ale.displayName=m3;var Ple="SelectGroup",[wAe,CAe]=Ny(Ple),SAe=F.forwardRef((i,e)=>{const{__scopeSelect:t,...n}=i,s=Ly();return D.jsx(wAe,{scope:t,id:s,children:D.jsx(si.div,{role:"group","aria-labelledby":s,...n,ref:e})})});SAe.displayName=Ple;var Mle="SelectLabel",Ole=F.forwardRef((i,e)=>{const{__scopeSelect:t,...n}=i,s=CAe(Mle,t);return D.jsx(si.div,{id:s.id,...n,ref:e})});Ole.displayName=Mle;var CI="SelectItem",[kAe,Fle]=Ny(CI),Ble=F.forwardRef((i,e)=>{const{__scopeSelect:t,value:n,disabled:s=!1,textValue:r,...o}=i,a=Wm(CI,t),l=Hm(CI,t),c=a.value===n,[u,d]=F.useState(r??""),[h,g]=F.useState(!1),p=Ki(e,w=>{var x;return(x=l.itemRefCallback)==null?void 0:x.call(l,w,n,s)}),_=Ly(),v=F.useRef("touch"),y=()=>{s||(a.onValueChange(n),a.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return D.jsx(kAe,{scope:t,value:n,disabled:s,textId:_,isSelected:c,onItemTextChange:F.useCallback(w=>{d(x=>x||((w==null?void 0:w.textContent)??"").trim())},[]),children:D.jsx(g4.ItemSlot,{scope:t,value:n,disabled:s,textValue:u,children:D.jsx(si.div,{role:"option","aria-labelledby":_,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:p,onFocus:Ln(o.onFocus,()=>g(!0)),onBlur:Ln(o.onBlur,()=>g(!1)),onClick:Ln(o.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:Ln(o.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:Ln(o.onPointerDown,w=>{v.current=w.pointerType}),onPointerMove:Ln(o.onPointerMove,w=>{var x;v.current=w.pointerType,s?(x=l.onItemLeave)==null||x.call(l):v.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ln(o.onPointerLeave,w=>{var x;w.currentTarget===document.activeElement&&((x=l.onItemLeave)==null||x.call(l))}),onKeyDown:Ln(o.onKeyDown,w=>{var k;((k=l.searchRef)==null?void 0:k.current)!==""&&w.key===" "||(uAe.includes(w.key)&&y(),w.key===" "&&w.preventDefault())})})})})});Ble.displayName=CI;var fC="SelectItemText",Vle=F.forwardRef((i,e)=>{const{__scopeSelect:t,className:n,style:s,...r}=i,o=Wm(fC,t),a=Hm(fC,t),l=Fle(fC,t),c=gAe(fC,t),[u,d]=F.useState(null),h=Ki(e,y=>d(y),l.onItemTextChange,y=>{var w;return(w=a.itemTextRefCallback)==null?void 0:w.call(a,y,l.value,l.disabled)}),g=u==null?void 0:u.textContent,p=F.useMemo(()=>D.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:_,onNativeOptionRemove:v}=c;return ao(()=>(_(p),()=>v(p)),[_,v,p]),D.jsxs(D.Fragment,{children:[D.jsx(si.span,{id:l.textId,...r,ref:h}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?l2.createPortal(r.children,o.valueNode):null]})});Vle.displayName=fC;var Wle="SelectItemIndicator",Hle=F.forwardRef((i,e)=>{const{__scopeSelect:t,...n}=i;return Fle(Wle,t).isSelected?D.jsx(si.span,{"aria-hidden":!0,...n,ref:e}):null});Hle.displayName=Wle;var p3="SelectScrollUpButton",Ule=F.forwardRef((i,e)=>{const t=Hm(p3,i.__scopeSelect),n=HW(p3,i.__scopeSelect),[s,r]=F.useState(!1),o=Ki(e,n.onScrollButtonChange);return ao(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollTop>0;r(c)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?D.jsx(jle,{...i,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});Ule.displayName=p3;var _3="SelectScrollDownButton",zle=F.forwardRef((i,e)=>{const t=Hm(_3,i.__scopeSelect),n=HW(_3,i.__scopeSelect),[s,r]=F.useState(!1),o=Ki(e,n.onScrollButtonChange);return ao(()=>{if(t.viewport&&t.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;r(u)};const l=t.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?D.jsx(jle,{...i,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=t;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});zle.displayName=_3;var jle=F.forwardRef((i,e)=>{const{__scopeSelect:t,onAutoScroll:n,...s}=i,r=Hm("SelectScrollButton",t),o=F.useRef(null),a=m4(t),l=F.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return F.useEffect(()=>()=>l(),[l]),ao(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),D.jsx(si.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Ln(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Ln(s.onPointerMove,()=>{var c;(c=r.onItemLeave)==null||c.call(r),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Ln(s.onPointerLeave,()=>{l()})})}),xAe="SelectSeparator",$le=F.forwardRef((i,e)=>{const{__scopeSelect:t,...n}=i;return D.jsx(si.div,{"aria-hidden":!0,...n,ref:e})});$le.displayName=xAe;var v3="SelectArrow",EAe=F.forwardRef((i,e)=>{const{__scopeSelect:t,...n}=i,s=p4(t),r=Wm(v3,t),o=Hm(v3,t);return r.open&&o.position==="popper"?D.jsx(hle,{...s,...n,ref:e}):null});EAe.displayName=v3;function qle(i){return i===""||i===void 0}var Kle=F.forwardRef((i,e)=>{const{value:t,...n}=i,s=F.useRef(null),r=Ki(e,s),o=w4e(t);return F.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==t&&u){const d=new Event("change",{bubbles:!0});u.call(a,t),a.dispatchEvent(d)}},[o,t]),D.jsx(WW,{asChild:!0,children:D.jsx("select",{...n,ref:r,defaultValue:t})})});Kle.displayName="BubbleSelect";function Gle(i){const e=no(i),t=F.useRef(""),n=F.useRef(0),s=F.useCallback(o=>{const a=t.current+o;e(a),function l(c){t.current=c,window.clearTimeout(n.current),c!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),r=F.useCallback(()=>{t.current="",window.clearTimeout(n.current)},[]);return F.useEffect(()=>()=>window.clearTimeout(n.current),[]),[t,s,r]}function Yle(i,e,t){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,r=t?i.indexOf(t):-1;let o=TAe(i,Math.max(r,0));s.length===1&&(o=o.filter(c=>c!==t));const l=o.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==t?l:void 0}function TAe(i,e){return i.map((t,n)=>i[(e+n)%i.length])}var LAe=Cle,Qle=kle,IAe=Ele,DAe=Tle,NAe=Lle,Xle=Ile,RAe=Ale,Zle=Ole,Jle=Ble,AAe=Vle,PAe=Hle,ece=Ule,tce=zle,nce=$le;const OC=LAe,FC=IAe,Hv=F.forwardRef(({className:i,children:e,...t},n)=>D.jsxs(Qle,{ref:n,className:Js("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",i),...t,children:[e,D.jsx(DAe,{asChild:!0,children:D.jsx(fW,{className:"h-4 w-4 opacity-50"})})]}));Hv.displayName=Qle.displayName;const ice=F.forwardRef(({className:i,...e},t)=>D.jsx(ece,{ref:t,className:Js("flex cursor-default items-center justify-center py-1",i),...e,children:D.jsx(rLe,{className:"h-4 w-4"})}));ice.displayName=ece.displayName;const sce=F.forwardRef(({className:i,...e},t)=>D.jsx(tce,{ref:t,className:Js("flex cursor-default items-center justify-center py-1",i),...e,children:D.jsx(fW,{className:"h-4 w-4"})}));sce.displayName=tce.displayName;const Uv=F.forwardRef(({className:i,children:e,position:t="popper",...n},s)=>D.jsx(NAe,{children:D.jsxs(Xle,{ref:s,className:Js("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",i),position:t,...n,children:[D.jsx(ice,{}),D.jsx(RAe,{className:Js("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),D.jsx(sce,{})]})}));Uv.displayName=Xle.displayName;const MAe=F.forwardRef(({className:i,...e},t)=>D.jsx(Zle,{ref:t,className:Js("py-1.5 pl-8 pr-2 text-sm font-semibold",i),...e}));MAe.displayName=Zle.displayName;const wl=F.forwardRef(({className:i,children:e,...t},n)=>D.jsxs(Jle,{ref:n,className:Js("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i),...t,children:[D.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:D.jsx(PAe,{children:D.jsx(yoe,{className:"h-4 w-4"})})}),D.jsx(AAe,{children:e})]}));wl.displayName=Jle.displayName;const OAe=F.forwardRef(({className:i,...e},t)=>D.jsx(nce,{ref:t,className:Js("-mx-1 my-1 h-px bg-muted",i),...e}));OAe.displayName=nce.displayName;var[_4,Glt]=Vm("Tooltip",[h4]),v4=h4(),rce="TooltipProvider",FAe=700,b3="tooltip.open",[BAe,UW]=_4(rce),oce=i=>{const{__scopeTooltip:e,delayDuration:t=FAe,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:r}=i,[o,a]=F.useState(!0),l=F.useRef(!1),c=F.useRef(0);return F.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),D.jsx(BAe,{scope:e,isOpenDelayed:o,delayDuration:t,onOpen:F.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:F.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:F.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:r})};oce.displayName=rce;var b4="Tooltip",[VAe,y4]=_4(b4),ace=i=>{const{__scopeTooltip:e,children:t,open:n,defaultOpen:s=!1,onOpenChange:r,disableHoverableContent:o,delayDuration:a}=i,l=UW(b4,i.__scopeTooltip),c=v4(e),[u,d]=F.useState(null),h=Ly(),g=F.useRef(0),p=o??l.disableHoverableContent,_=a??l.delayDuration,v=F.useRef(!1),[y=!1,w]=nk({prop:n,defaultProp:s,onChange:L=>{L?(l.onOpen(),document.dispatchEvent(new CustomEvent(b3))):l.onClose(),r==null||r(L)}}),x=F.useMemo(()=>y?v.current?"delayed-open":"instant-open":"closed",[y]),k=F.useCallback(()=>{window.clearTimeout(g.current),g.current=0,v.current=!1,w(!0)},[w]),T=F.useCallback(()=>{window.clearTimeout(g.current),g.current=0,w(!1)},[w]),R=F.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{v.current=!0,w(!0),g.current=0},_)},[_,w]);return F.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),D.jsx(cle,{...c,children:D.jsx(VAe,{scope:e,contentId:h,open:y,stateAttribute:x,trigger:u,onTriggerChange:d,onTriggerEnter:F.useCallback(()=>{l.isOpenDelayed?R():k()},[l.isOpenDelayed,R,k]),onTriggerLeave:F.useCallback(()=>{p?T():(window.clearTimeout(g.current),g.current=0)},[T,p]),onOpen:k,onClose:T,disableHoverableContent:p,children:t})})};ace.displayName=b4;var y3="TooltipTrigger",lce=F.forwardRef((i,e)=>{const{__scopeTooltip:t,...n}=i,s=y4(y3,t),r=UW(y3,t),o=v4(t),a=F.useRef(null),l=Ki(e,a,s.onTriggerChange),c=F.useRef(!1),u=F.useRef(!1),d=F.useCallback(()=>c.current=!1,[]);return F.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),D.jsx(ule,{asChild:!0,...o,children:D.jsx(si.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:l,onPointerMove:Ln(i.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!r.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:Ln(i.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:Ln(i.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Ln(i.onFocus,()=>{c.current||s.onOpen()}),onBlur:Ln(i.onBlur,s.onClose),onClick:Ln(i.onClick,s.onClose)})})});lce.displayName=y3;var WAe="TooltipPortal",[Ylt,HAe]=_4(WAe,{forceMount:void 0}),Ob="TooltipContent",cce=F.forwardRef((i,e)=>{const t=HAe(Ob,i.__scopeTooltip),{forceMount:n=t.forceMount,side:s="top",...r}=i,o=y4(Ob,i.__scopeTooltip);return D.jsx(b1,{present:n||o.open,children:o.disableHoverableContent?D.jsx(uce,{side:s,...r,ref:e}):D.jsx(UAe,{side:s,...r,ref:e})})}),UAe=F.forwardRef((i,e)=>{const t=y4(Ob,i.__scopeTooltip),n=UW(Ob,i.__scopeTooltip),s=F.useRef(null),r=Ki(e,s),[o,a]=F.useState(null),{trigger:l,onClose:c}=t,u=s.current,{onPointerInTransitChange:d}=n,h=F.useCallback(()=>{a(null),d(!1)},[d]),g=F.useCallback((p,_)=>{const v=p.currentTarget,y={x:p.clientX,y:p.clientY},w=qAe(y,v.getBoundingClientRect()),x=KAe(y,w),k=GAe(_.getBoundingClientRect()),T=QAe([...x,...k]);a(T),d(!0)},[d]);return F.useEffect(()=>()=>h(),[h]),F.useEffect(()=>{if(l&&u){const p=v=>g(v,u),_=v=>g(v,l);return l.addEventListener("pointerleave",p),u.addEventListener("pointerleave",_),()=>{l.removeEventListener("pointerleave",p),u.removeEventListener("pointerleave",_)}}},[l,u,g,h]),F.useEffect(()=>{if(o){const p=_=>{const v=_.target,y={x:_.clientX,y:_.clientY},w=(l==null?void 0:l.contains(v))||(u==null?void 0:u.contains(v)),x=!YAe(y,o);w?h():x&&(h(),c())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[l,u,o,c,h]),D.jsx(uce,{...i,ref:r})}),[zAe,jAe]=_4(b4,{isInside:!1}),uce=F.forwardRef((i,e)=>{const{__scopeTooltip:t,children:n,"aria-label":s,onEscapeKeyDown:r,onPointerDownOutside:o,...a}=i,l=y4(Ob,t),c=v4(t),{onClose:u}=l;return F.useEffect(()=>(document.addEventListener(b3,u),()=>document.removeEventListener(b3,u)),[u]),F.useEffect(()=>{if(l.trigger){const d=h=>{const g=h.target;g!=null&&g.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),D.jsx(DW,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:D.jsxs(dle,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[D.jsx(dae,{children:n}),D.jsx(zAe,{scope:t,isInside:!0,children:D.jsx(S4e,{id:l.contentId,role:"tooltip",children:s||n})})]})})});cce.displayName=Ob;var dce="TooltipArrow",$Ae=F.forwardRef((i,e)=>{const{__scopeTooltip:t,...n}=i,s=v4(t);return jAe(dce,t).isInside?null:D.jsx(hle,{...s,...n,ref:e})});$Ae.displayName=dce;function qAe(i,e){const t=Math.abs(e.top-i.y),n=Math.abs(e.bottom-i.y),s=Math.abs(e.right-i.x),r=Math.abs(e.left-i.x);switch(Math.min(t,n,s,r)){case r:return"left";case s:return"right";case t:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function KAe(i,e,t=5){const n=[];switch(e){case"top":n.push({x:i.x-t,y:i.y+t},{x:i.x+t,y:i.y+t});break;case"bottom":n.push({x:i.x-t,y:i.y-t},{x:i.x+t,y:i.y-t});break;case"left":n.push({x:i.x+t,y:i.y-t},{x:i.x+t,y:i.y+t});break;case"right":n.push({x:i.x-t,y:i.y-t},{x:i.x-t,y:i.y+t});break}return n}function GAe(i){const{top:e,right:t,bottom:n,left:s}=i;return[{x:s,y:e},{x:t,y:e},{x:t,y:n},{x:s,y:n}]}function YAe(i,e){const{x:t,y:n}=i;let s=!1;for(let r=0,o=e.length-1;r<e.length;o=r++){const a=e[r].x,l=e[r].y,c=e[o].x,u=e[o].y;l>n!=u>n&&t<(c-a)*(n-l)/(u-l)+a&&(s=!s)}return s}function QAe(i){const e=i.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),XAe(e)}function XAe(i){if(i.length<=1)return i.slice();const e=[];for(let n=0;n<i.length;n++){const s=i[n];for(;e.length>=2;){const r=e[e.length-1],o=e[e.length-2];if((r.x-o.x)*(s.y-o.y)>=(r.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let n=i.length-1;n>=0;n--){const s=i[n];for(;t.length>=2;){const r=t[t.length-1],o=t[t.length-2];if((r.x-o.x)*(s.y-o.y)>=(r.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var ZAe=oce,JAe=ace,ePe=lce,hce=cce;const w_=ZAe,C_=JAe,S_=ePe,Sp=F.forwardRef(({className:i,sideOffset:e=4,...t},n)=>D.jsx(hce,{ref:n,sideOffset:e,className:Js("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",i),...t}));Sp.displayName=hce.displayName;const tPe=({theme:i,leftSidebarOpen:e,setLeftSidebarOpen:t,rightSidebarOpen:n,setRightSidebarOpen:s,rightSidebarTab:r,selectedLanguage:o,setSelectedLanguage:a,handleRunCode:l,isLoading:c,showRunWithInput:u,setShowRunWithInput:d,toggleTheme:h,setVersionControlExpanded:g,versionControlExpanded:p,setSettingsExpanded:_,settingsExpanded:v,sessionId:y,languages:w})=>D.jsxs("div",{className:"flex items-center justify-between p-2 border-b",children:[D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx(Zi,{variant:"ghost",size:"icon",className:`rounded-xl bg-transparent text-black ${i==="light"?"hover:bg-gray-100 text-black":"hover:bg-gray-800 text-white"}`,onClick:()=>t(!e),children:D.jsx(Eoe,{className:"w-5 h-5 bg-transparent"})}),D.jsx("div",{className:"w-[215px] h-[50px] flex items-center justify-center bg-transparent",children:D.jsxs("svg",{width:"215.39307556152343",height:"50.626132567226996",viewBox:"0 0 383.8999938964844 90.23211137541728",class:"looka-1j8o68f",children:[D.jsx("defs",{id:"SvgjsDefs4865"}),D.jsx("g",{id:"SvgjsG4866",featurekey:"symbolFeature-0",transform:"matrix(0.6898787855261039,0,0,0.6898787855261039,-13.310095387583845,-2.90760899534669)",fill:i==="light"?"#000000":"#ffffff",children:D.jsx("path",{xmlns:"http://www.w3.org/2000/svg",d:"M96.63 57.12q11.83 7.36 23.98 14.42c4.75 2.76 4.29 5.89-.18 8.46q-3.3 1.89-6.48 3.64-.8.44-.02.91l6.97 4.19a4.64 4.63-74.5 0 1 2.24 3.97v17.42a4.2 4.2 0 0 1-2.05 3.61q-10.37 6.18-21.01 12.58c-2.5 1.51-3.82 1.71-6.39.13q-13.16-8.08-21.94-13.31a.63.63 0 0 0-.64 0l-23.23 13.88a4.18 4.15 45 0 1-4.27-.01l-21.55-12.96a3.87 3.86 15.6 0 1-1.87-3.31q.01-11.33-.01-17.49-.02-3.31 2.55-4.76 3.07-1.73 6.62-4.05a.31.31 0 0 0-.02-.53q-6.07-3.54-8.62-5.19-1.57-1.02-1.4-3.41c.15-1.92 1.7-2.78 3.31-3.74q9.73-5.76 23.85-14.27.46-.28.16-.73c-.49-.73-1.02-1.43-1.03-2.51q-.02-17.99.01-25.14a4.73 4.72 74.6 0 1 2.28-4.03q9.96-5.99 20.84-12.4 2.97-1.75 5.04-.52 15.95 9.45 20.69 12.07 3.17 1.74 3.2 4.7.1 12.03-.04 25.02-.01.82-1.17 2.58-.31.48.18.78m-25.56-12.7q.53-2.61 2.69-3.93 5.89-3.61 17.45-11.03a.31.31 0 0 0-.01-.53L72.17 17.49a.79.79 0 0 0-.82 0L52.33 28.85a1.95 1.95 0 0 0-.94 1.67v22.29a2.23 2.22 15.7 0 0 1.07 1.9l18.03 10.84a.36.35-74.5 0 0 .54-.31l.02-20.56a1.77 1.64-42.8 0 1 .02-.26m26.42 28.32c2.06 1.44 2.23 4.4-.02 5.75Q79.09 89.54 73.35 92.96a3.74 3.72 44.9 0 1-3.83-.01Q59.11 86.71 47.76 79.7c-1.31-.81-2.87-1.56-3.41-2.97-.87-2.26.63-3.76 2.48-4.89q5.13-3.1 11.23-6.78a.16.16 0 0 0 0-.27l-6.3-3.78q-.24-.15-.48 0L27.46 75.24a.47.47 0 0 0-.01.81l43.38 26.09a1.14 1.12 44.6 0 0 1.15 0l43.89-26.22a.3.3 0 0 0 0-.52L91.29 60.62q-.17-.11-.34 0l-6.4 3.82a.18.17 44 0 0 .01.3q8.83 5.14 12.93 8m-32 11.01q0 .18.08.23 2.9 1.66 5.73 3.44.01.01.14.02.06.01.12.01t.12-.01q.13-.01.14-.02 2.83-1.78 5.73-3.44.07-.05.07-.23t-.07-.23q-2.9-1.66-5.73-3.44-.01-.01-.14-.02-.06-.01-.12-.01t-.12.01q-.13.01-.14.02-2.83 1.78-5.73 3.44-.08.05-.08.23M45.6 121.56a.35.35 0 0 0 .36 0l22.62-13.51a.35.35 0 0 0 0-.6l-19.1-11.48a.35.35 0 0 0-.36 0l-22.62 13.5a.35.35 0 0 0 0 .6zm70.54-11.46a.34.34 0 0 0 0-.58L93.65 95.99a.34.34 0 0 0-.34 0l-19.13 11.43a.34.34 0 0 0 0 .58l22.49 13.53a.34.34 0 0 0 .34 0z"})}),D.jsxs("g",{id:"SvgjsG4867",featurekey:"textGroupContainer",transform:"matrix(1,0,0,1,92,4)",fill:i==="light"?"#000000":"#ffffff",children:[D.jsx("rect",{xmlns:"http://www.w3.org/2000/svg",y:"0",x:"0",height:"1",width:"1",opacity:"0"}),D.jsx("rect",{xmlns:"http://www.w3.org/2000/svg",y:"80.88",x:"0",width:"28",height:"2"}),D.jsx("rect",{xmlns:"http://www.w3.org/2000/svg",y:"80.88",x:"263.9",width:"28",height:"2"})]}),D.jsx("g",{id:"SvgjsG4868",featurekey:"nameFeature-0",transform:"matrix(2.189502365161019,0,0,2.189502365161019,96.37259705740317,-26.274026293860054)",fill:i==="light"?"#000000":"#ffffff",children:D.jsx("path",{d:"M4.92 40 l-3.72 -3.72 l0 -20.56 l3.72 -3.72 l8.8 0 l3.72 3.72 l0 5.24 l-5.04 0 l0 -3.16 l-0.76 -0.76 l-4.64 0 l-0.76 0.76 l0 16.4 l0.76 0.76 l4.64 0 l0.76 -0.76 l0 -3.16 l5.04 0 l0 5.24 l-3.72 3.72 l-8.8 0 z M24.137999999999998 40 l-3.72 -3.72 l0 -20.56 l3.72 -3.72 l9.08 0 l3.72 3.72 l0 20.56 l-3.72 3.72 l-9.08 0 z M26.218 34.96 l4.92 0 l0.76 -0.76 l0 -16.4 l-0.76 -0.76 l-4.92 0 l-0.76 0.76 l0 16.4 z M39.916000000000004 40 l0 -4.48 l0.84 -0.56 l0 -17.92 l-0.84 -0.56 l0 -4.48 l6.72 0 l0 4.48 l-0.84 0.56 l0 17.92 l2.8 0 l0.56 -0.84 l4.48 0 l0 5.88 l-13.72 0 z M56.614000000000004 40 l0 -4.48 l0.84 -0.56 l0 -17.92 l-0.84 -0.56 l0 -4.48 l6.72 0 l0 4.48 l-0.84 0.56 l0 17.92 l2.8 0 l0.56 -0.84 l4.48 0 l0 5.88 l-13.72 0 z M72.512 40 l0 -4.48 l0.84 -0.56 l3.64 -17.92 l-0.84 -0.56 l0 -4.48 l10.64 0 l0 4.48 l-0.84 0.56 l3.64 17.92 l0.84 0.56 l0 4.48 l-4.96 0 l-1.24 -6.16 l-5.52 0 l-1.24 6.16 l-4.96 0 z M79.752 28.8 l3.44 0 l-1.72 -8.56 z M92.61 40 l0 -4.48 l0.84 -0.56 l0 -17.92 l-0.84 -0.56 l0 -4.48 l12.52 0 l3.72 3.72 l0 8.24 l-2.04 2.04 l2.04 2.04 l0 8.24 l-3.72 3.72 l-12.52 0 z M98.49 34.96 l4.56 0 l0.76 -0.76 l0 -4.08 l-1.6 -1.6 l-3.72 0 l0 6.44 z M98.49 23.48 l3.72 0 l1.6 -1.6 l0 -4.08 l-0.76 -0.76 l-4.56 0 l0 6.44 z M111.828 40 l0 -4.48 l1.16 -0.76 l3.16 -8.76 l-3.16 -8.76 l-1.16 -0.76 l0 -4.48 l4.6 0 l3.52 9.68 l3.52 -9.68 l4.6 0 l0 4.48 l-1.16 0.76 l-3.16 8.76 l3.16 8.76 l1.16 0.76 l0 4.48 l-4.6 0 l-3.52 -9.68 l-3.52 9.68 l-4.6 0 z"})}),D.jsx("g",{id:"SvgjsG4869",featurekey:"sloganFeature-0",transform:"matrix(0.7101623092992436,0,0,0.7101623092992436,126.28983769070075,75.94364511632456)",fill:i==="light"?"#000000":"#ffffff",children:D.jsx("path",{d:"M1.26 20 c-0.16 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.1 -0.26 0.26 -0.26 l4.88 0 c1.52 0 2.72 0.38 3.56 1.16 c1.24 1.12 1.66 3.24 1.06 4.8 c-0.22 0.56 -0.6 1.08 -1.08 1.46 c-0.28 0.22 -0.58 0.38 -0.88 0.54 c0.86 1.36 2.16 4.12 2.16 4.12 c0.02 0.04 0.06 0.1 0.06 0.16 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.96 0 c-0.08 0 -0.18 -0.06 -0.22 -0.14 l-1.74 -3.82 c-0.62 0.04 -1.1 0.02 -1.74 0.02 l0 3.68 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.58 0 z M4.1 13.280000000000001 c0 0 2.52 0.28 3.4 -0.3 c0.34 -0.22 0.54 -0.76 0.54 -1.16 c-0.02 -0.44 -0.24 -0.9 -0.6 -1.18 c-0.38 -0.32 -1.32 -0.42 -1.8 -0.42 l-1.54 0.04 l0 3.02 z M14.1455 20 l0 -11.98 c0 -0.5 0.1 -0.6 0.26 -0.6 l8.76 0 c0.14 0 0.26 0.1 0.26 0.24 l0 2.26 c0 0.14 -0.12 0.26 -0.26 0.26 l-5.92 0 l0 2.08 l3.74 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-3.74 0 l0 2.14 l5.9 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-8.74 0 z M26.791 20 c-0.08 0 -0.16 -0.04 -0.2 -0.12 c-0.06 -0.06 -0.06 -0.16 -0.04 -0.24 l4.66 -11.98 c0.04 -0.1 0.14 -0.16 0.24 -0.16 l2.68 0 c0.1 0 0.2 0.06 0.24 0.16 l4.58 11.98 c0.02 0.08 0.02 0.16 -0.04 0.24 c-0.04 0.08 -0.12 0.12 -0.2 0.12 l-2.78 0 c-0.1 0 -0.2 -0.06 -0.24 -0.16 l-0.74 -1.84 l-4.5 0.02 l-0.74 1.82 c-0.04 0.1 -0.14 0.16 -0.24 0.16 l-2.68 0 z M31.271 15.5 l2.88 0 l-1.44 -4.24 z M42.1365 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.6 0 c0.14 0 0.26 0.12 0.26 0.26 l0 9.36 l4.5 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.36 c0 0.14 -0.12 0.26 -0.26 0.26 l-7.36 0 z M62.6075 20 c-0.14 0 -0.24 -0.12 -0.24 -0.26 l0 -9.44 l-2.74 0 c-0.14 0 -0.26 -0.1 -0.26 -0.24 l0 -2.3 c0 -0.14 0.12 -0.26 0.26 -0.26 l8.58 0 c0.16 0 0.26 0.12 0.26 0.26 l0 2.3 c0 0.14 -0.1 0.24 -0.26 0.24 l-2.74 0 l0 9.44 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.6 0 z M71.833 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.6 0 c0.14 0 0.26 0.12 0.26 0.26 l0 11.98 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.6 0 z M78.0585 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.88 0 c0.1 0 0.2 0.06 0.24 0.14 l3 7.4 l2.98 -7.4 c0.04 -0.08 0.14 -0.14 0.24 -0.14 l2.88 0 c0.14 0 0.26 0.12 0.26 0.26 l0 11.98 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.34 0 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -6.44 l-2.44 6.2 c-0.04 0.08 -0.14 0.14 -0.22 0.14 l-1.68 0 c-0.1 0 -0.2 -0.06 -0.24 -0.14 l-2.46 -6.2 l0 6.44 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.32 0 z M93.64399999999999 20 l0 -11.98 c0 -0.5 0.1 -0.6 0.26 -0.6 l8.76 0 c0.14 0 0.26 0.1 0.26 0.24 l0 2.26 c0 0.14 -0.12 0.26 -0.26 0.26 l-5.92 0 l0 2.08 l3.74 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-3.74 0 l0 2.14 l5.9 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-8.74 0 c-0.16 0 -0.26 -0.12 -0.26 0.08 z M118.83499999999998 20 c-1.18 0 -2.26 -0.28 -3.22 -0.84 c-0.96 -0.58 -1.72 -1.36 -2.26 -2.34 s-0.82 -2.08 -0.82 -3.3 c0 -1.18 0.28 -2.28 0.84 -3.26 c0.56 -0.96 1.34 -1.74 2.3 -2.3 c0.98 -0.56 2.08 -0.84 3.24 -0.84 c0.88 0 1.74 0.2 2.58 0.56 c0.84 0.38 1.56 0.88 2.16 1.52 c0.08 0.1 0.08 0.24 0 0.34 l-1.9 1.56 c-0.06 0.06 -0.12 0.1 -0.2 0.1 s-0.16 -0.04 -0.2 -0.1 c-1.02 -1.24 -2.66 -1.5 -4.04 -0.64 c-1.2 0.74 -1.64 2.1 -1.58 3.46 c0.06 1.38 1.06 2.56 2.38 2.96 c1.2 0.36 2.38 0.08 3.24 -0.84 c0.06 -0.04 0.12 -0.08 0.2 -0.06 c0.08 0 0.14 0.02 0.18 0.08 l1.94 1.36 c0.08 0.1 0.08 0.24 0 0.34 c-0.64 0.68 -1.4 1.24 -2.24 1.64 c-0.86 0.4 -1.74 0.6 -2.6 0.6 z M133.2805 20 c-1.2 0 -2.3 -0.28 -3.26 -0.84 c-0.98 -0.56 -1.76 -1.36 -2.34 -2.32 c-0.56 -0.98 -0.84 -2.1 -0.84 -3.3 c0 -1.18 0.28 -2.28 0.84 -3.26 c0.58 -0.98 1.34 -1.76 2.32 -2.32 s2.08 -0.84 3.28 -0.84 c1.18 0 2.28 0.28 3.26 0.84 s1.76 1.34 2.32 2.32 c0.58 0.98 0.86 2.08 0.86 3.26 c0 1.2 -0.28 2.3 -0.86 3.28 c-0.56 0.98 -1.34 1.76 -2.32 2.34 c-0.98 0.56 -2.08 0.84 -3.26 0.84 z M133.32049999999998 17.12 c0.58 0 1.12 -0.16 1.6 -0.46 c0.5 -0.32 0.9 -0.74 1.18 -1.3 c0.3 -0.54 0.44 -1.16 0.44 -1.82 c0 -0.64 -0.14 -1.26 -0.44 -1.8 c-0.28 -0.54 -0.68 -0.96 -1.18 -1.28 c-0.48 -0.3 -1.02 -0.46 -1.6 -0.46 c-0.6 0 -1.14 0.16 -1.64 0.46 c-0.52 0.32 -0.92 0.74 -1.22 1.28 c-0.3 0.56 -0.44 1.16 -0.44 1.8 c0 0.66 0.14 1.28 0.44 1.82 c0.32 0.54 0.72 0.98 1.22 1.28 c0.5 0.32 1.04 0.48 1.64 0.48 z M143.08599999999996 20 c-0.16 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.1 -0.26 0.26 -0.26 l4.54 0 c1.2 0 2.3 0.26 3.26 0.8 c0.96 0.52 1.7 1.26 2.24 2.22 c0.52 0.94 0.8 2.02 0.8 3.22 c0 1.22 -0.28 2.3 -0.82 3.24 c-0.54 0.96 -1.3 1.7 -2.28 2.22 c-0.96 0.54 -2.08 0.8 -3.3 0.8 l-4.44 0 z M145.92599999999996 17.2 l1.76 0 c0.58 0 1.12 -0.14 1.58 -0.42 c0.46 -0.3 0.84 -0.7 1.1 -1.22 s0.4 -1.12 0.4 -1.8 c0 -0.66 -0.14 -1.28 -0.42 -1.8 c-0.28 -0.54 -0.66 -0.94 -1.14 -1.24 c-0.48 -0.28 -1.04 -0.44 -1.64 -0.44 l-1.64 0 l0 6.92 z M157.29149999999996 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.6 0 c0.14 0 0.26 0.12 0.26 0.26 l0 11.98 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.6 0 z M163.51699999999997 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.36 0 c0.08 0 0.16 0.04 0.22 0.1 l4.6 7.1 l0 -6.94 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.46 0 c0.14 0 0.26 0.12 0.26 0.26 l0 11.98 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.36 0 c-0.08 0 -0.16 -0.04 -0.22 -0.1 l-4.58 -7.06 l0 6.9 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.48 0 z M183.16249999999997 20 c-1.18 0 -2.28 -0.28 -3.24 -0.84 c-0.98 -0.58 -1.74 -1.36 -2.3 -2.32 c-0.56 -0.98 -0.84 -2.1 -0.84 -3.3 s0.28 -2.3 0.86 -3.26 c0.56 -0.98 1.36 -1.76 2.34 -2.32 c1 -0.56 2.12 -0.84 3.34 -0.84 c0.88 0 1.74 0.16 2.6 0.5 c0.84 0.32 1.58 0.78 2.18 1.36 c0.1 0.08 0.12 0.22 0.04 0.34 l-1.46 1.92 c-0.06 0.06 -0.12 0.1 -0.2 0.12 c-0.06 0 -0.14 -0.04 -0.2 -0.08 c-0.4 -0.4 -0.86 -0.72 -1.4 -0.94 c-0.52 -0.22 -1.04 -0.34 -1.56 -0.34 c-0.62 0 -1.2 0.16 -1.7 0.46 c-0.52 0.32 -0.92 0.74 -1.22 1.28 s-0.44 1.14 -0.44 1.8 s0.14 1.28 0.44 1.82 s0.72 0.98 1.22 1.3 c0.52 0.3 1.1 0.46 1.7 0.46 c0.32 0 0.66 -0.06 1.04 -0.16 c0.32 -0.1 0.66 -0.24 0.96 -0.4 l0 -0.92 l-1.38 0 c-0.08 0 -0.14 -0.02 -0.18 -0.08 c-0.06 -0.04 -0.08 -0.1 -0.08 -0.18 l0.02 -2.24 c0 -0.14 0.12 -0.26 0.26 -0.26 l3.88 0 c0.14 0 0.26 0.12 0.26 0.26 l0 5.02 c0 0.08 -0.04 0.16 -0.12 0.22 c-0.62 0.48 -1.38 0.88 -2.26 1.16 c-0.88 0.3 -1.74 0.46 -2.56 0.46 z M203.0135 20 c-1.08 0 -1.86 -0.22 -2.68 -0.66 c-0.8 -0.44 -1.44 -1.06 -1.88 -1.88 c-0.44 -0.8 -0.66 -1.76 -0.66 -2.86 l0 -7.04 c0 -0.14 0.12 -0.24 0.26 -0.24 l2.6 0 c0.14 0 0.24 0.1 0.24 0.24 l0 7.04 c0 0.8 0.22 1.42 0.64 1.86 s0.8 0.66 1.5 0.66 s1.06 -0.22 1.46 -0.64 c0.4 -0.44 0.6 -1.08 0.6 -1.88 l0 -7.04 c0 -0.14 0.12 -0.24 0.26 -0.24 l2.6 0 c0.14 0 0.26 0.1 0.26 0.24 l0 7.04 c0 1.1 -0.22 2.06 -0.66 2.86 c-0.42 0.82 -1.06 1.44 -1.86 1.88 s-1.6 0.66 -2.68 0.66 z M211.57899999999998 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.36 0 c0.08 0 0.16 0.04 0.22 0.1 l4.6 7.1 l0 -6.94 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.46 0 c0.14 0 0.26 0.12 0.26 0.26 l0 11.98 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.36 0 c-0.08 0 -0.16 -0.04 -0.22 -0.1 l-4.58 -7.06 l0 6.9 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.48 0 z M225.10449999999997 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.6 0 c0.14 0 0.26 0.12 0.26 0.26 l0 9.36 l4.5 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.36 c0 0.14 -0.12 0.26 -0.26 0.26 l-7.36 0 z M235.82999999999998 20 l0 -11.98 c0 -0.5 0.1 -0.6 0.26 -0.6 l8.76 0 c0.14 0 0.26 0.1 0.26 0.24 l0 2.26 c0 0.14 -0.12 0.26 -0.26 0.26 l-5.92 0 l0 2.08 l3.74 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-3.74 0 l0 2.14 l5.9 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-8.74 0 c-0.16 0 -0.26 -0.12 -0.26 0.08 z M248.47549999999998 20 c-0.08 0 -0.16 -0.04 -0.2 -0.12 c-0.06 -0.06 -0.06 -0.16 -0.04 -0.24 l4.66 -11.98 c0.04 -0.1 0.14 -0.16 0.24 -0.16 l2.68 0 c0.1 0 0.2 0.06 0.24 0.16 l4.58 11.98 c0.02 0.08 0.02 0.16 -0.04 0.24 c-0.04 0.08 -0.12 0.12 -0.2 0.12 l-2.78 0 c-0.1 0 -0.2 -0.06 -0.24 -0.16 l-0.74 -1.84 l-4.5 0.02 l-0.74 1.82 c-0.04 0.1 -0.14 0.16 -0.24 0.16 l-2.68 0 z M252.9555 15.5 l2.88 0 l-1.44 -4.24 z M268.70099999999996 20.12 c-0.96 0 -1.92 -0.18 -2.84 -0.54 c-0.92 -0.34 -1.74 -0.84 -2.42 -1.44 c-0.08 -0.08 -0.1 -0.2 -0.06 -0.3 l0.7 -2.38 c0.04 -0.08 0.1 -0.14 0.18 -0.14 c0.08 -0.02 0.16 0 0.22 0.06 c1.06 1 2.26 1.9 3.76 1.98 c0.4 0.02 0.84 0.04 1.22 -0.08 c1.18 -0.38 0.68 -1.58 -0.2 -1.94 c-0.3 -0.12 -0.72 -0.26 -1.26 -0.42 c-0.8 -0.22 -1.46 -0.46 -1.96 -0.7 c-0.54 -0.24 -1 -0.62 -1.4 -1.12 c-0.38 -0.52 -0.58 -1.2 -0.58 -2.02 c0 -0.78 0.2 -1.46 0.6 -2.04 s0.96 -1.04 1.66 -1.34 s1.52 -0.46 2.44 -0.46 c0.82 0 1.62 0.12 2.42 0.38 c0.78 0.24 1.48 0.58 2.1 0.98 c0.1 0.08 0.14 0.2 0.08 0.32 l-0.66 2.24 c-0.02 0.08 -0.08 0.12 -0.16 0.14 c-0.06 0.02 -0.14 0.02 -0.2 -0.02 c-0.9 -0.56 -1.8 -1.24 -2.86 -1.38 c-0.7 -0.1 -1.76 -0.06 -2 0.78 c-0.3 1.08 1.28 1.36 2 1.58 c0.8 0.24 1.46 0.48 1.98 0.72 c0.54 0.26 1.02 0.66 1.4 1.16 c0.4 0.52 0.6 1.22 0.6 2.06 c0 0.82 -0.22 1.52 -0.64 2.12 c-0.4 0.6 -0.98 1.04 -1.7 1.36 c-0.72 0.28 -1.52 0.44 -2.42 0.44 z M276.82649999999995 20 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.6 0 c0.14 0 0.26 0.12 0.26 0.26 l0 4.92 l4.52 0 l0 -4.92 c0 -0.14 0.12 -0.26 0.26 -0.26 l2.6 0 c0.14 0 0.26 0.12 0.26 0.26 l0 11.98 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.6 0 c-0.14 0 -0.26 -0.12 -0.26 -0.26 l0 -4.3 l-4.52 0 l0 4.3 c0 0.14 -0.12 0.26 -0.26 0.26 l-2.6 0 z M290.43199999999996 20 l0 -11.98 c0 -0.5 0.1 -0.6 0.26 -0.6 l8.76 0 c0.14 0 0.26 0.1 0.26 0.24 l0 2.26 c0 0.14 -0.12 0.26 -0.26 0.26 l-5.92 0 l0 2.08 l3.74 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-3.74 0 l0 2.14 l5.9 0 c0.14 0 0.26 0.12 0.26 0.26 l0 2.24 c0 0.14 -0.12 0.26 -0.26 0.26 l-8.74 0 c-0.16 0 -0.26 -0.12 -0.26 0.08 z M303.07749999999993 20 c-0.16 0 -0.26 -0.12 -0.26 -0.26 l0 -11.98 c0 -0.14 0.1 -0.26 0.26 -0.26 l4.54 0 c1.2 0 2.3 0.26 3.26 0.8 c0.96 0.52 1.7 1.26 2.24 2.22 c0.52 0.94 0.8 2.02 0.8 3.22 c0 1.22 -0.28 2.3 -0.82 3.24 c-0.54 0.96 -1.3 1.7 -2.28 2.22 c-0.96 0.54 -2.08 0.8 -3.3 0.8 l-4.44 0 z M305.91749999999996 17.2 l1.76 0 c0.58 0 1.12 -0.14 1.58 -0.42 c0.46 -0.3 0.84 -0.7 1.1 -1.22 s0.4 -1.12 0.4 -1.8 c0 -0.66 -0.14 -1.28 -0.42 -1.8 c-0.28 -0.54 -0.66 -0.94 -1.14 -1.24 c-0.48 -0.28 -1.04 -0.44 -1.64 -0.44 l-1.64 0 l0 6.92 z"})})]})})]}),D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsxs(OC,{value:o,onValueChange:a,children:[D.jsx(Hv,{className:"w-[180px]",children:D.jsx(FC,{placeholder:"Select Language"})}),D.jsx(Uv,{className:i==="dark"?"bg-gray-800":"bg-white",children:w.map(x=>D.jsx(wl,{value:x,className:`cursor-pointer text-white ${i==="dark"?"hover:bg-gray-600":"hover:bg-gray-200 text-black"}`,children:x.charAt(0).toUpperCase()+x.slice(1)},x))})]}),D.jsx(w_,{children:D.jsxs(C_,{children:[D.jsx(S_,{asChild:!0,children:D.jsxs(Zi,{variant:"default",className:"rounded-lg bg-green-700 hover:bg-green-600 text-white",onClick:l,disabled:c,children:[D.jsx(koe,{className:"h-4 w-4 mr-1"}),"Run"]})}),D.jsx(Sp,{children:"Run code (Ctrl+Enter)"})]})}),D.jsx(w_,{children:D.jsxs(C_,{children:[D.jsx(S_,{asChild:!0,children:D.jsxs(Zi,{variant:"outline",className:`rounded-lg bg-transparent ${i==="light"?"hover:bg-gray-100 text-black":"hover:bg-gray-800 text-white"} border border-gray-20`,onClick:()=>d(!u),children:[D.jsx(cLe,{className:"h-4 w-4 mr-2"}),"Run with Input"]})}),D.jsx(Sp,{children:"Run with custom input"})]})}),D.jsx(w_,{children:D.jsxs(C_,{children:[D.jsx(S_,{asChild:!0,children:D.jsx(Zi,{variant:"outline",className:`rounded-lg bg-transparent ${i==="light"?"hover:bg-gray-100 text-black":"hover:bg-gray-800 text-white"} border border-gray-11`,onClick:h,children:i==="dark"?D.jsx(DLe,{className:"h-4 w-4"}):D.jsx(wLe,{className:"h-4 w-4"})})}),D.jsxs(Sp,{children:["Toggle ",i==="dark"?"Light":"Dark"," Mode"]})]})}),D.jsx(w_,{children:D.jsxs(C_,{children:[D.jsx(S_,{asChild:!0,children:D.jsx(Zi,{variant:"outline",className:`rounded-lg bg-transparent ${i==="light"?"hover:bg-gray-100 text-black":"hover:bg-gray-800 text-white"} border border-gray-11`,onClick:()=>g(!p),children:D.jsx(dLe,{className:"h-4 w-4"})})}),D.jsx(Sp,{children:"View version control"})]})}),D.jsx(w_,{children:D.jsxs(C_,{children:[D.jsx(S_,{asChild:!0,children:D.jsx(Zi,{variant:"outline",className:`rounded-lg bg-transparent ${i==="light"?"hover:bg-gray-100 text-black":"hover:bg-gray-800 text-white"} border border-gray-11`,onClick:()=>_(!v),children:D.jsx(xLe,{className:"h-4 w-4"})})}),D.jsx(Sp,{children:"Adjust settings"})]})}),D.jsx(w_,{children:D.jsxs(C_,{children:[D.jsx(S_,{asChild:!0,children:D.jsx(Zi,{variant:"outline",className:`rounded-lg bg-transparent ${i==="light"?"hover:bg-gray-100 text-black":"hover:bg-gray-800 text-white"} border border-gray-11`,children:D.jsx(xoe,{className:"h-4 w-4"})})}),D.jsx(Sp,{children:"Share this session"})]})}),D.jsx(Zi,{variant:"ghost",className:`rounded-lg bg-transparent ${i==="light"?"hover:bg-gray-100 text-black":"hover:bg-gray-800 text-white"}`,size:"icon",onClick:()=>s(!n),children:r==="video"?D.jsx(e4,{className:"h-5 w-5"}):D.jsx(_Le,{className:"h-5 w-5"})})]})]}),nPe=({pinnedVideo:i,participantState:e,livekitParticipants:t,auth:n,pinnedVideoPosition:s,setPinnedVideoPosition:r,setPinnedVideo:o,videoRefs:a,isDragging:l,setIsDragging:c,dragOffset:u,setDragOffset:d})=>{var _;const h=F.useRef(null),g=v=>{const y=t[v];if(!y)return"Unknown";try{return(y.metadata?JSON.parse(y.metadata):{}).displayName||y.identity||"Unknown"}catch{return y.identity||"Unknown"}},p=v=>{if(h.current){const y=h.current.getBoundingClientRect();d({x:v.clientX-y.left,y:v.clientY-y.top}),c(!0)}};return!i||!e?null:D.jsxs("div",{ref:h,className:"absolute w-60 h-40 bg-background rounded-md shadow-lg z-50",style:{left:s.x,top:s.y,cursor:l?"grabbing":"grab"},onMouseDown:p,children:[e.videoEnabled&&e.stream?D.jsx("video",{ref:v=>{v&&e.trackSid&&(a.current[e.trackSid]=v,v.srcObject!==e.stream&&(v.srcObject=e.stream,v.play().catch(y=>console.error("Pinned video play failed:",y))))},autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full rounded-md object-cover"}):D.jsx("div",{className:"video-off-placeholder w-full h-full rounded-md",children:D.jsx(JR,{className:"h-8 w-8"})}),D.jsx("div",{className:"absolute bottom-2 left-2 bg-background/80 px-2 py-1 rounded text-xs",children:e.identity===((_=n.currentUser)==null?void 0:_.uid)?"You":g(e.identity)}),D.jsx("div",{className:"absolute top-2 right-2 flex gap-1",children:D.jsx("button",{className:"h-6 w-6 bg-background/80 hover:bg-background rounded-full flex items-center justify-center",onClick:()=>o(null),children:D.jsx(Soe,{className:"h-3 w-3"})})})]})},iPe=F.memo(nPe,(i,e)=>i.pinnedVideo===e.pinnedVideo&&i.participantState===e.participantState&&i.pinnedVideoPosition.x===e.pinnedVideoPosition.x&&i.pinnedVideoPosition.y===e.pinnedVideoPosition.y&&i.isDragging===e.isDragging&&i.dragOffset.x===e.dragOffset.x&&i.dragOffset.y===e.dragOffset.y);function sPe(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function AY(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function PY(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?AY(Object(t),!0).forEach(function(n){sPe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):AY(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function rPe(i,e){if(i==null)return{};var t={},n=Object.keys(i),s,r;for(r=0;r<n.length;r++)s=n[r],!(e.indexOf(s)>=0)&&(t[s]=i[s]);return t}function oPe(i,e){if(i==null)return{};var t=rPe(i,e),n,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(i);for(s=0;s<r.length;s++)n=r[s],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}function aPe(i,e){return lPe(i)||cPe(i,e)||uPe(i,e)||dPe()}function lPe(i){if(Array.isArray(i))return i}function cPe(i,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(i)))){var t=[],n=!0,s=!1,r=void 0;try{for(var o=i[Symbol.iterator](),a;!(n=(a=o.next()).done)&&(t.push(a.value),!(e&&t.length===e));n=!0);}catch(l){s=!0,r=l}finally{try{!n&&o.return!=null&&o.return()}finally{if(s)throw r}}return t}}function uPe(i,e){if(i){if(typeof i=="string")return MY(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return MY(i,e)}}function MY(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function dPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hPe(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function OY(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(i,s).enumerable})),t.push.apply(t,n)}return t}function FY(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?OY(Object(t),!0).forEach(function(n){hPe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):OY(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function fPe(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return function(n){return e.reduceRight(function(s,r){return r(s)},n)}}function gC(i){return function e(){for(var t=this,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return s.length>=i.length?i.apply(this,s):function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return e.apply(t,[].concat(s,a))}}}function SI(i){return{}.toString.call(i).includes("Object")}function gPe(i){return!Object.keys(i).length}function ik(i){return typeof i=="function"}function mPe(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function pPe(i,e){return SI(e)||Zg("changeType"),Object.keys(e).some(function(t){return!mPe(i,t)})&&Zg("changeField"),e}function _Pe(i){ik(i)||Zg("selectorType")}function vPe(i){ik(i)||SI(i)||Zg("handlerType"),SI(i)&&Object.values(i).some(function(e){return!ik(e)})&&Zg("handlersType")}function bPe(i){i||Zg("initialIsRequired"),SI(i)||Zg("initialType"),gPe(i)&&Zg("initialContent")}function yPe(i,e){throw new Error(i[e]||i.default)}var wPe={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Zg=gC(yPe)(wPe),TE={changes:pPe,selector:_Pe,handler:vPe,initial:bPe};function CPe(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};TE.initial(i),TE.handler(e);var t={current:i},n=gC(xPe)(t,e),s=gC(kPe)(t),r=gC(TE.changes)(i),o=gC(SPe)(t);function a(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(u){return u};return TE.selector(c),c(t.current)}function l(c){fPe(n,s,r,o)(c)}return[a,l]}function SPe(i,e){return ik(e)?e(i.current):e}function kPe(i,e){return i.current=FY(FY({},i.current),e),e}function xPe(i,e,t){return ik(e)?e(i.current):Object.keys(t).forEach(function(n){var s;return(s=e[n])===null||s===void 0?void 0:s.call(e,i.current[n])}),t}var EPe={create:CPe},TPe={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function LPe(i){return function e(){for(var t=this,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return s.length>=i.length?i.apply(this,s):function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return e.apply(t,[].concat(s,a))}}}function IPe(i){return{}.toString.call(i).includes("Object")}function DPe(i){return i||BY("configIsRequired"),IPe(i)||BY("configType"),i.urls?(NPe(),{paths:{vs:i.urls.monacoBase}}):i}function NPe(){console.warn(fce.deprecation)}function RPe(i,e){throw new Error(i[e]||i.default)}var fce={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},BY=LPe(RPe)(fce),APe={config:DPe},PPe=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(s){return t.reduceRight(function(r,o){return o(r)},s)}};function gce(i,e){return Object.keys(e).forEach(function(t){e[t]instanceof Object&&i[t]&&Object.assign(e[t],gce(i[t],e[t]))}),PY(PY({},i),e)}var MPe={type:"cancelation",msg:"operation is manually canceled"};function nO(i){var e=!1,t=new Promise(function(n,s){i.then(function(r){return e?s(MPe):n(r)}),i.catch(s)});return t.cancel=function(){return e=!0},t}var OPe=EPe.create({config:TPe,isInitialized:!1,resolve:null,reject:null,monaco:null}),mce=aPe(OPe,2),S2=mce[0],w4=mce[1];function FPe(i){var e=APe.config(i),t=e.monaco,n=oPe(e,["monaco"]);w4(function(s){return{config:gce(s.config,n),monaco:t}})}function BPe(){var i=S2(function(e){var t=e.monaco,n=e.isInitialized,s=e.resolve;return{monaco:t,isInitialized:n,resolve:s}});if(!i.isInitialized){if(w4({isInitialized:!0}),i.monaco)return i.resolve(i.monaco),nO(iO);if(window.monaco&&window.monaco.editor)return pce(window.monaco),i.resolve(window.monaco),nO(iO);PPe(VPe,HPe)(UPe)}return nO(iO)}function VPe(i){return document.body.appendChild(i)}function WPe(i){var e=document.createElement("script");return i&&(e.src=i),e}function HPe(i){var e=S2(function(n){var s=n.config,r=n.reject;return{config:s,reject:r}}),t=WPe("".concat(e.config.paths.vs,"/loader.js"));return t.onload=function(){return i()},t.onerror=e.reject,t}function UPe(){var i=S2(function(t){var n=t.config,s=t.resolve,r=t.reject;return{config:n,resolve:s,reject:r}}),e=window.require;e.config(i.config),e(["vs/editor/editor.main"],function(t){pce(t),i.resolve(t)},function(t){i.reject(t)})}function pce(i){S2().monaco||w4({monaco:i})}function zPe(){return S2(function(i){var e=i.monaco;return e})}var iO=new Promise(function(i,e){return w4({resolve:i,reject:e})}),_ce={config:FPe,init:BPe,__getMonacoInstance:zPe},jPe={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},sO=jPe,$Pe={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},qPe=$Pe;function KPe({children:i}){return vo.createElement("div",{style:qPe.container},i)}var GPe=KPe,YPe=GPe;function QPe({width:i,height:e,isEditorReady:t,loading:n,_ref:s,className:r,wrapperProps:o}){return vo.createElement("section",{style:{...sO.wrapper,width:i,height:e},...o},!t&&vo.createElement(YPe,null,n),vo.createElement("div",{ref:s,style:{...sO.fullWidth,...!t&&sO.hide},className:r}))}var XPe=QPe,vce=F.memo(XPe);function ZPe(i){F.useEffect(i,[])}var bce=ZPe;function JPe(i,e,t=!0){let n=F.useRef(!0);F.useEffect(n.current||!t?()=>{n.current=!1}:i,e)}var Sl=JPe;function BC(){}function Q_(i,e,t,n){return eMe(i,n)||tMe(i,e,t,n)}function eMe(i,e){return i.editor.getModel(yce(i,e))}function tMe(i,e,t,n){return i.editor.createModel(e,t,n?yce(i,n):void 0)}function yce(i,e){return i.Uri.parse(e)}function nMe({original:i,modified:e,language:t,originalLanguage:n,modifiedLanguage:s,originalModelPath:r,modifiedModelPath:o,keepCurrentOriginalModel:a=!1,keepCurrentModifiedModel:l=!1,theme:c="light",loading:u="Loading...",options:d={},height:h="100%",width:g="100%",className:p,wrapperProps:_={},beforeMount:v=BC,onMount:y=BC}){let[w,x]=F.useState(!1),[k,T]=F.useState(!0),R=F.useRef(null),L=F.useRef(null),I=F.useRef(null),A=F.useRef(y),B=F.useRef(v),V=F.useRef(!1);bce(()=>{let Z=_ce.init();return Z.then(ne=>(L.current=ne)&&T(!1)).catch(ne=>(ne==null?void 0:ne.type)!=="cancelation"&&console.error("Monaco initialization: error:",ne)),()=>R.current?G():Z.cancel()}),Sl(()=>{if(R.current&&L.current){let Z=R.current.getOriginalEditor(),ne=Q_(L.current,i||"",n||t||"text",r||"");ne!==Z.getModel()&&Z.setModel(ne)}},[r],w),Sl(()=>{if(R.current&&L.current){let Z=R.current.getModifiedEditor(),ne=Q_(L.current,e||"",s||t||"text",o||"");ne!==Z.getModel()&&Z.setModel(ne)}},[o],w),Sl(()=>{let Z=R.current.getModifiedEditor();Z.getOption(L.current.editor.EditorOption.readOnly)?Z.setValue(e||""):e!==Z.getValue()&&(Z.executeEdits("",[{range:Z.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),Z.pushUndoStop())},[e],w),Sl(()=>{var Z,ne;(ne=(Z=R.current)==null?void 0:Z.getModel())==null||ne.original.setValue(i||"")},[i],w),Sl(()=>{let{original:Z,modified:ne}=R.current.getModel();L.current.editor.setModelLanguage(Z,n||t||"text"),L.current.editor.setModelLanguage(ne,s||t||"text")},[t,n,s],w),Sl(()=>{var Z;(Z=L.current)==null||Z.editor.setTheme(c)},[c],w),Sl(()=>{var Z;(Z=R.current)==null||Z.updateOptions(d)},[d],w);let U=F.useCallback(()=>{var fe;if(!L.current)return;B.current(L.current);let Z=Q_(L.current,i||"",n||t||"text",r||""),ne=Q_(L.current,e||"",s||t||"text",o||"");(fe=R.current)==null||fe.setModel({original:Z,modified:ne})},[t,e,s,i,n,r,o]),W=F.useCallback(()=>{var Z;!V.current&&I.current&&(R.current=L.current.editor.createDiffEditor(I.current,{automaticLayout:!0,...d}),U(),(Z=L.current)==null||Z.editor.setTheme(c),x(!0),V.current=!0)},[d,c,U]);F.useEffect(()=>{w&&A.current(R.current,L.current)},[w]),F.useEffect(()=>{!k&&!w&&W()},[k,w,W]);function G(){var ne,fe,te,ce;let Z=(ne=R.current)==null?void 0:ne.getModel();a||((fe=Z==null?void 0:Z.original)==null||fe.dispose()),l||((te=Z==null?void 0:Z.modified)==null||te.dispose()),(ce=R.current)==null||ce.dispose()}return vo.createElement(vce,{width:g,height:h,isEditorReady:w,loading:u,_ref:I,className:p,wrapperProps:_})}var iMe=nMe;F.memo(iMe);function sMe(i){let e=F.useRef();return F.useEffect(()=>{e.current=i},[i]),e.current}var rMe=sMe,LE=new Map;function oMe({defaultValue:i,defaultLanguage:e,defaultPath:t,value:n,language:s,path:r,theme:o="light",line:a,loading:l="Loading...",options:c={},overrideServices:u={},saveViewState:d=!0,keepCurrentModel:h=!1,width:g="100%",height:p="100%",className:_,wrapperProps:v={},beforeMount:y=BC,onMount:w=BC,onChange:x,onValidate:k=BC}){let[T,R]=F.useState(!1),[L,I]=F.useState(!0),A=F.useRef(null),B=F.useRef(null),V=F.useRef(null),U=F.useRef(w),W=F.useRef(y),G=F.useRef(),Z=F.useRef(n),ne=rMe(r),fe=F.useRef(!1),te=F.useRef(!1);bce(()=>{let X=_ce.init();return X.then(oe=>(A.current=oe)&&I(!1)).catch(oe=>(oe==null?void 0:oe.type)!=="cancelation"&&console.error("Monaco initialization: error:",oe)),()=>B.current?ve():X.cancel()}),Sl(()=>{var oe,Ne,Ie,Oe;let X=Q_(A.current,i||n||"",e||s||"",r||t||"");X!==((oe=B.current)==null?void 0:oe.getModel())&&(d&&LE.set(ne,(Ne=B.current)==null?void 0:Ne.saveViewState()),(Ie=B.current)==null||Ie.setModel(X),d&&((Oe=B.current)==null||Oe.restoreViewState(LE.get(r))))},[r],T),Sl(()=>{var X;(X=B.current)==null||X.updateOptions(c)},[c],T),Sl(()=>{!B.current||n===void 0||(B.current.getOption(A.current.editor.EditorOption.readOnly)?B.current.setValue(n):n!==B.current.getValue()&&(te.current=!0,B.current.executeEdits("",[{range:B.current.getModel().getFullModelRange(),text:n,forceMoveMarkers:!0}]),B.current.pushUndoStop(),te.current=!1))},[n],T),Sl(()=>{var oe,Ne;let X=(oe=B.current)==null?void 0:oe.getModel();X&&s&&((Ne=A.current)==null||Ne.editor.setModelLanguage(X,s))},[s],T),Sl(()=>{var X;a!==void 0&&((X=B.current)==null||X.revealLine(a))},[a],T),Sl(()=>{var X;(X=A.current)==null||X.editor.setTheme(o)},[o],T);let ce=F.useCallback(()=>{var X;if(!(!V.current||!A.current)&&!fe.current){W.current(A.current);let oe=r||t,Ne=Q_(A.current,n||i||"",e||s||"",oe||"");B.current=(X=A.current)==null?void 0:X.editor.create(V.current,{model:Ne,automaticLayout:!0,...c},u),d&&B.current.restoreViewState(LE.get(oe)),A.current.editor.setTheme(o),a!==void 0&&B.current.revealLine(a),R(!0),fe.current=!0}},[i,e,t,n,s,r,c,u,d,o,a]);F.useEffect(()=>{T&&U.current(B.current,A.current)},[T]),F.useEffect(()=>{!L&&!T&&ce()},[L,T,ce]),Z.current=n,F.useEffect(()=>{var X,oe;T&&x&&((X=G.current)==null||X.dispose(),G.current=(oe=B.current)==null?void 0:oe.onDidChangeModelContent(Ne=>{te.current||x(B.current.getValue(),Ne)}))},[T,x]),F.useEffect(()=>{if(T){let X=A.current.editor.onDidChangeMarkers(oe=>{var Ie;let Ne=(Ie=B.current.getModel())==null?void 0:Ie.uri;if(Ne&&oe.find(Oe=>Oe.path===Ne.path)){let Oe=A.current.editor.getModelMarkers({resource:Ne});k==null||k(Oe)}});return()=>{X==null||X.dispose()}}return()=>{}},[T,k]);function ve(){var X,oe;(X=G.current)==null||X.dispose(),h?d&&LE.set(r,B.current.saveViewState()):(oe=B.current.getModel())==null||oe.dispose(),B.current.dispose()}return vo.createElement(vce,{width:g,height:p,isEditorReady:T,loading:l,_ref:V,className:_,wrapperProps:v})}var aMe=oMe,lMe=F.memo(aMe),cMe=lMe,rO="rovingFocusGroup.onEntryFocus",uMe={bubbles:!1,cancelable:!0},C4="RovingFocusGroup",[w3,wce,dMe]=Bae(C4),[hMe,Cce]=Vm(C4,[dMe]),[fMe,gMe]=hMe(C4),Sce=F.forwardRef((i,e)=>D.jsx(w3.Provider,{scope:i.__scopeRovingFocusGroup,children:D.jsx(w3.Slot,{scope:i.__scopeRovingFocusGroup,children:D.jsx(mMe,{...i,ref:e})})}));Sce.displayName=C4;var mMe=F.forwardRef((i,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:s=!1,dir:r,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=i,h=F.useRef(null),g=Ki(e,h),p=o4(r),[_=null,v]=nk({prop:o,defaultProp:a,onChange:l}),[y,w]=F.useState(!1),x=no(c),k=wce(t),T=F.useRef(!1),[R,L]=F.useState(0);return F.useEffect(()=>{const I=h.current;if(I)return I.addEventListener(rO,x),()=>I.removeEventListener(rO,x)},[x]),D.jsx(fMe,{scope:t,orientation:n,dir:p,loop:s,currentTabStopId:_,onItemFocus:F.useCallback(I=>v(I),[v]),onItemShiftTab:F.useCallback(()=>w(!0),[]),onFocusableItemAdd:F.useCallback(()=>L(I=>I+1),[]),onFocusableItemRemove:F.useCallback(()=>L(I=>I-1),[]),children:D.jsx(si.div,{tabIndex:y||R===0?-1:0,"data-orientation":n,...d,ref:g,style:{outline:"none",...i.style},onMouseDown:Ln(i.onMouseDown,()=>{T.current=!0}),onFocus:Ln(i.onFocus,I=>{const A=!T.current;if(I.target===I.currentTarget&&A&&!y){const B=new CustomEvent(rO,uMe);if(I.currentTarget.dispatchEvent(B),!B.defaultPrevented){const V=k().filter(ne=>ne.focusable),U=V.find(ne=>ne.active),W=V.find(ne=>ne.id===_),Z=[U,W,...V].filter(Boolean).map(ne=>ne.ref.current);Ece(Z,u)}}T.current=!1}),onBlur:Ln(i.onBlur,()=>w(!1))})})}),kce="RovingFocusGroupItem",xce=F.forwardRef((i,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:s=!1,tabStopId:r,...o}=i,a=Ly(),l=r||a,c=gMe(kce,t),u=c.currentTabStopId===l,d=wce(t),{onFocusableItemAdd:h,onFocusableItemRemove:g}=c;return F.useEffect(()=>{if(n)return h(),()=>g()},[n,h,g]),D.jsx(w3.ItemSlot,{scope:t,id:l,focusable:n,active:s,children:D.jsx(si.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:Ln(i.onMouseDown,p=>{n?c.onItemFocus(l):p.preventDefault()}),onFocus:Ln(i.onFocus,()=>c.onItemFocus(l)),onKeyDown:Ln(i.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){c.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const _=vMe(p,c.orientation,c.dir);if(_!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let y=d().filter(w=>w.focusable).map(w=>w.ref.current);if(_==="last")y.reverse();else if(_==="prev"||_==="next"){_==="prev"&&y.reverse();const w=y.indexOf(p.currentTarget);y=c.loop?bMe(y,w+1):y.slice(w+1)}setTimeout(()=>Ece(y))}})})})});xce.displayName=kce;var pMe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _Me(i,e){return e!=="rtl"?i:i==="ArrowLeft"?"ArrowRight":i==="ArrowRight"?"ArrowLeft":i}function vMe(i,e,t){const n=_Me(i.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return pMe[n]}function Ece(i,e=!1){const t=document.activeElement;for(const n of i)if(n===t||(n.focus({preventScroll:e}),document.activeElement!==t))return}function bMe(i,e){return i.map((t,n)=>i[(e+n)%i.length])}var yMe=Sce,wMe=xce,zW="Tabs",[CMe,Qlt]=Vm(zW,[Cce]),Tce=Cce(),[SMe,jW]=CMe(zW),Lce=F.forwardRef((i,e)=>{const{__scopeTabs:t,value:n,onValueChange:s,defaultValue:r,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=i,u=o4(a),[d,h]=nk({prop:n,onChange:s,defaultProp:r});return D.jsx(SMe,{scope:t,baseId:Ly(),value:d,onValueChange:h,orientation:o,dir:u,activationMode:l,children:D.jsx(si.div,{dir:u,"data-orientation":o,...c,ref:e})})});Lce.displayName=zW;var Ice="TabsList",Dce=F.forwardRef((i,e)=>{const{__scopeTabs:t,loop:n=!0,...s}=i,r=jW(Ice,t),o=Tce(t);return D.jsx(yMe,{asChild:!0,...o,orientation:r.orientation,dir:r.dir,loop:n,children:D.jsx(si.div,{role:"tablist","aria-orientation":r.orientation,...s,ref:e})})});Dce.displayName=Ice;var Nce="TabsTrigger",Rce=F.forwardRef((i,e)=>{const{__scopeTabs:t,value:n,disabled:s=!1,...r}=i,o=jW(Nce,t),a=Tce(t),l=Mce(o.baseId,n),c=Oce(o.baseId,n),u=n===o.value;return D.jsx(wMe,{asChild:!0,...a,focusable:!s,active:u,children:D.jsx(si.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...r,ref:e,onMouseDown:Ln(i.onMouseDown,d=>{!s&&d.button===0&&d.ctrlKey===!1?o.onValueChange(n):d.preventDefault()}),onKeyDown:Ln(i.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(n)}),onFocus:Ln(i.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!s&&d&&o.onValueChange(n)})})})});Rce.displayName=Nce;var Ace="TabsContent",Pce=F.forwardRef((i,e)=>{const{__scopeTabs:t,value:n,forceMount:s,children:r,...o}=i,a=jW(Ace,t),l=Mce(a.baseId,n),c=Oce(a.baseId,n),u=n===a.value,d=F.useRef(u);return F.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),D.jsx(b1,{present:s||u,children:({present:h})=>D.jsx(si.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0,...o,ref:e,style:{...i.style,animationDuration:d.current?"0s":void 0},children:h&&r})})});Pce.displayName=Ace;function Mce(i,e){return`${i}-trigger-${e}`}function Oce(i,e){return`${i}-content-${e}`}var kMe=Lce,Fce=Dce,Bce=Rce,Vce=Pce;const Wce=kMe,$W=F.forwardRef(({className:i,...e},t)=>D.jsx(Fce,{ref:t,className:Js("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",i),...e}));$W.displayName=Fce.displayName;const sk=F.forwardRef(({className:i,...e},t)=>D.jsx(Bce,{ref:t,className:Js("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",i),...e}));sk.displayName=Bce.displayName;const rk=F.forwardRef(({className:i,...e},t)=>D.jsx(Vce,{ref:t,className:Js("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",i),...e}));rk.displayName=Vce.displayName;const C3=F.forwardRef(({className:i,...e},t)=>D.jsx("textarea",{className:Js("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",i),ref:t,...e}));C3.displayName="Textarea";const xMe=({result:i,isLoading:e,error:t,theme:n,fetchTime:s,complexity:r})=>D.jsxs(D.Fragment,{children:[D.jsx("style",{children:`
          .output-panel {
            height: 200px;
            padding: 16px;
          }
        `}),D.jsx(Pb,{className:`output-panel ${n==="dark"?"text-white":"text-black"}`,children:e?D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-green-500"}),D.jsx("p",{className:"text-sm",children:"Compiling and running code..."})]}):t?D.jsxs("div",{children:[D.jsx("h3",{className:"text-sm font-semibold text-red-500",children:"Compilation Failed"}),D.jsx("pre",{className:"mt-2 text-xs whitespace-pre-wrap",children:t.message||"Something went wrong."})]}):i?D.jsxs("div",{children:[D.jsxs("p",{className:`text-sm ${i.isError?"text-red-500":"text-green-500"}`,children:[D.jsx("strong",{children:"Status:"})," ",i.isError?"Compilation Failed":"Compiled Successfully"]}),D.jsx("pre",{className:"mt-2 text-xs whitespace-pre-wrap",children:i.output||"No output generated."}),s&&D.jsxs("p",{className:"text-xs mt-2",children:[D.jsx("strong",{children:"Fetch Time:"})," ",s," ms"]}),r&&D.jsxs("p",{className:"text-xs mt-1",children:[D.jsx("strong",{children:"Complexity:"})," ",r]})]}):D.jsx("p",{className:"text-sm",children:"Run your code to see the output here."})})]}),EMe=({selectedLanguage:i,theme:e,monacoTheme:t,fontSize:n,tabSize:s,showRunWithInput:r,setShowRunWithInput:o,codeInput:a,setCodeInput:l,notesHeight:c,setNotesHeight:u,isResizing:d,setIsResizing:h,settingsExpanded:g,setSettingsExpanded:p,versionControlExpanded:_,setVersionControlExpanded:v,codeOutput:y,isLoading:w,error:x,fetchTime:k,complexity:T,handleRunCode:R,handleEditorDidMount:L})=>{const I=F.useRef(null),A=F.useRef(null),B=V=>{V.preventDefault(),h(!0)};return F.useEffect(()=>{const V=W=>{if(d){const G=window.innerHeight-W.clientY;u(Math.max(100,Math.min(G,window.innerHeight-200)))}},U=()=>{h(!1)};return window.addEventListener("mousemove",V),window.addEventListener("mouseup",U),()=>{window.removeEventListener("mousemove",V),window.removeEventListener("mouseup",U)}},[d,u]),D.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[!g&&!_&&D.jsx("div",{className:"flex-1 overflow-auto",style:{height:`calc(100% - ${c+(r?100:0)}px)`},children:D.jsx(cMe,{height:"100%",language:i,theme:t,onMount:(V,U)=>{I.current=V,A.current=U,L(V,U)},options:{minimap:{enabled:!0},fontSize:n,tabSize:s,wordWrap:"on",automaticLayout:!0,smoothScrolling:!0,cursorBlinking:"smooth",cursorSmoothCaretAnimation:!0,mouseWheelZoom:!0,bracketPairColorization:{enabled:!0},acceptSuggestionOnEnter:"on",lineNumbers:"on",renderWhitespace:"all",detectIndentation:!1}})}),r&&!g&&!_&&D.jsxs("div",{className:"border-t h-[100px] p-4 flex items-center gap-2",children:[D.jsxs("div",{className:"flex-1",children:[D.jsxs("div",{className:"flex items-center justify-between mb-2",children:[D.jsx("h3",{className:"text-sm font-medium",children:"Input"}),D.jsx(Zi,{variant:"ghost",size:"sm",onClick:()=>o(!1),children:D.jsx(FM,{className:"h-4 w-4"})})]}),D.jsx(C3,{className:"w-full h-[60px] font-mono resize-none",placeholder:"Enter input for your code...",value:a,onChange:V=>l(V.target.value)})]}),D.jsx(Zi,{className:"bg-green-700 hover:bg-green-600 text-white h-10",onClick:()=>R(a),disabled:w,children:"Run with Input"})]}),g&&D.jsxs("div",{className:"flex-1 p-4 overflow-auto",children:[D.jsxs("div",{className:"flex items-center justify-between mb-4",children:[D.jsx("h2",{className:"text-xl font-bold",children:"Settings"}),D.jsx(Zi,{variant:"ghost",className:`rounded-xl bg-transparent border border-gray-600 ${e==="light"?"hover:bg-gray-100 text-black":"hover:bg-gray-800 text-white"}`,size:"sm",onClick:()=>p(!1),children:D.jsx(FM,{className:"h-4 w-4"})})]}),D.jsx("div",{className:"space-y-6",children:D.jsxs("div",{children:[D.jsx("h3",{className:"text-lg font-medium mb-2",children:"Editor Settings"}),D.jsxs("div",{className:"space-y-4",children:[D.jsxs("div",{children:[D.jsx("label",{className:"text-sm font-medium",children:"Theme"}),D.jsxs(OC,{value:e,onValueChange:setTheme,children:[D.jsx(Hv,{children:D.jsx(FC,{placeholder:"Select theme"})}),D.jsxs(Uv,{className:e==="dark"?"bg-gray-800":"bg-white",children:[D.jsx(wl,{value:"light",className:`cursor-pointer text-white ${e==="dark"?"hover:bg-gray-600":"hover:bg-gray-200 text-black"}`,children:"Light"}),D.jsx(wl,{value:"dark",className:`cursor-pointer text-white ${e==="dark"?"hover:bg-gray-600":"hover:bg-gray-200 text-black"}`,children:"Dark"})]})]})]}),D.jsxs("div",{children:[D.jsx("label",{className:"text-sm font-medium",children:"Font Size"}),D.jsxs(OC,{value:n.toString(),onValueChange:V=>setFontSize(parseInt(V)),children:[D.jsx(Hv,{children:D.jsx(FC,{placeholder:"Select font size"})}),D.jsxs(Uv,{className:e==="dark"?"bg-gray-800":"bg-white",children:[D.jsx(wl,{value:"12",className:`cursor-pointer text-white ${e==="dark"?"hover:bg-gray-600":"hover:bg-gray-200 text-black"}`,children:"12px"}),D.jsx(wl,{value:"14",className:`cursor-pointer text-white ${e==="dark"?"hover:bg-gray-600":"hover:bg-gray-200 text-black"}`,children:"14px"}),D.jsx(wl,{value:"16",className:`cursor-pointer text-white ${e==="dark"?"hover:bg-gray-600":"hover:bg-gray-200 text-black"}`,children:"16px"}),D.jsx(wl,{value:"18",className:`cursor-pointer text-white ${e==="dark"?"hover:bg-gray-600":"hover:bg-gray-200 text-black"}`,children:"18px"})]})]})]}),D.jsxs("div",{children:[D.jsx("label",{className:"text-sm font-medium",children:"Tab Size"}),D.jsxs(OC,{value:s.toString(),onValueChange:V=>setTabSize(parseInt(V)),children:[D.jsx(Hv,{children:D.jsx(FC,{placeholder:"Select tab size"})}),D.jsxs(Uv,{className:e==="dark"?"bg-gray-800":"bg-white",children:[D.jsx(wl,{value:"2",className:`cursor-pointer text-white ${e==="dark"?"hover:bg-gray-600":"hover:bg-gray-200 text-black"}`,children:"2 spaces"}),D.jsx(wl,{value:"4",className:`cursor-pointer text-white ${e==="dark"?"hover:bg-gray-600":"hover:bg-gray-200 text-black"}`,children:"4 spaces"}),D.jsx(wl,{value:"8",className:`cursor-pointer text-white ${e==="dark"?"hover:bg-gray-600":"hover:bg-gray-200 text-black"}`,children:"8 spaces"})]})]})]})]})]})})]}),_&&D.jsxs("div",{className:"flex-1 p-4 overflow-auto",children:[D.jsxs("div",{className:"flex items-center justify-between mb-4",children:[D.jsx("h2",{className:"text-xl font-bold",children:"Version Control"}),D.jsx(Zi,{variant:"ghost",size:"sm",className:`rounded-xl bg-transparent border border-gray-600 ${e==="light"?"hover:bg-gray-100 text-black":"hover:bg-gray-800 text-white"}`,onClick:()=>v(!1),children:D.jsx(FM,{className:"h-4 w-4"})})]}),D.jsx("div",{className:"space-y-6",children:D.jsxs("div",{children:[D.jsx("h3",{className:"text-lg font-medium mb-2",children:"Current Branch"}),D.jsxs("div",{className:"flex items-center gap-2",children:[D.jsx(GitBranch,{className:"h-4 w-4"}),D.jsx("span",{className:"font-medium",children:"main"}),D.jsx(Zi,{variant:"outline",size:"sm",className:"rounded-xl border border-gray-400",children:"Switch Branch"})]})]})})]}),!g&&!_&&D.jsxs("div",{className:"border-t relative",style:{height:`${c}px`},children:[D.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gray-500 cursor-ns-resize hover:bg-gray-700 transition-colors",onMouseDown:B}),D.jsx("div",{className:"flex items-center justify-between p-2 border-b",children:D.jsx("div",{className:"flex items-center gap-2",children:D.jsxs(Wce,{defaultValue:"output",children:[D.jsxs($W,{children:[D.jsx(sk,{className:"rounded-lg",value:"notes",children:"Notes"}),D.jsx(sk,{className:"rounded-lg",value:"output",children:"Output"})]}),D.jsx(rk,{value:"notes",className:"m-0",children:D.jsx(Pb,{className:"p-4 h-[calc(100%-45px)] overflow-auto font-mono text-sm",children:D.jsx(C3,{className:"w-full h-full resize-none",placeholder:"Add your notes here..."})})}),D.jsx(rk,{value:"output",className:"m-0",children:D.jsx(xMe,{result:y,isLoading:w,error:x,theme:e,fetchTime:k,complexity:T})})]})})})]})]})},Hce=F.forwardRef(({className:i,type:e,...t},n)=>D.jsx("input",{type:e,className:Js("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",i),ref:n,...t}));Hce.displayName="Input";const TMe=({theme:i,rightSidebarOpen:e,rightSidebarTab:t,setRightSidebarTab:n,participantStates:s,livekitParticipants:r,pinnedVideo:o,setPinnedVideo:a,auth:l,chatMessages:c,handleSendMessage:u,newMessageCount:d,isAtBottom:h,scrollToBottom:g,videoRefs:p})=>{const _=F.useRef(null),v=F.useRef(null),[y,w]=F.useState(""),x=k=>{const T=r[k];if(!T)return"Unknown";try{return(T.metadata?JSON.parse(T.metadata):{}).displayName||T.identity||"Unknown"}catch{return T.identity||"Unknown"}};return D.jsx("div",{className:`border-l transition-all duration-300 ${e?"w-64":"w-0 overflow-hidden"}`,children:D.jsxs(Wce,{value:t,onValueChange:n,className:"h-full flex flex-col",children:[D.jsx("div",{className:"p-2 border-b",children:D.jsxs($W,{className:"w-full",children:[D.jsx(sk,{value:"video",className:"flex-1 rounded-lg",children:"Video"}),D.jsx(sk,{value:"chat",className:"flex-1 rounded-lg",children:"Chat"})]})}),D.jsxs(rk,{value:"video",className:"flex-1 m-0 p-0 right-sidebar-content",children:[D.jsx("div",{className:"p-2 border-b",children:D.jsxs(OC,{children:[D.jsx(Hv,{children:D.jsx(FC,{placeholder:"Select layout"})}),D.jsxs(Uv,{children:[D.jsx(wl,{value:"grid-1",children:"1 per row"}),D.jsx(wl,{value:"grid-2",children:"2 per row"})]})]})}),D.jsx(Pb,{className:"flex-1 p-2 h-[calc(100%-60px)]",children:D.jsx("div",{className:"video-grid",children:Object.entries(s).map(([k,T])=>{var R;return D.jsxs("div",{className:"video-wrapper relative",children:[T.videoEnabled&&T.stream?D.jsx("video",{ref:L=>{L&&T.trackSid&&(p.current[T.trackSid]=L,L.srcObject!==T.stream&&(L.srcObject=T.stream,L.play().catch(I=>console.error("Video play failed:",I))))},autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-auto rounded-md"}):D.jsx("div",{className:"video-off-placeholder",children:D.jsx(JR,{className:"h-8 w-8"})}),D.jsx("div",{className:"absolute bottom-2 left-2 bg-background/80 px-2 py-1 rounded text-xs",children:k===((R=l.currentUser)==null?void 0:R.uid)?"You":x(k)}),D.jsx("div",{className:"absolute top-2 right-2 flex gap-1",children:D.jsx(Zi,{variant:"ghost",size:"icon",className:"h-6 w-6 bg-background/80 hover:bg-background",onClick:()=>a(o===k?null:k),children:D.jsx(Soe,{className:`h-3 w-3 ${i==="light"?"text-black":"text-white"}`})})})]},k)})})})]}),D.jsx(rk,{value:"chat",className:"flex-1 m-0 p-0 right-sidebar-content",children:D.jsxs("div",{className:"chat-container flex-1 flex flex-col",ref:_,children:[D.jsx(Pb,{className:"chat-messages flex-1",ref:v,onScroll:()=>{if(v.current){const{scrollTop:k,scrollHeight:T,clientHeight:R}=v.current;Math.abs(T-k-R)<10&&setNewMessageCount(0)}},children:c.map(k=>{var R;const T=k.senderId===((R=l.currentUser)==null?void 0:R.uid);return D.jsx("div",{className:`message ${T?"sent":"received"} p-2`,children:D.jsxs("div",{className:"message-content",children:[!T&&D.jsx("span",{className:"sender",children:k.senderName}),D.jsx("p",{children:k.text}),D.jsx("span",{className:"timestamp text-xs",children:new Date(k.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},k.id)})}),d>0&&!h&&D.jsx("div",{className:"new-messages-indicator p-2",children:D.jsxs("div",{className:"new-messages-button flex items-center gap-1 bg-blue-500 text-white px-2 py-1 rounded cursor-pointer",onClick:g,children:[D.jsx(fW,{className:"h-4 w-4"}),d," new message",d>1?"s":""]})}),D.jsx("div",{className:"chat-input-container p-2 border-t",children:D.jsxs("div",{className:"flex gap-2",children:[D.jsx(Hce,{placeholder:"Type a message...",className:"flex-1",value:y,onChange:k=>w(k.target.value),onKeyPress:k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),u(y),w(""))}}),D.jsx(Zi,{size:"sm",className:"rounded-lg bg-black text-white hover:bg-gray-900",onClick:()=>{u(y),w("")},disabled:!y.trim(),children:"Send"})]})})]})})]})})},LMe=({theme:i,micEnabled:e,toggleMic:t,videoEnabled:n,toggleVideo:s,room:r,cleanupSession:o,navigate:a})=>D.jsx("div",{className:"flex items-center justify-center p-2 border-t",children:D.jsxs("div",{className:"flex items-center gap-4",children:[D.jsx(Zi,{variant:e?"default":"outline",className:`rounded-full border border-gray-400 ${e?"bg-white hover:bg-gray-100":"bg-black hover:bg-gray-800"}`,size:"icon",onClick:t,children:e?D.jsx(Coe,{className:`h-7 w-7 ${i==="light"?"text-black":"text-white"}`}):D.jsx(woe,{className:`h-7 w-7 ${i==="light"?"text-black":"text-white"}`})}),D.jsx(Zi,{variant:n?"default":"outline",size:"icon",className:`rounded-full border border-gray-400 ${n?"bg-white hover:bg-gray-100":"bg-black hover:bg-gray-800"}`,onClick:s,children:n?D.jsx(e4,{className:`h-7 w-7 ${i==="light"?"text-black":"text-white"}`}):D.jsx(JR,{className:`h-7 w-7 ${i==="light"?"text-black":"text-white"}`})}),D.jsxs(Zi,{variant:"destructive",size:"sm",className:"rounded-lg bg-red-700 text-white hover:bg-red-600",onClick:()=>{r&&(o(),r.disconnect()),a("/")},children:[D.jsx(mLe,{className:"h-4 w-4 mr-2"}),"Leave Session"]})]})}),Uce=F.createContext({theme:"light",setTheme:()=>null});function IMe({children:i,defaultTheme:e="system",...t}){const[n,s]=F.useState(()=>localStorage.getItem("theme")||e);F.useEffect(()=>{if(n==="system"){const o=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";localStorage.setItem("theme",o),s(o);return}localStorage.setItem("theme",n)},[n]);const r={theme:n,setTheme:o=>{s(o)}};return D.jsx(Uce.Provider,{...t,value:r,children:i})}const DMe=()=>{const i=F.useContext(Uce);if(i===void 0)throw new Error("useTheme must be used within a ThemeProvider");return i};function zce(i,e){return function(){return i.apply(e,arguments)}}const{toString:NMe}=Object.prototype,{getPrototypeOf:qW}=Object,S4=(i=>e=>{const t=NMe.call(e);return i[t]||(i[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Eu=i=>(i=i.toLowerCase(),e=>S4(e)===i),k4=i=>e=>typeof e===i,{isArray:Ry}=Array,ok=k4("undefined");function RMe(i){return i!==null&&!ok(i)&&i.constructor!==null&&!ok(i.constructor)&&Ol(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const jce=Eu("ArrayBuffer");function AMe(i){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&jce(i.buffer),e}const PMe=k4("string"),Ol=k4("function"),$ce=k4("number"),x4=i=>i!==null&&typeof i=="object",MMe=i=>i===!0||i===!1,KT=i=>{if(S4(i)!=="object")return!1;const e=qW(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},OMe=Eu("Date"),FMe=Eu("File"),BMe=Eu("Blob"),VMe=Eu("FileList"),WMe=i=>x4(i)&&Ol(i.pipe),HMe=i=>{let e;return i&&(typeof FormData=="function"&&i instanceof FormData||Ol(i.append)&&((e=S4(i))==="formdata"||e==="object"&&Ol(i.toString)&&i.toString()==="[object FormData]"))},UMe=Eu("URLSearchParams"),[zMe,jMe,$Me,qMe]=["ReadableStream","Request","Response","Headers"].map(Eu),KMe=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function k2(i,e,{allOwnKeys:t=!1}={}){if(i===null||typeof i>"u")return;let n,s;if(typeof i!="object"&&(i=[i]),Ry(i))for(n=0,s=i.length;n<s;n++)e.call(null,i[n],n,i);else{const r=t?Object.getOwnPropertyNames(i):Object.keys(i),o=r.length;let a;for(n=0;n<o;n++)a=r[n],e.call(null,i[a],a,i)}}function qce(i,e){e=e.toLowerCase();const t=Object.keys(i);let n=t.length,s;for(;n-- >0;)if(s=t[n],e===s.toLowerCase())return s;return null}const n0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Kce=i=>!ok(i)&&i!==n0;function S3(){const{caseless:i}=Kce(this)&&this||{},e={},t=(n,s)=>{const r=i&&qce(e,s)||s;KT(e[r])&&KT(n)?e[r]=S3(e[r],n):KT(n)?e[r]=S3({},n):Ry(n)?e[r]=n.slice():e[r]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&k2(arguments[n],t);return e}const GMe=(i,e,t,{allOwnKeys:n}={})=>(k2(e,(s,r)=>{t&&Ol(s)?i[r]=zce(s,t):i[r]=s},{allOwnKeys:n}),i),YMe=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),QMe=(i,e,t,n)=>{i.prototype=Object.create(e.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:e.prototype}),t&&Object.assign(i.prototype,t)},XMe=(i,e,t,n)=>{let s,r,o;const a={};if(e=e||{},i==null)return e;do{for(s=Object.getOwnPropertyNames(i),r=s.length;r-- >0;)o=s[r],(!n||n(o,i,e))&&!a[o]&&(e[o]=i[o],a[o]=!0);i=t!==!1&&qW(i)}while(i&&(!t||t(i,e))&&i!==Object.prototype);return e},ZMe=(i,e,t)=>{i=String(i),(t===void 0||t>i.length)&&(t=i.length),t-=e.length;const n=i.indexOf(e,t);return n!==-1&&n===t},JMe=i=>{if(!i)return null;if(Ry(i))return i;let e=i.length;if(!$ce(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=i[e];return t},eOe=(i=>e=>i&&e instanceof i)(typeof Uint8Array<"u"&&qW(Uint8Array)),tOe=(i,e)=>{const n=(i&&i[Symbol.iterator]).call(i);let s;for(;(s=n.next())&&!s.done;){const r=s.value;e.call(i,r[0],r[1])}},nOe=(i,e)=>{let t;const n=[];for(;(t=i.exec(e))!==null;)n.push(t);return n},iOe=Eu("HTMLFormElement"),sOe=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,s){return n.toUpperCase()+s}),VY=(({hasOwnProperty:i})=>(e,t)=>i.call(e,t))(Object.prototype),rOe=Eu("RegExp"),Gce=(i,e)=>{const t=Object.getOwnPropertyDescriptors(i),n={};k2(t,(s,r)=>{let o;(o=e(s,r,i))!==!1&&(n[r]=o||s)}),Object.defineProperties(i,n)},oOe=i=>{Gce(i,(e,t)=>{if(Ol(i)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=i[t];if(Ol(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},aOe=(i,e)=>{const t={},n=s=>{s.forEach(r=>{t[r]=!0})};return Ry(i)?n(i):n(String(i).split(e)),t},lOe=()=>{},cOe=(i,e)=>i!=null&&Number.isFinite(i=+i)?i:e;function uOe(i){return!!(i&&Ol(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const dOe=i=>{const e=new Array(10),t=(n,s)=>{if(x4(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const r=Ry(n)?[]:{};return k2(n,(o,a)=>{const l=t(o,s+1);!ok(l)&&(r[a]=l)}),e[s]=void 0,r}}return n};return t(i,0)},hOe=Eu("AsyncFunction"),fOe=i=>i&&(x4(i)||Ol(i))&&Ol(i.then)&&Ol(i.catch),Yce=((i,e)=>i?setImmediate:e?((t,n)=>(n0.addEventListener("message",({source:s,data:r})=>{s===n0&&r===t&&n.length&&n.shift()()},!1),s=>{n.push(s),n0.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Ol(n0.postMessage)),gOe=typeof queueMicrotask<"u"?queueMicrotask.bind(n0):typeof process<"u"&&process.nextTick||Yce,Te={isArray:Ry,isArrayBuffer:jce,isBuffer:RMe,isFormData:HMe,isArrayBufferView:AMe,isString:PMe,isNumber:$ce,isBoolean:MMe,isObject:x4,isPlainObject:KT,isReadableStream:zMe,isRequest:jMe,isResponse:$Me,isHeaders:qMe,isUndefined:ok,isDate:OMe,isFile:FMe,isBlob:BMe,isRegExp:rOe,isFunction:Ol,isStream:WMe,isURLSearchParams:UMe,isTypedArray:eOe,isFileList:VMe,forEach:k2,merge:S3,extend:GMe,trim:KMe,stripBOM:YMe,inherits:QMe,toFlatObject:XMe,kindOf:S4,kindOfTest:Eu,endsWith:ZMe,toArray:JMe,forEachEntry:tOe,matchAll:nOe,isHTMLForm:iOe,hasOwnProperty:VY,hasOwnProp:VY,reduceDescriptors:Gce,freezeMethods:oOe,toObjectSet:aOe,toCamelCase:sOe,noop:lOe,toFiniteNumber:cOe,findKey:qce,global:n0,isContextDefined:Kce,isSpecCompliantForm:uOe,toJSONObject:dOe,isAsyncFn:hOe,isThenable:fOe,setImmediate:Yce,asap:gOe};function Tn(i,e,t,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}Te.inherits(Tn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Te.toJSONObject(this.config),code:this.code,status:this.status}}});const Qce=Tn.prototype,Xce={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{Xce[i]={value:i}});Object.defineProperties(Tn,Xce);Object.defineProperty(Qce,"isAxiosError",{value:!0});Tn.from=(i,e,t,n,s,r)=>{const o=Object.create(Qce);return Te.toFlatObject(i,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Tn.call(o,i.message,e,t,n,s),o.cause=i,o.name=i.name,r&&Object.assign(o,r),o};const mOe=null;function k3(i){return Te.isPlainObject(i)||Te.isArray(i)}function Zce(i){return Te.endsWith(i,"[]")?i.slice(0,-2):i}function WY(i,e,t){return i?i.concat(e).map(function(s,r){return s=Zce(s),!t&&r?"["+s+"]":s}).join(t?".":""):e}function pOe(i){return Te.isArray(i)&&!i.some(k3)}const _Oe=Te.toFlatObject(Te,{},null,function(e){return/^is[A-Z]/.test(e)});function E4(i,e,t){if(!Te.isObject(i))throw new TypeError("target must be an object");e=e||new FormData,t=Te.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,v){return!Te.isUndefined(v[_])});const n=t.metaTokens,s=t.visitor||u,r=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&Te.isSpecCompliantForm(e);if(!Te.isFunction(s))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(Te.isDate(p))return p.toISOString();if(!l&&Te.isBlob(p))throw new Tn("Blob is not supported. Use a Buffer instead.");return Te.isArrayBuffer(p)||Te.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,_,v){let y=p;if(p&&!v&&typeof p=="object"){if(Te.endsWith(_,"{}"))_=n?_:_.slice(0,-2),p=JSON.stringify(p);else if(Te.isArray(p)&&pOe(p)||(Te.isFileList(p)||Te.endsWith(_,"[]"))&&(y=Te.toArray(p)))return _=Zce(_),y.forEach(function(x,k){!(Te.isUndefined(x)||x===null)&&e.append(o===!0?WY([_],k,r):o===null?_:_+"[]",c(x))}),!1}return k3(p)?!0:(e.append(WY(v,_,r),c(p)),!1)}const d=[],h=Object.assign(_Oe,{defaultVisitor:u,convertValue:c,isVisitable:k3});function g(p,_){if(!Te.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+_.join("."));d.push(p),Te.forEach(p,function(y,w){(!(Te.isUndefined(y)||y===null)&&s.call(e,y,Te.isString(w)?w.trim():w,_,h))===!0&&g(y,_?_.concat(w):[w])}),d.pop()}}if(!Te.isObject(i))throw new TypeError("data must be an object");return g(i),e}function HY(i){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function KW(i,e){this._pairs=[],i&&E4(i,this,e)}const Jce=KW.prototype;Jce.append=function(e,t){this._pairs.push([e,t])};Jce.toString=function(e){const t=e?function(n){return e.call(this,n,HY)}:HY;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function vOe(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function eue(i,e,t){if(!e)return i;const n=t&&t.encode||vOe;Te.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let r;if(s?r=s(e,t):r=Te.isURLSearchParams(e)?e.toString():new KW(e,t).toString(n),r){const o=i.indexOf("#");o!==-1&&(i=i.slice(0,o)),i+=(i.indexOf("?")===-1?"?":"&")+r}return i}class UY{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Te.forEach(this.handlers,function(n){n!==null&&e(n)})}}const tue={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bOe=typeof URLSearchParams<"u"?URLSearchParams:KW,yOe=typeof FormData<"u"?FormData:null,wOe=typeof Blob<"u"?Blob:null,COe={isBrowser:!0,classes:{URLSearchParams:bOe,FormData:yOe,Blob:wOe},protocols:["http","https","file","blob","url","data"]},GW=typeof window<"u"&&typeof document<"u",x3=typeof navigator=="object"&&navigator||void 0,SOe=GW&&(!x3||["ReactNative","NativeScript","NS"].indexOf(x3.product)<0),kOe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",xOe=GW&&window.location.href||"http://localhost",EOe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:GW,hasStandardBrowserEnv:SOe,hasStandardBrowserWebWorkerEnv:kOe,navigator:x3,origin:xOe},Symbol.toStringTag,{value:"Module"})),Qo={...EOe,...COe};function TOe(i,e){return E4(i,new Qo.classes.URLSearchParams,Object.assign({visitor:function(t,n,s,r){return Qo.isNode&&Te.isBuffer(t)?(this.append(n,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function LOe(i){return Te.matchAll(/\w+|\[(\w*)]/g,i).map(e=>e[0]==="[]"?"":e[1]||e[0])}function IOe(i){const e={},t=Object.keys(i);let n;const s=t.length;let r;for(n=0;n<s;n++)r=t[n],e[r]=i[r];return e}function nue(i){function e(t,n,s,r){let o=t[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=r>=t.length;return o=!o&&Te.isArray(s)?s.length:o,l?(Te.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!a):((!s[o]||!Te.isObject(s[o]))&&(s[o]=[]),e(t,n,s[o],r)&&Te.isArray(s[o])&&(s[o]=IOe(s[o])),!a)}if(Te.isFormData(i)&&Te.isFunction(i.entries)){const t={};return Te.forEachEntry(i,(n,s)=>{e(LOe(n),s,t,0)}),t}return null}function DOe(i,e,t){if(Te.isString(i))try{return(e||JSON.parse)(i),Te.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(i)}const x2={transitional:tue,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,r=Te.isObject(e);if(r&&Te.isHTMLForm(e)&&(e=new FormData(e)),Te.isFormData(e))return s?JSON.stringify(nue(e)):e;if(Te.isArrayBuffer(e)||Te.isBuffer(e)||Te.isStream(e)||Te.isFile(e)||Te.isBlob(e)||Te.isReadableStream(e))return e;if(Te.isArrayBufferView(e))return e.buffer;if(Te.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return TOe(e,this.formSerializer).toString();if((a=Te.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return E4(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return r||s?(t.setContentType("application/json",!1),DOe(e)):e}],transformResponse:[function(e){const t=this.transitional||x2.transitional,n=t&&t.forcedJSONParsing,s=this.responseType==="json";if(Te.isResponse(e)||Te.isReadableStream(e))return e;if(e&&Te.isString(e)&&(n&&!this.responseType||s)){const o=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Tn.from(a,Tn.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Qo.classes.FormData,Blob:Qo.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Te.forEach(["delete","get","head","post","put","patch"],i=>{x2.headers[i]={}});const NOe=Te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ROe=i=>{const e={};let t,n,s;return i&&i.split(`
`).forEach(function(o){s=o.indexOf(":"),t=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!t||e[t]&&NOe[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},zY=Symbol("internals");function Rw(i){return i&&String(i).trim().toLowerCase()}function GT(i){return i===!1||i==null?i:Te.isArray(i)?i.map(GT):String(i)}function AOe(i){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(i);)e[n[1]]=n[2];return e}const POe=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function oO(i,e,t,n,s){if(Te.isFunction(n))return n.call(this,e,t);if(s&&(e=t),!!Te.isString(e)){if(Te.isString(n))return e.indexOf(n)!==-1;if(Te.isRegExp(n))return n.test(e)}}function MOe(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function OOe(i,e){const t=Te.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+t,{value:function(s,r,o){return this[n].call(this,e,s,r,o)},configurable:!0})})}let el=class{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function r(a,l,c){const u=Rw(l);if(!u)throw new Error("header name must be a non-empty string");const d=Te.findKey(s,u);(!d||s[d]===void 0||c===!0||c===void 0&&s[d]!==!1)&&(s[d||l]=GT(a))}const o=(a,l)=>Te.forEach(a,(c,u)=>r(c,u,l));if(Te.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Te.isString(e)&&(e=e.trim())&&!POe(e))o(ROe(e),t);else if(Te.isHeaders(e))for(const[a,l]of e.entries())r(l,a,n);else e!=null&&r(t,e,n);return this}get(e,t){if(e=Rw(e),e){const n=Te.findKey(this,e);if(n){const s=this[n];if(!t)return s;if(t===!0)return AOe(s);if(Te.isFunction(t))return t.call(this,s,n);if(Te.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Rw(e),e){const n=Te.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||oO(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let s=!1;function r(o){if(o=Rw(o),o){const a=Te.findKey(n,o);a&&(!t||oO(n,n[a],a,t))&&(delete n[a],s=!0)}}return Te.isArray(e)?e.forEach(r):r(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const r=t[n];(!e||oO(this,this[r],r,e,!0))&&(delete this[r],s=!0)}return s}normalize(e){const t=this,n={};return Te.forEach(this,(s,r)=>{const o=Te.findKey(n,r);if(o){t[o]=GT(s),delete t[r];return}const a=e?MOe(r):String(r).trim();a!==r&&delete t[r],t[a]=GT(s),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Te.forEach(this,(n,s)=>{n!=null&&n!==!1&&(t[s]=e&&Te.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[zY]=this[zY]={accessors:{}}).accessors,s=this.prototype;function r(o){const a=Rw(o);n[a]||(OOe(s,o),n[a]=!0)}return Te.isArray(e)?e.forEach(r):r(e),this}};el.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Te.reduceDescriptors(el.prototype,({value:i},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>i,set(n){this[t]=n}}});Te.freezeMethods(el);function aO(i,e){const t=this||x2,n=e||t,s=el.from(n.headers);let r=n.data;return Te.forEach(i,function(a){r=a.call(t,r,s.normalize(),e?e.status:void 0)}),s.normalize(),r}function iue(i){return!!(i&&i.__CANCEL__)}function Ay(i,e,t){Tn.call(this,i??"canceled",Tn.ERR_CANCELED,e,t),this.name="CanceledError"}Te.inherits(Ay,Tn,{__CANCEL__:!0});function sue(i,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?i(t):e(new Tn("Request failed with status code "+t.status,[Tn.ERR_BAD_REQUEST,Tn.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function FOe(i){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return e&&e[1]||""}function BOe(i,e){i=i||10;const t=new Array(i),n=new Array(i);let s=0,r=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=n[r];o||(o=c),t[s]=l,n[s]=c;let d=r,h=0;for(;d!==s;)h+=t[d++],d=d%i;if(s=(s+1)%i,s===r&&(r=(r+1)%i),c-o<e)return;const g=u&&c-u;return g?Math.round(h*1e3/g):void 0}}function VOe(i,e){let t=0,n=1e3/e,s,r;const o=(c,u=Date.now())=>{t=u,s=null,r&&(clearTimeout(r),r=null),i.apply(null,c)};return[(...c)=>{const u=Date.now(),d=u-t;d>=n?o(c,u):(s=c,r||(r=setTimeout(()=>{r=null,o(s)},n-d)))},()=>s&&o(s)]}const kI=(i,e,t=3)=>{let n=0;const s=BOe(50,250);return VOe(r=>{const o=r.loaded,a=r.lengthComputable?r.total:void 0,l=o-n,c=s(l),u=o<=a;n=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:r,lengthComputable:a!=null,[e?"download":"upload"]:!0};i(d)},t)},jY=(i,e)=>{const t=i!=null;return[n=>e[0]({lengthComputable:t,total:i,loaded:n}),e[1]]},$Y=i=>(...e)=>Te.asap(()=>i(...e)),WOe=Qo.hasStandardBrowserEnv?((i,e)=>t=>(t=new URL(t,Qo.origin),i.protocol===t.protocol&&i.host===t.host&&(e||i.port===t.port)))(new URL(Qo.origin),Qo.navigator&&/(msie|trident)/i.test(Qo.navigator.userAgent)):()=>!0,HOe=Qo.hasStandardBrowserEnv?{write(i,e,t,n,s,r){const o=[i+"="+encodeURIComponent(e)];Te.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),Te.isString(n)&&o.push("path="+n),Te.isString(s)&&o.push("domain="+s),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(i){const e=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function UOe(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function zOe(i,e){return e?i.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):i}function rue(i,e,t){let n=!UOe(e);return i&&(n||t==!1)?zOe(i,e):e}const qY=i=>i instanceof el?{...i}:i;function $0(i,e){e=e||{};const t={};function n(c,u,d,h){return Te.isPlainObject(c)&&Te.isPlainObject(u)?Te.merge.call({caseless:h},c,u):Te.isPlainObject(u)?Te.merge({},u):Te.isArray(u)?u.slice():u}function s(c,u,d,h){if(Te.isUndefined(u)){if(!Te.isUndefined(c))return n(void 0,c,d,h)}else return n(c,u,d,h)}function r(c,u){if(!Te.isUndefined(u))return n(void 0,u)}function o(c,u){if(Te.isUndefined(u)){if(!Te.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function a(c,u,d){if(d in e)return n(c,u);if(d in i)return n(void 0,c)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,d)=>s(qY(c),qY(u),d,!0)};return Te.forEach(Object.keys(Object.assign({},i,e)),function(u){const d=l[u]||s,h=d(i[u],e[u],u);Te.isUndefined(h)&&d!==a||(t[u]=h)}),t}const oue=i=>{const e=$0({},i);let{data:t,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:r,headers:o,auth:a}=e;e.headers=o=el.from(o),e.url=eue(rue(e.baseURL,e.url,e.allowAbsoluteUrls),i.params,i.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Te.isFormData(t)){if(Qo.hasStandardBrowserEnv||Qo.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(Qo.hasStandardBrowserEnv&&(n&&Te.isFunction(n)&&(n=n(e)),n||n!==!1&&WOe(e.url))){const c=s&&r&&HOe.read(r);c&&o.set(s,c)}return e},jOe=typeof XMLHttpRequest<"u",$Oe=jOe&&function(i){return new Promise(function(t,n){const s=oue(i);let r=s.data;const o=el.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,u,d,h,g,p;function _(){g&&g(),p&&p(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(s.method.toUpperCase(),s.url,!0),v.timeout=s.timeout;function y(){if(!v)return;const x=el.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),T={data:!a||a==="text"||a==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:x,config:i,request:v};sue(function(L){t(L),_()},function(L){n(L),_()},T),v=null}"onloadend"in v?v.onloadend=y:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(y)},v.onabort=function(){v&&(n(new Tn("Request aborted",Tn.ECONNABORTED,i,v)),v=null)},v.onerror=function(){n(new Tn("Network Error",Tn.ERR_NETWORK,i,v)),v=null},v.ontimeout=function(){let k=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const T=s.transitional||tue;s.timeoutErrorMessage&&(k=s.timeoutErrorMessage),n(new Tn(k,T.clarifyTimeoutError?Tn.ETIMEDOUT:Tn.ECONNABORTED,i,v)),v=null},r===void 0&&o.setContentType(null),"setRequestHeader"in v&&Te.forEach(o.toJSON(),function(k,T){v.setRequestHeader(T,k)}),Te.isUndefined(s.withCredentials)||(v.withCredentials=!!s.withCredentials),a&&a!=="json"&&(v.responseType=s.responseType),c&&([h,p]=kI(c,!0),v.addEventListener("progress",h)),l&&v.upload&&([d,g]=kI(l),v.upload.addEventListener("progress",d),v.upload.addEventListener("loadend",g)),(s.cancelToken||s.signal)&&(u=x=>{v&&(n(!x||x.type?new Ay(null,i,v):x),v.abort(),v=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const w=FOe(s.url);if(w&&Qo.protocols.indexOf(w)===-1){n(new Tn("Unsupported protocol "+w+":",Tn.ERR_BAD_REQUEST,i));return}v.send(r||null)})},qOe=(i,e)=>{const{length:t}=i=i?i.filter(Boolean):[];if(e||t){let n=new AbortController,s;const r=function(c){if(!s){s=!0,a();const u=c instanceof Error?c:this.reason;n.abort(u instanceof Tn?u:new Ay(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,r(new Tn(`timeout ${e} of ms exceeded`,Tn.ETIMEDOUT))},e);const a=()=>{i&&(o&&clearTimeout(o),o=null,i.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),i=null)};i.forEach(c=>c.addEventListener("abort",r));const{signal:l}=n;return l.unsubscribe=()=>Te.asap(a),l}},KOe=function*(i,e){let t=i.byteLength;if(t<e){yield i;return}let n=0,s;for(;n<t;)s=n+e,yield i.slice(n,s),n=s},GOe=async function*(i,e){for await(const t of YOe(i))yield*KOe(t,e)},YOe=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const e=i.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},KY=(i,e,t,n)=>{const s=GOe(i,e);let r=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await s.next();if(c){a(),l.close();return}let d=u.byteLength;if(t){let h=r+=d;t(h)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},T4=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",aue=T4&&typeof ReadableStream=="function",QOe=T4&&(typeof TextEncoder=="function"?(i=>e=>i.encode(e))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),lue=(i,...e)=>{try{return!!i(...e)}catch{return!1}},XOe=aue&&lue(()=>{let i=!1;const e=new Request(Qo.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!e}),GY=64*1024,E3=aue&&lue(()=>Te.isReadableStream(new Response("").body)),xI={stream:E3&&(i=>i.body)};T4&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!xI[e]&&(xI[e]=Te.isFunction(i[e])?t=>t[e]():(t,n)=>{throw new Tn(`Response type '${e}' is not supported`,Tn.ERR_NOT_SUPPORT,n)})})})(new Response);const ZOe=async i=>{if(i==null)return 0;if(Te.isBlob(i))return i.size;if(Te.isSpecCompliantForm(i))return(await new Request(Qo.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(Te.isArrayBufferView(i)||Te.isArrayBuffer(i))return i.byteLength;if(Te.isURLSearchParams(i)&&(i=i+""),Te.isString(i))return(await QOe(i)).byteLength},JOe=async(i,e)=>{const t=Te.toFiniteNumber(i.getContentLength());return t??ZOe(e)},e6e=T4&&(async i=>{let{url:e,method:t,data:n,signal:s,cancelToken:r,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=oue(i);c=c?(c+"").toLowerCase():"text";let g=qOe([s,r&&r.toAbortSignal()],o),p;const _=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let v;try{if(l&&XOe&&t!=="get"&&t!=="head"&&(v=await JOe(u,n))!==0){let T=new Request(e,{method:"POST",body:n,duplex:"half"}),R;if(Te.isFormData(n)&&(R=T.headers.get("content-type"))&&u.setContentType(R),T.body){const[L,I]=jY(v,kI($Y(l)));n=KY(T.body,GY,L,I)}}Te.isString(d)||(d=d?"include":"omit");const y="credentials"in Request.prototype;p=new Request(e,{...h,signal:g,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:y?d:void 0});let w=await fetch(p);const x=E3&&(c==="stream"||c==="response");if(E3&&(a||x&&_)){const T={};["status","statusText","headers"].forEach(A=>{T[A]=w[A]});const R=Te.toFiniteNumber(w.headers.get("content-length")),[L,I]=a&&jY(R,kI($Y(a),!0))||[];w=new Response(KY(w.body,GY,L,()=>{I&&I(),_&&_()}),T)}c=c||"text";let k=await xI[Te.findKey(xI,c)||"text"](w,i);return!x&&_&&_(),await new Promise((T,R)=>{sue(T,R,{data:k,headers:el.from(w.headers),status:w.status,statusText:w.statusText,config:i,request:p})})}catch(y){throw _&&_(),y&&y.name==="TypeError"&&/fetch/i.test(y.message)?Object.assign(new Tn("Network Error",Tn.ERR_NETWORK,i,p),{cause:y.cause||y}):Tn.from(y,y&&y.code,i,p)}}),T3={http:mOe,xhr:$Oe,fetch:e6e};Te.forEach(T3,(i,e)=>{if(i){try{Object.defineProperty(i,"name",{value:e})}catch{}Object.defineProperty(i,"adapterName",{value:e})}});const YY=i=>`- ${i}`,t6e=i=>Te.isFunction(i)||i===null||i===!1,cue={getAdapter:i=>{i=Te.isArray(i)?i:[i];const{length:e}=i;let t,n;const s={};for(let r=0;r<e;r++){t=i[r];let o;if(n=t,!t6e(t)&&(n=T3[(o=String(t)).toLowerCase()],n===void 0))throw new Tn(`Unknown adapter '${o}'`);if(n)break;s[o||"#"+r]=n}if(!n){const r=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?r.length>1?`since :
`+r.map(YY).join(`
`):" "+YY(r[0]):"as no adapter specified";throw new Tn("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:T3};function lO(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new Ay(null,i)}function QY(i){return lO(i),i.headers=el.from(i.headers),i.data=aO.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),cue.getAdapter(i.adapter||x2.adapter)(i).then(function(n){return lO(i),n.data=aO.call(i,i.transformResponse,n),n.headers=el.from(n.headers),n},function(n){return iue(n)||(lO(i),n&&n.response&&(n.response.data=aO.call(i,i.transformResponse,n.response),n.response.headers=el.from(n.response.headers))),Promise.reject(n)})}const uue="1.8.4",L4={};["object","boolean","number","function","string","symbol"].forEach((i,e)=>{L4[i]=function(n){return typeof n===i||"a"+(e<1?"n ":" ")+i}});const XY={};L4.transitional=function(e,t,n){function s(r,o){return"[Axios v"+uue+"] Transitional option '"+r+"'"+o+(n?". "+n:"")}return(r,o,a)=>{if(e===!1)throw new Tn(s(o," has been removed"+(t?" in "+t:"")),Tn.ERR_DEPRECATED);return t&&!XY[o]&&(XY[o]=!0,console.warn(s(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,o,a):!0}};L4.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function n6e(i,e,t){if(typeof i!="object")throw new Tn("options must be an object",Tn.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let s=n.length;for(;s-- >0;){const r=n[s],o=e[r];if(o){const a=i[r],l=a===void 0||o(a,r,i);if(l!==!0)throw new Tn("option "+r+" must be "+l,Tn.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Tn("Unknown option "+r,Tn.ERR_BAD_OPTION)}}const YT={assertOptions:n6e,validators:L4},Hu=YT.validators;let h0=class{constructor(e){this.defaults=e,this.interceptors={request:new UY,response:new UY}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const r=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?r&&!String(n.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+r):n.stack=r}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=$0(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:r}=t;n!==void 0&&YT.assertOptions(n,{silentJSONParsing:Hu.transitional(Hu.boolean),forcedJSONParsing:Hu.transitional(Hu.boolean),clarifyTimeoutError:Hu.transitional(Hu.boolean)},!1),s!=null&&(Te.isFunction(s)?t.paramsSerializer={serialize:s}:YT.assertOptions(s,{encode:Hu.function,serialize:Hu.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),YT.assertOptions(t,{baseUrl:Hu.spelling("baseURL"),withXsrfToken:Hu.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=r&&Te.merge(r.common,r[t.method]);r&&Te.forEach(["delete","get","head","post","put","patch","common"],p=>{delete r[p]}),t.headers=el.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(t)===!1||(l=l&&_.synchronous,a.unshift(_.fulfilled,_.rejected))});const c=[];this.interceptors.response.forEach(function(_){c.push(_.fulfilled,_.rejected)});let u,d=0,h;if(!l){const p=[QY.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,c),h=p.length,u=Promise.resolve(t);d<h;)u=u.then(p[d++],p[d++]);return u}h=a.length;let g=t;for(d=0;d<h;){const p=a[d++],_=a[d++];try{g=p(g)}catch(v){_.call(this,v);break}}try{u=QY.call(this,g)}catch(p){return Promise.reject(p)}for(d=0,h=c.length;d<h;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=$0(this.defaults,e);const t=rue(e.baseURL,e.url,e.allowAbsoluteUrls);return eue(t,e.params,e.paramsSerializer)}};Te.forEach(["delete","get","head","options"],function(e){h0.prototype[e]=function(t,n){return this.request($0(n||{},{method:e,url:t,data:(n||{}).data}))}});Te.forEach(["post","put","patch"],function(e){function t(n){return function(r,o,a){return this.request($0(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}h0.prototype[e]=t(),h0.prototype[e+"Form"]=t(!0)});let i6e=class due{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const n=this;this.promise.then(s=>{if(!n._listeners)return;let r=n._listeners.length;for(;r-- >0;)n._listeners[r](s);n._listeners=null}),this.promise.then=s=>{let r;const o=new Promise(a=>{n.subscribe(a),r=a}).then(s);return o.cancel=function(){n.unsubscribe(r)},o},e(function(r,o,a){n.reason||(n.reason=new Ay(r,o,a),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new due(function(s){e=s}),cancel:e}}};function s6e(i){return function(t){return i.apply(null,t)}}function r6e(i){return Te.isObject(i)&&i.isAxiosError===!0}const L3={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(L3).forEach(([i,e])=>{L3[e]=i});function hue(i){const e=new h0(i),t=zce(h0.prototype.request,e);return Te.extend(t,h0.prototype,e,{allOwnKeys:!0}),Te.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return hue($0(i,s))},t}const er=hue(x2);er.Axios=h0;er.CanceledError=Ay;er.CancelToken=i6e;er.isCancel=iue;er.VERSION=uue;er.toFormData=E4;er.AxiosError=Tn;er.Cancel=er.CanceledError;er.all=function(e){return Promise.all(e)};er.spread=s6e;er.isAxiosError=r6e;er.mergeConfig=$0;er.AxiosHeaders=el;er.formToJSON=i=>nue(Te.isHTMLForm(i)?new FormData(i):i);er.getAdapter=cue.getAdapter;er.HttpStatusCode=L3;er.default=er;const{Axios:Jlt,AxiosError:ect,CanceledError:tct,isCancel:nct,CancelToken:ict,VERSION:sct,all:rct,Cancel:oct,isAxiosError:act,spread:lct,toFormData:cct,AxiosHeaders:uct,HttpStatusCode:dct,formToJSON:hct,getAdapter:fct,mergeConfig:gct}=er,o6e="d927f36777msh858985351b063fap15e36djsnabd6122f9df2",a6e="https://judge0-ce.p.rapidapi.com",l6e={javascript:63,python:71,java:62,cpp:54,typescript:74,csharp:51,php:68,swift:83,kotlin:78,dart:92,go:60,ruby:72,scala:81,rust:73,erlang:58,elixir:57};function ZY(i){try{if(typeof window<"u"){const e=atob(i),t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return new TextDecoder().decode(t)}else return Buffer.from(i,"base64").toString("utf8")}catch(e){return console.error("Error decoding base64:",e),"[Error decoding output]"}}async function c6e(i,e,t=""){const n=l6e[e];if(!n)throw new Error(`Unsupported language: ${e}`);const s={source_code:i,language_id:n,stdin:t};try{const r=await er.post(`${a6e}/submissions?base64_encoded=false&wait=true`,s,{headers:{"Content-Type":"application/json","X-RapidAPI-Key":o6e,"X-RapidAPI-Host":"judge0-ce.p.rapidapi.com"}});if(!r.status===200){const l=await r.statusText;throw new Error(`API responded with status ${r.status}: ${l}`)}const o=r.data;let a="";return o.stdout?a=o.stdout:o.stderr?a=`Error: ${ZY(o.stderr)}`:o.compile_output?a=`Compilation Error: ${ZY(o.compile_output)}`:a="No output generated",{output:a,status:o.status?o.status.description:"Unknown",executionTime:o.time,memory:o.memory,exitCode:o.exit_code}}catch(r){throw console.error("Error submitting code:",r),r}}const tl=()=>new Map,I3=i=>{const e=tl();return i.forEach((t,n)=>{e.set(n,t)}),e},Vd=(i,e,t)=>{let n=i.get(e);return n===void 0&&i.set(e,n=t()),n},u6e=(i,e)=>{const t=[];for(const[n,s]of i)t.push(e(s,n));return t},d6e=(i,e)=>{for(const[t,n]of i)if(e(n,t))return!0;return!1},Cm=()=>new Set,cO=i=>i[i.length-1],h6e=(i,e)=>{for(let t=0;t<e.length;t++)i.push(e[t])},_f=Array.from,f6e=Array.isArray;class fue{constructor(){this._observers=tl()}on(e,t){return Vd(this._observers,e,Cm).add(t),t}once(e,t){const n=(...s)=>{this.off(e,n),t(...s)};this.on(e,n)}off(e,t){const n=this._observers.get(e);n!==void 0&&(n.delete(t),n.size===0&&this._observers.delete(e))}emit(e,t){return _f((this._observers.get(e)||tl()).values()).forEach(n=>n(...t))}destroy(){this._observers=tl()}}class g6e{constructor(){this._observers=tl()}on(e,t){Vd(this._observers,e,Cm).add(t)}once(e,t){const n=(...s)=>{this.off(e,n),t(...s)};this.on(e,n)}off(e,t){const n=this._observers.get(e);n!==void 0&&(n.delete(t),n.size===0&&this._observers.delete(e))}emit(e,t){return _f((this._observers.get(e)||tl()).values()).forEach(n=>n(...t))}destroy(){this._observers=tl()}}const vf=Math.floor,QT=Math.abs,YW=(i,e)=>i<e?i:e,y1=(i,e)=>i>e?i:e,m6e=Math.pow,gue=i=>i!==0?i<0:1/i<0,JY=1,eQ=2,uO=4,dO=8,ak=32,Zh=64,Fl=128,I4=31,D3=63,f0=127,p6e=2147483647,mue=Number.MAX_SAFE_INTEGER,_6e=Number.isInteger||(i=>typeof i=="number"&&isFinite(i)&&vf(i)===i),v6e=String.fromCharCode,b6e=i=>i.toLowerCase(),y6e=/^\s*/g,w6e=i=>i.replace(y6e,""),C6e=/([A-Z])/g,tQ=(i,e)=>w6e(i.replace(C6e,t=>`${e}${b6e(t)}`)),S6e=i=>{const e=unescape(encodeURIComponent(i)),t=e.length,n=new Uint8Array(t);for(let s=0;s<t;s++)n[s]=e.codePointAt(s);return n},lk=typeof TextEncoder<"u"?new TextEncoder:null,k6e=i=>lk.encode(i),x6e=lk?k6e:S6e;let VC=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});VC&&VC.decode(new Uint8Array).length===1&&(VC=null);class E2{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const $o=()=>new E2,QW=i=>{let e=i.cpos;for(let t=0;t<i.bufs.length;t++)e+=i.bufs[t].length;return e},bs=i=>{const e=new Uint8Array(QW(i));let t=0;for(let n=0;n<i.bufs.length;n++){const s=i.bufs[n];e.set(s,t),t+=s.length}return e.set(new Uint8Array(i.cbuf.buffer,0,i.cpos),t),e},E6e=(i,e)=>{const t=i.cbuf.length;t-i.cpos<e&&(i.bufs.push(new Uint8Array(i.cbuf.buffer,0,i.cpos)),i.cbuf=new Uint8Array(y1(t,e)*2),i.cpos=0)},Qr=(i,e)=>{const t=i.cbuf.length;i.cpos===t&&(i.bufs.push(i.cbuf),i.cbuf=new Uint8Array(t*2),i.cpos=0),i.cbuf[i.cpos++]=e},N3=Qr,Ht=(i,e)=>{for(;e>f0;)Qr(i,Fl|f0&e),e=vf(e/128);Qr(i,f0&e)},XW=(i,e)=>{const t=gue(e);for(t&&(e=-e),Qr(i,(e>D3?Fl:0)|(t?Zh:0)|D3&e),e=vf(e/64);e>0;)Qr(i,(e>f0?Fl:0)|f0&e),e=vf(e/128)},R3=new Uint8Array(3e4),T6e=R3.length/3,L6e=(i,e)=>{if(e.length<T6e){const t=lk.encodeInto(e,R3).written||0;Ht(i,t);for(let n=0;n<t;n++)Qr(i,R3[n])}else qs(i,x6e(e))},I6e=(i,e)=>{const t=unescape(encodeURIComponent(e)),n=t.length;Ht(i,n);for(let s=0;s<n;s++)Qr(i,t.codePointAt(s))},g0=lk&&lk.encodeInto?L6e:I6e,D4=(i,e)=>{const t=i.cbuf.length,n=i.cpos,s=YW(t-n,e.length),r=e.length-s;i.cbuf.set(e.subarray(0,s),n),i.cpos+=s,r>0&&(i.bufs.push(i.cbuf),i.cbuf=new Uint8Array(y1(t*2,r)),i.cbuf.set(e.subarray(s)),i.cpos=r)},qs=(i,e)=>{Ht(i,e.byteLength),D4(i,e)},ZW=(i,e)=>{E6e(i,e);const t=new DataView(i.cbuf.buffer,i.cpos,e);return i.cpos+=e,t},D6e=(i,e)=>ZW(i,4).setFloat32(0,e,!1),N6e=(i,e)=>ZW(i,8).setFloat64(0,e,!1),R6e=(i,e)=>ZW(i,8).setBigInt64(0,e,!1),nQ=new DataView(new ArrayBuffer(4)),A6e=i=>(nQ.setFloat32(0,i),nQ.getFloat32(0)===i),ck=(i,e)=>{switch(typeof e){case"string":Qr(i,119),g0(i,e);break;case"number":_6e(e)&&QT(e)<=p6e?(Qr(i,125),XW(i,e)):A6e(e)?(Qr(i,124),D6e(i,e)):(Qr(i,123),N6e(i,e));break;case"bigint":Qr(i,122),R6e(i,e);break;case"object":if(e===null)Qr(i,126);else if(f6e(e)){Qr(i,117),Ht(i,e.length);for(let t=0;t<e.length;t++)ck(i,e[t])}else if(e instanceof Uint8Array)Qr(i,116),qs(i,e);else{Qr(i,118);const t=Object.keys(e);Ht(i,t.length);for(let n=0;n<t.length;n++){const s=t[n];g0(i,s),ck(i,e[s])}}break;case"boolean":Qr(i,e?120:121);break;default:Qr(i,127)}};class iQ extends E2{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Ht(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const sQ=i=>{i.count>0&&(XW(i.encoder,i.count===1?i.s:-i.s),i.count>1&&Ht(i.encoder,i.count-2))};class XT{constructor(){this.encoder=new E2,this.s=0,this.count=0}write(e){this.s===e?this.count++:(sQ(this),this.count=1,this.s=e)}toUint8Array(){return sQ(this),bs(this.encoder)}}const rQ=i=>{if(i.count>0){const e=i.diff*2+(i.count===1?0:1);XW(i.encoder,e),i.count>1&&Ht(i.encoder,i.count-2)}};class hO{constructor(){this.encoder=new E2,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(rQ(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return rQ(this),bs(this.encoder)}}class P6e{constructor(){this.sarr=[],this.s="",this.lensE=new XT}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new E2;return this.sarr.push(this.s),this.s="",g0(e,this.sarr.join("")),D4(e,this.lensE.toUint8Array()),bs(e)}}const Sm=i=>new Error(i),wd=()=>{throw Sm("Method unimplemented")},pc=()=>{throw Sm("Unexpected case")},pue=Sm("Unexpected end of array"),_ue=Sm("Integer out of Range");class N4{constructor(e){this.arr=e,this.pos=0}}const Um=i=>new N4(i),M6e=i=>i.pos!==i.arr.length,O6e=(i,e)=>{const t=new Uint8Array(i.arr.buffer,i.pos+i.arr.byteOffset,e);return i.pos+=e,t},zo=i=>O6e(i,bn(i)),Fb=i=>i.arr[i.pos++],bn=i=>{let e=0,t=1;const n=i.arr.length;for(;i.pos<n;){const s=i.arr[i.pos++];if(e=e+(s&f0)*t,t*=128,s<Fl)return e;if(e>mue)throw _ue}throw pue},JW=i=>{let e=i.arr[i.pos++],t=e&D3,n=64;const s=(e&Zh)>0?-1:1;if((e&Fl)===0)return s*t;const r=i.arr.length;for(;i.pos<r;){if(e=i.arr[i.pos++],t=t+(e&f0)*n,n*=128,e<Fl)return s*t;if(t>mue)throw _ue}throw pue},F6e=i=>{let e=bn(i);if(e===0)return"";{let t=String.fromCodePoint(Fb(i));if(--e<100)for(;e--;)t+=String.fromCodePoint(Fb(i));else for(;e>0;){const n=e<1e4?e:1e4,s=i.arr.subarray(i.pos,i.pos+n);i.pos+=n,t+=String.fromCodePoint.apply(null,s),e-=n}return decodeURIComponent(escape(t))}},B6e=i=>VC.decode(zo(i)),Jg=VC?B6e:F6e,eH=(i,e)=>{const t=new DataView(i.arr.buffer,i.arr.byteOffset+i.pos,e);return i.pos+=e,t},V6e=i=>eH(i,4).getFloat32(0,!1),W6e=i=>eH(i,8).getFloat64(0,!1),H6e=i=>eH(i,8).getBigInt64(0,!1),U6e=[i=>{},i=>null,JW,V6e,W6e,H6e,i=>!1,i=>!0,Jg,i=>{const e=bn(i),t={};for(let n=0;n<e;n++){const s=Jg(i);t[s]=uk(i)}return t},i=>{const e=bn(i),t=[];for(let n=0;n<e;n++)t.push(uk(i));return t},zo],uk=i=>U6e[127-Fb(i)](i);class oQ extends N4{constructor(e,t){super(e),this.reader=t,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),M6e(this)?this.count=bn(this)+1:this.count=-1),this.count--,this.s}}class ZT extends N4{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=JW(this);const e=gue(this.s);this.count=1,e&&(this.s=-this.s,this.count=bn(this)+2)}return this.count--,this.s}}class fO extends N4{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=JW(this),t=e&1;this.diff=vf(e/2),this.count=1,t&&(this.count=bn(this)+2)}return this.s+=this.diff,this.count--,this.s}}class z6e{constructor(e){this.decoder=new ZT(e),this.str=Jg(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}const j6e=crypto.getRandomValues.bind(crypto),vue=()=>j6e(new Uint32Array(1))[0],$6e="10000000-1000-4000-8000"+-1e11,q6e=()=>$6e.replace(/[018]/g,i=>(i^vue()&15>>i/4).toString(16)),q0=Date.now,aQ=i=>new Promise(i);Promise.all.bind(Promise);const lQ=i=>i===void 0?null:i;class K6e{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}}let bue=new K6e,tH=!0;try{typeof localStorage<"u"&&localStorage&&(bue=localStorage,tH=!1)}catch{}const yue=bue,G6e=i=>tH||addEventListener("storage",i),Y6e=i=>tH||removeEventListener("storage",i),Q6e=Object.assign,wue=Object.keys,X6e=(i,e)=>{for(const t in i)e(i[t],t)},Z6e=(i,e)=>{const t=[];for(const n in i)t.push(e(i[n],n));return t},cQ=i=>wue(i).length,uQ=i=>wue(i).length,J6e=i=>{for(const e in i)return!1;return!0},e5e=(i,e)=>{for(const t in i)if(!e(i[t],t))return!1;return!0},Cue=(i,e)=>Object.prototype.hasOwnProperty.call(i,e),t5e=(i,e)=>i===e||uQ(i)===uQ(e)&&e5e(i,(t,n)=>(t!==void 0||Cue(e,n))&&e[n]===t),n5e=Object.freeze,Sue=i=>{for(const e in i){const t=i[e];(typeof t=="object"||typeof t=="function")&&Sue(i[e])}return n5e(i)},nH=(i,e,t=0)=>{try{for(;t<i.length;t++)i[t](...e)}finally{t<i.length&&nH(i,e,t+1)}},i5e=i=>i,s5e=(i,e)=>i===e,WC=(i,e)=>{if(i==null||e==null)return s5e(i,e);if(i.constructor!==e.constructor)return!1;if(i===e)return!0;switch(i.constructor){case ArrayBuffer:i=new Uint8Array(i),e=new Uint8Array(e);case Uint8Array:{if(i.byteLength!==e.byteLength)return!1;for(let t=0;t<i.length;t++)if(i[t]!==e[t])return!1;break}case Set:{if(i.size!==e.size)return!1;for(const t of i)if(!e.has(t))return!1;break}case Map:{if(i.size!==e.size)return!1;for(const t of i.keys())if(!e.has(t)||!WC(i.get(t),e.get(t)))return!1;break}case Object:if(cQ(i)!==cQ(e))return!1;for(const t in i)if(!Cue(i,t)||!WC(i[t],e[t]))return!1;break;case Array:if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(!WC(i[t],e[t]))return!1;break;default:return!1}return!0},r5e=(i,e)=>e.includes(i);var kue={};const km=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",xue=typeof window<"u"&&typeof document<"u"&&!km;let Uu;const o5e=()=>{if(Uu===void 0)if(km){Uu=tl();const i=process.argv;let e=null;for(let t=0;t<i.length;t++){const n=i[t];n[0]==="-"?(e!==null&&Uu.set(e,""),e=n):e!==null&&(Uu.set(e,n),e=null)}e!==null&&Uu.set(e,"")}else typeof location=="object"?(Uu=tl(),(location.search||"?").slice(1).split("&").forEach(i=>{if(i.length!==0){const[e,t]=i.split("=");Uu.set(`--${tQ(e,"-")}`,t),Uu.set(`-${tQ(e,"-")}`,t)}})):Uu=tl();return Uu},A3=i=>o5e().has(i),EI=i=>lQ(km?kue[i.toUpperCase().replaceAll("-","_")]:yue.getItem(i)),Eue=i=>A3("--"+i)||EI(i)!==null;Eue("production");const a5e=km&&r5e(kue.FORCE_COLOR,["true","1","2"]),l5e=a5e||!A3("--no-colors")&&!Eue("no-color")&&(!km||process.stdout.isTTY)&&(!km||A3("--color")||EI("COLORTERM")!==null||(EI("TERM")||"").includes("color")),Tue=i=>new Uint8Array(i),c5e=(i,e,t)=>new Uint8Array(i,e,t),u5e=i=>new Uint8Array(i),d5e=i=>{let e="";for(let t=0;t<i.byteLength;t++)e+=v6e(i[t]);return btoa(e)},h5e=i=>Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString("base64"),f5e=i=>{const e=atob(i),t=Tue(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t},g5e=i=>{const e=Buffer.from(i,"base64");return c5e(e.buffer,e.byteOffset,e.byteLength)},m5e=xue?d5e:h5e,p5e=xue?f5e:g5e,_5e=i=>{const e=Tue(i.byteLength);return e.set(i),e};class v5e{constructor(e,t){this.left=e,this.right=t}}const ch=(i,e)=>new v5e(i,e);typeof DOMParser<"u"&&new DOMParser;const b5e=i=>u6e(i,(e,t)=>`${t}:${e};`).join(""),If=Symbol,Lue=If(),Iue=If(),y5e=If(),w5e=If(),C5e=If(),Due=If(),S5e=If(),iH=If(),k5e=If(),x5e=i=>{var s;i.length===1&&((s=i[0])==null?void 0:s.constructor)===Function&&(i=i[0]());const e=[],t=[];let n=0;for(;n<i.length;n++){const r=i[n];if(r===void 0)break;if(r.constructor===String||r.constructor===Number)e.push(r);else if(r.constructor===Object)break}for(n>0&&t.push(e.join(""));n<i.length;n++){const r=i[n];r instanceof Symbol||t.push(r)}return t},E5e={[Lue]:ch("font-weight","bold"),[Iue]:ch("font-weight","normal"),[y5e]:ch("color","blue"),[C5e]:ch("color","green"),[w5e]:ch("color","grey"),[Due]:ch("color","red"),[S5e]:ch("color","purple"),[iH]:ch("color","orange"),[k5e]:ch("color","black")},T5e=i=>{var o;i.length===1&&((o=i[0])==null?void 0:o.constructor)===Function&&(i=i[0]());const e=[],t=[],n=tl();let s=[],r=0;for(;r<i.length;r++){const a=i[r],l=E5e[a];if(l!==void 0)n.set(l.left,l.right);else{if(a===void 0)break;if(a.constructor===String||a.constructor===Number){const c=b5e(n);r>0||c.length>0?(e.push("%c"+a),t.push(c)):e.push(a)}else break}}for(r>0&&(s=t,s.unshift(e.join("")));r<i.length;r++){const a=i[r];a instanceof Symbol||s.push(a)}return s},Nue=l5e?T5e:x5e,L5e=(...i)=>{console.log(...Nue(i)),Rue.forEach(e=>e.print(i))},I5e=(...i)=>{console.warn(...Nue(i)),i.unshift(iH),Rue.forEach(e=>e.print(i))},Rue=Cm(),Aue=i=>({[Symbol.iterator](){return this},next:i}),D5e=(i,e)=>Aue(()=>{let t;do t=i.next();while(!t.done&&!e(t.value));return t}),gO=(i,e)=>Aue(()=>{const{done:t,value:n}=i.next();return{done:t,value:t?void 0:e(n)}});class sH{constructor(e,t){this.clock=e,this.len=t}}class T2{constructor(){this.clients=new Map}}const Pue=(i,e,t)=>e.clients.forEach((n,s)=>{const r=i.doc.store.clients.get(s);for(let o=0;o<n.length;o++){const a=n[o];Gue(i,r,a.clock,a.len,t)}}),N5e=(i,e)=>{let t=0,n=i.length-1;for(;t<=n;){const s=vf((t+n)/2),r=i[s],o=r.clock;if(o<=e){if(e<o+r.len)return s;t=s+1}else n=s-1}return null},Mue=(i,e)=>{const t=i.clients.get(e.client);return t!==void 0&&N5e(t,e.clock)!==null},rH=i=>{i.clients.forEach(e=>{e.sort((s,r)=>s.clock-r.clock);let t,n;for(t=1,n=1;t<e.length;t++){const s=e[n-1],r=e[t];s.clock+s.len>=r.clock?s.len=y1(s.len,r.clock+r.len-s.clock):(n<t&&(e[n]=r),n++)}e.length=n})},R5e=i=>{const e=new T2;for(let t=0;t<i.length;t++)i[t].clients.forEach((n,s)=>{if(!e.clients.has(s)){const r=n.slice();for(let o=t+1;o<i.length;o++)h6e(r,i[o].clients.get(s)||[]);e.clients.set(s,r)}});return rH(e),e},TI=(i,e,t,n)=>{Vd(i.clients,e,()=>[]).push(new sH(t,n))},A5e=()=>new T2,P5e=i=>{const e=A5e();return i.clients.forEach((t,n)=>{const s=[];for(let r=0;r<t.length;r++){const o=t[r];if(o.deleted){const a=o.id.clock;let l=o.length;if(r+1<t.length)for(let c=t[r+1];r+1<t.length&&c.deleted;c=t[++r+1])l+=c.length;s.push(new sH(a,l))}}s.length>0&&e.clients.set(n,s)}),e},Py=(i,e)=>{Ht(i.restEncoder,e.clients.size),_f(e.clients.entries()).sort((t,n)=>n[0]-t[0]).forEach(([t,n])=>{i.resetDsCurVal(),Ht(i.restEncoder,t);const s=n.length;Ht(i.restEncoder,s);for(let r=0;r<s;r++){const o=n[r];i.writeDsClock(o.clock),i.writeDsLen(o.len)}})},oH=i=>{const e=new T2,t=bn(i.restDecoder);for(let n=0;n<t;n++){i.resetDsCurVal();const s=bn(i.restDecoder),r=bn(i.restDecoder);if(r>0){const o=Vd(e.clients,s,()=>[]);for(let a=0;a<r;a++)o.push(new sH(i.readDsClock(),i.readDsLen()))}}return e},dQ=(i,e,t)=>{const n=new T2,s=bn(i.restDecoder);for(let r=0;r<s;r++){i.resetDsCurVal();const o=bn(i.restDecoder),a=bn(i.restDecoder),l=t.clients.get(o)||[],c=pr(t,o);for(let u=0;u<a;u++){const d=i.readDsClock(),h=d+i.readDsLen();if(d<c){c<h&&TI(n,o,c,h-c);let g=Ld(l,d),p=l[g];for(!p.deleted&&p.id.clock<d&&(l.splice(g+1,0,OI(e,p,d-p.id.clock)),g++);g<l.length&&(p=l[g++],p.id.clock<h);)p.deleted||(h<p.id.clock+p.length&&l.splice(g,0,OI(e,p,h-p.id.clock)),p.delete(e))}else TI(n,o,d,h-d)}}if(n.clients.size>0){const r=new K0;return Ht(r.restEncoder,0),Py(r,n),r.toUint8Array()}return null},Oue=vue;class My extends fue{constructor({guid:e=q6e(),collectionid:t=null,gc:n=!0,gcFilter:s=()=>!0,meta:r=null,autoLoad:o=!1,shouldLoad:a=!0}={}){super(),this.gc=n,this.gcFilter=s,this.clientID=Oue(),this.guid=e,this.collectionid=t,this.share=new Map,this.store=new que,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=o,this.meta=r,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=aQ(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const l=()=>aQ(c=>{const u=d=>{(d===void 0||d===!0)&&(this.off("sync",u),c())};this.on("sync",u)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=c===void 0||c===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const e=this._item;e!==null&&!this.shouldLoad&&Ji(e.parent.doc,t=>{t.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(_f(this.subdocs).map(e=>e.guid))}transact(e,t=null){return Ji(this,e,t)}get(e,t=So){const n=Vd(this.share,e,()=>{const r=new t;return r._integrate(this,null),r}),s=n.constructor;if(t!==So&&s!==t)if(s===So){const r=new t;r._map=n._map,n._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=r}),r._start=n._start;for(let o=r._start;o!==null;o=o.right)o.parent=r;return r._length=n._length,this.share.set(e,r),r._integrate(this,null),r}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return n}getArray(e=""){return this.get(e,$v)}getText(e=""){return this.get(e,Wb)}getMap(e=""){return this.get(e,Vb)}getXmlElement(e=""){return this.get(e,Hb)}getXmlFragment(e=""){return this.get(e,G0)}toJSON(){const e={};return this.share.forEach((t,n)=>{e[n]=t.toJSON()}),e}destroy(){this.isDestroyed=!0,_f(this.subdocs).forEach(t=>t.destroy());const e=this._item;if(e!==null){this._item=null;const t=e.content;t.doc=new My({guid:this.guid,...t.opts,shouldLoad:!1}),t.doc._item=e,Ji(e.parent.doc,n=>{const s=t.doc;e.deleted||n.subdocsAdded.add(s),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class Fue{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return bn(this.restDecoder)}readDsLen(){return bn(this.restDecoder)}}class Bue extends Fue{readLeftID(){return On(bn(this.restDecoder),bn(this.restDecoder))}readRightID(){return On(bn(this.restDecoder),bn(this.restDecoder))}readClient(){return bn(this.restDecoder)}readInfo(){return Fb(this.restDecoder)}readString(){return Jg(this.restDecoder)}readParentInfo(){return bn(this.restDecoder)===1}readTypeRef(){return bn(this.restDecoder)}readLen(){return bn(this.restDecoder)}readAny(){return uk(this.restDecoder)}readBuf(){return _5e(zo(this.restDecoder))}readJSON(){return JSON.parse(Jg(this.restDecoder))}readKey(){return Jg(this.restDecoder)}}class M5e{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=bn(this.restDecoder),this.dsCurrVal}readDsLen(){const e=bn(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Bb extends M5e{constructor(e){super(e),this.keys=[],bn(e),this.keyClockDecoder=new fO(zo(e)),this.clientDecoder=new ZT(zo(e)),this.leftClockDecoder=new fO(zo(e)),this.rightClockDecoder=new fO(zo(e)),this.infoDecoder=new oQ(zo(e),Fb),this.stringDecoder=new z6e(zo(e)),this.parentInfoDecoder=new oQ(zo(e),Fb),this.typeRefDecoder=new ZT(zo(e)),this.lenDecoder=new ZT(zo(e))}readLeftID(){return new zv(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new zv(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return uk(this.restDecoder)}readBuf(){return zo(this.restDecoder)}readJSON(){return uk(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const t=this.stringDecoder.read();return this.keys.push(t),t}}}class Vue{constructor(){this.restEncoder=$o()}toUint8Array(){return bs(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Ht(this.restEncoder,e)}writeDsLen(e){Ht(this.restEncoder,e)}}class L2 extends Vue{writeLeftID(e){Ht(this.restEncoder,e.client),Ht(this.restEncoder,e.clock)}writeRightID(e){Ht(this.restEncoder,e.client),Ht(this.restEncoder,e.clock)}writeClient(e){Ht(this.restEncoder,e)}writeInfo(e){N3(this.restEncoder,e)}writeString(e){g0(this.restEncoder,e)}writeParentInfo(e){Ht(this.restEncoder,e?1:0)}writeTypeRef(e){Ht(this.restEncoder,e)}writeLen(e){Ht(this.restEncoder,e)}writeAny(e){ck(this.restEncoder,e)}writeBuf(e){qs(this.restEncoder,e)}writeJSON(e){g0(this.restEncoder,JSON.stringify(e))}writeKey(e){g0(this.restEncoder,e)}}class Wue{constructor(){this.restEncoder=$o(),this.dsCurrVal=0}toUint8Array(){return bs(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const t=e-this.dsCurrVal;this.dsCurrVal=e,Ht(this.restEncoder,t)}writeDsLen(e){e===0&&pc(),Ht(this.restEncoder,e-1),this.dsCurrVal+=e}}class K0 extends Wue{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new hO,this.clientEncoder=new XT,this.leftClockEncoder=new hO,this.rightClockEncoder=new hO,this.infoEncoder=new iQ(N3),this.stringEncoder=new P6e,this.parentInfoEncoder=new iQ(N3),this.typeRefEncoder=new XT,this.lenEncoder=new XT}toUint8Array(){const e=$o();return Ht(e,0),qs(e,this.keyClockEncoder.toUint8Array()),qs(e,this.clientEncoder.toUint8Array()),qs(e,this.leftClockEncoder.toUint8Array()),qs(e,this.rightClockEncoder.toUint8Array()),qs(e,bs(this.infoEncoder)),qs(e,this.stringEncoder.toUint8Array()),qs(e,bs(this.parentInfoEncoder)),qs(e,this.typeRefEncoder.toUint8Array()),qs(e,this.lenEncoder.toUint8Array()),D4(e,bs(this.restEncoder)),bs(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){ck(this.restEncoder,e)}writeBuf(e){qs(this.restEncoder,e)}writeJSON(e){ck(this.restEncoder,e)}writeKey(e){const t=this.keyMap.get(e);t===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}const O5e=(i,e,t,n)=>{n=y1(n,e[0].id.clock);const s=Ld(e,n);Ht(i.restEncoder,e.length-s),i.writeClient(t),Ht(i.restEncoder,n);const r=e[s];r.write(i,n-r.id.clock);for(let o=s+1;o<e.length;o++)e[o].write(i,0)},aH=(i,e,t)=>{const n=new Map;t.forEach((s,r)=>{pr(e,r)>s&&n.set(r,s)}),R4(e).forEach((s,r)=>{t.has(r)||n.set(r,0)}),Ht(i.restEncoder,n.size),_f(n.entries()).sort((s,r)=>r[0]-s[0]).forEach(([s,r])=>{O5e(i,e.clients.get(s),s,r)})},F5e=(i,e)=>{const t=tl(),n=bn(i.restDecoder);for(let s=0;s<n;s++){const r=bn(i.restDecoder),o=new Array(r),a=i.readClient();let l=bn(i.restDecoder);t.set(a,{i:0,refs:o});for(let c=0;c<r;c++){const u=i.readInfo();switch(I4&u){case 0:{const d=i.readLen();o[c]=new oc(On(a,l),d),l+=d;break}case 10:{const d=bn(i.restDecoder);o[c]=new ac(On(a,l),d),l+=d;break}default:{const d=(u&(Zh|Fl))===0,h=new Bs(On(a,l),null,(u&Fl)===Fl?i.readLeftID():null,null,(u&Zh)===Zh?i.readRightID():null,d?i.readParentInfo()?e.get(i.readString()):i.readLeftID():null,d&&(u&ak)===ak?i.readString():null,fde(i,u));o[c]=h,l+=h.length}}}}return t},B5e=(i,e,t)=>{const n=[];let s=_f(t.keys()).sort((g,p)=>g-p);if(s.length===0)return null;const r=()=>{if(s.length===0)return null;let g=t.get(s[s.length-1]);for(;g.refs.length===g.i;)if(s.pop(),s.length>0)g=t.get(s[s.length-1]);else return null;return g};let o=r();if(o===null)return null;const a=new que,l=new Map,c=(g,p)=>{const _=l.get(g);(_==null||_>p)&&l.set(g,p)};let u=o.refs[o.i++];const d=new Map,h=()=>{for(const g of n){const p=g.id.client,_=t.get(p);_?(_.i--,a.clients.set(p,_.refs.slice(_.i)),t.delete(p),_.i=0,_.refs=[]):a.clients.set(p,[g]),s=s.filter(v=>v!==p)}n.length=0};for(;;){if(u.constructor!==ac){const p=Vd(d,u.id.client,()=>pr(e,u.id.client))-u.id.clock;if(p<0)n.push(u),c(u.id.client,u.id.clock-1),h();else{const _=u.getMissing(i,e);if(_!==null){n.push(u);const v=t.get(_)||{refs:[],i:0};if(v.refs.length===v.i)c(_,pr(e,_)),h();else{u=v.refs[v.i++];continue}}else(p===0||p<u.length)&&(u.integrate(i,p),d.set(u.id.client,u.id.clock+u.length))}}if(n.length>0)u=n.pop();else if(o!==null&&o.i<o.refs.length)u=o.refs[o.i++];else{if(o=r(),o===null)break;u=o.refs[o.i++]}}if(a.clients.size>0){const g=new K0;return aH(g,a,new Map),Ht(g.restEncoder,0),{missing:l,update:g.toUint8Array()}}return null},V5e=(i,e)=>aH(i,e.doc.store,e.beforeState),W5e=(i,e,t,n=new Bb(i))=>Ji(e,s=>{s.local=!1;let r=!1;const o=s.doc,a=o.store,l=F5e(n,o),c=B5e(s,a,l),u=a.pendingStructs;if(u){for(const[h,g]of u.missing)if(g<pr(a,h)){r=!0;break}if(c){for(const[h,g]of c.missing){const p=u.missing.get(h);(p==null||p>g)&&u.missing.set(h,g)}u.update=DI([u.update,c.update])}}else a.pendingStructs=c;const d=dQ(n,s,a);if(a.pendingDs){const h=new Bb(Um(a.pendingDs));bn(h.restDecoder);const g=dQ(h,s,a);d&&g?a.pendingDs=DI([d,g]):a.pendingDs=d||g}else a.pendingDs=d;if(r){const h=a.pendingStructs.update;a.pendingStructs=null,Hue(s.doc,h)}},t,!1),Hue=(i,e,t,n=Bb)=>{const s=Um(e);W5e(s,i,t,new n(s))},H5e=(i,e,t)=>Hue(i,e,t,Bue),U5e=(i,e,t=new Map)=>{aH(i,e.store,t),Py(i,P5e(e.store))},z5e=(i,e=new Uint8Array([0]),t=new K0)=>{const n=Uue(e);U5e(t,i,n);const s=[t.toUint8Array()];if(i.store.pendingDs&&s.push(i.store.pendingDs),i.store.pendingStructs&&s.push(l3e(i.store.pendingStructs.update,e)),s.length>1){if(t.constructor===L2)return o3e(s.map((r,o)=>o===0?r:u3e(r)));if(t.constructor===K0)return DI(s)}return s[0]},j5e=(i,e)=>z5e(i,e,new L2),$5e=i=>{const e=new Map,t=bn(i.restDecoder);for(let n=0;n<t;n++){const s=bn(i.restDecoder),r=bn(i.restDecoder);e.set(s,r)}return e},Uue=i=>$5e(new Fue(Um(i))),zue=(i,e)=>(Ht(i.restEncoder,e.size),_f(e.entries()).sort((t,n)=>n[0]-t[0]).forEach(([t,n])=>{Ht(i.restEncoder,t),Ht(i.restEncoder,n)}),i),q5e=(i,e)=>zue(i,R4(e.store)),K5e=(i,e=new Wue)=>(i instanceof Map?zue(e,i):q5e(e,i),e.toUint8Array()),G5e=i=>K5e(i,new Vue);class Y5e{constructor(){this.l=[]}}const hQ=()=>new Y5e,fQ=(i,e)=>i.l.push(e),gQ=(i,e)=>{const t=i.l,n=t.length;i.l=t.filter(s=>e!==s),n===i.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},jue=(i,e,t)=>nH(i.l,[e,t]);class zv{constructor(e,t){this.client=e,this.clock=t}}const IE=(i,e)=>i===e||i!==null&&e!==null&&i.client===e.client&&i.clock===e.clock,On=(i,e)=>new zv(i,e),$ue=i=>{for(const[e,t]of i.doc.share.entries())if(t===i)return e;throw pc()};class Q5e{constructor(e,t,n,s=0){this.type=e,this.tname=t,this.item=n,this.assoc=s}}class X5e{constructor(e,t,n=0){this.type=e,this.index=t,this.assoc=n}}const Z5e=(i,e,t=0)=>new X5e(i,e,t),DE=(i,e,t)=>{let n=null,s=null;return i._item===null?s=$ue(i):n=On(i._item.id.client,i._item.id.clock),new Q5e(n,s,e,t)},LI=(i,e,t=0)=>{let n=i._start;if(t<0){if(e===0)return DE(i,null,t);e--}for(;n!==null;){if(!n.deleted&&n.countable){if(n.length>e)return DE(i,On(n.id.client,n.id.clock+e),t);e-=n.length}if(n.right===null&&t<0)return DE(i,n.lastId,t);n=n.right}return DE(i,null,t)},J5e=(i,e)=>{const t=jv(i,e),n=e.clock-t.id.clock;return{item:t,diff:n}},II=(i,e,t=!0)=>{const n=e.store,s=i.item,r=i.type,o=i.tname,a=i.assoc;let l=null,c=0;if(s!==null){if(pr(n,s.client)<=s.clock)return null;const u=t?CQ(n,s):J5e(n,s),d=u.item;if(!(d instanceof Bs))return null;if(l=d.parent,l._item===null||!l._item.deleted){c=d.deleted||!d.countable?0:u.diff+(a>=0?0:1);let h=d.left;for(;h!==null;)!h.deleted&&h.countable&&(c+=h.length),h=h.left}}else{if(o!==null)l=e.get(o);else if(r!==null){if(pr(n,r.client)<=r.clock)return null;const{item:u}=t?CQ(n,r):{item:jv(n,r)};if(u instanceof Bs&&u.content instanceof Wd)l=u.content.type;else return null}else throw pc();a>=0?c=l._length:c=0}return Z5e(l,c,i.assoc)},z_=(i,e)=>e===void 0?!i.deleted:e.sv.has(i.id.client)&&(e.sv.get(i.id.client)||0)>i.id.clock&&!Mue(e.ds,i.id),P3=(i,e)=>{const t=Vd(i.meta,P3,Cm),n=i.doc.store;t.has(e)||(e.sv.forEach((s,r)=>{s<pr(n,r)&&xm(i,On(r,s))}),Pue(i,e.ds,s=>{}),t.add(e))};class que{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const R4=i=>{const e=new Map;return i.clients.forEach((t,n)=>{const s=t[t.length-1];e.set(n,s.id.clock+s.length)}),e},pr=(i,e)=>{const t=i.clients.get(e);if(t===void 0)return 0;const n=t[t.length-1];return n.id.clock+n.length},Kue=(i,e)=>{let t=i.clients.get(e.id.client);if(t===void 0)t=[],i.clients.set(e.id.client,t);else{const n=t[t.length-1];if(n.id.clock+n.length!==e.id.clock)throw pc()}t.push(e)},Ld=(i,e)=>{let t=0,n=i.length-1,s=i[n],r=s.id.clock;if(r===e)return n;let o=vf(e/(r+s.length-1)*n);for(;t<=n;){if(s=i[o],r=s.id.clock,r<=e){if(e<r+s.length)return o;t=o+1}else n=o-1;o=vf((t+n)/2)}throw pc()},e3e=(i,e)=>{const t=i.clients.get(e.client);return t[Ld(t,e.clock)]},jv=e3e,M3=(i,e,t)=>{const n=Ld(e,t),s=e[n];return s.id.clock<t&&s instanceof Bs?(e.splice(n+1,0,OI(i,s,t-s.id.clock)),n+1):n},xm=(i,e)=>{const t=i.doc.store.clients.get(e.client);return t[M3(i,t,e.clock)]},mQ=(i,e,t)=>{const n=e.clients.get(t.client),s=Ld(n,t.clock),r=n[s];return t.clock!==r.id.clock+r.length-1&&r.constructor!==oc&&n.splice(s+1,0,OI(i,r,t.clock-r.id.clock+1)),r},t3e=(i,e,t)=>{const n=i.clients.get(e.id.client);n[Ld(n,e.id.clock)]=t},Gue=(i,e,t,n,s)=>{if(n===0)return;const r=t+n;let o=M3(i,e,t),a;do a=e[o++],r<a.id.clock+a.length&&M3(i,e,r),s(a);while(o<e.length&&e[o].id.clock<r)};class n3e{constructor(e,t,n){this.doc=e,this.deleteSet=new T2,this.beforeState=R4(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=t,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const pQ=(i,e)=>e.deleteSet.clients.size===0&&!d6e(e.afterState,(t,n)=>e.beforeState.get(n)!==t)?!1:(rH(e.deleteSet),V5e(i,e),Py(i,e.deleteSet),!0),_Q=(i,e,t)=>{const n=e._item;(n===null||n.id.clock<(i.beforeState.get(n.id.client)||0)&&!n.deleted)&&Vd(i.changed,e,Cm).add(t)},JT=(i,e)=>{let t=i[e],n=i[e-1],s=e;for(;s>0;t=n,n=i[--s-1]){if(n.deleted===t.deleted&&n.constructor===t.constructor&&n.mergeWith(t)){t instanceof Bs&&t.parentSub!==null&&t.parent._map.get(t.parentSub)===t&&t.parent._map.set(t.parentSub,n);continue}break}const r=e-s;return r&&i.splice(e+1-r,r),r},i3e=(i,e,t)=>{for(const[n,s]of i.clients.entries()){const r=e.clients.get(n);for(let o=s.length-1;o>=0;o--){const a=s[o],l=a.clock+a.len;for(let c=Ld(r,a.clock),u=r[c];c<r.length&&u.id.clock<l;u=r[++c]){const d=r[c];if(a.clock+a.len<=d.id.clock)break;d instanceof Bs&&d.deleted&&!d.keep&&t(d)&&d.gc(e,!1)}}}},s3e=(i,e)=>{i.clients.forEach((t,n)=>{const s=e.clients.get(n);for(let r=t.length-1;r>=0;r--){const o=t[r],a=YW(s.length-1,1+Ld(s,o.clock+o.len-1));for(let l=a,c=s[l];l>0&&c.id.clock>=o.clock;c=s[l])l-=1+JT(s,l)}})},Yue=(i,e)=>{if(e<i.length){const t=i[e],n=t.doc,s=n.store,r=t.deleteSet,o=t._mergeStructs;try{rH(r),t.afterState=R4(t.doc.store),n.emit("beforeObserverCalls",[t,n]);const a=[];t.changed.forEach((l,c)=>a.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(t,l)})),a.push(()=>{t.changedParentTypes.forEach((l,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(l=l.filter(u=>u.target._item===null||!u.target._item.deleted),l.forEach(u=>{u.currentTarget=c,u._path=null}),l.sort((u,d)=>u.path.length-d.path.length),jue(c._dEH,l,t))})}),a.push(()=>n.emit("afterTransaction",[t,n])),nH(a,[]),t._needFormattingCleanup&&k3e(t)}finally{n.gc&&i3e(r,s,n.gcFilter),s3e(r,s),t.afterState.forEach((u,d)=>{const h=t.beforeState.get(d)||0;if(h!==u){const g=s.clients.get(d),p=y1(Ld(g,h),1);for(let _=g.length-1;_>=p;)_-=1+JT(g,_)}});for(let u=o.length-1;u>=0;u--){const{client:d,clock:h}=o[u].id,g=s.clients.get(d),p=Ld(g,h);p+1<g.length&&JT(g,p+1)>1||p>0&&JT(g,p)}if(!t.local&&t.afterState.get(n.clientID)!==t.beforeState.get(n.clientID)&&(L5e(iH,Lue,"[yjs] ",Iue,Due,"Changed the client-id because another client seems to be using it."),n.clientID=Oue()),n.emit("afterTransactionCleanup",[t,n]),n._observers.has("update")){const u=new L2;pQ(u,t)&&n.emit("update",[u.toUint8Array(),t.origin,n,t])}if(n._observers.has("updateV2")){const u=new K0;pQ(u,t)&&n.emit("updateV2",[u.toUint8Array(),t.origin,n,t])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=t;(a.size>0||c.size>0||l.size>0)&&(a.forEach(u=>{u.clientID=n.clientID,u.collectionid==null&&(u.collectionid=n.collectionid),n.subdocs.add(u)}),c.forEach(u=>n.subdocs.delete(u)),n.emit("subdocs",[{loaded:l,added:a,removed:c},n,t]),c.forEach(u=>u.destroy())),i.length<=e+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,i])):Yue(i,e+1)}}},Ji=(i,e,t=null,n=!0)=>{const s=i._transactionCleanups;let r=!1,o=null;i._transaction===null&&(r=!0,i._transaction=new n3e(i,t,n),s.push(i._transaction),s.length===1&&i.emit("beforeAllTransactions",[i]),i.emit("beforeTransaction",[i._transaction,i]));try{o=e(i._transaction)}finally{if(r){const a=i._transaction===s[0];i._transaction=null,a&&Yue(s,0)}}return o};function*r3e(i){const e=bn(i.restDecoder);for(let t=0;t<e;t++){const n=bn(i.restDecoder),s=i.readClient();let r=bn(i.restDecoder);for(let o=0;o<n;o++){const a=i.readInfo();if(a===10){const l=bn(i.restDecoder);yield new ac(On(s,r),l),r+=l}else if((I4&a)!==0){const l=(a&(Zh|Fl))===0,c=new Bs(On(s,r),null,(a&Fl)===Fl?i.readLeftID():null,null,(a&Zh)===Zh?i.readRightID():null,l?i.readParentInfo()?i.readString():i.readLeftID():null,l&&(a&ak)===ak?i.readString():null,fde(i,a));yield c,r+=c.length}else{const l=i.readLen();yield new oc(On(s,r),l),r+=l}}}}class lH{constructor(e,t){this.gen=r3e(e),this.curr=null,this.done=!1,this.filterSkips=t,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===ac);return this.curr}}class cH{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const o3e=i=>DI(i,Bue,L2),a3e=(i,e)=>{if(i.constructor===oc){const{client:t,clock:n}=i.id;return new oc(On(t,n+e),i.length-e)}else if(i.constructor===ac){const{client:t,clock:n}=i.id;return new ac(On(t,n+e),i.length-e)}else{const t=i,{client:n,clock:s}=t.id;return new Bs(On(n,s+e),null,On(n,s+e-1),null,t.rightOrigin,t.parent,t.parentSub,t.content.splice(e))}},DI=(i,e=Bb,t=K0)=>{if(i.length===1)return i[0];const n=i.map(u=>new e(Um(u)));let s=n.map(u=>new lH(u,!0)),r=null;const o=new t,a=new cH(o);for(;s=s.filter(h=>h.curr!==null),s.sort((h,g)=>{if(h.curr.id.client===g.curr.id.client){const p=h.curr.id.clock-g.curr.id.clock;return p===0?h.curr.constructor===g.curr.constructor?0:h.curr.constructor===ac?1:-1:p}else return g.curr.id.client-h.curr.id.client}),s.length!==0;){const u=s[0],d=u.curr.id.client;if(r!==null){let h=u.curr,g=!1;for(;h!==null&&h.id.clock+h.length<=r.struct.id.clock+r.struct.length&&h.id.client>=r.struct.id.client;)h=u.next(),g=!0;if(h===null||h.id.client!==d||g&&h.id.clock>r.struct.id.clock+r.struct.length)continue;if(d!==r.struct.id.client)Lg(a,r.struct,r.offset),r={struct:h,offset:0},u.next();else if(r.struct.id.clock+r.struct.length<h.id.clock)if(r.struct.constructor===ac)r.struct.length=h.id.clock+h.length-r.struct.id.clock;else{Lg(a,r.struct,r.offset);const p=h.id.clock-r.struct.id.clock-r.struct.length;r={struct:new ac(On(d,r.struct.id.clock+r.struct.length),p),offset:0}}else{const p=r.struct.id.clock+r.struct.length-h.id.clock;p>0&&(r.struct.constructor===ac?r.struct.length-=p:h=a3e(h,p)),r.struct.mergeWith(h)||(Lg(a,r.struct,r.offset),r={struct:h,offset:0},u.next())}}else r={struct:u.curr,offset:0},u.next();for(let h=u.curr;h!==null&&h.id.client===d&&h.id.clock===r.struct.id.clock+r.struct.length&&h.constructor!==ac;h=u.next())Lg(a,r.struct,r.offset),r={struct:h,offset:0}}r!==null&&(Lg(a,r.struct,r.offset),r=null),uH(a);const l=n.map(u=>oH(u)),c=R5e(l);return Py(o,c),o.toUint8Array()},l3e=(i,e,t=Bb,n=K0)=>{const s=Uue(e),r=new n,o=new cH(r),a=new t(Um(i)),l=new lH(a,!1);for(;l.curr;){const u=l.curr,d=u.id.client,h=s.get(d)||0;if(l.curr.constructor===ac){l.next();continue}if(u.id.clock+u.length>h)for(Lg(o,u,y1(h-u.id.clock,0)),l.next();l.curr&&l.curr.id.client===d;)Lg(o,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===d&&l.curr.id.clock+l.curr.length<=h;)l.next()}uH(o);const c=oH(a);return Py(r,c),r.toUint8Array()},Que=i=>{i.written>0&&(i.clientStructs.push({written:i.written,restEncoder:bs(i.encoder.restEncoder)}),i.encoder.restEncoder=$o(),i.written=0)},Lg=(i,e,t)=>{i.written>0&&i.currClient!==e.id.client&&Que(i),i.written===0&&(i.currClient=e.id.client,i.encoder.writeClient(e.id.client),Ht(i.encoder.restEncoder,e.id.clock+t)),e.write(i.encoder,t),i.written++},uH=i=>{Que(i);const e=i.encoder.restEncoder;Ht(e,i.clientStructs.length);for(let t=0;t<i.clientStructs.length;t++){const n=i.clientStructs[t];Ht(e,n.written),D4(e,n.restEncoder)}},c3e=(i,e,t,n)=>{const s=new t(Um(i)),r=new lH(s,!1),o=new n,a=new cH(o);for(let c=r.curr;c!==null;c=r.next())Lg(a,e(c),0);uH(a);const l=oH(s);return Py(o,l),o.toUint8Array()},u3e=i=>c3e(i,i5e,Bb,L2),vQ="You must not compute changes after the event-handler fired.";class A4{constructor(e,t){this.target=e,this.currentTarget=e,this.transaction=t,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=d3e(this.currentTarget,this.target))}deletes(e){return Mue(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Sm(vQ);const e=new Map,t=this.target;this.transaction.changed.get(t).forEach(s=>{if(s!==null){const r=t._map.get(s);let o,a;if(this.adds(r)){let l=r.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(r))if(l!==null&&this.deletes(l))o="delete",a=cO(l.content.getContent());else return;else l!==null&&this.deletes(l)?(o="update",a=cO(l.content.getContent())):(o="add",a=void 0)}else if(this.deletes(r))o="delete",a=cO(r.content.getContent());else return;e.set(s,{action:o,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw Sm(vQ);const t=this.target,n=Cm(),s=Cm(),r=[];if(e={added:n,deleted:s,delta:r,keys:this.keys},this.transaction.changed.get(t).has(null)){let a=null;const l=()=>{a&&r.push(a)};for(let c=t._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=c.length,s.add(c)):this.adds(c)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(c.content.getContent()),n.add(c)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=c.length);a!==null&&a.retain===void 0&&l()}this._changes=e}return e}}const d3e=(i,e)=>{const t=[];for(;e._item!==null&&e!==i;){if(e._item.parentSub!==null)t.unshift(e._item.parentSub);else{let n=0,s=e._item.parent._start;for(;s!==e._item&&s!==null;)!s.deleted&&s.countable&&(n+=s.length),s=s.right;t.unshift(n)}e=e._item.parent}return t},ea=()=>{I5e("Invalid access: Add Yjs type to a document before reading data.")},Xue=80;let dH=0;class h3e{constructor(e,t){e.marker=!0,this.p=e,this.index=t,this.timestamp=dH++}}const f3e=i=>{i.timestamp=dH++},Zue=(i,e,t)=>{i.p.marker=!1,i.p=e,e.marker=!0,i.index=t,i.timestamp=dH++},g3e=(i,e,t)=>{if(i.length>=Xue){const n=i.reduce((s,r)=>s.timestamp<r.timestamp?s:r);return Zue(n,e,t),n}else{const n=new h3e(e,t);return i.push(n),n}},P4=(i,e)=>{if(i._start===null||e===0||i._searchMarker===null)return null;const t=i._searchMarker.length===0?null:i._searchMarker.reduce((r,o)=>QT(e-r.index)<QT(e-o.index)?r:o);let n=i._start,s=0;for(t!==null&&(n=t.p,s=t.index,f3e(t));n.right!==null&&s<e;){if(!n.deleted&&n.countable){if(e<s+n.length)break;s+=n.length}n=n.right}for(;n.left!==null&&s>e;)n=n.left,!n.deleted&&n.countable&&(s-=n.length);for(;n.left!==null&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)n=n.left,!n.deleted&&n.countable&&(s-=n.length);return t!==null&&QT(t.index-s)<n.parent.length/Xue?(Zue(t,n,s),t):g3e(i._searchMarker,n,s)},dk=(i,e,t)=>{for(let n=i.length-1;n>=0;n--){const s=i[n];if(t>0){let r=s.p;for(r.marker=!1;r&&(r.deleted||!r.countable);)r=r.left,r&&!r.deleted&&r.countable&&(s.index-=r.length);if(r===null||r.marker===!0){i.splice(n,1);continue}s.p=r,r.marker=!0}(e<s.index||t>0&&e===s.index)&&(s.index=y1(e,s.index+t))}},M4=(i,e,t)=>{const n=i,s=e.changedParentTypes;for(;Vd(s,i,()=>[]).push(t),i._item!==null;)i=i._item.parent;jue(n._eH,t,e)};class So{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=hQ(),this._dEH=hQ(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,t){this.doc=e,this._item=t}_copy(){throw wd()}clone(){throw wd()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){fQ(this._eH,e)}observeDeep(e){fQ(this._dEH,e)}unobserve(e){gQ(this._eH,e)}unobserveDeep(e){gQ(this._dEH,e)}toJSON(){}}const Jue=(i,e,t)=>{i.doc??ea(),e<0&&(e=i._length+e),t<0&&(t=i._length+t);let n=t-e;const s=[];let r=i._start;for(;r!==null&&n>0;){if(r.countable&&!r.deleted){const o=r.content.getContent();if(o.length<=e)e-=o.length;else{for(let a=e;a<o.length&&n>0;a++)s.push(o[a]),n--;e=0}}r=r.right}return s},ede=i=>{i.doc??ea();const e=[];let t=i._start;for(;t!==null;){if(t.countable&&!t.deleted){const n=t.content.getContent();for(let s=0;s<n.length;s++)e.push(n[s])}t=t.right}return e},hk=(i,e)=>{let t=0,n=i._start;for(i.doc??ea();n!==null;){if(n.countable&&!n.deleted){const s=n.content.getContent();for(let r=0;r<s.length;r++)e(s[r],t++,i)}n=n.right}},tde=(i,e)=>{const t=[];return hk(i,(n,s)=>{t.push(e(n,s,i))}),t},m3e=i=>{let e=i._start,t=null,n=0;return{[Symbol.iterator](){return this},next:()=>{if(t===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};t=e.content.getContent(),n=0,e=e.right}const s=t[n++];return t.length<=n&&(t=null),{done:!1,value:s}}}},nde=(i,e)=>{i.doc??ea();const t=P4(i,e);let n=i._start;for(t!==null&&(n=t.p,e-=t.index);n!==null;n=n.right)if(!n.deleted&&n.countable){if(e<n.length)return n.content.getContent()[e];e-=n.length}},NI=(i,e,t,n)=>{let s=t;const r=i.doc,o=r.clientID,a=r.store,l=t===null?e._start:t.right;let c=[];const u=()=>{c.length>0&&(s=new Bs(On(o,pr(a,o)),s,s&&s.lastId,l,l&&l.id,e,null,new Y0(c)),s.integrate(i,0),c=[])};n.forEach(d=>{if(d===null)c.push(d);else switch(d.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(d);break;default:switch(u(),d.constructor){case Uint8Array:case ArrayBuffer:s=new Bs(On(o,pr(a,o)),s,s&&s.lastId,l,l&&l.id,e,null,new I2(new Uint8Array(d))),s.integrate(i,0);break;case My:s=new Bs(On(o,pr(a,o)),s,s&&s.lastId,l,l&&l.id,e,null,new D2(d)),s.integrate(i,0);break;default:if(d instanceof So)s=new Bs(On(o,pr(a,o)),s,s&&s.lastId,l,l&&l.id,e,null,new Wd(d)),s.integrate(i,0);else throw new Error("Unexpected content type in insert operation")}}}),u()},ide=()=>Sm("Length exceeded!"),sde=(i,e,t,n)=>{if(t>e._length)throw ide();if(t===0)return e._searchMarker&&dk(e._searchMarker,t,n.length),NI(i,e,null,n);const s=t,r=P4(e,t);let o=e._start;for(r!==null&&(o=r.p,t-=r.index,t===0&&(o=o.prev,t+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(t<=o.length){t<o.length&&xm(i,On(o.id.client,o.id.clock+t));break}t-=o.length}return e._searchMarker&&dk(e._searchMarker,s,n.length),NI(i,e,o,n)},p3e=(i,e,t)=>{let s=(e._searchMarker||[]).reduce((r,o)=>o.index>r.index?o:r,{index:0,p:e._start}).p;if(s)for(;s.right;)s=s.right;return NI(i,e,s,t)},rde=(i,e,t,n)=>{if(n===0)return;const s=t,r=n,o=P4(e,t);let a=e._start;for(o!==null&&(a=o.p,t-=o.index);a!==null&&t>0;a=a.right)!a.deleted&&a.countable&&(t<a.length&&xm(i,On(a.id.client,a.id.clock+t)),t-=a.length);for(;n>0&&a!==null;)a.deleted||(n<a.length&&xm(i,On(a.id.client,a.id.clock+n)),a.delete(i),n-=a.length),a=a.right;if(n>0)throw ide();e._searchMarker&&dk(e._searchMarker,s,-r+n)},RI=(i,e,t)=>{const n=e._map.get(t);n!==void 0&&n.delete(i)},hH=(i,e,t,n)=>{const s=e._map.get(t)||null,r=i.doc,o=r.clientID;let a;if(n==null)a=new Y0([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:a=new Y0([n]);break;case Uint8Array:a=new I2(n);break;case My:a=new D2(n);break;default:if(n instanceof So)a=new Wd(n);else throw new Error("Unexpected content type")}new Bs(On(o,pr(r.store,o)),s,s&&s.lastId,null,null,e,t,a).integrate(i,0)},fH=(i,e)=>{i.doc??ea();const t=i._map.get(e);return t!==void 0&&!t.deleted?t.content.getContent()[t.length-1]:void 0},ode=i=>{const e={};return i.doc??ea(),i._map.forEach((t,n)=>{t.deleted||(e[n]=t.content.getContent()[t.length-1])}),e},ade=(i,e)=>{i.doc??ea();const t=i._map.get(e);return t!==void 0&&!t.deleted},_3e=(i,e)=>{const t={};return i._map.forEach((n,s)=>{let r=n;for(;r!==null&&(!e.sv.has(r.id.client)||r.id.clock>=(e.sv.get(r.id.client)||0));)r=r.left;r!==null&&z_(r,e)&&(t[s]=r.content.getContent()[r.length-1])}),t},NE=i=>(i.doc??ea(),D5e(i._map.entries(),e=>!e[1].deleted));class v3e extends A4{}class $v extends So{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const t=new $v;return t.push(e),t}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new $v}clone(){const e=new $v;return e.insert(0,this.toArray().map(t=>t instanceof So?t.clone():t)),e}get length(){return this.doc??ea(),this._length}_callObserver(e,t){super._callObserver(e,t),M4(this,e,new v3e(this,e))}insert(e,t){this.doc!==null?Ji(this.doc,n=>{sde(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}push(e){this.doc!==null?Ji(this.doc,t=>{p3e(t,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,t=1){this.doc!==null?Ji(this.doc,n=>{rde(n,this,e,t)}):this._prelimContent.splice(e,t)}get(e){return nde(this,e)}toArray(){return ede(this)}slice(e=0,t=this.length){return Jue(this,e,t)}toJSON(){return this.map(e=>e instanceof So?e.toJSON():e)}map(e){return tde(this,e)}forEach(e){hk(this,e)}[Symbol.iterator](){return m3e(this)}_write(e){e.writeTypeRef(z3e)}}const b3e=i=>new $v;class y3e extends A4{constructor(e,t,n){super(e,t),this.keysChanged=n}}class Vb extends So{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,t){super._integrate(e,t),this._prelimContent.forEach((n,s)=>{this.set(s,n)}),this._prelimContent=null}_copy(){return new Vb}clone(){const e=new Vb;return this.forEach((t,n)=>{e.set(n,t instanceof So?t.clone():t)}),e}_callObserver(e,t){M4(this,e,new y3e(this,e,t))}toJSON(){this.doc??ea();const e={};return this._map.forEach((t,n)=>{if(!t.deleted){const s=t.content.getContent()[t.length-1];e[n]=s instanceof So?s.toJSON():s}}),e}get size(){return[...NE(this)].length}keys(){return gO(NE(this),e=>e[0])}values(){return gO(NE(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return gO(NE(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??ea(),this._map.forEach((t,n)=>{t.deleted||e(t.content.getContent()[t.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?Ji(this.doc,t=>{RI(t,this,e)}):this._prelimContent.delete(e)}set(e,t){return this.doc!==null?Ji(this.doc,n=>{hH(n,this,e,t)}):this._prelimContent.set(e,t),t}get(e){return fH(this,e)}has(e){return ade(this,e)}clear(){this.doc!==null?Ji(this.doc,e=>{this.forEach(function(t,n,s){RI(e,s,n)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(j3e)}}const w3e=i=>new Vb,Bg=(i,e)=>i===e||typeof i=="object"&&typeof e=="object"&&i&&e&&t5e(i,e);class O3{constructor(e,t,n,s){this.left=e,this.right=t,this.index=n,this.currentAttributes=s}forward(){switch(this.right===null&&pc(),this.right.content.constructor){case Ar:this.right.deleted||Oy(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const bQ=(i,e,t)=>{for(;e.right!==null&&t>0;){switch(e.right.content.constructor){case Ar:e.right.deleted||Oy(e.currentAttributes,e.right.content);break;default:e.right.deleted||(t<e.right.length&&xm(i,On(e.right.id.client,e.right.id.clock+t)),e.index+=e.right.length,t-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},RE=(i,e,t,n)=>{const s=new Map,r=n?P4(e,t):null;if(r){const o=new O3(r.p.left,r.p,r.index,s);return bQ(i,o,t-r.index)}else{const o=new O3(null,e._start,0,s);return bQ(i,o,t)}},lde=(i,e,t,n)=>{for(;t.right!==null&&(t.right.deleted===!0||t.right.content.constructor===Ar&&Bg(n.get(t.right.content.key),t.right.content.value));)t.right.deleted||n.delete(t.right.content.key),t.forward();const s=i.doc,r=s.clientID;n.forEach((o,a)=>{const l=t.left,c=t.right,u=new Bs(On(r,pr(s.store,r)),l,l&&l.lastId,c,c&&c.id,e,null,new Ar(a,o));u.integrate(i,0),t.right=u,t.forward()})},Oy=(i,e)=>{const{key:t,value:n}=e;n===null?i.delete(t):i.set(t,n)},cde=(i,e)=>{for(;i.right!==null;){if(!(i.right.deleted||i.right.content.constructor===Ar&&Bg(e[i.right.content.key]??null,i.right.content.value)))break;i.forward()}},ude=(i,e,t,n)=>{const s=i.doc,r=s.clientID,o=new Map;for(const a in n){const l=n[a],c=t.currentAttributes.get(a)??null;if(!Bg(c,l)){o.set(a,c);const{left:u,right:d}=t;t.right=new Bs(On(r,pr(s.store,r)),u,u&&u.lastId,d,d&&d.id,e,null,new Ar(a,l)),t.right.integrate(i,0),t.forward()}}return o},mO=(i,e,t,n,s)=>{t.currentAttributes.forEach((h,g)=>{s[g]===void 0&&(s[g]=null)});const r=i.doc,o=r.clientID;cde(t,s);const a=ude(i,e,t,s),l=n.constructor===String?new Id(n):n instanceof So?new Wd(n):new w1(n);let{left:c,right:u,index:d}=t;e._searchMarker&&dk(e._searchMarker,t.index,l.getLength()),u=new Bs(On(o,pr(r.store,o)),c,c&&c.lastId,u,u&&u.id,e,null,l),u.integrate(i,0),t.right=u,t.index=d,t.forward(),lde(i,e,t,a)},yQ=(i,e,t,n,s)=>{const r=i.doc,o=r.clientID;cde(t,s);const a=ude(i,e,t,s);e:for(;t.right!==null&&(n>0||a.size>0&&(t.right.deleted||t.right.content.constructor===Ar));){if(!t.right.deleted)switch(t.right.content.constructor){case Ar:{const{key:l,value:c}=t.right.content,u=s[l];if(u!==void 0){if(Bg(u,c))a.delete(l);else{if(n===0)break e;a.set(l,c)}t.right.delete(i)}else t.currentAttributes.set(l,c);break}default:n<t.right.length&&xm(i,On(t.right.id.client,t.right.id.clock+n)),n-=t.right.length;break}t.forward()}if(n>0){let l="";for(;n>0;n--)l+=`
`;t.right=new Bs(On(o,pr(r.store,o)),t.left,t.left&&t.left.lastId,t.right,t.right&&t.right.id,e,null,new Id(l)),t.right.integrate(i,0),t.forward()}lde(i,e,t,a)},dde=(i,e,t,n,s)=>{let r=e;const o=tl();for(;r&&(!r.countable||r.deleted);){if(!r.deleted&&r.content.constructor===Ar){const c=r.content;o.set(c.key,c)}r=r.right}let a=0,l=!1;for(;e!==r;){if(t===e&&(l=!0),!e.deleted){const c=e.content;switch(c.constructor){case Ar:{const{key:u,value:d}=c,h=n.get(u)??null;(o.get(u)!==c||h===d)&&(e.delete(i),a++,!l&&(s.get(u)??null)===d&&h!==d&&(h===null?s.delete(u):s.set(u,h))),!l&&!e.deleted&&Oy(s,c);break}}}e=e.right}return a},C3e=(i,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const t=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===Ar){const n=e.content.key;t.has(n)?e.delete(i):t.add(n)}e=e.left}},S3e=i=>{let e=0;return Ji(i.doc,t=>{let n=i._start,s=i._start,r=tl();const o=I3(r);for(;s;){if(s.deleted===!1)switch(s.content.constructor){case Ar:Oy(o,s.content);break;default:e+=dde(t,n,s,r,o),r=I3(o),n=s;break}s=s.right}}),e},k3e=i=>{const e=new Set,t=i.doc;for(const[n,s]of i.afterState.entries()){const r=i.beforeState.get(n)||0;s!==r&&Gue(i,t.store.clients.get(n),r,s,o=>{!o.deleted&&o.content.constructor===Ar&&o.constructor!==oc&&e.add(o.parent)})}Ji(t,n=>{Pue(i,i.deleteSet,s=>{if(s instanceof oc||!s.parent._hasFormatting||e.has(s.parent))return;const r=s.parent;s.content.constructor===Ar?e.add(r):C3e(n,s)});for(const s of e)S3e(s)})},wQ=(i,e,t)=>{const n=t,s=I3(e.currentAttributes),r=e.right;for(;t>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Wd:case w1:case Id:t<e.right.length&&xm(i,On(e.right.id.client,e.right.id.clock+t)),t-=e.right.length,e.right.delete(i);break}e.forward()}r&&dde(i,r,e.right,s,e.currentAttributes);const o=(e.left||e.right).parent;return o._searchMarker&&dk(o._searchMarker,e.index,-n+t),e};class x3e extends A4{constructor(e,t,n){super(e,t),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(s=>{s===null?this.childListChanged=!0:this.keysChanged.add(s)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,t=[];Ji(e,n=>{const s=new Map,r=new Map;let o=this.target._start,a=null;const l={};let c="",u=0,d=0;const h=()=>{if(a!==null){let g=null;switch(a){case"delete":d>0&&(g={delete:d}),d=0;break;case"insert":(typeof c=="object"||c.length>0)&&(g={insert:c},s.size>0&&(g.attributes={},s.forEach((p,_)=>{p!==null&&(g.attributes[_]=p)}))),c="";break;case"retain":u>0&&(g={retain:u},J6e(l)||(g.attributes=Q6e({},l))),u=0;break}g&&t.push(g),a=null}};for(;o!==null;){switch(o.content.constructor){case Wd:case w1:this.adds(o)?this.deletes(o)||(h(),a="insert",c=o.content.getContent()[0],h()):this.deletes(o)?(a!=="delete"&&(h(),a="delete"),d+=1):o.deleted||(a!=="retain"&&(h(),a="retain"),u+=1);break;case Id:this.adds(o)?this.deletes(o)||(a!=="insert"&&(h(),a="insert"),c+=o.content.str):this.deletes(o)?(a!=="delete"&&(h(),a="delete"),d+=o.length):o.deleted||(a!=="retain"&&(h(),a="retain"),u+=o.length);break;case Ar:{const{key:g,value:p}=o.content;if(this.adds(o)){if(!this.deletes(o)){const _=s.get(g)??null;Bg(_,p)?p!==null&&o.delete(n):(a==="retain"&&h(),Bg(p,r.get(g)??null)?delete l[g]:l[g]=p)}}else if(this.deletes(o)){r.set(g,p);const _=s.get(g)??null;Bg(_,p)||(a==="retain"&&h(),l[g]=_)}else if(!o.deleted){r.set(g,p);const _=l[g];_!==void 0&&(Bg(_,p)?_!==null&&o.delete(n):(a==="retain"&&h(),p===null?delete l[g]:l[g]=p))}o.deleted||(a==="insert"&&h(),Oy(s,o.content));break}}o=o.right}for(h();t.length>0;){const g=t[t.length-1];if(g.retain!==void 0&&g.attributes===void 0)t.pop();else break}}),this._delta=t}return this._delta}}class Wb extends So{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??ea(),this._length}_integrate(e,t){super._integrate(e,t);try{this._pending.forEach(n=>n())}catch(n){console.error(n)}this._pending=null}_copy(){return new Wb}clone(){const e=new Wb;return e.applyDelta(this.toDelta()),e}_callObserver(e,t){super._callObserver(e,t);const n=new x3e(this,e,t);M4(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??ea();let e="",t=this._start;for(;t!==null;)!t.deleted&&t.countable&&t.content.constructor===Id&&(e+=t.content.str),t=t.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:t=!0}={}){this.doc!==null?Ji(this.doc,n=>{const s=new O3(null,this._start,0,new Map);for(let r=0;r<e.length;r++){const o=e[r];if(o.insert!==void 0){const a=!t&&typeof o.insert=="string"&&r===e.length-1&&s.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof a!="string"||a.length>0)&&mO(n,this,s,a,o.attributes||{})}else o.retain!==void 0?yQ(n,this,s,o.retain,o.attributes||{}):o.delete!==void 0&&wQ(n,s,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,t,n){this.doc??ea();const s=[],r=new Map,o=this.doc;let a="",l=this._start;function c(){if(a.length>0){const d={};let h=!1;r.forEach((p,_)=>{h=!0,d[_]=p});const g={insert:a};h&&(g.attributes=d),s.push(g),a=""}}const u=()=>{for(;l!==null;){if(z_(l,e)||t!==void 0&&z_(l,t))switch(l.content.constructor){case Id:{const d=r.get("ychange");e!==void 0&&!z_(l,e)?(d===void 0||d.user!==l.id.client||d.type!=="removed")&&(c(),r.set("ychange",n?n("removed",l.id):{type:"removed"})):t!==void 0&&!z_(l,t)?(d===void 0||d.user!==l.id.client||d.type!=="added")&&(c(),r.set("ychange",n?n("added",l.id):{type:"added"})):d!==void 0&&(c(),r.delete("ychange")),a+=l.content.str;break}case Wd:case w1:{c();const d={insert:l.content.getContent()[0]};if(r.size>0){const h={};d.attributes=h,r.forEach((g,p)=>{h[p]=g})}s.push(d);break}case Ar:z_(l,e)&&(c(),Oy(r,l.content));break}l=l.right}c()};return e||t?Ji(o,d=>{e&&P3(d,e),t&&P3(d,t),u()},"cleanup"):u(),s}insert(e,t,n){if(t.length<=0)return;const s=this.doc;s!==null?Ji(s,r=>{const o=RE(r,this,e,!n);n||(n={},o.currentAttributes.forEach((a,l)=>{n[l]=a})),mO(r,this,o,t,n)}):this._pending.push(()=>this.insert(e,t,n))}insertEmbed(e,t,n){const s=this.doc;s!==null?Ji(s,r=>{const o=RE(r,this,e,!n);mO(r,this,o,t,n||{})}):this._pending.push(()=>this.insertEmbed(e,t,n||{}))}delete(e,t){if(t===0)return;const n=this.doc;n!==null?Ji(n,s=>{wQ(s,RE(s,this,e,!0),t)}):this._pending.push(()=>this.delete(e,t))}format(e,t,n){if(t===0)return;const s=this.doc;s!==null?Ji(s,r=>{const o=RE(r,this,e,!1);o.right!==null&&yQ(r,this,o,t,n)}):this._pending.push(()=>this.format(e,t,n))}removeAttribute(e){this.doc!==null?Ji(this.doc,t=>{RI(t,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,t){this.doc!==null?Ji(this.doc,n=>{hH(n,this,e,t)}):this._pending.push(()=>this.setAttribute(e,t))}getAttribute(e){return fH(this,e)}getAttributes(){return ode(this)}_write(e){e.writeTypeRef($3e)}}const E3e=i=>new Wb;class pO{constructor(e,t=()=>!0){this._filter=t,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??ea()}[Symbol.iterator](){return this}next(){let e=this._currentNode,t=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(t)))do if(t=e.content.type,!e.deleted&&(t.constructor===Hb||t.constructor===G0)&&t._start!==null)e=t._start;else for(;e!==null;){const n=e.next;if(n!==null){e=n;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class G0 extends So{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,t){super._integrate(e,t),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new G0}clone(){const e=new G0;return e.insert(0,this.toArray().map(t=>t instanceof So?t.clone():t)),e}get length(){return this.doc??ea(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new pO(this,e)}querySelector(e){e=e.toUpperCase();const n=new pO(this,s=>s.nodeName&&s.nodeName.toUpperCase()===e).next();return n.done?null:n.value}querySelectorAll(e){return e=e.toUpperCase(),_f(new pO(this,t=>t.nodeName&&t.nodeName.toUpperCase()===e))}_callObserver(e,t){M4(this,e,new I3e(this,t,e))}toString(){return tde(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,t={},n){const s=e.createDocumentFragment();return n!==void 0&&n._createAssociation(s,this),hk(this,r=>{s.insertBefore(r.toDOM(e,t,n),null)}),s}insert(e,t){this.doc!==null?Ji(this.doc,n=>{sde(n,this,e,t)}):this._prelimContent.splice(e,0,...t)}insertAfter(e,t){if(this.doc!==null)Ji(this.doc,n=>{const s=e&&e instanceof So?e._item:e;NI(n,this,s,t)});else{const n=this._prelimContent,s=e===null?0:n.findIndex(r=>r===e)+1;if(s===0&&e!==null)throw Sm("Reference item not found");n.splice(s,0,...t)}}delete(e,t=1){this.doc!==null?Ji(this.doc,n=>{rde(n,this,e,t)}):this._prelimContent.splice(e,t)}toArray(){return ede(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return nde(this,e)}slice(e=0,t=this.length){return Jue(this,e,t)}forEach(e){hk(this,e)}_write(e){e.writeTypeRef(K3e)}}const T3e=i=>new G0;class Hb extends G0{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,t){super._integrate(e,t),this._prelimAttrs.forEach((n,s)=>{this.setAttribute(s,n)}),this._prelimAttrs=null}_copy(){return new Hb(this.nodeName)}clone(){const e=new Hb(this.nodeName),t=this.getAttributes();return X6e(t,(n,s)=>{typeof n=="string"&&e.setAttribute(s,n)}),e.insert(0,this.toArray().map(n=>n instanceof So?n.clone():n)),e}toString(){const e=this.getAttributes(),t=[],n=[];for(const a in e)n.push(a);n.sort();const s=n.length;for(let a=0;a<s;a++){const l=n[a];t.push(l+'="'+e[l]+'"')}const r=this.nodeName.toLocaleLowerCase(),o=t.length>0?" "+t.join(" "):"";return`<${r}${o}>${super.toString()}</${r}>`}removeAttribute(e){this.doc!==null?Ji(this.doc,t=>{RI(t,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,t){this.doc!==null?Ji(this.doc,n=>{hH(n,this,e,t)}):this._prelimAttrs.set(e,t)}getAttribute(e){return fH(this,e)}hasAttribute(e){return ade(this,e)}getAttributes(e){return e?_3e(this,e):ode(this)}toDOM(e=document,t={},n){const s=e.createElement(this.nodeName),r=this.getAttributes();for(const o in r){const a=r[o];typeof a=="string"&&s.setAttribute(o,a)}return hk(this,o=>{s.appendChild(o.toDOM(e,t,n))}),n!==void 0&&n._createAssociation(s,this),s}_write(e){e.writeTypeRef(q3e),e.writeKey(this.nodeName)}}const L3e=i=>new Hb(i.readKey());class I3e extends A4{constructor(e,t,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,t.forEach(s=>{s===null?this.childListChanged=!0:this.attributesChanged.add(s)})}}class AI extends Vb{constructor(e){super(),this.hookName=e}_copy(){return new AI(this.hookName)}clone(){const e=new AI(this.hookName);return this.forEach((t,n)=>{e.set(n,t)}),e}toDOM(e=document,t={},n){const s=t[this.hookName];let r;return s!==void 0?r=s.createDom(this):r=document.createElement(this.hookName),r.setAttribute("data-yjs-hook",this.hookName),n!==void 0&&n._createAssociation(r,this),r}_write(e){e.writeTypeRef(G3e),e.writeKey(this.hookName)}}const D3e=i=>new AI(i.readKey());class PI extends Wb{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new PI}clone(){const e=new PI;return e.applyDelta(this.toDelta()),e}toDOM(e=document,t,n){const s=e.createTextNode(this.toString());return n!==void 0&&n._createAssociation(s,this),s}toString(){return this.toDelta().map(e=>{const t=[];for(const s in e.attributes){const r=[];for(const o in e.attributes[s])r.push({key:o,value:e.attributes[s][o]});r.sort((o,a)=>o.key<a.key?-1:1),t.push({nodeName:s,attrs:r})}t.sort((s,r)=>s.nodeName<r.nodeName?-1:1);let n="";for(let s=0;s<t.length;s++){const r=t[s];n+=`<${r.nodeName}`;for(let o=0;o<r.attrs.length;o++){const a=r.attrs[o];n+=` ${a.key}="${a.value}"`}n+=">"}n+=e.insert;for(let s=t.length-1;s>=0;s--)n+=`</${t[s].nodeName}>`;return n}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(Y3e)}}const N3e=i=>new PI;class gH{constructor(e,t){this.id=e,this.length=t}get deleted(){throw wd()}mergeWith(e){return!1}write(e,t,n){throw wd()}integrate(e,t){throw wd()}}const R3e=0;class oc extends gH{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,t){t>0&&(this.id.clock+=t,this.length-=t),Kue(e.doc.store,this)}write(e,t){e.writeInfo(R3e),e.writeLen(this.length-t)}getMissing(e,t){return null}}class I2{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new I2(this.content)}splice(e){throw wd()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeBuf(this.content)}getRef(){return 3}}const A3e=i=>new I2(i.readBuf());class fk{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new fk(this.len)}splice(e){const t=new fk(this.len-e);return this.len=e,t}mergeWith(e){return this.len+=e.len,!0}integrate(e,t){TI(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}delete(e){}gc(e){}write(e,t){e.writeLen(this.len-t)}getRef(){return 1}}const P3e=i=>new fk(i.readLen()),hde=(i,e)=>new My({guid:i,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class D2{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const t={};this.opts=t,e.gc||(t.gc=!1),e.autoLoad&&(t.autoLoad=!0),e.meta!==null&&(t.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new D2(hde(this.doc.guid,this.opts))}splice(e){throw wd()}mergeWith(e){return!1}integrate(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const M3e=i=>new D2(hde(i.readString(),i.readAny()));class w1{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new w1(this.embed)}splice(e){throw wd()}mergeWith(e){return!1}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeJSON(this.embed)}getRef(){return 5}}const O3e=i=>new w1(i.readJSON());class Ar{constructor(e,t){this.key=e,this.value=t}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Ar(this.key,this.value)}splice(e){throw wd()}mergeWith(e){return!1}integrate(e,t){const n=t.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,t){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const F3e=i=>new Ar(i.readKey(),i.readJSON());class MI{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new MI(this.arr)}splice(e){const t=new MI(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let s=t;s<n;s++){const r=this.arr[s];e.writeString(r===void 0?"undefined":JSON.stringify(r))}}getRef(){return 2}}const B3e=i=>{const e=i.readLen(),t=[];for(let n=0;n<e;n++){const s=i.readString();s==="undefined"?t.push(void 0):t.push(JSON.parse(s))}return new MI(t)},V3e=EI("node_env")==="development";class Y0{constructor(e){this.arr=e,V3e&&Sue(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Y0(this.arr)}splice(e){const t=new Y0(this.arr.slice(e));return this.arr=this.arr.slice(0,e),t}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){const n=this.arr.length;e.writeLen(n-t);for(let s=t;s<n;s++){const r=this.arr[s];e.writeAny(r)}}getRef(){return 8}}const W3e=i=>{const e=i.readLen(),t=[];for(let n=0;n<e;n++)t.push(i.readAny());return new Y0(t)};class Id{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Id(this.str)}splice(e){const t=new Id(this.str.slice(e));this.str=this.str.slice(0,e);const n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"",t.str=""+t.str.slice(1)),t}mergeWith(e){return this.str+=e.str,!0}integrate(e,t){}delete(e){}gc(e){}write(e,t){e.writeString(t===0?this.str:this.str.slice(t))}getRef(){return 4}}const H3e=i=>new Id(i.readString()),U3e=[b3e,w3e,E3e,L3e,T3e,D3e,N3e],z3e=0,j3e=1,$3e=2,q3e=3,K3e=4,G3e=5,Y3e=6;class Wd{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Wd(this.type._copy())}splice(e){throw wd()}mergeWith(e){return!1}integrate(e,t){this.type._integrate(e.doc,t)}delete(e){let t=this.type._start;for(;t!==null;)t.deleted?t.id.clock<(e.beforeState.get(t.id.client)||0)&&e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach(n=>{n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e)}),e.changed.delete(this.type)}gc(e){let t=this.type._start;for(;t!==null;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach(n=>{for(;n!==null;)n.gc(e,!0),n=n.left}),this.type._map=new Map}write(e,t){this.type._write(e)}getRef(){return 7}}const Q3e=i=>new Wd(U3e[i.readTypeRef()](i)),CQ=(i,e)=>{let t=e,n=0,s;do n>0&&(t=On(t.client,t.clock+n)),s=jv(i,t),n=t.clock-s.id.clock,t=s.redone;while(t!==null&&s instanceof Bs);return{item:s,diff:n}},OI=(i,e,t)=>{const{client:n,clock:s}=e.id,r=new Bs(On(n,s+t),e,On(n,s+t-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t));return e.deleted&&r.markDeleted(),e.keep&&(r.keep=!0),e.redone!==null&&(r.redone=On(e.redone.client,e.redone.clock+t)),e.right=r,r.right!==null&&(r.right.left=r),i._mergeStructs.push(r),r.parentSub!==null&&r.right===null&&r.parent._map.set(r.parentSub,r),e.length=t,r};class Bs extends gH{constructor(e,t,n,s,r,o,a,l){super(e,l.getLength()),this.origin=n,this.left=t,this.right=s,this.rightOrigin=r,this.parent=o,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?eQ:0}set marker(e){(this.info&dO)>0!==e&&(this.info^=dO)}get marker(){return(this.info&dO)>0}get keep(){return(this.info&JY)>0}set keep(e){this.keep!==e&&(this.info^=JY)}get countable(){return(this.info&eQ)>0}get deleted(){return(this.info&uO)>0}set deleted(e){this.deleted!==e&&(this.info^=uO)}markDeleted(){this.info|=uO}getMissing(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=pr(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=pr(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===zv&&this.id.client!==this.parent.client&&this.parent.clock>=pr(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=mQ(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=xm(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===oc||this.right&&this.right.constructor===oc)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Bs?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Bs&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===zv){const n=jv(t,this.parent);n.constructor===oc?this.parent=null:this.parent=n.content.type}return null}integrate(e,t){if(t>0&&(this.id.clock+=t,this.left=mQ(e,e.doc.store,On(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let n=this.left,s;if(n!==null)s=n.right;else if(this.parentSub!==null)for(s=this.parent._map.get(this.parentSub)||null;s!==null&&s.left!==null;)s=s.left;else s=this.parent._start;const r=new Set,o=new Set;for(;s!==null&&s!==this.right;){if(o.add(s),r.add(s),IE(this.origin,s.origin)){if(s.id.client<this.id.client)n=s,r.clear();else if(IE(this.rightOrigin,s.rightOrigin))break}else if(s.origin!==null&&o.has(jv(e.doc.store,s.origin)))r.has(jv(e.doc.store,s.origin))||(n=s,r.clear());else break;s=s.right}this.left=n}if(this.left!==null){const n=this.left.right;this.right=n,this.left.right=this}else{let n;if(this.parentSub!==null)for(n=this.parent._map.get(this.parentSub)||null;n!==null&&n.left!==null;)n=n.left;else n=this.parent._start,this.parent._start=this;this.right=n}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Kue(e.doc.store,this),this.content.integrate(e,this),_Q(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new oc(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:On(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&IE(e.origin,this.lastId)&&this.right===e&&IE(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const t=this.parent._searchMarker;return t&&t.forEach(n=>{n.p===e&&(n.p=this,!this.deleted&&this.countable&&(n.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const t=this.parent;this.countable&&this.parentSub===null&&(t._length-=this.length),this.markDeleted(),TI(e.deleteSet,this.id.client,this.id.clock,this.length),_Q(e,t,this.parentSub),this.content.delete(e)}}gc(e,t){if(!this.deleted)throw pc();this.content.gc(e),t?t3e(e,this,new oc(this.id,this.length)):this.content=new fk(this.length)}write(e,t){const n=t>0?On(this.id.client,this.id.clock+t-1):this.origin,s=this.rightOrigin,r=this.parentSub,o=this.content.getRef()&I4|(n===null?0:Fl)|(s===null?0:Zh)|(r===null?0:ak);if(e.writeInfo(o),n!==null&&e.writeLeftID(n),s!==null&&e.writeRightID(s),n===null&&s===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const c=$ue(a);e.writeParentInfo(!0),e.writeString(c)}else e.writeParentInfo(!1),e.writeLeftID(l.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===zv?(e.writeParentInfo(!1),e.writeLeftID(a)):pc();r!==null&&e.writeString(r)}this.content.write(e,t)}}const fde=(i,e)=>X3e[e&I4](i),X3e=[()=>{pc()},P3e,B3e,A3e,H3e,O3e,F3e,Q3e,W3e,M3e,()=>{pc()}],Z3e=10;class ac extends gH{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,t){pc()}write(e,t){e.writeInfo(Z3e),Ht(e.restEncoder,this.length-t)}getMissing(e,t){return null}}const gde=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},mde="__ $YJS$ __";gde[mde]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");gde[mde]=!0;const pde=new Map;class J3e{constructor(e){this.room=e,this.onmessage=null,this._onChange=t=>t.key===e&&this.onmessage!==null&&this.onmessage({data:p5e(t.newValue||"")}),G6e(this._onChange)}postMessage(e){yue.setItem(this.room,m5e(u5e(e)))}close(){Y6e(this._onChange)}}const e9e=typeof BroadcastChannel>"u"?J3e:BroadcastChannel,mH=i=>Vd(pde,i,()=>{const e=Cm(),t=new e9e(i);return t.onmessage=n=>e.forEach(s=>s(n.data,"broadcastchannel")),{bc:t,subs:e}}),t9e=(i,e)=>(mH(i).subs.add(e),e),n9e=(i,e)=>{const t=mH(i),n=t.subs.delete(e);return n&&t.subs.size===0&&(t.bc.close(),pde.delete(i)),n},j_=(i,e,t=null)=>{const n=mH(i);n.bc.postMessage(e),n.subs.forEach(s=>s(e,t))},_de=0,pH=1,vde=2,F3=(i,e)=>{Ht(i,_de);const t=G5e(e);qs(i,t)},bde=(i,e,t)=>{Ht(i,pH),qs(i,j5e(e,t))},i9e=(i,e,t)=>bde(e,t,zo(i)),yde=(i,e,t)=>{try{H5e(e,zo(i),t)}catch(n){console.error("Caught error while handling a Yjs update",n)}},s9e=(i,e)=>{Ht(i,vde),qs(i,e)},r9e=yde,o9e=(i,e,t,n)=>{const s=bn(i);switch(s){case _de:i9e(i,e,t);break;case pH:yde(i,t,n);break;case vde:r9e(i,t,n);break;default:throw new Error("Unknown message type")}return s},a9e=0,l9e=(i,e,t)=>{switch(bn(i)){case a9e:t(e,Jg(i))}},_O=3e4;class c9e extends g6e{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const t=q0();this.getLocalState()!==null&&_O/2<=t-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const n=[];this.meta.forEach((s,r)=>{r!==this.clientID&&_O<=t-s.lastUpdated&&this.states.has(r)&&n.push(r)}),n.length>0&&_H(this,n,"timeout")},vf(_O/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const t=this.clientID,n=this.meta.get(t),s=n===void 0?0:n.clock+1,r=this.states.get(t);e===null?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:s,lastUpdated:q0()});const o=[],a=[],l=[],c=[];e===null?c.push(t):r==null?e!=null&&o.push(t):(a.push(t),WC(r,e)||l.push(t)),(o.length>0||l.length>0||c.length>0)&&this.emit("change",[{added:o,updated:l,removed:c},"local"]),this.emit("update",[{added:o,updated:a,removed:c},"local"])}setLocalStateField(e,t){const n=this.getLocalState();n!==null&&this.setLocalState({...n,[e]:t})}getStates(){return this.states}}const _H=(i,e,t)=>{const n=[];for(let s=0;s<e.length;s++){const r=e[s];if(i.states.has(r)){if(i.states.delete(r),r===i.clientID){const o=i.meta.get(r);i.meta.set(r,{clock:o.clock+1,lastUpdated:q0()})}n.push(r)}}n.length>0&&(i.emit("change",[{added:[],updated:[],removed:n},t]),i.emit("update",[{added:[],updated:[],removed:n},t]))},HC=(i,e,t=i.states)=>{const n=e.length,s=$o();Ht(s,n);for(let r=0;r<n;r++){const o=e[r],a=t.get(o)||null,l=i.meta.get(o).clock;Ht(s,o),Ht(s,l),g0(s,JSON.stringify(a))}return bs(s)},u9e=(i,e,t)=>{const n=Um(e),s=q0(),r=[],o=[],a=[],l=[],c=bn(n);for(let u=0;u<c;u++){const d=bn(n);let h=bn(n);const g=JSON.parse(Jg(n)),p=i.meta.get(d),_=i.states.get(d),v=p===void 0?0:p.clock;(v<h||v===h&&g===null&&i.states.has(d))&&(g===null?d===i.clientID&&i.getLocalState()!=null?h++:i.states.delete(d):i.states.set(d,g),i.meta.set(d,{clock:h,lastUpdated:s}),p===void 0&&g!==null?r.push(d):p!==void 0&&g===null?l.push(d):g!==null&&(WC(g,_)||a.push(d),o.push(d)))}(r.length>0||a.length>0||l.length>0)&&i.emit("change",[{added:r,updated:a,removed:l},t]),(r.length>0||o.length>0||l.length>0)&&i.emit("update",[{added:r,updated:o,removed:l},t])},d9e=i=>Z6e(i,(e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`).join("&"),i0=0,wde=3,qv=1,h9e=2,N2=[];N2[i0]=(i,e,t,n,s)=>{Ht(i,i0);const r=o9e(e,i,t.doc,t);n&&r===pH&&!t.synced&&(t.synced=!0)};N2[wde]=(i,e,t,n,s)=>{Ht(i,qv),qs(i,HC(t.awareness,Array.from(t.awareness.getStates().keys())))};N2[qv]=(i,e,t,n,s)=>{u9e(t.awareness,zo(e),t)};N2[h9e]=(i,e,t,n,s)=>{l9e(e,t.doc,(r,o)=>f9e(t,o))};const SQ=3e4,f9e=(i,e)=>console.warn(`Permission denied to access ${i.url}.
${e}`),Cde=(i,e,t)=>{const n=Um(e),s=$o(),r=bn(n),o=i.messageHandlers[r];return o?o(s,n,i,t,r):console.error("Unable to compute message"),s},B3=(i,e,t)=>{e===i.ws&&(i.emit("connection-close",[t,i]),i.ws=null,e.close(),i.wsconnecting=!1,i.wsconnected?(i.wsconnected=!1,i.synced=!1,_H(i.awareness,Array.from(i.awareness.getStates().keys()).filter(n=>n!==i.doc.clientID),i),i.emit("status",[{status:"disconnected"}])):i.wsUnsuccessfulReconnects++,setTimeout(Sde,YW(m6e(2,i.wsUnsuccessfulReconnects)*100,i.maxBackoffTime),i))},Sde=i=>{if(i.shouldConnect&&i.ws===null){const e=new i._WS(i.url,i.protocols);e.binaryType="arraybuffer",i.ws=e,i.wsconnecting=!0,i.wsconnected=!1,i.synced=!1,e.onmessage=t=>{i.wsLastMessageReceived=q0();const n=Cde(i,new Uint8Array(t.data),!0);QW(n)>1&&e.send(bs(n))},e.onerror=t=>{i.emit("connection-error",[t,i])},e.onclose=t=>{B3(i,e,t)},e.onopen=()=>{i.wsLastMessageReceived=q0(),i.wsconnecting=!1,i.wsconnected=!0,i.wsUnsuccessfulReconnects=0,i.emit("status",[{status:"connected"}]);const t=$o();if(Ht(t,i0),F3(t,i.doc),e.send(bs(t)),i.awareness.getLocalState()!==null){const n=$o();Ht(n,qv),qs(n,HC(i.awareness,[i.doc.clientID])),e.send(bs(n))}},i.emit("status",[{status:"connecting"}])}},vO=(i,e)=>{const t=i.ws;i.wsconnected&&t&&t.readyState===t.OPEN&&t.send(e),i.bcconnected&&j_(i.bcChannel,e,i)};class g9e extends fue{constructor(e,t,n,{connect:s=!0,awareness:r=new c9e(n),params:o={},protocols:a=[],WebSocketPolyfill:l=WebSocket,resyncInterval:c=-1,maxBackoffTime:u=2500,disableBc:d=!1}={}){for(super();e[e.length-1]==="/";)e=e.slice(0,e.length-1);this.serverUrl=e,this.bcChannel=e+"/"+t,this.maxBackoffTime=u,this.params=o,this.protocols=a,this.roomname=t,this.doc=n,this._WS=l,this.awareness=r,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=d,this.wsUnsuccessfulReconnects=0,this.messageHandlers=N2.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=s,this._resyncInterval=0,c>0&&(this._resyncInterval=setInterval(()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const h=$o();Ht(h,i0),F3(h,n),this.ws.send(bs(h))}},c)),this._bcSubscriber=(h,g)=>{if(g!==this){const p=Cde(this,new Uint8Array(h),!1);QW(p)>1&&j_(this.bcChannel,bs(p),this)}},this._updateHandler=(h,g)=>{if(g!==this){const p=$o();Ht(p,i0),s9e(p,h),vO(this,bs(p))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:h,updated:g,removed:p},_)=>{const v=h.concat(g).concat(p),y=$o();Ht(y,qv),qs(y,HC(r,v)),vO(this,bs(y))},this._exitHandler=()=>{_H(this.awareness,[n.clientID],"app closed")},km&&typeof process<"u"&&process.on("exit",this._exitHandler),r.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval(()=>{this.wsconnected&&SQ<q0()-this.wsLastMessageReceived&&B3(this,this.ws,null)},SQ/10),s&&this.connect()}get url(){const e=d9e(this.params);return this.serverUrl+"/"+this.roomname+(e.length===0?"":"?"+e)}get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}destroy(){this._resyncInterval!==0&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),km&&typeof process<"u"&&process.off("exit",this._exitHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;this.bcconnected||(t9e(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);const e=$o();Ht(e,i0),F3(e,this.doc),j_(this.bcChannel,bs(e),this);const t=$o();Ht(t,i0),bde(t,this.doc),j_(this.bcChannel,bs(t),this);const n=$o();Ht(n,wde),j_(this.bcChannel,bs(n),this);const s=$o();Ht(s,qv),qs(s,HC(this.awareness,[this.doc.clientID])),j_(this.bcChannel,bs(s),this)}disconnectBc(){const e=$o();Ht(e,qv),qs(e,HC(this.awareness,[this.doc.clientID],new Map)),vO(this,bs(e)),this.bcconnected&&(n9e(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),this.ws!==null&&B3(this,this.ws,null)}connect(){this.shouldConnect=!0,!this.wsconnected&&this.ws===null&&(Sde(this),this.connectBc())}}function bl(i,e=0){return i[i.length-(1+e)]}function m9e(i){if(i.length===0)throw new Error("Invalid tail call");return[i.slice(0,i.length-1),i[i.length-1]]}function ks(i,e,t=(n,s)=>n===s){if(i===e)return!0;if(!i||!e||i.length!==e.length)return!1;for(let n=0,s=i.length;n<s;n++)if(!t(i[n],e[n]))return!1;return!0}function p9e(i,e){const t=i.length-1;e<t&&(i[e]=i[t]),i.pop()}function _9e(i,e,t){return v9e(i.length,n=>t(i[n],e))}function v9e(i,e){let t=0,n=i-1;for(;t<=n;){const s=(t+n)/2|0,r=e(s);if(r<0)t=s+1;else if(r>0)n=s-1;else return s}return-(t+1)}function*vH(i,e){let t,n;for(const s of i)n!==void 0&&e(n,s)?t.push(s):(t&&(yield t),t=[s]),n=s;t&&(yield t)}function kde(i,e){for(let t=0;t<=i.length;t++)e(t===0?void 0:i[t-1],t===i.length?void 0:i[t])}function b9e(i,e){for(let t=0;t<i.length;t++)e(t===0?void 0:i[t-1],i[t],t+1===i.length?void 0:i[t+1])}function bH(i){return i.filter(e=>!!e)}function kQ(i){let e=0;for(let t=0;t<i.length;t++)i[t]&&(i[e]=i[t],e+=1);i.length=e}function y9e(i){return!Array.isArray(i)||i.length===0}function O4(i){return Array.isArray(i)&&i.length>0}function Q0(i,e=t=>t){const t=new Set;return i.filter(n=>{const s=e(n);return t.has(s)?!1:(t.add(s),!0)})}function yH(i,e){return i.length>0?i[0]:e}function Uo(i,e){let t=typeof e=="number"?i:0;typeof e=="number"?t=i:(t=0,e=i);const n=[];if(t<=e)for(let s=t;s<e;s++)n.push(s);else for(let s=t;s>e;s--)n.push(s);return n}function F4(i,e,t){const n=i.slice(0,e),s=i.slice(e);return n.concat(t,s)}function bO(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.unshift(e))}function AE(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.push(e))}function V3(i,e){for(const t of e)i.push(t)}function w9e(i,e,t){const n=xde(i,e),s=i.length,r=t.length;i.length=s+r;for(let o=s-1;o>=n;o--)i[o+r]=i[o];for(let o=0;o<r;o++)i[o+n]=t[o]}function xQ(i,e,t,n){const s=xde(i,e);let r=i.splice(s,t);return r===void 0&&(r=[]),w9e(i,s,n),r}function xde(i,e){return e<0?Math.max(e+i.length,0):Math.min(e,i.length)}var gk;(function(i){function e(r){return r<0}i.isLessThan=e;function t(r){return r<=0}i.isLessThanOrEqual=t;function n(r){return r>0}i.isGreaterThan=n;function s(r){return r===0}i.isNeitherLessOrGreaterThan=s,i.greaterThan=1,i.lessThan=-1,i.neitherLessOrGreaterThan=0})(gk||(gk={}));function fc(i,e){return(t,n)=>e(i(t),i(n))}function C9e(...i){return(e,t)=>{for(const n of i){const s=n(e,t);if(!gk.isNeitherLessOrGreaterThan(s))return s}return gk.neitherLessOrGreaterThan}}const em=(i,e)=>i-e,S9e=(i,e)=>em(i?1:0,e?1:0);function k9e(i){return(e,t)=>-i(e,t)}class bf{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}const yv=class yv{constructor(e){this.iterate=e}toArray(){const e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new yv(t=>this.iterate(n=>e(n)?t(n):!0))}map(e){return new yv(t=>this.iterate(n=>t(e(n))))}findLast(e){let t;return this.iterate(n=>(e(n)&&(t=n),!0)),t}findLastMaxBy(e){let t,n=!0;return this.iterate(s=>((n||gk.isGreaterThan(e(s,t)))&&(n=!1,t=s),!0)),t}};yv.empty=new yv(e=>{});let m0=yv;function nl(i){return typeof i=="string"}function Xo(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)&&!(i instanceof RegExp)&&!(i instanceof Date)}function x9e(i){const e=Object.getPrototypeOf(Uint8Array);return typeof i=="object"&&i instanceof e}function Fy(i){return typeof i=="number"&&!isNaN(i)}function EQ(i){return!!i&&typeof i[Symbol.iterator]=="function"}function Ede(i){return i===!0||i===!1}function Dl(i){return typeof i>"u"}function Ub(i){return!Ka(i)}function Ka(i){return Dl(i)||i===null}function tm(i,e){if(!i)throw new Error("Unexpected type")}function Tde(i){if(Ka(i))throw new Error("Assertion Failed: argument is undefined or null");return i}function FI(i){return typeof i=="function"}function E9e(i,e){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)T9e(i[n],e[n])}function T9e(i,e){if(nl(e)){if(typeof i!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(FI(e)){try{if(i instanceof e)return}catch{}if(!Ka(i)&&i.constructor===e||e.length===1&&e.call(void 0,i)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function yg(i){if(!i||typeof i!="object"||i instanceof RegExp)return i;const e=Array.isArray(i)?[]:{};return Object.entries(i).forEach(([t,n])=>{e[t]=n&&typeof n=="object"?yg(n):n}),e}function L9e(i){if(!i||typeof i!="object")return i;const e=[i];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const n in t)if(Lde.call(t,n)){const s=t[n];typeof s=="object"&&!Object.isFrozen(s)&&!x9e(s)&&e.push(s)}}return i}const Lde=Object.prototype.hasOwnProperty;function Ide(i,e){return W3(i,e,new Set)}function W3(i,e,t){if(Ka(i))return i;const n=e(i);if(typeof n<"u")return n;if(Array.isArray(i)){const s=[];for(const r of i)s.push(W3(r,e,t));return s}if(Xo(i)){if(t.has(i))throw new Error("Cannot clone recursive data-structure");t.add(i);const s={};for(const r in i)Lde.call(i,r)&&(s[r]=W3(i[r],e,t));return t.delete(i),s}return i}function wa(i,e){if(i===e)return!0;if(i==null||e===null||e===void 0||typeof i!=typeof e||typeof i!="object"||Array.isArray(i)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(i)){if(i.length!==e.length)return!1;for(t=0;t<i.length;t++)if(!wa(i[t],e[t]))return!1}else{const s=[];for(n in i)s.push(n);s.sort();const r=[];for(n in e)r.push(n);if(r.sort(),!wa(s,r))return!1;for(t=0;t<s.length;t++)if(!wa(i[s[t]],e[s[t]]))return!1}return!0}function I9e(i){let e=[];for(;Object.prototype!==i;)e=e.concat(Object.getOwnPropertyNames(i)),i=Object.getPrototypeOf(i);return e}function H3(i){const e=[];for(const t of I9e(i))typeof i[t]=="function"&&e.push(t);return e}function D9e(i,e){const t=s=>function(){const r=Array.prototype.slice.call(arguments,0);return e(s,r)},n={};for(const s of i)n[s]=t(s);return n}function Dde(){return globalThis._VSCODE_NLS_MESSAGES}function wH(){return globalThis._VSCODE_NLS_LANGUAGE}const N9e=wH()==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function TQ(i,e){let t;return e.length===0?t=i:t=i.replace(/\{(\d+)\}/g,(n,s)=>{const r=s[0],o=e[r];let a=n;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),N9e&&(t=""+t.replace(/[aouei]/g,"$&$&")+""),t}function S(i,e,...t){return TQ(typeof i=="number"?R9e(i,e):e,t)}function R9e(i,e){var n;const t=(n=Dde())==null?void 0:n[i];if(typeof t!="string"){if(typeof e=="string")return e;throw new Error(`!!! NLS MISSING: ${i} !!!`)}return t}const X_="en";let BI=!1,VI=!1,eL=!1,Nde=!1,CH=!1,SH=!1,Rde=!1,PE,yO=X_,LQ=X_,A9e,Vc;const Jh=globalThis;let mo;var $ne;typeof Jh.vscode<"u"&&typeof Jh.vscode.process<"u"?mo=Jh.vscode.process:typeof process<"u"&&typeof(($ne=process==null?void 0:process.versions)==null?void 0:$ne.node)=="string"&&(mo=process);var qne;const P9e=typeof((qne=mo==null?void 0:mo.versions)==null?void 0:qne.electron)=="string",M9e=P9e&&(mo==null?void 0:mo.type)==="renderer";var Kne;if(typeof mo=="object"){BI=mo.platform==="win32",VI=mo.platform==="darwin",eL=mo.platform==="linux",eL&&mo.env.SNAP&&mo.env.SNAP_REVISION,mo.env.CI||mo.env.BUILD_ARTIFACTSTAGINGDIRECTORY,PE=X_,yO=X_;const i=mo.env.VSCODE_NLS_CONFIG;if(i)try{const e=JSON.parse(i);PE=e.userLocale,LQ=e.osLocale,yO=e.resolvedLanguage||X_,A9e=(Kne=e.languagePack)==null?void 0:Kne.translationsConfigFile}catch{}Nde=!0}else typeof navigator=="object"&&!M9e?(Vc=navigator.userAgent,BI=Vc.indexOf("Windows")>=0,VI=Vc.indexOf("Macintosh")>=0,SH=(Vc.indexOf("Macintosh")>=0||Vc.indexOf("iPad")>=0||Vc.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,eL=Vc.indexOf("Linux")>=0,Rde=(Vc==null?void 0:Vc.indexOf("Mobi"))>=0,CH=!0,yO=wH()||X_,PE=navigator.language.toLowerCase(),LQ=PE):console.error("Unable to resolve platform.");const Sa=BI,rn=VI,ia=eL,WI=Nde,By=CH,O9e=CH&&typeof Jh.importScripts=="function",F9e=O9e?Jh.origin:void 0,X0=SH,Ade=Rde,Dd=Vc,B9e=typeof Jh.postMessage=="function"&&!Jh.importScripts,Pde=(()=>{if(B9e){const i=[];Jh.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,s=i.length;n<s;n++){const r=i[n];if(r.id===t.data.vscodeScheduleAsyncWork){i.splice(n,1),r.callback();return}}});let e=0;return t=>{const n=++e;i.push({id:n,callback:t}),Jh.postMessage({vscodeScheduleAsyncWork:n},"*")}}return i=>setTimeout(i)})(),lc=VI||SH?2:BI?1:3;let IQ=!0,DQ=!1;function V9e(){if(!DQ){DQ=!0;const i=new Uint8Array(2);i[0]=1,i[1]=2,IQ=new Uint16Array(i.buffer)[0]===513}return IQ}const Mde=!!(Dd&&Dd.indexOf("Chrome")>=0),W9e=!!(Dd&&Dd.indexOf("Firefox")>=0),H9e=!!(!Mde&&Dd&&Dd.indexOf("Safari")>=0),U9e=!!(Dd&&Dd.indexOf("Edg/")>=0),z9e=!!(Dd&&Dd.indexOf("Android")>=0),Ir={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var yn;(function(i){function e(k){return k&&typeof k=="object"&&typeof k[Symbol.iterator]=="function"}i.is=e;const t=Object.freeze([]);function n(){return t}i.empty=n;function*s(k){yield k}i.single=s;function r(k){return e(k)?k:s(k)}i.wrap=r;function o(k){return k||t}i.from=o;function*a(k){for(let T=k.length-1;T>=0;T--)yield k[T]}i.reverse=a;function l(k){return!k||k[Symbol.iterator]().next().done===!0}i.isEmpty=l;function c(k){return k[Symbol.iterator]().next().value}i.first=c;function u(k,T){let R=0;for(const L of k)if(T(L,R++))return!0;return!1}i.some=u;function d(k,T){for(const R of k)if(T(R))return R}i.find=d;function*h(k,T){for(const R of k)T(R)&&(yield R)}i.filter=h;function*g(k,T){let R=0;for(const L of k)yield T(L,R++)}i.map=g;function*p(k,T){let R=0;for(const L of k)yield*T(L,R++)}i.flatMap=p;function*_(...k){for(const T of k)yield*T}i.concat=_;function v(k,T,R){let L=R;for(const I of k)L=T(L,I);return L}i.reduce=v;function*y(k,T,R=k.length){for(T<0&&(T+=k.length),R<0?R+=k.length:R>k.length&&(R=k.length);T<R;T++)yield k[T]}i.slice=y;function w(k,T=Number.POSITIVE_INFINITY){const R=[];if(T===0)return[R,k];const L=k[Symbol.iterator]();for(let I=0;I<T;I++){const A=L.next();if(A.done)return[R,i.empty()];R.push(A.value)}return[R,{[Symbol.iterator](){return L}}]}i.consume=w;async function x(k){const T=[];for await(const R of k)T.push(R);return Promise.resolve(T)}i.asyncToArray=x})(yn||(yn={}));var Gh;let vs=(Gh=class{constructor(e){this.element=e,this.next=Gh.Undefined,this.prev=Gh.Undefined}},Gh.Undefined=new Gh(void 0),Gh);class ba{constructor(){this._first=vs.Undefined,this._last=vs.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===vs.Undefined}clear(){let e=this._first;for(;e!==vs.Undefined;){const t=e.next;e.prev=vs.Undefined,e.next=vs.Undefined,e=t}this._first=vs.Undefined,this._last=vs.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new vs(e);if(this._first===vs.Undefined)this._first=n,this._last=n;else if(t){const r=this._last;this._last=n,n.prev=r,r.next=n}else{const r=this._first;this._first=n,n.next=r,r.prev=n}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(n))}}shift(){if(this._first!==vs.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==vs.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==vs.Undefined&&e.next!==vs.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===vs.Undefined&&e.next===vs.Undefined?(this._first=vs.Undefined,this._last=vs.Undefined):e.next===vs.Undefined?(this._last=this._last.prev,this._last.next=vs.Undefined):e.prev===vs.Undefined&&(this._first=this._first.next,this._first.prev=vs.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==vs.Undefined;)yield e.element,e=e.next}}const Ode="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function j9e(i=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of Ode)i.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const kH=j9e();function xH(i){let e=kH;if(i&&i instanceof RegExp)if(i.global)e=i;else{let t="g";i.ignoreCase&&(t+="i"),i.multiline&&(t+="m"),i.unicode&&(t+="u"),e=new RegExp(i.source,t)}return e.lastIndex=0,e}const Fde=new ba;Fde.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function mk(i,e,t,n,s){if(e=xH(e),s||(s=yn.first(Fde)),t.length>s.maxLen){let c=i-s.maxLen/2;return c<0?c=0:n+=c,t=t.substring(c,i+s.maxLen/2),mk(i,e,t,n,s)}const r=Date.now(),o=i-1-n;let a=-1,l=null;for(let c=1;!(Date.now()-r>=s.timeBudget);c++){const u=o-s.windowSize*c;e.lastIndex=Math.max(0,u);const d=$9e(e,t,o,a);if(!d&&l||(l=d,u<=0))break;a=u}if(l){const c={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function $9e(i,e,t,n){let s;for(;s=i.exec(e);){const r=s.index||0;if(r<=t&&i.lastIndex>=t)return s;if(n>0&&r>n)return null}return null}const qu=8;class Bde{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class Vde{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class fi{constructor(e,t,n,s){this.id=e,this.name=t,this.defaultValue=n,this.schema=s}applyUpdate(e,t){return B4(e,t)}compute(e,t,n){return n}}class UC{constructor(e,t){this.newValue=e,this.didChange=t}}function B4(i,e){if(typeof i!="object"||typeof e!="object"||!i||!e)return new UC(e,i!==e);if(Array.isArray(i)||Array.isArray(e)){const n=Array.isArray(i)&&Array.isArray(e)&&ks(i,e);return new UC(e,!n)}let t=!1;for(const n in e)if(e.hasOwnProperty(n)){const s=B4(i[n],e[n]);s.didChange&&(i[n]=s.newValue,t=!0)}return new UC(i,t)}class R2{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return B4(e,t)}validate(e){return this.defaultValue}}class Vy{constructor(e,t,n,s){this.id=e,this.name=t,this.defaultValue=n,this.schema=s}applyUpdate(e,t){return B4(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}}function $e(i,e){return typeof i>"u"?e:i==="false"?!1:!!i}class Qt extends Vy{constructor(e,t,n,s=void 0){typeof s<"u"&&(s.type="boolean",s.default=n),super(e,t,n,s)}validate(e){return $e(e,this.defaultValue)}}function kp(i,e,t,n){if(typeof i>"u")return e;let s=parseInt(i,10);return isNaN(s)?e:(s=Math.max(t,s),s=Math.min(n,s),s|0)}class Wn extends Vy{static clampedInt(e,t,n,s){return kp(e,t,n,s)}constructor(e,t,n,s,r,o=void 0){typeof o<"u"&&(o.type="integer",o.default=n,o.minimum=s,o.maximum=r),super(e,t,n,o),this.minimum=s,this.maximum=r}validate(e){return Wn.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}function q9e(i,e,t,n){if(typeof i>"u")return e;const s=Ya.float(i,e);return Ya.clamp(s,t,n)}class Ya extends Vy{static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const n=parseFloat(e);return isNaN(n)?t:n}constructor(e,t,n,s,r){typeof r<"u"&&(r.type="number",r.default=n),super(e,t,n,r),this.validationFn=s}validate(e){return this.validationFn(Ya.float(e,this.defaultValue))}}class eo extends Vy{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,s=void 0){typeof s<"u"&&(s.type="string",s.default=n),super(e,t,n,s)}validate(e){return eo.string(e,this.defaultValue)}}function xi(i,e,t,n){return typeof i!="string"?e:n&&i in n?n[i]:t.indexOf(i)===-1?e:i}class Si extends Vy{constructor(e,t,n,s,r=void 0){typeof r<"u"&&(r.type="string",r.enum=s,r.default=n),super(e,t,n,r),this._allowedValues=s}validate(e){return xi(e,this.defaultValue,this._allowedValues)}}class ME extends fi{constructor(e,t,n,s,r,o,a=void 0){typeof a<"u"&&(a.type="string",a.enum=r,a.default=s),super(e,t,n,a),this._allowedValues=r,this._convert=o}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function K9e(i){switch(i){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class G9e extends fi{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[S("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),S("accessibilitySupport.on","Optimize for usage with a Screen Reader."),S("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:S("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}}class Y9e extends fi{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:S("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:S("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:$e(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:$e(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function Q9e(i){switch(i){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var Ys;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(Ys||(Ys={}));function X9e(i){switch(i){case"line":return Ys.Line;case"block":return Ys.Block;case"underline":return Ys.Underline;case"line-thin":return Ys.LineThin;case"block-outline":return Ys.BlockOutline;case"underline-thin":return Ys.UnderlineThin}}class Z9e extends R2{constructor(){super(143)}compute(e,t,n){const s=["monaco-editor"];return t.get(39)&&s.push(t.get(39)),e.extraEditorClassName&&s.push(e.extraEditorClassName),t.get(74)==="default"?s.push("mouse-default"):t.get(74)==="copy"&&s.push("mouse-copy"),t.get(112)&&s.push("showUnused"),t.get(141)&&s.push("showDeprecated"),s.join(" ")}}class J9e extends Qt{constructor(){super(37,"emptySelectionClipboard",!0,{description:S("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}}class e8e extends fi{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:S("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[S("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),S("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),S("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:S("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[S("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),S("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),S("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:S("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:S("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:rn},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:S("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:S("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:$e(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":xi(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":xi(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:$e(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:$e(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:$e(t.loop,this.defaultValue.loop)}}}const wh=class wh extends fi{constructor(){super(51,"fontLigatures",wh.OFF,{anyOf:[{type:"boolean",description:S("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:S("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:S("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?wh.OFF:e==="true"?wh.ON:e:e?wh.ON:wh.OFF}};wh.OFF='"liga" off, "calt" off',wh.ON='"liga" on, "calt" on';let Z0=wh;const Ch=class Ch extends fi{constructor(){super(54,"fontVariations",Ch.OFF,{anyOf:[{type:"boolean",description:S("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:S("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:S("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?Ch.OFF:e==="true"?Ch.TRANSLATE:e:e?Ch.TRANSLATE:Ch.OFF}compute(e,t,n){return e.fontInfo.fontVariationSettings}};Ch.OFF="normal",Ch.TRANSLATE="translate";let pk=Ch;class t8e extends R2{constructor(){super(50)}compute(e,t,n){return e.fontInfo}}class n8e extends Vy{constructor(){super(52,"fontSize",il.fontSize,{type:"number",minimum:6,maximum:100,default:il.fontSize,description:S("fontSize","Controls the font size in pixels.")})}validate(e){const t=Ya.float(e,this.defaultValue);return t===0?il.fontSize:Ya.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}}const Xu=class Xu extends fi{constructor(){super(53,"fontWeight",il.fontWeight,{anyOf:[{type:"number",minimum:Xu.MINIMUM_VALUE,maximum:Xu.MAXIMUM_VALUE,errorMessage:S("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Xu.SUGGESTION_VALUES}],default:il.fontWeight,description:S("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Wn.clampedInt(e,il.fontWeight,Xu.MINIMUM_VALUE,Xu.MAXIMUM_VALUE))}};Xu.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],Xu.MINIMUM_VALUE=1,Xu.MAXIMUM_VALUE=1e3;let U3=Xu;class i8e extends fi{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[S("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),S("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),S("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:S("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:S("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:S("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:S("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:S("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:S("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:S("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:S("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:S("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:S("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:S("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:xi(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??xi(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??xi(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??xi(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??xi(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??xi(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??xi(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:eo.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:eo.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:eo.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:eo.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:eo.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:eo.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}}class s8e extends fi{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:S("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:S("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:S("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:S("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:S("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),delay:Wn.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:$e(t.sticky,this.defaultValue.sticky),hidingDelay:Wn.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:$e(t.above,this.defaultValue.above)}}}class Kv extends R2{constructor(){super(146)}compute(e,t,n){return Kv.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=Math.floor(e.paddingTop/e.lineHeight);let s=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(s=Math.max(s,t-1));const r=(n+e.viewLineCount+s)/(e.pixelRatio*e.height),o=Math.floor(e.viewLineCount/r);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:n,extraLinesBeyondLastLine:s,desiredRatio:r,minimapLineCount:o}}static _computeMinimapLayout(e,t){const n=e.outerWidth,s=e.outerHeight,r=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(r*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=t.stableMinimapLayoutInput,a=o&&e.outerHeight===o.outerHeight&&e.lineHeight===o.lineHeight&&e.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&e.pixelRatio===o.pixelRatio&&e.scrollBeyondLastLine===o.scrollBeyondLastLine&&e.paddingTop===o.paddingTop&&e.paddingBottom===o.paddingBottom&&e.minimap.enabled===o.minimap.enabled&&e.minimap.side===o.minimap.side&&e.minimap.size===o.minimap.size&&e.minimap.showSlider===o.minimap.showSlider&&e.minimap.renderCharacters===o.minimap.renderCharacters&&e.minimap.maxColumn===o.minimap.maxColumn&&e.minimap.scale===o.minimap.scale&&e.verticalScrollbarWidth===o.verticalScrollbarWidth&&e.isViewportWrapping===o.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,u=e.scrollBeyondLastLine,d=e.minimap.renderCharacters;let h=r>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const g=e.minimap.maxColumn,p=e.minimap.size,_=e.minimap.side,v=e.verticalScrollbarWidth,y=e.viewLineCount,w=e.remainingWidth,x=e.isViewportWrapping,k=d?2:3;let T=Math.floor(r*s);const R=T/r;let L=!1,I=!1,A=k*h,B=h/r,V=1;if(p==="fill"||p==="fit"){const{typicalViewportLineCount:te,extraLinesBeforeFirstLine:ce,extraLinesBeyondLastLine:ve,desiredRatio:X,minimapLineCount:oe}=Kv.computeContainedMinimapLineCount({viewLineCount:y,scrollBeyondLastLine:u,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:s,lineHeight:l,pixelRatio:r});if(y/oe>1)L=!0,I=!0,h=1,A=1,B=h/r;else{let Ie=!1,Oe=h+1;if(p==="fit"){const it=Math.ceil((ce+y+ve)*A);x&&a&&w<=t.stableFitRemainingWidth?(Ie=!0,Oe=t.stableFitMaxMinimapScale):Ie=it>T}if(p==="fill"||Ie){L=!0;const it=h;A=Math.min(l*r,Math.max(1,Math.floor(1/X))),x&&a&&w<=t.stableFitRemainingWidth&&(Oe=t.stableFitMaxMinimapScale),h=Math.min(Oe,Math.max(1,Math.floor(A/k))),h>it&&(V=Math.min(2,h/it)),B=h/r/V,T=Math.ceil(Math.max(te,ce+y+ve)*A),x?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=w,t.stableFitMaxMinimapScale=h):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const U=Math.floor(g*B),W=Math.min(U,Math.max(0,Math.floor((w-v-2)*B/(c+B)))+qu);let G=Math.floor(r*W);const Z=G/r;G=Math.floor(G*V);const ne=d?1:2,fe=_==="left"?0:n-W-v;return{renderMinimap:ne,minimapLeft:fe,minimapWidth:W,minimapHeightIsEditorHeight:L,minimapIsSampling:I,minimapScale:h,minimapLineHeight:A,minimapCanvasInnerWidth:G,minimapCanvasInnerHeight:T,minimapCanvasOuterWidth:Z,minimapCanvasOuterHeight:R}}static computeLayout(e,t){const n=t.outerWidth|0,s=t.outerHeight|0,r=t.lineHeight|0,o=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,u=t.viewLineCount,d=e.get(138),h=d==="inherit"?e.get(137):d,g=h==="inherit"?e.get(133):h,p=e.get(136),_=t.isDominatedByLongLines,v=e.get(57),y=e.get(68).renderType!==0,w=e.get(69),x=e.get(106),k=e.get(84),T=e.get(73),R=e.get(104),L=R.verticalScrollbarSize,I=R.verticalHasArrows,A=R.arrowSize,B=R.horizontalScrollbarSize,V=e.get(43),U=e.get(111)!=="never";let W=e.get(66);V&&U&&(W+=16);let G=0;if(y){const at=Math.max(o,w);G=Math.round(at*l)}let Z=0;v&&(Z=r*t.glyphMarginDecorationLaneCount);let ne=0,fe=ne+Z,te=fe+G,ce=te+W;const ve=n-Z-G-W;let X=!1,oe=!1,Ne=-1;h==="inherit"&&_?(X=!0,oe=!0):g==="on"||g==="bounded"?oe=!0:g==="wordWrapColumn"&&(Ne=p);const Ie=Kv._computeMinimapLayout({outerWidth:n,outerHeight:s,lineHeight:r,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:x,paddingTop:k.top,paddingBottom:k.bottom,minimap:T,verticalScrollbarWidth:L,viewLineCount:u,remainingWidth:ve,isViewportWrapping:oe},t.memory||new Vde);Ie.renderMinimap!==0&&Ie.minimapLeft===0&&(ne+=Ie.minimapWidth,fe+=Ie.minimapWidth,te+=Ie.minimapWidth,ce+=Ie.minimapWidth);const Oe=ve-Ie.minimapWidth,it=Math.max(1,Math.floor((Oe-L-2)/a)),We=I?A:0;return oe&&(Ne=Math.max(1,it),g==="bounded"&&(Ne=Math.min(Ne,p))),{width:n,height:s,glyphMarginLeft:ne,glyphMarginWidth:Z,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:fe,lineNumbersWidth:G,decorationsLeft:te,decorationsWidth:W,contentLeft:ce,contentWidth:Oe,minimap:Ie,viewportColumn:it,isWordWrapMinified:X,isViewportWrapping:oe,wrappingColumn:Ne,verticalScrollbarWidth:L,horizontalScrollbarHeight:B,overviewRuler:{top:We,width:L,height:s-2*We,right:0}}}}class r8e extends fi{constructor(){super(140,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[S("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),S("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:S("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return xi(e,"simple",["simple","advanced"])}compute(e,t,n){return t.get(2)===2?"advanced":n}}var _h;(function(i){i.Off="off",i.OnCode="onCode",i.On="on"})(_h||(_h={}));class o8e extends fi{constructor(){const e={enabled:_h.OnCode};super(65,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[_h.Off,_h.OnCode,_h.On],default:e.enabled,enumDescriptions:[S("editor.lightbulb.enabled.off","Disable the code action menu."),S("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),S("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:S("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:xi(e.enabled,this.defaultValue.enabled,[_h.Off,_h.OnCode,_h.On])}}}class a8e extends fi{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(116,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:S("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:S("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:S("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:S("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),maxLineCount:Wn.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:xi(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:$e(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}class l8e extends fi{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(142,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:S("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[S("editor.inlayHints.on","Inlay hints are enabled"),S("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",rn?"Ctrl+Option":"Ctrl+Alt"),S("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",rn?"Ctrl+Option":"Ctrl+Alt"),S("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:S("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:S("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:S("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:xi(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Wn.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:eo.string(t.fontFamily,this.defaultValue.fontFamily),padding:$e(t.padding,this.defaultValue.padding)}}}class c8e extends fi{constructor(){super(66,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Wn.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,n){return n<0?Wn.clampedInt(-n*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):n}}class u8e extends Ya{constructor(){super(67,"lineHeight",il.lineHeight,e=>Ya.clamp(e,0,150),{markdownDescription:S("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}}class d8e extends fi{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(73,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:S("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:S("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[S("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),S("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),S("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:S("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:S("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:S("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:S("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:S("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:S("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:S("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:S("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:S("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:S("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),autohide:$e(t.autohide,this.defaultValue.autohide),size:xi(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:xi(t.side,this.defaultValue.side,["right","left"]),showSlider:xi(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:$e(t.renderCharacters,this.defaultValue.renderCharacters),scale:Wn.clampedInt(t.scale,1,1,3),maxColumn:Wn.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:$e(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:$e(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:Ya.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:Ya.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}}function h8e(i){return i==="ctrlCmd"?rn?"metaKey":"ctrlKey":"altKey"}class f8e extends fi{constructor(){super(84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:S("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:S("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Wn.clampedInt(t.top,0,0,1e3),bottom:Wn.clampedInt(t.bottom,0,0,1e3)}}}class g8e extends fi{constructor(){const e={enabled:!0,cycle:!0};super(86,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:S("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:S("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),cycle:$e(t.cycle,this.defaultValue.cycle)}}}class m8e extends R2{constructor(){super(144)}compute(e,t,n){return e.pixelRatio}}class p8e extends fi{constructor(){super(88,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}}class _8e extends fi{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[S("on","Quick suggestions show inside the suggest widget"),S("inline","Quick suggestions show as ghost text"),S("off","Quick suggestions are disabled")]}];super(90,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:S("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:S("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:S("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:S("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:n,strings:s}=e,r=["on","inline","off"];let o,a,l;return typeof t=="boolean"?o=t?"on":"off":o=xi(t,this.defaultValue.other,r),typeof n=="boolean"?a=n?"on":"off":a=xi(n,this.defaultValue.comments,r),typeof s=="boolean"?l=s?"on":"off":l=xi(s,this.defaultValue.strings,r),{other:o,comments:a,strings:l}}}class v8e extends fi{constructor(){super(68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[S("lineNumbers.off","Line numbers are not rendered."),S("lineNumbers.on","Line numbers are rendered as absolute number."),S("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),S("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:S("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}}function HI(i){const e=i.get(99);return e==="editable"?i.get(92):e!=="on"}class b8e extends fi{constructor(){const e=[],t={type:"number",description:S("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(103,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:S("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:S("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const n of e)if(typeof n=="number")t.push({column:Wn.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){const s=n;t.push({column:Wn.clampedInt(s.column,0,0,1e4),color:s.color})}return t.sort((n,s)=>n.column-s.column),t}return this.defaultValue}}class y8e extends fi{constructor(){super(93,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}}function NQ(i,e){if(typeof i!="string")return e;switch(i){case"hidden":return 2;case"visible":return 3;default:return 1}}let w8e=class extends fi{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(104,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[S("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),S("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),S("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:S("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[S("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),S("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),S("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:S("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:S("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:S("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:S("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:S("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,n=Wn.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),s=Wn.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Wn.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:NQ(t.vertical,this.defaultValue.vertical),horizontal:NQ(t.horizontal,this.defaultValue.horizontal),useShadows:$e(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:$e(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:$e(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:$e(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:$e(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:Wn.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:s,verticalSliderSize:Wn.clampedInt(t.verticalSliderSize,s,0,1e3),scrollByPage:$e(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:$e(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}};const Oc="inUntrustedWorkspace",fp={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class C8e extends fi{constructor(){const e={nonBasicASCII:Oc,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Oc,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(126,"unicodeHighlight",e,{[fp.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Oc],default:e.nonBasicASCII,description:S("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[fp.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:S("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[fp.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:S("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[fp.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Oc],default:e.includeComments,description:S("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[fp.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Oc],default:e.includeStrings,description:S("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[fp.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:S("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[fp.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:S("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&e&&(wa(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},n=!0)),t.allowedLocales&&e&&(wa(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},n=!0));const s=super.applyUpdate(e,t);return n?new UC(s.newValue,!0):s}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:Gv(t.nonBasicASCII,Oc,[!0,!1,Oc]),invisibleCharacters:$e(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:$e(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Gv(t.includeComments,Oc,[!0,!1,Oc]),includeStrings:Gv(t.includeStrings,Oc,[!0,!1,Oc]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const n={};for(const[s,r]of Object.entries(e))r===!0&&(n[s]=!0);return n}}class S8e extends fi{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:S("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[S("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),S("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),S("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:S("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:S("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:S("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),mode:xi(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:xi(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:$e(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:$e(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:eo.string(t.fontFamily,this.defaultValue.fontFamily)}}}class k8e extends fi{constructor(){const e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(63,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:S("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[S("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),S("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),S("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:S("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:S("inlineEdit.fontFamily","Controls the font family of the inline edit.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),showToolbar:xi(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:eo.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:$e(t.keepOnBlur,this.defaultValue.keepOnBlur)}}}class x8e extends fi{constructor(){const e={enabled:Ir.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Ir.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:S("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:S("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:$e(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class E8e extends fi{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[S("editor.guides.bracketPairs.true","Enables bracket pair guides."),S("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),S("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:S("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[S("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),S("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),S("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:S("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:S("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:S("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[S("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),S("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),S("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:S("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:Gv(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Gv(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:$e(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:$e(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Gv(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function Gv(i,e,t){const n=t.indexOf(i);return n===-1?e:t[n]}class T8e extends fi{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(119,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[S("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),S("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:S("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:S("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:S("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:S("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[S("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),S("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),S("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),S("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:S("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:S("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:S("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:S("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:S("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:S("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:S("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:S("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:S("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:xi(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:$e(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:$e(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:$e(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:$e(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:xi(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:$e(t.showIcons,this.defaultValue.showIcons),showStatusBar:$e(t.showStatusBar,this.defaultValue.showStatusBar),preview:$e(t.preview,this.defaultValue.preview),previewMode:xi(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:$e(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:$e(t.showMethods,this.defaultValue.showMethods),showFunctions:$e(t.showFunctions,this.defaultValue.showFunctions),showConstructors:$e(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:$e(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:$e(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:$e(t.showFields,this.defaultValue.showFields),showVariables:$e(t.showVariables,this.defaultValue.showVariables),showClasses:$e(t.showClasses,this.defaultValue.showClasses),showStructs:$e(t.showStructs,this.defaultValue.showStructs),showInterfaces:$e(t.showInterfaces,this.defaultValue.showInterfaces),showModules:$e(t.showModules,this.defaultValue.showModules),showProperties:$e(t.showProperties,this.defaultValue.showProperties),showEvents:$e(t.showEvents,this.defaultValue.showEvents),showOperators:$e(t.showOperators,this.defaultValue.showOperators),showUnits:$e(t.showUnits,this.defaultValue.showUnits),showValues:$e(t.showValues,this.defaultValue.showValues),showConstants:$e(t.showConstants,this.defaultValue.showConstants),showEnums:$e(t.showEnums,this.defaultValue.showEnums),showEnumMembers:$e(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:$e(t.showKeywords,this.defaultValue.showKeywords),showWords:$e(t.showWords,this.defaultValue.showWords),showColors:$e(t.showColors,this.defaultValue.showColors),showFiles:$e(t.showFiles,this.defaultValue.showFiles),showReferences:$e(t.showReferences,this.defaultValue.showReferences),showFolders:$e(t.showFolders,this.defaultValue.showFolders),showTypeParameters:$e(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:$e(t.showSnippets,this.defaultValue.showSnippets),showUsers:$e(t.showUsers,this.defaultValue.showUsers),showIssues:$e(t.showIssues,this.defaultValue.showIssues)}}}class L8e extends fi{constructor(){super(114,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:S("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:S("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:$e(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:$e(e.selectSubwords,this.defaultValue.selectSubwords)}}}class I8e extends fi{constructor(){const e=[];super(131,"wordSegmenterLocales",e,{anyOf:[{description:S("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:S("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const n of e)if(typeof n=="string")try{Intl.Segmenter.supportedLocalesOf(n).length>0&&t.push(n)}catch{}return t}return this.defaultValue}}class D8e extends fi{constructor(){super(139,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[S("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),S("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),S("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),S("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:S("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,n){return t.get(2)===2?0:n}}class N8e extends R2{constructor(){super(147)}compute(e,t,n){const s=t.get(146);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:s.isWordWrapMinified,isViewportWrapping:s.isViewportWrapping,wrappingColumn:s.wrappingColumn}}}class R8e extends fi{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:S("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:S("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[S("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),S("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),showDropSelector:xi(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}class A8e extends fi{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(85,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:S("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:S("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[S("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),S("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:$e(t.enabled,this.defaultValue.enabled),showPasteSelector:xi(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}const P8e="Consolas, 'Courier New', monospace",M8e="Menlo, Monaco, 'Courier New', monospace",O8e="'Droid Sans Mono', 'monospace', monospace",il={fontFamily:rn?M8e:ia?O8e:P8e,fontWeight:"normal",fontSize:rn?12:14,lineHeight:0,letterSpacing:0},Z_=[];function we(i){return Z_[i.id]=i,i}const C1={acceptSuggestionOnCommitCharacter:we(new Qt(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:S("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:we(new Si(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",S("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:S("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:we(new G9e),accessibilityPageSize:we(new Wn(3,"accessibilityPageSize",10,1,1073741824,{description:S("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:we(new eo(4,"ariaLabel",S("editorViewAccessibleLabel","Editor content"))),ariaRequired:we(new Qt(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:we(new Qt(8,"screenReaderAnnounceInlineSuggestion",!0,{description:S("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:we(new Si(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",S("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),S("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:S("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:we(new Si(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",S("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),S("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:S("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:we(new Si(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",S("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:S("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:we(new Si(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",S("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:S("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:we(new Si(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",S("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),S("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:S("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:we(new ME(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],K9e,{enumDescriptions:[S("editor.autoIndent.none","The editor will not insert indentation automatically."),S("editor.autoIndent.keep","The editor will keep the current line's indentation."),S("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),S("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),S("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:S("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:we(new Qt(13,"automaticLayout",!1)),autoSurround:we(new Si(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[S("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),S("editor.autoSurround.quotes","Surround with quotes but not brackets."),S("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:S("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:we(new x8e),bracketPairGuides:we(new E8e),stickyTabStops:we(new Qt(117,"stickyTabStops",!1,{description:S("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:we(new Qt(17,"codeLens",!0,{description:S("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:we(new eo(18,"codeLensFontFamily","",{description:S("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:we(new Wn(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:S("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:we(new Qt(20,"colorDecorators",!0,{description:S("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:we(new Si(149,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[S("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),S("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),S("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:S("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:we(new Wn(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:S("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:we(new Qt(22,"columnSelection",!1,{description:S("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:we(new Y9e),contextmenu:we(new Qt(24,"contextmenu",!0)),copyWithSyntaxHighlighting:we(new Qt(25,"copyWithSyntaxHighlighting",!0,{description:S("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:we(new ME(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],Q9e,{description:S("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:we(new Si(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[S("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),S("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),S("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:S("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:we(new ME(28,"cursorStyle",Ys.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],X9e,{description:S("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:we(new Wn(29,"cursorSurroundingLines",0,0,1073741824,{description:S("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:we(new Si(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[S("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),S("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:S("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:we(new Wn(31,"cursorWidth",0,0,1073741824,{markdownDescription:S("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:we(new Qt(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:we(new Qt(33,"disableMonospaceOptimizations",!1)),domReadOnly:we(new Qt(34,"domReadOnly",!1)),dragAndDrop:we(new Qt(35,"dragAndDrop",!0,{description:S("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:we(new J9e),dropIntoEditor:we(new R8e),stickyScroll:we(new a8e),experimentalWhitespaceRendering:we(new Si(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[S("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),S("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),S("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:S("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:we(new eo(39,"extraEditorClassName","")),fastScrollSensitivity:we(new Ya(40,"fastScrollSensitivity",5,i=>i<=0?5:i,{markdownDescription:S("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:we(new e8e),fixedOverflowWidgets:we(new Qt(42,"fixedOverflowWidgets",!1)),folding:we(new Qt(43,"folding",!0,{description:S("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:we(new Si(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[S("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),S("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:S("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:we(new Qt(45,"foldingHighlight",!0,{description:S("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:we(new Qt(46,"foldingImportsByDefault",!1,{description:S("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:we(new Wn(47,"foldingMaximumRegions",5e3,10,65e3,{description:S("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:we(new Qt(48,"unfoldOnClickAfterEndOfLine",!1,{description:S("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:we(new eo(49,"fontFamily",il.fontFamily,{description:S("fontFamily","Controls the font family.")})),fontInfo:we(new t8e),fontLigatures2:we(new Z0),fontSize:we(new n8e),fontWeight:we(new U3),fontVariations:we(new pk),formatOnPaste:we(new Qt(55,"formatOnPaste",!1,{description:S("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:we(new Qt(56,"formatOnType",!1,{description:S("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:we(new Qt(57,"glyphMargin",!0,{description:S("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:we(new i8e),hideCursorInOverviewRuler:we(new Qt(59,"hideCursorInOverviewRuler",!1,{description:S("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:we(new s8e),inDiffEditor:we(new Qt(61,"inDiffEditor",!1)),letterSpacing:we(new Ya(64,"letterSpacing",il.letterSpacing,i=>Ya.clamp(i,-5,20),{description:S("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:we(new o8e),lineDecorationsWidth:we(new c8e),lineHeight:we(new u8e),lineNumbers:we(new v8e),lineNumbersMinChars:we(new Wn(69,"lineNumbersMinChars",5,1,300)),linkedEditing:we(new Qt(70,"linkedEditing",!1,{description:S("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:we(new Qt(71,"links",!0,{description:S("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:we(new Si(72,"matchBrackets","always",["always","near","never"],{description:S("matchBrackets","Highlight matching brackets.")})),minimap:we(new d8e),mouseStyle:we(new Si(74,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:we(new Ya(75,"mouseWheelScrollSensitivity",1,i=>i===0?1:i,{markdownDescription:S("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:we(new Qt(76,"mouseWheelZoom",!1,{markdownDescription:rn?S("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):S("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:we(new Qt(77,"multiCursorMergeOverlapping",!0,{description:S("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:we(new ME(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],h8e,{markdownEnumDescriptions:[S("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),S("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:S({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:we(new Si(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[S("multiCursorPaste.spread","Each cursor pastes a single line of the text."),S("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:S("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:we(new Wn(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:S("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:we(new Si(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[S("occurrencesHighlight.off","Does not highlight occurrences."),S("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),S("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:S("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:we(new Qt(82,"overviewRulerBorder",!0,{description:S("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:we(new Wn(83,"overviewRulerLanes",3,0,3)),padding:we(new f8e),pasteAs:we(new A8e),parameterHints:we(new g8e),peekWidgetDefaultFocus:we(new Si(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[S("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),S("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:S("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:we(new p8e),definitionLinkOpensInPeek:we(new Qt(89,"definitionLinkOpensInPeek",!1,{description:S("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:we(new _8e),quickSuggestionsDelay:we(new Wn(91,"quickSuggestionsDelay",10,0,1073741824,{description:S("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:we(new Qt(92,"readOnly",!1)),readOnlyMessage:we(new y8e),renameOnType:we(new Qt(94,"renameOnType",!1,{description:S("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:S("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:we(new Qt(95,"renderControlCharacters",!0,{description:S("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:we(new Si(96,"renderFinalNewline",ia?"dimmed":"on",["off","on","dimmed"],{description:S("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:we(new Si(97,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",S("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:S("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:we(new Qt(98,"renderLineHighlightOnlyWhenFocus",!1,{description:S("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:we(new Si(99,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:we(new Si(100,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",S("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),S("renderWhitespace.selection","Render whitespace characters only on selected text."),S("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:S("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:we(new Wn(101,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:we(new Qt(102,"roundedSelection",!0,{description:S("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:we(new b8e),scrollbar:we(new w8e),scrollBeyondLastColumn:we(new Wn(105,"scrollBeyondLastColumn",4,0,1073741824,{description:S("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:we(new Qt(106,"scrollBeyondLastLine",!0,{description:S("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:we(new Qt(107,"scrollPredominantAxis",!0,{description:S("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:we(new Qt(108,"selectionClipboard",!0,{description:S("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:ia})),selectionHighlight:we(new Qt(109,"selectionHighlight",!0,{description:S("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:we(new Qt(110,"selectOnLineNumbers",!0)),showFoldingControls:we(new Si(111,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[S("showFoldingControls.always","Always show the folding controls."),S("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),S("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:S("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:we(new Qt(112,"showUnused",!0,{description:S("showUnused","Controls fading out of unused code.")})),showDeprecated:we(new Qt(141,"showDeprecated",!0,{description:S("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:we(new l8e),snippetSuggestions:we(new Si(113,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[S("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),S("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),S("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),S("snippetSuggestions.none","Do not show snippet suggestions.")],description:S("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:we(new L8e),smoothScrolling:we(new Qt(115,"smoothScrolling",!1,{description:S("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:we(new Wn(118,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:we(new T8e),inlineSuggest:we(new S8e),inlineEdit:we(new k8e),inlineCompletionsAccessibilityVerbose:we(new Qt(150,"inlineCompletionsAccessibilityVerbose",!1,{description:S("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:we(new Wn(120,"suggestFontSize",0,0,1e3,{markdownDescription:S("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:we(new Wn(121,"suggestLineHeight",0,0,1e3,{markdownDescription:S("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:we(new Qt(122,"suggestOnTriggerCharacters",!0,{description:S("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:we(new Si(123,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[S("suggestSelection.first","Always select the first suggestion."),S("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),S("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:S("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:we(new Si(124,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[S("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),S("tabCompletion.off","Disable tab completions."),S("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:S("tabCompletion","Enables tab completions.")})),tabIndex:we(new Wn(125,"tabIndex",0,-1,1073741824)),unicodeHighlight:we(new C8e),unusualLineTerminators:we(new Si(127,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[S("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),S("unusualLineTerminators.off","Unusual line terminators are ignored."),S("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:S("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:we(new Qt(128,"useShadowDOM",!0)),useTabStops:we(new Qt(129,"useTabStops",!0,{description:S("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:we(new Si(130,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[S("wordBreak.normal","Use the default line break rule."),S("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:S("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:we(new I8e),wordSeparators:we(new eo(132,"wordSeparators",Ode,{description:S("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:we(new Si(133,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[S("wordWrap.off","Lines will never wrap."),S("wordWrap.on","Lines will wrap at the viewport width."),S({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),S({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:S({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:we(new eo(134,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;")),wordWrapBreakBeforeCharacters:we(new eo(135,"wordWrapBreakBeforeCharacters","([{+")),wordWrapColumn:we(new Wn(136,"wordWrapColumn",80,1,1073741824,{markdownDescription:S({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:we(new Si(137,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:we(new Si(138,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:we(new Z9e),defaultColorDecorators:we(new Qt(148,"defaultColorDecorators",!1,{markdownDescription:S("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:we(new m8e),tabFocusMode:we(new Qt(145,"tabFocusMode",!1,{markdownDescription:S("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:we(new Kv),wrappingInfo:we(new N8e),wrappingIndent:we(new D8e),wrappingStrategy:we(new r8e)};class F8e{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?zb.isErrorNoTelemetry(e)?new zb(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const Wde=new F8e;function Un(i){A2(i)||Wde.onUnexpectedError(i)}function EH(i){A2(i)||Wde.onUnexpectedExternalError(i)}function RQ(i){if(i instanceof Error){const{name:e,message:t}=i,n=i.stacktrace||i.stack;return{$isError:!0,name:e,message:t,stack:n,noTelemetry:zb.isErrorNoTelemetry(i)}}return i}const UI="Canceled";function A2(i){return i instanceof P2?!0:i instanceof Error&&i.name===UI&&i.message===UI}class P2 extends Error{constructor(){super(UI),this.name=this.message}}function B8e(){const i=new Error(UI);return i.name=i.message,i}function V4(i){return i?new Error(`Illegal argument: ${i}`):new Error("Illegal argument")}function TH(i){return i?new Error(`Illegal state: ${i}`):new Error("Illegal state")}class V8e extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class zb extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof zb)return e;const t=new zb;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}}class Dn extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,Dn.prototype)}}function jb(i,e){const t=this;let n=!1,s;return function(){return n||(n=!0,s=i.apply(t,arguments)),s}}function Hde(i){return typeof i=="object"&&i!==null&&typeof i.dispose=="function"&&i.dispose.length===0}function br(i){if(yn.is(i)){const e=[];for(const t of i)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(i)?[]:i}else if(i)return i.dispose(),i}function Cd(...i){return Dt(()=>br(i))}function Dt(i){return{dispose:jb(()=>{i()})}}const ON=class ON{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{br(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?ON.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}deleteAndLeak(e){e&&this._toDispose.has(e)&&this._toDispose.delete(e)}};ON.DISABLE_DISPOSED_WARNING=!1;let Ze=ON;const mj=class mj{constructor(){this._store=new Ze,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};mj.None=Object.freeze({dispose(){}});let be=mj;class yf{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)==null||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)==null||e.dispose(),this._value=void 0}}class W8e{constructor(e){this.object=e}dispose(){}}class LH{constructor(){this._store=new Map,this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{br(this._store.values())}finally{this._store.clear()}}get(e){return this._store.get(e)}set(e,t,n=!1){var s;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||(s=this._store.get(e))==null||s.dispose(),this._store.set(e,t)}deleteAndDispose(e){var t;(t=this._store.get(e))==null||t.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}const H8e=globalThis.performance&&typeof globalThis.performance.now=="function";class S1{static create(e){return new S1(e)}constructor(e){this._now=H8e&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}var Le;(function(i){i.None=()=>be.None;function e(W,G){return h(W,()=>{},0,void 0,!0,void 0,G)}i.defer=e;function t(W){return(G,Z=null,ne)=>{let fe=!1,te;return te=W(ce=>{if(!fe)return te?te.dispose():fe=!0,G.call(Z,ce)},null,ne),fe&&te.dispose(),te}}i.once=t;function n(W,G){return i.once(i.filter(W,G))}i.onceIf=n;function s(W,G,Z){return u((ne,fe=null,te)=>W(ce=>ne.call(fe,G(ce)),null,te),Z)}i.map=s;function r(W,G,Z){return u((ne,fe=null,te)=>W(ce=>{G(ce),ne.call(fe,ce)},null,te),Z)}i.forEach=r;function o(W,G,Z){return u((ne,fe=null,te)=>W(ce=>G(ce)&&ne.call(fe,ce),null,te),Z)}i.filter=o;function a(W){return W}i.signal=a;function l(...W){return(G,Z=null,ne)=>{const fe=Cd(...W.map(te=>te(ce=>G.call(Z,ce))));return d(fe,ne)}}i.any=l;function c(W,G,Z,ne){let fe=Z;return s(W,te=>(fe=G(fe,te),fe),ne)}i.reduce=c;function u(W,G){let Z;const ne={onWillAddFirstListener(){Z=W(fe.fire,fe)},onDidRemoveLastListener(){Z==null||Z.dispose()}},fe=new se(ne);return G==null||G.add(fe),fe.event}function d(W,G){return G instanceof Array?G.push(W):G&&G.add(W),W}function h(W,G,Z=100,ne=!1,fe=!1,te,ce){let ve,X,oe,Ne=0,Ie;const Oe={leakWarningThreshold:te,onWillAddFirstListener(){ve=W(We=>{Ne++,X=G(X,We),ne&&!oe&&(it.fire(X),X=void 0),Ie=()=>{const at=X;X=void 0,oe=void 0,(!ne||Ne>1)&&it.fire(at),Ne=0},typeof Z=="number"?(clearTimeout(oe),oe=setTimeout(Ie,Z)):oe===void 0&&(oe=0,queueMicrotask(Ie))})},onWillRemoveListener(){fe&&Ne>0&&(Ie==null||Ie())},onDidRemoveLastListener(){Ie=void 0,ve.dispose()}},it=new se(Oe);return ce==null||ce.add(it),it.event}i.debounce=h;function g(W,G=0,Z){return i.debounce(W,(ne,fe)=>ne?(ne.push(fe),ne):[fe],G,void 0,!0,void 0,Z)}i.accumulate=g;function p(W,G=(ne,fe)=>ne===fe,Z){let ne=!0,fe;return o(W,te=>{const ce=ne||!G(te,fe);return ne=!1,fe=te,ce},Z)}i.latch=p;function _(W,G,Z){return[i.filter(W,G,Z),i.filter(W,ne=>!G(ne),Z)]}i.split=_;function v(W,G=!1,Z=[],ne){let fe=Z.slice(),te=W(X=>{fe?fe.push(X):ve.fire(X)});ne&&ne.add(te);const ce=()=>{fe==null||fe.forEach(X=>ve.fire(X)),fe=null},ve=new se({onWillAddFirstListener(){te||(te=W(X=>ve.fire(X)),ne&&ne.add(te))},onDidAddFirstListener(){fe&&(G?setTimeout(ce):ce())},onDidRemoveLastListener(){te&&te.dispose(),te=null}});return ne&&ne.add(ve),ve.event}i.buffer=v;function y(W,G){return(ne,fe,te)=>{const ce=G(new x);return W(function(ve){const X=ce.evaluate(ve);X!==w&&ne.call(fe,X)},void 0,te)}}i.chain=y;const w=Symbol("HaltChainable");class x{constructor(){this.steps=[]}map(G){return this.steps.push(G),this}forEach(G){return this.steps.push(Z=>(G(Z),Z)),this}filter(G){return this.steps.push(Z=>G(Z)?Z:w),this}reduce(G,Z){let ne=Z;return this.steps.push(fe=>(ne=G(ne,fe),ne)),this}latch(G=(Z,ne)=>Z===ne){let Z=!0,ne;return this.steps.push(fe=>{const te=Z||!G(fe,ne);return Z=!1,ne=fe,te?fe:w}),this}evaluate(G){for(const Z of this.steps)if(G=Z(G),G===w)break;return G}}function k(W,G,Z=ne=>ne){const ne=(...ve)=>ce.fire(Z(...ve)),fe=()=>W.on(G,ne),te=()=>W.removeListener(G,ne),ce=new se({onWillAddFirstListener:fe,onDidRemoveLastListener:te});return ce.event}i.fromNodeEventEmitter=k;function T(W,G,Z=ne=>ne){const ne=(...ve)=>ce.fire(Z(...ve)),fe=()=>W.addEventListener(G,ne),te=()=>W.removeEventListener(G,ne),ce=new se({onWillAddFirstListener:fe,onDidRemoveLastListener:te});return ce.event}i.fromDOMEventEmitter=T;function R(W){return new Promise(G=>t(W)(G))}i.toPromise=R;function L(W){const G=new se;return W.then(Z=>{G.fire(Z)},()=>{G.fire(void 0)}).finally(()=>{G.dispose()}),G.event}i.fromPromise=L;function I(W,G){return W(Z=>G.fire(Z))}i.forward=I;function A(W,G,Z){return G(Z),W(ne=>G(ne))}i.runAndSubscribe=A;class B{constructor(G,Z){this._observable=G,this._counter=0,this._hasChanged=!1;const ne={onWillAddFirstListener:()=>{G.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{G.removeObserver(this)}};this.emitter=new se(ne),Z&&Z.add(this.emitter)}beginUpdate(G){this._counter++}handlePossibleChange(G){}handleChange(G,Z){this._hasChanged=!0}endUpdate(G){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function V(W,G){return new B(W,G).emitter.event}i.fromObservable=V;function U(W){return(G,Z,ne)=>{let fe=0,te=!1;const ce={beginUpdate(){fe++},endUpdate(){fe--,fe===0&&(W.reportChanges(),te&&(te=!1,G.call(Z)))},handlePossibleChange(){},handleChange(){te=!0}};W.addObserver(ce),W.reportChanges();const ve={dispose(){W.removeObserver(ce)}};return ne instanceof Ze?ne.add(ve):Array.isArray(ne)&&ne.push(ve),ve}}i.fromObservableLight=U})(Le||(Le={}));const wv=class wv{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${wv._idPool++}`,wv.all.add(this)}start(e){this._stopWatch=new S1,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};wv.all=new Set,wv._idPool=0;let z3=wv,U8e=-1;const FN=class FN{constructor(e,t,n=(FN._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=t,this.name=n,this._warnCountdown=0}dispose(){var e;(e=this._stacks)==null||e.clear()}check(e,t){const n=this.threshold;if(n<=0||t<n)return;this._stacks||(this._stacks=new Map);const s=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,s+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;const[r,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(r);const l=new z8e(a,r);this._errorHandler(l)}return()=>{const r=this._stacks.get(e.value)||0;this._stacks.set(e.value,r-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(const[n,s]of this._stacks)(!e||t<s)&&(e=[n,s],t=s);return e}};FN._idPool=1;let j3=FN;class IH{static create(){const e=new Error;return new IH(e.stack??"")}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class z8e extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}}class j8e extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}}class wO{constructor(e){this.value=e}}const $8e=2;class se{constructor(e){var t,n,s,r;this._size=0,this._options=e,this._leakageMon=(t=this._options)!=null&&t.leakWarningThreshold?new j3((e==null?void 0:e.onListenerError)??Un,((n=this._options)==null?void 0:n.leakWarningThreshold)??U8e):void 0,this._perfMon=(s=this._options)!=null&&s._profName?new z3(this._options._profName):void 0,this._deliveryQueue=(r=this._options)==null?void 0:r.deliveryQueue}dispose(){var e,t,n,s;this._disposed||(this._disposed=!0,((e=this._deliveryQueue)==null?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(n=(t=this._options)==null?void 0:t.onDidRemoveLastListener)==null||n.call(t),(s=this._leakageMon)==null||s.dispose())}get event(){return this._event??(this._event=(e,t,n)=>{var a,l,c,u,d;if(this._leakageMon&&this._size>this._leakageMon.threshold**2){const h=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(h);const g=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],p=new j8e(`${h}. HINT: Stack shows most frequent listener (${g[1]}-times)`,g[0]);return(((a=this._options)==null?void 0:a.onListenerError)||Un)(p),be.None}if(this._disposed)return be.None;t&&(e=e.bind(t));const s=new wO(e);let r;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(s.stack=IH.create(),r=this._leakageMon.check(s.stack,this._size+1)),this._listeners?this._listeners instanceof wO?(this._deliveryQueue??(this._deliveryQueue=new Ude),this._listeners=[this._listeners,s]):this._listeners.push(s):((c=(l=this._options)==null?void 0:l.onWillAddFirstListener)==null||c.call(l,this),this._listeners=s,(d=(u=this._options)==null?void 0:u.onDidAddFirstListener)==null||d.call(u,this)),this._size++;const o=Dt(()=>{r==null||r(),this._removeListener(s)});return n instanceof Ze?n.add(o):Array.isArray(n)&&n.push(o),o}),this._event}_removeListener(e){var r,o,a,l;if((o=(r=this._options)==null?void 0:r.onWillRemoveListener)==null||o.call(r,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(l=(a=this._options)==null?void 0:a.onDidRemoveLastListener)==null||l.call(a,this),this._size=0;return}const t=this._listeners,n=t.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[n]=void 0;const s=this._deliveryQueue.current===this;if(this._size*$8e<=t.length){let c=0;for(let u=0;u<t.length;u++)t[u]?t[c++]=t[u]:s&&(this._deliveryQueue.end--,c<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=c}}_deliver(e,t){var s;if(!e)return;const n=((s=this._options)==null?void 0:s.onListenerError)||Un;if(!n){e.value(t);return}try{e.value(t)}catch(r){n(r)}}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,n,s,r;if((t=this._deliveryQueue)!=null&&t.current&&(this._deliverQueue(this._deliveryQueue),(n=this._perfMon)==null||n.stop()),(s=this._perfMon)==null||s.start(this._size),this._listeners)if(this._listeners instanceof wO)this._deliver(this._listeners,e);else{const o=this._deliveryQueue;o.enqueue(this,e,this._listeners.length),this._deliverQueue(o)}(r=this._perfMon)==null||r.stop()}hasListeners(){return this._size>0}}const q8e=()=>new Ude;class Ude{constructor(){this.i=-1,this.end=0}enqueue(e,t,n){this.i=0,this.end=n,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class _k extends se{constructor(e){super(e),this._isPaused=0,this._eventQueue=new ba,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class zde extends _k{constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class K8e extends se{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e==null?void 0:e.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}}class G8e{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new se({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),Dt(jb(()=>{this.hasListeners&&this.unhook(t);const s=this.events.indexOf(t);this.events.splice(s,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){var t;(t=e.listener)==null||t.dispose(),e.listener=null}dispose(){var e;this.emitter.dispose();for(const t of this.events)(e=t.listener)==null||e.dispose();this.events=[]}}class M2{constructor(){this.data=[]}wrapEvent(e,t,n){return(s,r,o)=>e(a=>{const l=this.data[this.data.length-1];if(!t){l?l.buffers.push(()=>s.call(r,a)):s.call(r,a);return}const c=l;if(!c){s.call(r,t(n,a));return}c.items??(c.items=[]),c.items.push(a),c.buffers.length===0&&l.buffers.push(()=>{c.reducedResult??(c.reducedResult=n?c.items.reduce(t,n):c.items.reduce(t)),s.call(r,c.reducedResult)})},void 0,o)}bufferEvents(e){const t={buffers:new Array};this.data.push(t);const n=e();return this.data.pop(),t.buffers.forEach(s=>s()),n}}class AQ{constructor(){this.listening=!1,this.inputEvent=Le.None,this.inputEventListener=be.None,this.emitter=new se({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const jde=Object.freeze(function(i,e){const t=setTimeout(i.bind(e),0);return{dispose(){clearTimeout(t)}}});var _c;(function(i){function e(t){return t===i.None||t===i.Cancelled||t instanceof tL?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}i.isCancellationToken=e,i.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Le.None}),i.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:jde})})(_c||(_c={}));class tL{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?jde:(this._emitter||(this._emitter=new se),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class Wy{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new tL),this._token}cancel(){this._token?this._token instanceof tL&&this._token.cancel():this._token=_c.Cancelled}dispose(e=!1){var t;e&&this.cancel(),(t=this._parentListener)==null||t.dispose(),this._token?this._token instanceof tL&&this._token.dispose():this._token=_c.None}}class DH{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const nL=new DH,$3=new DH,q3=new DH,$de=new Array(230),Y8e=Object.create(null),Q8e=Object.create(null),NH=[];for(let i=0;i<=193;i++)NH[i]=-1;(function(){const i="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",i,i],[1,1,"Hyper",0,i,0,i,i,i],[1,2,"Super",0,i,0,i,i,i],[1,3,"Fn",0,i,0,i,i,i],[1,4,"FnLock",0,i,0,i,i,i],[1,5,"Suspend",0,i,0,i,i,i],[1,6,"Resume",0,i,0,i,i,i],[1,7,"Turbo",0,i,0,i,i,i],[1,8,"Sleep",0,i,0,"VK_SLEEP",i,i],[1,9,"WakeUp",0,i,0,i,i,i],[0,10,"KeyA",31,"A",65,"VK_A",i,i],[0,11,"KeyB",32,"B",66,"VK_B",i,i],[0,12,"KeyC",33,"C",67,"VK_C",i,i],[0,13,"KeyD",34,"D",68,"VK_D",i,i],[0,14,"KeyE",35,"E",69,"VK_E",i,i],[0,15,"KeyF",36,"F",70,"VK_F",i,i],[0,16,"KeyG",37,"G",71,"VK_G",i,i],[0,17,"KeyH",38,"H",72,"VK_H",i,i],[0,18,"KeyI",39,"I",73,"VK_I",i,i],[0,19,"KeyJ",40,"J",74,"VK_J",i,i],[0,20,"KeyK",41,"K",75,"VK_K",i,i],[0,21,"KeyL",42,"L",76,"VK_L",i,i],[0,22,"KeyM",43,"M",77,"VK_M",i,i],[0,23,"KeyN",44,"N",78,"VK_N",i,i],[0,24,"KeyO",45,"O",79,"VK_O",i,i],[0,25,"KeyP",46,"P",80,"VK_P",i,i],[0,26,"KeyQ",47,"Q",81,"VK_Q",i,i],[0,27,"KeyR",48,"R",82,"VK_R",i,i],[0,28,"KeyS",49,"S",83,"VK_S",i,i],[0,29,"KeyT",50,"T",84,"VK_T",i,i],[0,30,"KeyU",51,"U",85,"VK_U",i,i],[0,31,"KeyV",52,"V",86,"VK_V",i,i],[0,32,"KeyW",53,"W",87,"VK_W",i,i],[0,33,"KeyX",54,"X",88,"VK_X",i,i],[0,34,"KeyY",55,"Y",89,"VK_Y",i,i],[0,35,"KeyZ",56,"Z",90,"VK_Z",i,i],[0,36,"Digit1",22,"1",49,"VK_1",i,i],[0,37,"Digit2",23,"2",50,"VK_2",i,i],[0,38,"Digit3",24,"3",51,"VK_3",i,i],[0,39,"Digit4",25,"4",52,"VK_4",i,i],[0,40,"Digit5",26,"5",53,"VK_5",i,i],[0,41,"Digit6",27,"6",54,"VK_6",i,i],[0,42,"Digit7",28,"7",55,"VK_7",i,i],[0,43,"Digit8",29,"8",56,"VK_8",i,i],[0,44,"Digit9",30,"9",57,"VK_9",i,i],[0,45,"Digit0",21,"0",48,"VK_0",i,i],[1,46,"Enter",3,"Enter",13,"VK_RETURN",i,i],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",i,i],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",i,i],[1,49,"Tab",2,"Tab",9,"VK_TAB",i,i],[1,50,"Space",10,"Space",32,"VK_SPACE",i,i],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,i,0,i,i,i],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",i,i],[1,64,"F1",59,"F1",112,"VK_F1",i,i],[1,65,"F2",60,"F2",113,"VK_F2",i,i],[1,66,"F3",61,"F3",114,"VK_F3",i,i],[1,67,"F4",62,"F4",115,"VK_F4",i,i],[1,68,"F5",63,"F5",116,"VK_F5",i,i],[1,69,"F6",64,"F6",117,"VK_F6",i,i],[1,70,"F7",65,"F7",118,"VK_F7",i,i],[1,71,"F8",66,"F8",119,"VK_F8",i,i],[1,72,"F9",67,"F9",120,"VK_F9",i,i],[1,73,"F10",68,"F10",121,"VK_F10",i,i],[1,74,"F11",69,"F11",122,"VK_F11",i,i],[1,75,"F12",70,"F12",123,"VK_F12",i,i],[1,76,"PrintScreen",0,i,0,i,i,i],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",i,i],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",i,i],[1,79,"Insert",19,"Insert",45,"VK_INSERT",i,i],[1,80,"Home",14,"Home",36,"VK_HOME",i,i],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",i,i],[1,82,"Delete",20,"Delete",46,"VK_DELETE",i,i],[1,83,"End",13,"End",35,"VK_END",i,i],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",i,i],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",i],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",i],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",i],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",i],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",i,i],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",i,i],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",i,i],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",i,i],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",i,i],[1,94,"NumpadEnter",3,i,0,i,i,i],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",i,i],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",i,i],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",i,i],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",i,i],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",i,i],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",i,i],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",i,i],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",i,i],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",i,i],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",i,i],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",i,i],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",i,i],[1,107,"ContextMenu",58,"ContextMenu",93,i,i,i],[1,108,"Power",0,i,0,i,i,i],[1,109,"NumpadEqual",0,i,0,i,i,i],[1,110,"F13",71,"F13",124,"VK_F13",i,i],[1,111,"F14",72,"F14",125,"VK_F14",i,i],[1,112,"F15",73,"F15",126,"VK_F15",i,i],[1,113,"F16",74,"F16",127,"VK_F16",i,i],[1,114,"F17",75,"F17",128,"VK_F17",i,i],[1,115,"F18",76,"F18",129,"VK_F18",i,i],[1,116,"F19",77,"F19",130,"VK_F19",i,i],[1,117,"F20",78,"F20",131,"VK_F20",i,i],[1,118,"F21",79,"F21",132,"VK_F21",i,i],[1,119,"F22",80,"F22",133,"VK_F22",i,i],[1,120,"F23",81,"F23",134,"VK_F23",i,i],[1,121,"F24",82,"F24",135,"VK_F24",i,i],[1,122,"Open",0,i,0,i,i,i],[1,123,"Help",0,i,0,i,i,i],[1,124,"Select",0,i,0,i,i,i],[1,125,"Again",0,i,0,i,i,i],[1,126,"Undo",0,i,0,i,i,i],[1,127,"Cut",0,i,0,i,i,i],[1,128,"Copy",0,i,0,i,i,i],[1,129,"Paste",0,i,0,i,i,i],[1,130,"Find",0,i,0,i,i,i],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",i,i],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",i,i],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",i,i],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",i,i],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",i,i],[1,136,"KanaMode",0,i,0,i,i,i],[0,137,"IntlYen",0,i,0,i,i,i],[1,138,"Convert",0,i,0,i,i,i],[1,139,"NonConvert",0,i,0,i,i,i],[1,140,"Lang1",0,i,0,i,i,i],[1,141,"Lang2",0,i,0,i,i,i],[1,142,"Lang3",0,i,0,i,i,i],[1,143,"Lang4",0,i,0,i,i,i],[1,144,"Lang5",0,i,0,i,i,i],[1,145,"Abort",0,i,0,i,i,i],[1,146,"Props",0,i,0,i,i,i],[1,147,"NumpadParenLeft",0,i,0,i,i,i],[1,148,"NumpadParenRight",0,i,0,i,i,i],[1,149,"NumpadBackspace",0,i,0,i,i,i],[1,150,"NumpadMemoryStore",0,i,0,i,i,i],[1,151,"NumpadMemoryRecall",0,i,0,i,i,i],[1,152,"NumpadMemoryClear",0,i,0,i,i,i],[1,153,"NumpadMemoryAdd",0,i,0,i,i,i],[1,154,"NumpadMemorySubtract",0,i,0,i,i,i],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",i,i],[1,156,"NumpadClearEntry",0,i,0,i,i,i],[1,0,i,5,"Ctrl",17,"VK_CONTROL",i,i],[1,0,i,4,"Shift",16,"VK_SHIFT",i,i],[1,0,i,6,"Alt",18,"VK_MENU",i,i],[1,0,i,57,"Meta",91,"VK_COMMAND",i,i],[1,157,"ControlLeft",5,i,0,"VK_LCONTROL",i,i],[1,158,"ShiftLeft",4,i,0,"VK_LSHIFT",i,i],[1,159,"AltLeft",6,i,0,"VK_LMENU",i,i],[1,160,"MetaLeft",57,i,0,"VK_LWIN",i,i],[1,161,"ControlRight",5,i,0,"VK_RCONTROL",i,i],[1,162,"ShiftRight",4,i,0,"VK_RSHIFT",i,i],[1,163,"AltRight",6,i,0,"VK_RMENU",i,i],[1,164,"MetaRight",57,i,0,"VK_RWIN",i,i],[1,165,"BrightnessUp",0,i,0,i,i,i],[1,166,"BrightnessDown",0,i,0,i,i,i],[1,167,"MediaPlay",0,i,0,i,i,i],[1,168,"MediaRecord",0,i,0,i,i,i],[1,169,"MediaFastForward",0,i,0,i,i,i],[1,170,"MediaRewind",0,i,0,i,i,i],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",i,i],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",i,i],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",i,i],[1,174,"Eject",0,i,0,i,i,i],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",i,i],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",i,i],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",i,i],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",i,i],[1,179,"LaunchApp1",0,i,0,"VK_MEDIA_LAUNCH_APP1",i,i],[1,180,"SelectTask",0,i,0,i,i,i],[1,181,"LaunchScreenSaver",0,i,0,i,i,i],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",i,i],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",i,i],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",i,i],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",i,i],[1,186,"BrowserStop",0,i,0,"VK_BROWSER_STOP",i,i],[1,187,"BrowserRefresh",0,i,0,"VK_BROWSER_REFRESH",i,i],[1,188,"BrowserFavorites",0,i,0,"VK_BROWSER_FAVORITES",i,i],[1,189,"ZoomToggle",0,i,0,i,i,i],[1,190,"MailReply",0,i,0,i,i,i],[1,191,"MailForward",0,i,0,i,i,i],[1,192,"MailSend",0,i,0,i,i,i],[1,0,i,114,"KeyInComposition",229,i,i,i],[1,0,i,116,"ABNT_C2",194,"VK_ABNT_C2",i,i],[1,0,i,96,"OEM_8",223,"VK_OEM_8",i,i],[1,0,i,0,i,0,"VK_KANA",i,i],[1,0,i,0,i,0,"VK_HANGUL",i,i],[1,0,i,0,i,0,"VK_JUNJA",i,i],[1,0,i,0,i,0,"VK_FINAL",i,i],[1,0,i,0,i,0,"VK_HANJA",i,i],[1,0,i,0,i,0,"VK_KANJI",i,i],[1,0,i,0,i,0,"VK_CONVERT",i,i],[1,0,i,0,i,0,"VK_NONCONVERT",i,i],[1,0,i,0,i,0,"VK_ACCEPT",i,i],[1,0,i,0,i,0,"VK_MODECHANGE",i,i],[1,0,i,0,i,0,"VK_SELECT",i,i],[1,0,i,0,i,0,"VK_PRINT",i,i],[1,0,i,0,i,0,"VK_EXECUTE",i,i],[1,0,i,0,i,0,"VK_SNAPSHOT",i,i],[1,0,i,0,i,0,"VK_HELP",i,i],[1,0,i,0,i,0,"VK_APPS",i,i],[1,0,i,0,i,0,"VK_PROCESSKEY",i,i],[1,0,i,0,i,0,"VK_PACKET",i,i],[1,0,i,0,i,0,"VK_DBE_SBCSCHAR",i,i],[1,0,i,0,i,0,"VK_DBE_DBCSCHAR",i,i],[1,0,i,0,i,0,"VK_ATTN",i,i],[1,0,i,0,i,0,"VK_CRSEL",i,i],[1,0,i,0,i,0,"VK_EXSEL",i,i],[1,0,i,0,i,0,"VK_EREOF",i,i],[1,0,i,0,i,0,"VK_PLAY",i,i],[1,0,i,0,i,0,"VK_ZOOM",i,i],[1,0,i,0,i,0,"VK_NONAME",i,i],[1,0,i,0,i,0,"VK_PA1",i,i],[1,0,i,0,i,0,"VK_OEM_CLEAR",i,i]],t=[],n=[];for(const s of e){const[r,o,a,l,c,u,d,h,g]=s;if(n[o]||(n[o]=!0,Y8e[a]=o,Q8e[a.toLowerCase()]=o,r&&(NH[o]=l)),!t[l]){if(t[l]=!0,!c)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);nL.define(l,c),$3.define(l,h||c),q3.define(l,g||h||c)}u&&($de[u]=l)}})();var Rh;(function(i){function e(a){return nL.keyCodeToStr(a)}i.toString=e;function t(a){return nL.strToKeyCode(a)}i.fromString=t;function n(a){return $3.keyCodeToStr(a)}i.toUserSettingsUS=n;function s(a){return q3.keyCodeToStr(a)}i.toUserSettingsGeneral=s;function r(a){return $3.strToKeyCode(a)||q3.strToKeyCode(a)}i.fromUserSettings=r;function o(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return nL.keyCodeToStr(a)}i.toElectronAccelerator=o})(Rh||(Rh={}));function X8e(i,e){const t=(e&65535)<<16>>>0;return(i|t)>>>0}var PQ={};let Yv;const CO=globalThis.vscode;var Gne;if(typeof CO<"u"&&typeof CO.process<"u"){const i=CO.process;Yv={get platform(){return i.platform},get arch(){return i.arch},get env(){return i.env},cwd(){return i.cwd()}}}else typeof process<"u"&&typeof((Gne=process==null?void 0:process.versions)==null?void 0:Gne.node)=="string"?Yv={get platform(){return process.platform},get arch(){return process.arch},get env(){return PQ},cwd(){return PQ.VSCODE_CWD||process.cwd()}}:Yv={get platform(){return Sa?"win32":rn?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const zI=Yv.cwd,K3=Yv.env,Z8e=Yv.platform,J8e=65,e7e=97,t7e=90,n7e=122,nm=46,Gr=47,Va=92,lg=58,i7e=63;class qde extends Error{constructor(e,t,n){let s;typeof t=="string"&&t.indexOf("not ")===0?(s="must not be",t=t.replace(/^not /,"")):s="must be";const r=e.indexOf(".")!==-1?"property":"argument";let o=`The "${e}" ${r} ${s} of type ${t}`;o+=`. Received type ${typeof n}`,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function s7e(i,e){if(i===null||typeof i!="object")throw new qde(e,"Object",i)}function Ns(i,e){if(typeof i!="string")throw new qde(e,"string",i)}const Df=Z8e==="win32";function In(i){return i===Gr||i===Va}function G3(i){return i===Gr}function cg(i){return i>=J8e&&i<=t7e||i>=e7e&&i<=n7e}function jI(i,e,t,n){let s="",r=0,o=-1,a=0,l=0;for(let c=0;c<=i.length;++c){if(c<i.length)l=i.charCodeAt(c);else{if(n(l))break;l=Gr}if(n(l)){if(!(o===c-1||a===1))if(a===2){if(s.length<2||r!==2||s.charCodeAt(s.length-1)!==nm||s.charCodeAt(s.length-2)!==nm){if(s.length>2){const u=s.lastIndexOf(t);u===-1?(s="",r=0):(s=s.slice(0,u),r=s.length-1-s.lastIndexOf(t)),o=c,a=0;continue}else if(s.length!==0){s="",r=0,o=c,a=0;continue}}e&&(s+=s.length>0?`${t}..`:"..",r=2)}else s.length>0?s+=`${t}${i.slice(o+1,c)}`:s=i.slice(o+1,c),r=c-o-1;o=c,a=0}else l===nm&&a!==-1?++a:a=-1}return s}function r7e(i){return i?`${i[0]==="."?"":"."}${i}`:""}function Kde(i,e){s7e(e,"pathObject");const t=e.dir||e.root,n=e.base||`${e.name||""}${r7e(e.ext)}`;return t?t===e.root?`${t}${n}`:`${t}${i}${n}`:n}const Zo={resolve(...i){let e="",t="",n=!1;for(let s=i.length-1;s>=-1;s--){let r;if(s>=0){if(r=i[s],Ns(r,`paths[${s}]`),r.length===0)continue}else e.length===0?r=zI():(r=K3[`=${e}`]||zI(),(r===void 0||r.slice(0,2).toLowerCase()!==e.toLowerCase()&&r.charCodeAt(2)===Va)&&(r=`${e}\\`));const o=r.length;let a=0,l="",c=!1;const u=r.charCodeAt(0);if(o===1)In(u)&&(a=1,c=!0);else if(In(u))if(c=!0,In(r.charCodeAt(1))){let d=2,h=d;for(;d<o&&!In(r.charCodeAt(d));)d++;if(d<o&&d!==h){const g=r.slice(h,d);for(h=d;d<o&&In(r.charCodeAt(d));)d++;if(d<o&&d!==h){for(h=d;d<o&&!In(r.charCodeAt(d));)d++;(d===o||d!==h)&&(l=`\\\\${g}\\${r.slice(h,d)}`,a=d)}}}else a=1;else cg(u)&&r.charCodeAt(1)===lg&&(l=r.slice(0,2),a=2,o>2&&In(r.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${r.slice(a)}\\${t}`,n=c,c&&e.length>0)break}return t=jI(t,!n,"\\",In),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(i){Ns(i,"path");const e=i.length;if(e===0)return".";let t=0,n,s=!1;const r=i.charCodeAt(0);if(e===1)return G3(r)?"\\":i;if(In(r))if(s=!0,In(i.charCodeAt(1))){let a=2,l=a;for(;a<e&&!In(i.charCodeAt(a));)a++;if(a<e&&a!==l){const c=i.slice(l,a);for(l=a;a<e&&In(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!In(i.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${i.slice(l)}\\`;a!==l&&(n=`\\\\${c}\\${i.slice(l,a)}`,t=a)}}}else t=1;else cg(r)&&i.charCodeAt(1)===lg&&(n=i.slice(0,2),t=2,e>2&&In(i.charCodeAt(2))&&(s=!0,t=3));let o=t<e?jI(i.slice(t),!s,"\\",In):"";return o.length===0&&!s&&(o="."),o.length>0&&In(i.charCodeAt(e-1))&&(o+="\\"),n===void 0?s?`\\${o}`:o:s?`${n}\\${o}`:`${n}${o}`},isAbsolute(i){Ns(i,"path");const e=i.length;if(e===0)return!1;const t=i.charCodeAt(0);return In(t)||e>2&&cg(t)&&i.charCodeAt(1)===lg&&In(i.charCodeAt(2))},join(...i){if(i.length===0)return".";let e,t;for(let r=0;r<i.length;++r){const o=i[r];Ns(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let n=!0,s=0;if(typeof t=="string"&&In(t.charCodeAt(0))){++s;const r=t.length;r>1&&In(t.charCodeAt(1))&&(++s,r>2&&(In(t.charCodeAt(2))?++s:n=!1))}if(n){for(;s<e.length&&In(e.charCodeAt(s));)s++;s>=2&&(e=`\\${e.slice(s)}`)}return Zo.normalize(e)},relative(i,e){if(Ns(i,"from"),Ns(e,"to"),i===e)return"";const t=Zo.resolve(i),n=Zo.resolve(e);if(t===n||(i=t.toLowerCase(),e=n.toLowerCase(),i===e))return"";let s=0;for(;s<i.length&&i.charCodeAt(s)===Va;)s++;let r=i.length;for(;r-1>s&&i.charCodeAt(r-1)===Va;)r--;const o=r-s;let a=0;for(;a<e.length&&e.charCodeAt(a)===Va;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===Va;)l--;const c=l-a,u=o<c?o:c;let d=-1,h=0;for(;h<u;h++){const p=i.charCodeAt(s+h);if(p!==e.charCodeAt(a+h))break;p===Va&&(d=h)}if(h!==u){if(d===-1)return n}else{if(c>u){if(e.charCodeAt(a+h)===Va)return n.slice(a+h+1);if(h===2)return n.slice(a+h)}o>u&&(i.charCodeAt(s+h)===Va?d=h:h===2&&(d=3)),d===-1&&(d=0)}let g="";for(h=s+d+1;h<=r;++h)(h===r||i.charCodeAt(h)===Va)&&(g+=g.length===0?"..":"\\..");return a+=d,g.length>0?`${g}${n.slice(a,l)}`:(n.charCodeAt(a)===Va&&++a,n.slice(a,l))},toNamespacedPath(i){if(typeof i!="string"||i.length===0)return i;const e=Zo.resolve(i);if(e.length<=2)return i;if(e.charCodeAt(0)===Va){if(e.charCodeAt(1)===Va){const t=e.charCodeAt(2);if(t!==i7e&&t!==nm)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(cg(e.charCodeAt(0))&&e.charCodeAt(1)===lg&&e.charCodeAt(2)===Va)return`\\\\?\\${e}`;return i},dirname(i){Ns(i,"path");const e=i.length;if(e===0)return".";let t=-1,n=0;const s=i.charCodeAt(0);if(e===1)return In(s)?i:".";if(In(s)){if(t=n=1,In(i.charCodeAt(1))){let a=2,l=a;for(;a<e&&!In(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&In(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!In(i.charCodeAt(a));)a++;if(a===e)return i;a!==l&&(t=n=a+1)}}}}else cg(s)&&i.charCodeAt(1)===lg&&(t=e>2&&In(i.charCodeAt(2))?3:2,n=t);let r=-1,o=!0;for(let a=e-1;a>=n;--a)if(In(i.charCodeAt(a))){if(!o){r=a;break}}else o=!1;if(r===-1){if(t===-1)return".";r=t}return i.slice(0,r)},basename(i,e){e!==void 0&&Ns(e,"suffix"),Ns(i,"path");let t=0,n=-1,s=!0,r;if(i.length>=2&&cg(i.charCodeAt(0))&&i.charCodeAt(1)===lg&&(t=2),e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let o=e.length-1,a=-1;for(r=i.length-1;r>=t;--r){const l=i.charCodeAt(r);if(In(l)){if(!s){t=r+1;break}}else a===-1&&(s=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=r):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(r=i.length-1;r>=t;--r)if(In(i.charCodeAt(r))){if(!s){t=r+1;break}}else n===-1&&(s=!1,n=r+1);return n===-1?"":i.slice(t,n)},extname(i){Ns(i,"path");let e=0,t=-1,n=0,s=-1,r=!0,o=0;i.length>=2&&i.charCodeAt(1)===lg&&cg(i.charCodeAt(0))&&(e=n=2);for(let a=i.length-1;a>=e;--a){const l=i.charCodeAt(a);if(In(l)){if(!r){n=a+1;break}continue}s===-1&&(r=!1,s=a+1),l===nm?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||s===-1||o===0||o===1&&t===s-1&&t===n+1?"":i.slice(t,s)},format:Kde.bind(null,"\\"),parse(i){Ns(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.length;let n=0,s=i.charCodeAt(0);if(t===1)return In(s)?(e.root=e.dir=i,e):(e.base=e.name=i,e);if(In(s)){if(n=1,In(i.charCodeAt(1))){let d=2,h=d;for(;d<t&&!In(i.charCodeAt(d));)d++;if(d<t&&d!==h){for(h=d;d<t&&In(i.charCodeAt(d));)d++;if(d<t&&d!==h){for(h=d;d<t&&!In(i.charCodeAt(d));)d++;d===t?n=d:d!==h&&(n=d+1)}}}}else if(cg(s)&&i.charCodeAt(1)===lg){if(t<=2)return e.root=e.dir=i,e;if(n=2,In(i.charCodeAt(2))){if(t===3)return e.root=e.dir=i,e;n=3}}n>0&&(e.root=i.slice(0,n));let r=-1,o=n,a=-1,l=!0,c=i.length-1,u=0;for(;c>=n;--c){if(s=i.charCodeAt(c),In(s)){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),s===nm?r===-1?r=c:u!==1&&(u=1):r!==-1&&(u=-1)}return a!==-1&&(r===-1||u===0||u===1&&r===a-1&&r===o+1?e.base=e.name=i.slice(o,a):(e.name=i.slice(o,r),e.base=i.slice(o,a),e.ext=i.slice(r,a))),o>0&&o!==n?e.dir=i.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},o7e=(()=>{if(Df){const i=/\\/g;return()=>{const e=zI().replace(i,"/");return e.slice(e.indexOf("/"))}}return()=>zI()})(),$i={resolve(...i){let e="",t=!1;for(let n=i.length-1;n>=-1&&!t;n--){const s=n>=0?i[n]:o7e();Ns(s,`paths[${n}]`),s.length!==0&&(e=`${s}/${e}`,t=s.charCodeAt(0)===Gr)}return e=jI(e,!t,"/",G3),t?`/${e}`:e.length>0?e:"."},normalize(i){if(Ns(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===Gr,t=i.charCodeAt(i.length-1)===Gr;return i=jI(i,!e,"/",G3),i.length===0?e?"/":t?"./":".":(t&&(i+="/"),e?`/${i}`:i)},isAbsolute(i){return Ns(i,"path"),i.length>0&&i.charCodeAt(0)===Gr},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){const n=i[t];Ns(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":$i.normalize(e)},relative(i,e){if(Ns(i,"from"),Ns(e,"to"),i===e||(i=$i.resolve(i),e=$i.resolve(e),i===e))return"";const t=1,n=i.length,s=n-t,r=1,o=e.length-r,a=s<o?s:o;let l=-1,c=0;for(;c<a;c++){const d=i.charCodeAt(t+c);if(d!==e.charCodeAt(r+c))break;d===Gr&&(l=c)}if(c===a)if(o>a){if(e.charCodeAt(r+c)===Gr)return e.slice(r+c+1);if(c===0)return e.slice(r+c)}else s>a&&(i.charCodeAt(t+c)===Gr?l=c:c===0&&(l=0));let u="";for(c=t+l+1;c<=n;++c)(c===n||i.charCodeAt(c)===Gr)&&(u+=u.length===0?"..":"/..");return`${u}${e.slice(r+l)}`},toNamespacedPath(i){return i},dirname(i){if(Ns(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===Gr;let t=-1,n=!0;for(let s=i.length-1;s>=1;--s)if(i.charCodeAt(s)===Gr){if(!n){t=s;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":i.slice(0,t)},basename(i,e){e!==void 0&&Ns(e,"ext"),Ns(i,"path");let t=0,n=-1,s=!0,r;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let o=e.length-1,a=-1;for(r=i.length-1;r>=0;--r){const l=i.charCodeAt(r);if(l===Gr){if(!s){t=r+1;break}}else a===-1&&(s=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=r):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(r=i.length-1;r>=0;--r)if(i.charCodeAt(r)===Gr){if(!s){t=r+1;break}}else n===-1&&(s=!1,n=r+1);return n===-1?"":i.slice(t,n)},extname(i){Ns(i,"path");let e=-1,t=0,n=-1,s=!0,r=0;for(let o=i.length-1;o>=0;--o){const a=i.charCodeAt(o);if(a===Gr){if(!s){t=o+1;break}continue}n===-1&&(s=!1,n=o+1),a===nm?e===-1?e=o:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||n===-1||r===0||r===1&&e===n-1&&e===t+1?"":i.slice(e,n)},format:Kde.bind(null,"/"),parse(i){Ns(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.charCodeAt(0)===Gr;let n;t?(e.root="/",n=1):n=0;let s=-1,r=0,o=-1,a=!0,l=i.length-1,c=0;for(;l>=n;--l){const u=i.charCodeAt(l);if(u===Gr){if(!a){r=l+1;break}continue}o===-1&&(a=!1,o=l+1),u===nm?s===-1?s=l:c!==1&&(c=1):s!==-1&&(c=-1)}if(o!==-1){const u=r===0&&t?1:r;s===-1||c===0||c===1&&s===o-1&&s===r+1?e.base=e.name=i.slice(u,o):(e.name=i.slice(u,s),e.base=i.slice(u,o),e.ext=i.slice(s,o))}return r>0?e.dir=i.slice(0,r-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};$i.win32=Zo.win32=Zo;$i.posix=Zo.posix=$i;const Gde=Df?Zo.normalize:$i.normalize,a7e=Df?Zo.join:$i.join,l7e=Df?Zo.resolve:$i.resolve,c7e=Df?Zo.relative:$i.relative,u7e=Df?Zo.dirname:$i.dirname,Yde=Df?Zo.basename:$i.basename,d7e=Df?Zo.extname:$i.extname,im=Df?Zo.sep:$i.sep,h7e=/^\w[\w\d+.-]*$/,f7e=/^\//,g7e=/^\/\//;function m7e(i,e){if(!i.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${i.authority}", path: "${i.path}", query: "${i.query}", fragment: "${i.fragment}"}`);if(i.scheme&&!h7e.test(i.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(i.path){if(i.authority){if(!f7e.test(i.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(g7e.test(i.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function p7e(i,e){return!i&&!e?"file":i}function _7e(i,e){switch(i){case"https":case"http":case"file":e?e[0]!==Yc&&(e=Yc+e):e=Yc;break}return e}const Hi="",Yc="/",v7e=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class Ut{static isUri(e){return e instanceof Ut?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,t,n,s,r,o=!1){typeof e=="object"?(this.scheme=e.scheme||Hi,this.authority=e.authority||Hi,this.path=e.path||Hi,this.query=e.query||Hi,this.fragment=e.fragment||Hi):(this.scheme=p7e(e,o),this.authority=t||Hi,this.path=_7e(this.scheme,n||Hi),this.query=s||Hi,this.fragment=r||Hi,m7e(this,o))}get fsPath(){return $I(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:s,query:r,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=Hi),n===void 0?n=this.authority:n===null&&(n=Hi),s===void 0?s=this.path:s===null&&(s=Hi),r===void 0?r=this.query:r===null&&(r=Hi),o===void 0?o=this.fragment:o===null&&(o=Hi),t===this.scheme&&n===this.authority&&s===this.path&&r===this.query&&o===this.fragment?this:new k_(t,n,s,r,o)}static parse(e,t=!1){const n=v7e.exec(e);return n?new k_(n[2]||Hi,OE(n[4]||Hi),OE(n[5]||Hi),OE(n[7]||Hi),OE(n[9]||Hi),t):new k_(Hi,Hi,Hi,Hi,Hi)}static file(e){let t=Hi;if(Sa&&(e=e.replace(/\\/g,Yc)),e[0]===Yc&&e[1]===Yc){const n=e.indexOf(Yc,2);n===-1?(t=e.substring(2),e=Yc):(t=e.substring(2,n),e=e.substring(n)||Yc)}return new k_("file",t,e,Hi,Hi)}static from(e,t){return new k_(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Sa&&e.scheme==="file"?n=Ut.file(Zo.join($I(e,!0),...t)).path:n=$i.join(e.path,...t),e.with({path:n})}toString(e=!1){return Y3(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof Ut)return e;{const t=new k_(e);return t._formatted=e.external??null,t._fsPath=e._sep===Qde?e.fsPath??null:null,t}}else return e}}const Qde=Sa?1:void 0;class k_ extends Ut{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=$I(this,!1)),this._fsPath}toString(e=!1){return e?Y3(this,!0):(this._formatted||(this._formatted=Y3(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Qde),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const Xde={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function MQ(i,e,t){let n,s=-1;for(let r=0;r<i.length;r++){const o=i.charCodeAt(r);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||e&&o===47||t&&o===91||t&&o===93||t&&o===58)s!==-1&&(n+=encodeURIComponent(i.substring(s,r)),s=-1),n!==void 0&&(n+=i.charAt(r));else{n===void 0&&(n=i.substr(0,r));const a=Xde[o];a!==void 0?(s!==-1&&(n+=encodeURIComponent(i.substring(s,r)),s=-1),n+=a):s===-1&&(s=r)}}return s!==-1&&(n+=encodeURIComponent(i.substring(s))),n!==void 0?n:i}function b7e(i){let e;for(let t=0;t<i.length;t++){const n=i.charCodeAt(t);n===35||n===63?(e===void 0&&(e=i.substr(0,t)),e+=Xde[n]):e!==void 0&&(e+=i[t])}return e!==void 0?e:i}function $I(i,e){let t;return i.authority&&i.path.length>1&&i.scheme==="file"?t=`//${i.authority}${i.path}`:i.path.charCodeAt(0)===47&&(i.path.charCodeAt(1)>=65&&i.path.charCodeAt(1)<=90||i.path.charCodeAt(1)>=97&&i.path.charCodeAt(1)<=122)&&i.path.charCodeAt(2)===58?e?t=i.path.substr(1):t=i.path[1].toLowerCase()+i.path.substr(2):t=i.path,Sa&&(t=t.replace(/\//g,"\\")),t}function Y3(i,e){const t=e?b7e:MQ;let n="",{scheme:s,authority:r,path:o,query:a,fragment:l}=i;if(s&&(n+=s,n+=":"),(r||s==="file")&&(n+=Yc,n+=Yc),r){let c=r.indexOf("@");if(c!==-1){const u=r.substr(0,c);r=r.substr(c+1),c=u.lastIndexOf(":"),c===-1?n+=t(u,!1,!1):(n+=t(u.substr(0,c),!1,!1),n+=":",n+=t(u.substr(c+1),!1,!0)),n+="@"}r=r.toLowerCase(),c=r.lastIndexOf(":"),c===-1?n+=t(r,!1,!0):(n+=t(r.substr(0,c),!1,!0),n+=r.substr(c))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const c=o.charCodeAt(1);c>=65&&c<=90&&(o=`/${String.fromCharCode(c+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const c=o.charCodeAt(0);c>=65&&c<=90&&(o=`${String.fromCharCode(c+32)}:${o.substr(2)}`)}n+=t(o,!0,!1)}return a&&(n+="?",n+=t(a,!1,!1)),l&&(n+="#",n+=e?l:MQ(l,!1,!1)),n}function Zde(i){try{return decodeURIComponent(i)}catch{return i.length>3?i.substr(0,3)+Zde(i.substr(3)):i}}const OQ=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function OE(i){return i.match(OQ)?i.replace(OQ,e=>Zde(e)):i}class ue{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new ue(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return ue.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return ue.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return ue.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const n=e.lineNumber|0,s=t.lineNumber|0;if(n===s){const r=e.column|0,o=t.column|0;return r-o}return n-s}clone(){return new ue(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new ue(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}}let J=class $s{constructor(e,t,n,s){e>n||e===n&&t>s?(this.startLineNumber=n,this.startColumn=s,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=s)}isEmpty(){return $s.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return $s.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return $s.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return $s.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return $s.plusRange(this,e)}static plusRange(e,t){let n,s,r,o;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,s=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,s=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,s=e.startColumn),t.endLineNumber>e.endLineNumber?(r=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(r=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(r=e.endLineNumber,o=e.endColumn),new $s(n,s,r,o)}intersectRanges(e){return $s.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,u=t.endColumn;return n<a?(n=a,s=l):n===a&&(s=Math.max(s,l)),r>c?(r=c,o=u):r===c&&(o=Math.min(o,u)),n>r||n===r&&s>o?null:new $s(n,s,r,o)}equalsRange(e){return $s.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return $s.getEndPosition(this)}static getEndPosition(e){return new ue(e.endLineNumber,e.endColumn)}getStartPosition(){return $s.getStartPosition(this)}static getStartPosition(e){return new ue(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new $s(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new $s(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return $s.collapseToStart(this)}static collapseToStart(e){return new $s(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return $s.collapseToEnd(this)}static collapseToEnd(e){return new $s(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new $s(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new $s(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new $s(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const r=e.startLineNumber|0,o=t.startLineNumber|0;if(r===o){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,u=t.endLineNumber|0;if(c===u){const d=e.endColumn|0,h=t.endColumn|0;return d-h}return c-u}return a-l}return r-o}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}},Gn=class Jl extends J{constructor(e,t,n,s){super(e,t,n,s),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Jl.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new Jl(this.startLineNumber,this.startColumn,e,t):new Jl(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new ue(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new ue(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new Jl(e,t,this.endLineNumber,this.endColumn):new Jl(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new Jl(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new Jl(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new Jl(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new Jl(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,s=e.length;n<s;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,s,r){return r===0?new Jl(e,t,n,s):new Jl(n,s,e,t)}};const Q3=Object.create(null);function M(i,e){if(nl(e)){const t=Q3[e];if(t===void 0)throw new Error(`${i} references an unknown codicon: ${e}`);e=t}return Q3[i]=e,{id:i}}function Jde(){return Q3}const y7e={add:M("add",6e4),plus:M("plus",6e4),gistNew:M("gist-new",6e4),repoCreate:M("repo-create",6e4),lightbulb:M("lightbulb",60001),lightBulb:M("light-bulb",60001),repo:M("repo",60002),repoDelete:M("repo-delete",60002),gistFork:M("gist-fork",60003),repoForked:M("repo-forked",60003),gitPullRequest:M("git-pull-request",60004),gitPullRequestAbandoned:M("git-pull-request-abandoned",60004),recordKeys:M("record-keys",60005),keyboard:M("keyboard",60005),tag:M("tag",60006),gitPullRequestLabel:M("git-pull-request-label",60006),tagAdd:M("tag-add",60006),tagRemove:M("tag-remove",60006),person:M("person",60007),personFollow:M("person-follow",60007),personOutline:M("person-outline",60007),personFilled:M("person-filled",60007),gitBranch:M("git-branch",60008),gitBranchCreate:M("git-branch-create",60008),gitBranchDelete:M("git-branch-delete",60008),sourceControl:M("source-control",60008),mirror:M("mirror",60009),mirrorPublic:M("mirror-public",60009),star:M("star",60010),starAdd:M("star-add",60010),starDelete:M("star-delete",60010),starEmpty:M("star-empty",60010),comment:M("comment",60011),commentAdd:M("comment-add",60011),alert:M("alert",60012),warning:M("warning",60012),search:M("search",60013),searchSave:M("search-save",60013),logOut:M("log-out",60014),signOut:M("sign-out",60014),logIn:M("log-in",60015),signIn:M("sign-in",60015),eye:M("eye",60016),eyeUnwatch:M("eye-unwatch",60016),eyeWatch:M("eye-watch",60016),circleFilled:M("circle-filled",60017),primitiveDot:M("primitive-dot",60017),closeDirty:M("close-dirty",60017),debugBreakpoint:M("debug-breakpoint",60017),debugBreakpointDisabled:M("debug-breakpoint-disabled",60017),debugHint:M("debug-hint",60017),terminalDecorationSuccess:M("terminal-decoration-success",60017),primitiveSquare:M("primitive-square",60018),edit:M("edit",60019),pencil:M("pencil",60019),info:M("info",60020),issueOpened:M("issue-opened",60020),gistPrivate:M("gist-private",60021),gitForkPrivate:M("git-fork-private",60021),lock:M("lock",60021),mirrorPrivate:M("mirror-private",60021),close:M("close",60022),removeClose:M("remove-close",60022),x:M("x",60022),repoSync:M("repo-sync",60023),sync:M("sync",60023),clone:M("clone",60024),desktopDownload:M("desktop-download",60024),beaker:M("beaker",60025),microscope:M("microscope",60025),vm:M("vm",60026),deviceDesktop:M("device-desktop",60026),file:M("file",60027),fileText:M("file-text",60027),more:M("more",60028),ellipsis:M("ellipsis",60028),kebabHorizontal:M("kebab-horizontal",60028),mailReply:M("mail-reply",60029),reply:M("reply",60029),organization:M("organization",60030),organizationFilled:M("organization-filled",60030),organizationOutline:M("organization-outline",60030),newFile:M("new-file",60031),fileAdd:M("file-add",60031),newFolder:M("new-folder",60032),fileDirectoryCreate:M("file-directory-create",60032),trash:M("trash",60033),trashcan:M("trashcan",60033),history:M("history",60034),clock:M("clock",60034),folder:M("folder",60035),fileDirectory:M("file-directory",60035),symbolFolder:M("symbol-folder",60035),logoGithub:M("logo-github",60036),markGithub:M("mark-github",60036),github:M("github",60036),terminal:M("terminal",60037),console:M("console",60037),repl:M("repl",60037),zap:M("zap",60038),symbolEvent:M("symbol-event",60038),error:M("error",60039),stop:M("stop",60039),variable:M("variable",60040),symbolVariable:M("symbol-variable",60040),array:M("array",60042),symbolArray:M("symbol-array",60042),symbolModule:M("symbol-module",60043),symbolPackage:M("symbol-package",60043),symbolNamespace:M("symbol-namespace",60043),symbolObject:M("symbol-object",60043),symbolMethod:M("symbol-method",60044),symbolFunction:M("symbol-function",60044),symbolConstructor:M("symbol-constructor",60044),symbolBoolean:M("symbol-boolean",60047),symbolNull:M("symbol-null",60047),symbolNumeric:M("symbol-numeric",60048),symbolNumber:M("symbol-number",60048),symbolStructure:M("symbol-structure",60049),symbolStruct:M("symbol-struct",60049),symbolParameter:M("symbol-parameter",60050),symbolTypeParameter:M("symbol-type-parameter",60050),symbolKey:M("symbol-key",60051),symbolText:M("symbol-text",60051),symbolReference:M("symbol-reference",60052),goToFile:M("go-to-file",60052),symbolEnum:M("symbol-enum",60053),symbolValue:M("symbol-value",60053),symbolRuler:M("symbol-ruler",60054),symbolUnit:M("symbol-unit",60054),activateBreakpoints:M("activate-breakpoints",60055),archive:M("archive",60056),arrowBoth:M("arrow-both",60057),arrowDown:M("arrow-down",60058),arrowLeft:M("arrow-left",60059),arrowRight:M("arrow-right",60060),arrowSmallDown:M("arrow-small-down",60061),arrowSmallLeft:M("arrow-small-left",60062),arrowSmallRight:M("arrow-small-right",60063),arrowSmallUp:M("arrow-small-up",60064),arrowUp:M("arrow-up",60065),bell:M("bell",60066),bold:M("bold",60067),book:M("book",60068),bookmark:M("bookmark",60069),debugBreakpointConditionalUnverified:M("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:M("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:M("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:M("debug-breakpoint-data-unverified",60072),debugBreakpointData:M("debug-breakpoint-data",60073),debugBreakpointDataDisabled:M("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:M("debug-breakpoint-log-unverified",60074),debugBreakpointLog:M("debug-breakpoint-log",60075),debugBreakpointLogDisabled:M("debug-breakpoint-log-disabled",60075),briefcase:M("briefcase",60076),broadcast:M("broadcast",60077),browser:M("browser",60078),bug:M("bug",60079),calendar:M("calendar",60080),caseSensitive:M("case-sensitive",60081),check:M("check",60082),checklist:M("checklist",60083),chevronDown:M("chevron-down",60084),chevronLeft:M("chevron-left",60085),chevronRight:M("chevron-right",60086),chevronUp:M("chevron-up",60087),chromeClose:M("chrome-close",60088),chromeMaximize:M("chrome-maximize",60089),chromeMinimize:M("chrome-minimize",60090),chromeRestore:M("chrome-restore",60091),circleOutline:M("circle-outline",60092),circle:M("circle",60092),debugBreakpointUnverified:M("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:M("terminal-decoration-incomplete",60092),circleSlash:M("circle-slash",60093),circuitBoard:M("circuit-board",60094),clearAll:M("clear-all",60095),clippy:M("clippy",60096),closeAll:M("close-all",60097),cloudDownload:M("cloud-download",60098),cloudUpload:M("cloud-upload",60099),code:M("code",60100),collapseAll:M("collapse-all",60101),colorMode:M("color-mode",60102),commentDiscussion:M("comment-discussion",60103),creditCard:M("credit-card",60105),dash:M("dash",60108),dashboard:M("dashboard",60109),database:M("database",60110),debugContinue:M("debug-continue",60111),debugDisconnect:M("debug-disconnect",60112),debugPause:M("debug-pause",60113),debugRestart:M("debug-restart",60114),debugStart:M("debug-start",60115),debugStepInto:M("debug-step-into",60116),debugStepOut:M("debug-step-out",60117),debugStepOver:M("debug-step-over",60118),debugStop:M("debug-stop",60119),debug:M("debug",60120),deviceCameraVideo:M("device-camera-video",60121),deviceCamera:M("device-camera",60122),deviceMobile:M("device-mobile",60123),diffAdded:M("diff-added",60124),diffIgnored:M("diff-ignored",60125),diffModified:M("diff-modified",60126),diffRemoved:M("diff-removed",60127),diffRenamed:M("diff-renamed",60128),diff:M("diff",60129),diffSidebyside:M("diff-sidebyside",60129),discard:M("discard",60130),editorLayout:M("editor-layout",60131),emptyWindow:M("empty-window",60132),exclude:M("exclude",60133),extensions:M("extensions",60134),eyeClosed:M("eye-closed",60135),fileBinary:M("file-binary",60136),fileCode:M("file-code",60137),fileMedia:M("file-media",60138),filePdf:M("file-pdf",60139),fileSubmodule:M("file-submodule",60140),fileSymlinkDirectory:M("file-symlink-directory",60141),fileSymlinkFile:M("file-symlink-file",60142),fileZip:M("file-zip",60143),files:M("files",60144),filter:M("filter",60145),flame:M("flame",60146),foldDown:M("fold-down",60147),foldUp:M("fold-up",60148),fold:M("fold",60149),folderActive:M("folder-active",60150),folderOpened:M("folder-opened",60151),gear:M("gear",60152),gift:M("gift",60153),gistSecret:M("gist-secret",60154),gist:M("gist",60155),gitCommit:M("git-commit",60156),gitCompare:M("git-compare",60157),compareChanges:M("compare-changes",60157),gitMerge:M("git-merge",60158),githubAction:M("github-action",60159),githubAlt:M("github-alt",60160),globe:M("globe",60161),grabber:M("grabber",60162),graph:M("graph",60163),gripper:M("gripper",60164),heart:M("heart",60165),home:M("home",60166),horizontalRule:M("horizontal-rule",60167),hubot:M("hubot",60168),inbox:M("inbox",60169),issueReopened:M("issue-reopened",60171),issues:M("issues",60172),italic:M("italic",60173),jersey:M("jersey",60174),json:M("json",60175),kebabVertical:M("kebab-vertical",60176),key:M("key",60177),law:M("law",60178),lightbulbAutofix:M("lightbulb-autofix",60179),linkExternal:M("link-external",60180),link:M("link",60181),listOrdered:M("list-ordered",60182),listUnordered:M("list-unordered",60183),liveShare:M("live-share",60184),loading:M("loading",60185),location:M("location",60186),mailRead:M("mail-read",60187),mail:M("mail",60188),markdown:M("markdown",60189),megaphone:M("megaphone",60190),mention:M("mention",60191),milestone:M("milestone",60192),gitPullRequestMilestone:M("git-pull-request-milestone",60192),mortarBoard:M("mortar-board",60193),move:M("move",60194),multipleWindows:M("multiple-windows",60195),mute:M("mute",60196),noNewline:M("no-newline",60197),note:M("note",60198),octoface:M("octoface",60199),openPreview:M("open-preview",60200),package:M("package",60201),paintcan:M("paintcan",60202),pin:M("pin",60203),play:M("play",60204),run:M("run",60204),plug:M("plug",60205),preserveCase:M("preserve-case",60206),preview:M("preview",60207),project:M("project",60208),pulse:M("pulse",60209),question:M("question",60210),quote:M("quote",60211),radioTower:M("radio-tower",60212),reactions:M("reactions",60213),references:M("references",60214),refresh:M("refresh",60215),regex:M("regex",60216),remoteExplorer:M("remote-explorer",60217),remote:M("remote",60218),remove:M("remove",60219),replaceAll:M("replace-all",60220),replace:M("replace",60221),repoClone:M("repo-clone",60222),repoForcePush:M("repo-force-push",60223),repoPull:M("repo-pull",60224),repoPush:M("repo-push",60225),report:M("report",60226),requestChanges:M("request-changes",60227),rocket:M("rocket",60228),rootFolderOpened:M("root-folder-opened",60229),rootFolder:M("root-folder",60230),rss:M("rss",60231),ruby:M("ruby",60232),saveAll:M("save-all",60233),saveAs:M("save-as",60234),save:M("save",60235),screenFull:M("screen-full",60236),screenNormal:M("screen-normal",60237),searchStop:M("search-stop",60238),server:M("server",60240),settingsGear:M("settings-gear",60241),settings:M("settings",60242),shield:M("shield",60243),smiley:M("smiley",60244),sortPrecedence:M("sort-precedence",60245),splitHorizontal:M("split-horizontal",60246),splitVertical:M("split-vertical",60247),squirrel:M("squirrel",60248),starFull:M("star-full",60249),starHalf:M("star-half",60250),symbolClass:M("symbol-class",60251),symbolColor:M("symbol-color",60252),symbolConstant:M("symbol-constant",60253),symbolEnumMember:M("symbol-enum-member",60254),symbolField:M("symbol-field",60255),symbolFile:M("symbol-file",60256),symbolInterface:M("symbol-interface",60257),symbolKeyword:M("symbol-keyword",60258),symbolMisc:M("symbol-misc",60259),symbolOperator:M("symbol-operator",60260),symbolProperty:M("symbol-property",60261),wrench:M("wrench",60261),wrenchSubaction:M("wrench-subaction",60261),symbolSnippet:M("symbol-snippet",60262),tasklist:M("tasklist",60263),telescope:M("telescope",60264),textSize:M("text-size",60265),threeBars:M("three-bars",60266),thumbsdown:M("thumbsdown",60267),thumbsup:M("thumbsup",60268),tools:M("tools",60269),triangleDown:M("triangle-down",60270),triangleLeft:M("triangle-left",60271),triangleRight:M("triangle-right",60272),triangleUp:M("triangle-up",60273),twitter:M("twitter",60274),unfold:M("unfold",60275),unlock:M("unlock",60276),unmute:M("unmute",60277),unverified:M("unverified",60278),verified:M("verified",60279),versions:M("versions",60280),vmActive:M("vm-active",60281),vmOutline:M("vm-outline",60282),vmRunning:M("vm-running",60283),watch:M("watch",60284),whitespace:M("whitespace",60285),wholeWord:M("whole-word",60286),window:M("window",60287),wordWrap:M("word-wrap",60288),zoomIn:M("zoom-in",60289),zoomOut:M("zoom-out",60290),listFilter:M("list-filter",60291),listFlat:M("list-flat",60292),listSelection:M("list-selection",60293),selection:M("selection",60293),listTree:M("list-tree",60294),debugBreakpointFunctionUnverified:M("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:M("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:M("debug-breakpoint-function-disabled",60296),debugStackframeActive:M("debug-stackframe-active",60297),circleSmallFilled:M("circle-small-filled",60298),debugStackframeDot:M("debug-stackframe-dot",60298),terminalDecorationMark:M("terminal-decoration-mark",60298),debugStackframe:M("debug-stackframe",60299),debugStackframeFocused:M("debug-stackframe-focused",60299),debugBreakpointUnsupported:M("debug-breakpoint-unsupported",60300),symbolString:M("symbol-string",60301),debugReverseContinue:M("debug-reverse-continue",60302),debugStepBack:M("debug-step-back",60303),debugRestartFrame:M("debug-restart-frame",60304),debugAlt:M("debug-alt",60305),callIncoming:M("call-incoming",60306),callOutgoing:M("call-outgoing",60307),menu:M("menu",60308),expandAll:M("expand-all",60309),feedback:M("feedback",60310),gitPullRequestReviewer:M("git-pull-request-reviewer",60310),groupByRefType:M("group-by-ref-type",60311),ungroupByRefType:M("ungroup-by-ref-type",60312),account:M("account",60313),gitPullRequestAssignee:M("git-pull-request-assignee",60313),bellDot:M("bell-dot",60314),debugConsole:M("debug-console",60315),library:M("library",60316),output:M("output",60317),runAll:M("run-all",60318),syncIgnored:M("sync-ignored",60319),pinned:M("pinned",60320),githubInverted:M("github-inverted",60321),serverProcess:M("server-process",60322),serverEnvironment:M("server-environment",60323),pass:M("pass",60324),issueClosed:M("issue-closed",60324),stopCircle:M("stop-circle",60325),playCircle:M("play-circle",60326),record:M("record",60327),debugAltSmall:M("debug-alt-small",60328),vmConnect:M("vm-connect",60329),cloud:M("cloud",60330),merge:M("merge",60331),export:M("export",60332),graphLeft:M("graph-left",60333),magnet:M("magnet",60334),notebook:M("notebook",60335),redo:M("redo",60336),checkAll:M("check-all",60337),pinnedDirty:M("pinned-dirty",60338),passFilled:M("pass-filled",60339),circleLargeFilled:M("circle-large-filled",60340),circleLarge:M("circle-large",60341),circleLargeOutline:M("circle-large-outline",60341),combine:M("combine",60342),gather:M("gather",60342),table:M("table",60343),variableGroup:M("variable-group",60344),typeHierarchy:M("type-hierarchy",60345),typeHierarchySub:M("type-hierarchy-sub",60346),typeHierarchySuper:M("type-hierarchy-super",60347),gitPullRequestCreate:M("git-pull-request-create",60348),runAbove:M("run-above",60349),runBelow:M("run-below",60350),notebookTemplate:M("notebook-template",60351),debugRerun:M("debug-rerun",60352),workspaceTrusted:M("workspace-trusted",60353),workspaceUntrusted:M("workspace-untrusted",60354),workspaceUnknown:M("workspace-unknown",60355),terminalCmd:M("terminal-cmd",60356),terminalDebian:M("terminal-debian",60357),terminalLinux:M("terminal-linux",60358),terminalPowershell:M("terminal-powershell",60359),terminalTmux:M("terminal-tmux",60360),terminalUbuntu:M("terminal-ubuntu",60361),terminalBash:M("terminal-bash",60362),arrowSwap:M("arrow-swap",60363),copy:M("copy",60364),personAdd:M("person-add",60365),filterFilled:M("filter-filled",60366),wand:M("wand",60367),debugLineByLine:M("debug-line-by-line",60368),inspect:M("inspect",60369),layers:M("layers",60370),layersDot:M("layers-dot",60371),layersActive:M("layers-active",60372),compass:M("compass",60373),compassDot:M("compass-dot",60374),compassActive:M("compass-active",60375),azure:M("azure",60376),issueDraft:M("issue-draft",60377),gitPullRequestClosed:M("git-pull-request-closed",60378),gitPullRequestDraft:M("git-pull-request-draft",60379),debugAll:M("debug-all",60380),debugCoverage:M("debug-coverage",60381),runErrors:M("run-errors",60382),folderLibrary:M("folder-library",60383),debugContinueSmall:M("debug-continue-small",60384),beakerStop:M("beaker-stop",60385),graphLine:M("graph-line",60386),graphScatter:M("graph-scatter",60387),pieChart:M("pie-chart",60388),bracket:M("bracket",60175),bracketDot:M("bracket-dot",60389),bracketError:M("bracket-error",60390),lockSmall:M("lock-small",60391),azureDevops:M("azure-devops",60392),verifiedFilled:M("verified-filled",60393),newline:M("newline",60394),layout:M("layout",60395),layoutActivitybarLeft:M("layout-activitybar-left",60396),layoutActivitybarRight:M("layout-activitybar-right",60397),layoutPanelLeft:M("layout-panel-left",60398),layoutPanelCenter:M("layout-panel-center",60399),layoutPanelJustify:M("layout-panel-justify",60400),layoutPanelRight:M("layout-panel-right",60401),layoutPanel:M("layout-panel",60402),layoutSidebarLeft:M("layout-sidebar-left",60403),layoutSidebarRight:M("layout-sidebar-right",60404),layoutStatusbar:M("layout-statusbar",60405),layoutMenubar:M("layout-menubar",60406),layoutCentered:M("layout-centered",60407),target:M("target",60408),indent:M("indent",60409),recordSmall:M("record-small",60410),errorSmall:M("error-small",60411),terminalDecorationError:M("terminal-decoration-error",60411),arrowCircleDown:M("arrow-circle-down",60412),arrowCircleLeft:M("arrow-circle-left",60413),arrowCircleRight:M("arrow-circle-right",60414),arrowCircleUp:M("arrow-circle-up",60415),layoutSidebarRightOff:M("layout-sidebar-right-off",60416),layoutPanelOff:M("layout-panel-off",60417),layoutSidebarLeftOff:M("layout-sidebar-left-off",60418),blank:M("blank",60419),heartFilled:M("heart-filled",60420),map:M("map",60421),mapHorizontal:M("map-horizontal",60421),foldHorizontal:M("fold-horizontal",60421),mapFilled:M("map-filled",60422),mapHorizontalFilled:M("map-horizontal-filled",60422),foldHorizontalFilled:M("fold-horizontal-filled",60422),circleSmall:M("circle-small",60423),bellSlash:M("bell-slash",60424),bellSlashDot:M("bell-slash-dot",60425),commentUnresolved:M("comment-unresolved",60426),gitPullRequestGoToChanges:M("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:M("git-pull-request-new-changes",60428),searchFuzzy:M("search-fuzzy",60429),commentDraft:M("comment-draft",60430),send:M("send",60431),sparkle:M("sparkle",60432),insert:M("insert",60433),mic:M("mic",60434),thumbsdownFilled:M("thumbsdown-filled",60435),thumbsupFilled:M("thumbsup-filled",60436),coffee:M("coffee",60437),snake:M("snake",60438),game:M("game",60439),vr:M("vr",60440),chip:M("chip",60441),piano:M("piano",60442),music:M("music",60443),micFilled:M("mic-filled",60444),repoFetch:M("repo-fetch",60445),copilot:M("copilot",60446),lightbulbSparkle:M("lightbulb-sparkle",60447),robot:M("robot",60448),sparkleFilled:M("sparkle-filled",60449),diffSingle:M("diff-single",60450),diffMultiple:M("diff-multiple",60451),surroundWith:M("surround-with",60452),share:M("share",60453),gitStash:M("git-stash",60454),gitStashApply:M("git-stash-apply",60455),gitStashPop:M("git-stash-pop",60456),vscode:M("vscode",60457),vscodeInsiders:M("vscode-insiders",60458),codeOss:M("code-oss",60459),runCoverage:M("run-coverage",60460),runAllCoverage:M("run-all-coverage",60461),coverage:M("coverage",60462),githubProject:M("github-project",60463),mapVertical:M("map-vertical",60464),foldVertical:M("fold-vertical",60464),mapVerticalFilled:M("map-vertical-filled",60465),foldVerticalFilled:M("fold-vertical-filled",60465),goToSearch:M("go-to-search",60466),percentage:M("percentage",60467),sortPercentage:M("sort-percentage",60467),attach:M("attach",60468)},w7e={dialogError:M("dialog-error","error"),dialogWarning:M("dialog-warning","warning"),dialogInfo:M("dialog-info","info"),dialogClose:M("dialog-close","close"),treeItemExpanded:M("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:M("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:M("tree-filter-on-type-off","list-selection"),treeFilterClear:M("tree-filter-clear","close"),treeItemLoading:M("tree-item-loading","loading"),menuSelection:M("menu-selection","check"),menuSubmenu:M("menu-submenu","chevron-right"),menuBarMore:M("menubar-more","more"),scrollbarButtonLeft:M("scrollbar-button-left","triangle-left"),scrollbarButtonRight:M("scrollbar-button-right","triangle-right"),scrollbarButtonUp:M("scrollbar-button-up","triangle-up"),scrollbarButtonDown:M("scrollbar-button-down","triangle-down"),toolBarMore:M("toolbar-more","more"),quickInputBack:M("quick-input-back","arrow-left"),dropDownButton:M("drop-down-button",60084),symbolCustomColor:M("symbol-customcolor",60252),exportIcon:M("export",60332),workspaceUnspecified:M("workspace-unspecified",60355),newLine:M("newline",60394),thumbsDownFilled:M("thumbsdown-filled",60435),thumbsUpFilled:M("thumbsup-filled",60436),gitFetch:M("git-fetch",60445),lightbulbSparkleAutofix:M("lightbulb-sparkle-autofix",60447),debugBreakpointPending:M("debug-breakpoint-pending",60377)},Ke={...y7e,...w7e};let ehe=class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new se,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),Dt(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){var s;(s=this._factories.get(e))==null||s.dispose();const n=new C7e(this,e,t);return this._factories.set(e,n),Dt(()=>{const r=this._factories.get(e);!r||r!==n||(this._factories.delete(e),r.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const n=this._factories.get(e);return!n||n.isResolved?null:(await n.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const n=this._factories.get(e);return!!(!n||n.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};class C7e extends be{get isResolved(){return this._isResolved}constructor(e,t,n){super(),this._registry=e,this._languageId=t,this._factory=n,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}let vk=class{constructor(e,t,n){this.offset=e,this.type=t,this.language=n,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}};class RH{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}}class W4{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}}var FQ;(function(i){i[i.Increase=0]="Increase",i[i.Decrease=1]="Decrease"})(FQ||(FQ={}));var BQ;(function(i){const e=new Map;e.set(0,Ke.symbolMethod),e.set(1,Ke.symbolFunction),e.set(2,Ke.symbolConstructor),e.set(3,Ke.symbolField),e.set(4,Ke.symbolVariable),e.set(5,Ke.symbolClass),e.set(6,Ke.symbolStruct),e.set(7,Ke.symbolInterface),e.set(8,Ke.symbolModule),e.set(9,Ke.symbolProperty),e.set(10,Ke.symbolEvent),e.set(11,Ke.symbolOperator),e.set(12,Ke.symbolUnit),e.set(13,Ke.symbolValue),e.set(15,Ke.symbolEnum),e.set(14,Ke.symbolConstant),e.set(15,Ke.symbolEnum),e.set(16,Ke.symbolEnumMember),e.set(17,Ke.symbolKeyword),e.set(27,Ke.symbolSnippet),e.set(18,Ke.symbolText),e.set(19,Ke.symbolColor),e.set(20,Ke.symbolFile),e.set(21,Ke.symbolReference),e.set(22,Ke.symbolCustomColor),e.set(23,Ke.symbolFolder),e.set(24,Ke.symbolTypeParameter),e.set(25,Ke.account),e.set(26,Ke.issues);function t(r){let o=e.get(r);return o||(console.info("No codicon found for CompletionItemKind "+r),o=Ke.symbolProperty),o}i.toIcon=t;const n=new Map;n.set("method",0),n.set("function",1),n.set("constructor",2),n.set("field",3),n.set("variable",4),n.set("class",5),n.set("struct",6),n.set("interface",7),n.set("module",8),n.set("property",9),n.set("event",10),n.set("operator",11),n.set("unit",12),n.set("value",13),n.set("constant",14),n.set("enum",15),n.set("enum-member",16),n.set("enumMember",16),n.set("keyword",17),n.set("snippet",27),n.set("text",18),n.set("color",19),n.set("file",20),n.set("reference",21),n.set("customcolor",22),n.set("folder",23),n.set("type-parameter",24),n.set("typeParameter",24),n.set("account",25),n.set("issue",26);function s(r,o){let a=n.get(r);return typeof a>"u"&&!o&&(a=9),a}i.fromString=s})(BQ||(BQ={}));var VQ;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(VQ||(VQ={}));class S7e{constructor(e,t,n,s){this.range=e,this.text=t,this.completionKind=n,this.isSnippetText=s}equals(e){return J.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}}var WQ;(function(i){i[i.Automatic=0]="Automatic",i[i.PasteAs=1]="PasteAs"})(WQ||(WQ={}));var HQ;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(HQ||(HQ={}));var UQ;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(UQ||(UQ={}));S("Array","array"),S("Boolean","boolean"),S("Class","class"),S("Constant","constant"),S("Constructor","constructor"),S("Enum","enumeration"),S("EnumMember","enumeration member"),S("Event","event"),S("Field","field"),S("File","file"),S("Function","function"),S("Interface","interface"),S("Key","key"),S("Method","method"),S("Module","module"),S("Namespace","namespace"),S("Null","null"),S("Number","number"),S("Object","object"),S("Operator","operator"),S("Package","package"),S("Property","property"),S("String","string"),S("Struct","struct"),S("TypeParameter","type parameter"),S("Variable","variable");var X3;(function(i){const e=new Map;e.set(0,Ke.symbolFile),e.set(1,Ke.symbolModule),e.set(2,Ke.symbolNamespace),e.set(3,Ke.symbolPackage),e.set(4,Ke.symbolClass),e.set(5,Ke.symbolMethod),e.set(6,Ke.symbolProperty),e.set(7,Ke.symbolField),e.set(8,Ke.symbolConstructor),e.set(9,Ke.symbolEnum),e.set(10,Ke.symbolInterface),e.set(11,Ke.symbolFunction),e.set(12,Ke.symbolVariable),e.set(13,Ke.symbolConstant),e.set(14,Ke.symbolString),e.set(15,Ke.symbolNumber),e.set(16,Ke.symbolBoolean),e.set(17,Ke.symbolArray),e.set(18,Ke.symbolObject),e.set(19,Ke.symbolKey),e.set(20,Ke.symbolNull),e.set(21,Ke.symbolEnumMember),e.set(22,Ke.symbolStruct),e.set(23,Ke.symbolEvent),e.set(24,Ke.symbolOperator),e.set(25,Ke.symbolTypeParameter);function t(n){let s=e.get(n);return s||(console.info("No codicon found for SymbolKind "+n),s=Ke.symbolProperty),s}i.toIcon=t})(X3||(X3={}));const tc=class tc{static fromValue(e){switch(e){case"comment":return tc.Comment;case"imports":return tc.Imports;case"region":return tc.Region}return new tc(e)}constructor(e){this.value=e}};tc.Comment=new tc("comment"),tc.Imports=new tc("imports"),tc.Region=new tc("region");let Z3=tc;var zQ;(function(i){i[i.AIGenerated=1]="AIGenerated"})(zQ||(zQ={}));var jQ;(function(i){i[i.Invoke=0]="Invoke",i[i.Automatic=1]="Automatic"})(jQ||(jQ={}));var $Q;(function(i){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}i.is=e})($Q||($Q={}));var qQ;(function(i){i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(qQ||(qQ={}));class k7e{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const es=new ehe,J3=new ehe;var KQ;(function(i){i[i.Invoke=0]="Invoke",i[i.Automatic=1]="Automatic"})(KQ||(KQ={}));var e9;(function(i){i[i.Unknown=0]="Unknown",i[i.Disabled=1]="Disabled",i[i.Enabled=2]="Enabled"})(e9||(e9={}));var t9;(function(i){i[i.Invoke=1]="Invoke",i[i.Auto=2]="Auto"})(t9||(t9={}));var n9;(function(i){i[i.None=0]="None",i[i.KeepWhitespace=1]="KeepWhitespace",i[i.InsertAsSnippet=4]="InsertAsSnippet"})(n9||(n9={}));var i9;(function(i){i[i.Method=0]="Method",i[i.Function=1]="Function",i[i.Constructor=2]="Constructor",i[i.Field=3]="Field",i[i.Variable=4]="Variable",i[i.Class=5]="Class",i[i.Struct=6]="Struct",i[i.Interface=7]="Interface",i[i.Module=8]="Module",i[i.Property=9]="Property",i[i.Event=10]="Event",i[i.Operator=11]="Operator",i[i.Unit=12]="Unit",i[i.Value=13]="Value",i[i.Constant=14]="Constant",i[i.Enum=15]="Enum",i[i.EnumMember=16]="EnumMember",i[i.Keyword=17]="Keyword",i[i.Text=18]="Text",i[i.Color=19]="Color",i[i.File=20]="File",i[i.Reference=21]="Reference",i[i.Customcolor=22]="Customcolor",i[i.Folder=23]="Folder",i[i.TypeParameter=24]="TypeParameter",i[i.User=25]="User",i[i.Issue=26]="Issue",i[i.Snippet=27]="Snippet"})(i9||(i9={}));var s9;(function(i){i[i.Deprecated=1]="Deprecated"})(s9||(s9={}));var r9;(function(i){i[i.Invoke=0]="Invoke",i[i.TriggerCharacter=1]="TriggerCharacter",i[i.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(r9||(r9={}));var o9;(function(i){i[i.EXACT=0]="EXACT",i[i.ABOVE=1]="ABOVE",i[i.BELOW=2]="BELOW"})(o9||(o9={}));var a9;(function(i){i[i.NotSet=0]="NotSet",i[i.ContentFlush=1]="ContentFlush",i[i.RecoverFromMarkers=2]="RecoverFromMarkers",i[i.Explicit=3]="Explicit",i[i.Paste=4]="Paste",i[i.Undo=5]="Undo",i[i.Redo=6]="Redo"})(a9||(a9={}));var l9;(function(i){i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(l9||(l9={}));var c9;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(c9||(c9={}));var u9;(function(i){i[i.None=0]="None",i[i.Keep=1]="Keep",i[i.Brackets=2]="Brackets",i[i.Advanced=3]="Advanced",i[i.Full=4]="Full"})(u9||(u9={}));var d9;(function(i){i[i.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",i[i.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",i[i.accessibilitySupport=2]="accessibilitySupport",i[i.accessibilityPageSize=3]="accessibilityPageSize",i[i.ariaLabel=4]="ariaLabel",i[i.ariaRequired=5]="ariaRequired",i[i.autoClosingBrackets=6]="autoClosingBrackets",i[i.autoClosingComments=7]="autoClosingComments",i[i.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",i[i.autoClosingDelete=9]="autoClosingDelete",i[i.autoClosingOvertype=10]="autoClosingOvertype",i[i.autoClosingQuotes=11]="autoClosingQuotes",i[i.autoIndent=12]="autoIndent",i[i.automaticLayout=13]="automaticLayout",i[i.autoSurround=14]="autoSurround",i[i.bracketPairColorization=15]="bracketPairColorization",i[i.guides=16]="guides",i[i.codeLens=17]="codeLens",i[i.codeLensFontFamily=18]="codeLensFontFamily",i[i.codeLensFontSize=19]="codeLensFontSize",i[i.colorDecorators=20]="colorDecorators",i[i.colorDecoratorsLimit=21]="colorDecoratorsLimit",i[i.columnSelection=22]="columnSelection",i[i.comments=23]="comments",i[i.contextmenu=24]="contextmenu",i[i.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",i[i.cursorBlinking=26]="cursorBlinking",i[i.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",i[i.cursorStyle=28]="cursorStyle",i[i.cursorSurroundingLines=29]="cursorSurroundingLines",i[i.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",i[i.cursorWidth=31]="cursorWidth",i[i.disableLayerHinting=32]="disableLayerHinting",i[i.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",i[i.domReadOnly=34]="domReadOnly",i[i.dragAndDrop=35]="dragAndDrop",i[i.dropIntoEditor=36]="dropIntoEditor",i[i.emptySelectionClipboard=37]="emptySelectionClipboard",i[i.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",i[i.extraEditorClassName=39]="extraEditorClassName",i[i.fastScrollSensitivity=40]="fastScrollSensitivity",i[i.find=41]="find",i[i.fixedOverflowWidgets=42]="fixedOverflowWidgets",i[i.folding=43]="folding",i[i.foldingStrategy=44]="foldingStrategy",i[i.foldingHighlight=45]="foldingHighlight",i[i.foldingImportsByDefault=46]="foldingImportsByDefault",i[i.foldingMaximumRegions=47]="foldingMaximumRegions",i[i.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",i[i.fontFamily=49]="fontFamily",i[i.fontInfo=50]="fontInfo",i[i.fontLigatures=51]="fontLigatures",i[i.fontSize=52]="fontSize",i[i.fontWeight=53]="fontWeight",i[i.fontVariations=54]="fontVariations",i[i.formatOnPaste=55]="formatOnPaste",i[i.formatOnType=56]="formatOnType",i[i.glyphMargin=57]="glyphMargin",i[i.gotoLocation=58]="gotoLocation",i[i.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",i[i.hover=60]="hover",i[i.inDiffEditor=61]="inDiffEditor",i[i.inlineSuggest=62]="inlineSuggest",i[i.inlineEdit=63]="inlineEdit",i[i.letterSpacing=64]="letterSpacing",i[i.lightbulb=65]="lightbulb",i[i.lineDecorationsWidth=66]="lineDecorationsWidth",i[i.lineHeight=67]="lineHeight",i[i.lineNumbers=68]="lineNumbers",i[i.lineNumbersMinChars=69]="lineNumbersMinChars",i[i.linkedEditing=70]="linkedEditing",i[i.links=71]="links",i[i.matchBrackets=72]="matchBrackets",i[i.minimap=73]="minimap",i[i.mouseStyle=74]="mouseStyle",i[i.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",i[i.mouseWheelZoom=76]="mouseWheelZoom",i[i.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",i[i.multiCursorModifier=78]="multiCursorModifier",i[i.multiCursorPaste=79]="multiCursorPaste",i[i.multiCursorLimit=80]="multiCursorLimit",i[i.occurrencesHighlight=81]="occurrencesHighlight",i[i.overviewRulerBorder=82]="overviewRulerBorder",i[i.overviewRulerLanes=83]="overviewRulerLanes",i[i.padding=84]="padding",i[i.pasteAs=85]="pasteAs",i[i.parameterHints=86]="parameterHints",i[i.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",i[i.placeholder=88]="placeholder",i[i.definitionLinkOpensInPeek=89]="definitionLinkOpensInPeek",i[i.quickSuggestions=90]="quickSuggestions",i[i.quickSuggestionsDelay=91]="quickSuggestionsDelay",i[i.readOnly=92]="readOnly",i[i.readOnlyMessage=93]="readOnlyMessage",i[i.renameOnType=94]="renameOnType",i[i.renderControlCharacters=95]="renderControlCharacters",i[i.renderFinalNewline=96]="renderFinalNewline",i[i.renderLineHighlight=97]="renderLineHighlight",i[i.renderLineHighlightOnlyWhenFocus=98]="renderLineHighlightOnlyWhenFocus",i[i.renderValidationDecorations=99]="renderValidationDecorations",i[i.renderWhitespace=100]="renderWhitespace",i[i.revealHorizontalRightPadding=101]="revealHorizontalRightPadding",i[i.roundedSelection=102]="roundedSelection",i[i.rulers=103]="rulers",i[i.scrollbar=104]="scrollbar",i[i.scrollBeyondLastColumn=105]="scrollBeyondLastColumn",i[i.scrollBeyondLastLine=106]="scrollBeyondLastLine",i[i.scrollPredominantAxis=107]="scrollPredominantAxis",i[i.selectionClipboard=108]="selectionClipboard",i[i.selectionHighlight=109]="selectionHighlight",i[i.selectOnLineNumbers=110]="selectOnLineNumbers",i[i.showFoldingControls=111]="showFoldingControls",i[i.showUnused=112]="showUnused",i[i.snippetSuggestions=113]="snippetSuggestions",i[i.smartSelect=114]="smartSelect",i[i.smoothScrolling=115]="smoothScrolling",i[i.stickyScroll=116]="stickyScroll",i[i.stickyTabStops=117]="stickyTabStops",i[i.stopRenderingLineAfter=118]="stopRenderingLineAfter",i[i.suggest=119]="suggest",i[i.suggestFontSize=120]="suggestFontSize",i[i.suggestLineHeight=121]="suggestLineHeight",i[i.suggestOnTriggerCharacters=122]="suggestOnTriggerCharacters",i[i.suggestSelection=123]="suggestSelection",i[i.tabCompletion=124]="tabCompletion",i[i.tabIndex=125]="tabIndex",i[i.unicodeHighlighting=126]="unicodeHighlighting",i[i.unusualLineTerminators=127]="unusualLineTerminators",i[i.useShadowDOM=128]="useShadowDOM",i[i.useTabStops=129]="useTabStops",i[i.wordBreak=130]="wordBreak",i[i.wordSegmenterLocales=131]="wordSegmenterLocales",i[i.wordSeparators=132]="wordSeparators",i[i.wordWrap=133]="wordWrap",i[i.wordWrapBreakAfterCharacters=134]="wordWrapBreakAfterCharacters",i[i.wordWrapBreakBeforeCharacters=135]="wordWrapBreakBeforeCharacters",i[i.wordWrapColumn=136]="wordWrapColumn",i[i.wordWrapOverride1=137]="wordWrapOverride1",i[i.wordWrapOverride2=138]="wordWrapOverride2",i[i.wrappingIndent=139]="wrappingIndent",i[i.wrappingStrategy=140]="wrappingStrategy",i[i.showDeprecated=141]="showDeprecated",i[i.inlayHints=142]="inlayHints",i[i.editorClassName=143]="editorClassName",i[i.pixelRatio=144]="pixelRatio",i[i.tabFocusMode=145]="tabFocusMode",i[i.layoutInfo=146]="layoutInfo",i[i.wrappingInfo=147]="wrappingInfo",i[i.defaultColorDecorators=148]="defaultColorDecorators",i[i.colorDecoratorsActivatedOn=149]="colorDecoratorsActivatedOn",i[i.inlineCompletionsAccessibilityVerbose=150]="inlineCompletionsAccessibilityVerbose"})(d9||(d9={}));var h9;(function(i){i[i.TextDefined=0]="TextDefined",i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(h9||(h9={}));var f9;(function(i){i[i.LF=0]="LF",i[i.CRLF=1]="CRLF"})(f9||(f9={}));var g9;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=3]="Right"})(g9||(g9={}));var m9;(function(i){i[i.Increase=0]="Increase",i[i.Decrease=1]="Decrease"})(m9||(m9={}));var p9;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(p9||(p9={}));var _9;(function(i){i[i.Both=0]="Both",i[i.Right=1]="Right",i[i.Left=2]="Left",i[i.None=3]="None"})(_9||(_9={}));var v9;(function(i){i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(v9||(v9={}));var b9;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(b9||(b9={}));var y9;(function(i){i[i.Invoke=0]="Invoke",i[i.Automatic=1]="Automatic"})(y9||(y9={}));var w9;(function(i){i[i.DependsOnKbLayout=-1]="DependsOnKbLayout",i[i.Unknown=0]="Unknown",i[i.Backspace=1]="Backspace",i[i.Tab=2]="Tab",i[i.Enter=3]="Enter",i[i.Shift=4]="Shift",i[i.Ctrl=5]="Ctrl",i[i.Alt=6]="Alt",i[i.PauseBreak=7]="PauseBreak",i[i.CapsLock=8]="CapsLock",i[i.Escape=9]="Escape",i[i.Space=10]="Space",i[i.PageUp=11]="PageUp",i[i.PageDown=12]="PageDown",i[i.End=13]="End",i[i.Home=14]="Home",i[i.LeftArrow=15]="LeftArrow",i[i.UpArrow=16]="UpArrow",i[i.RightArrow=17]="RightArrow",i[i.DownArrow=18]="DownArrow",i[i.Insert=19]="Insert",i[i.Delete=20]="Delete",i[i.Digit0=21]="Digit0",i[i.Digit1=22]="Digit1",i[i.Digit2=23]="Digit2",i[i.Digit3=24]="Digit3",i[i.Digit4=25]="Digit4",i[i.Digit5=26]="Digit5",i[i.Digit6=27]="Digit6",i[i.Digit7=28]="Digit7",i[i.Digit8=29]="Digit8",i[i.Digit9=30]="Digit9",i[i.KeyA=31]="KeyA",i[i.KeyB=32]="KeyB",i[i.KeyC=33]="KeyC",i[i.KeyD=34]="KeyD",i[i.KeyE=35]="KeyE",i[i.KeyF=36]="KeyF",i[i.KeyG=37]="KeyG",i[i.KeyH=38]="KeyH",i[i.KeyI=39]="KeyI",i[i.KeyJ=40]="KeyJ",i[i.KeyK=41]="KeyK",i[i.KeyL=42]="KeyL",i[i.KeyM=43]="KeyM",i[i.KeyN=44]="KeyN",i[i.KeyO=45]="KeyO",i[i.KeyP=46]="KeyP",i[i.KeyQ=47]="KeyQ",i[i.KeyR=48]="KeyR",i[i.KeyS=49]="KeyS",i[i.KeyT=50]="KeyT",i[i.KeyU=51]="KeyU",i[i.KeyV=52]="KeyV",i[i.KeyW=53]="KeyW",i[i.KeyX=54]="KeyX",i[i.KeyY=55]="KeyY",i[i.KeyZ=56]="KeyZ",i[i.Meta=57]="Meta",i[i.ContextMenu=58]="ContextMenu",i[i.F1=59]="F1",i[i.F2=60]="F2",i[i.F3=61]="F3",i[i.F4=62]="F4",i[i.F5=63]="F5",i[i.F6=64]="F6",i[i.F7=65]="F7",i[i.F8=66]="F8",i[i.F9=67]="F9",i[i.F10=68]="F10",i[i.F11=69]="F11",i[i.F12=70]="F12",i[i.F13=71]="F13",i[i.F14=72]="F14",i[i.F15=73]="F15",i[i.F16=74]="F16",i[i.F17=75]="F17",i[i.F18=76]="F18",i[i.F19=77]="F19",i[i.F20=78]="F20",i[i.F21=79]="F21",i[i.F22=80]="F22",i[i.F23=81]="F23",i[i.F24=82]="F24",i[i.NumLock=83]="NumLock",i[i.ScrollLock=84]="ScrollLock",i[i.Semicolon=85]="Semicolon",i[i.Equal=86]="Equal",i[i.Comma=87]="Comma",i[i.Minus=88]="Minus",i[i.Period=89]="Period",i[i.Slash=90]="Slash",i[i.Backquote=91]="Backquote",i[i.BracketLeft=92]="BracketLeft",i[i.Backslash=93]="Backslash",i[i.BracketRight=94]="BracketRight",i[i.Quote=95]="Quote",i[i.OEM_8=96]="OEM_8",i[i.IntlBackslash=97]="IntlBackslash",i[i.Numpad0=98]="Numpad0",i[i.Numpad1=99]="Numpad1",i[i.Numpad2=100]="Numpad2",i[i.Numpad3=101]="Numpad3",i[i.Numpad4=102]="Numpad4",i[i.Numpad5=103]="Numpad5",i[i.Numpad6=104]="Numpad6",i[i.Numpad7=105]="Numpad7",i[i.Numpad8=106]="Numpad8",i[i.Numpad9=107]="Numpad9",i[i.NumpadMultiply=108]="NumpadMultiply",i[i.NumpadAdd=109]="NumpadAdd",i[i.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",i[i.NumpadSubtract=111]="NumpadSubtract",i[i.NumpadDecimal=112]="NumpadDecimal",i[i.NumpadDivide=113]="NumpadDivide",i[i.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",i[i.ABNT_C1=115]="ABNT_C1",i[i.ABNT_C2=116]="ABNT_C2",i[i.AudioVolumeMute=117]="AudioVolumeMute",i[i.AudioVolumeUp=118]="AudioVolumeUp",i[i.AudioVolumeDown=119]="AudioVolumeDown",i[i.BrowserSearch=120]="BrowserSearch",i[i.BrowserHome=121]="BrowserHome",i[i.BrowserBack=122]="BrowserBack",i[i.BrowserForward=123]="BrowserForward",i[i.MediaTrackNext=124]="MediaTrackNext",i[i.MediaTrackPrevious=125]="MediaTrackPrevious",i[i.MediaStop=126]="MediaStop",i[i.MediaPlayPause=127]="MediaPlayPause",i[i.LaunchMediaPlayer=128]="LaunchMediaPlayer",i[i.LaunchMail=129]="LaunchMail",i[i.LaunchApp2=130]="LaunchApp2",i[i.Clear=131]="Clear",i[i.MAX_VALUE=132]="MAX_VALUE"})(w9||(w9={}));var C9;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(C9||(C9={}));var S9;(function(i){i[i.Unnecessary=1]="Unnecessary",i[i.Deprecated=2]="Deprecated"})(S9||(S9={}));var k9;(function(i){i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter"})(k9||(k9={}));var x9;(function(i){i[i.Normal=1]="Normal",i[i.Underlined=2]="Underlined"})(x9||(x9={}));var E9;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.TEXTAREA=1]="TEXTAREA",i[i.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",i[i.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",i[i.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",i[i.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",i[i.CONTENT_TEXT=6]="CONTENT_TEXT",i[i.CONTENT_EMPTY=7]="CONTENT_EMPTY",i[i.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",i[i.CONTENT_WIDGET=9]="CONTENT_WIDGET",i[i.OVERVIEW_RULER=10]="OVERVIEW_RULER",i[i.SCROLLBAR=11]="SCROLLBAR",i[i.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",i[i.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(E9||(E9={}));var T9;(function(i){i[i.AIGenerated=1]="AIGenerated"})(T9||(T9={}));var L9;(function(i){i[i.Invoke=0]="Invoke",i[i.Automatic=1]="Automatic"})(L9||(L9={}));var I9;(function(i){i[i.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",i[i.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",i[i.TOP_CENTER=2]="TOP_CENTER"})(I9||(I9={}));var D9;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(D9||(D9={}));var N9;(function(i){i[i.Word=0]="Word",i[i.Line=1]="Line",i[i.Suggest=2]="Suggest"})(N9||(N9={}));var R9;(function(i){i[i.Left=0]="Left",i[i.Right=1]="Right",i[i.None=2]="None",i[i.LeftOfInjectedText=3]="LeftOfInjectedText",i[i.RightOfInjectedText=4]="RightOfInjectedText"})(R9||(R9={}));var A9;(function(i){i[i.Off=0]="Off",i[i.On=1]="On",i[i.Relative=2]="Relative",i[i.Interval=3]="Interval",i[i.Custom=4]="Custom"})(A9||(A9={}));var P9;(function(i){i[i.None=0]="None",i[i.Text=1]="Text",i[i.Blocks=2]="Blocks"})(P9||(P9={}));var M9;(function(i){i[i.Smooth=0]="Smooth",i[i.Immediate=1]="Immediate"})(M9||(M9={}));var O9;(function(i){i[i.Auto=1]="Auto",i[i.Hidden=2]="Hidden",i[i.Visible=3]="Visible"})(O9||(O9={}));var F9;(function(i){i[i.LTR=0]="LTR",i[i.RTL=1]="RTL"})(F9||(F9={}));var B9;(function(i){i.Off="off",i.OnCode="onCode",i.On="on"})(B9||(B9={}));var V9;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(V9||(V9={}));var W9;(function(i){i[i.File=0]="File",i[i.Module=1]="Module",i[i.Namespace=2]="Namespace",i[i.Package=3]="Package",i[i.Class=4]="Class",i[i.Method=5]="Method",i[i.Property=6]="Property",i[i.Field=7]="Field",i[i.Constructor=8]="Constructor",i[i.Enum=9]="Enum",i[i.Interface=10]="Interface",i[i.Function=11]="Function",i[i.Variable=12]="Variable",i[i.Constant=13]="Constant",i[i.String=14]="String",i[i.Number=15]="Number",i[i.Boolean=16]="Boolean",i[i.Array=17]="Array",i[i.Object=18]="Object",i[i.Key=19]="Key",i[i.Null=20]="Null",i[i.EnumMember=21]="EnumMember",i[i.Struct=22]="Struct",i[i.Event=23]="Event",i[i.Operator=24]="Operator",i[i.TypeParameter=25]="TypeParameter"})(W9||(W9={}));var H9;(function(i){i[i.Deprecated=1]="Deprecated"})(H9||(H9={}));var U9;(function(i){i[i.Hidden=0]="Hidden",i[i.Blink=1]="Blink",i[i.Smooth=2]="Smooth",i[i.Phase=3]="Phase",i[i.Expand=4]="Expand",i[i.Solid=5]="Solid"})(U9||(U9={}));var z9;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(z9||(z9={}));var j9;(function(i){i[i.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",i[i.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",i[i.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",i[i.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(j9||(j9={}));var $9;(function(i){i[i.None=0]="None",i[i.Same=1]="Same",i[i.Indent=2]="Indent",i[i.DeepIndent=3]="DeepIndent"})($9||($9={}));const Cv=class Cv{static chord(e,t){return X8e(e,t)}};Cv.CtrlCmd=2048,Cv.Shift=1024,Cv.Alt=512,Cv.WinCtrl=256;let q9=Cv;function the(){return{editor:void 0,languages:void 0,CancellationTokenSource:Wy,Emitter:se,KeyCode:w9,KeyMod:q9,Position:ue,Range:J,Selection:Gn,SelectionDirection:F9,MarkerSeverity:C9,MarkerTag:S9,Uri:Ut,Token:vk}}function x7e(i,e){const t=i;typeof t.vscodeWindowId!="number"&&Object.defineProperty(t,"vscodeWindowId",{get:()=>e})}const Kn=window;function nhe(i){return i}class E7e{constructor(e,t){this.lastCache=void 0,this.lastArgKey=void 0,typeof e=="function"?(this._fn=e,this._computeKey=nhe):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}}class GQ{get cachedValues(){return this._map}constructor(e,t){this._map=new Map,this._map2=new Map,typeof e=="function"?(this._fn=e,this._computeKey=nhe):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);const n=this._fn(e);return this._map.set(e,n),this._map2.set(t,n),n}}class Em{constructor(e){this.executor=e,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}function T7e(i){return!i||typeof i!="string"?!0:i.trim().length===0}const L7e=/{(\d+)}/g;function K9(i,...e){return e.length===0?i:i.replace(L7e,function(t,n){const s=parseInt(n,10);return isNaN(s)||s<0||s>=e.length?t:e[s]})}function I7e(i){return i.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function zC(i){return i.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function wf(i){return i.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function H4(i,e){if(!i||!e)return i;const t=e.length;if(t===0||i.length===0)return i;let n=0;for(;i.indexOf(e,n)===n;)n=n+t;return i.substring(n)}function D7e(i,e){if(!i)return i;const t=e.length,n=i.length;if(t===0||n===0)return i;let s=n,r=-1;for(;r=i.lastIndexOf(e,s-1),!(r===-1||r+t!==s);){if(r===0)return"";s=r}return i.substring(0,s)}function N7e(i){return i.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function ihe(i,e,t={}){if(!i)throw new Error("Cannot create regex from empty string");e||(i=wf(i)),t.wholeWord&&(/\B/.test(i.charAt(0))||(i="\\b"+i),/\B/.test(i.charAt(i.length-1))||(i=i+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(i,n)}function R7e(i){return i.source==="^"||i.source==="^$"||i.source==="$"||i.source==="^\\s*$"?!1:!!(i.exec("")&&i.lastIndex===0)}function Hy(i){return i.split(/\r\n|\r|\n/)}function Ca(i){for(let e=0,t=i.length;e<t;e++){const n=i.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function po(i,e=0,t=i.length){for(let n=e;n<t;n++){const s=i.charCodeAt(n);if(s!==32&&s!==9)return i.substring(e,n)}return i.substring(e,t)}function k1(i,e=i.length-1){for(let t=e;t>=0;t--){const n=i.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function G9(i,e){return i<e?-1:i>e?1:0}function AH(i,e,t=0,n=i.length,s=0,r=e.length){for(;t<n&&s<r;t++,s++){const l=i.charCodeAt(t),c=e.charCodeAt(s);if(l<c)return-1;if(l>c)return 1}const o=n-t,a=r-s;return o<a?-1:o>a?1:0}function YQ(i,e){return O2(i,e,0,i.length,0,e.length)}function O2(i,e,t=0,n=i.length,s=0,r=e.length){for(;t<n&&s<r;t++,s++){let l=i.charCodeAt(t),c=e.charCodeAt(s);if(l===c)continue;if(l>=128||c>=128)return AH(i.toLowerCase(),e.toLowerCase(),t,n,s,r);J_(l)&&(l-=32),J_(c)&&(c-=32);const u=l-c;if(u!==0)return u}const o=n-t,a=r-s;return o<a?-1:o>a?1:0}function FE(i){return i>=48&&i<=57}function J_(i){return i>=97&&i<=122}function wg(i){return i>=65&&i<=90}function ev(i,e){return i.length===e.length&&O2(i,e)===0}function PH(i,e){const t=e.length;return e.length>i.length?!1:O2(i,e,0,t)===0}function Y9(i,e){const t=Math.min(i.length,e.length);let n;for(n=0;n<t;n++)if(i.charCodeAt(n)!==e.charCodeAt(n))return n;return t}function Q9(i,e){const t=Math.min(i.length,e.length);let n;const s=i.length-1,r=e.length-1;for(n=0;n<t;n++)if(i.charCodeAt(s-n)!==e.charCodeAt(r-n))return n;return t}function As(i){return 55296<=i&&i<=56319}function $b(i){return 56320<=i&&i<=57343}function MH(i,e){return(i-55296<<10)+(e-56320)+65536}function qI(i,e,t){const n=i.charCodeAt(t);if(As(n)&&t+1<e){const s=i.charCodeAt(t+1);if($b(s))return MH(n,s)}return n}function A7e(i,e){const t=i.charCodeAt(e-1);if($b(t)&&e>1){const n=i.charCodeAt(e-2);if(As(n))return MH(n,t)}return t}class OH{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=A7e(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=qI(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class KI{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new OH(e,t)}nextGraphemeLength(){const e=GI.getInstance(),t=this._iterator,n=t.offset;let s=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const r=t.offset,o=e.getGraphemeBreakType(t.nextCodePoint());if(QQ(s,o)){t.setOffset(r);break}s=o}return t.offset-n}prevGraphemeLength(){const e=GI.getInstance(),t=this._iterator,n=t.offset;let s=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const r=t.offset,o=e.getGraphemeBreakType(t.prevCodePoint());if(QQ(o,s)){t.setOffset(r);break}s=o}return n-t.offset}eol(){return this._iterator.eol()}}function FH(i,e){return new KI(i,e).nextGraphemeLength()}function she(i,e){return new KI(i,e).prevGraphemeLength()}function P7e(i,e){e>0&&$b(i.charCodeAt(e))&&e--;const t=e+FH(i,e);return[t-she(i,t),t]}let SO;function M7e(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function bk(i){return SO||(SO=M7e()),SO.test(i)}const O7e=/^[\t\n\r\x20-\x7E]*$/;function BH(i){return O7e.test(i)}const rhe=/[\u2028\u2029]/;function ohe(i){return rhe.test(i)}function Tm(i){return i>=11904&&i<=55215||i>=63744&&i<=64255||i>=65281&&i<=65374}function VH(i){return i>=127462&&i<=127487||i===8986||i===8987||i===9200||i===9203||i>=9728&&i<=10175||i===11088||i===11093||i>=127744&&i<=128591||i>=128640&&i<=128764||i>=128992&&i<=129008||i>=129280&&i<=129535||i>=129648&&i<=129782}const F7e="\uFEFF";function WH(i){return!!(i&&i.length>0&&i.charCodeAt(0)===65279)}function ahe(i){return i=i%(2*26),i<26?String.fromCharCode(97+i):String.fromCharCode(65+i-26)}function QQ(i,e){return i===0?e!==5&&e!==7:i===2&&e===3?!1:i===4||i===2||i===3||e===4||e===2||e===3?!0:!(i===8&&(e===8||e===9||e===11||e===12)||(i===11||i===9)&&(e===9||e===10)||(i===12||i===10)&&e===10||e===5||e===13||e===7||i===1||i===13&&e===14||i===6&&e===6)}const Kp=class Kp{static getInstance(){return Kp._INSTANCE||(Kp._INSTANCE=new Kp),Kp._INSTANCE}constructor(){this._data=B7e()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,n=t.length/3;let s=1;for(;s<=n;)if(e<t[3*s])s=2*s;else if(e>t[3*s+1])s=2*s+1;else return t[3*s+2];return 0}};Kp._INSTANCE=null;let GI=Kp;function B7e(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function V7e(i,e){if(i===0)return 0;const t=W7e(i,e);if(t!==void 0)return t;const n=new OH(e,i);return n.prevCodePoint(),n.offset}function W7e(i,e){const t=new OH(e,i);let n=t.prevCodePoint();for(;H7e(n)||n===65039||n===8419;){if(t.offset===0)return;n=t.prevCodePoint()}if(!VH(n))return;let s=t.offset;return s>0&&t.prevCodePoint()===8205&&(s=t.offset),s}function H7e(i){return 127995<=i&&i<=127999}const Zu=class Zu{static getInstance(e){return Zu.cache.get(Array.from(e))}static getLocales(){return Zu._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};Zu.ambiguousCharacterData=new Em(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}')),Zu.cache=new E7e({getCacheKey:JSON.stringify},e=>{function t(u){const d=new Map;for(let h=0;h<u.length;h+=2)d.set(u[h],u[h+1]);return d}function n(u,d){const h=new Map(u);for(const[g,p]of d)h.set(g,p);return h}function s(u,d){if(!u)return d;const h=new Map;for(const[g,p]of u)d.has(g)&&h.set(g,p);return h}const r=Zu.ambiguousCharacterData.value;let o=e.filter(u=>!u.startsWith("_")&&u in r);o.length===0&&(o=["_default"]);let a;for(const u of o){const d=t(r[u]);a=s(a,d)}const l=t(r._common),c=n(l,a);return new Zu(c)}),Zu._locales=new Em(()=>Object.keys(Zu.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")));let yk=Zu;const Sv=class Sv{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(Sv.getRawData())),this._data}static isInvisibleCharacter(e){return Sv.getData().has(e)}static get codePoints(){return Sv.getData()}};Sv._data=void 0;let jC=Sv;const BN=class BN{constructor(){this.mapWindowIdToZoomFactor=new Map}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}getWindowId(e){return e.vscodeWindowId}};BN.INSTANCE=new BN;let X9=BN;function lhe(i,e,t){typeof e=="string"&&(e=i.matchMedia(e)),e.addEventListener("change",t)}function U7e(i){return X9.INSTANCE.getZoomFactor(i)}const Uy=navigator.userAgent,vc=Uy.indexOf("Firefox")>=0,U4=Uy.indexOf("AppleWebKit")>=0,F2=Uy.indexOf("Chrome")>=0,Lm=!F2&&Uy.indexOf("Safari")>=0,che=!F2&&!Lm&&U4;Uy.indexOf("Electron/")>=0;const XQ=Uy.indexOf("Android")>=0;let kO=!1;if(typeof Kn.matchMedia=="function"){const i=Kn.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=Kn.matchMedia("(display-mode: fullscreen)");kO=i.matches,lhe(Kn,i,({matches:t})=>{kO&&e.matches||(kO=t)})}const uhe={clipboard:{writeText:WI||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:WI||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},pointerEvents:Kn.PointerEvent&&("ontouchstart"in Kn||navigator.maxTouchPoints>0)};function Z9(i,e){if(typeof i=="number"){if(i===0)return null;const t=(i&65535)>>>0,n=(i&4294901760)>>>16;return n!==0?new xO([BE(t,e),BE(n,e)]):new xO([BE(t,e)])}else{const t=[];for(let n=0;n<i.length;n++)t.push(BE(i[n],e));return new xO(t)}}function BE(i,e){const t=!!(i&2048),n=!!(i&256),s=e===2?n:t,r=!!(i&1024),o=!!(i&512),a=e===2?t:n,l=i&255;return new J0(s,r,o,a,l)}class J0{constructor(e,t,n,s,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=s,this.keyCode=r}equals(e){return e instanceof J0&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class xO{constructor(e){if(e.length===0)throw V4("chords");this.chords=e}}class z7e{constructor(e,t,n,s,r,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=s,this.keyLabel=r,this.keyAriaLabel=o}}class j7e{}function $7e(i){if(i.charCode){const t=String.fromCharCode(i.charCode).toUpperCase();return Rh.fromString(t)}const e=i.keyCode;if(e===3)return 7;if(vc)switch(e){case 59:return 85;case 60:if(ia)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(rn)return 57;break}else if(U4){if(rn&&e===93)return 57;if(!rn&&e===92)return 57}return $de[e]||0}const q7e=rn?256:2048,K7e=512,G7e=1024,Y7e=rn?2048:256;class hi{constructor(e){var n;this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=(n=t.getModifierState)==null?void 0:n.call(t,"AltGraph"),this.keyCode=$7e(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=q7e),this.altKey&&(t|=K7e),this.shiftKey&&(t|=G7e),this.metaKey&&(t|=Y7e),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new J0(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}const ZQ=new WeakMap;function Q7e(i){if(!i.parent||i.parent===i)return null;try{const e=i.location,t=i.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return null}catch{return null}return i.parent}class X7e{static getSameOriginWindowChain(e){let t=ZQ.get(e);if(!t){t=[],ZQ.set(e,t);let n=e,s;do s=Q7e(n),s?t.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):t.push({window:new WeakRef(n),iframeElement:null}),n=s;while(n)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,s=0;const r=this.getSameOriginWindowChain(e);for(const o of r){const a=o.window.deref();if(n+=(a==null?void 0:a.scrollY)??0,s+=(a==null?void 0:a.scrollX)??0,a===t||!o.iframeElement)break;const l=o.iframeElement.getBoundingClientRect();n+=l.top,s+=l.left}return{top:n,left:s}}}class iu{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const n=X7e.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class e1{constructor(e,t=0,n=0){var r;this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t;let s=!1;if(F2){const o=navigator.userAgent.match(/Chrome\/(\d+)/);s=(o?parseInt(o[1]):123)<=122}if(e){const o=e,a=e,l=((r=e.view)==null?void 0:r.devicePixelRatio)||1;if(typeof o.wheelDeltaY<"u")s?this.deltaY=o.wheelDeltaY/(120*l):this.deltaY=o.wheelDeltaY/120;else if(typeof a.VERTICAL_AXIS<"u"&&a.axis===a.VERTICAL_AXIS)this.deltaY=-a.detail/3;else if(e.type==="wheel"){const c=e;c.deltaMode===c.DOM_DELTA_LINE?vc&&!rn?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof o.wheelDeltaX<"u")Lm&&Sa?this.deltaX=-(o.wheelDeltaX/120):s?this.deltaX=o.wheelDeltaX/(120*l):this.deltaX=o.wheelDeltaX/120;else if(typeof a.HORIZONTAL_AXIS<"u"&&a.axis===a.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const c=e;c.deltaMode===c.DOM_DELTA_LINE?vc&&!rn?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(s?this.deltaY=e.wheelDelta/(120*l):this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)==null||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)==null||e.stopPropagation()}}const dhe=Symbol("MicrotaskDelay");function J9(i){return!!i&&typeof i.then=="function"}function hhe(i){const e=new Wy,t=i(e.token),n=new Promise((s,r)=>{const o=e.token.onCancellationRequested(()=>{o.dispose(),r(new P2)});Promise.resolve(t).then(a=>{o.dispose(),e.dispose(),s(a)},a=>{o.dispose(),e.dispose(),r(a)})});return new class{cancel(){e.cancel(),e.dispose()}then(s,r){return n.then(s,r)}catch(s){return this.then(void 0,s)}finally(s){return n.finally(s)}}}class Z7e{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{if(this.queuedPromise=null,this.isDisposed)return;const n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(s=>{this.activePromise=null,t(s)},s=>{this.activePromise=null,n(s)})})}dispose(){this.isDisposed=!0}}const J7e=(i,e)=>{let t=!0;const n=setTimeout(()=>{t=!1,e()},i);return{isTriggered:()=>t,dispose:()=>{clearTimeout(n),t=!1}}},eFe=i=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,i())}),{isTriggered:()=>e,dispose:()=>{e=!1}}};class B2{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((s,r)=>{this.doResolve=s,this.doReject=r}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const s=this.task;return this.task=null,s()}}));const n=()=>{var s;this.deferred=null,(s=this.doResolve)==null||s.call(this,null)};return this.deferred=t===dhe?eFe(n):J7e(t,n),this.completionPromise}isTriggered(){var e;return!!((e=this.deferred)!=null&&e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.doReject)==null||e.call(this,new P2),this.completionPromise=null)}cancelTimeout(){var e;(e=this.deferred)==null||e.dispose(),this.deferred=null}dispose(){this.cancel()}}class fhe{constructor(e){this.delayer=new B2(e),this.throttler=new Z7e}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}function wk(i,e){return e?new Promise((t,n)=>{const s=setTimeout(()=>{r.dispose(),t()},i),r=e.onCancellationRequested(()=>{clearTimeout(s),r.dispose(),n(new P2)})}):hhe(t=>wk(i,t))}function e8(i,e=0,t){const n=setTimeout(()=>{i(),t&&s.dispose()},e),s=Dt(()=>{clearTimeout(n),t==null||t.deleteAndLeak(s)});return t==null||t.add(s),s}class x1{constructor(e,t){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new Dn("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new Dn("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class HH{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){var e;(e=this.disposable)==null||e.dispose(),this.disposable=void 0}cancelAndSet(e,t,n=globalThis){if(this.isDisposed)throw new Dn("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const s=n.setInterval(()=>{e()},t);this.disposable=Dt(()=>{n.clearInterval(s),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}}class so{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;(e=this.runner)==null||e.call(this)}}let ghe,$C;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?$C=(i,e)=>{Pde(()=>{if(t)return;const n=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,n-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:$C=(i,e,t)=>{const n=i.requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0);let s=!1;return{dispose(){s||(s=!0,i.cancelIdleCallback(n))}}},ghe=i=>$C(globalThis,i)})();class tFe{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(n){this._error=n}finally{this._didRun=!0}},this._handle=$C(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class nFe extends tFe{constructor(e){super(globalThis,e)}}class mhe{get isRejected(){var e;return((e=this.outcome)==null?void 0:e.outcome)===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new P2)}}var t8;(function(i){async function e(n){let s;const r=await Promise.all(n.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return r}i.settled=e;function t(n){return new Promise(async(s,r)=>{try{await n(s,r)}catch(o){r(o)}})}i.withAsyncBody=t})(t8||(t8={}));const ma=class ma{static fromArray(e){return new ma(t=>{t.emitMany(e)})}static fromPromise(e){return new ma(async t=>{t.emitMany(await e)})}static fromPromises(e){return new ma(async t=>{await Promise.all(e.map(async n=>t.emitOne(await n)))})}static merge(e){return new ma(async t=>{await Promise.all(e.map(async n=>{for await(const s of n)t.emitOne(s)}))})}constructor(e,t){this._state=0,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new se,queueMicrotask(async()=>{const n={emitOne:s=>this.emitOne(s),emitMany:s=>this.emitMany(s),reject:s=>this.reject(s)};try{await Promise.resolve(e(n)),this.resolve()}catch(s){this.reject(s)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await Le.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>{var t;return(t=this._onReturn)==null||t.call(this),{done:!0,value:void 0}}}}static map(e,t){return new ma(async n=>{for await(const s of e)n.emitOne(t(s))})}map(e){return ma.map(this,e)}static filter(e,t){return new ma(async n=>{for await(const s of e)t(s)&&n.emitOne(s)})}filter(e){return ma.filter(this,e)}static coalesce(e){return ma.filter(e,t=>!!t)}coalesce(){return ma.coalesce(this)}static async toPromise(e){const t=[];for await(const n of e)t.push(n);return t}toPromise(){return ma.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};ma.EMPTY=ma.fromArray([]);let JQ=ma;/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:phe,setPrototypeOf:eX,isFrozen:iFe,getPrototypeOf:sFe,getOwnPropertyDescriptor:rFe}=Object;let{freeze:ka,seal:bc,create:_he}=Object,{apply:n8,construct:i8}=typeof Reflect<"u"&&Reflect;ka||(ka=function(e){return e});bc||(bc=function(e){return e});n8||(n8=function(e,t,n){return e.apply(t,n)});i8||(i8=function(e,t){return new e(...t)});const VE=Wl(Array.prototype.forEach),tX=Wl(Array.prototype.pop),Aw=Wl(Array.prototype.push),iL=Wl(String.prototype.toLowerCase),EO=Wl(String.prototype.toString),nX=Wl(String.prototype.match),Pw=Wl(String.prototype.replace),oFe=Wl(String.prototype.indexOf),aFe=Wl(String.prototype.trim),jc=Wl(Object.prototype.hasOwnProperty),ha=Wl(RegExp.prototype.test),Mw=lFe(TypeError);function Wl(i){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return n8(i,e,n)}}function lFe(i){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i8(i,t)}}function Vn(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:iL;eX&&eX(i,null);let n=e.length;for(;n--;){let s=e[n];if(typeof s=="string"){const r=t(s);r!==s&&(iFe(e)||(e[n]=r),s=r)}i[s]=!0}return i}function cFe(i){for(let e=0;e<i.length;e++)jc(i,e)||(i[e]=null);return i}function xp(i){const e=_he(null);for(const[t,n]of phe(i))jc(i,t)&&(Array.isArray(n)?e[t]=cFe(n):n&&typeof n=="object"&&n.constructor===Object?e[t]=xp(n):e[t]=n);return e}function Ow(i,e){for(;i!==null;){const n=rFe(i,e);if(n){if(n.get)return Wl(n.get);if(typeof n.value=="function")return Wl(n.value)}i=sFe(i)}function t(){return null}return t}const iX=ka(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),TO=ka(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),LO=ka(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),uFe=ka(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),IO=ka(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),dFe=ka(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),sX=ka(["#text"]),rX=ka(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),DO=ka(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),oX=ka(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),WE=ka(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),hFe=bc(/\{\{[\w\W]*|[\w\W]*\}\}/gm),fFe=bc(/<%[\w\W]*|[\w\W]*%>/gm),gFe=bc(/\${[\w\W]*}/gm),mFe=bc(/^data-[\-\w.\u00B7-\uFFFF]/),pFe=bc(/^aria-[\-\w]+$/),vhe=bc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),_Fe=bc(/^(?:\w+script|data):/i),vFe=bc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),bhe=bc(/^html$/i),bFe=bc(/^[a-z][.\w]*(-[.\w]+)+$/i);var aX=Object.freeze({__proto__:null,MUSTACHE_EXPR:hFe,ERB_EXPR:fFe,TMPLIT_EXPR:gFe,DATA_ATTR:mFe,ARIA_ATTR:pFe,IS_ALLOWED_URI:vhe,IS_SCRIPT_OR_DATA:_Fe,ATTR_WHITESPACE:vFe,DOCTYPE_NAME:bhe,CUSTOM_ELEMENT:bFe});const Fw={element:1,text:3,progressingInstruction:7,comment:8,document:9},yFe=function(){return typeof window>"u"?null:window},wFe=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const s="data-tt-policy-suffix";t&&t.hasAttribute(s)&&(n=t.getAttribute(s));const r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function yhe(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yFe();const e=mt=>yhe(mt);if(e.version="3.1.7",e.removed=[],!i||!i.document||i.document.nodeType!==Fw.document)return e.isSupported=!1,e;let{document:t}=i;const n=t,s=n.currentScript,{DocumentFragment:r,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:d,DOMParser:h,trustedTypes:g}=i,p=l.prototype,_=Ow(p,"cloneNode"),v=Ow(p,"remove"),y=Ow(p,"nextSibling"),w=Ow(p,"childNodes"),x=Ow(p,"parentNode");if(typeof o=="function"){const mt=t.createElement("template");mt.content&&mt.content.ownerDocument&&(t=mt.content.ownerDocument)}let k,T="";const{implementation:R,createNodeIterator:L,createDocumentFragment:I,getElementsByTagName:A}=t,{importNode:B}=n;let V={};e.isSupported=typeof phe=="function"&&typeof x=="function"&&R&&R.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:U,ERB_EXPR:W,TMPLIT_EXPR:G,DATA_ATTR:Z,ARIA_ATTR:ne,IS_SCRIPT_OR_DATA:fe,ATTR_WHITESPACE:te,CUSTOM_ELEMENT:ce}=aX;let{IS_ALLOWED_URI:ve}=aX,X=null;const oe=Vn({},[...iX,...TO,...LO,...IO,...sX]);let Ne=null;const Ie=Vn({},[...rX,...DO,...oX,...WE]);let Oe=Object.seal(_he(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),it=null,We=null,at=!0,Ft=!0,_t=!1,Nt=!0,Zt=!1,on=!0,zn=!1,sr=!1,Or=!1,Ts=!1,No=!1,Hs=!1,wr=!0,Ro=!1;const jl="user-content-";let aa=!0,Ao=!1,Fr={},yi=null;const Ti=Vn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Po=null;const La=Vn({},["audio","video","img","source","image","track"]);let Cr=null;const cs=Vn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Us="http://www.w3.org/1998/Math/MathML",lo="http://www.w3.org/2000/svg",Ci="http://www.w3.org/1999/xhtml";let ft=Ci,Ia=!1,Br=null;const hn=Vn({},[Us,lo,Ci],EO);let Vr=null;const ns=["application/xhtml+xml","text/html"],Wr="text/html";let ri=null,Sr=null;const la=t.createElement("form"),Bi=function(de){return de instanceof RegExp||de instanceof Function},rr=function(){let de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Sr&&Sr===de)){if((!de||typeof de!="object")&&(de={}),de=xp(de),Vr=ns.indexOf(de.PARSER_MEDIA_TYPE)===-1?Wr:de.PARSER_MEDIA_TYPE,ri=Vr==="application/xhtml+xml"?EO:iL,X=jc(de,"ALLOWED_TAGS")?Vn({},de.ALLOWED_TAGS,ri):oe,Ne=jc(de,"ALLOWED_ATTR")?Vn({},de.ALLOWED_ATTR,ri):Ie,Br=jc(de,"ALLOWED_NAMESPACES")?Vn({},de.ALLOWED_NAMESPACES,EO):hn,Cr=jc(de,"ADD_URI_SAFE_ATTR")?Vn(xp(cs),de.ADD_URI_SAFE_ATTR,ri):cs,Po=jc(de,"ADD_DATA_URI_TAGS")?Vn(xp(La),de.ADD_DATA_URI_TAGS,ri):La,yi=jc(de,"FORBID_CONTENTS")?Vn({},de.FORBID_CONTENTS,ri):Ti,it=jc(de,"FORBID_TAGS")?Vn({},de.FORBID_TAGS,ri):{},We=jc(de,"FORBID_ATTR")?Vn({},de.FORBID_ATTR,ri):{},Fr=jc(de,"USE_PROFILES")?de.USE_PROFILES:!1,at=de.ALLOW_ARIA_ATTR!==!1,Ft=de.ALLOW_DATA_ATTR!==!1,_t=de.ALLOW_UNKNOWN_PROTOCOLS||!1,Nt=de.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Zt=de.SAFE_FOR_TEMPLATES||!1,on=de.SAFE_FOR_XML!==!1,zn=de.WHOLE_DOCUMENT||!1,Ts=de.RETURN_DOM||!1,No=de.RETURN_DOM_FRAGMENT||!1,Hs=de.RETURN_TRUSTED_TYPE||!1,Or=de.FORCE_BODY||!1,wr=de.SANITIZE_DOM!==!1,Ro=de.SANITIZE_NAMED_PROPS||!1,aa=de.KEEP_CONTENT!==!1,Ao=de.IN_PLACE||!1,ve=de.ALLOWED_URI_REGEXP||vhe,ft=de.NAMESPACE||Ci,Oe=de.CUSTOM_ELEMENT_HANDLING||{},de.CUSTOM_ELEMENT_HANDLING&&Bi(de.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Oe.tagNameCheck=de.CUSTOM_ELEMENT_HANDLING.tagNameCheck),de.CUSTOM_ELEMENT_HANDLING&&Bi(de.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Oe.attributeNameCheck=de.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),de.CUSTOM_ELEMENT_HANDLING&&typeof de.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Oe.allowCustomizedBuiltInElements=de.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Zt&&(Ft=!1),No&&(Ts=!0),Fr&&(X=Vn({},sX),Ne=[],Fr.html===!0&&(Vn(X,iX),Vn(Ne,rX)),Fr.svg===!0&&(Vn(X,TO),Vn(Ne,DO),Vn(Ne,WE)),Fr.svgFilters===!0&&(Vn(X,LO),Vn(Ne,DO),Vn(Ne,WE)),Fr.mathMl===!0&&(Vn(X,IO),Vn(Ne,oX),Vn(Ne,WE))),de.ADD_TAGS&&(X===oe&&(X=xp(X)),Vn(X,de.ADD_TAGS,ri)),de.ADD_ATTR&&(Ne===Ie&&(Ne=xp(Ne)),Vn(Ne,de.ADD_ATTR,ri)),de.ADD_URI_SAFE_ATTR&&Vn(Cr,de.ADD_URI_SAFE_ATTR,ri),de.FORBID_CONTENTS&&(yi===Ti&&(yi=xp(yi)),Vn(yi,de.FORBID_CONTENTS,ri)),aa&&(X["#text"]=!0),zn&&Vn(X,["html","head","body"]),X.table&&(Vn(X,["tbody"]),delete it.tbody),de.TRUSTED_TYPES_POLICY){if(typeof de.TRUSTED_TYPES_POLICY.createHTML!="function")throw Mw('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof de.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Mw('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');k=de.TRUSTED_TYPES_POLICY,T=k.createHTML("")}else k===void 0&&(k=wFe(g,s)),k!==null&&typeof T=="string"&&(T=k.createHTML(""));ka&&ka(de),Sr=de}},kt=Vn({},["mi","mo","mn","ms","mtext"]),$=Vn({},["annotation-xml"]),q=Vn({},["title","style","font","a","script"]),Q=Vn({},[...TO,...LO,...uFe]),ie=Vn({},[...IO,...dFe]),ae=function(de){let je=x(de);(!je||!je.tagName)&&(je={namespaceURI:ft,tagName:"template"});const dt=iL(de.tagName),oi=iL(je.tagName);return Br[de.namespaceURI]?de.namespaceURI===lo?je.namespaceURI===Ci?dt==="svg":je.namespaceURI===Us?dt==="svg"&&(oi==="annotation-xml"||kt[oi]):!!Q[dt]:de.namespaceURI===Us?je.namespaceURI===Ci?dt==="math":je.namespaceURI===lo?dt==="math"&&$[oi]:!!ie[dt]:de.namespaceURI===Ci?je.namespaceURI===lo&&!$[oi]||je.namespaceURI===Us&&!kt[oi]?!1:!ie[dt]&&(q[dt]||!Q[dt]):!!(Vr==="application/xhtml+xml"&&Br[de.namespaceURI]):!1},me=function(de){Aw(e.removed,{element:de});try{x(de).removeChild(de)}catch{v(de)}},Ce=function(de,je){try{Aw(e.removed,{attribute:je.getAttributeNode(de),from:je})}catch{Aw(e.removed,{attribute:null,from:je})}if(je.removeAttribute(de),de==="is"&&!Ne[de])if(Ts||No)try{me(je)}catch{}else try{je.setAttribute(de,"")}catch{}},ze=function(de){let je=null,dt=null;if(Or)de="<remove></remove>"+de;else{const Be=nX(de,/^[\r\n\t ]+/);dt=Be&&Be[0]}Vr==="application/xhtml+xml"&&ft===Ci&&(de='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+de+"</body></html>");const oi=k?k.createHTML(de):de;if(ft===Ci)try{je=new h().parseFromString(oi,Vr)}catch{}if(!je||!je.documentElement){je=R.createDocument(ft,"template",null);try{je.documentElement.innerHTML=Ia?T:oi}catch{}}const st=je.body||je.documentElement;return de&&dt&&st.insertBefore(t.createTextNode(dt),st.childNodes[0]||null),ft===Ci?A.call(je,zn?"html":"body")[0]:zn?je.documentElement:st},Ye=function(de){return L.call(de.ownerDocument||de,de,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Rt=function(de){return de instanceof d&&(typeof de.nodeName!="string"||typeof de.textContent!="string"||typeof de.removeChild!="function"||!(de.attributes instanceof u)||typeof de.removeAttribute!="function"||typeof de.setAttribute!="function"||typeof de.namespaceURI!="string"||typeof de.insertBefore!="function"||typeof de.hasChildNodes!="function")},vn=function(de){return typeof a=="function"&&de instanceof a},an=function(de,je,dt){V[de]&&VE(V[de],oi=>{oi.call(e,je,dt,Sr)})},Qn=function(de){let je=null;if(an("beforeSanitizeElements",de,null),Rt(de))return me(de),!0;const dt=ri(de.nodeName);if(an("uponSanitizeElement",de,{tagName:dt,allowedTags:X}),de.hasChildNodes()&&!vn(de.firstElementChild)&&ha(/<[/\w]/g,de.innerHTML)&&ha(/<[/\w]/g,de.textContent)||de.nodeType===Fw.progressingInstruction||on&&de.nodeType===Fw.comment&&ha(/<[/\w]/g,de.data))return me(de),!0;if(!X[dt]||it[dt]){if(!it[dt]&&is(dt)&&(Oe.tagNameCheck instanceof RegExp&&ha(Oe.tagNameCheck,dt)||Oe.tagNameCheck instanceof Function&&Oe.tagNameCheck(dt)))return!1;if(aa&&!yi[dt]){const oi=x(de)||de.parentNode,st=w(de)||de.childNodes;if(st&&oi){const Be=st.length;for(let vt=Be-1;vt>=0;--vt){const ct=_(st[vt],!0);ct.__removalCount=(de.__removalCount||0)+1,oi.insertBefore(ct,y(de))}}}return me(de),!0}return de instanceof l&&!ae(de)||(dt==="noscript"||dt==="noembed"||dt==="noframes")&&ha(/<\/no(script|embed|frames)/i,de.innerHTML)?(me(de),!0):(Zt&&de.nodeType===Fw.text&&(je=de.textContent,VE([U,W,G],oi=>{je=Pw(je,oi," ")}),de.textContent!==je&&(Aw(e.removed,{element:de.cloneNode()}),de.textContent=je)),an("afterSanitizeElements",de,null),!1)},kn=function(de,je,dt){if(wr&&(je==="id"||je==="name")&&(dt in t||dt in la))return!1;if(!(Ft&&!We[je]&&ha(Z,je))){if(!(at&&ha(ne,je))){if(!Ne[je]||We[je]){if(!(is(de)&&(Oe.tagNameCheck instanceof RegExp&&ha(Oe.tagNameCheck,de)||Oe.tagNameCheck instanceof Function&&Oe.tagNameCheck(de))&&(Oe.attributeNameCheck instanceof RegExp&&ha(Oe.attributeNameCheck,je)||Oe.attributeNameCheck instanceof Function&&Oe.attributeNameCheck(je))||je==="is"&&Oe.allowCustomizedBuiltInElements&&(Oe.tagNameCheck instanceof RegExp&&ha(Oe.tagNameCheck,dt)||Oe.tagNameCheck instanceof Function&&Oe.tagNameCheck(dt))))return!1}else if(!Cr[je]){if(!ha(ve,Pw(dt,te,""))){if(!((je==="src"||je==="xlink:href"||je==="href")&&de!=="script"&&oFe(dt,"data:")===0&&Po[de])){if(!(_t&&!ha(fe,Pw(dt,te,"")))){if(dt)return!1}}}}}}return!0},is=function(de){return de!=="annotation-xml"&&nX(de,ce)},Vi=function(de){an("beforeSanitizeAttributes",de,null);const{attributes:je}=de;if(!je)return;const dt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ne};let oi=je.length;for(;oi--;){const st=je[oi],{name:Be,namespaceURI:vt,value:ct}=st,fn=ri(Be);let Gt=Be==="value"?ct:aFe(ct);if(dt.attrName=fn,dt.attrValue=Gt,dt.keepAttr=!0,dt.forceKeepAttr=void 0,an("uponSanitizeAttribute",de,dt),Gt=dt.attrValue,dt.forceKeepAttr||(Ce(Be,de),!dt.keepAttr))continue;if(!Nt&&ha(/\/>/i,Gt)){Ce(Be,de);continue}Zt&&VE([U,W,G],Ot=>{Gt=Pw(Gt,Ot," ")});const zs=ri(de.nodeName);if(kn(zs,fn,Gt)){if(Ro&&(fn==="id"||fn==="name")&&(Ce(Be,de),Gt=jl+Gt),on&&ha(/((--!?|])>)|<\/(style|title)/i,Gt)){Ce(Be,de);continue}if(k&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!vt)switch(g.getAttributeType(zs,fn)){case"TrustedHTML":{Gt=k.createHTML(Gt);break}case"TrustedScriptURL":{Gt=k.createScriptURL(Gt);break}}try{vt?de.setAttributeNS(vt,Be,Gt):de.setAttribute(Be,Gt),Rt(de)?me(de):tX(e.removed)}catch{}}}an("afterSanitizeAttributes",de,null)},cl=function mt(de){let je=null;const dt=Ye(de);for(an("beforeSanitizeShadowDOM",de,null);je=dt.nextNode();)an("uponSanitizeShadowNode",je,null),!Qn(je)&&(je.content instanceof r&&mt(je.content),Vi(je));an("afterSanitizeShadowDOM",de,null)};return e.sanitize=function(mt){let de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},je=null,dt=null,oi=null,st=null;if(Ia=!mt,Ia&&(mt="<!-->"),typeof mt!="string"&&!vn(mt))if(typeof mt.toString=="function"){if(mt=mt.toString(),typeof mt!="string")throw Mw("dirty is not a string, aborting")}else throw Mw("toString is not a function");if(!e.isSupported)return mt;if(sr||rr(de),e.removed=[],typeof mt=="string"&&(Ao=!1),Ao){if(mt.nodeName){const ct=ri(mt.nodeName);if(!X[ct]||it[ct])throw Mw("root node is forbidden and cannot be sanitized in-place")}}else if(mt instanceof a)je=ze("<!---->"),dt=je.ownerDocument.importNode(mt,!0),dt.nodeType===Fw.element&&dt.nodeName==="BODY"||dt.nodeName==="HTML"?je=dt:je.appendChild(dt);else{if(!Ts&&!Zt&&!zn&&mt.indexOf("<")===-1)return k&&Hs?k.createHTML(mt):mt;if(je=ze(mt),!je)return Ts?null:Hs?T:""}je&&Or&&me(je.firstChild);const Be=Ye(Ao?mt:je);for(;oi=Be.nextNode();)Qn(oi)||(oi.content instanceof r&&cl(oi.content),Vi(oi));if(Ao)return mt;if(Ts){if(No)for(st=I.call(je.ownerDocument);je.firstChild;)st.appendChild(je.firstChild);else st=je;return(Ne.shadowroot||Ne.shadowrootmode)&&(st=B.call(n,st,!0)),st}let vt=zn?je.outerHTML:je.innerHTML;return zn&&X["!doctype"]&&je.ownerDocument&&je.ownerDocument.doctype&&je.ownerDocument.doctype.name&&ha(bhe,je.ownerDocument.doctype.name)&&(vt="<!DOCTYPE "+je.ownerDocument.doctype.name+`>
`+vt),Zt&&VE([U,W,G],ct=>{vt=Pw(vt,ct," ")}),k&&Hs?k.createHTML(vt):vt},e.setConfig=function(){let mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};rr(mt),sr=!0},e.clearConfig=function(){Sr=null,sr=!1},e.isValidAttribute=function(mt,de,je){Sr||rr({});const dt=ri(mt),oi=ri(de);return kn(dt,oi,je)},e.addHook=function(mt,de){typeof de=="function"&&(V[mt]=V[mt]||[],Aw(V[mt],de))},e.removeHook=function(mt){if(V[mt])return tX(V[mt])},e.removeHooks=function(mt){V[mt]&&(V[mt]=[])},e.removeAllHooks=function(){V={}},e}var Hd=yhe();Hd.version;Hd.isSupported;const whe=Hd.sanitize;Hd.setConfig;Hd.clearConfig;Hd.isValidAttribute;const Che=Hd.addHook,She=Hd.removeHook;Hd.removeHooks;Hd.removeAllHooks;var Wt;(function(i){i.inMemory="inmemory",i.vscode="vscode",i.internal="private",i.walkThrough="walkThrough",i.walkThroughSnippet="walkThroughSnippet",i.http="http",i.https="https",i.file="file",i.mailto="mailto",i.untitled="untitled",i.data="data",i.command="command",i.vscodeRemote="vscode-remote",i.vscodeRemoteResource="vscode-remote-resource",i.vscodeManagedRemoteResource="vscode-managed-remote-resource",i.vscodeUserData="vscode-userdata",i.vscodeCustomEditor="vscode-custom-editor",i.vscodeNotebookCell="vscode-notebook-cell",i.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",i.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",i.vscodeNotebookCellOutput="vscode-notebook-cell-output",i.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",i.vscodeNotebookMetadata="vscode-notebook-metadata",i.vscodeInteractiveInput="vscode-interactive-input",i.vscodeSettings="vscode-settings",i.vscodeWorkspaceTrust="vscode-workspace-trust",i.vscodeTerminal="vscode-terminal",i.vscodeChatCodeBlock="vscode-chat-code-block",i.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",i.vscodeChatSesssion="vscode-chat-editor",i.webviewPanel="webview-panel",i.vscodeWebview="vscode-webview",i.extension="extension",i.vscodeFileResource="vscode-file",i.tmp="tmp",i.vsls="vsls",i.vscodeSourceControl="vscode-scm",i.commentsInput="comment",i.codeSetting="code-setting",i.outputChannel="output"})(Wt||(Wt={}));function UH(i,e){return Ut.isUri(i)?ev(i.scheme,e):PH(i,e+":")}function lX(i,...e){return e.some(t=>UH(i,t))}const CFe="tkn";class SFe{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}get _remoteResourcesPath(){return $i.join(this._serverRootPath,Wt.vscodeRemoteResource)}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return Un(a),e}const t=e.authority;let n=this._hosts[t];n&&n.indexOf(":")!==-1&&n.indexOf("[")===-1&&(n=`[${n}]`);const s=this._ports[t],r=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return typeof r=="string"&&(o+=`&${CFe}=${encodeURIComponent(r)}`),Ut.from({scheme:By?this._preferredWebSchema:Wt.vscodeRemoteResource,authority:`${n}:${s}`,path:this._remoteResourcesPath,query:o})}}const khe=new SFe,kFe="vscode-app",kS=class kS{asBrowserUri(e){const t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===Wt.vscodeRemote?khe.rewrite(e):e.scheme===Wt.file&&(WI||F9e===`${Wt.vscodeFileResource}://${kS.FALLBACK_AUTHORITY}`)?e.with({scheme:Wt.vscodeFileResource,authority:e.authority||kS.FALLBACK_AUTHORITY,query:null,fragment:null}):e}toUri(e,t){if(Ut.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){const n=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(n))return Ut.joinPath(Ut.parse(n,!0),e);const s=a7e(n,e);return Ut.file(s)}return Ut.parse(t.toUrl(e))}};kS.FALLBACK_AUTHORITY=kFe;let s8=kS;const z4=new s8;var r8;(function(i){const e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);i.CoopAndCoep=Object.freeze(e.get("3"));const t="vscode-coi";function n(r){let o;typeof r=="string"?o=new URL(r).searchParams:r instanceof URL?o=r.searchParams:Ut.isUri(r)&&(o=new URL(r.toString(!0)).searchParams);const a=o==null?void 0:o.get(t);if(a)return e.get(a)}i.getHeadersFromQuery=n;function s(r,o,a){if(!globalThis.crossOriginIsolated)return;const l=o&&a?"3":a?"2":"1";r instanceof URLSearchParams?r.set(t,l):r[t]=l}i.addSearchParam=s})(r8||(r8={}));function xhe(i){return j4(i,0)}function j4(i,e){switch(typeof i){case"object":return i===null?zh(349,e):Array.isArray(i)?EFe(i,e):TFe(i,e);case"string":return zH(i,e);case"boolean":return xFe(i,e);case"number":return zh(i,e);case"undefined":return zh(937,e);default:return zh(617,e)}}function zh(i,e){return(e<<5)-e+i|0}function xFe(i,e){return zh(i?433:863,e)}function zH(i,e){e=zh(149417,e);for(let t=0,n=i.length;t<n;t++)e=zh(i.charCodeAt(t),e);return e}function EFe(i,e){return e=zh(104579,e),i.reduce((t,n)=>j4(n,t),e)}function TFe(i,e){return e=zh(181387,e),Object.keys(i).sort().reduce((t,n)=>(t=zH(n,t),j4(i[n],t)),e)}function NO(i,e,t=32){const n=t-e,s=~((1<<n)-1);return(i<<e|(s&i)>>>n)>>>0}function cX(i,e=0,t=i.byteLength,n=0){for(let s=0;s<t;s++)i[e+s]=n}function LFe(i,e,t="0"){for(;i.length<e;)i=t+i;return i}function Bw(i,e=32){return i instanceof ArrayBuffer?Array.from(new Uint8Array(i)).map(t=>t.toString(16).padStart(2,"0")).join(""):LFe((i>>>0).toString(16),e/4)}const VN=class VN{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const n=this._buff;let s=this._buffLen,r=this._leftoverHighSurrogate,o,a;for(r!==0?(o=r,a=-1,r=0):(o=e.charCodeAt(0),a=0);;){let l=o;if(As(o))if(a+1<t){const c=e.charCodeAt(a+1);$b(c)?(a++,l=MH(o,c)):l=65533}else{r=o;break}else $b(o)&&(l=65533);if(s=this._push(n,s,l),a++,a<t)o=e.charCodeAt(a);else break}this._buffLen=s,this._leftoverHighSurrogate=r}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),Bw(this._h0)+Bw(this._h1)+Bw(this._h2)+Bw(this._h3)+Bw(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,cX(this._buff,this._buffLen),this._buffLen>56&&(this._step(),cX(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=VN._bigBlock32,t=this._buffDV;for(let d=0;d<64;d+=4)e.setUint32(d,t.getUint32(d,!1),!1);for(let d=64;d<320;d+=4)e.setUint32(d,NO(e.getUint32(d-12,!1)^e.getUint32(d-32,!1)^e.getUint32(d-56,!1)^e.getUint32(d-64,!1),1),!1);let n=this._h0,s=this._h1,r=this._h2,o=this._h3,a=this._h4,l,c,u;for(let d=0;d<80;d++)d<20?(l=s&r|~s&o,c=1518500249):d<40?(l=s^r^o,c=1859775393):d<60?(l=s&r|s&o|r&o,c=2400959708):(l=s^r^o,c=3395469782),u=NO(n,5)+l+a+c+e.getUint32(d*4,!1)&4294967295,a=o,o=r,r=NO(s,30),s=n,n=u;this._h0=this._h0+n&4294967295,this._h1=this._h1+s&4294967295,this._h2=this._h2+r&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}};VN._bigBlock32=new DataView(new ArrayBuffer(320));let o8=VN;const{getWindow:rt,getWindows:Ehe,getWindowsCount:IFe,getWindowId:YI,getWindowById:uX,onDidRegisterWindow:$4,onWillUnregisterWindow:DFe,onDidUnregisterWindow:NFe}=function(){const i=new Map;x7e(Kn,1);const e={window:Kn,disposables:new Ze};i.set(Kn.vscodeWindowId,e);const t=new se,n=new se,s=new se;function r(o,a){return(typeof o=="number"?i.get(o):void 0)??(a?e:void 0)}return{onDidRegisterWindow:t.event,onWillUnregisterWindow:s.event,onDidUnregisterWindow:n.event,registerWindow(o){if(i.has(o.vscodeWindowId))return be.None;const a=new Ze,l={window:o,disposables:a.add(new Ze)};return i.set(o.vscodeWindowId,l),a.add(Dt(()=>{i.delete(o.vscodeWindowId),n.fire(o)})),a.add(ge(o,De.BEFORE_UNLOAD,()=>{s.fire(o)})),t.fire(l),a},getWindows(){return i.values()},getWindowsCount(){return i.size},getWindowId(o){return o.vscodeWindowId},hasWindow(o){return i.has(o)},getWindowById:r,getWindow(o){var c;const a=o;if((c=a==null?void 0:a.ownerDocument)!=null&&c.defaultView)return a.ownerDocument.defaultView.window;const l=o;return l!=null&&l.view?l.view.window:Kn},getDocument(o){return rt(o).document}}}();function gu(i){for(;i.firstChild;)i.firstChild.remove()}class RFe{constructor(e,t,n,s){this._node=e,this._type=t,this._handler=n,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function ge(i,e,t,n){return new RFe(i,e,t,n)}function AFe(i,e){return function(t){return e(new iu(i,t))}}function PFe(i){return function(e){return i(new hi(e))}}const Vs=function(e,t,n,s){let r=n;return t==="click"||t==="mousedown"||t==="contextmenu"?r=AFe(rt(e),n):(t==="keydown"||t==="keypress"||t==="keyup")&&(r=PFe(n)),ge(e,t,r,s)};function HE(i,e,t){return $C(i,e,t)}let The,xa;class jH extends HH{constructor(e){super(),this.defaultTarget=e&&rt(e)}cancelAndSet(e,t,n){return super.cancelAndSet(e,t,n??this.defaultTarget)}}class RO{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Un(e)}}static sort(e,t){return t.priority-e.priority}}(function(){const i=new Map,e=new Map,t=new Map,n=new Map,s=r=>{t.set(r,!1);const o=i.get(r)??[];for(e.set(r,o),i.set(r,[]),n.set(r,!0);o.length>0;)o.sort(RO.sort),o.shift().execute();n.set(r,!1)};xa=(r,o,a=0)=>{const l=YI(r),c=new RO(o,a);let u=i.get(l);return u||(u=[],i.set(l,u)),u.push(c),t.get(l)||(t.set(l,!0),r.requestAnimationFrame(()=>s(l))),c},The=(r,o,a)=>{const l=YI(r);if(n.get(l)){const c=new RO(o,a);let u=e.get(l);return u||(u=[],e.set(l,u)),u.push(c),c}else return xa(r,o,a)}})();function $H(i){return rt(i).getComputedStyle(i,null)}function a8(i,e){const t=rt(i),n=t.document;if(i!==n.body)return new Ah(i.clientWidth,i.clientHeight);if(X0&&(t!=null&&t.visualViewport))return new Ah(t.visualViewport.width,t.visualViewport.height);if(t!=null&&t.innerWidth&&t.innerHeight)return new Ah(t.innerWidth,t.innerHeight);if(n.body&&n.body.clientWidth&&n.body.clientHeight)return new Ah(n.body.clientWidth,n.body.clientHeight);if(n.documentElement&&n.documentElement.clientWidth&&n.documentElement.clientHeight)return new Ah(n.documentElement.clientWidth,n.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class Ai{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){const s=$H(e),r=s?s.getPropertyValue(t):"0";return Ai.convertToPixels(e,r)}static getBorderLeftWidth(e){return Ai.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return Ai.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return Ai.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return Ai.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return Ai.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return Ai.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return Ai.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return Ai.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return Ai.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return Ai.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return Ai.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return Ai.getDimension(e,"margin-bottom","marginBottom")}}const Gp=class Gp{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new Gp(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof Gp?e:new Gp(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};Gp.None=new Gp(0,0);let Ah=Gp;function MFe(i){let e=i.offsetParent,t=i.offsetTop,n=i.offsetLeft;for(;(i=i.parentNode)!==null&&i!==i.ownerDocument.body&&i!==i.ownerDocument.documentElement;){t-=i.scrollTop;const s=Ihe(i)?null:$H(i);s&&(n-=s.direction!=="rtl"?i.scrollLeft:-i.scrollLeft),i===e&&(n+=Ai.getBorderLeftWidth(i),t+=Ai.getBorderTopWidth(i),t+=i.offsetTop,n+=i.offsetLeft,e=i.offsetParent)}return{left:n,top:t}}function Nl(i){const e=i.getBoundingClientRect(),t=rt(i);return{left:e.left+t.scrollX,top:e.top+t.scrollY,width:e.width,height:e.height}}function Lhe(i){let e=i,t=1;do{const n=$H(e).zoom;n!=null&&n!=="1"&&(t*=n),e=e.parentElement}while(e!==null&&e!==e.ownerDocument.documentElement);return t}function qH(i){const e=Ai.getMarginLeft(i)+Ai.getMarginRight(i);return i.offsetWidth+e}function AO(i){const e=Ai.getBorderLeftWidth(i)+Ai.getBorderRightWidth(i),t=Ai.getPaddingLeft(i)+Ai.getPaddingRight(i);return i.offsetWidth-e-t}function OFe(i){const e=Ai.getBorderTopWidth(i)+Ai.getBorderBottomWidth(i),t=Ai.getPaddingTop(i)+Ai.getPaddingBottom(i);return i.offsetHeight-e-t}function l8(i){const e=Ai.getMarginTop(i)+Ai.getMarginBottom(i);return i.offsetHeight+e}function Fs(i,e){return!!(e!=null&&e.contains(i))}function FFe(i,e,t){for(;i&&i.nodeType===i.ELEMENT_NODE;){if(i.classList.contains(e))return i;if(t){if(typeof t=="string"){if(i.classList.contains(t))return null}else if(i===t)return null}i=i.parentNode}return null}function PO(i,e,t){return!!FFe(i,e,t)}function Ihe(i){return i&&!!i.host&&!!i.mode}function QI(i){return!!qb(i)}function qb(i){var e;for(;i.parentNode;){if(i===((e=i.ownerDocument)==null?void 0:e.body))return null;i=i.parentNode}return Ihe(i)?i:null}function ro(){let i=GH().activeElement;for(;i!=null&&i.shadowRoot;)i=i.shadowRoot.activeElement;return i}function KH(i){return ro()===i}function Dhe(i){return Fs(ro(),i)}function GH(){return IFe()<=1?Kn.document:Array.from(Ehe()).map(({window:e})=>e.document).find(e=>e.hasFocus())??Kn.document}function mC(){var e;return((e=GH().defaultView)==null?void 0:e.window)??Kn}const Nhe=new Map;function Hl(i=Kn.document.head,e,t){const n=document.createElement("style");if(n.type="text/css",n.media="screen",e==null||e(n),i.appendChild(n),t&&t.add(Dt(()=>n.remove())),i===Kn.document.head){const s=new Set;Nhe.set(n,s);for(const{window:r,disposables:o}of Ehe()){if(r===Kn)continue;const a=o.add(BFe(n,s,r));t==null||t.add(a)}}return n}function BFe(i,e,t){var r,o;const n=new Ze,s=i.cloneNode(!0);t.document.head.appendChild(s),n.add(Dt(()=>s.remove()));for(const a of HFe(i))(o=s.sheet)==null||o.insertRule(a.cssText,(r=s.sheet)==null?void 0:r.cssRules.length);return n.add(VFe.observe(i,n,{childList:!0})(()=>{s.textContent=i.textContent})),e.add(s),n.add(Dt(()=>e.delete(s))),n}const VFe=new class{constructor(){this.mutationObservers=new Map}observe(i,e,t){let n=this.mutationObservers.get(i);n||(n=new Map,this.mutationObservers.set(i,n));const s=xhe(t);let r=n.get(s);if(r)r.users+=1;else{const o=new se,a=new MutationObserver(c=>o.fire(c));a.observe(i,t);const l=r={users:1,observer:a,onDidMutate:o.event};e.add(Dt(()=>{l.users-=1,l.users===0&&(o.dispose(),a.disconnect(),n==null||n.delete(s),(n==null?void 0:n.size)===0&&this.mutationObservers.delete(i))})),n.set(s,r)}return r.onDidMutate}};let MO=null;function WFe(){return MO||(MO=Hl()),MO}function HFe(i){var e,t;return(e=i==null?void 0:i.sheet)!=null&&e.rules?i.sheet.rules:(t=i==null?void 0:i.sheet)!=null&&t.cssRules?i.sheet.cssRules:[]}function c8(i,e,t=WFe()){var n;if(!(!t||!e)){(n=t.sheet)==null||n.insertRule(`${i} {${e}}`,0);for(const s of Nhe.get(t)??[])c8(i,e,s)}}function Zs(i){return i instanceof HTMLElement||i instanceof rt(i).HTMLElement}function dX(i){return i instanceof HTMLAnchorElement||i instanceof rt(i).HTMLAnchorElement}function UFe(i){return i instanceof SVGElement||i instanceof rt(i).SVGElement}function YH(i){return i instanceof MouseEvent||i instanceof rt(i).MouseEvent}function Eh(i){return i instanceof KeyboardEvent||i instanceof rt(i).KeyboardEvent}const De={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",CHANGE:"change",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend"};function zFe(i){const e=i;return!!(e&&typeof e.preventDefault=="function"&&typeof e.stopPropagation=="function")}const Xt={stop:(i,e)=>(i.preventDefault(),e&&i.stopPropagation(),i)};function jFe(i){const e=[];for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)e[t]=i.scrollTop,i=i.parentNode;return e}function $Fe(i,e){for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)i.scrollTop!==e[t]&&(i.scrollTop=e[t]),i=i.parentNode}class XI extends be{static hasFocusWithin(e){if(Zs(e)){const t=qb(e),n=t?t.activeElement:e.ownerDocument.activeElement;return Fs(n,e)}else{const t=e;return Fs(t.document.activeElement,t.document)}}constructor(e){super(),this._onDidFocus=this._register(new se),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new se),this.onDidBlur=this._onDidBlur.event;let t=XI.hasFocusWithin(e),n=!1;const s=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},r=()=>{t&&(n=!0,(Zs(e)?rt(e):e).setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{XI.hasFocusWithin(e)!==t&&(t?r():s())},this._register(ge(e,De.FOCUS,s,!0)),this._register(ge(e,De.BLUR,r,!0)),Zs(e)&&(this._register(ge(e,De.FOCUS_IN,()=>this._refreshStateHandler())),this._register(ge(e,De.FOCUS_OUT,()=>this._refreshStateHandler())))}}function Ck(i){return new XI(i)}function qFe(i,e){return i.after(e),e}function Qe(i,...e){if(i.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function QH(i,e){return i.insertBefore(e,i.firstChild),e}function ko(i,...e){i.innerText="",Qe(i,...e)}const KFe=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var Sk;(function(i){i.HTML="http://www.w3.org/1999/xhtml",i.SVG="http://www.w3.org/2000/svg"})(Sk||(Sk={}));function Rhe(i,e,t,...n){const s=KFe.exec(e);if(!s)throw new Error("Bad use of emmet");const r=s[1]||"div";let o;return i!==Sk.HTML?o=document.createElementNS(i,r):o=document.createElement(r),s[3]&&(o.id=s[3]),s[4]&&(o.className=s[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?o[a]=l:a==="selected"?l&&o.setAttribute(a,"true"):o.setAttribute(a,l))}),o.append(...n),o}function ht(i,e,...t){return Rhe(Sk.HTML,i,e,...t)}ht.SVG=function(i,e,...t){return Rhe(Sk.SVG,i,e,...t)};function Ahe(...i){for(const e of i)e.style.display="",e.removeAttribute("aria-hidden")}function hX(...i){for(const e of i)e.style.display="none",e.setAttribute("aria-hidden","true")}function fX(i,e){const t=i.devicePixelRatio*e;return Math.max(1,Math.floor(t))/i.devicePixelRatio}function Phe(i){Kn.open(i,"_blank","noopener")}function GFe(i,e){const t=()=>{e(),n=xa(i,t)};let n=xa(i,t);return Dt(()=>n.dispose())}khe.setPreferredWebSchema(/^https:/.test(Kn.location.href)?"https":"http");function Cf(i){return i?`url('${z4.uriToBrowserUri(i).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function OO(i){return`'${i.replace(/'/g,"%27")}'`}function ef(i,e){if(i!==void 0){const t=i.match(/^\s*var\((.+)\)$/);if(t){const n=t[1].split(",",2);return n.length===2&&(e=ef(n[1].trim(),e)),`var(${n[0]}, ${e})`}return i}return e}function YFe(i,e=!1){const t=document.createElement("a");return Che("afterSanitizeAttributes",n=>{for(const s of["href","src"])if(n.hasAttribute(s)){const r=n.getAttribute(s);if(s==="href"&&r.startsWith("#"))continue;if(t.href=r,!i.includes(t.protocol.replace(/:$/,""))){if(e&&s==="src"&&t.href.startsWith("data:"))continue;n.removeAttribute(s)}}}),Dt(()=>{She("afterSanitizeAttributes")})}const QFe=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);class Vg extends se{constructor(){super(),this._subscriptions=new Ze,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(Le.runAndSubscribe($4,({window:e,disposables:t})=>this.registerListeners(e,t),{window:Kn,disposables:this._subscriptions}))}registerListeners(e,t){t.add(ge(e,"keydown",n=>{if(n.defaultPrevented)return;const s=new hi(n);if(!(s.keyCode===6&&n.repeat)){if(n.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(n.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(n.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(n.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(s.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=n.altKey,this._keyStatus.ctrlKey=n.ctrlKey,this._keyStatus.metaKey=n.metaKey,this._keyStatus.shiftKey=n.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=n,this.fire(this._keyStatus))}},!0)),t.add(ge(e,"keyup",n=>{n.defaultPrevented||(!n.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!n.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!n.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!n.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=n.altKey,this._keyStatus.ctrlKey=n.ctrlKey,this._keyStatus.metaKey=n.metaKey,this._keyStatus.shiftKey=n.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=n,this.fire(this._keyStatus)))},!0)),t.add(ge(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(ge(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(ge(e.document.body,"mousemove",n=>{n.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(ge(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return Vg.instance||(Vg.instance=new Vg),Vg.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class XFe extends be{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register(ge(this.element,De.DRAG_START,e=>{var t,n;(n=(t=this.callbacks).onDragStart)==null||n.call(t,e)})),this.callbacks.onDrag&&this._register(ge(this.element,De.DRAG,e=>{var t,n;(n=(t=this.callbacks).onDrag)==null||n.call(t,e)})),this._register(ge(this.element,De.DRAG_ENTER,e=>{var t,n;this.counter++,this.dragStartTime=e.timeStamp,(n=(t=this.callbacks).onDragEnter)==null||n.call(t,e)})),this._register(ge(this.element,De.DRAG_OVER,e=>{var t,n;e.preventDefault(),(n=(t=this.callbacks).onDragOver)==null||n.call(t,e,e.timeStamp-this.dragStartTime)})),this._register(ge(this.element,De.DRAG_LEAVE,e=>{var t,n;this.counter--,this.counter===0&&(this.dragStartTime=0,(n=(t=this.callbacks).onDragLeave)==null||n.call(t,e))})),this._register(ge(this.element,De.DRAG_END,e=>{var t,n;this.counter=0,this.dragStartTime=0,(n=(t=this.callbacks).onDragEnd)==null||n.call(t,e)})),this._register(ge(this.element,De.DROP,e=>{var t,n;this.counter=0,this.dragStartTime=0,(n=(t=this.callbacks).onDrop)==null||n.call(t,e)}))}}const ZFe=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function cn(i,...e){let t,n;Array.isArray(e[0])?(t={},n=e[0]):(t=e[0]||{},n=e[1]);const s=ZFe.exec(i);if(!s||!s.groups)throw new Error("Bad use of h");const r=s.groups.tag||"div",o=document.createElement(r);s.groups.id&&(o.id=s.groups.id);const a=[];if(s.groups.class)for(const c of s.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(o.className=a.join(" "));const l={};if(s.groups.name&&(l[s.groups.name]=o),n)for(const c of n)Zs(c)?o.appendChild(c):typeof c=="string"?o.append(c):"root"in c&&(Object.assign(l,c),o.appendChild(c.root));for(const[c,u]of Object.entries(t))if(c!=="className")if(c==="style")for(const[d,h]of Object.entries(u))o.style.setProperty(gX(d),typeof h=="number"?h+"px":""+h);else c==="tabIndex"?o.tabIndex=u:o.setAttribute(gX(c),u.toString());return l.root=o,l}function gX(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class JFe extends be{constructor(e){super(),this._onDidChange=this._register(new se),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(e,!0),this._mediaQueryList=null,this._handleChange(e,!1)}_handleChange(e,t){var n;(n=this._mediaQueryList)==null||n.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia(`(resolution: ${e.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}}class eBe extends be{get value(){return this._value}constructor(e){super(),this._onDidChange=this._register(new se),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio(e);const t=this._register(new JFe(e));this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(e),this._onDidChange.fire(this._value)}))}_getPixelRatio(e){const t=document.createElement("canvas").getContext("2d"),n=e.devicePixelRatio||1,s=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/s}}class tBe{constructor(){this.mapWindowIdToPixelRatioMonitor=new Map}_getOrCreatePixelRatioMonitor(e){const t=YI(e);let n=this.mapWindowIdToPixelRatioMonitor.get(t);return n||(n=new eBe(e),this.mapWindowIdToPixelRatioMonitor.set(t,n),Le.once(NFe)(({vscodeWindowId:s})=>{s===t&&(n==null||n.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(t))})),n}getInstance(e){return this._getOrCreatePixelRatioMonitor(e)}}const ZI=new tBe;class Mhe{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=Fc(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=Fc(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=Fc(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=Fc(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=Fc(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=Fc(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=Fc(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingLeft(e){const t=Fc(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=Fc(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=Fc(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=Fc(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function Fc(i){return typeof i=="number"?`${i}px`:i}function pn(i){return new Mhe(i)}function Nr(i,e){i instanceof Mhe?(i.setFontFamily(e.getMassagedFontFamily()),i.setFontWeight(e.fontWeight),i.setFontSize(e.fontSize),i.setFontFeatureSettings(e.fontFeatureSettings),i.setFontVariationSettings(e.fontVariationSettings),i.setLineHeight(e.lineHeight),i.setLetterSpacing(e.letterSpacing)):(i.style.fontFamily=e.getMassagedFontFamily(),i.style.fontWeight=e.fontWeight,i.style.fontSize=e.fontSize+"px",i.style.fontFeatureSettings=e.fontFeatureSettings,i.style.fontVariationSettings=e.fontVariationSettings,i.style.lineHeight=e.lineHeight+"px",i.style.letterSpacing=e.letterSpacing+"px")}class nBe{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class XH{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(e){var t;this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),(t=this._container)==null||t.remove(),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");Nr(t,this._bareFontInfo),e.appendChild(t);const n=document.createElement("div");Nr(n,this._bareFontInfo),n.style.fontWeight="bold",e.appendChild(n);const s=document.createElement("div");Nr(s,this._bareFontInfo),s.style.fontStyle="italic",e.appendChild(s);const r=[];for(const o of this._requests){let a;o.type===0&&(a=t),o.type===2&&(a=n),o.type===1&&(a=s),a.appendChild(document.createElement("br"));const l=document.createElement("span");XH._render(l,o),a.appendChild(l),r.push(l)}this._container=e,this._testElements=r}static _render(e,t){if(t.chr===" "){let n="";for(let s=0;s<8;s++)n+=n;e.innerText=n}else{let n=t.chr;for(let s=0;s<8;s++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const n=this._requests[e],s=this._testElements[e];n.fulfill(s.offsetWidth/256)}}}function iBe(i,e,t){new XH(e,t).read(i)}const Ig=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new se,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(i){i=Math.min(Math.max(-5,i),20),this._zoomLevel!==i&&(this._zoomLevel=i,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},sBe=rn?1.5:1.35,FO=8;class p0{static createFromValidatedSettings(e,t,n){const s=e.get(49),r=e.get(53),o=e.get(52),a=e.get(51),l=e.get(54),c=e.get(67),u=e.get(64);return p0._create(s,r,o,a,l,c,u,t,n)}static _create(e,t,n,s,r,o,a,l,c){o===0?o=sBe*n:o<FO&&(o=o*n),o=Math.round(o),o<FO&&(o=FO);const u=1+(c?0:Ig.getZoomLevel()*.1);return n*=u,o*=u,r===pk.TRANSLATE&&(t==="normal"||t==="bold"?r=pk.OFF:(r=`'wght' ${parseInt(t,10)}`,t="normal")),new p0({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:s,fontVariationSettings:r,lineHeight:o,letterSpacing:a})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=il.fontFamily,t=p0._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const rBe=2;class u8 extends p0{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=rBe,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}class oBe extends be{constructor(){super(...arguments),this._cache=new Map,this._evictUntrustedReadingsTimeout=-1,this._onDidChange=this._register(new se),this.onDidChange=this._onDidChange.event}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(e){const t=YI(e);let n=this._cache.get(t);return n||(n=new aBe,this._cache.set(t,n)),n}_writeToCache(e,t,n){this._ensureCache(e).put(t,n),!n.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=e.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(e)},5e3))}_evictUntrustedReadings(e){const t=this._ensureCache(e),n=t.getValues();let s=!1;for(const r of n)r.isTrusted||(s=!0,t.remove(r));s&&this._onDidChange.fire()}readFontInfo(e,t){const n=this._ensureCache(e);if(!n.has(t)){let s=this._actualReadFontInfo(e,t);(s.typicalHalfwidthCharacterWidth<=2||s.typicalFullwidthCharacterWidth<=2||s.spaceWidth<=2||s.maxDigitWidth<=2)&&(s=new u8({pixelRatio:ZI.getInstance(e).value,fontFamily:s.fontFamily,fontWeight:s.fontWeight,fontSize:s.fontSize,fontFeatureSettings:s.fontFeatureSettings,fontVariationSettings:s.fontVariationSettings,lineHeight:s.lineHeight,letterSpacing:s.letterSpacing,isMonospace:s.isMonospace,typicalHalfwidthCharacterWidth:Math.max(s.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(s.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:s.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(s.spaceWidth,5),middotWidth:Math.max(s.middotWidth,5),wsmiddotWidth:Math.max(s.wsmiddotWidth,5),maxDigitWidth:Math.max(s.maxDigitWidth,5)},!1)),this._writeToCache(e,t,s)}return n.get(t)}_createRequest(e,t,n,s){const r=new nBe(e,t);return n.push(r),s==null||s.push(r),r}_actualReadFontInfo(e,t){const n=[],s=[],r=this._createRequest("n",0,n,s),o=this._createRequest("",0,n,null),a=this._createRequest(" ",0,n,s),l=this._createRequest("0",0,n,s),c=this._createRequest("1",0,n,s),u=this._createRequest("2",0,n,s),d=this._createRequest("3",0,n,s),h=this._createRequest("4",0,n,s),g=this._createRequest("5",0,n,s),p=this._createRequest("6",0,n,s),_=this._createRequest("7",0,n,s),v=this._createRequest("8",0,n,s),y=this._createRequest("9",0,n,s),w=this._createRequest("",0,n,s),x=this._createRequest("",0,n,null),k=this._createRequest("",0,n,s),T=this._createRequest("",0,n,null),R="|/-_ilm%";for(let V=0,U=R.length;V<U;V++)this._createRequest(R.charAt(V),0,n,s),this._createRequest(R.charAt(V),1,n,s),this._createRequest(R.charAt(V),2,n,s);iBe(e,t,n);const L=Math.max(l.width,c.width,u.width,d.width,h.width,g.width,p.width,_.width,v.width,y.width);let I=t.fontFeatureSettings===Z0.OFF;const A=s[0].width;for(let V=1,U=s.length;I&&V<U;V++){const W=A-s[V].width;if(W<-.001||W>.001){I=!1;break}}let B=!0;return I&&x.width!==A&&(B=!1),x.width>w.width&&(B=!1),new u8({pixelRatio:ZI.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:I,typicalHalfwidthCharacterWidth:r.width,typicalFullwidthCharacterWidth:o.width,canUseHalfwidthRightwardsArrow:B,spaceWidth:a.width,middotWidth:k.width,wsmiddotWidth:T.width,maxDigitWidth:L},!0)}}class aBe{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}const d8=new oBe;var su;(function(i){i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=e})(su||(su={}));const Pn=nn("instantiationService");function lBe(i,e,t){e[su.DI_TARGET]===e?e[su.DI_DEPENDENCIES].push({id:i,index:t}):(e[su.DI_DEPENDENCIES]=[{id:i,index:t}],e[su.DI_TARGET]=e)}function nn(i){if(su.serviceIds.has(i))return su.serviceIds.get(i);const e=function(t,n,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");lBe(e,t,s)};return e.toString=()=>i,su.serviceIds.set(i,e),e}const Es=nn("codeEditorService"),Io=nn("modelService"),q4=nn("textModelService");class tf extends be{constructor(e,t="",n="",s=!0,r){super(),this._onDidChange=this._register(new se),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=s,this._actionCallback=r}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}}class t1 extends be{constructor(){super(...arguments),this._onWillRun=this._register(new se),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new se),this.onDidRun=this._onDidRun.event}async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let n;try{await this.runAction(e,t)}catch(s){n=s}this._onDidRun.fire({action:e,error:n})}async runAction(e,t){await e.run(t)}}const xS=class xS{constructor(){this.id=xS.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(const n of e)n.length&&(t.length?t=[...t,new xS,...n]:t=n);return t}async run(){}};xS.ID="vs.actions.separator";let oo=xS;class K4{get actions(){return this._actions}constructor(e,t,n,s){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=s,this._actions=n}async run(){}}const WN=class WN extends tf{constructor(){super(WN.ID,S("submenu.empty","(empty)"),void 0,!1)}};WN.ID="vs.actions.empty";let h8=WN;function Qv(i){return{id:i.id,label:i.label,tooltip:i.tooltip??i.label,class:i.class,enabled:i.enabled??!0,checked:i.checked,run:async(...e)=>i.run(...e)}}var f8;(function(i){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}i.isThemeColor=e})(f8||(f8={}));var dn;(function(i){i.iconNameSegment="[A-Za-z0-9]+",i.iconNameExpression="[A-Za-z0-9-]+",i.iconModifierExpression="~[A-Za-z]+",i.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${i.iconNameExpression})(${i.iconModifierExpression})?$`);function t(h){const g=e.exec(h.id);if(!g)return t(Ke.error);const[,p,_]=g,v=["codicon","codicon-"+p];return _&&v.push("codicon-modifier-"+_.substring(1)),v}i.asClassNameArray=t;function n(h){return t(h).join(" ")}i.asClassName=n;function s(h){return"."+t(h).join(".")}i.asCSSSelector=s;function r(h){return h&&typeof h=="object"&&typeof h.id=="string"&&(typeof h.color>"u"||f8.isThemeColor(h.color))}i.isThemeIcon=r;const o=new RegExp(`^\\$\\((${i.iconNameExpression}(?:${i.iconModifierExpression})?)\\)$`);function a(h){const g=o.exec(h);if(!g)return;const[,p]=g;return{id:p}}i.fromString=a;function l(h){return{id:h}}i.fromId=l;function c(h,g){let p=h.id;const _=p.lastIndexOf("~");return _!==-1&&(p=p.substring(0,_)),g&&(p=`${p}~${g}`),{id:p}}i.modify=c;function u(h){const g=h.id.lastIndexOf("~");if(g!==-1)return h.id.substring(g+1)}i.getModifier=u;function d(h,g){var p,_;return h.id===g.id&&((p=h.color)==null?void 0:p.id)===((_=g.color)==null?void 0:_.id)}i.isEqual=d})(dn||(dn={}));const ll=nn("commandService"),oa=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new se,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(i,e){if(!i)throw new Error("invalid command");if(typeof i=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:i,handler:e})}if(i.metadata&&Array.isArray(i.metadata.args)){const o=[];for(const l of i.metadata.args)o.push(l.constraint);const a=i.handler;i.handler=function(l,...c){return E9e(c,o),a(l,...c)}}const{id:t}=i;let n=this._commands.get(t);n||(n=new ba,this._commands.set(t,n));const s=n.unshift(i),r=Dt(()=>{s();const o=this._commands.get(t);o!=null&&o.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),r}registerCommandAlias(i,e){return oa.registerCommand(i,(t,...n)=>t.get(ll).executeCommand(e,...n))}getCommand(i){const e=this._commands.get(i);if(!(!e||e.isEmpty()))return yn.first(e)}getCommands(){const i=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&i.set(e,t)}return i}};oa.registerCommand("noop",()=>{});function BO(...i){switch(i.length){case 1:return S("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",i[0]);case 2:return S("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",i[0],i[1]);case 3:return S("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",i[0],i[1],i[2]);default:return}}const cBe=S("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),uBe=S("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'."),kv=class kv{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw TH(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(BO("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(BO("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(BO("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,n=this._input.substring(this._start,this._current),s={type:19,offset:this._start,lexeme:n};this._errors.push({offset:t,lexeme:n,additionalInfo:e}),this._tokens.push(s)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),n=kv._keywords.get(t);n?this._addToken(n):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(cBe);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,n=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(uBe);return}const r=this._input.charCodeAt(e);if(t)t=!1;else if(r===47&&!n){e++;break}else r===91?n=!0:r===92?t=!0:r===93&&(n=!1);e++}for(;e<this._input.length&&kv._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const s=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:s,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}};kv._regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0))),kv._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);let Ap=kv;const Pr=new Map;Pr.set("false",!1);Pr.set("true",!0);Pr.set("isMac",rn);Pr.set("isLinux",ia);Pr.set("isWindows",Sa);Pr.set("isWeb",By);Pr.set("isMacNative",rn&&!By);Pr.set("isEdge",U9e);Pr.set("isFirefox",W9e);Pr.set("isChrome",Mde);Pr.set("isSafari",H9e);const dBe=Object.prototype.hasOwnProperty,hBe={regexParsingWithErrorRecovery:!0},fBe=S("contextkey.parser.error.emptyString","Empty context key expression"),gBe=S("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),mBe=S("contextkey.parser.error.noInAfterNot","'in' after 'not'."),mX=S("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),pBe=S("contextkey.parser.error.unexpectedToken","Unexpected token"),_Be=S("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),vBe=S("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),bBe=S("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");var fd;let yBe=(fd=class{constructor(e=hBe){this._config=e,this._scanner=new Ap,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(e===""){this._parsingErrors.push({message:fBe,offset:0,lexeme:"",additionalInfo:gBe});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const t=this._expr();if(!this._isAtEnd()){const n=this._peek(),s=n.type===17?_Be:void 0;throw this._parsingErrors.push({message:pBe,offset:n.offset,lexeme:Ap.getLexeme(n),additionalInfo:s}),fd._parseError}return t}catch(t){if(t!==fd._parseError)throw t;return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return e.length===1?e[0]:En.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return e.length===1?e[0]:En.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),Eo.INSTANCE;case 12:return this._advance(),sa.INSTANCE;case 0:{this._advance();const t=this._expr();return this._consume(1,mX),t==null?void 0:t.negate()}case 17:return this._advance(),T1.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),En.true();case 12:return this._advance(),En.false();case 0:{this._advance();const t=this._expr();return this._consume(1,mX),t}case 17:{const t=e.lexeme;if(this._advance(),this._matchOne(9)){const s=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),s.type!==10)throw this._errExpectedButGot("REGEX",s);const r=s.lexeme,o=r.lastIndexOf("/"),a=o===r.length-1?void 0:this._removeFlagsGY(r.substring(o+1));let l;try{l=new RegExp(r.substring(1,o),a)}catch{throw this._errExpectedButGot("REGEX",s)}return kk.create(t,l)}switch(s.type){case 10:case 19:{const r=[s.lexeme];this._advance();let o=this._peek(),a=0;for(let h=0;h<s.lexeme.length;h++)s.lexeme.charCodeAt(h)===40?a++:s.lexeme.charCodeAt(h)===41&&a--;for(;!this._isAtEnd()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let h=0;h<o.lexeme.length;h++)o.lexeme.charCodeAt(h)===40?a++:s.lexeme.charCodeAt(h)===41&&a--}if(a<0)break;r.push(Ap.getLexeme(o)),this._advance(),o=this._peek()}const l=r.join(""),c=l.lastIndexOf("/"),u=c===l.length-1?void 0:this._removeFlagsGY(l.substring(c+1));let d;try{d=new RegExp(l.substring(1,c),u)}catch{throw this._errExpectedButGot("REGEX",s)}return En.regex(t,d)}case 18:{const r=s.lexeme;this._advance();let o=null;if(!T7e(r)){const a=r.indexOf("/"),l=r.lastIndexOf("/");if(a!==l&&a>=0){const c=r.slice(a+1,l),u=r[l+1]==="i"?"i":"";try{o=new RegExp(c,u)}catch{throw this._errExpectedButGot("REGEX",s)}}}if(o===null)throw this._errExpectedButGot("REGEX",s);return kk.create(t,o)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,mBe);const s=this._value();return En.notIn(t,s)}switch(this._peek().type){case 3:{this._advance();const s=this._value();if(this._previous().type===18)return En.equals(t,s);switch(s){case"true":return En.has(t);case"false":return En.not(t);default:return En.equals(t,s)}}case 4:{this._advance();const s=this._value();if(this._previous().type===18)return En.notEquals(t,s);switch(s){case"true":return En.not(t);case"false":return En.has(t);default:return En.notEquals(t,s)}}case 5:return this._advance(),eA.create(t,this._value());case 6:return this._advance(),tA.create(t,this._value());case 7:return this._advance(),Z4.create(t,this._value());case 8:return this._advance(),J4.create(t,this._value());case 13:return this._advance(),En.in(t,this._value());default:return En.has(t)}}case 20:throw this._parsingErrors.push({message:vBe,offset:e.offset,lexeme:"",additionalInfo:bBe}),fd._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,n){const s=S("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,Ap.getLexeme(t)),r=t.offset,o=Ap.getLexeme(t);return this._parsingErrors.push({message:s,offset:r,lexeme:o,additionalInfo:n}),fd._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}},fd._parseError=new Error,fd);const pj=class pj{static false(){return Eo.INSTANCE}static true(){return sa.INSTANCE}static has(e){return E1.create(e)}static equals(e,t){return V2.create(e,t)}static notEquals(e,t){return Q4.create(e,t)}static regex(e,t){return kk.create(e,t)}static in(e,t){return G4.create(e,t)}static notIn(e,t){return Y4.create(e,t)}static not(e){return T1.create(e)}static and(...e){return s0.create(e,null,!0)}static or(...e){return Ph.create(e,null,!0)}static deserialize(e){return e==null?void 0:this._parser.parse(e)}};pj._parser=new yBe({regexParsingWithErrorRecovery:!1});let En=pj;function wBe(i,e){const t=i?i.substituteConstants():void 0,n=e?e.substituteConstants():void 0;return!t&&!n?!0:!t||!n?!1:t.equals(n)}function qC(i,e){return i.cmp(e)}const HN=class HN{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return sa.INSTANCE}};HN.INSTANCE=new HN;let Eo=HN;const UN=class UN{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Eo.INSTANCE}};UN.INSTANCE=new UN;let sa=UN;class E1{static create(e,t=null){const n=Pr.get(e);return typeof n=="boolean"?n?sa.INSTANCE:Eo.INSTANCE:new E1(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:Fhe(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Pr.get(this.key);return typeof e=="boolean"?e?sa.INSTANCE:Eo.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=T1.create(this.key,this)),this.negated}}class V2{static create(e,t,n=null){if(typeof t=="boolean")return t?E1.create(e,n):T1.create(e,n);const s=Pr.get(e);return typeof s=="boolean"?t===(s?"true":"false")?sa.INSTANCE:Eo.INSTANCE:new V2(e,t,n)}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:L1(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Pr.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?sa.INSTANCE:Eo.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Q4.create(this.key,this.value,this)),this.negated}}class G4{static create(e,t){return new G4(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:L1(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.includes(n):typeof n=="string"&&typeof t=="object"&&t!==null?dBe.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=Y4.create(this.key,this.valueKey)),this.negated}}class Y4{static create(e,t){return new Y4(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=G4.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class Q4{static create(e,t,n=null){if(typeof t=="boolean")return t?T1.create(e,n):E1.create(e,n);const s=Pr.get(e);return typeof s=="boolean"?t===(s?"true":"false")?Eo.INSTANCE:sa.INSTANCE:new Q4(e,t,n)}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:L1(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Pr.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Eo.INSTANCE:sa.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=V2.create(this.key,this.value,this)),this.negated}}class T1{static create(e,t=null){const n=Pr.get(e);return typeof n=="boolean"?n?Eo.INSTANCE:sa.INSTANCE:new T1(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:Fhe(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Pr.get(this.key);return typeof e=="boolean"?e?Eo.INSTANCE:sa.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=E1.create(this.key,this)),this.negated}}function X4(i,e){if(typeof i=="string"){const t=parseFloat(i);isNaN(t)||(i=t)}return typeof i=="string"||typeof i=="number"?e(i):Eo.INSTANCE}class Z4{static create(e,t,n=null){return X4(t,s=>new Z4(e,s,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:L1(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=tA.create(this.key,this.value,this)),this.negated}}class J4{static create(e,t,n=null){return X4(t,s=>new J4(e,s,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:L1(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=eA.create(this.key,this.value,this)),this.negated}}class eA{static create(e,t,n=null){return X4(t,s=>new eA(e,s,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:L1(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=J4.create(this.key,this.value,this)),this.negated}}class tA{static create(e,t,n=null){return X4(t,s=>new tA(e,s,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:L1(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Z4.create(this.key,this.value,this)),this.negated}}class kk{static create(e,t){return new kk(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ZH.create(this)),this.negated}}class ZH{static create(e){return new ZH(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}function Ohe(i){let e=null;for(let t=0,n=i.length;t<n;t++){const s=i[t].substituteConstants();if(i[t]!==s&&e===null){e=[];for(let r=0;r<t;r++)e[r]=i[r]}e!==null&&(e[t]=s)}return e===null?i:e}class s0{static create(e,t,n){return s0._normalizeArr(e,t,n)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const s=qC(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Ohe(this.expr);return e===this.expr?this:s0.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,n){const s=[];let r=!1;for(const o of e)if(o){if(o.type===1){r=!0;continue}if(o.type===0)return Eo.INSTANCE;if(o.type===6){s.push(...o.expr);continue}s.push(o)}if(s.length===0&&r)return sa.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(qC);for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];for(;s.length>1;){const o=s[s.length-1];if(o.type!==9)break;s.pop();const a=s.pop(),l=s.length===0,c=Ph.create(o.expr.map(u=>s0.create([u,a],null,n)),null,l);c&&(s.push(c),s.sort(qC))}if(s.length===1)return s[0];if(n){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return Eo.INSTANCE;if(s.length===1)return s[0]}return new s0(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=Ph.create(e,this,!0)}return this.negated}}class Ph{static create(e,t,n){return Ph._normalizeArr(e,t,n)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const s=qC(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Ohe(this.expr);return e===this.expr?this:Ph.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let s=[],r=!1;if(e){for(let o=0,a=e.length;o<a;o++){const l=e[o];if(l){if(l.type===0){r=!0;continue}if(l.type===1)return sa.INSTANCE;if(l.type===9){s=s.concat(l.expr);continue}s.push(l)}}if(s.length===0&&r)return Eo.INSTANCE;s.sort(qC)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(n){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return sa.INSTANCE;if(s.length===1)return s[0]}return new Ph(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),s=[];for(const r of _X(t))for(const o of _X(n))s.push(s0.create([r,o],null,!1));e.unshift(Ph.create(s,null,!1))}this.negated=Ph.create(e,this,!0)}return this.negated}}const xv=class xv extends E1{static all(){return xv._info.values()}constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?xv._info.push({...n,key:e}):n!==!0&&xv._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return V2.create(this.key,e)}};xv._info=[];let et=xv;const Nn=nn("contextKeyService");function Fhe(i,e){return i<e?-1:i>e?1:0}function L1(i,e,t,n){return i<t?-1:i>t?1:e<n?-1:e>n?1:0}function g8(i,e){if(i.type===0||e.type===1)return!0;if(i.type===9)return e.type===9?pX(i.expr,e.expr):!1;if(e.type===9){for(const t of e.expr)if(g8(i,t))return!0;return!1}if(i.type===6){if(e.type===6)return pX(e.expr,i.expr);for(const t of i.expr)if(g8(t,e))return!0;return!1}return i.equals(e)}function pX(i,e){let t=0,n=0;for(;t<i.length&&n<e.length;){const s=i[t].cmp(e[n]);if(s<0)return!1;s===0&&t++,n++}return t===i.length}function _X(i){return i.type===9?i.expr:[i]}function VO(i,e){if(!i)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function JH(i,e="Unreachable"){throw new Error(e)}function vX(i){i||Un(new Dn("Soft Assertion Failed"))}function n1(i){if(!i()){debugger;i(),Un(new Dn("Assertion Failed"))}}function eU(i,e){let t=0;for(;t<i.length-1;){const n=i[t],s=i[t+1];if(!e(n,s))return!1;t++}return!0}class CBe{constructor(){this.data=new Map}add(e,t){VO(nl(e)),VO(Xo(t)),VO(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const ir=new CBe;class tU{constructor(){this._coreKeybindings=new ba,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(lc===1){if(e&&e.win)return e.win}else if(lc===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=tU.bindToCurrentPlatform(e),n=new Ze;if(t&&t.primary){const s=Z9(t.primary,lc);s&&n.add(this._registerDefaultKeybinding(s,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let s=0,r=t.secondary.length;s<r;s++){const o=t.secondary[s],a=Z9(o,lc);a&&n.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-s-1,e.when))}return n}registerCommandAndKeybindingRule(e){return Cd(this.registerKeybindingRule(e),oa.registerCommand(e))}_registerDefaultKeybinding(e,t,n,s,r,o){const a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:o,weight1:s,weight2:r,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,Dt(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(kBe)),this._cachedMergedKeybindings.slice(0)}}const W2=new tU,SBe={EditorModes:"platform.keybindingsRegistry"};ir.add(SBe.EditorModes,W2);function kBe(i,e){if(i.weight1!==e.weight1)return i.weight1-e.weight1;if(i.command&&e.command){if(i.command<e.command)return-1;if(i.command>e.command)return 1}return i.weight2-e.weight2}var xBe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},bX=function(i,e){return function(t,n){e(t,n,i)}},sL;function KC(i){return i.command!==void 0}function EBe(i){return i.submenu!==void 0}const j=class j{constructor(e){if(j._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);j._instances.set(e,this),this.id=e}};j._instances=new Map,j.CommandPalette=new j("CommandPalette"),j.DebugBreakpointsContext=new j("DebugBreakpointsContext"),j.DebugCallStackContext=new j("DebugCallStackContext"),j.DebugConsoleContext=new j("DebugConsoleContext"),j.DebugVariablesContext=new j("DebugVariablesContext"),j.NotebookVariablesContext=new j("NotebookVariablesContext"),j.DebugHoverContext=new j("DebugHoverContext"),j.DebugWatchContext=new j("DebugWatchContext"),j.DebugToolBar=new j("DebugToolBar"),j.DebugToolBarStop=new j("DebugToolBarStop"),j.DebugCallStackToolbar=new j("DebugCallStackToolbar"),j.DebugCreateConfiguration=new j("DebugCreateConfiguration"),j.EditorContext=new j("EditorContext"),j.SimpleEditorContext=new j("SimpleEditorContext"),j.EditorContent=new j("EditorContent"),j.EditorLineNumberContext=new j("EditorLineNumberContext"),j.EditorContextCopy=new j("EditorContextCopy"),j.EditorContextPeek=new j("EditorContextPeek"),j.EditorContextShare=new j("EditorContextShare"),j.EditorTitle=new j("EditorTitle"),j.EditorTitleRun=new j("EditorTitleRun"),j.EditorTitleContext=new j("EditorTitleContext"),j.EditorTitleContextShare=new j("EditorTitleContextShare"),j.EmptyEditorGroup=new j("EmptyEditorGroup"),j.EmptyEditorGroupContext=new j("EmptyEditorGroupContext"),j.EditorTabsBarContext=new j("EditorTabsBarContext"),j.EditorTabsBarShowTabsSubmenu=new j("EditorTabsBarShowTabsSubmenu"),j.EditorTabsBarShowTabsZenModeSubmenu=new j("EditorTabsBarShowTabsZenModeSubmenu"),j.EditorActionsPositionSubmenu=new j("EditorActionsPositionSubmenu"),j.ExplorerContext=new j("ExplorerContext"),j.ExplorerContextShare=new j("ExplorerContextShare"),j.ExtensionContext=new j("ExtensionContext"),j.GlobalActivity=new j("GlobalActivity"),j.CommandCenter=new j("CommandCenter"),j.CommandCenterCenter=new j("CommandCenterCenter"),j.LayoutControlMenuSubmenu=new j("LayoutControlMenuSubmenu"),j.LayoutControlMenu=new j("LayoutControlMenu"),j.MenubarMainMenu=new j("MenubarMainMenu"),j.MenubarAppearanceMenu=new j("MenubarAppearanceMenu"),j.MenubarDebugMenu=new j("MenubarDebugMenu"),j.MenubarEditMenu=new j("MenubarEditMenu"),j.MenubarCopy=new j("MenubarCopy"),j.MenubarFileMenu=new j("MenubarFileMenu"),j.MenubarGoMenu=new j("MenubarGoMenu"),j.MenubarHelpMenu=new j("MenubarHelpMenu"),j.MenubarLayoutMenu=new j("MenubarLayoutMenu"),j.MenubarNewBreakpointMenu=new j("MenubarNewBreakpointMenu"),j.PanelAlignmentMenu=new j("PanelAlignmentMenu"),j.PanelPositionMenu=new j("PanelPositionMenu"),j.ActivityBarPositionMenu=new j("ActivityBarPositionMenu"),j.MenubarPreferencesMenu=new j("MenubarPreferencesMenu"),j.MenubarRecentMenu=new j("MenubarRecentMenu"),j.MenubarSelectionMenu=new j("MenubarSelectionMenu"),j.MenubarShare=new j("MenubarShare"),j.MenubarSwitchEditorMenu=new j("MenubarSwitchEditorMenu"),j.MenubarSwitchGroupMenu=new j("MenubarSwitchGroupMenu"),j.MenubarTerminalMenu=new j("MenubarTerminalMenu"),j.MenubarViewMenu=new j("MenubarViewMenu"),j.MenubarHomeMenu=new j("MenubarHomeMenu"),j.OpenEditorsContext=new j("OpenEditorsContext"),j.OpenEditorsContextShare=new j("OpenEditorsContextShare"),j.ProblemsPanelContext=new j("ProblemsPanelContext"),j.SCMInputBox=new j("SCMInputBox"),j.SCMChangesSeparator=new j("SCMChangesSeparator"),j.SCMChangesContext=new j("SCMChangesContext"),j.SCMIncomingChanges=new j("SCMIncomingChanges"),j.SCMIncomingChangesContext=new j("SCMIncomingChangesContext"),j.SCMIncomingChangesSetting=new j("SCMIncomingChangesSetting"),j.SCMOutgoingChanges=new j("SCMOutgoingChanges"),j.SCMOutgoingChangesContext=new j("SCMOutgoingChangesContext"),j.SCMOutgoingChangesSetting=new j("SCMOutgoingChangesSetting"),j.SCMIncomingChangesAllChangesContext=new j("SCMIncomingChangesAllChangesContext"),j.SCMIncomingChangesHistoryItemContext=new j("SCMIncomingChangesHistoryItemContext"),j.SCMOutgoingChangesAllChangesContext=new j("SCMOutgoingChangesAllChangesContext"),j.SCMOutgoingChangesHistoryItemContext=new j("SCMOutgoingChangesHistoryItemContext"),j.SCMChangeContext=new j("SCMChangeContext"),j.SCMResourceContext=new j("SCMResourceContext"),j.SCMResourceContextShare=new j("SCMResourceContextShare"),j.SCMResourceFolderContext=new j("SCMResourceFolderContext"),j.SCMResourceGroupContext=new j("SCMResourceGroupContext"),j.SCMSourceControl=new j("SCMSourceControl"),j.SCMSourceControlInline=new j("SCMSourceControlInline"),j.SCMSourceControlTitle=new j("SCMSourceControlTitle"),j.SCMHistoryTitle=new j("SCMHistoryTitle"),j.SCMTitle=new j("SCMTitle"),j.SearchContext=new j("SearchContext"),j.SearchActionMenu=new j("SearchActionContext"),j.StatusBarWindowIndicatorMenu=new j("StatusBarWindowIndicatorMenu"),j.StatusBarRemoteIndicatorMenu=new j("StatusBarRemoteIndicatorMenu"),j.StickyScrollContext=new j("StickyScrollContext"),j.TestItem=new j("TestItem"),j.TestItemGutter=new j("TestItemGutter"),j.TestProfilesContext=new j("TestProfilesContext"),j.TestMessageContext=new j("TestMessageContext"),j.TestMessageContent=new j("TestMessageContent"),j.TestPeekElement=new j("TestPeekElement"),j.TestPeekTitle=new j("TestPeekTitle"),j.TestCallStack=new j("TestCallStack"),j.TouchBarContext=new j("TouchBarContext"),j.TitleBarContext=new j("TitleBarContext"),j.TitleBarTitleContext=new j("TitleBarTitleContext"),j.TunnelContext=new j("TunnelContext"),j.TunnelPrivacy=new j("TunnelPrivacy"),j.TunnelProtocol=new j("TunnelProtocol"),j.TunnelPortInline=new j("TunnelInline"),j.TunnelTitle=new j("TunnelTitle"),j.TunnelLocalAddressInline=new j("TunnelLocalAddressInline"),j.TunnelOriginInline=new j("TunnelOriginInline"),j.ViewItemContext=new j("ViewItemContext"),j.ViewContainerTitle=new j("ViewContainerTitle"),j.ViewContainerTitleContext=new j("ViewContainerTitleContext"),j.ViewTitle=new j("ViewTitle"),j.ViewTitleContext=new j("ViewTitleContext"),j.CommentEditorActions=new j("CommentEditorActions"),j.CommentThreadTitle=new j("CommentThreadTitle"),j.CommentThreadActions=new j("CommentThreadActions"),j.CommentThreadAdditionalActions=new j("CommentThreadAdditionalActions"),j.CommentThreadTitleContext=new j("CommentThreadTitleContext"),j.CommentThreadCommentContext=new j("CommentThreadCommentContext"),j.CommentTitle=new j("CommentTitle"),j.CommentActions=new j("CommentActions"),j.CommentsViewThreadActions=new j("CommentsViewThreadActions"),j.InteractiveToolbar=new j("InteractiveToolbar"),j.InteractiveCellTitle=new j("InteractiveCellTitle"),j.InteractiveCellDelete=new j("InteractiveCellDelete"),j.InteractiveCellExecute=new j("InteractiveCellExecute"),j.InteractiveInputExecute=new j("InteractiveInputExecute"),j.InteractiveInputConfig=new j("InteractiveInputConfig"),j.ReplInputExecute=new j("ReplInputExecute"),j.IssueReporter=new j("IssueReporter"),j.NotebookToolbar=new j("NotebookToolbar"),j.NotebookStickyScrollContext=new j("NotebookStickyScrollContext"),j.NotebookCellTitle=new j("NotebookCellTitle"),j.NotebookCellDelete=new j("NotebookCellDelete"),j.NotebookCellInsert=new j("NotebookCellInsert"),j.NotebookCellBetween=new j("NotebookCellBetween"),j.NotebookCellListTop=new j("NotebookCellTop"),j.NotebookCellExecute=new j("NotebookCellExecute"),j.NotebookCellExecuteGoTo=new j("NotebookCellExecuteGoTo"),j.NotebookCellExecutePrimary=new j("NotebookCellExecutePrimary"),j.NotebookDiffCellInputTitle=new j("NotebookDiffCellInputTitle"),j.NotebookDiffCellMetadataTitle=new j("NotebookDiffCellMetadataTitle"),j.NotebookDiffCellOutputsTitle=new j("NotebookDiffCellOutputsTitle"),j.NotebookOutputToolbar=new j("NotebookOutputToolbar"),j.NotebookOutlineFilter=new j("NotebookOutlineFilter"),j.NotebookOutlineActionMenu=new j("NotebookOutlineActionMenu"),j.NotebookEditorLayoutConfigure=new j("NotebookEditorLayoutConfigure"),j.NotebookKernelSource=new j("NotebookKernelSource"),j.BulkEditTitle=new j("BulkEditTitle"),j.BulkEditContext=new j("BulkEditContext"),j.TimelineItemContext=new j("TimelineItemContext"),j.TimelineTitle=new j("TimelineTitle"),j.TimelineTitleContext=new j("TimelineTitleContext"),j.TimelineFilterSubMenu=new j("TimelineFilterSubMenu"),j.AccountsContext=new j("AccountsContext"),j.SidebarTitle=new j("SidebarTitle"),j.PanelTitle=new j("PanelTitle"),j.AuxiliaryBarTitle=new j("AuxiliaryBarTitle"),j.AuxiliaryBarHeader=new j("AuxiliaryBarHeader"),j.TerminalInstanceContext=new j("TerminalInstanceContext"),j.TerminalEditorInstanceContext=new j("TerminalEditorInstanceContext"),j.TerminalNewDropdownContext=new j("TerminalNewDropdownContext"),j.TerminalTabContext=new j("TerminalTabContext"),j.TerminalTabEmptyAreaContext=new j("TerminalTabEmptyAreaContext"),j.TerminalStickyScrollContext=new j("TerminalStickyScrollContext"),j.WebviewContext=new j("WebviewContext"),j.InlineCompletionsActions=new j("InlineCompletionsActions"),j.InlineEditsActions=new j("InlineEditsActions"),j.InlineEditActions=new j("InlineEditActions"),j.NewFile=new j("NewFile"),j.MergeInput1Toolbar=new j("MergeToolbar1Toolbar"),j.MergeInput2Toolbar=new j("MergeToolbar2Toolbar"),j.MergeBaseToolbar=new j("MergeBaseToolbar"),j.MergeInputResultToolbar=new j("MergeToolbarResultToolbar"),j.InlineSuggestionToolbar=new j("InlineSuggestionToolbar"),j.InlineEditToolbar=new j("InlineEditToolbar"),j.ChatContext=new j("ChatContext"),j.ChatCodeBlock=new j("ChatCodeblock"),j.ChatCompareBlock=new j("ChatCompareBlock"),j.ChatMessageTitle=new j("ChatMessageTitle"),j.ChatExecute=new j("ChatExecute"),j.ChatExecuteSecondary=new j("ChatExecuteSecondary"),j.ChatInputSide=new j("ChatInputSide"),j.AccessibleView=new j("AccessibleView"),j.MultiDiffEditorFileToolbar=new j("MultiDiffEditorFileToolbar"),j.DiffEditorHunkToolbar=new j("DiffEditorHunkToolbar"),j.DiffEditorSelectionToolbar=new j("DiffEditorSelectionToolbar");let _r=j;const I1=nn("menuService"),ES=class ES{static for(e){let t=this._all.get(e);return t||(t=new ES(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const n of e)n instanceof ES&&t.add(n.id);return t}constructor(e){this.id=e,this.has=t=>t===e}};ES._all=new Map;let Pp=ES;const Kb=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new K8e({merge:Pp.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(i){return this._commands.set(i.id,i),this._onDidChangeMenu.fire(Pp.for(_r.CommandPalette)),Dt(()=>{this._commands.delete(i.id)&&this._onDidChangeMenu.fire(Pp.for(_r.CommandPalette))})}getCommand(i){return this._commands.get(i)}getCommands(){const i=new Map;return this._commands.forEach((e,t)=>i.set(t,e)),i}appendMenuItem(i,e){let t=this._menuItems.get(i);t||(t=new ba,this._menuItems.set(i,t));const n=t.push(e);return this._onDidChangeMenu.fire(Pp.for(i)),Dt(()=>{n(),this._onDidChangeMenu.fire(Pp.for(i))})}appendMenuItems(i){const e=new Ze;for(const{id:t,item:n}of i)e.add(this.appendMenuItem(t,n));return e}getMenuItems(i){let e;return this._menuItems.has(i)?e=[...this._menuItems.get(i)]:e=[],i===_r.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(i){const e=new Set;for(const t of i)KC(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||i.push({command:t})})}};class GC extends K4{constructor(e,t,n){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,n,"submenu"),this.item=e,this.hideActions=t}}let nf=sL=class{static label(e,t){return t!=null&&t.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}constructor(e,t,n,s,r,o,a){var c;this.hideActions=s,this.menuKeybinding=r,this._commandService=a,this.id=e.id,this.label=sL.label(e,n),this.tooltip=(typeof e.tooltip=="string"?e.tooltip:(c=e.tooltip)==null?void 0:c.value)??"",this.enabled=!e.precondition||o.contextMatchesRules(e.precondition),this.checked=void 0;let l;if(e.toggled){const u=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=o.contextMatchesRules(u.condition),this.checked&&u.tooltip&&(this.tooltip=typeof u.tooltip=="string"?u.tooltip:u.tooltip.value),this.checked&&dn.isThemeIcon(u.icon)&&(l=u.icon),this.checked&&u.title&&(this.label=typeof u.title=="string"?u.title:u.title.value)}l||(l=dn.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new sL(t,void 0,n,s,void 0,o,a):void 0,this._options=n,this.class=l&&dn.asClassName(l)}run(...e){var n,s;let t=[];return(n=this._options)!=null&&n.arg&&(t=[...t,this._options.arg]),(s=this._options)!=null&&s.shouldForwardArgs&&(t=[...t,...e]),this._commandService.executeCommand(this.id,...t)}};nf=sL=xBe([bX(5,Nn),bX(6,ll)],nf);const D1=nn("telemetryService"),Tu=nn("logService");var Go;(function(i){i[i.Off=0]="Off",i[i.Trace=1]="Trace",i[i.Debug=2]="Debug",i[i.Info=3]="Info",i[i.Warning=4]="Warning",i[i.Error=5]="Error"})(Go||(Go={}));const Bhe=Go.Info;class Vhe extends be{constructor(){super(...arguments),this.level=Bhe,this._onDidChangeLogLevel=this._register(new se),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==Go.Off&&this.level<=e}}class TBe extends Vhe{constructor(e=Bhe,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.checkLogLevel(Go.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.checkLogLevel(Go.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.checkLogLevel(Go.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.checkLogLevel(Go.Warning)&&(this.useColors?console.log("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.checkLogLevel(Go.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",e,...t):console.error(e,...t))}}class LBe extends Vhe{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const n of this.loggers)n.trace(e,...t)}debug(e,...t){for(const n of this.loggers)n.debug(e,...t)}info(e,...t){for(const n of this.loggers)n.info(e,...t)}warn(e,...t){for(const n of this.loggers)n.warn(e,...t)}error(e,...t){for(const n of this.loggers)n.error(e,...t)}dispose(){for(const e of this.loggers)e.dispose();super.dispose()}}function IBe(i){switch(i){case Go.Trace:return"trace";case Go.Debug:return"debug";case Go.Info:return"info";case Go.Warning:return"warn";case Go.Error:return"error";case Go.Off:return"off"}}new et("logLevel",IBe(Go.Info));class nA{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let n=t.kbExpr;this.precondition&&(n?n=En.and(n,this.precondition):n=this.precondition);const s={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};W2.registerKeybindingRule(s)}}oa.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){Kb.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class nU extends nA{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n,s){return this._implementations.push({priority:e,name:t,implementation:n,when:s}),this._implementations.sort((r,o)=>o.priority-r.priority),{dispose:()=>{for(let r=0;r<this._implementations.length;r++)if(this._implementations[r].implementation===n){this._implementations.splice(r,1);return}}}}runCommand(e,t){const n=e.get(Tu),s=e.get(Nn);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const r of this._implementations){if(r.when){const a=s.getContext(ro());if(!r.when.evaluate(a))continue}const o=r.implementation(e,t);if(o)return n.trace(`Command '${this.id}' was handled by '${r.name}'.`),typeof o=="boolean"?void 0:o}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class Whe extends nA{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class i1 extends nA{static bindToContribution(e){return class extends i1{constructor(n){super(n),this._callback=n.handler}runEditorCommand(n,s,r){const o=e(s);o&&this._callback(o,r)}}}static runEditorCommand(e,t,n,s){const r=e.get(Es),o=r.getFocusedCodeEditor()||r.getActiveCodeEditor();if(o)return o.invokeWithinContext(a=>{if(a.get(Nn).contextMatchesRules(n??void 0))return s(a,o,t)})}runCommand(e,t){return i1.runEditorCommand(e,t,this.precondition,(n,s,r)=>this.runEditorCommand(n,s,r))}}function Lt(i){return dd.INSTANCE.registerEditorCommand(i),i}function Hhe(i,e,t){dd.INSTANCE.registerEditorContribution(i,e,t)}var Xv;(function(i){function e(o){return dd.INSTANCE.getEditorCommand(o)}i.getEditorCommand=e;function t(){return dd.INSTANCE.getEditorActions()}i.getEditorActions=t;function n(){return dd.INSTANCE.getEditorContributions()}i.getEditorContributions=n;function s(o){return dd.INSTANCE.getEditorContributions().filter(a=>o.indexOf(a.id)>=0)}i.getSomeEditorContributions=s;function r(){return dd.INSTANCE.getDiffEditorContributions()}i.getDiffEditorContributions=r})(Xv||(Xv={}));const DBe={EditorCommonContributions:"editor.contributions"},zN=class zN{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,n){this.editorContributions.push({id:e,ctor:t,instantiation:n})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}};zN.INSTANCE=new zN;let dd=zN;ir.add(DBe.EditorCommonContributions,dd.INSTANCE);function H2(i){return i.register(),i}const Uhe=H2(new nU({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:_r.MenubarEditMenu,group:"1_do",title:S({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:_r.CommandPalette,group:"",title:S("undo","Undo"),order:1}]}));H2(new Whe(Uhe,{id:"default:undo",precondition:void 0}));const zhe=H2(new nU({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:_r.MenubarEditMenu,group:"1_do",title:S({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:_r.CommandPalette,group:"",title:S("redo","Redo"),order:1}]}));H2(new Whe(zhe,{id:"default:redo",precondition:void 0}));const NBe=H2(new nU({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:_r.MenubarSelectionMenu,group:"1_basic",title:S({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:_r.CommandPalette,group:"",title:S("selectAll","Select All"),order:1}]})),RBe="modulepreload",ABe=function(i){return"/"+i},yX={},PBe=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(l=>{if(l=ABe(l),l in yX)return;yX[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":RBe,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((h,g)=>{d.addEventListener("load",h),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})},wX="default",MBe="$initialize";let CX=!1;function m8(i){By&&(CX||(CX=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(i.message))}class OBe{constructor(e,t,n,s,r){this.vsWorker=e,this.req=t,this.channel=n,this.method=s,this.args=r,this.type=0}}class SX{constructor(e,t,n,s){this.vsWorker=e,this.seq=t,this.res=n,this.err=s,this.type=1}}class FBe{constructor(e,t,n,s,r){this.vsWorker=e,this.req=t,this.channel=n,this.eventName=s,this.arg=r,this.type=2}}class BBe{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3}}class VBe{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class WBe{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t,n){const s=String(++this._lastSentReq);return new Promise((r,o)=>{this._pendingReplies[s]={resolve:r,reject:o},this._send(new OBe(this._workerId,s,e,t,n))})}listen(e,t,n){let s=null;const r=new se({onWillAddFirstListener:()=>{s=String(++this._lastSentReq),this._pendingEmitters.set(s,r),this._send(new FBe(this._workerId,s,e,t,n))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(s),this._send(new VBe(this._workerId,s)),s=null}});return r.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}createProxyToRemoteChannel(e,t){const n={get:(s,r)=>(typeof r=="string"&&!s[r]&&($he(r)?s[r]=o=>this.listen(e,r,o):jhe(r)?s[r]=this.listen(e,r,void 0):r.charCodeAt(0)===36&&(s[r]=async(...o)=>(await(t==null?void 0:t()),this.sendMessage(e,r,o)))),s[r])};return new Proxy(Object.create(null),n)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.channel,e.method,e.args).then(s=>{this._send(new SX(this._workerId,t,s,void 0))},s=>{s.detail instanceof Error&&(s.detail=RQ(s.detail)),this._send(new SX(this._workerId,t,void 0,RQ(s)))})}_handleSubscribeEventMessage(e){const t=e.req,n=this._handler.handleEvent(e.channel,e.eventName,e.arg)(s=>{this._send(new BBe(this._workerId,t,s))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===0)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class HBe extends be{constructor(e,t){super(),this._localChannels=new Map,this._worker=this._register(e.create({amdModuleId:"vs/base/common/worker/simpleWorker",esmModuleLocation:t.esmModuleLocation,label:t.label},r=>{this._protocol.handleMessage(r)},r=>{Un(r)})),this._protocol=new WBe({sendMessage:(r,o)=>{this._worker.postMessage(r,o)},handleMessage:(r,o,a)=>this._handleMessage(r,o,a),handleEvent:(r,o,a)=>this._handleEvent(r,o,a)}),this._protocol.setWorkerId(this._worker.getId());let n=null;const s=globalThis.require;typeof s<"u"&&typeof s.getConfig=="function"?n=s.getConfig():typeof globalThis.requirejs<"u"&&(n=globalThis.requirejs.s.contexts._.config),this._onModuleLoaded=this._protocol.sendMessage(wX,MBe,[this._worker.getId(),JSON.parse(JSON.stringify(n)),t.amdModuleId]),this.proxy=this._protocol.createProxyToRemoteChannel(wX,async()=>{await this._onModuleLoaded}),this._onModuleLoaded.catch(r=>{this._onError("Worker failed to load "+t.amdModuleId,r)})}_handleMessage(e,t,n){const s=this._localChannels.get(e);if(!s)return Promise.reject(new Error(`Missing channel ${e} on main thread`));if(typeof s[t]!="function")return Promise.reject(new Error(`Missing method ${t} on main thread channel ${e}`));try{return Promise.resolve(s[t].apply(s,n))}catch(r){return Promise.reject(r)}}_handleEvent(e,t,n){const s=this._localChannels.get(e);if(!s)throw new Error(`Missing channel ${e} on main thread`);if($he(t)){const r=s[t].call(s,n);if(typeof r!="function")throw new Error(`Missing dynamic event ${t} on main thread channel ${e}.`);return r}if(jhe(t)){const r=s[t];if(typeof r!="function")throw new Error(`Missing event ${t} on main thread channel ${e}.`);return r}throw new Error(`Malformed event name ${t}`)}setChannel(e,t){this._localChannels.set(e,t)}_onError(e,t){console.error(e),console.info(t)}}function jhe(i){return i[0]==="o"&&i[1]==="n"&&wg(i.charCodeAt(2))}function $he(i){return/^onDynamic/.test(i)&&wg(i.charCodeAt(9))}function N1(i,e){var n;const t=globalThis.MonacoEnvironment;if(t!=null&&t.createTrustedTypesPolicy)try{return t.createTrustedTypesPolicy(i,e)}catch(s){Un(s);return}try{return(n=globalThis.trustedTypes)==null?void 0:n.createPolicy(i,e)}catch(s){Un(s);return}}let tv;typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope"&&globalThis.workerttPolicy!==void 0?tv=globalThis.workerttPolicy:tv=N1("defaultWorkerFactory",{createScriptURL:i=>i});function UBe(i,e){const t=globalThis.MonacoEnvironment;if(t){if(typeof t.getWorker=="function")return t.getWorker("workerMain.js",e);if(typeof t.getWorkerUrl=="function"){const n=t.getWorkerUrl("workerMain.js",e);return new Worker(tv?tv.createScriptURL(n):n,{name:e,type:"module"})}}if(i){const n=zBe(e,i.toString(!0)),s=new Worker(tv?tv.createScriptURL(n):n,{name:e,type:"module"});return jBe(s)}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function zBe(i,e,t){if(!(/^((http:)|(https:)|(file:)|(vscode-file:))/.test(e)&&e.substring(0,globalThis.origin.length)!==globalThis.origin)){const r=e.lastIndexOf("?"),o=e.lastIndexOf("#",r),a=r>0?new URLSearchParams(e.substring(r+1,~o?o:void 0)):new URLSearchParams;r8.addSearchParam(a,!0,!0),a.toString()?e=`${e}?${a.toString()}#${i}`:e=`${e}#${i}`}const s=new Blob([bH([`/*${i}*/`,void 0,`globalThis._VSCODE_NLS_MESSAGES = ${JSON.stringify(Dde())};`,`globalThis._VSCODE_NLS_LANGUAGE = ${JSON.stringify(wH())};`,`globalThis._VSCODE_FILE_ROOT = '${globalThis._VSCODE_FILE_ROOT}';`,"const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });","globalThis.workerttPolicy = ttPolicy;",`await import(ttPolicy?.createScriptURL('${e}') ?? '${e}');`,"globalThis.postMessage({ type: 'vscode-worker-ready' });",`/*${i}*/`]).join("")],{type:"application/javascript"});return URL.createObjectURL(s)}function jBe(i){return new Promise((e,t)=>{i.onmessage=function(n){n.data.type==="vscode-worker-ready"&&(i.onmessage=null,e(i))},i.onerror=t})}function $Be(i){return typeof i.then=="function"}class qBe extends be{constructor(e,t,n,s,r,o){super(),this.id=n,this.label=s;const a=UBe(e,s);$Be(a)?this.worker=a:this.worker=Promise.resolve(a),this.postMessage(t,[]),this.worker.then(l=>{l.onmessage=function(c){r(c.data)},l.onmessageerror=o,typeof l.addEventListener=="function"&&l.addEventListener("error",o)}),this._register(Dt(()=>{var l;(l=this.worker)==null||l.then(c=>{c.onmessage=null,c.onmessageerror=null,c.removeEventListener("error",o),c.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(e,t){var n;(n=this.worker)==null||n.then(s=>{try{s.postMessage(e,t)}catch(r){Un(r),Un(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:r}))}})}}class KBe{constructor(e,t){this.amdModuleId=e,this.label=t,this.esmModuleLocation=z4.asBrowserUri(`${e}.esm.js`)}}const jN=class jN{constructor(){this._webWorkerFailedBeforeError=!1}create(e,t,n){const s=++jN.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new qBe(e.esmModuleLocation,e.amdModuleId,s,e.label||"anonymous"+s,t,r=>{m8(r),this._webWorkerFailedBeforeError=r,n(r)})}};jN.LAST_WORKER_ID=0;let p8=jN;function GBe(i,e){const t=typeof i=="string"?new KBe(i,e):i;return new HBe(new p8,t)}var wo;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(wo||(wo={}));class WO{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const n=e.findTokenIndexAtOffset(t-2),s=e.getStandardTokenType(n);return this.isOK(s)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){const s=String.fromCharCode(n);if(!this.open.includes(s)&&!this.close.includes(s))return s}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class YBe{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)Vw(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),Vw(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),Vw(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),Vw(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&Vw(this.autoClosingPairsCloseSingleChar,t.close,t)}}function Vw(i,e,t){i.has(e)?i.get(e).push(t):i.set(e,[t])}const Ev=class Ev{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new WO(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new WO({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new WO({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:Ev.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:Ev.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}};Ev.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`,Ev.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;let _8=Ev;function r0(i,e){const t=i.getCount(),n=i.findTokenIndexAtOffset(e),s=i.getLanguageId(n);let r=n;for(;r+1<t&&i.getLanguageId(r+1)===s;)r++;let o=n;for(;o>0&&i.getLanguageId(o-1)===s;)o--;return new QBe(i,s,o,r+1,i.getStartOffset(o),i.getEndOffset(r))}class QBe{constructor(e,t,n,s,r,o){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=s,this.firstCharOffset=r,this._lastCharOffset=o,this.languageIdCodec=e.languageIdCodec}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getLineLength(){return this._lastCharOffset-this.firstCharOffset}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}toIViewLineTokens(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}}function Ku(i){return(i&3)!==0}const kX=typeof Buffer<"u";let HO;class iU{static wrap(e){return kX&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new iU(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return kX?this.buffer.toString():(HO||(HO=new TextDecoder),HO.decode(this.buffer))}}function XBe(i,e){return i[e+0]<<0>>>0|i[e+1]<<8>>>0}function ZBe(i,e,t){i[t+0]=e&255,e=e>>>8,i[t+1]=e&255}function qc(i,e){return i[e]*2**24+i[e+1]*2**16+i[e+2]*2**8+i[e+3]}function Kc(i,e,t){i[t+3]=e,e=e>>>8,i[t+2]=e,e=e>>>8,i[t+1]=e,e=e>>>8,i[t]=e}function xX(i,e){return i[e]}function EX(i,e,t){i[t]=e}let UO;function qhe(){return UO||(UO=new TextDecoder("UTF-16LE")),UO}let zO;function JBe(){return zO||(zO=new TextDecoder("UTF-16BE")),zO}let jO;function Khe(){return jO||(jO=V9e()?qhe():JBe()),jO}function eVe(i,e,t){const n=new Uint16Array(i.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?tVe(i,e,t):qhe().decode(n)}function tVe(i,e,t){const n=[];let s=0;for(let r=0;r<t;r++){const o=XBe(i,e);e+=2,n[s++]=String.fromCharCode(o)}return n.join("")}class iA{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return Khe().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||As(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}class JI{constructor(e,t,n,s,r,o){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=s,this.forwardRegex=r,this.reversedRegex=o,this._openSet=JI._toSet(this.open),this._closeSet=JI._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}function nVe(i){const e=i.length;i=i.map(o=>[o[0].toLowerCase(),o[1].toLowerCase()]);const t=[];for(let o=0;o<e;o++)t[o]=o;const n=(o,a)=>{const[l,c]=o,[u,d]=a;return l===u||l===d||c===u||c===d},s=(o,a)=>{const l=Math.min(o,a),c=Math.max(o,a);for(let u=0;u<e;u++)t[u]===c&&(t[u]=l)};for(let o=0;o<e;o++){const a=i[o];for(let l=o+1;l<e;l++){const c=i[l];n(a,c)&&s(t[o],t[l])}}const r=[];for(let o=0;o<e;o++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===o){const[u,d]=i[c];a.push(u),l.push(d)}a.length>0&&r.push({open:a,close:l})}return r}class iVe{constructor(e,t){this._richEditBracketsBrand=void 0;const n=nVe(t);this.brackets=n.map((s,r)=>new JI(e,r,s.open,s.close,sVe(s.open,s.close,n,r),rVe(s.open,s.close,n,r))),this.forwardRegex=oVe(this.brackets),this.reversedRegex=aVe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const s of this.brackets){for(const r of s.open)this.textIsBracket[r]=s,this.textIsOpenBracket[r]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,r.length);for(const r of s.close)this.textIsBracket[r]=s,this.textIsOpenBracket[r]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,r.length)}}}function Ghe(i,e,t,n){for(let s=0,r=e.length;s<r;s++){if(s===t)continue;const o=e[s];for(const a of o.open)a.indexOf(i)>=0&&n.push(a);for(const a of o.close)a.indexOf(i)>=0&&n.push(a)}}function Yhe(i,e){return i.length-e.length}function sA(i){if(i.length<=1)return i;const e=[],t=new Set;for(const n of i)t.has(n)||(e.push(n),t.add(n));return e}function sVe(i,e,t,n){let s=[];s=s.concat(i),s=s.concat(e);for(let r=0,o=s.length;r<o;r++)Ghe(s[r],t,n,s);return s=sA(s),s.sort(Yhe),s.reverse(),U2(s)}function rVe(i,e,t,n){let s=[];s=s.concat(i),s=s.concat(e);for(let r=0,o=s.length;r<o;r++)Ghe(s[r],t,n,s);return s=sA(s),s.sort(Yhe),s.reverse(),U2(s.map(sU))}function oVe(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=sA(e),U2(e)}function aVe(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=sA(e),U2(e.map(sU))}function lVe(i){const e=/^[\w ]+$/.test(i);return i=wf(i),e?`\\b${i}\\b`:i}function U2(i,e){const t=`(${i.map(lVe).join(")|(")})`;return ihe(t,!0,e)}const sU=function(){function i(n){const s=new Uint16Array(n.length);let r=0;for(let o=n.length-1;o>=0;o--)s[r++]=n.charCodeAt(o);return Khe().decode(s)}let e=null,t=null;return function(s){return e!==s&&(e=s,t=i(e)),t}}();class ec{static _findPrevBracketInText(e,t,n,s){const r=n.match(e);if(!r)return null;const o=n.length-(r.index||0),a=r[0].length,l=s+o;return new J(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,s,r){const a=sU(n).substring(n.length-r,n.length-s);return this._findPrevBracketInText(e,t,a,s)}static findNextBracketInText(e,t,n,s){const r=n.match(e);if(!r)return null;const o=r.index||0,a=r[0].length;if(a===0)return null;const l=s+o;return new J(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,s,r){const o=n.substring(s,r);return this.findNextBracketInText(e,t,o,s)}}class cVe{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const s=n.charAt(n.length-1);e.push(s)}return Q0(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const s=t.findTokenIndexAtOffset(n-1);if(Ku(t.getStandardTokenType(s)))return null;const r=this._richEditBrackets.reversedRegex,o=t.getLineContent().substring(0,n-1)+e,a=ec.findPrevBracketInRange(r,1,o,0,o.length);if(!a)return null;const l=o.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const u=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(u)?{matchOpenBracket:l}:null}}function UE(i){return i.global&&(i.lastIndex=0),!0}class uVe{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&UE(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&UE(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&UE(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&UE(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class nv{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const n=nv._createOpenBracketRegExp(t[0]),s=nv._createCloseBracketRegExp(t[1]);n&&s&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:s})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,s){if(e>=3)for(let r=0,o=this._regExpRules.length;r<o;r++){const a=this._regExpRules[r];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:s},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&n.length>0&&s.length>0)for(let r=0,o=this._brackets.length;r<o;r++){const a=this._brackets[r];if(a.openRegExp.test(n)&&a.closeRegExp.test(s))return{indentAction:wo.IndentOutdent}}if(e>=2&&n.length>0){for(let r=0,o=this._brackets.length;r<o;r++)if(this._brackets[r].openRegExp.test(n))return{indentAction:wo.Indent}}return null}static _createOpenBracketRegExp(e){let t=wf(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",nv._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=wf(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,nv._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return Un(t),null}}}const Oi=nn("configurationService");function v8(i,e){const t=Object.create(null);for(const n in i)Qhe(t,n,i[n],e);return t}function Qhe(i,e,t,n){const s=e.split("."),r=s.pop();let o=i;for(let a=0;a<s.length;a++){const l=s[a];let c=o[l];switch(typeof c){case"undefined":c=o[l]=Object.create(null);break;case"object":if(c===null){n(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is null`);return}break;default:n(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}o=c}if(typeof o=="object"&&o!==null)try{o[r]=t}catch{n(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}else n(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}function dVe(i,e){const t=e.split(".");Xhe(i,t)}function Xhe(i,e){const t=e.shift();if(e.length===0){delete i[t];return}if(Object.keys(i).indexOf(t)!==-1){const n=i[t];typeof n=="object"&&!Array.isArray(n)&&(Xhe(n,e),Object.keys(n).length===0&&delete i[t])}}function TX(i,e,t){function n(o,a){let l=o;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const s=e.split("."),r=n(i,s);return typeof r>"u"?t:r}function hVe(i){return i.replace(/[\[\]]/g,"")}const Ws=nn("languageService");class od{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}const Zhe=[];function _n(i,e,t){e instanceof od||(e=new od(e,[],!!t)),Zhe.push([i,e])}function LX(){return Zhe}const Mh=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),rA={JSONContribution:"base.contributions.json"};function fVe(i){return i.length>0&&i.charAt(i.length-1)==="#"?i.substring(0,i.length-1):i}class gVe{constructor(){this._onDidChangeSchema=new se,this.schemasById={}}registerSchema(e,t){this.schemasById[fVe(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const mVe=new gVe;ir.add(rA.JSONContribution,mVe);const R1={Configuration:"base.contributions.configuration"},zE="vscode://schemas/settings/resourceLanguage",IX=ir.as(rA.JSONContribution);class pVe{constructor(){this.registeredConfigurationDefaults=[],this.overrideIdentifiers=new Set,this._onDidSchemaChange=new se,this._onDidUpdateConfiguration=new se,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:S("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},IX.registerSchema(zE,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=new Set;this.doRegisterConfigurations(e,t,n),IX.registerSchema(zE,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);const n=[];for(const{overrides:s,source:r}of e)for(const o in s){t.add(o);const a=this.configurationDefaultsOverrides.get(o)??this.configurationDefaultsOverrides.set(o,{configurationDefaultOverrides:[]}).get(o),l=s[o];if(a.configurationDefaultOverrides.push({value:l,source:r}),Im.test(o)){const c=this.mergeDefaultConfigurationsForOverrideIdentifier(o,l,r,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c,this.updateDefaultOverrideProperty(o,c,r),n.push(...eD(o))}else{const c=this.mergeDefaultConfigurationsForConfigurationProperty(o,l,r,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c;const u=this.configurationProperties[o];u&&(this.updatePropertyDefaultValue(o,u),this.updateSchema(o,u))}}this.doRegisterOverrideIdentifiers(n)}updateDefaultOverrideProperty(e,t,n){const s={type:"object",default:t.value,description:S("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",hVe(e)),$ref:zE,defaultDefaultValue:t.value,source:n,defaultValueSource:n};this.configurationProperties[e]=s,this.defaultLanguageConfigurationOverridesNode.properties[e]=s}mergeDefaultConfigurationsForOverrideIdentifier(e,t,n,s){const r=(s==null?void 0:s.value)||{},o=(s==null?void 0:s.source)??new Map;if(!(o instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const a of Object.keys(t)){const l=t[a];if(Xo(l)&&(Dl(r[a])||Xo(r[a]))){if(r[a]={...r[a]??{},...l},n)for(const u in l)o.set(`${a}.${u}`,n)}else r[a]=l,n?o.set(a,n):o.delete(a)}return{value:r,source:o}}mergeDefaultConfigurationsForConfigurationProperty(e,t,n,s){const r=this.configurationProperties[e],o=(s==null?void 0:s.value)??(r==null?void 0:r.defaultDefaultValue);let a=n;if(Xo(t)&&(r!==void 0&&r.type==="object"||r===void 0&&(Dl(o)||Xo(o)))){if(a=(s==null?void 0:s.source)??new Map,!(a instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)n&&a.set(`${e}.${c}`,n);t={...Xo(o)?o:{},...t}}return{value:t,source:a}}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,n){e.forEach(s=>{this.validateAndRegisterProperties(s,t,s.extensionInfo,s.restrictedProperties,void 0,n),this.configurationContributors.push(s),this.registerJSONConfiguration(s)})}validateAndRegisterProperties(e,t=!0,n,s,r=3,o){var c;r=Ka(e.scope)?r:e.scope;const a=e.properties;if(a)for(const u in a){const d=a[u];if(t&&bVe(u,d)){delete a[u];continue}if(d.source=n,d.defaultDefaultValue=a[u].default,this.updatePropertyDefaultValue(u,d),Im.test(u)?d.scope=void 0:(d.scope=Ka(d.scope)?r:d.scope,d.restricted=Ka(d.restricted)?!!(s!=null&&s.includes(u)):d.restricted),a[u].hasOwnProperty("included")&&!a[u].included){this.excludedConfigurationProperties[u]=a[u],delete a[u];continue}else this.configurationProperties[u]=a[u],(c=a[u].policy)!=null&&c.name&&this.policyConfigurations.set(a[u].policy.name,u);!a[u].deprecationMessage&&a[u].markdownDeprecationMessage&&(a[u].deprecationMessage=a[u].markdownDeprecationMessage),o.add(u)}const l=e.allOf;if(l)for(const u of l)this.validateAndRegisterProperties(u,t,n,s,r,o)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=n=>{const s=n.properties;if(s)for(const o in s)this.updateSchema(o,s[o]);const r=n.allOf;r==null||r.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:S("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:S("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:zE};this.updatePropertyDefaultValue(t,n)}}registerOverridePropertyPatternKey(){S("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),S("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){var o;const n=(o=this.configurationDefaultsOverrides.get(e))==null?void 0:o.configurationDefaultOverrideValue;let s,r;n&&(!t.disallowConfigurationDefault||!n.source)&&(s=n.value,r=n.source),Dl(s)&&(s=t.defaultDefaultValue,r=void 0),Dl(s)&&(s=vVe(t.type)),t.default=s,t.defaultValueSource=r}}const Jhe="\\[([^\\]]+)\\]",DX=new RegExp(Jhe,"g"),_Ve=`^(${Jhe})+$`,Im=new RegExp(_Ve);function eD(i){const e=[];if(Im.test(i)){let t=DX.exec(i);for(;t!=null&&t.length;){const n=t[1].trim();n&&e.push(n),t=DX.exec(i)}}return Q0(e)}function vVe(i){switch(Array.isArray(i)?i[0]:i){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const rL=new pVe;ir.add(R1.Configuration,rL);function bVe(i,e){var t,n,s,r;return i.trim()?Im.test(i)?S("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",i):rL.getConfigurationProperties()[i]!==void 0?S("config.property.duplicate","Cannot register '{0}'. This property is already registered.",i):(t=e.policy)!=null&&t.name&&rL.getPolicyConfigurations().get((n=e.policy)==null?void 0:n.name)!==void 0?S("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",i,(s=e.policy)==null?void 0:s.name,rL.getPolicyConfigurations().get((r=e.policy)==null?void 0:r.name)):null:S("config.property.empty","Cannot register an empty property")}const yVe={ModesRegistry:"editor.modesRegistry"};class wVe{constructor(){this._onDidChangeLanguages=new se,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}const Gb=new wVe;ir.add(yVe.ModesRegistry,Gb);const gc="plaintext",CVe=".txt";Gb.registerLanguage({id:gc,extensions:[CVe],aliases:[S("plainText.alias","Plain Text"),"text"],mimetypes:[Mh.text]});ir.as(R1.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class SVe{constructor(e,t){this.languageId=e;const n=t.brackets?NX(t.brackets):[],s=new GQ(a=>{const l=new Set;return{info:new kVe(this,a,l),closing:l}}),r=new GQ(a=>{const l=new Set,c=new Set;return{info:new xVe(this,a,l,c),opening:l,openingColorized:c}});for(const[a,l]of n){const c=s.get(a),u=r.get(l);c.closing.add(u.info),u.opening.add(c.info)}const o=t.colorizedBracketPairs?NX(t.colorizedBracketPairs):n.filter(a=>!(a[0]==="<"&&a[1]===">"));for(const[a,l]of o){const c=s.get(a),u=r.get(l);c.closing.add(u.info),u.openingColorized.add(c.info),u.opening.add(c.info)}this._openingBrackets=new Map([...s.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...r.cachedValues].map(([a,l])=>[a,l.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}getBracketRegExp(e){const t=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return U2(t,e)}}function NX(i){return i.filter(([e,t])=>e!==""&&t!=="")}class efe{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class kVe extends efe{constructor(e,t,n){super(e,t),this.openedBrackets=n,this.isOpeningBracket=!0}}class xVe extends efe{constructor(e,t,n,s){super(e,t),this.openingBrackets=n,this.openingColorizedBrackets=s,this.isOpeningBracket=!1}closes(e){return e.config!==this.config?!1:this.openingBrackets.has(e)}closesColorized(e){return e.config!==this.config?!1:this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}var EVe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},RX=function(i,e){return function(t,n){e(t,n,i)}};class $O{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const Ud=nn("languageConfigurationService");let b8=class extends be{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new DVe),this.onDidChangeEmitter=this._register(new se),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const n=new Set(Object.values(y8));this._register(this.configurationService.onDidChangeConfiguration(s=>{const r=s.change.keys.some(a=>n.has(a)),o=s.change.overrides.filter(([a,l])=>l.some(c=>n.has(c))).map(([a])=>a);if(r)this.configurations.clear(),this.onDidChangeEmitter.fire(new $O(void 0));else for(const a of o)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new $O(a)))})),this._register(this._registry.onDidChange(s=>{this.configurations.delete(s.languageId),this.onDidChangeEmitter.fire(new $O(s.languageId))}))}register(e,t,n){return this._registry.register(e,t,n)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=TVe(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};b8=EVe([RX(0,Oi),RX(1,Ws)],b8);function TVe(i,e,t,n){let s=e.getLanguageConfiguration(i);if(!s){if(!n.isRegisteredLanguageId(i))return new Zv(i,{});s=new Zv(i,{})}const r=LVe(s.languageId,t),o=nfe([s.underlyingConfig,r]);return new Zv(s.languageId,o)}const y8={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function LVe(i,e){const t=e.getValue(y8.brackets,{overrideIdentifier:i}),n=e.getValue(y8.colorizedBracketPairs,{overrideIdentifier:i});return{brackets:AX(t),colorizedBracketPairs:AX(n)}}function AX(i){if(Array.isArray(i))return i.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function tfe(i,e,t){const n=i.getLineContent(e);let s=po(n);return s.length>t-1&&(s=s.substring(0,t-1)),s}class IVe{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const n=new PX(e,t,++this._order);return this._entries.push(n),this._resolved=null,Dt(()=>{for(let s=0;s<this._entries.length;s++)if(this._entries[s]===n){this._entries.splice(s,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new Zv(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(PX.cmp),nfe(this._entries.map(e=>e.configuration)))}}function nfe(i){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of i)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class PX{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class MX{constructor(e){this.languageId=e}}class DVe extends be{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new se),this.onDidChange=this._onDidChange.event,this._register(this.register(gc,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,n=0){let s=this._entries.get(e);s||(s=new IVe(e),this._entries.set(e,s));const r=s.register(t,n);return this._onDidChange.fire(new MX(e)),Dt(()=>{r.dispose(),this._onDidChange.fire(new MX(e))})}getLanguageConfiguration(e){const t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}}class Zv{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new nv(this.underlyingConfig):null,this.comments=Zv._handleComments(this.underlyingConfig),this.characterPair=new _8(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||kH,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new uVe(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new SVe(e,this.underlyingConfig)}getWordDefinition(){return xH(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new iVe(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new cVe(this.brackets)),this._electricCharacter}onEnter(e,t,n,s){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,s):null}getAutoClosingPairs(){return new YBe(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){const[s,r]=t.blockComment;n.blockCommentStartToken=s,n.blockCommentEndToken=r}return n}}_n(Ud,b8,1);class gg{constructor(e,t,n,s){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=s}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class OX{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,s=e.length;n<s;n++)t[n]=e.charCodeAt(n);return t}}function NVe(i,e,t){return new Oh(new OX(i),new OX(e)).ComputeDiff(t).changes}class x_{static Assert(e,t){if(!e)throw new Error(t)}}class E_{static Copy(e,t,n,s,r){for(let o=0;o<r;o++)n[s+o]=e[t+o]}static Copy2(e,t,n,s,r){for(let o=0;o<r;o++)n[s+o]=e[t+o]}}class FX{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new gg(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class Oh{constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[s,r,o]=Oh._getElements(e),[a,l,c]=Oh._getElements(t);this._hasStrings=o&&c,this._originalStringElements=s,this._originalElementsOrHash=r,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(Oh._isStringArray(t)){const n=new Int32Array(t.length);for(let s=0,r=t.length;s<r;s++)n[s]=zH(t[s],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const n=Oh._getStrictElement(this._originalSequence,e),s=Oh._getStrictElement(this._modifiedSequence,t);return n===s}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,s,r){const o=[!1];let a=this.ComputeDiffRecursive(e,t,n,s,o);return r&&(a=this.PrettifyChanges(a)),{quitEarly:o[0],changes:a}}ComputeDiffRecursive(e,t,n,s,r){for(r[0]=!1;e<=t&&n<=s&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&s>=n&&this.ElementsAreEqual(t,s);)t--,s--;if(e>t||n>s){let d;return n<=s?(x_.Assert(e===t+1,"originalStart should only be one more than originalEnd"),d=[new gg(e,0,n,s-n+1)]):e<=t?(x_.Assert(n===s+1,"modifiedStart should only be one more than modifiedEnd"),d=[new gg(e,t-e+1,n,0)]):(x_.Assert(e===t+1,"originalStart should only be one more than originalEnd"),x_.Assert(n===s+1,"modifiedStart should only be one more than modifiedEnd"),d=[]),d}const o=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,s,o,a,r),c=o[0],u=a[0];if(l!==null)return l;if(!r[0]){const d=this.ComputeDiffRecursive(e,c,n,u,r);let h=[];return r[0]?h=[new gg(c+1,t-(c+1)+1,u+1,s-(u+1)+1)]:h=this.ComputeDiffRecursive(c+1,t,u+1,s,r),this.ConcatenateChanges(d,h)}return[new gg(e,t-e+1,n,s-n+1)]}WALKTRACE(e,t,n,s,r,o,a,l,c,u,d,h,g,p,_,v,y,w){let x=null,k=null,T=new FX,R=t,L=n,I=g[0]-v[0]-s,A=-1073741824,B=this.m_forwardHistory.length-1;do{const V=I+e;V===R||V<L&&c[V-1]<c[V+1]?(d=c[V+1],p=d-I-s,d<A&&T.MarkNextChange(),A=d,T.AddModifiedElement(d+1,p),I=V+1-e):(d=c[V-1]+1,p=d-I-s,d<A&&T.MarkNextChange(),A=d-1,T.AddOriginalElement(d,p+1),I=V-1-e),B>=0&&(c=this.m_forwardHistory[B],e=c[0],R=1,L=c.length-1)}while(--B>=-1);if(x=T.getReverseChanges(),w[0]){let V=g[0]+1,U=v[0]+1;if(x!==null&&x.length>0){const W=x[x.length-1];V=Math.max(V,W.getOriginalEnd()),U=Math.max(U,W.getModifiedEnd())}k=[new gg(V,h-V+1,U,_-U+1)]}else{T=new FX,R=o,L=a,I=g[0]-v[0]-l,A=1073741824,B=y?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const V=I+r;V===R||V<L&&u[V-1]>=u[V+1]?(d=u[V+1]-1,p=d-I-l,d>A&&T.MarkNextChange(),A=d+1,T.AddOriginalElement(d+1,p+1),I=V+1-r):(d=u[V-1],p=d-I-l,d>A&&T.MarkNextChange(),A=d,T.AddModifiedElement(d+1,p+1),I=V-1-r),B>=0&&(u=this.m_reverseHistory[B],r=u[0],R=1,L=u.length-1)}while(--B>=-1);k=T.getChanges()}return this.ConcatenateChanges(x,k)}ComputeRecursionPoint(e,t,n,s,r,o,a){let l=0,c=0,u=0,d=0,h=0,g=0;e--,n--,r[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const p=t-e+(s-n),_=p+1,v=new Int32Array(_),y=new Int32Array(_),w=s-n,x=t-e,k=e-n,T=t-s,L=(x-w)%2===0;v[w]=e,y[x]=t,a[0]=!1;for(let I=1;I<=p/2+1;I++){let A=0,B=0;u=this.ClipDiagonalBound(w-I,I,w,_),d=this.ClipDiagonalBound(w+I,I,w,_);for(let U=u;U<=d;U+=2){U===u||U<d&&v[U-1]<v[U+1]?l=v[U+1]:l=v[U-1]+1,c=l-(U-w)-k;const W=l;for(;l<t&&c<s&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(v[U]=l,l+c>A+B&&(A=l,B=c),!L&&Math.abs(U-x)<=I-1&&l>=y[U])return r[0]=l,o[0]=c,W<=y[U]&&I<=1448?this.WALKTRACE(w,u,d,k,x,h,g,T,v,y,l,t,r,c,s,o,L,a):null}const V=(A-e+(B-n)-I)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(A,V))return a[0]=!0,r[0]=A,o[0]=B,V>0&&I<=1448?this.WALKTRACE(w,u,d,k,x,h,g,T,v,y,l,t,r,c,s,o,L,a):(e++,n++,[new gg(e,t-e+1,n,s-n+1)]);h=this.ClipDiagonalBound(x-I,I,x,_),g=this.ClipDiagonalBound(x+I,I,x,_);for(let U=h;U<=g;U+=2){U===h||U<g&&y[U-1]>=y[U+1]?l=y[U+1]-1:l=y[U-1],c=l-(U-x)-T;const W=l;for(;l>e&&c>n&&this.ElementsAreEqual(l,c);)l--,c--;if(y[U]=l,L&&Math.abs(U-w)<=I&&l<=v[U])return r[0]=l,o[0]=c,W>=v[U]&&I<=1448?this.WALKTRACE(w,u,d,k,x,h,g,T,v,y,l,t,r,c,s,o,L,a):null}if(I<=1447){let U=new Int32Array(d-u+2);U[0]=w-u+1,E_.Copy2(v,u,U,1,d-u+1),this.m_forwardHistory.push(U),U=new Int32Array(g-h+2),U[0]=x-h+1,E_.Copy2(y,h,U,1,g-h+1),this.m_reverseHistory.push(U)}}return this.WALKTRACE(w,u,d,k,x,h,g,T,v,y,l,t,r,c,s,o,L,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],s=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,r=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,o=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<s&&n.modifiedStart+n.modifiedLength<r&&(!o||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const c=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!c)break;n.originalStart++,n.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const n=e[t];let s=0,r=0;if(t>0){const d=e[t-1];s=d.originalStart+d.originalLength,r=d.modifiedStart+d.modifiedLength}const o=n.originalLength>0,a=n.modifiedLength>0;let l=0,c=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let d=1;;d++){const h=n.originalStart-d,g=n.modifiedStart-d;if(h<s||g<r||o&&!this.OriginalElementsAreEqual(h,h+n.originalLength)||a&&!this.ModifiedElementsAreEqual(g,g+n.modifiedLength))break;const _=(h===s&&g===r?5:0)+this._boundaryScore(h,n.originalLength,g,n.modifiedLength);_>c&&(c=_,l=d)}n.originalStart-=l,n.modifiedStart-=l;const u=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],u)){e[t-1]=u[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const s=e[t-1],r=e[t],o=r.originalStart-s.originalStart-s.originalLength,a=s.originalStart,l=r.originalStart+r.originalLength,c=l-a,u=s.modifiedStart,d=r.modifiedStart+r.modifiedLength,h=d-u;if(o<5&&c<20&&h<20){const g=this._findBetterContiguousSequence(a,c,u,h,o);if(g){const[p,_]=g;(p!==s.originalStart+s.originalLength||_!==s.modifiedStart+s.modifiedLength)&&(s.originalLength=p-s.originalStart,s.modifiedLength=_-s.modifiedStart,r.originalStart=p+o,r.modifiedStart=_+o,r.originalLength=l-r.originalStart,r.modifiedLength=d-r.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,s,r){if(t<r||s<r)return null;const o=e+t-r+1,a=n+s-r+1;let l=0,c=0,u=0;for(let d=e;d<o;d++)for(let h=n;h<a;h++){const g=this._contiguousSequenceScore(d,h,r);g>0&&g>l&&(l=g,c=d,u=h)}return l>0?[c,u]:null}_contiguousSequenceScore(e,t,n){let s=0;for(let r=0;r<n;r++){if(!this.ElementsAreEqual(e+r,t+r))return 0;s+=this._originalStringElements[e+r].length}return s}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,s){const r=this._OriginalRegionIsBoundary(e,t)?1:0,o=this._ModifiedRegionIsBoundary(n,s)?1:0;return r+o}ConcatenateChanges(e,t){const n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const s=new Array(e.length+t.length-1);return E_.Copy(e,0,s,0,e.length-1),s[e.length-1]=n[0],E_.Copy(t,1,s,e.length,t.length-1),s}else{const s=new Array(e.length+t.length);return E_.Copy(e,0,s,0,e.length),E_.Copy(t,0,s,e.length,t.length),s}}ChangesOverlap(e,t,n){if(x_.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),x_.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const s=e.originalStart;let r=e.originalLength;const o=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(r=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new gg(s,r,o,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,s){if(e>=0&&e<s)return e;const r=n,o=s-n-1,a=t%2===0;if(e<0){const l=r%2===0;return a===l?0:1}else{const l=o%2===0;return a===l?s-1:s-2}}}function tD(i){return i<0?0:i>255?255:i|0}function T_(i){return i<0?0:i>4294967295?4294967295:i|0}class z2{constructor(e){const t=tD(e);this._defaultValue=t,this._asciiMap=z2._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const n=tD(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class RVe{constructor(e,t,n){const s=new Uint8Array(e*t);for(let r=0,o=e*t;r<o;r++)s[r]=n;this._data=s,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}}class AVe{constructor(e){let t=0,n=0;for(let r=0,o=e.length;r<o;r++){const[a,l,c]=e[r];l>t&&(t=l),a>n&&(n=a),c>n&&(n=c)}t++,n++;const s=new RVe(n,t,0);for(let r=0,o=e.length;r<o;r++){const[a,l,c]=e[r];s.set(a,l,c)}this._states=s,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let qO=null;function PVe(){return qO===null&&(qO=new AVe([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),qO}let Ww=null;function MVe(){if(Ww===null){Ww=new z2(0);const i=` 	<>'"`;for(let t=0;t<i.length;t++)Ww.set(i.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)Ww.set(e.charCodeAt(t),2)}return Ww}class nD{static _createLink(e,t,n,s,r){let o=r-1;do{const a=t.charCodeAt(o);if(e.get(a)!==2)break;o--}while(o>s);if(s>0){const a=t.charCodeAt(s-1),l=t.charCodeAt(o);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&o--}return{range:{startLineNumber:n,startColumn:s+1,endLineNumber:n,endColumn:o+2},url:t.substring(s,o+1)}}static computeLinks(e,t=PVe()){const n=MVe(),s=[];for(let r=1,o=e.getLineCount();r<=o;r++){const a=e.getLineContent(r),l=a.length;let c=0,u=0,d=0,h=1,g=!1,p=!1,_=!1,v=!1;for(;c<l;){let y=!1;const w=a.charCodeAt(c);if(h===13){let x;switch(w){case 40:g=!0,x=0;break;case 41:x=g?0:1;break;case 91:_=!0,p=!0,x=0;break;case 93:_=!1,x=p?0:1;break;case 123:v=!0,x=0;break;case 125:x=v?0:1;break;case 39:case 34:case 96:d===w?x=1:d===39||d===34||d===96?x=0:x=1;break;case 42:x=d===42?1:0;break;case 124:x=d===124?1:0;break;case 32:x=_?0:1;break;default:x=n.get(w)}x===1&&(s.push(nD._createLink(n,a,r,u,c)),y=!0)}else if(h===12){let x;w===91?(p=!0,x=0):x=n.get(w),x===1?y=!0:h=13}else h=t.nextState(h,w),h===0&&(y=!0);y&&(h=1,g=!1,p=!1,v=!1,u=c+1,d=w),c++}h===13&&s.push(nD._createLink(n,a,r,u,l))}return s}}function OVe(i){return!i||typeof i.getLineCount!="function"||typeof i.getLineContent!="function"?[]:nD.computeLinks(i)}const $N=class $N{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,n,s,r){if(e&&t){const o=this.doNavigateValueSet(t,r);if(o)return{range:e,value:o}}if(n&&s){const o=this.doNavigateValueSet(s,r);if(o)return{range:n,value:o}}return null}doNavigateValueSet(e,t){const n=this.numberReplace(e,t);return n!==null?n:this.textReplace(e,t)}numberReplace(e,t){const n=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let s=Number(e);const r=parseFloat(e);return!isNaN(s)&&!isNaN(r)&&s===r?s===0&&!t?null:(s=Math.floor(s*n),s+=t?n:-n,String(s/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let s=null;for(let r=0,o=e.length;s===null&&r<o;r++)s=this.valueSetReplace(e[r],t,n);return s}valueSetReplace(e,t,n){let s=e.indexOf(t);return s>=0?(s+=n?1:-1,s<0?s=e.length-1:s%=e.length,e[s]):null}};$N.INSTANCE=new $N;let w8=$N;const TS=class TS{static getChannel(e){return e.getChannel(TS.CHANNEL_NAME)}static setChannel(e,t){e.setChannel(TS.CHANNEL_NAME,t)}};TS.CHANNEL_NAME="editorWorkerHost";let C8=TS;var BX,VX;class FVe{constructor(e,t){this.uri=e,this.value=t}}function BVe(i){return Array.isArray(i)}const Yp=class Yp{constructor(e,t){if(this[BX]="ResourceMap",e instanceof Yp)this.map=new Map(e.map),this.toKey=t??Yp.defaultToKey;else if(BVe(e)){this.map=new Map,this.toKey=t??Yp.defaultToKey;for(const[n,s]of e)this.set(n,s)}else this.map=new Map,this.toKey=e??Yp.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new FVe(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))==null?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[n,s]of this.map)e(s.value,s.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(BX=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}};Yp.defaultToKey=e=>e.toString();let sl=Yp;class VVe{constructor(){this[VX]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let s=this._map.get(e);if(s)s.value=t,n!==0&&this.touch(s,n);else{switch(s={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(s);break;case 1:this.addItemFirst(s);break;case 2:this.addItemLast(s);break;default:this.addItemLast(s);break}this._map.set(e,s),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let s=this._head;for(;s;){if(t?e.bind(t)(s.value,s.key,this):e(s.value,s.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");s=s.next}}keys(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:n.key,done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return s}values(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:n.value,done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return s}entries(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:[n.key,n.value],done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return s}[(VX=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.previous,n--;this._tail=t,this._size=n,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const n=e.next,s=e.previous;e===this._tail?(s.next=void 0,this._tail=s):(n.previous=s,s.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const n=e.next,s=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=s,s.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}class WVe extends VVe{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}}class j2 extends WVe{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}}class HVe{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(const[t,n]of e)this.set(t,n)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){const t=this._m1.get(e);return t===void 0?!1:(this._m1.delete(e),this._m2.delete(t),!0)}keys(){return this._m1.keys()}values(){return this._m1.values()}}class ife{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);n&&n.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}class UVe extends z2{constructor(e,t){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let n=0,s=e.length;n<s;n++)this.set(e.charCodeAt(n),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let n=null;for(const s of this._getIntlSegmenterWordsOnLine(e)){if(s.index>t)break;n=s}return n}findNextIntlWordAtOrAfterOffset(e,t){for(const n of this._getIntlSegmenterWordsOnLine(e))if(!(n.index<t))return n;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){const t=[];for(const n of e)this._isWordLike(n)&&t.push(n);return t}_isWordLike(e){return!!e.isWordLike}}const WX=new j2(10);function Yb(i,e){const t=`${i}/${e.join(",")}`;let n=WX.get(t);return n||(n=new UVe(i,e),WX.set(t,n)),n}var iD;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(iD||(iD={}));var Dm;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=3]="Right"})(Dm||(Dm={}));var Qb;(function(i){i[i.Both=0]="Both",i[i.Right=1]="Right",i[i.Left=2]="Left",i[i.None=3]="None"})(Qb||(Qb={}));class oL{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&wa(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class xk{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}function zVe(i){return i&&typeof i.read=="function"}class KO{constructor(e,t,n,s,r,o){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=s,this.isAutoWhitespaceEdit=r,this._isTracked=o}}class jVe{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}class $Ve{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}}function qVe(i){return!i.isTooLargeForSyncing()&&!i.isForSimpleWidget}const KVe=999;class L_{constructor(e,t,n,s){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=s}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=GVe(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=ihe(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new jVe(t,this.wordSeparators?Yb(this.wordSeparators,[]):null,n?this.searchString:null)}}function GVe(i){if(!i||i.length===0)return!1;for(let e=0,t=i.length;e<t;e++){const n=i.charCodeAt(e);if(n===10)return!0;if(n===92){if(e++,e>=t)break;const s=i.charCodeAt(e);if(s===110||s===114||s===87)return!0}}return!1}function Mp(i,e,t){if(!t)return new xk(i,null);const n=[];for(let s=0,r=e.length;s<r;s++)n[s]=e[s];return new xk(i,n)}class HX{constructor(e){const t=[];let n=0;for(let s=0,r=e.length;s<r;s++)e.charCodeAt(s)===10&&(t[n++]=s);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,s=t.length-1;if(s===-1||e<=t[0])return 0;for(;n<s;){const r=n+((s-n)/2>>0);t[r]>=e?s=r-1:t[r+1]>=e?(n=r,s=r):n=r+1}return n+1}}class jE{static findMatches(e,t,n,s,r){const o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,n,new iv(o.wordSeparators,o.regex),s,r):this._doFindMatchesLineByLine(e,n,o,s,r):[]}static _getMultilineMatchRange(e,t,n,s,r,o){let a,l=0;s?(l=s.findLineFeedCountBeforeOffset(r),a=t+r+l):a=t+r;let c;if(s){const g=s.findLineFeedCountBeforeOffset(r+o.length)-l;c=a+o.length+g}else c=a+o.length;const u=e.getPositionAt(a),d=e.getPositionAt(c);return new J(u.lineNumber,u.column,d.lineNumber,d.column)}static _doFindMatchesMultiline(e,t,n,s,r){const o=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new HX(a):null,c=[];let u=0,d;for(n.reset(0);d=n.next(a);)if(c[u++]=Mp(this._getMultilineMatchRange(e,o,a,l,d.index,d[0]),d,s),u>=r)return c;return c}static _doFindMatchesLineByLine(e,t,n,s,r){const o=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,c,t.startLineNumber,t.startColumn-1,a,o,s,r),o}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,o,s,r);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<r;c++)a=this._findMatchesInLine(n,e.getLineContent(c),c,0,a,o,s,r);if(a<r){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,c,t.endLineNumber,0,a,o,s,r)}return o}static _findMatchesInLine(e,t,n,s,r,o,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,g=h.length,p=t.length;let _=-g;for(;(_=t.indexOf(h,_+g))!==-1;)if((!c||rU(c,t,p,_,g))&&(o[r++]=new xk(new J(n,_+1+s,n,_+1+g+s),null),r>=l))return r;return r}const u=new iv(e.wordSeparators,e.regex);let d;u.reset(0);do if(d=u.next(t),d&&(o[r++]=Mp(new J(n,d.index+1+s,n,d.index+1+d[0].length+s),d,a),r>=l))return r;while(d);return r}static findNextMatch(e,t,n,s){const r=t.parseSearchRequest();if(!r)return null;const o=new iv(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindNextMatchMultiline(e,n,o,s):this._doFindNextMatchLineByLine(e,n,o,s)}static _doFindNextMatchMultiline(e,t,n,s){const r=new ue(t.lineNumber,1),o=e.getOffsetAt(r),a=e.getLineCount(),l=e.getValueInRange(new J(r.lineNumber,r.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new HX(l):null;n.reset(t.column-1);const u=n.next(l);return u?Mp(this._getMultilineMatchRange(e,o,l,c,u.index,u[0]),u,s):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new ue(1,1),n,s):null}static _doFindNextMatchLineByLine(e,t,n,s){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o),l=this._findFirstMatchInLine(n,a,o,t.column,s);if(l)return l;for(let c=1;c<=r;c++){const u=(o+c-1)%r,d=e.getLineContent(u+1),h=this._findFirstMatchInLine(n,d,u+1,1,s);if(h)return h}return null}static _findFirstMatchInLine(e,t,n,s,r){e.reset(s-1);const o=e.next(t);return o?Mp(new J(n,o.index+1,n,o.index+1+o[0].length),o,r):null}static findPreviousMatch(e,t,n,s){const r=t.parseSearchRequest();if(!r)return null;const o=new iv(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindPreviousMatchMultiline(e,n,o,s):this._doFindPreviousMatchLineByLine(e,n,o,s)}static _doFindPreviousMatchMultiline(e,t,n,s){const r=this._doFindMatchesMultiline(e,new J(1,1,t.lineNumber,t.column),n,s,10*KVe);if(r.length>0)return r[r.length-1];const o=e.getLineCount();return t.lineNumber!==o||t.column!==e.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(e,new ue(o,e.getLineMaxColumn(o)),n,s):null}static _doFindPreviousMatchLineByLine(e,t,n,s){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,o,s);if(l)return l;for(let c=1;c<=r;c++){const u=(r+o-c-1)%r,d=e.getLineContent(u+1),h=this._findLastMatchInLine(n,d,u+1,s);if(h)return h}return null}static _findLastMatchInLine(e,t,n,s){let r=null,o;for(e.reset(0);o=e.next(t);)r=Mp(new J(n,o.index+1,n,o.index+1+o[0].length),o,s);return r}}function YVe(i,e,t,n,s){if(n===0)return!0;const r=e.charCodeAt(n-1);if(i.get(r)!==0||r===13||r===10)return!0;if(s>0){const o=e.charCodeAt(n);if(i.get(o)!==0)return!0}return!1}function QVe(i,e,t,n,s){if(n+s===t)return!0;const r=e.charCodeAt(n+s);if(i.get(r)!==0||r===13||r===10)return!0;if(s>0){const o=e.charCodeAt(n+s-1);if(i.get(o)!==0)return!0}return!1}function rU(i,e,t,n,s){return YVe(i,e,t,n,s)&&QVe(i,e,t,n,s)}class iv{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;const s=n.index,r=n[0].length;if(s===this._prevMatchStartIndex&&r===this._prevMatchLength){if(r===0){qI(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=s,this._prevMatchLength=r,!this._wordSeparators||rU(this._wordSeparators,e,t,s,r))return n}while(n);return null}}class XVe{static computeUnicodeHighlights(e,t,n){const s=n?n.startLineNumber:1,r=n?n.endLineNumber:e.getLineCount(),o=new UX(t),a=o.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${ZVe(Array.from(a))}`,"g");const c=new iv(null,l),u=[];let d=!1,h,g=0,p=0,_=0;e:for(let v=s,y=r;v<=y;v++){const w=e.getLineContent(v),x=w.length;c.reset(0);do if(h=c.next(w),h){let k=h.index,T=h.index+h[0].length;if(k>0){const A=w.charCodeAt(k-1);As(A)&&k--}if(T+1<x){const A=w.charCodeAt(T-1);As(A)&&T++}const R=w.substring(k,T);let L=mk(k+1,kH,w,0);L&&L.endColumn<=k+1&&(L=null);const I=o.shouldHighlightNonBasicASCII(R,L?L.word:null);if(I!==0){if(I===3?g++:I===2?p++:I===1?_++:JH(),u.length>=1e3){d=!0;break e}u.push(new J(v,k+1,v,T+1))}}while(h)}return{ranges:u,hasMore:d,ambiguousCharacterCount:g,invisibleCharacterCount:p,nonBasicAsciiCharacterCount:_}}static computeUnicodeHighlightReason(e,t){const n=new UX(t);switch(n.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const r=e.codePointAt(0),o=n.ambiguousCharacters.getPrimaryConfusable(r),a=yk.getLocales().filter(l=>!yk.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(r));return{kind:0,confusableWith:String.fromCodePoint(o),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}function ZVe(i,e){return`[${wf(i.map(n=>String.fromCodePoint(n)).join(""))}]`}class UX{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=yk.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of jC.codePoints)zX(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const n=e.codePointAt(0);if(this.allowedCodePoints.has(n))return 0;if(this.options.nonBasicASCII)return 1;let s=!1,r=!1;if(t)for(const o of t){const a=o.codePointAt(0),l=BH(o);s=s||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!jC.isInvisibleCharacter(a)&&(r=!0)}return!s&&r?0:this.options.invisibleCharacters&&!zX(e)&&jC.isInvisibleCharacter(n)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(n)?3:0}}function zX(i){return i===" "||i===`
`||i==="	"}class aL{constructor(e,t,n){this.changes=e,this.moves=t,this.hitTimeout=n}}class sfe{constructor(e,t){this.lineRangeMapping=e,this.changes=t}}class Mt{static addRange(e,t){let n=0;for(;n<t.length&&t[n].endExclusive<e.start;)n++;let s=n;for(;s<t.length&&t[s].start<=e.endExclusive;)s++;if(n===s)t.splice(n,0,e);else{const r=Math.min(e.start,t[n].start),o=Math.max(e.endExclusive,t[s-1].endExclusive);t.splice(n,s-n,new Mt(r,o))}}static tryCreate(e,t){if(!(e>t))return new Mt(e,t)}static ofLength(e){return new Mt(0,e)}static ofStartAndLength(e,t){return new Mt(e,e+t)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new Dn(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new Mt(this.start+e,this.endExclusive+e)}deltaStart(e){return new Mt(this.start+e,this.endExclusive)}deltaEnd(e){return new Mt(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new Mt(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(t<=n)return new Mt(t,n)}intersects(e){const t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return t<n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new Dn(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new Dn(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}}class oU{constructor(){this._sortedRanges=[]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let n=t;for(;n<this._sortedRanges.length&&this._sortedRanges[n].start<=e.endExclusive;)n++;if(t===n)this._sortedRanges.splice(t,0,e);else{const s=Math.min(e.start,this._sortedRanges[t].start),r=Math.max(e.endExclusive,this._sortedRanges[n-1].endExclusive);this._sortedRanges.splice(t,n-t,new Mt(s,r))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){const t=new oU;for(const n of this._sortedRanges){const s=n.intersect(e);s&&t.addRange(s)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}}function sD(i,e){const t=JVe(i,e);if(t!==-1)return i[t]}function JVe(i,e,t=i.length-1){for(let n=t;n>=0;n--){const s=i[n];if(e(s))return n}return-1}function Xb(i,e){const t=Ek(i,e);return t===-1?void 0:i[t]}function Ek(i,e,t=0,n=i.length){let s=t,r=n;for(;s<r;){const o=Math.floor((s+r)/2);e(i[o])?s=o+1:r=o}return s-1}function eWe(i,e){const t=S8(i,e);return t===i.length?void 0:i[t]}function S8(i,e,t=0,n=i.length){let s=t,r=n;for(;s<r;){const o=Math.floor((s+r)/2);e(i[o])?r=o:s=o+1}return s}const qN=class qN{constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(qN.assertInvariants){if(this._prevFindLastPredicate){for(const n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}const t=Ek(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,t===-1?void 0:this._array[t]}};qN.assertInvariants=!1;let rD=qN;function rfe(i,e){if(i.length===0)return;let t=i[0];for(let n=1;n<i.length;n++){const s=i[n];e(s,t)>0&&(t=s)}return t}function tWe(i,e){if(i.length===0)return;let t=i[0];for(let n=1;n<i.length;n++){const s=i[n];e(s,t)>=0&&(t=s)}return t}function nWe(i,e){return rfe(i,(t,n)=>-e(t,n))}function iWe(i,e){if(i.length===0)return-1;let t=0;for(let n=1;n<i.length;n++){const s=i[n];e(s,i[t])>0&&(t=n)}return t}let wt=class mh{static fromRangeInclusive(e){return new mh(e.startLineNumber,e.endLineNumber+1)}static joinMany(e){if(e.length===0)return[];let t=new Tl(e[0].slice());for(let n=1;n<e.length;n++)t=t.getUnion(new Tl(e[n].slice()));return t.ranges}static join(e){if(e.length===0)throw new Dn("lineRanges cannot be empty");let t=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let s=1;s<e.length;s++)t=Math.min(t,e[s].startLineNumber),n=Math.max(n,e[s].endLineNumberExclusive);return new mh(t,n)}static ofLength(e,t){return new mh(e,e+t)}static deserialize(e){return new mh(e[0],e[1])}constructor(e,t){if(e>t)throw new Dn(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new mh(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new mh(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new mh(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=n)return new mh(t,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new J(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new J(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Mt(this.startLineNumber-1,this.endLineNumberExclusive-1)}};class Tl{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;const t=S8(this._normalizedRanges,s=>s.endLineNumberExclusive>=e.startLineNumber),n=Ek(this._normalizedRanges,s=>s.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)this._normalizedRanges.splice(t,0,e);else if(t===n-1){const s=this._normalizedRanges[t];this._normalizedRanges[t]=s.join(e)}else{const s=this._normalizedRanges[t].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(t,n-t,s)}}contains(e){const t=Xb(this._normalizedRanges,n=>n.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){const t=Xb(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;const t=[];let n=0,s=0,r=null;for(;n<this._normalizedRanges.length||s<e._normalizedRanges.length;){let o=null;if(n<this._normalizedRanges.length&&s<e._normalizedRanges.length){const a=this._normalizedRanges[n],l=e._normalizedRanges[s];a.startLineNumber<l.startLineNumber?(o=a,n++):(o=l,s++)}else n<this._normalizedRanges.length?(o=this._normalizedRanges[n],n++):(o=e._normalizedRanges[s],s++);r===null?r=o:r.endLineNumberExclusive>=o.startLineNumber?r=new wt(r.startLineNumber,Math.max(r.endLineNumberExclusive,o.endLineNumberExclusive)):(t.push(r),r=o)}return r!==null&&t.push(r),new Tl(t)}subtractFrom(e){const t=S8(this._normalizedRanges,o=>o.endLineNumberExclusive>=e.startLineNumber),n=Ek(this._normalizedRanges,o=>o.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)return new Tl([e]);const s=[];let r=e.startLineNumber;for(let o=t;o<n;o++){const a=this._normalizedRanges[o];a.startLineNumber>r&&s.push(new wt(r,a.startLineNumber)),r=a.endLineNumberExclusive}return r<e.endLineNumberExclusive&&s.push(new wt(r,e.endLineNumberExclusive)),new Tl(s)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){const t=[];let n=0,s=0;for(;n<this._normalizedRanges.length&&s<e._normalizedRanges.length;){const r=this._normalizedRanges[n],o=e._normalizedRanges[s],a=r.intersect(o);a&&!a.isEmpty&&t.push(a),r.endLineNumberExclusive<o.endLineNumberExclusive?n++:s++}return new Tl(t)}getWithDelta(e){return new Tl(this._normalizedRanges.map(t=>t.delta(e)))}}const Sg=class Sg{static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new Sg(0,t.column-e.column):new Sg(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return Sg.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,n=0;for(const s of e)s===`
`?(t++,n=0):n++;return new Sg(t,n)}constructor(e,t){this.lineCount=e,this.columnCount=t}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}createRange(e){return this.lineCount===0?new J(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new J(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}addToPosition(e){return this.lineCount===0?new ue(e.lineNumber,e.column+this.columnCount):new ue(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}};Sg.zero=new Sg(0,0);let Nm=Sg;class sWe{constructor(e){this.text=e,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Mt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}get textLength(){const e=this.lineStartOffsetByLineIdx.length-1;return new Nm(e,this.text.length-this.lineStartOffsetByLineIdx[e])}}class rWe{constructor(e){this.edits=e,n1(()=>eU(e,(t,n)=>t.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())))}apply(e){let t="",n=new ue(1,1);for(const r of this.edits){const o=r.range,a=o.getStartPosition(),l=o.getEndPosition(),c=jX(n,a);c.isEmpty()||(t+=e.getValueOfRange(c)),t+=r.text,n=l}const s=jX(n,e.endPositionExclusive);return s.isEmpty()||(t+=e.getValueOfRange(s)),t}applyToString(e){const t=new aWe(e);return this.apply(t)}getNewRanges(){const e=[];let t=0,n=0,s=0;for(const r of this.edits){const o=Nm.ofText(r.text),a=ue.lift({lineNumber:r.range.startLineNumber+n,column:r.range.startColumn+(r.range.startLineNumber===t?s:0)}),l=o.createRange(a);e.push(l),n=l.endLineNumber-r.range.endLineNumber,s=l.endColumn-r.range.endColumn,t=r.range.endLineNumber}return e}}class oWe{constructor(e,t){this.range=e,this.text=t}toSingleEditOperation(){return{range:this.range,text:this.text}}}function jX(i,e){if(i.lineNumber===e.lineNumber&&i.column===Number.MAX_SAFE_INTEGER)return J.fromPositions(e,e);if(!i.isBeforeOrEqual(e))throw new Dn("start must be before end");return new J(i.lineNumber,i.column,e.lineNumber,e.column)}class ofe{get endPositionExclusive(){return this.length.addToPosition(new ue(1,1))}}class aWe extends ofe{constructor(e){super(),this.value=e,this._t=new sWe(this.value)}getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}}class io{static inverse(e,t,n){const s=[];let r=1,o=1;for(const l of e){const c=new io(new wt(r,l.original.startLineNumber),new wt(o,l.modified.startLineNumber));c.modified.isEmpty||s.push(c),r=l.original.endLineNumberExclusive,o=l.modified.endLineNumberExclusive}const a=new io(new wt(r,t+1),new wt(o,n+1));return a.modified.isEmpty||s.push(a),s}static clip(e,t,n){const s=[];for(const r of e){const o=r.original.intersect(t),a=r.modified.intersect(n);o&&!o.isEmpty&&a&&!a.isEmpty&&s.push(new io(o,a))}return s}constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new io(this.modified,this.original)}join(e){return new io(this.original.join(e.original),this.modified.join(e.modified))}toRangeMapping(){const e=this.original.toInclusiveRange(),t=this.modified.toInclusiveRange();if(e&&t)return new $a(e,t);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new Dn("not a valid diff");return new $a(new J(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new J(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new $a(new J(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new J(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,t){if($X(this.original.endLineNumberExclusive,e)&&$X(this.modified.endLineNumberExclusive,t))return new $a(new J(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new J(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new $a(J.fromPositions(new ue(this.original.startLineNumber,1),I_(new ue(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),J.fromPositions(new ue(this.modified.startLineNumber,1),I_(new ue(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new $a(J.fromPositions(I_(new ue(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),I_(new ue(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),J.fromPositions(I_(new ue(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),t),I_(new ue(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));throw new Dn}}function I_(i,e){if(i.lineNumber<1)return new ue(1,1);if(i.lineNumber>e.length)return new ue(e.length,e[e.length-1].length+1);const t=e[i.lineNumber-1];return i.column>t.length+1?new ue(i.lineNumber,t.length+1):i}function $X(i,e){return i>=1&&i<=e.length}class rl extends io{static fromRangeMappings(e){const t=wt.join(e.map(s=>wt.fromRangeInclusive(s.originalRange))),n=wt.join(e.map(s=>wt.fromRangeInclusive(s.modifiedRange)));return new rl(t,n,e)}constructor(e,t,n){super(e,t),this.innerChanges=n}flip(){var e;return new rl(this.modified,this.original,(e=this.innerChanges)==null?void 0:e.map(t=>t.flip()))}withInnerChangesFromLineRanges(){return new rl(this.original,this.modified,[this.toRangeMapping()])}}class $a{static assertSorted(e){for(let t=1;t<e.length;t++){const n=e[t-1],s=e[t];if(!(n.originalRange.getEndPosition().isBeforeOrEqual(s.originalRange.getStartPosition())&&n.modifiedRange.getEndPosition().isBeforeOrEqual(s.modifiedRange.getStartPosition())))throw new Dn("Range mappings must be sorted")}}constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new $a(this.modifiedRange,this.originalRange)}toTextEdit(e){const t=e.getValueOfRange(this.modifiedRange);return new oWe(this.originalRange,t)}}const lWe=3;class cWe{computeDiff(e,t,n){var l;const r=new hWe(e,t,{maxComputationTime:n.maxComputationTimeMs,shouldIgnoreTrimWhitespace:n.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),o=[];let a=null;for(const c of r.changes){let u;c.originalEndLineNumber===0?u=new wt(c.originalStartLineNumber+1,c.originalStartLineNumber+1):u=new wt(c.originalStartLineNumber,c.originalEndLineNumber+1);let d;c.modifiedEndLineNumber===0?d=new wt(c.modifiedStartLineNumber+1,c.modifiedStartLineNumber+1):d=new wt(c.modifiedStartLineNumber,c.modifiedEndLineNumber+1);let h=new rl(u,d,(l=c.charChanges)==null?void 0:l.map(g=>new $a(new J(g.originalStartLineNumber,g.originalStartColumn,g.originalEndLineNumber,g.originalEndColumn),new J(g.modifiedStartLineNumber,g.modifiedStartColumn,g.modifiedEndLineNumber,g.modifiedEndColumn))));a&&(a.modified.endLineNumberExclusive===h.modified.startLineNumber||a.original.endLineNumberExclusive===h.original.startLineNumber)&&(h=new rl(a.original.join(h.original),a.modified.join(h.modified),a.innerChanges&&h.innerChanges?a.innerChanges.concat(h.innerChanges):void 0),o.pop()),o.push(h),a=h}return n1(()=>eU(o,(c,u)=>u.original.startLineNumber-c.original.endLineNumberExclusive===u.modified.startLineNumber-c.modified.endLineNumberExclusive&&c.original.endLineNumberExclusive<u.original.startLineNumber&&c.modified.endLineNumberExclusive<u.modified.startLineNumber)),new aL(o,[],r.quitEarly)}}function afe(i,e,t,n){return new Oh(i,e,t).ComputeDiff(n)}let qX=class{constructor(e){const t=[],n=[];for(let s=0,r=e.length;s<r;s++)t[s]=k8(e[s],1),n[s]=x8(e[s],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const s=[],r=[],o=[];let a=0;for(let l=t;l<=n;l++){const c=this.lines[l],u=e?this._startColumns[l]:1,d=e?this._endColumns[l]:c.length+1;for(let h=u;h<d;h++)s[a]=c.charCodeAt(h-1),r[a]=l+1,o[a]=h,a++;!e&&l<n&&(s[a]=10,r[a]=l+1,o[a]=c.length+1,a++)}return new uWe(s,r,o)}};class uWe{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}}class Jv{constructor(e,t,n,s,r,o,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=s,this.modifiedStartLineNumber=r,this.modifiedStartColumn=o,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,n){const s=t.getStartLineNumber(e.originalStart),r=t.getStartColumn(e.originalStart),o=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=n.getStartLineNumber(e.modifiedStart),c=n.getStartColumn(e.modifiedStart),u=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),d=n.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new Jv(s,r,o,a,l,c,u,d)}}function dWe(i){if(i.length<=1)return i;const e=[i[0]];let t=e[0];for(let n=1,s=i.length;n<s;n++){const r=i[n],o=r.originalStart-(t.originalStart+t.originalLength),a=r.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(o,a)<lWe?(t.originalLength=r.originalStart+r.originalLength-t.originalStart,t.modifiedLength=r.modifiedStart+r.modifiedLength-t.modifiedStart):(e.push(r),t=r)}return e}class YC{constructor(e,t,n,s,r){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=s,this.charChanges=r}static createFromDiffResult(e,t,n,s,r,o,a){let l,c,u,d,h;if(t.originalLength===0?(l=n.getStartLineNumber(t.originalStart)-1,c=0):(l=n.getStartLineNumber(t.originalStart),c=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(u=s.getStartLineNumber(t.modifiedStart)-1,d=0):(u=s.getStartLineNumber(t.modifiedStart),d=s.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),o&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&r()){const g=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),p=s.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(g.getElements().length>0&&p.getElements().length>0){let _=afe(g,p,r,!0).changes;a&&(_=dWe(_)),h=[];for(let v=0,y=_.length;v<y;v++)h.push(Jv.createFromDiffChange(_[v],g,p))}}return new YC(l,c,u,d,h)}}class hWe{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new qX(e),this.modified=new qX(t),this.continueLineDiff=KX(n.maxComputationTime),this.continueCharDiff=KX(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=afe(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(YC.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}const s=[];let r=0,o=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,u=c?c.originalStart:this.originalLines.length,d=c?c.modifiedStart:this.modifiedLines.length;for(;r<u&&o<d;){const h=this.originalLines[r],g=this.modifiedLines[o];if(h!==g){{let p=k8(h,1),_=k8(g,1);for(;p>1&&_>1;){const v=h.charCodeAt(p-2),y=g.charCodeAt(_-2);if(v!==y)break;p--,_--}(p>1||_>1)&&this._pushTrimWhitespaceCharChange(s,r+1,1,p,o+1,1,_)}{let p=x8(h,1),_=x8(g,1);const v=h.length+1,y=g.length+1;for(;p<v&&_<y;){const w=h.charCodeAt(p-1),x=h.charCodeAt(_-1);if(w!==x)break;p++,_++}(p<v||_<y)&&this._pushTrimWhitespaceCharChange(s,r+1,p,v,o+1,_,y)}}r++,o++}c&&(s.push(YC.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),r+=c.originalLength,o+=c.modifiedLength)}return{quitEarly:n,changes:s}}_pushTrimWhitespaceCharChange(e,t,n,s,r,o,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,s,r,o,a))return;let l;this.shouldComputeCharChanges&&(l=[new Jv(t,n,t,s,r,o,r,a)]),e.push(new YC(t,t,r,r,l))}_mergeTrimWhitespaceCharChange(e,t,n,s,r,o,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber===t&&c.modifiedEndLineNumber===r?(this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new Jv(t,n,t,s,r,o,r,a)),!0):c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===r?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=r,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new Jv(t,n,t,s,r,o,r,a)),!0):!1}}function k8(i,e){const t=Ca(i);return t===-1?e:t+1}function x8(i,e){const t=k1(i);return t===-1?e:t+2}function KX(i){if(i===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<i}class sf{static trivial(e,t){return new sf([new ys(Mt.ofLength(e.length),Mt.ofLength(t.length))],!1)}static trivialTimedOut(e,t){return new sf([new ys(Mt.ofLength(e.length),Mt.ofLength(t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}class ys{static invert(e,t){const n=[];return kde(e,(s,r)=>{n.push(ys.fromOffsetPairs(s?s.getEndExclusives():jh.zero,r?r.getStarts():new jh(t,(s?s.seq2Range.endExclusive-s.seq1Range.endExclusive:0)+t)))}),n}static fromOffsetPairs(e,t){return new ys(new Mt(e.offset1,t.offset1),new Mt(e.offset2,t.offset2))}static assertSorted(e){let t;for(const n of e){if(t&&!(t.seq1Range.endExclusive<=n.seq1Range.start&&t.seq2Range.endExclusive<=n.seq2Range.start))throw new Dn("Sequence diffs must be sorted");t=n}}constructor(e,t){this.seq1Range=e,this.seq2Range=t}swap(){return new ys(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new ys(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new ys(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new ys(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new ys(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersect(e){const t=this.seq1Range.intersect(e.seq1Range),n=this.seq2Range.intersect(e.seq2Range);if(!(!t||!n))return new ys(t,n)}getStarts(){return new jh(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new jh(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}const Qp=class Qp{constructor(e,t){this.offset1=e,this.offset2=t}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new Qp(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}};Qp.zero=new Qp(0,0),Qp.max=new Qp(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);let jh=Qp;const KN=class KN{isValid(){return!0}};KN.instance=new KN;let Tk=KN;class fWe{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new Dn("timeout must be positive")}isValid(){if(!(Date.now()-this.startTime<this.timeout)&&this.valid){this.valid=!1;debugger}return this.valid}}class GO{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,n){this.array[e+t*this.width]=n}}function E8(i){return i===32||i===9}const LS=class LS{static getKey(e){let t=this.chrKeys.get(e);return t===void 0&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}constructor(e,t,n){this.range=e,this.lines=t,this.source=n,this.histogram=[];let s=0;for(let r=e.startLineNumber-1;r<e.endLineNumberExclusive-1;r++){const o=t[r];for(let l=0;l<o.length;l++){s++;const c=o[l],u=LS.getKey(c);this.histogram[u]=(this.histogram[u]||0)+1}s++;const a=LS.getKey(`
`);this.histogram[a]=(this.histogram[a]||0)+1}this.totalCount=s}computeSimilarity(e){let t=0;const n=Math.max(this.histogram.length,e.histogram.length);for(let s=0;s<n;s++)t+=Math.abs((this.histogram[s]??0)-(e.histogram[s]??0));return 1-t/(this.totalCount+e.totalCount)}};LS.chrKeys=new Map;let oD=LS;class gWe{compute(e,t,n=Tk.instance,s){if(e.length===0||t.length===0)return sf.trivial(e,t);const r=new GO(e.length,t.length),o=new GO(e.length,t.length),a=new GO(e.length,t.length);for(let p=0;p<e.length;p++)for(let _=0;_<t.length;_++){if(!n.isValid())return sf.trivialTimedOut(e,t);const v=p===0?0:r.get(p-1,_),y=_===0?0:r.get(p,_-1);let w;e.getElement(p)===t.getElement(_)?(p===0||_===0?w=0:w=r.get(p-1,_-1),p>0&&_>0&&o.get(p-1,_-1)===3&&(w+=a.get(p-1,_-1)),w+=s?s(p,_):1):w=-1;const x=Math.max(v,y,w);if(x===w){const k=p>0&&_>0?a.get(p-1,_-1):0;a.set(p,_,k+1),o.set(p,_,3)}else x===v?(a.set(p,_,0),o.set(p,_,1)):x===y&&(a.set(p,_,0),o.set(p,_,2));r.set(p,_,x)}const l=[];let c=e.length,u=t.length;function d(p,_){(p+1!==c||_+1!==u)&&l.push(new ys(new Mt(p+1,c),new Mt(_+1,u))),c=p,u=_}let h=e.length-1,g=t.length-1;for(;h>=0&&g>=0;)o.get(h,g)===3?(d(h,g),h--,g--):o.get(h,g)===1?h--:g--;return d(-1,-1),l.reverse(),new sf(l,!1)}}class lfe{compute(e,t,n=Tk.instance){if(e.length===0||t.length===0)return sf.trivial(e,t);const s=e,r=t;function o(_,v){for(;_<s.length&&v<r.length&&s.getElement(_)===r.getElement(v);)_++,v++;return _}let a=0;const l=new mWe;l.set(0,o(0,0));const c=new pWe;c.set(0,l.get(0)===0?null:new GX(null,0,0,l.get(0)));let u=0;e:for(;;){if(a++,!n.isValid())return sf.trivialTimedOut(s,r);const _=-Math.min(a,r.length+a%2),v=Math.min(a,s.length+a%2);for(u=_;u<=v;u+=2){const y=u===v?-1:l.get(u+1),w=u===_?-1:l.get(u-1)+1,x=Math.min(Math.max(y,w),s.length),k=x-u;if(x>s.length||k>r.length)continue;const T=o(x,k);l.set(u,T);const R=x===y?c.get(u+1):c.get(u-1);if(c.set(u,T!==x?new GX(R,x,k,T-x):R),l.get(u)===s.length&&l.get(u)-u===r.length)break e}}let d=c.get(u);const h=[];let g=s.length,p=r.length;for(;;){const _=d?d.x+d.length:0,v=d?d.y+d.length:0;if((_!==g||v!==p)&&h.push(new ys(new Mt(_,g),new Mt(v,p))),!d)break;g=d.x,p=d.y,d=d.prev}return h.reverse(),new sf(h,!1)}}class GX{constructor(e,t,n,s){this.prev=e,this.x=t,this.y=n,this.length=s}}class mWe{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){const n=this.negativeArr;this.negativeArr=new Int32Array(n.length*2),this.negativeArr.set(n)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const n=this.positiveArr;this.positiveArr=new Int32Array(n.length*2),this.positiveArr.set(n)}this.positiveArr[e]=t}}}class pWe{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}class aD{constructor(e,t,n){this.lines=e,this.range=t,this.considerWhitespaceChanges=n,this.elements=[],this.firstElementOffsetByLineIdx=[],this.lineStartOffsets=[],this.trimmedWsLengthsByLineIdx=[],this.firstElementOffsetByLineIdx.push(0);for(let s=this.range.startLineNumber;s<=this.range.endLineNumber;s++){let r=e[s-1],o=0;s===this.range.startLineNumber&&this.range.startColumn>1&&(o=this.range.startColumn-1,r=r.substring(o)),this.lineStartOffsets.push(o);let a=0;if(!n){const c=r.trimStart();a=r.length-c.length,r=c.trimEnd()}this.trimmedWsLengthsByLineIdx.push(a);const l=s===this.range.endLineNumber?Math.min(this.range.endColumn-1-o-a,r.length):r.length;for(let c=0;c<l;c++)this.elements.push(r.charCodeAt(c));s<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new Mt(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(t=>String.fromCharCode(t)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=QX(e>0?this.elements[e-1]:-1),n=QX(e<this.elements.length?this.elements[e]:-1);if(t===7&&n===8)return 0;if(t===8)return 150;let s=0;return t!==n&&(s+=10,t===0&&n===1&&(s+=1)),s+=YX(t),s+=YX(n),s}translateOffset(e,t="right"){const n=Ek(this.firstElementOffsetByLineIdx,r=>r<=e),s=e-this.firstElementOffsetByLineIdx[n];return new ue(this.range.startLineNumber+n,1+this.lineStartOffsets[n]+s+(s===0&&t==="left"?0:this.trimmedWsLengthsByLineIdx[n]))}translateRange(e){const t=this.translateOffset(e.start,"right"),n=this.translateOffset(e.endExclusive,"left");return n.isBefore(t)?J.fromPositions(n,n):J.fromPositions(t,n)}findWordContaining(e){if(e<0||e>=this.elements.length||!YO(this.elements[e]))return;let t=e;for(;t>0&&YO(this.elements[t-1]);)t--;let n=e;for(;n<this.elements.length&&YO(this.elements[n]);)n++;return new Mt(t,n)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){const t=Xb(this.firstElementOffsetByLineIdx,s=>s<=e.start)??0,n=eWe(this.firstElementOffsetByLineIdx,s=>e.endExclusive<=s)??this.elements.length;return new Mt(t,n)}}function YO(i){return i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57}const _We={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function YX(i){return _We[i]}function QX(i){return i===10?8:i===13?7:E8(i)?6:i>=97&&i<=122?0:i>=65&&i<=90?1:i>=48&&i<=57?2:i===-1?3:i===44||i===59?5:4}function vWe(i,e,t,n,s,r){let{moves:o,excludedChanges:a}=yWe(i,e,t,r);if(!r.isValid())return[];const l=i.filter(u=>!a.has(u)),c=wWe(l,n,s,e,t,r);return V3(o,c),o=CWe(o),o=o.filter(u=>{const d=u.original.toOffsetRange().slice(e).map(g=>g.trim());return d.join(`
`).length>=15&&bWe(d,g=>g.length>=2)>=2}),o=SWe(i,o),o}function bWe(i,e){let t=0;for(const n of i)e(n)&&t++;return t}function yWe(i,e,t,n){const s=[],r=i.filter(l=>l.modified.isEmpty&&l.original.length>=3).map(l=>new oD(l.original,e,l)),o=new Set(i.filter(l=>l.original.isEmpty&&l.modified.length>=3).map(l=>new oD(l.modified,t,l))),a=new Set;for(const l of r){let c=-1,u;for(const d of o){const h=l.computeSimilarity(d);h>c&&(c=h,u=d)}if(c>.9&&u&&(o.delete(u),s.push(new io(l.range,u.range)),a.add(l.source),a.add(u.source)),!n.isValid())return{moves:s,excludedChanges:a}}return{moves:s,excludedChanges:a}}function wWe(i,e,t,n,s,r){const o=[],a=new ife;for(const h of i)for(let g=h.original.startLineNumber;g<h.original.endLineNumberExclusive-2;g++){const p=`${e[g-1]}:${e[g+1-1]}:${e[g+2-1]}`;a.add(p,{range:new wt(g,g+3)})}const l=[];i.sort(fc(h=>h.modified.startLineNumber,em));for(const h of i){let g=[];for(let p=h.modified.startLineNumber;p<h.modified.endLineNumberExclusive-2;p++){const _=`${t[p-1]}:${t[p+1-1]}:${t[p+2-1]}`,v=new wt(p,p+3),y=[];a.forEach(_,({range:w})=>{for(const k of g)if(k.originalLineRange.endLineNumberExclusive+1===w.endLineNumberExclusive&&k.modifiedLineRange.endLineNumberExclusive+1===v.endLineNumberExclusive){k.originalLineRange=new wt(k.originalLineRange.startLineNumber,w.endLineNumberExclusive),k.modifiedLineRange=new wt(k.modifiedLineRange.startLineNumber,v.endLineNumberExclusive),y.push(k);return}const x={modifiedLineRange:v,originalLineRange:w};l.push(x),y.push(x)}),g=y}if(!r.isValid())return[]}l.sort(k9e(fc(h=>h.modifiedLineRange.length,em)));const c=new Tl,u=new Tl;for(const h of l){const g=h.modifiedLineRange.startLineNumber-h.originalLineRange.startLineNumber,p=c.subtractFrom(h.modifiedLineRange),_=u.subtractFrom(h.originalLineRange).getWithDelta(g),v=p.getIntersection(_);for(const y of v.ranges){if(y.length<3)continue;const w=y,x=y.delta(-g);o.push(new io(x,w)),c.addRange(w),u.addRange(x)}}o.sort(fc(h=>h.original.startLineNumber,em));const d=new rD(i);for(let h=0;h<o.length;h++){const g=o[h],p=d.findLastMonotonous(R=>R.original.startLineNumber<=g.original.startLineNumber),_=Xb(i,R=>R.modified.startLineNumber<=g.modified.startLineNumber),v=Math.max(g.original.startLineNumber-p.original.startLineNumber,g.modified.startLineNumber-_.modified.startLineNumber),y=d.findLastMonotonous(R=>R.original.startLineNumber<g.original.endLineNumberExclusive),w=Xb(i,R=>R.modified.startLineNumber<g.modified.endLineNumberExclusive),x=Math.max(y.original.endLineNumberExclusive-g.original.endLineNumberExclusive,w.modified.endLineNumberExclusive-g.modified.endLineNumberExclusive);let k;for(k=0;k<v;k++){const R=g.original.startLineNumber-k-1,L=g.modified.startLineNumber-k-1;if(R>n.length||L>s.length||c.contains(L)||u.contains(R)||!XX(n[R-1],s[L-1],r))break}k>0&&(u.addRange(new wt(g.original.startLineNumber-k,g.original.startLineNumber)),c.addRange(new wt(g.modified.startLineNumber-k,g.modified.startLineNumber)));let T;for(T=0;T<x;T++){const R=g.original.endLineNumberExclusive+T,L=g.modified.endLineNumberExclusive+T;if(R>n.length||L>s.length||c.contains(L)||u.contains(R)||!XX(n[R-1],s[L-1],r))break}T>0&&(u.addRange(new wt(g.original.endLineNumberExclusive,g.original.endLineNumberExclusive+T)),c.addRange(new wt(g.modified.endLineNumberExclusive,g.modified.endLineNumberExclusive+T))),(k>0||T>0)&&(o[h]=new io(new wt(g.original.startLineNumber-k,g.original.endLineNumberExclusive+T),new wt(g.modified.startLineNumber-k,g.modified.endLineNumberExclusive+T)))}return o}function XX(i,e,t){if(i.trim()===e.trim())return!0;if(i.length>300&&e.length>300)return!1;const s=new lfe().compute(new aD([i],new J(1,1,1,i.length),!1),new aD([e],new J(1,1,1,e.length),!1),t);let r=0;const o=ys.invert(s.diffs,i.length);for(const u of o)u.seq1Range.forEach(d=>{E8(i.charCodeAt(d))||r++});function a(u){let d=0;for(let h=0;h<i.length;h++)E8(u.charCodeAt(h))||d++;return d}const l=a(i.length>e.length?i:e);return r/l>.6&&l>10}function CWe(i){if(i.length===0)return i;i.sort(fc(t=>t.original.startLineNumber,em));const e=[i[0]];for(let t=1;t<i.length;t++){const n=e[e.length-1],s=i[t],r=s.original.startLineNumber-n.original.endLineNumberExclusive,o=s.modified.startLineNumber-n.modified.endLineNumberExclusive;if(r>=0&&o>=0&&r+o<=2){e[e.length-1]=n.join(s);continue}e.push(s)}return e}function SWe(i,e){const t=new rD(i);return e=e.filter(n=>{const s=t.findLastMonotonous(a=>a.original.startLineNumber<n.original.endLineNumberExclusive)||new io(new wt(1,1),new wt(1,1)),r=Xb(i,a=>a.modified.startLineNumber<n.modified.endLineNumberExclusive);return s!==r}),e}function T8(i,e,t){let n=t;return n=ZX(i,e,n),n=ZX(i,e,n),n=kWe(i,e,n),n}function ZX(i,e,t){if(t.length===0)return t;const n=[];n.push(t[0]);for(let r=1;r<t.length;r++){const o=n[n.length-1];let a=t[r];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=a.seq1Range.start-o.seq1Range.endExclusive;let c;for(c=1;c<=l&&!(i.getElement(a.seq1Range.start-c)!==i.getElement(a.seq1Range.endExclusive-c)||e.getElement(a.seq2Range.start-c)!==e.getElement(a.seq2Range.endExclusive-c));c++);if(c--,c===l){n[n.length-1]=new ys(new Mt(o.seq1Range.start,a.seq1Range.endExclusive-l),new Mt(o.seq2Range.start,a.seq2Range.endExclusive-l));continue}a=a.delta(-c)}n.push(a)}const s=[];for(let r=0;r<n.length-1;r++){const o=n[r+1];let a=n[r];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=o.seq1Range.start-a.seq1Range.endExclusive;let c;for(c=0;c<l&&!(!i.isStronglyEqual(a.seq1Range.start+c,a.seq1Range.endExclusive+c)||!e.isStronglyEqual(a.seq2Range.start+c,a.seq2Range.endExclusive+c));c++);if(c===l){n[r+1]=new ys(new Mt(a.seq1Range.start+l,o.seq1Range.endExclusive),new Mt(a.seq2Range.start+l,o.seq2Range.endExclusive));continue}c>0&&(a=a.delta(c))}s.push(a)}return n.length>0&&s.push(n[n.length-1]),s}function kWe(i,e,t){if(!i.getBoundaryScore||!e.getBoundaryScore)return t;for(let n=0;n<t.length;n++){const s=n>0?t[n-1]:void 0,r=t[n],o=n+1<t.length?t[n+1]:void 0,a=new Mt(s?s.seq1Range.endExclusive+1:0,o?o.seq1Range.start-1:i.length),l=new Mt(s?s.seq2Range.endExclusive+1:0,o?o.seq2Range.start-1:e.length);r.seq1Range.isEmpty?t[n]=JX(r,i,e,a,l):r.seq2Range.isEmpty&&(t[n]=JX(r.swap(),e,i,l,a).swap())}return t}function JX(i,e,t,n,s){let o=1;for(;i.seq1Range.start-o>=n.start&&i.seq2Range.start-o>=s.start&&t.isStronglyEqual(i.seq2Range.start-o,i.seq2Range.endExclusive-o)&&o<100;)o++;o--;let a=0;for(;i.seq1Range.start+a<n.endExclusive&&i.seq2Range.endExclusive+a<s.endExclusive&&t.isStronglyEqual(i.seq2Range.start+a,i.seq2Range.endExclusive+a)&&a<100;)a++;if(o===0&&a===0)return i;let l=0,c=-1;for(let u=-o;u<=a;u++){const d=i.seq2Range.start+u,h=i.seq2Range.endExclusive+u,g=i.seq1Range.start+u,p=e.getBoundaryScore(g)+t.getBoundaryScore(d)+t.getBoundaryScore(h);p>c&&(c=p,l=u)}return i.delta(l)}function xWe(i,e,t){const n=[];for(const s of t){const r=n[n.length-1];if(!r){n.push(s);continue}s.seq1Range.start-r.seq1Range.endExclusive<=2||s.seq2Range.start-r.seq2Range.endExclusive<=2?n[n.length-1]=new ys(r.seq1Range.join(s.seq1Range),r.seq2Range.join(s.seq2Range)):n.push(s)}return n}function EWe(i,e,t){const n=ys.invert(t,i.length),s=[];let r=new jh(0,0);function o(l,c){if(l.offset1<r.offset1||l.offset2<r.offset2)return;const u=i.findWordContaining(l.offset1),d=e.findWordContaining(l.offset2);if(!u||!d)return;let h=new ys(u,d);const g=h.intersect(c);let p=g.seq1Range.length,_=g.seq2Range.length;for(;n.length>0;){const v=n[0];if(!(v.seq1Range.intersects(h.seq1Range)||v.seq2Range.intersects(h.seq2Range)))break;const w=i.findWordContaining(v.seq1Range.start),x=e.findWordContaining(v.seq2Range.start),k=new ys(w,x),T=k.intersect(v);if(p+=T.seq1Range.length,_+=T.seq2Range.length,h=h.join(k),h.seq1Range.endExclusive>=v.seq1Range.endExclusive)n.shift();else break}p+_<(h.seq1Range.length+h.seq2Range.length)*2/3&&s.push(h),r=h.getEndExclusives()}for(;n.length>0;){const l=n.shift();l.seq1Range.isEmpty||(o(l.getStarts(),l),o(l.getEndExclusives().delta(-1),l))}return TWe(t,s)}function TWe(i,e){const t=[];for(;i.length>0||e.length>0;){const n=i[0],s=e[0];let r;n&&(!s||n.seq1Range.start<s.seq1Range.start)?r=i.shift():r=e.shift(),t.length>0&&t[t.length-1].seq1Range.endExclusive>=r.seq1Range.start?t[t.length-1]=t[t.length-1].join(r):t.push(r)}return t}function LWe(i,e,t){let n=t;if(n.length===0)return n;let s=0,r;do{r=!1;const a=[n[0]];for(let l=1;l<n.length;l++){let d=function(g,p){const _=new Mt(u.seq1Range.endExclusive,c.seq1Range.start);return i.getText(_).replace(/\s/g,"").length<=4&&(g.seq1Range.length+g.seq2Range.length>5||p.seq1Range.length+p.seq2Range.length>5)};var o=d;const c=n[l],u=a[a.length-1];d(u,c)?(r=!0,a[a.length-1]=a[a.length-1].join(c)):a.push(c)}n=a}while(s++<10&&r);return n}function IWe(i,e,t){let n=t;if(n.length===0)return n;let s=0,r;do{r=!1;const l=[n[0]];for(let c=1;c<n.length;c++){let h=function(p,_){const v=new Mt(d.seq1Range.endExclusive,u.seq1Range.start);if(i.countLinesIn(v)>5||v.length>500)return!1;const w=i.getText(v).trim();if(w.length>20||w.split(/\r\n|\r|\n/).length>1)return!1;const x=i.countLinesIn(p.seq1Range),k=p.seq1Range.length,T=e.countLinesIn(p.seq2Range),R=p.seq2Range.length,L=i.countLinesIn(_.seq1Range),I=_.seq1Range.length,A=e.countLinesIn(_.seq2Range),B=_.seq2Range.length,V=2*40+50;function U(W){return Math.min(W,V)}return Math.pow(Math.pow(U(x*40+k),1.5)+Math.pow(U(T*40+R),1.5),1.5)+Math.pow(Math.pow(U(L*40+I),1.5)+Math.pow(U(A*40+B),1.5),1.5)>(V**1.5)**1.5*1.3};var a=h;const u=n[c],d=l[l.length-1];h(d,u)?(r=!0,l[l.length-1]=l[l.length-1].join(u)):l.push(u)}n=l}while(s++<10&&r);const o=[];return b9e(n,(l,c,u)=>{let d=c;function h(w){return w.length>0&&w.trim().length<=3&&c.seq1Range.length+c.seq2Range.length>100}const g=i.extendToFullLines(c.seq1Range),p=i.getText(new Mt(g.start,c.seq1Range.start));h(p)&&(d=d.deltaStart(-p.length));const _=i.getText(new Mt(c.seq1Range.endExclusive,g.endExclusive));h(_)&&(d=d.deltaEnd(_.length));const v=ys.fromOffsetPairs(l?l.getEndExclusives():jh.zero,u?u.getStarts():jh.max),y=d.intersect(v);o.length>0&&y.getStarts().equals(o[o.length-1].getEndExclusives())?o[o.length-1]=o[o.length-1].join(y):o.push(y)}),o}class eZ{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){const t=e===0?0:tZ(this.lines[e-1]),n=e===this.lines.length?0:tZ(this.lines[e]);return 1e3-(t+n)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}}function tZ(i){let e=0;for(;e<i.length&&(i.charCodeAt(e)===32||i.charCodeAt(e)===9);)e++;return e}class cfe{constructor(){this.dynamicProgrammingDiffing=new gWe,this.myersDiffingAlgorithm=new lfe}computeDiff(e,t,n){if(e.length<=1&&ks(e,t,(T,R)=>T===R))return new aL([],[],!1);if(e.length===1&&e[0].length===0||t.length===1&&t[0].length===0)return new aL([new rl(new wt(1,e.length+1),new wt(1,t.length+1),[new $a(new J(1,1,e.length,e[e.length-1].length+1),new J(1,1,t.length,t[t.length-1].length+1))])],[],!1);const s=n.maxComputationTimeMs===0?Tk.instance:new fWe(n.maxComputationTimeMs),r=!n.ignoreTrimWhitespace,o=new Map;function a(T){let R=o.get(T);return R===void 0&&(R=o.size,o.set(T,R)),R}const l=e.map(T=>a(T.trim())),c=t.map(T=>a(T.trim())),u=new eZ(l,e),d=new eZ(c,t),h=u.length+d.length<1700?this.dynamicProgrammingDiffing.compute(u,d,s,(T,R)=>e[T]===t[R]?t[R].length===0?.1:1+Math.log(1+t[R].length):.99):this.myersDiffingAlgorithm.compute(u,d,s);let g=h.diffs,p=h.hitTimeout;g=T8(u,d,g),g=LWe(u,d,g);const _=[],v=T=>{if(r)for(let R=0;R<T;R++){const L=y+R,I=w+R;if(e[L]!==t[I]){const A=this.refineDiff(e,t,new ys(new Mt(L,L+1),new Mt(I,I+1)),s,r);for(const B of A.mappings)_.push(B);A.hitTimeout&&(p=!0)}}};let y=0,w=0;for(const T of g){n1(()=>T.seq1Range.start-y===T.seq2Range.start-w);const R=T.seq1Range.start-y;v(R),y=T.seq1Range.endExclusive,w=T.seq2Range.endExclusive;const L=this.refineDiff(e,t,T,s,r);L.hitTimeout&&(p=!0);for(const I of L.mappings)_.push(I)}v(e.length-y);const x=nZ(_,e,t);let k=[];return n.computeMoves&&(k=this.computeMoves(x,e,t,l,c,s,r)),n1(()=>{function T(L,I){if(L.lineNumber<1||L.lineNumber>I.length)return!1;const A=I[L.lineNumber-1];return!(L.column<1||L.column>A.length+1)}function R(L,I){return!(L.startLineNumber<1||L.startLineNumber>I.length+1||L.endLineNumberExclusive<1||L.endLineNumberExclusive>I.length+1)}for(const L of x){if(!L.innerChanges)return!1;for(const I of L.innerChanges)if(!(T(I.modifiedRange.getStartPosition(),t)&&T(I.modifiedRange.getEndPosition(),t)&&T(I.originalRange.getStartPosition(),e)&&T(I.originalRange.getEndPosition(),e)))return!1;if(!R(L.modified,t)||!R(L.original,e))return!1}return!0}),new aL(x,k,p)}computeMoves(e,t,n,s,r,o,a){return vWe(e,t,n,s,r,o).map(u=>{const d=this.refineDiff(t,n,new ys(u.original.toOffsetRange(),u.modified.toOffsetRange()),o,a),h=nZ(d.mappings,t,n,!0);return new sfe(u,h)})}refineDiff(e,t,n,s,r){const a=NWe(n).toRangeMapping2(e,t),l=new aD(e,a.originalRange,r),c=new aD(t,a.modifiedRange,r),u=l.length+c.length<500?this.dynamicProgrammingDiffing.compute(l,c,s):this.myersDiffingAlgorithm.compute(l,c,s);let d=u.diffs;return d=T8(l,c,d),d=EWe(l,c,d),d=xWe(l,c,d),d=IWe(l,c,d),{mappings:d.map(g=>new $a(l.translateRange(g.seq1Range),c.translateRange(g.seq2Range))),hitTimeout:u.hitTimeout}}}function nZ(i,e,t,n=!1){const s=[];for(const r of vH(i.map(o=>DWe(o,e,t)),(o,a)=>o.original.overlapOrTouch(a.original)||o.modified.overlapOrTouch(a.modified))){const o=r[0],a=r[r.length-1];s.push(new rl(o.original.join(a.original),o.modified.join(a.modified),r.map(l=>l.innerChanges[0])))}return n1(()=>!n&&s.length>0&&(s[0].modified.startLineNumber!==s[0].original.startLineNumber||t.length-s[s.length-1].modified.endLineNumberExclusive!==e.length-s[s.length-1].original.endLineNumberExclusive)?!1:eU(s,(r,o)=>o.original.startLineNumber-r.original.endLineNumberExclusive===o.modified.startLineNumber-r.modified.endLineNumberExclusive&&r.original.endLineNumberExclusive<o.original.startLineNumber&&r.modified.endLineNumberExclusive<o.modified.startLineNumber)),s}function DWe(i,e,t){let n=0,s=0;i.modifiedRange.endColumn===1&&i.originalRange.endColumn===1&&i.originalRange.startLineNumber+n<=i.originalRange.endLineNumber&&i.modifiedRange.startLineNumber+n<=i.modifiedRange.endLineNumber&&(s=-1),i.modifiedRange.startColumn-1>=t[i.modifiedRange.startLineNumber-1].length&&i.originalRange.startColumn-1>=e[i.originalRange.startLineNumber-1].length&&i.originalRange.startLineNumber<=i.originalRange.endLineNumber+s&&i.modifiedRange.startLineNumber<=i.modifiedRange.endLineNumber+s&&(n=1);const r=new wt(i.originalRange.startLineNumber+n,i.originalRange.endLineNumber+1+s),o=new wt(i.modifiedRange.startLineNumber+n,i.modifiedRange.endLineNumber+1+s);return new rl(r,o,[i])}function NWe(i){return new io(new wt(i.seq1Range.start+1,i.seq1Range.endExclusive+1),new wt(i.seq2Range.start+1,i.seq2Range.endExclusive+1))}const iZ={getLegacy:()=>new cWe,getDefault:()=>new cfe};function sm(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}class gn{constructor(e,t,n,s=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=sm(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class ic{constructor(e,t,n,s){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=sm(Math.max(Math.min(1,t),0),3),this.l=sm(Math.max(Math.min(1,n),0),3),this.a=sm(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,s=e.b/255,r=e.a,o=Math.max(t,n,s),a=Math.min(t,n,s);let l=0,c=0;const u=(a+o)/2,d=o-a;if(d>0){switch(c=Math.min(u<=.5?d/(2*u):d/(2-2*u),1),o){case t:l=(n-s)/d+(n<s?6:0);break;case n:l=(s-t)/d+2;break;case s:l=(t-n)/d+4;break}l*=60,l=Math.round(l)}return new ic(l,c,u,r)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:s,a:r}=e;let o,a,l;if(n===0)o=a=l=s;else{const c=s<.5?s*(1+n):s+n-s*n,u=2*s-c;o=ic._hue2rgb(u,c,t+1/3),a=ic._hue2rgb(u,c,t),l=ic._hue2rgb(u,c,t-1/3)}return new gn(Math.round(o*255),Math.round(a*255),Math.round(l*255),r)}}class sv{constructor(e,t,n,s){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=sm(Math.max(Math.min(1,t),0),3),this.v=sm(Math.max(Math.min(1,n),0),3),this.a=sm(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,s=e.b/255,r=Math.max(t,n,s),o=Math.min(t,n,s),a=r-o,l=r===0?0:a/r;let c;return a===0?c=0:r===t?c=((n-s)/a%6+6)%6:r===n?c=(s-t)/a+2:c=(t-n)/a+4,new sv(Math.round(c*60),l,r,e.a)}static toRGBA(e){const{h:t,s:n,v:s,a:r}=e,o=s*n,a=o*(1-Math.abs(t/60%2-1)),l=s-o;let[c,u,d]=[0,0,0];return t<60?(c=o,u=a):t<120?(c=a,u=o):t<180?(u=o,d=a):t<240?(u=a,d=o):t<300?(c=a,d=o):t<=360&&(c=o,d=a),c=Math.round((c+l)*255),u=Math.round((u+l)*255),d=Math.round((d+l)*255),new gn(c,u,d,r)}}const Di=class Di{static fromHex(e){return Di.Format.CSS.parseHex(e)||Di.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}get hsla(){return this._hsla?this._hsla:ic.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:sv.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof gn)this.rgba=e;else if(e instanceof ic)this._hsla=e,this.rgba=ic.toRGBA(e);else if(e instanceof sv)this._hsva=e,this.rgba=sv.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&gn.equals(this.rgba,e.rgba)&&ic.equals(this.hsla,e.hsla)&&sv.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=Di._relativeLuminanceForComponent(this.rgba.r),t=Di._relativeLuminanceForComponent(this.rgba.g),n=Di._relativeLuminanceForComponent(this.rgba.b),s=.2126*e+.7152*t+.0722*n;return sm(s,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new Di(new ic(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new Di(new ic(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:s,a:r}=this.rgba;return new Di(new gn(t,n,s,r*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new Di(new gn(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:n,b:s,a:r}=this.rgba;return new Di(new gn(e.rgba.r-r*(e.rgba.r-t),e.rgba.g-r*(e.rgba.g-n),e.rgba.b-r*(e.rgba.b-s),1))}toString(){return this._toString||(this._toString=Di.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const s=e.getRelativeLuminance(),r=t.getRelativeLuminance();return n=n*(r-s)/r,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const s=e.getRelativeLuminance(),r=t.getRelativeLuminance();return n=n*(s-r)/s,e.darken(n)}};Di.white=new Di(new gn(255,255,255,1)),Di.black=new Di(new gn(0,0,0,1)),Di.red=new Di(new gn(255,0,0,1)),Di.blue=new Di(new gn(0,0,255,1)),Di.green=new Di(new gn(0,255,0,1)),Di.cyan=new Di(new gn(0,255,255,1)),Di.lightgrey=new Di(new gn(211,211,211,1)),Di.transparent=new Di(new gn(0,0,0,0));let ke=Di;(function(i){(function(e){(function(t){function n(g){return g.rgba.a===1?`rgb(${g.rgba.r}, ${g.rgba.g}, ${g.rgba.b})`:i.Format.CSS.formatRGBA(g)}t.formatRGB=n;function s(g){return`rgba(${g.rgba.r}, ${g.rgba.g}, ${g.rgba.b}, ${+g.rgba.a.toFixed(2)})`}t.formatRGBA=s;function r(g){return g.hsla.a===1?`hsl(${g.hsla.h}, ${(g.hsla.s*100).toFixed(2)}%, ${(g.hsla.l*100).toFixed(2)}%)`:i.Format.CSS.formatHSLA(g)}t.formatHSL=r;function o(g){return`hsla(${g.hsla.h}, ${(g.hsla.s*100).toFixed(2)}%, ${(g.hsla.l*100).toFixed(2)}%, ${g.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(g){const p=g.toString(16);return p.length!==2?"0"+p:p}function l(g){return`#${a(g.rgba.r)}${a(g.rgba.g)}${a(g.rgba.b)}`}t.formatHex=l;function c(g,p=!1){return p&&g.rgba.a===1?i.Format.CSS.formatHex(g):`#${a(g.rgba.r)}${a(g.rgba.g)}${a(g.rgba.b)}${a(Math.round(g.rgba.a*255))}`}t.formatHexA=c;function u(g){return g.isOpaque()?i.Format.CSS.formatHex(g):i.Format.CSS.formatRGBA(g)}t.format=u;function d(g){const p=g.length;if(p===0||g.charCodeAt(0)!==35)return null;if(p===7){const _=16*h(g.charCodeAt(1))+h(g.charCodeAt(2)),v=16*h(g.charCodeAt(3))+h(g.charCodeAt(4)),y=16*h(g.charCodeAt(5))+h(g.charCodeAt(6));return new i(new gn(_,v,y,1))}if(p===9){const _=16*h(g.charCodeAt(1))+h(g.charCodeAt(2)),v=16*h(g.charCodeAt(3))+h(g.charCodeAt(4)),y=16*h(g.charCodeAt(5))+h(g.charCodeAt(6)),w=16*h(g.charCodeAt(7))+h(g.charCodeAt(8));return new i(new gn(_,v,y,w/255))}if(p===4){const _=h(g.charCodeAt(1)),v=h(g.charCodeAt(2)),y=h(g.charCodeAt(3));return new i(new gn(16*_+_,16*v+v,16*y+y))}if(p===5){const _=h(g.charCodeAt(1)),v=h(g.charCodeAt(2)),y=h(g.charCodeAt(3)),w=h(g.charCodeAt(4));return new i(new gn(16*_+_,16*v+v,16*y+y,(16*w+w)/255))}return null}t.parseHex=d;function h(g){switch(g){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(i.Format||(i.Format={}))})(ke||(ke={}));function ufe(i){const e=[];for(const t of i){const n=Number(t);(n||n===0&&t.replace(/\s/g,"")!=="")&&e.push(n)}return e}function aU(i,e,t,n){return{red:i/255,blue:t/255,green:e/255,alpha:n}}function Hw(i,e){const t=e.index,n=e[0].length;if(!t)return;const s=i.positionAt(t);return{startLineNumber:s.lineNumber,startColumn:s.column,endLineNumber:s.lineNumber,endColumn:s.column+n}}function RWe(i,e){if(!i)return;const t=ke.Format.CSS.parseHex(e);if(t)return{range:i,color:aU(t.rgba.r,t.rgba.g,t.rgba.b,t.rgba.a)}}function sZ(i,e,t){if(!i||e.length!==1)return;const s=e[0].values(),r=ufe(s);return{range:i,color:aU(r[0],r[1],r[2],t?r[3]:1)}}function rZ(i,e,t){if(!i||e.length!==1)return;const s=e[0].values(),r=ufe(s),o=new ke(new ic(r[0],r[1]/100,r[2]/100,t?r[3]:1));return{range:i,color:aU(o.rgba.r,o.rgba.g,o.rgba.b,o.rgba.a)}}function Uw(i,e){return typeof i=="string"?[...i.matchAll(e)]:i.findMatches(e)}function AWe(i){const e=[],n=Uw(i,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(n.length>0)for(const s of n){const r=s.filter(c=>c!==void 0),o=r[1],a=r[2];if(!a)continue;let l;if(o==="rgb"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;l=sZ(Hw(i,s),Uw(a,c),!1)}else if(o==="rgba"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=sZ(Hw(i,s),Uw(a,c),!0)}else if(o==="hsl"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;l=rZ(Hw(i,s),Uw(a,c),!1)}else if(o==="hsla"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=rZ(Hw(i,s),Uw(a,c),!0)}else o==="#"&&(l=RWe(Hw(i,s),o+a));l&&e.push(l)}return e}function PWe(i){return!i||typeof i.getValue!="function"||typeof i.positionAt!="function"?[]:AWe(i)}const oZ=new RegExp("\\bMARK:\\s*(.*)$","d"),MWe=/^-+|-+$/g;function OWe(i,e){var n;let t=[];if(e.findRegionSectionHeaders&&((n=e.foldingRules)!=null&&n.markers)){const s=FWe(i,e);t=t.concat(s)}if(e.findMarkSectionHeaders){const s=BWe(i);t=t.concat(s)}return t}function FWe(i,e){const t=[],n=i.getLineCount();for(let s=1;s<=n;s++){const r=i.getLineContent(s),o=r.match(e.foldingRules.markers.start);if(o){const a={startLineNumber:s,startColumn:o[0].length+1,endLineNumber:s,endColumn:r.length+1};if(a.endColumn>a.startColumn){const l={range:a,...dfe(r.substring(o[0].length)),shouldBeInComments:!1};(l.text||l.hasSeparatorLine)&&t.push(l)}}}return t}function BWe(i){const e=[],t=i.getLineCount();for(let n=1;n<=t;n++){const s=i.getLineContent(n);VWe(s,n,e)}return e}function VWe(i,e,t){oZ.lastIndex=0;const n=oZ.exec(i);if(n){const s=n.indices[1][0]+1,r=n.indices[1][1]+1,o={startLineNumber:e,startColumn:s,endLineNumber:e,endColumn:r};if(o.endColumn>o.startColumn){const a={range:o,...dfe(n[1]),shouldBeInComments:!0};(a.text||a.hasSeparatorLine)&&t.push(a)}}}function dfe(i){i=i.trim();const e=i.startsWith("-");return i=i.replace(MWe,""),{text:i,hasSeparatorLine:e}}class WWe{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=T_(e);const n=this.values,s=this.prefixSum,r=t.length;return r===0?!1:(this.values=new Uint32Array(n.length+r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+r),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=T_(e),t=T_(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=T_(e),t=T_(t);const n=this.values,s=this.prefixSum;if(e>=n.length)return!1;const r=n.length-e;return t>=r&&(t=r),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=T_(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,s=0,r=0,o=0;for(;t<=n;)if(s=t+(n-t)/2|0,r=this.prefixSum[s],o=r-this.values[s],e<o)n=s-1;else if(e>=r)t=s+1;else break;return new hfe(s,e-o)}}class HWe{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new hfe(t,e-n)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=F4(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const n=this._values[e],s=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=s+n;for(let r=0;r<n;r++)this._indexBySum[s+r]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class hfe{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class UWe{constructor(e,t,n,s){this._uri=e,this._lines=t,this._eol=n,this._versionId=s,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new ue(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let s=0;s<t;s++)n[s]=this._lines[s].length+e;this._lineStarts=new WWe(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const n=Hy(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);const s=new Uint32Array(n.length-1);for(let r=1;r<n.length;r++)this._lines.splice(e.lineNumber+r-1,0,n[r]),s[r-1]=n[r].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,s)}}const aZ=60*1e3;class zWe extends be{constructor(e,t,n=!1){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){const s=new HH;s.cancelAndSet(()=>this._checkStopModelSync(),Math.round(aZ/2)),this._register(s)}}dispose(){for(const e in this._syncedModels)br(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t=!1){for(const n of e){const s=n.toString();this._syncedModels[s]||this._beginModelSync(n,t),this._syncedModels[s]&&(this._syncedModelsLastUsedTime[s]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>aZ&&t.push(n);for(const n of t)this._stopModelSync(n)}_beginModelSync(e,t){const n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;const s=e.toString();this._proxy.$acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});const r=new Ze;r.add(n.onDidChangeContent(o=>{this._proxy.$acceptModelChanged(s.toString(),o)})),r.add(n.onWillDispose(()=>{this._stopModelSync(s)})),r.add(Dt(()=>{this._proxy.$acceptRemovedModel(s)})),this._syncedModels[s]=r}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],br(t)}}class jWe{constructor(){this._models=Object.create(null)}getModel(e){return this._models[e]}getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}$acceptNewModel(e){this._models[e.url]=new $We(Ut.parse(e.url),e.lines,e.EOL,e.versionId)}$acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}$acceptRemovedModel(e){this._models[e]&&delete this._models[e]}}class $We extends UWe{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){const t=[];for(let n=0;n<this._lines.length;n++){const s=this._lines[n],r=this.offsetAt(new ue(n+1,1)),o=s.matchAll(e);for(const a of o)(a.index||a.index===0)&&(a.index=a.index+r),t.push(a)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const n=mk(e.column,xH(t),this._lines[e.lineNumber-1],0);return n?new J(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){const t=this._lines,n=this._wordenize.bind(this);let s=0,r="",o=0,a=[];return{*[Symbol.iterator](){for(;;)if(o<a.length){const l=r.substring(a[o].start,a[o].end);o+=1,yield l}else if(s<t.length)r=t[s],a=n(r,e),o=0,s+=1;else break}}}getLineWords(e,t){const n=this._lines[e-1],s=this._wordenize(n,t),r=[];for(const o of s)r.push({word:n.substring(o.start,o.end),startColumn:o.start+1,endColumn:o.end+1});return r}_wordenize(e,t){const n=[];let s;for(t.lastIndex=0;(s=t.exec(e))&&s[0].length!==0;)n.push({start:s.index,end:s.index+s[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,n=e.startLineNumber-1,s=e.endLineNumber-1,r=[];r.push(this._lines[n].substring(e.startColumn-1));for(let o=n+1;o<s;o++)r.push(this._lines[o]);return r.push(this._lines[s].substring(0,e.endColumn-1)),r.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!ue.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,s=!1;if(t<1)t=1,n=1,s=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,s=!0;else{const r=this._lines[t-1].length+1;n<1?(n=1,s=!0):n>r&&(n=r,s=!0)}return s?{lineNumber:t,column:n}:e}}const GN=class GN{constructor(){this._workerTextModelSyncServer=new jWe}dispose(){}_getModel(e){return this._workerTextModelSyncServer.getModel(e)}_getModels(){return this._workerTextModelSyncServer.getModels()}$acceptNewModel(e){this._workerTextModelSyncServer.$acceptNewModel(e)}$acceptModelChanged(e,t){this._workerTextModelSyncServer.$acceptModelChanged(e,t)}$acceptRemovedModel(e){this._workerTextModelSyncServer.$acceptRemovedModel(e)}async $computeUnicodeHighlights(e,t,n){const s=this._getModel(e);return s?XVe.computeUnicodeHighlights(s,t,n):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async $findSectionHeaders(e,t){const n=this._getModel(e);return n?OWe(n,t):[]}async $computeDiff(e,t,n,s){const r=this._getModel(e),o=this._getModel(t);return!r||!o?null:lL.computeDiff(r,o,n,s)}static computeDiff(e,t,n,s){const r=s==="advanced"?iZ.getDefault():iZ.getLegacy(),o=e.getLinesContent(),a=t.getLinesContent(),l=r.computeDiff(o,a,n),c=l.changes.length>0?!1:this._modelsAreIdentical(e,t);function u(d){return d.map(h=>{var g;return[h.original.startLineNumber,h.original.endLineNumberExclusive,h.modified.startLineNumber,h.modified.endLineNumberExclusive,(g=h.innerChanges)==null?void 0:g.map(p=>[p.originalRange.startLineNumber,p.originalRange.startColumn,p.originalRange.endLineNumber,p.originalRange.endColumn,p.modifiedRange.startLineNumber,p.modifiedRange.startColumn,p.modifiedRange.endLineNumber,p.modifiedRange.endColumn])]})}return{identical:c,quitEarly:l.hitTimeout,changes:u(l.changes),moves:l.moves.map(d=>[d.lineRangeMapping.original.startLineNumber,d.lineRangeMapping.original.endLineNumberExclusive,d.lineRangeMapping.modified.startLineNumber,d.lineRangeMapping.modified.endLineNumberExclusive,u(d.changes)])}}static _modelsAreIdentical(e,t){const n=e.getLineCount(),s=t.getLineCount();if(n!==s)return!1;for(let r=1;r<=n;r++){const o=e.getLineContent(r),a=t.getLineContent(r);if(o!==a)return!1}return!0}async $computeMoreMinimalEdits(e,t,n){const s=this._getModel(e);if(!s)return t;const r=[];let o;t=t.slice(0).sort((l,c)=>{if(l.range&&c.range)return J.compareRangesUsingStarts(l.range,c.range);const u=l.range?0:1,d=c.range?0:1;return u-d});let a=0;for(let l=1;l<t.length;l++)J.getEndPosition(t[a].range).equals(J.getStartPosition(t[l].range))?(t[a].range=J.fromPositions(J.getStartPosition(t[a].range),J.getEndPosition(t[l].range)),t[a].text+=t[l].text):(a++,t[a]=t[l]);t.length=a+1;for(let{range:l,text:c,eol:u}of t){if(typeof u=="number"&&(o=u),J.isEmpty(l)&&!c)continue;const d=s.getValueInRange(l);if(c=c.replace(/\r\n|\n|\r/g,s.eol),d===c)continue;if(Math.max(c.length,d.length)>lL._diffLimit){r.push({range:l,text:c});continue}const h=NVe(d,c,n),g=s.offsetAt(J.lift(l).getStartPosition());for(const p of h){const _=s.positionAt(g+p.originalStart),v=s.positionAt(g+p.originalStart+p.originalLength),y={text:c.substr(p.modifiedStart,p.modifiedLength),range:{startLineNumber:_.lineNumber,startColumn:_.column,endLineNumber:v.lineNumber,endColumn:v.column}};s.getValueInRange(y.range)!==y.text&&r.push(y)}}return typeof o=="number"&&r.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),r}async $computeLinks(e){const t=this._getModel(e);return t?OVe(t):null}async $computeDefaultDocumentColors(e){const t=this._getModel(e);return t?PWe(t):null}async $textualSuggest(e,t,n,s){const r=new S1,o=new RegExp(n,s),a=new Set;e:for(const l of e){const c=this._getModel(l);if(c){for(const u of c.words(o))if(!(u===t||!isNaN(Number(u)))&&(a.add(u),a.size>lL._suggestionsLimit))break e}}return{words:Array.from(a),duration:r.elapsed()}}async $computeWordRanges(e,t,n,s){const r=this._getModel(e);if(!r)return Object.create(null);const o=new RegExp(n,s),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const c=r.getLineWords(l,o);for(const u of c){if(!isNaN(Number(u.word)))continue;let d=a[u.word];d||(d=[],a[u.word]=d),d.push({startLineNumber:l,startColumn:u.startColumn,endLineNumber:l,endColumn:u.endColumn})}}return a}async $navigateValueSet(e,t,n,s,r){const o=this._getModel(e);if(!o)return null;const a=new RegExp(s,r);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=o.getValueInRange(t),c=o.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;const u=o.getValueInRange(c);return w8.INSTANCE.navigateValueSet(t,l,c,u,n)}};GN._diffLimit=1e5,GN._suggestionsLimit=1e4;let L8=GN;class lL extends L8{constructor(e,t){super(),this._host=e,this._foreignModuleFactory=t,this._foreignModule=null}async $ping(){return"pong"}$loadForeignModule(e,t,n){const o={host:D9e(n,(a,l)=>this._host.$fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(o,t),Promise.resolve(H3(this._foreignModule))):new Promise((a,l)=>{const c=u=>{this._foreignModule=u.create(o,t),a(H3(this._foreignModule))};{const u=z4.asBrowserUri(`${e}.js`).toString(!0);PBe(()=>import(`${u}`),[]).then(c).catch(l)}})}$fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(n){return Promise.reject(n)}}}typeof importScripts=="function"&&(globalThis.monaco=the());const lU=nn("textResourceConfigurationService"),ffe=nn("textResourcePropertiesService"),Yn=nn("ILanguageFeaturesService");var cU=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Op=function(i,e){return function(t,n){e(t,n,i)}};const lZ=5*60*1e3;function Fp(i,e){const t=i.getModel(e);return!(!t||t.isTooLargeForSyncing())}let I8=class extends be{constructor(e,t,n,s,r,o){super(),this._languageConfigurationService=r,this._modelService=t,this._workerManager=this._register(new D8(e,this._modelService)),this._logService=s,this._register(o.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:async(a,l)=>{if(!Fp(this._modelService,a.uri))return Promise.resolve({links:[]});const u=await(await this._workerWithResources([a.uri])).$computeLinks(a.uri.toString());return u&&{links:u}}})),this._register(o.completionProvider.register("*",new qWe(this._workerManager,n,this._modelService,this._languageConfigurationService)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return Fp(this._modelService,e)}async computedUnicodeHighlights(e,t,n){return(await this._workerWithResources([e])).$computeUnicodeHighlights(e.toString(),t,n)}async computeDiff(e,t,n,s){const o=await(await this._workerWithResources([e,t],!0)).$computeDiff(e.toString(),t.toString(),n,s);if(!o)return null;return{identical:o.identical,quitEarly:o.quitEarly,changes:l(o.changes),moves:o.moves.map(c=>new sfe(new io(new wt(c[0],c[1]),new wt(c[2],c[3])),l(c[4])))};function l(c){return c.map(u=>{var d;return new rl(new wt(u[0],u[1]),new wt(u[2],u[3]),(d=u[4])==null?void 0:d.map(h=>new $a(new J(h[0],h[1],h[2],h[3]),new J(h[4],h[5],h[6],h[7]))))})}}async computeMoreMinimalEdits(e,t,n=!1){if(O4(t)){if(!Fp(this._modelService,e))return Promise.resolve(t);const s=S1.create(),r=this._workerWithResources([e]).then(o=>o.$computeMoreMinimalEdits(e.toString(),t,n));return r.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),s.elapsed())),Promise.race([r,wk(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return Fp(this._modelService,e)}async navigateValueSet(e,t,n){const s=this._modelService.getModel(e);if(!s)return null;const r=this._languageConfigurationService.getLanguageConfiguration(s.getLanguageId()).getWordDefinition(),o=r.source,a=r.flags;return(await this._workerWithResources([e])).$navigateValueSet(e.toString(),t,n,o,a)}canComputeWordRanges(e){return Fp(this._modelService,e)}async computeWordRanges(e,t){const n=this._modelService.getModel(e);if(!n)return Promise.resolve(null);const s=this._languageConfigurationService.getLanguageConfiguration(n.getLanguageId()).getWordDefinition(),r=s.source,o=s.flags;return(await this._workerWithResources([e])).$computeWordRanges(e.toString(),t,r,o)}async findSectionHeaders(e,t){return(await this._workerWithResources([e])).$findSectionHeaders(e.toString(),t)}async computeDefaultDocumentColors(e){return(await this._workerWithResources([e])).$computeDefaultDocumentColors(e.toString())}async _workerWithResources(e,t=!1){return await(await this._workerManager.withWorker()).workerWithSyncedResources(e,t)}};I8=cU([Op(1,Io),Op(2,lU),Op(3,Tu),Op(4,Ud),Op(5,Yn)],I8);class qWe{constructor(e,t,n,s){this.languageConfigurationService=s,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}async provideCompletionItems(e,t){const n=this._configurationService.getValue(e.uri,t,"editor");if(n.wordBasedSuggestions==="off")return;const s=[];if(n.wordBasedSuggestions==="currentDocument")Fp(this._modelService,e.uri)&&s.push(e.uri);else for(const d of this._modelService.getModels())Fp(this._modelService,d.uri)&&(d===e?s.unshift(d.uri):(n.wordBasedSuggestions==="allDocuments"||d.getLanguageId()===e.getLanguageId())&&s.push(d.uri));if(s.length===0)return;const r=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),o=e.getWordAtPosition(t),a=o?new J(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn):J.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),u=await(await this._workerManager.withWorker()).textualSuggest(s,o==null?void 0:o.word,r);if(u)return{duration:u.duration,suggestions:u.words.map(d=>({kind:18,label:d,insertText:d,range:{insert:l,replace:a}}))}}}let D8=class extends be{constructor(e,t){super(),this._workerDescriptor=e,this._modelService=t,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new jH).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(lZ/2),Kn),this._register(this._modelService.onModelRemoved(s=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>lZ&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new lD(this._workerDescriptor,!1,this._modelService)),Promise.resolve(this._editorWorkerClient)}};D8=cU([Op(1,Io)],D8);class KWe{constructor(e){this._instance=e,this.proxy=this._instance}dispose(){this._instance.dispose()}setChannel(e,t){throw new Error("Not supported")}}let lD=class extends be{constructor(e,t,n){super(),this._workerDescriptor=e,this._disposed=!1,this._modelService=n,this._keepIdleModels=t,this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(GBe(this._workerDescriptor)),C8.setChannel(this._worker,this._createEditorWorkerHost())}catch(e){m8(e),this._worker=this._createFallbackLocalWorker()}return this._worker}async _getProxy(){try{const e=this._getOrCreateWorker().proxy;return await e.$ping(),e}catch(e){return m8(e),this._worker=this._createFallbackLocalWorker(),this._worker.proxy}}_createFallbackLocalWorker(){return new KWe(new lL(this._createEditorWorkerHost(),null))}_createEditorWorkerHost(){return{$fhr:(e,t)=>this.fhr(e,t)}}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new zWe(e,this._modelService,this._keepIdleModels))),this._modelManager}async workerWithSyncedResources(e,t=!1){if(this._disposed)return Promise.reject(B8e());const n=await this._getProxy();return this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n}async textualSuggest(e,t,n){const s=await this.workerWithSyncedResources(e),r=n.source,o=n.flags;return s.$textualSuggest(e.map(a=>a.toString()),t,r,o)}dispose(){super.dispose(),this._disposed=!0}};lD=cU([Op(2,Io)],lD);var Rl;(function(i){i.DARK="dark",i.LIGHT="light",i.HIGH_CONTRAST_DARK="hcDark",i.HIGH_CONTRAST_LIGHT="hcLight"})(Rl||(Rl={}));function eb(i){return i===Rl.HIGH_CONTRAST_DARK||i===Rl.HIGH_CONTRAST_LIGHT}function oA(i){return i===Rl.DARK||i===Rl.HIGH_CONTRAST_DARK}const Sc=nn("themeService");function D_(i){return{id:i}}function N8(i){switch(i){case Rl.DARK:return"vs-dark";case Rl.HIGH_CONTRAST_DARK:return"hc-black";case Rl.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const gfe={ThemingContribution:"base.contributions.theming"};class GWe{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new se}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),Dt(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}const mfe=new GWe;ir.add(gfe.ThemingContribution,mfe);function Nf(i){return mfe.onColorThemeChange(i)}class YWe extends be{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var QWe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},XWe=function(i,e){return function(t,n){e(t,n,i)}};let R8=class extends be{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new se),this._onCodeEditorAdd=this._register(new se),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new se),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new se),this._onDiffEditorAdd=this._register(new se),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new se),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new ba,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(n=>n.removeDecorationsByType(e))))}setModelProperty(e,t,n){const s=e.toString();let r;this._modelProperties.has(s)?r=this._modelProperties.get(s):(r=new Map,this._modelProperties.set(s,r)),r.set(t,n)}getModelProperty(e,t){const n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}async openCodeEditor(e,t,n){for(const s of this._codeEditorOpenHandlers){const r=await s(e,t,n);if(r!==null)return r}return null}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return Dt(t)}};R8=QWe([XWe(0,Sc)],R8);var ZWe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},cZ=function(i,e){return function(t,n){e(t,n,i)}};let cD=class extends R8{constructor(e,t){super(t),this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler(async(n,s,r)=>s?this.doOpenEditor(s,n):null))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const r=t.resource.scheme;if(r===Wt.http||r===Wt.https)return Phe(t.resource.toString()),e}return null}const s=t.options?t.options.selection:null;if(s)if(typeof s.endLineNumber=="number"&&typeof s.endColumn=="number")e.setSelection(s),e.revealRangeInCenter(s,1);else{const r={lineNumber:s.startLineNumber,column:s.startColumn};e.setPosition(r),e.revealPositionInCenter(r,1)}return e}findModel(e,t){const n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}};cD=ZWe([cZ(0,Nn),cZ(1,Sc)],cD);_n(Es,cD,0);const zm=nn("layoutService");var pfe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},_fe=function(i,e){return function(t,n){e(t,n,i)}};let uD=class{get mainContainer(){var e;return((e=yH(this._codeEditorService.listCodeEditors()))==null?void 0:e.getContainerDomNode())??Kn.document.body}get activeContainer(){const e=this._codeEditorService.getFocusedCodeEditor()??this._codeEditorService.getActiveCodeEditor();return(e==null?void 0:e.getContainerDomNode())??this.mainContainer}get mainContainerDimension(){return a8(this.mainContainer)}get activeContainerDimension(){return a8(this.activeContainer)}get containers(){return bH(this._codeEditorService.listCodeEditors().map(e=>e.getContainerDomNode()))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())==null||e.focus()}constructor(e){this._codeEditorService=e,this.onDidLayoutMainContainer=Le.None,this.onDidLayoutActiveContainer=Le.None,this.onDidLayoutContainer=Le.None,this.onDidChangeActiveContainer=Le.None,this.onDidAddContainer=Le.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};uD=pfe([_fe(0,Es)],uD);let A8=class extends uD{get mainContainer(){return this._container}constructor(e,t){super(t),this._container=e}};A8=pfe([_fe(1,Es)],A8);_n(zm,uD,1);var Lk;(function(i){i[i.Ignore=0]="Ignore",i[i.Info=1]="Info",i[i.Warning=2]="Warning",i[i.Error=3]="Error"})(Lk||(Lk={}));(function(i){const e="error",t="warning",n="warn",s="info",r="ignore";function o(l){return l?ev(e,l)?i.Error:ev(t,l)||ev(n,l)?i.Warning:ev(s,l)?i.Info:i.Ignore:i.Ignore}i.fromValue=o;function a(l){switch(l){case i.Error:return e;case i.Warning:return t;case i.Info:return s;default:return r}}i.toString=a})(Lk||(Lk={}));const fs=Lk,vfe=nn("dialogService");var JWe=fs;const Lu=nn("notificationService");class eHe{}const uU=nn("undoRedoService");class bfe{constructor(e,t){this.resource=e,this.elements=t}}const Tv=class Tv{constructor(){this.id=Tv._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};Tv._ID=0,Tv.None=new Tv;let P8=Tv;const Lv=class Lv{constructor(){this.id=Lv._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};Lv._ID=0,Lv.None=new Lv;let Bp=Lv;var tHe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},uZ=function(i,e){return function(t,n){e(t,n,i)}};function $E(i){return i.scheme===Wt.file?i.fsPath:i.path}let yfe=0;class qE{constructor(e,t,n,s,r,o,a){this.id=++yfe,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=s,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class dZ{constructor(e,t){this.resourceLabel=e,this.reason=t}}class hZ{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,s]of this.elements)(s.reason===0?e:t).push(s.resourceLabel);const n=[];return e.length>0&&n.push(S({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(S({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class nHe{constructor(e,t,n,s,r,o,a){this.id=++yfe,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=s,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,n){this.removedResources||(this.removedResources=new hZ),this.removedResources.has(t)||this.removedResources.set(t,new dZ(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new hZ),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new dZ(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class wfe{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(const n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let n=0,s=this._past.length;n<s;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new bfe(e,t)}restoreSnapshot(e){const t=e.elements.length;let n=!0,s=0,r=-1;for(let a=0,l=this._past.length;a<l;a++,s++){const c=this._past[a];n&&(s>=t||c.id!==e.elements[s])&&(n=!1,r=0),!n&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let o=-1;for(let a=this._future.length-1;a>=0;a--,s++){const l=this._future[a];n&&(s>=t||l.id!==e.elements[s])&&(n=!1,o=a),!n&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}r!==-1&&(this._past=this._past.slice(0,r)),o!==-1&&(this._future=this._future.slice(o+1)),this.versionId++}getElements(){const e=[],t=[];for(const n of this._past)e.push(n.actual);for(const n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class QO{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const Cfe=new wfe("","");Cfe.locked=!0;let M8=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const n of this._editStacks)t.push(n[1].toString());console.log(t.join(`
`))}pushElement(e,t=P8.None,n=Bp.None){if(e.type===0){const s=$E(e.resource),r=this.getUriComparisonKey(e.resource);this._pushElement(new qE(e,s,r,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{const s=new Set,r=[],o=[];for(const a of e.resources){const l=$E(a),c=this.getUriComparisonKey(a);s.has(c)||(s.add(c),r.push(l),o.push(c))}r.length===1?this._pushElement(new qE(e,r[0],o[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new nHe(e,r,o,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){const s=e.resourceLabels[t],r=e.strResources[t];let o;this._editStacks.has(r)?o=this._editStacks.get(r):(o=new wfe(s,r),this._editStacks.set(r,o)),o.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const n=this._editStacks.get(t);if(n.hasFutureElements())return null;const s=n.getClosestPastElement();return s?s.actual:null}return null}_splitPastWorkspaceElement(e,t){const n=e.actual.split(),s=new Map;for(const r of n){const o=$E(r.resource),a=this.getUriComparisonKey(r.resource),l=new qE(r,o,a,0,0,0,0);s.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitPastWorkspaceElement(e,s)}}_splitFutureWorkspaceElement(e,t){const n=e.actual.split(),s=new Map;for(const r of n){const o=$E(r.resource),a=this.getUriComparisonKey(r.resource),l=new qE(r,o,a,0,0,0,0);s.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitFutureWorkspaceElement(e,s)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,n){const s=this.getUriComparisonKey(e);this._editStacks.has(s)&&this._editStacks.get(s).setElementsValidFlag(t,n)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new bfe(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestPastElement();o&&o.sourceId===e&&(!t||o.sourceOrder>t.sourceOrder)&&(t=o,n=s)}return[t,n]}canUndo(e){if(e instanceof Bp){const[,n]=this._findClosestUndoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){Un(e);for(const n of t.strResources)this.removeElements(n);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,s,r){const o=this._acquireLocks(n);let a;try{a=t()}catch(l){return o(),s.dispose(),this._onError(l,e)}return a?a.then(()=>(o(),s.dispose(),r()),l=>(o(),s.dispose(),this._onError(l,e))):(o(),s.dispose(),r())}async _invokeWorkspacePrepare(e){if(typeof e.actual.prepareUndoRedo>"u")return be.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?be.None:t}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(be.None);const n=e.actual.prepareUndoRedo();return n?Hde(n)?t(n):n.then(s=>t(s)):t(be.None)}_getAffectedEditStacks(e){const t=[];for(const n of e.strResources)t.push(this._editStacks.get(n)||Cfe);return new QO(t)}_tryToSplitAndUndo(e,t,n,s){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(s),new KE(this._undo(e,0,!0));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(s),new KE}_checkWorkspaceUndo(e,t,n,s){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,S({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,S({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of n.editStacks)a.getClosestPastElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndUndo(e,t,null,S({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndUndo(e,t,null,S({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,S({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,n){const s=this._getAffectedEditStacks(t),r=this._checkWorkspaceUndo(e,t,s,!1);return r?r.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,s,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const n=t.getClosestPastElement();if(n){if(n===e){const s=t.getSecondClosestPastElement();if(s&&s.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(e,t,n,s){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let a;(function(u){u[u.All=0]="All",u[u.This=1]="This",u[u.Cancel=2]="Cancel"})(a||(a={}));const{result:l}=await this._dialogService.prompt({type:fs.Info,message:S("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),buttons:[{label:S({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",n.editStacks.length),run:()=>a.All},{label:S({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>a.This}],cancelButton:{run:()=>a.Cancel}});if(l===a.Cancel)return;if(l===a.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const c=this._checkWorkspaceUndo(e,t,n,!1);if(c)return c.returnValue;s=!0}let r;try{r=await this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const o=this._checkWorkspaceUndo(e,t,n,!0);if(o)return r.dispose(),o.returnValue;for(const a of n.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),n,r,()=>this._continueUndoInGroup(t.groupId,s))}_resourceUndo(e,t,n){if(!t.isValid){e.flushAllElements();return}if(e.locked){const s=S({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(s);return}return this._invokeResourcePrepare(t,s=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new QO([e]),s,()=>this._continueUndoInGroup(t.groupId,n))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestPastElement();o&&o.groupId===e&&(!t||o.groupOrder>t.groupOrder)&&(t=o,n=s)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;const[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof Bp){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;const s=this._editStacks.get(e),r=s.getClosestPastElement();if(!r)return;if(r.groupId){const[a,l]=this._findClosestUndoElementInGroup(r.groupId);if(r!==a&&l)return this._undo(l,t,n)}if((r.sourceId!==t||r.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,r);try{return r.type===1?this._workspaceUndo(e,r,n):this._resourceUndo(s,r,n)}finally{}}async _confirmAndContinueUndo(e,t,n){if((await this._dialogService.confirm({message:S("confirmDifferentSource","Would you like to undo '{0}'?",n.label),primaryButton:S({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:S("confirmDifferentSource.no","No")})).confirmed)return this._undo(e,t,!0)}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestFutureElement();o&&o.sourceId===e&&(!t||o.sourceOrder<t.sourceOrder)&&(t=o,n=s)}return[t,n]}canRedo(e){if(e instanceof Bp){const[,n]=this._findClosestRedoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,s){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(s),new KE(this._redo(e));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(s),new KE}_checkWorkspaceRedo(e,t,n,s){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,S({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,S({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of n.editStacks)a.getClosestFutureElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndRedo(e,t,null,S({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndRedo(e,t,null,S({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,S({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const n=this._getAffectedEditStacks(t),s=this._checkWorkspaceRedo(e,t,n,!1);return s?s.returnValue:this._executeWorkspaceRedo(e,t,n)}async _executeWorkspaceRedo(e,t,n){let s;try{s=await this._invokeWorkspacePrepare(t)}catch(o){return this._onError(o,t)}const r=this._checkWorkspaceRedo(e,t,n,!0);if(r)return s.dispose(),r.returnValue;for(const o of n.editStacks)o.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,s,()=>this._continueRedoInGroup(t.groupId))}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=S({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new QO([e]),n,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestFutureElement();o&&o.groupId===e&&(!t||o.groupOrder<t.groupOrder)&&(t=o,n=s)}return[t,n]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof Bp){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){const[s,r]=this._findClosestRedoElementInGroup(n.groupId);if(n!==s&&r)return this._redo(r)}try{return n.type===1?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}};M8=tHe([uZ(0,vfe),uZ(1,Lu)],M8);class KE{constructor(e){this.returnValue=e}}_n(uU,M8,1);function qo(i,e,t){return Math.min(Math.max(i,e),t)}class Sfe{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class iHe{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}const kfe=nn("environmentService");var sHe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},fZ=function(i,e){return function(t,n){e(t,n,i)}};const rHe=nn("ILanguageFeatureDebounceService");var dD;(function(i){const e=new WeakMap;let t=0;function n(s){let r=e.get(s);return r===void 0&&(r=++t,e.set(s,r)),r}i.of=n})(dD||(dD={}));class oHe{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}}class aHe{constructor(e,t,n,s,r,o){this._logService=e,this._name=t,this._registry=n,this._default=s,this._min=r,this._max=o,this._cache=new j2(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,n)=>j4(dD.of(n),t),0)}get(e){const t=this._key(e),n=this._cache.get(t);return n?qo(n.value,this._min,this._max):this.default()}update(e,t){const n=this._key(e);let s=this._cache.get(n);s||(s=new iHe(6),this._cache.set(n,s));const r=qo(s.update(t),this._min,this._max);return UH(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${r}ms`),r}_overall(){const e=new Sfe;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return qo(e,this._min,this._max)}}let O8=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,n){const s=(n==null?void 0:n.min)??50,r=(n==null?void 0:n.max)??s**2,o=(n==null?void 0:n.key)??void 0,a=`${dD.of(e)},${s}${o?","+o:""}`;let l=this._data.get(a);return l||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),l=new oHe(s*1.5)):l=new aHe(this._logService,t,e,this._overallAverage()|0||s*1.5,s,r),this._data.set(a,l)),l}_overallAverage(){const e=new Sfe;for(const t of this._data.values())e.update(t.default());return e.value}};O8=sHe([fZ(0,Tu),fZ(1,kfe)],O8);_n(rHe,O8,1);class Qc{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e);const s=this.getFontStyle(e);return s&1&&(n+=" mtki"),s&2&&(n+=" mtkb"),s&4&&(n+=" mtku"),s&8&&(n+=" mtks"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),s=this.getFontStyle(e);let r=`color: ${t[n]};`;s&1&&(r+="font-style: italic;"),s&2&&(r+="font-weight: bold;");let o="";return s&4&&(o+=" underline"),s&8&&(o+=" line-through"),o&&(r+=`text-decoration:${o};`),r}static getPresentationFromMetadata(e){const t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:!!(n&1),bold:!!(n&2),underline:!!(n&4),strikethrough:!!(n&8)}}}function Zb(i){let e=0,t=0,n=0,s=0;for(let r=0,o=i.length;r<o;r++){const a=i.charCodeAt(r);a===13?(e===0&&(t=r),e++,r+1<o&&i.charCodeAt(r+1)===10?(s|=2,r++):s|=3,n=r+1):a===10&&(s|=1,e===0&&(t=r),e++,n=r+1)}return e===0&&(t=i.length),[e,t,i.length-n,s]}var lHe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},XO=function(i,e){return function(t,n){e(t,n,i)}};let F8=class{constructor(e,t,n,s){this._legend=e,this._themeService=t,this._languageService=n,this._logService=s,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new B8}getMetadata(e,t,n){const s=this._languageService.languageIdCodec.encodeLanguageId(n),r=this._hashTable.get(e,t,s);let o;if(r)o=r.metadata;else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let d=0;c>0&&d<this._legend.tokenModifiers.length;d++)c&1&&l.push(this._legend.tokenModifiers[d]),c=c>>1;const u=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,n);if(typeof u>"u")o=2147483647;else{if(o=0,typeof u.italic<"u"){const d=(u.italic?1:0)<<11;o|=d|1}if(typeof u.bold<"u"){const d=(u.bold?2:0)<<11;o|=d|2}if(typeof u.underline<"u"){const d=(u.underline?4:0)<<11;o|=d|4}if(typeof u.strikethrough<"u"){const d=(u.strikethrough?8:0)<<11;o|=d|8}if(u.foreground){const d=u.foreground<<15;o|=d|16}o===0&&(o=2147483647)}}else o=2147483647,a="not-in-legend";this._hashTable.add(e,t,s,o)}return o}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,n,s,r){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${n}: The provided start offset ${s} is outside the previous data (length ${r}).`))}};F8=lHe([XO(1,Sc),XO(2,Ws),XO(3,Tu)],F8);class cHe{constructor(e,t,n,s){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=s,this.next=null}}const Sh=class Sh{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=Sh._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Sh._SIZES.length?2/3*this._currentLength:0),this._elements=[],Sh._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const s=this._hashFunc(e,t,n);let r=this._elements[s];for(;r;){if(r.tokenTypeIndex===e&&r.tokenModifierSet===t&&r.languageId===n)return r;r=r.next}return null}add(e,t,n,s){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const r=this._elements;this._currentLengthIndex++,this._currentLength=Sh._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Sh._SIZES.length?2/3*this._currentLength:0),this._elements=[],Sh._nullOutEntries(this._elements,this._currentLength);for(const o of r){let a=o;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new cHe(e,t,n,s))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}};Sh._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];let B8=Sh;const uHe=nn("semanticTokensStylingService");var dHe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ZO=function(i,e){return function(t,n){e(t,n,i)}};let V8=class extends be{constructor(e,t,n){super(),this._themeService=e,this._logService=t,this._languageService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new F8(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};V8=dHe([ZO(0,Sc),ZO(1,Tu),ZO(2,Ws)],V8);_n(uHe,V8,1);function ug(i){return i===47||i===92}function xfe(i){return i.replace(/[\\/]/g,$i.sep)}function hHe(i){return i.indexOf("/")===-1&&(i=xfe(i)),/^[a-zA-Z]:(\/|$)/.test(i)&&(i="/"+i),i}function gZ(i,e=$i.sep){if(!i)return"";const t=i.length,n=i.charCodeAt(0);if(ug(n)){if(ug(i.charCodeAt(1))&&!ug(i.charCodeAt(2))){let r=3;const o=r;for(;r<t&&!ug(i.charCodeAt(r));r++);if(o!==r&&!ug(i.charCodeAt(r+1))){for(r+=1;r<t;r++)if(ug(i.charCodeAt(r)))return i.slice(0,r+1).replace(/[\\/]/g,e)}}return e}else if(fHe(n)&&i.charCodeAt(1)===58)return ug(i.charCodeAt(2))?i.slice(0,2)+e:i.slice(0,2);let s=i.indexOf("://");if(s!==-1){for(s+=3;s<t;s++)if(ug(i.charCodeAt(s)))return i.slice(0,s+1)}return""}function W8(i,e,t,n=im){if(i===e)return!0;if(!i||!e||e.length>i.length)return!1;if(t){if(!PH(i,e))return!1;if(e.length===i.length)return!0;let r=e.length;return e.charAt(e.length-1)===n&&r--,i.charAt(r)===n}return e.charAt(e.length-1)!==n&&(e+=n),i.indexOf(e)===0}function fHe(i){return i>=65&&i<=90||i>=97&&i<=122}const GE="**",mZ="/",cL="[/\\\\]",uL="[^/\\\\]",gHe=/\//g;function pZ(i,e){switch(i){case 0:return"";case 1:return`${uL}*?`;default:return`(?:${cL}|${uL}+${cL}${e?`|${cL}${uL}+`:""})*?`}}function _Z(i,e){if(!i)return[];const t=[];let n=!1,s=!1,r="";for(const o of i){switch(o){case e:if(!n&&!s){t.push(r),r="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":s=!0;break;case"]":s=!1;break}r+=o}return r&&t.push(r),t}function Efe(i){if(!i)return"";let e="";const t=_Z(i,mZ);if(t.every(n=>n===GE))e=".*";else{let n=!1;t.forEach((s,r)=>{if(s===GE){if(n)return;e+=pZ(2,r===t.length-1)}else{let o=!1,a="",l=!1,c="";for(const u of s){if(u!=="}"&&o){a+=u;continue}if(l&&(u!=="]"||!c)){let d;u==="-"?d=u:(u==="^"||u==="!")&&!c?d="^":u===mZ?d="":d=wf(u),c+=d;continue}switch(u){case"{":o=!0;continue;case"[":l=!0;continue;case"}":{const h=`(?:${_Z(a,",").map(g=>Efe(g)).join("|")})`;e+=h,o=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=uL;continue;case"*":e+=pZ(1);continue;default:e+=wf(u)}}r<t.length-1&&(t[r+1]!==GE||r+2<t.length)&&(e+=cL)}n=s===GE})}return e}const mHe=/^\*\*\/\*\.[\w\.-]+$/,pHe=/^\*\*\/([\w\.-]+)\/?$/,_He=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,vHe=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,bHe=/^\*\*((\/[\w\.-]+)+)\/?$/,yHe=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,vZ=new j2(1e4),bZ=function(){return!1},Sd=function(){return null};function dU(i,e){if(!i)return Sd;let t;typeof i!="string"?t=i.pattern:t=i,t=t.trim();const n=`${t}_${!!e.trimForExclusions}`;let s=vZ.get(n);if(s)return yZ(s,i);let r;return mHe.test(t)?s=wHe(t.substr(4),t):(r=pHe.exec(JO(t,e)))?s=CHe(r[1],t):(e.trimForExclusions?vHe:_He).test(t)?s=SHe(t,e):(r=bHe.exec(JO(t,e)))?s=wZ(r[1].substr(1),t,!0):(r=yHe.exec(JO(t,e)))?s=wZ(r[1],t,!1):s=kHe(t),vZ.set(n,s),yZ(s,i)}function yZ(i,e){if(typeof e=="string")return i;const t=function(n,s){return W8(n,e.base,!ia)?i(H4(n.substr(e.base.length),im),s):null};return t.allBasenames=i.allBasenames,t.allPaths=i.allPaths,t.basenames=i.basenames,t.patterns=i.patterns,t}function JO(i,e){return e.trimForExclusions&&i.endsWith("/**")?i.substr(0,i.length-2):i}function wHe(i,e){return function(t,n){return typeof t=="string"&&t.endsWith(i)?e:null}}function CHe(i,e){const t=`/${i}`,n=`\\${i}`,s=function(o,a){return typeof o!="string"?null:a?a===i?e:null:o===i||o.endsWith(t)||o.endsWith(n)?e:null},r=[i];return s.basenames=r,s.patterns=[e],s.allBasenames=r,s}function SHe(i,e){const t=Lfe(i.slice(1,-1).split(",").map(a=>dU(a,e)).filter(a=>a!==Sd),i),n=t.length;if(!n)return Sd;if(n===1)return t[0];const s=function(a,l){for(let c=0,u=t.length;c<u;c++)if(t[c](a,l))return i;return null},r=t.find(a=>!!a.allBasenames);r&&(s.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function wZ(i,e,t){const n=im===$i.sep,s=n?i:i.replace(gHe,im),r=im+s,o=$i.sep+i;let a;return t?a=function(l,c){return typeof l=="string"&&(l===s||l.endsWith(r)||!n&&(l===i||l.endsWith(o)))?e:null}:a=function(l,c){return typeof l=="string"&&(l===s||!n&&l===i)?e:null},a.allPaths=[(t?"*/":"./")+i],a}function kHe(i){try{const e=new RegExp(`^${Efe(i)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?i:null}}catch{return Sd}}function xHe(i,e,t){return!i||typeof e!="string"?!1:Tfe(i)(e,void 0,t)}function Tfe(i,e={}){if(!i)return bZ;if(typeof i=="string"||EHe(i)){const t=dU(i,e);if(t===Sd)return bZ;const n=function(s,r){return!!t(s,r)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return THe(i,e)}function EHe(i){const e=i;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function THe(i,e){const t=Lfe(Object.getOwnPropertyNames(i).map(a=>LHe(a,i[a],e)).filter(a=>a!==Sd)),n=t.length;if(!n)return Sd;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];const a=function(u,d){let h;for(let g=0,p=t.length;g<p;g++){const _=t[g](u,d);if(typeof _=="string")return _;J9(_)&&(h||(h=[]),h.push(_))}return h?(async()=>{for(const g of h){const p=await g;if(typeof p=="string")return p}return null})():null},l=t.find(u=>!!u.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((u,d)=>d.allPaths?u.concat(d.allPaths):u,[]);return c.length&&(a.allPaths=c),a}const s=function(a,l,c){let u,d;for(let h=0,g=t.length;h<g;h++){const p=t[h];p.requiresSiblings&&c&&(l||(l=Yde(a)),u||(u=l.substr(0,l.length-d7e(a).length)));const _=p(a,l,u,c);if(typeof _=="string")return _;J9(_)&&(d||(d=[]),d.push(_))}return d?(async()=>{for(const h of d){const g=await h;if(typeof g=="string")return g}return null})():null},r=t.find(a=>!!a.allBasenames);r&&(s.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function LHe(i,e,t){if(e===!1)return Sd;const n=dU(i,t);if(n===Sd)return Sd;if(typeof e=="boolean")return n;if(e){const s=e.when;if(typeof s=="string"){const r=(o,a,l,c)=>{if(!c||!n(o,a))return null;const u=s.replace("$(basename)",()=>l),d=c(u);return J9(d)?d.then(h=>h?i:null):d?i:null};return r.requiresSiblings=!0,r}}return n}function Lfe(i,e){const t=i.filter(a=>!!a.basenames);if(t.length<2)return i;const n=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let s;if(e){s=[];for(let a=0,l=n.length;a<l;a++)s.push(e)}else s=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const r=function(a,l){if(typeof a!="string")return null;if(!l){let u;for(u=a.length;u>0;u--){const d=a.charCodeAt(u-1);if(d===47||d===92)break}l=a.substr(u)}const c=n.indexOf(l);return c!==-1?s[c]:null};r.basenames=n,r.patterns=s,r.allBasenames=n;const o=i.filter(a=>!a.basenames);return o.push(r),o}function Ife(i,e,t,n,s,r){if(Array.isArray(i)){let o=0;for(const a of i){const l=Ife(a,e,t,n,s,r);if(l===10)return l;l>o&&(o=l)}return o}else{if(typeof i=="string")return n?i==="*"?5:i===t?10:0:0;if(i){const{language:o,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:u}=i;if(!n&&!c)return 0;u&&s&&(e=s);let d=0;if(l)if(l===e.scheme)d=10;else if(l==="*")d=5;else return 0;if(o)if(o===t)d=10;else if(o==="*")d=Math.max(d,5);else return 0;if(u)if(u===r)d=10;else if(u==="*"&&r!==void 0)d=Math.max(d,5);else return 0;if(a){let h;if(typeof a=="string"?h=a:h={...a,base:Gde(a.base)},h===e.fsPath||xHe(h,e.fsPath))d=10;else return 0}return d}else return 0}}function Dfe(i){return typeof i=="string"?!1:Array.isArray(i)?i.every(Dfe):!!i.exclusive}class CZ{constructor(e,t,n,s,r){this.uri=e,this.languageId=t,this.notebookUri=n,this.notebookType=s,this.recursive=r}equals(e){var t,n;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&((t=this.notebookUri)==null?void 0:t.toString())===((n=e.notebookUri)==null?void 0:n.toString())&&this.recursive===e.recursive}}class vi{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new se,this.onDidChange=this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),Dt(()=>{if(n){const s=this._entries.indexOf(n);s>=0&&(this._entries.splice(s,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e,!1);const t=[];for(const n of this._entries)n._score>0&&t.push(n.provider);return t}ordered(e,t=!1){const n=[];return this._orderedForEach(e,t,s=>n.push(s.provider)),n}orderedGroups(e){const t=[];let n,s;return this._orderedForEach(e,!1,r=>{n&&s===r._score?n.push(r.provider):(s=r._score,n=[r.provider],t.push(n))}),t}_orderedForEach(e,t,n){this._updateScores(e,t);for(const s of this._entries)s._score>0&&n(s)}_updateScores(e,t){var r,o;const n=(r=this._notebookInfoResolver)==null?void 0:r.call(this,e.uri),s=n?new CZ(e.uri,e.getLanguageId(),n.uri,n.type,t):new CZ(e.uri,e.getLanguageId(),void 0,void 0,t);if(!((o=this._lastCandidate)!=null&&o.equals(s))){this._lastCandidate=s;for(const a of this._entries)if(a._score=Ife(a.selector,s.uri,s.languageId,qVe(e),s.notebookUri,s.notebookType),Dfe(a.selector)&&a._score>0)if(t)a._score=0;else{for(const l of this._entries)l._score=0;a._score=1e3;break}this._entries.sort(vi._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:pC(e.selector)&&!pC(t.selector)?1:!pC(e.selector)&&pC(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function pC(i){return typeof i=="string"?!1:Array.isArray(i)?i.some(pC):!!i.isBuiltin}class IHe{constructor(){this.referenceProvider=new vi(this._score.bind(this)),this.renameProvider=new vi(this._score.bind(this)),this.newSymbolNamesProvider=new vi(this._score.bind(this)),this.codeActionProvider=new vi(this._score.bind(this)),this.definitionProvider=new vi(this._score.bind(this)),this.typeDefinitionProvider=new vi(this._score.bind(this)),this.declarationProvider=new vi(this._score.bind(this)),this.implementationProvider=new vi(this._score.bind(this)),this.documentSymbolProvider=new vi(this._score.bind(this)),this.inlayHintsProvider=new vi(this._score.bind(this)),this.colorProvider=new vi(this._score.bind(this)),this.codeLensProvider=new vi(this._score.bind(this)),this.documentFormattingEditProvider=new vi(this._score.bind(this)),this.documentRangeFormattingEditProvider=new vi(this._score.bind(this)),this.onTypeFormattingEditProvider=new vi(this._score.bind(this)),this.signatureHelpProvider=new vi(this._score.bind(this)),this.hoverProvider=new vi(this._score.bind(this)),this.documentHighlightProvider=new vi(this._score.bind(this)),this.multiDocumentHighlightProvider=new vi(this._score.bind(this)),this.selectionRangeProvider=new vi(this._score.bind(this)),this.foldingRangeProvider=new vi(this._score.bind(this)),this.linkProvider=new vi(this._score.bind(this)),this.inlineCompletionsProvider=new vi(this._score.bind(this)),this.inlineEditProvider=new vi(this._score.bind(this)),this.completionProvider=new vi(this._score.bind(this)),this.linkedEditingRangeProvider=new vi(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new vi(this._score.bind(this)),this.documentSemanticTokensProvider=new vi(this._score.bind(this)),this.documentDropEditProvider=new vi(this._score.bind(this)),this.documentPasteEditProvider=new vi(this._score.bind(this))}_score(e){var t;return(t=this._notebookTypeResolver)==null?void 0:t.call(this,e)}}_n(Yn,IHe,1);function hU(i){return`--vscode-${i.replace(/\./g,"-")}`}function Re(i){return`var(${hU(i)})`}function DHe(i,e){return`var(${hU(i)}, ${e})`}function NHe(i){return i!==null&&typeof i=="object"&&"light"in i&&"dark"in i}const Nfe={ColorContribution:"base.contributions.colors"},RHe="default";class AHe{constructor(){this._onDidChangeSchema=new se,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,s=!1,r){const o={id:e,description:n,defaults:t,needsTransparency:s,deprecationMessage:r};this.colorsById[e]=o;const a={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return r&&(a.deprecationMessage=r),s&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage=S("transparecyRequired","This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:n,oneOf:[a,{type:"string",const:RHe,description:S("useDefault","Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n!=null&&n.defaults){const s=NHe(n.defaults)?n.defaults[t.type]:n.defaults;return Wc(s,t)}}getColorSchema(){return this.colorSchema}toString(){const e=(t,n)=>{const s=t.indexOf(".")===-1?0:1,r=n.indexOf(".")===-1?0:1;return s!==r?s-r:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const aA=new AHe;ir.add(Nfe.ColorContribution,aA);function Y(i,e,t,n,s){return aA.registerColor(i,e,t,n,s)}function PHe(i,e){var t,n,s,r;switch(i.op){case 0:return(t=Wc(i.value,e))==null?void 0:t.darken(i.factor);case 1:return(n=Wc(i.value,e))==null?void 0:n.lighten(i.factor);case 2:return(s=Wc(i.value,e))==null?void 0:s.transparent(i.factor);case 3:{const o=Wc(i.background,e);return o?(r=Wc(i.value,e))==null?void 0:r.makeOpaque(o):Wc(i.value,e)}case 4:for(const o of i.values){const a=Wc(o,e);if(a)return a}return;case 6:return Wc(e.defines(i.if)?i.then:i.else,e);case 5:{const o=Wc(i.value,e);if(!o)return;const a=Wc(i.background,e);return a?o.isDarkerThan(a)?ke.getLighterColor(o,a,i.factor).transparent(i.transparency):ke.getDarkerColor(o,a,i.factor).transparent(i.transparency):o.transparent(i.factor*i.transparency)}default:throw JH()}}function A1(i,e){return{op:0,value:i,factor:e}}function au(i,e){return{op:1,value:i,factor:e}}function Kt(i,e){return{op:2,value:i,factor:e}}function SZ(...i){return{op:4,values:i}}function MHe(i,e,t){return{op:6,if:i,then:e,else:t}}function kZ(i,e,t,n){return{op:5,value:i,background:e,factor:t,transparency:n}}function Wc(i,e){if(i!==null){if(typeof i=="string")return i[0]==="#"?ke.fromHex(i):e.getColor(i);if(i instanceof ke)return i;if(typeof i=="object")return PHe(i,e)}}const Rfe="vscode://schemas/workbench-colors",Afe=ir.as(rA.JSONContribution);Afe.registerSchema(Rfe,aA.getColorSchema());const xZ=new so(()=>Afe.notifySchemaChanged(Rfe),200);aA.onDidChangeSchema(()=>{xZ.isScheduled()||xZ.schedule()});const Hn=Y("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},S("foreground","Overall foreground color. This color is only used if not overridden by a component."));Y("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},S("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));Y("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},S("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));Y("descriptionForeground",{light:"#717171",dark:Kt(Hn,.7),hcDark:Kt(Hn,.7),hcLight:Kt(Hn,.7)},S("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const H8=Y("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},S("iconForeground","The default color for icons in the workbench.")),Nd=Y("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},S("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),Sn=Y("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},S("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Gi=Y("contrastActiveBorder",{light:null,dark:null,hcDark:Nd,hcLight:Nd},S("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));Y("selection.background",null,S("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));const OHe=Y("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},S("textLinkForeground","Foreground color for links in text."));Y("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},S("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));Y("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:ke.black,hcLight:"#292929"},S("textSeparatorForeground","Color for text separators."));Y("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},S("textPreformatForeground","Foreground color for preformatted text segments."));Y("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},S("textPreformatBackground","Background color for preformatted text segments."));Y("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},S("textBlockQuoteBackground","Background color for block quotes in text."));Y("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:ke.white,hcLight:"#292929"},S("textBlockQuoteBorder","Border color for block quotes in text."));Y("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:ke.black,hcLight:"#F2F2F2"},S("textCodeBlockBackground","Background color for code blocks in text."));Y("sash.hoverBorder",Nd,S("sashActiveBorder","Border color of active sashes."));const dL=Y("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:ke.black,hcLight:"#0F4A85"},S("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),FHe=Y("badge.foreground",{dark:ke.white,light:"#333",hcDark:ke.white,hcLight:ke.white},S("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),fU=Y("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},S("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),Pfe=Y("scrollbarSlider.background",{dark:ke.fromHex("#797979").transparent(.4),light:ke.fromHex("#646464").transparent(.4),hcDark:Kt(Sn,.6),hcLight:Kt(Sn,.4)},S("scrollbarSliderBackground","Scrollbar slider background color.")),Mfe=Y("scrollbarSlider.hoverBackground",{dark:ke.fromHex("#646464").transparent(.7),light:ke.fromHex("#646464").transparent(.7),hcDark:Kt(Sn,.8),hcLight:Kt(Sn,.8)},S("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),Ofe=Y("scrollbarSlider.activeBackground",{dark:ke.fromHex("#BFBFBF").transparent(.4),light:ke.fromHex("#000000").transparent(.6),hcDark:Sn,hcLight:Sn},S("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),BHe=Y("progressBar.background",{dark:ke.fromHex("#0E70C0"),light:ke.fromHex("#0E70C0"),hcDark:Sn,hcLight:Sn},S("progressBarBackground","Background color of the progress bar that can show for long running operations.")),mu=Y("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:ke.black,hcLight:ke.white},S("editorBackground","Editor background color.")),$2=Y("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:ke.white,hcLight:Hn},S("editorForeground","Editor default foreground color."));Y("editorStickyScroll.background",mu,S("editorStickyScrollBackground","Background color of sticky scroll in the editor"));Y("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:ke.fromHex("#0F4A85").transparent(.1)},S("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor"));Y("editorStickyScroll.border",{dark:null,light:null,hcDark:Sn,hcLight:Sn},S("editorStickyScrollBorder","Border color of sticky scroll in the editor"));Y("editorStickyScroll.shadow",fU,S("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor"));const cc=Y("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:ke.white},S("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),lA=Y("editorWidget.foreground",Hn,S("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),Ffe=Y("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:Sn,hcLight:Sn},S("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));Y("editorWidget.resizeBorder",null,S("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget."));Y("editorError.background",null,S("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const gU=Y("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},S("editorError.foreground","Foreground color of error squigglies in the editor."));Y("editorError.border",{dark:null,light:null,hcDark:ke.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},S("errorBorder","If set, color of double underlines for errors in the editor."));const VHe=Y("editorWarning.background",null,S("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Rm=Y("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},S("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),hD=Y("editorWarning.border",{dark:null,light:null,hcDark:ke.fromHex("#FFCC00").transparent(.8),hcLight:ke.fromHex("#FFCC00").transparent(.8)},S("warningBorder","If set, color of double underlines for warnings in the editor."));Y("editorInfo.background",null,S("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const s1=Y("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},S("editorInfo.foreground","Foreground color of info squigglies in the editor.")),fD=Y("editorInfo.border",{dark:null,light:null,hcDark:ke.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},S("infoBorder","If set, color of double underlines for infos in the editor.")),WHe=Y("editorHint.foreground",{dark:ke.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},S("editorHint.foreground","Foreground color of hint squigglies in the editor."));Y("editorHint.border",{dark:null,light:null,hcDark:ke.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},S("hintBorder","If set, color of double underlines for hints in the editor."));Y("editorLink.activeForeground",{dark:"#4E94CE",light:ke.blue,hcDark:ke.cyan,hcLight:"#292929"},S("activeLinkForeground","Color of active links."));const rv=Y("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},S("editorSelectionBackground","Color of the editor selection.")),HHe=Y("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:ke.white},S("editorSelectionForeground","Color of the selected text for high contrast.")),Bfe=Y("editor.inactiveSelectionBackground",{light:Kt(rv,.5),dark:Kt(rv,.5),hcDark:Kt(rv,.7),hcLight:Kt(rv,.5)},S("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),Vfe=Y("editor.selectionHighlightBackground",{light:kZ(rv,mu,.3,.6),dark:kZ(rv,mu,.3,.6),hcDark:null,hcLight:null},S("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);Y("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:Gi,hcLight:Gi},S("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));Y("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},S("editorFindMatch","Color of the current search match."));Y("editor.findMatchForeground",null,S("editorFindMatchForeground","Text color of the current search match."));const Wg=Y("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},S("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0);Y("editor.findMatchHighlightForeground",null,S("findMatchHighlightForeground","Foreground color of the other search matches."),!0);Y("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},S("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);Y("editor.findMatchBorder",{light:null,dark:null,hcDark:Gi,hcLight:Gi},S("editorFindMatchBorder","Border color of the current search match."));const ov=Y("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:Gi,hcLight:Gi},S("findMatchHighlightBorder","Border color of the other search matches."));Y("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:Kt(Gi,.4),hcLight:Kt(Gi,.4)},S("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);Y("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},S("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const EZ=Y("editorHoverWidget.background",cc,S("hoverBackground","Background color of the editor hover."));Y("editorHoverWidget.foreground",lA,S("hoverForeground","Foreground color of the editor hover."));const UHe=Y("editorHoverWidget.border",Ffe,S("hoverBorder","Border color of the editor hover."));Y("editorHoverWidget.statusBarBackground",{dark:au(EZ,.2),light:A1(EZ,.05),hcDark:cc,hcLight:cc},S("statusBarBackground","Background color of the editor hover status bar."));const Wfe=Y("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:ke.white,hcLight:ke.black},S("editorInlayHintForeground","Foreground color of inline hints")),Hfe=Y("editorInlayHint.background",{dark:Kt(dL,.1),light:Kt(dL,.1),hcDark:Kt(ke.white,.1),hcLight:Kt(dL,.1)},S("editorInlayHintBackground","Background color of inline hints"));Y("editorInlayHint.typeForeground",Wfe,S("editorInlayHintForegroundTypes","Foreground color of inline hints for types"));Y("editorInlayHint.typeBackground",Hfe,S("editorInlayHintBackgroundTypes","Background color of inline hints for types"));Y("editorInlayHint.parameterForeground",Wfe,S("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters"));Y("editorInlayHint.parameterBackground",Hfe,S("editorInlayHintBackgroundParameter","Background color of inline hints for parameters"));const zHe=Y("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},S("editorLightBulbForeground","The color used for the lightbulb actions icon."));Y("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},S("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon."));Y("editorLightBulbAi.foreground",zHe,S("editorLightBulbAiForeground","The color used for the lightbulb AI icon."));Y("editor.snippetTabstopHighlightBackground",{dark:new ke(new gn(124,124,124,.3)),light:new ke(new gn(10,50,100,.2)),hcDark:new ke(new gn(124,124,124,.3)),hcLight:new ke(new gn(10,50,100,.2))},S("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));Y("editor.snippetTabstopHighlightBorder",null,S("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));Y("editor.snippetFinalTabstopHighlightBackground",null,S("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));Y("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new ke(new gn(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},S("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));const U8=new ke(new gn(155,185,85,.2)),z8=new ke(new gn(255,0,0,.2)),jHe=Y("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},S("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),$He=Y("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},S("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);Y("diffEditor.insertedLineBackground",{dark:U8,light:U8,hcDark:null,hcLight:null},S("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0);Y("diffEditor.removedLineBackground",{dark:z8,light:z8,hcDark:null,hcLight:null},S("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);Y("diffEditorGutter.insertedLineBackground",null,S("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted."));Y("diffEditorGutter.removedLineBackground",null,S("diffEditorRemovedLineGutter","Background color for the margin where lines got removed."));const qHe=Y("diffEditorOverview.insertedForeground",null,S("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),KHe=Y("diffEditorOverview.removedForeground",null,S("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content."));Y("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},S("diffEditorInsertedOutline","Outline color for the text that got inserted."));Y("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},S("diffEditorRemovedOutline","Outline color for text that got removed."));Y("diffEditor.border",{dark:null,light:null,hcDark:Sn,hcLight:Sn},S("diffEditorBorder","Border color between the two text editors."));Y("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},S("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."));Y("diffEditor.unchangedRegionBackground","sideBar.background",S("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor."));Y("diffEditor.unchangedRegionForeground","foreground",S("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor."));Y("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},S("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor."));const q2=Y("widget.shadow",{dark:Kt(ke.black,.36),light:Kt(ke.black,.16),hcDark:null,hcLight:null},S("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),GHe=Y("widget.border",{dark:null,light:null,hcDark:Sn,hcLight:Sn},S("widgetBorder","Border color of widgets such as find/replace inside the editor.")),TZ=Y("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},S("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));Y("toolbar.hoverOutline",{dark:null,light:null,hcDark:Gi,hcLight:Gi},S("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));Y("toolbar.activeBackground",{dark:au(TZ,.1),light:A1(TZ,.1),hcDark:null,hcLight:null},S("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));const YHe=Y("breadcrumb.foreground",Kt(Hn,.8),S("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),QHe=Y("breadcrumb.background",mu,S("breadcrumbsBackground","Background color of breadcrumb items.")),LZ=Y("breadcrumb.focusForeground",{light:A1(Hn,.2),dark:au(Hn,.1),hcDark:au(Hn,.1),hcLight:au(Hn,.1)},S("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),XHe=Y("breadcrumb.activeSelectionForeground",{light:A1(Hn,.2),dark:au(Hn,.1),hcDark:au(Hn,.1),hcLight:au(Hn,.1)},S("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));Y("breadcrumbPicker.background",cc,S("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const Ufe=.5,IZ=ke.fromHex("#40C8AE").transparent(Ufe),DZ=ke.fromHex("#40A6FF").transparent(Ufe),NZ=ke.fromHex("#606060").transparent(.4),mU=.4,Jb=1,j8=Y("merge.currentHeaderBackground",{dark:IZ,light:IZ,hcDark:null,hcLight:null},S("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);Y("merge.currentContentBackground",Kt(j8,mU),S("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const $8=Y("merge.incomingHeaderBackground",{dark:DZ,light:DZ,hcDark:null,hcLight:null},S("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);Y("merge.incomingContentBackground",Kt($8,mU),S("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const q8=Y("merge.commonHeaderBackground",{dark:NZ,light:NZ,hcDark:null,hcLight:null},S("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);Y("merge.commonContentBackground",Kt(q8,mU),S("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const ey=Y("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},S("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));Y("editorOverviewRuler.currentContentForeground",{dark:Kt(j8,Jb),light:Kt(j8,Jb),hcDark:ey,hcLight:ey},S("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));Y("editorOverviewRuler.incomingContentForeground",{dark:Kt($8,Jb),light:Kt($8,Jb),hcDark:ey,hcLight:ey},S("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));Y("editorOverviewRuler.commonContentForeground",{dark:Kt(q8,Jb),light:Kt(q8,Jb),hcDark:ey,hcLight:ey},S("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));Y("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},S("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0);Y("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",S("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const ZHe=Y("problemsErrorIcon.foreground",gU,S("problemsErrorIconForeground","The color used for the problems error icon.")),JHe=Y("problemsWarningIcon.foreground",Rm,S("problemsWarningIconForeground","The color used for the problems warning icon.")),eUe=Y("problemsInfoIcon.foreground",s1,S("problemsInfoIconForeground","The color used for the problems info icon.")),tUe=Y("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},S("minimapFindMatchHighlight","Minimap marker color for find matches."),!0);Y("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},S("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0);const RZ=Y("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},S("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),nUe=Y("minimap.infoHighlight",{dark:s1,light:s1,hcDark:fD,hcLight:fD},S("minimapInfo","Minimap marker color for infos.")),iUe=Y("minimap.warningHighlight",{dark:Rm,light:Rm,hcDark:hD,hcLight:hD},S("overviewRuleWarning","Minimap marker color for warnings.")),sUe=Y("minimap.errorHighlight",{dark:new ke(new gn(255,18,18,.7)),light:new ke(new gn(255,18,18,.7)),hcDark:new ke(new gn(255,50,50,1)),hcLight:"#B5200D"},S("minimapError","Minimap marker color for errors.")),rUe=Y("minimap.background",null,S("minimapBackground","Minimap background color.")),oUe=Y("minimap.foregroundOpacity",ke.fromHex("#000f"),S("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));Y("minimapSlider.background",Kt(Pfe,.5),S("minimapSliderBackground","Minimap slider background color."));Y("minimapSlider.hoverBackground",Kt(Mfe,.5),S("minimapSliderHoverBackground","Minimap slider background color when hovering."));Y("minimapSlider.activeBackground",Kt(Ofe,.5),S("minimapSliderActiveBackground","Minimap slider background color when clicked on."));Y("charts.foreground",Hn,S("chartsForeground","The foreground color used in charts."));Y("charts.lines",Kt(Hn,.5),S("chartsLines","The color used for horizontal lines in charts."));Y("charts.red",gU,S("chartsRed","The red color used in chart visualizations."));Y("charts.blue",s1,S("chartsBlue","The blue color used in chart visualizations."));Y("charts.yellow",Rm,S("chartsYellow","The yellow color used in chart visualizations."));Y("charts.orange",tUe,S("chartsOrange","The orange color used in chart visualizations."));Y("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},S("chartsGreen","The green color used in chart visualizations."));Y("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},S("chartsPurple","The purple color used in chart visualizations."));const aUe=Y("input.background",{dark:"#3C3C3C",light:ke.white,hcDark:ke.black,hcLight:ke.white},S("inputBoxBackground","Input box background.")),lUe=Y("input.foreground",Hn,S("inputBoxForeground","Input box foreground.")),cUe=Y("input.border",{dark:null,light:null,hcDark:Sn,hcLight:Sn},S("inputBoxBorder","Input box border.")),zfe=Y("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:Sn,hcLight:Sn},S("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),uUe=Y("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},S("inputOption.hoverBackground","Background color of activated options in input fields.")),jfe=Y("inputOption.activeBackground",{dark:Kt(Nd,.4),light:Kt(Nd,.2),hcDark:ke.transparent,hcLight:ke.transparent},S("inputOption.activeBackground","Background hover color of options in input fields.")),$fe=Y("inputOption.activeForeground",{dark:ke.white,light:ke.black,hcDark:Hn,hcLight:Hn},S("inputOption.activeForeground","Foreground color of activated options in input fields."));Y("input.placeholderForeground",{light:Kt(Hn,.5),dark:Kt(Hn,.5),hcDark:Kt(Hn,.7),hcLight:Kt(Hn,.7)},S("inputPlaceholderForeground","Input box foreground color for placeholder text."));const dUe=Y("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:ke.black,hcLight:ke.white},S("inputValidationInfoBackground","Input validation background color for information severity.")),hUe=Y("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:Hn},S("inputValidationInfoForeground","Input validation foreground color for information severity.")),fUe=Y("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:Sn,hcLight:Sn},S("inputValidationInfoBorder","Input validation border color for information severity.")),gUe=Y("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:ke.black,hcLight:ke.white},S("inputValidationWarningBackground","Input validation background color for warning severity.")),mUe=Y("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:Hn},S("inputValidationWarningForeground","Input validation foreground color for warning severity.")),pUe=Y("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:Sn,hcLight:Sn},S("inputValidationWarningBorder","Input validation border color for warning severity.")),_Ue=Y("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:ke.black,hcLight:ke.white},S("inputValidationErrorBackground","Input validation background color for error severity.")),vUe=Y("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:Hn},S("inputValidationErrorForeground","Input validation foreground color for error severity.")),bUe=Y("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:Sn,hcLight:Sn},S("inputValidationErrorBorder","Input validation border color for error severity.")),cA=Y("dropdown.background",{dark:"#3C3C3C",light:ke.white,hcDark:ke.black,hcLight:ke.white},S("dropdownBackground","Dropdown background.")),yUe=Y("dropdown.listBackground",{dark:null,light:null,hcDark:ke.black,hcLight:ke.white},S("dropdownListBackground","Dropdown list background.")),pU=Y("dropdown.foreground",{dark:"#F0F0F0",light:Hn,hcDark:ke.white,hcLight:Hn},S("dropdownForeground","Dropdown foreground.")),_U=Y("dropdown.border",{dark:cA,light:"#CECECE",hcDark:Sn,hcLight:Sn},S("dropdownBorder","Dropdown border.")),qfe=Y("button.foreground",ke.white,S("buttonForeground","Button foreground color.")),wUe=Y("button.separator",Kt(qfe,.4),S("buttonSeparator","Button separator color.")),_C=Y("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},S("buttonBackground","Button background color.")),CUe=Y("button.hoverBackground",{dark:au(_C,.2),light:A1(_C,.2),hcDark:_C,hcLight:_C},S("buttonHoverBackground","Button background color when hovering.")),SUe=Y("button.border",Sn,S("buttonBorder","Button border color.")),kUe=Y("button.secondaryForeground",{dark:ke.white,light:ke.white,hcDark:ke.white,hcLight:Hn},S("buttonSecondaryForeground","Secondary button foreground color.")),K8=Y("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:ke.white},S("buttonSecondaryBackground","Secondary button background color.")),xUe=Y("button.secondaryHoverBackground",{dark:au(K8,.2),light:A1(K8,.2),hcDark:null,hcLight:null},S("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),vC=Y("radio.activeForeground",$fe,S("radioActiveForeground","Foreground color of active radio option.")),EUe=Y("radio.activeBackground",jfe,S("radioBackground","Background color of active radio option.")),TUe=Y("radio.activeBorder",zfe,S("radioActiveBorder","Border color of the active radio option.")),LUe=Y("radio.inactiveForeground",null,S("radioInactiveForeground","Foreground color of inactive radio option.")),IUe=Y("radio.inactiveBackground",null,S("radioInactiveBackground","Background color of inactive radio option.")),DUe=Y("radio.inactiveBorder",{light:Kt(vC,.2),dark:Kt(vC,.2),hcDark:Kt(vC,.4),hcLight:Kt(vC,.2)},S("radioInactiveBorder","Border color of the inactive radio option.")),NUe=Y("radio.inactiveHoverBackground",uUe,S("radioHoverBackground","Background color of inactive active radio option when hovering.")),RUe=Y("checkbox.background",cA,S("checkbox.background","Background color of checkbox widget."));Y("checkbox.selectBackground",cc,S("checkbox.select.background","Background color of checkbox widget when the element it's in is selected."));const AUe=Y("checkbox.foreground",pU,S("checkbox.foreground","Foreground color of checkbox widget.")),PUe=Y("checkbox.border",_U,S("checkbox.border","Border color of checkbox widget."));Y("checkbox.selectBorder",H8,S("checkbox.select.border","Border color of checkbox widget when the element it's in is selected."));const MUe=Y("keybindingLabel.background",{dark:new ke(new gn(128,128,128,.17)),light:new ke(new gn(221,221,221,.4)),hcDark:ke.transparent,hcLight:ke.transparent},S("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),OUe=Y("keybindingLabel.foreground",{dark:ke.fromHex("#CCCCCC"),light:ke.fromHex("#555555"),hcDark:ke.white,hcLight:Hn},S("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),FUe=Y("keybindingLabel.border",{dark:new ke(new gn(51,51,51,.6)),light:new ke(new gn(204,204,204,.4)),hcDark:new ke(new gn(111,195,223)),hcLight:Sn},S("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),BUe=Y("keybindingLabel.bottomBorder",{dark:new ke(new gn(68,68,68,.6)),light:new ke(new gn(187,187,187,.4)),hcDark:new ke(new gn(111,195,223)),hcLight:Hn},S("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),VUe=Y("list.focusBackground",null,S("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),WUe=Y("list.focusForeground",null,S("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),HUe=Y("list.focusOutline",{dark:Nd,light:Nd,hcDark:Gi,hcLight:Gi},S("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),UUe=Y("list.focusAndSelectionOutline",null,S("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),r1=Y("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:ke.fromHex("#0F4A85").transparent(.1)},S("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Ik=Y("list.activeSelectionForeground",{dark:ke.white,light:ke.white,hcDark:null,hcLight:null},S("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Kfe=Y("list.activeSelectionIconForeground",null,S("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),zUe=Y("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:ke.fromHex("#0F4A85").transparent(.1)},S("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),jUe=Y("list.inactiveSelectionForeground",null,S("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),$Ue=Y("list.inactiveSelectionIconForeground",null,S("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),qUe=Y("list.inactiveFocusBackground",null,S("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),KUe=Y("list.inactiveFocusOutline",null,S("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Gfe=Y("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:ke.white.transparent(.1),hcLight:ke.fromHex("#0F4A85").transparent(.1)},S("listHoverBackground","List/Tree background when hovering over items using the mouse.")),Yfe=Y("list.hoverForeground",null,S("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),GUe=Y("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},S("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),YUe=Y("list.dropBetweenBackground",{dark:H8,light:H8,hcDark:null,hcLight:null},S("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),YE=Y("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Nd,hcLight:Nd},S("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree."));Y("list.focusHighlightForeground",{dark:YE,light:MHe(r1,YE,"#BBE7FF"),hcDark:YE,hcLight:YE},S("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));Y("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},S("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));Y("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},S("listErrorForeground","Foreground color of list items containing errors."));Y("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},S("listWarningForeground","Foreground color of list items containing warnings."));const QUe=Y("listFilterWidget.background",{light:A1(cc,0),dark:au(cc,0),hcDark:cc,hcLight:cc},S("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),XUe=Y("listFilterWidget.outline",{dark:ke.transparent,light:ke.transparent,hcDark:"#f38518",hcLight:"#007ACC"},S("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),ZUe=Y("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:Sn,hcLight:Sn},S("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),JUe=Y("listFilterWidget.shadow",q2,S("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees."));Y("list.filterMatchBackground",{dark:Wg,light:Wg,hcDark:null,hcLight:null},S("listFilterMatchHighlight","Background color of the filtered match."));Y("list.filterMatchBorder",{dark:ov,light:ov,hcDark:Sn,hcLight:Gi},S("listFilterMatchHighlightBorder","Border color of the filtered match."));Y("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},S("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized."));const Qfe=Y("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},S("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),eze=Y("tree.inactiveIndentGuidesStroke",Kt(Qfe,.4),S("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),tze=Y("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},S("tableColumnsBorder","Table border color between columns.")),nze=Y("tree.tableOddRowsBackground",{dark:Kt(Hn,.04),light:Kt(Hn,.04),hcDark:null,hcLight:null},S("tableOddRowsBackgroundColor","Background color for odd table rows."));Y("editorActionList.background",cc,S("editorActionListBackground","Action List background color."));Y("editorActionList.foreground",lA,S("editorActionListForeground","Action List foreground color."));Y("editorActionList.focusForeground",Ik,S("editorActionListFocusForeground","Action List foreground color for the focused item."));Y("editorActionList.focusBackground",r1,S("editorActionListFocusBackground","Action List background color for the focused item."));const ize=Y("menu.border",{dark:null,light:null,hcDark:Sn,hcLight:Sn},S("menuBorder","Border color of menus.")),sze=Y("menu.foreground",pU,S("menuForeground","Foreground color of menu items.")),rze=Y("menu.background",cA,S("menuBackground","Background color of menu items.")),oze=Y("menu.selectionForeground",Ik,S("menuSelectionForeground","Foreground color of the selected menu item in menus.")),aze=Y("menu.selectionBackground",r1,S("menuSelectionBackground","Background color of the selected menu item in menus.")),lze=Y("menu.selectionBorder",{dark:null,light:null,hcDark:Gi,hcLight:Gi},S("menuSelectionBorder","Border color of the selected menu item in menus.")),cze=Y("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:Sn,hcLight:Sn},S("menuSeparatorBackground","Color of a separator menu item in menus.")),AZ=Y("quickInput.background",cc,S("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),uze=Y("quickInput.foreground",lA,S("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),dze=Y("quickInputTitle.background",{dark:new ke(new gn(255,255,255,.105)),light:new ke(new gn(0,0,0,.06)),hcDark:"#000000",hcLight:ke.white},S("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),Xfe=Y("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:ke.white,hcLight:"#0F4A85"},S("pickerGroupForeground","Quick picker color for grouping labels.")),hze=Y("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:ke.white,hcLight:"#0F4A85"},S("pickerGroupBorder","Quick picker color for grouping borders.")),PZ=Y("quickInput.list.focusBackground",null,"",void 0,S("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),G8=Y("quickInputList.focusForeground",Ik,S("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),Zfe=Y("quickInputList.focusIconForeground",Kfe,S("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),Y8=Y("quickInputList.focusBackground",{dark:SZ(PZ,r1),light:SZ(PZ,r1),hcDark:null,hcLight:null},S("quickInput.listFocusBackground","Quick picker background color for the focused item."));Y("search.resultsInfoForeground",{light:Hn,dark:Kt(Hn,.65),hcDark:Hn,hcLight:Hn},S("search.resultsInfoForeground","Color of the text in the search viewlet's completion message."));Y("searchEditor.findMatchBackground",{light:Kt(Wg,.66),dark:Kt(Wg,.66),hcDark:Wg,hcLight:Wg},S("searchEditor.queryMatch","Color of the Search Editor query matches."));Y("searchEditor.findMatchBorder",{light:Kt(ov,.66),dark:Kt(ov,.66),hcDark:ov,hcLight:ov},S("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));var fze=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},MZ=function(i,e){return function(t,n){e(t,n,i)}};const K2=nn("hoverService");let Dk=class extends be{get delay(){return this.isInstantlyHovering()?0:this._delay}constructor(e,t,n={},s,r){super(),this.placement=e,this.instantHover=t,this.overrideOptions=n,this.configurationService=s,this.hoverService=r,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new Ze),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}showHover(e,t){const n=typeof this.overrideOptions=="function"?this.overrideOptions(e,t):this.overrideOptions;this.hoverDisposables.clear();const s=Zs(e.target)?[e.target]:e.target.targetElements;for(const o of s)this.hoverDisposables.add(Vs(o,"keydown",a=>{a.equals(9)&&this.hoverService.hideHover()}));const r=Zs(e.content)?void 0:e.content.toString();return this.hoverService.showHover({...e,...n,persistence:{hideOnKeyDown:!0,...n.persistence},id:r,appearance:{...e.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...n.appearance}},t)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};Dk=fze([MZ(3,Oi),MZ(4,K2)],Dk);const G2=nn("contextViewService"),Rf=nn("contextMenuService"),yr=nn("keybindingService");class uA{constructor(){this._hooks=new Ze,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,n,s,r){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=s,this._onStopCallback=r;let o=e;try{e.setPointerCapture(t),this._hooks.add(Dt(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{o=rt(e)}this._hooks.add(ge(o,De.POINTER_MOVE,a=>{if(a.buttons!==n){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(ge(o,De.POINTER_UP,a=>this.stopMonitoring(!0)))}}function Fi(i,e,t){let n=null,s=null;if(typeof t.value=="function"?(n="value",s=t.value,s.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",s=t.get),!s)throw new Error("not supported");const r=`$memoize$${e}`;t[n]=function(...o){return this.hasOwnProperty(r)||Object.defineProperty(this,r,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,o)}),this[r]}}var gze=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ei;(function(i){i.Tap="-monaco-gesturetap",i.Change="-monaco-gesturechange",i.Start="-monaco-gesturestart",i.End="-monaco-gesturesend",i.Contextmenu="-monaco-gesturecontextmenu"})(ei||(ei={}));const dr=class dr extends be{constructor(){super(),this.dispatched=!1,this.targets=new ba,this.ignoreTargets=new ba,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(Le.runAndSubscribe($4,({window:e,disposables:t})=>{t.add(ge(e.document,"touchstart",n=>this.onTouchStart(n),{passive:!1})),t.add(ge(e.document,"touchend",n=>this.onTouchEnd(e,n))),t.add(ge(e.document,"touchmove",n=>this.onTouchMove(n),{passive:!1}))},{window:Kn,disposables:this._store}))}static addTarget(e){if(!dr.isTouchDevice())return be.None;dr.INSTANCE||(dr.INSTANCE=new dr);const t=dr.INSTANCE.targets.push(e);return Dt(t)}static ignoreTarget(e){if(!dr.isTouchDevice())return be.None;dr.INSTANCE||(dr.INSTANCE=new dr);const t=dr.INSTANCE.ignoreTargets.push(e);return Dt(t)}static isTouchDevice(){return"ontouchstart"in Kn||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,s=e.targetTouches.length;n<s;n++){const r=e.targetTouches.item(n);this.activeTouches[r.identifier]={id:r.identifier,initialTarget:r.target,initialTimeStamp:t,initialPageX:r.pageX,initialPageY:r.pageY,rollingTimestamps:[t],rollingPageX:[r.pageX],rollingPageY:[r.pageY]};const o=this.newGestureEvent(ei.Start,r.target);o.pageX=r.pageX,o.pageY=r.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){const n=Date.now(),s=Object.keys(this.activeTouches).length;for(let r=0,o=t.changedTouches.length;r<o;r++){const a=t.changedTouches.item(r);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}const l=this.activeTouches[a.identifier],c=Date.now()-l.initialTimeStamp;if(c<dr.HOLD_DELAY&&Math.abs(l.initialPageX-bl(l.rollingPageX))<30&&Math.abs(l.initialPageY-bl(l.rollingPageY))<30){const u=this.newGestureEvent(ei.Tap,l.initialTarget);u.pageX=bl(l.rollingPageX),u.pageY=bl(l.rollingPageY),this.dispatchEvent(u)}else if(c>=dr.HOLD_DELAY&&Math.abs(l.initialPageX-bl(l.rollingPageX))<30&&Math.abs(l.initialPageY-bl(l.rollingPageY))<30){const u=this.newGestureEvent(ei.Contextmenu,l.initialTarget);u.pageX=bl(l.rollingPageX),u.pageY=bl(l.rollingPageY),this.dispatchEvent(u)}else if(s===1){const u=bl(l.rollingPageX),d=bl(l.rollingPageY),h=bl(l.rollingTimestamps)-l.rollingTimestamps[0],g=u-l.rollingPageX[0],p=d-l.rollingPageY[0],_=[...this.targets].filter(v=>l.initialTarget instanceof Node&&v.contains(l.initialTarget));this.inertia(e,_,n,Math.abs(g)/h,g>0?1:-1,u,Math.abs(p)/h,p>0?1:-1,d)}this.dispatchEvent(this.newGestureEvent(ei.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===ei.Tap){const t=new Date().getTime();let n=0;t-this._lastSetTapCountTime>dr.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===ei.Change||e.type===ei.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const n of this.ignoreTargets)if(n.contains(e.initialTarget))return;const t=[];for(const n of this.targets)if(n.contains(e.initialTarget)){let s=0,r=e.initialTarget;for(;r&&r!==n;)s++,r=r.parentElement;t.push([s,n])}t.sort((n,s)=>n[0]-s[0]);for(const[n,s]of t)s.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,n,s,r,o,a,l,c){this.handle=xa(e,()=>{const u=Date.now(),d=u-n;let h=0,g=0,p=!0;s+=dr.SCROLL_FRICTION*d,a+=dr.SCROLL_FRICTION*d,s>0&&(p=!1,h=r*s*d),a>0&&(p=!1,g=l*a*d);const _=this.newGestureEvent(ei.Change);_.translationX=h,_.translationY=g,t.forEach(v=>v.dispatchEvent(_)),p||this.inertia(e,t,u,s,r,o+h,a,l,c+g)})}onTouchMove(e){const t=Date.now();for(let n=0,s=e.changedTouches.length;n<s;n++){const r=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("end of an UNKNOWN touch",r);continue}const o=this.activeTouches[r.identifier],a=this.newGestureEvent(ei.Change,o.initialTarget);a.translationX=r.pageX-bl(o.rollingPageX),a.translationY=r.pageY-bl(o.rollingPageY),a.pageX=r.pageX,a.pageY=r.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(r.pageX),o.rollingPageY.push(r.pageY),o.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};dr.SCROLL_FRICTION=-.005,dr.HOLD_DELAY=700,dr.CLEAR_TAP_COUNT_TIME=400;let To=dr;gze([Fi],To,"isTouchDevice",null);let Af=class extends be{onclick(e,t){this._register(ge(e,De.CLICK,n=>t(new iu(rt(e),n))))}onmousedown(e,t){this._register(ge(e,De.MOUSE_DOWN,n=>t(new iu(rt(e),n))))}onmouseover(e,t){this._register(ge(e,De.MOUSE_OVER,n=>t(new iu(rt(e),n))))}onmouseleave(e,t){this._register(ge(e,De.MOUSE_LEAVE,n=>t(new iu(rt(e),n))))}onkeydown(e,t){this._register(ge(e,De.KEY_DOWN,n=>t(new hi(n))))}onkeyup(e,t){this._register(ge(e,De.KEY_UP,n=>t(new hi(n))))}oninput(e,t){this._register(ge(e,De.INPUT,t))}onblur(e,t){this._register(ge(e,De.BLUR,t))}onfocus(e,t){this._register(ge(e,De.FOCUS,t))}ignoreGesture(e){return To.ignoreTarget(e)}};const ty=11;class mze extends Af{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...dn.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=ty+"px",this.domNode.style.height=ty+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new uA),this._register(Vs(this.bgDomNode,De.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(Vs(this.domNode,De.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new jH),this._pointerdownScheduleRepeatTimer=this._register(new x1)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,rt(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class pze extends be{constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new x1)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)==null||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)==null||t.setClassName(this._invisibleClassName+(e?" fade":"")))}}const _ze=140;class Jfe extends Af{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new pze(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new uA),this._shouldRender=!0,this.domNode=pn(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(ge(this.domNode.domNode,De.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new mze(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,s){this.slider=pn(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(ge(this.slider.domNode,De.POINTER_DOWN,r=>{r.button===0&&(r.preventDefault(),this._sliderPointerDown(r))})),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),s=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderPointerPosition(e);n<=r&&r<=s?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,n=e.offsetY;else{const r=Nl(this.domNode.domNode);t=e.pageX-r.left,n=e.pageY-r.top}const s=this._pointerDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>{const o=this._sliderOrthogonalPointerPosition(r),a=Math.abs(o-n);if(Sa&&a>_ze){this._setDesiredScrollPositionNow(s.getScrollPosition());return}const c=this._sliderPointerPosition(r)-t;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const vze=20;class ny{constructor(e,t,n,s,r,o){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=s,this._scrollSize=r,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new ny(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,s,r){const o=Math.max(0,n-e),a=Math.max(0,o-2*t),l=s>0&&s>n;if(!l)return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(vze,Math.floor(n*a/s))),u=(a-c)/(s-n),d=r*u;return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:u,computedSliderPosition:Math.round(d)}}_refreshComputedValues(){const e=ny._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class bze extends Jfe{constructor(e,t,n){const s=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new ny(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,s.width,s.scrollWidth,r.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const o=(t.arrowSize-ty)/2,a=(t.horizontalScrollbarSize-ty)/2;this._createArrow({className:"scra",icon:Ke.scrollbarButtonLeft,top:a,left:o,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new e1(null,1,0))}),this._createArrow({className:"scra",icon:Ke.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:o,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new e1(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class yze extends Jfe{constructor(e,t,n){const s=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new ny(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,s.height,s.scrollHeight,r.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const o=(t.arrowSize-ty)/2,a=(t.verticalScrollbarSize-ty)/2;this._createArrow({className:"scra",icon:Ke.scrollbarButtonUp,top:o,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new e1(null,0,1))}),this._createArrow({className:"scra",icon:Ke.scrollbarButtonDown,top:void 0,left:a,bottom:o,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new e1(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class gD{constructor(e,t,n,s,r,o,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,n=n|0,s=s|0,r=r|0,o=o|0,a=a|0),this.rawScrollLeft=s,this.rawScrollTop=a,t<0&&(t=0),s+t>n&&(s=n-t),s<0&&(s=0),r<0&&(r=0),a+r>o&&(a=o-r),a<0&&(a=0),this.width=t,this.scrollWidth=n,this.scrollLeft=s,this.height=r,this.scrollHeight=o,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new gD(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new gD(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,s=this.scrollWidth!==e.scrollWidth,r=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:s,scrollLeftChanged:r,heightChanged:o,scrollHeightChanged:a,scrollTopChanged:l}}}class zy extends be{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new se),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new gD(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var s;const n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),(s=this._smoothScrolling)==null||s.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let s;t?s=new Nk(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):s=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{const n=this._state.withScrollPosition(e);this._smoothScrolling=Nk.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}class OZ{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}}function e6(i,e){const t=e-i;return function(n){return i+t*Sze(n)}}function wze(i,e,t){return function(n){return n<t?i(n/t):e((n-t)/(1-t))}}class Nk{constructor(e,t,n,s){this.from=e,this.to=t,this.duration=s,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let r,o;return e<t?(r=e+.75*n,o=t-.75*n):(r=e-.75*n,o=t+.75*n),wze(e6(e,r),e6(o,t),.33)}return e6(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const n=this.scrollLeft(t),s=this.scrollTop(t);return new OZ(n,s,!1)}return new OZ(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return Nk.start(e,t,n)}static start(e,t,n){n=n+10;const s=Date.now()-10;return new Nk(e,t,s,n)}}function Cze(i){return Math.pow(i,3)}function Sze(i){return 1-Cze(1-i)}const kze=500,FZ=50;class xze{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}}const YN=class YN{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,s=this._rear;do{const r=s===this._front?e:Math.pow(2,-n);if(e-=r,t+=this._memory[s].score*r,s===this._front)break;s=(this._capacity+s-1)%this._capacity,n++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(F2){const t=rt(e.browserEvent),n=U7e(t);this.accept(Date.now(),e.deltaX*n,e.deltaY*n)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,n){let s=null;const r=new xze(e,t,n);this._front===-1&&this._rear===-1?(this._memory[0]=r,this._front=0,this._rear=0):(s=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=r),r.score=this._computeScore(r,s)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let n=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(n+=.25),t){const s=Math.abs(e.deltaX),r=Math.abs(e.deltaY),o=Math.abs(t.deltaX),a=Math.abs(t.deltaY),l=Math.max(Math.min(s,o),1),c=Math.max(Math.min(r,a),1),u=Math.max(s,o),d=Math.max(r,a);u%l===0&&d%c===0&&(n-=.5)}return Math.min(Math.max(n,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};YN.INSTANCE=new YN;let mD=YN;class vU extends Af{get options(){return this._options}constructor(e,t,n){super(),this._onScroll=this._register(new se),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new se),e.style.overflow="hidden",this._options=Tze(t),this._scrollable=n,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));const s={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new yze(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new bze(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=pn(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=pn(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=pn(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onmouseleave(this._listenOnDomNode,r=>this._onMouseLeave(r)),this._hideTimeout=this._register(new x1),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=br(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,rn&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new e1(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=br(this._mouseWheelToDispose),e)){const n=s=>{this._onMouseWheel(new e1(s))};this._mouseWheelToDispose.push(ge(this._listenOnDomNode,De.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){var r;if((r=e.browserEvent)!=null&&r.defaultPrevented)return;const t=mD.INSTANCE;t.acceptStandardWheelEvent(e);let n=!1;if(e.deltaY||e.deltaX){let o=e.deltaY*this._options.mouseWheelScrollSensitivity,a=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&a+o===0?a=o=0:Math.abs(o)>=Math.abs(a)?a=0:o=0),this._options.flipAxes&&([o,a]=[a,o]);const l=!rn&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||l)&&!a&&(a=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(a=a*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);const c=this._scrollable.getFutureScrollPosition();let u={};if(o){const d=FZ*o,h=c.scrollTop-(d<0?Math.floor(d):Math.ceil(d));this._verticalScrollbar.writeScrollPosition(u,h)}if(a){const d=FZ*a,h=c.scrollLeft-(d<0?Math.floor(d):Math.ceil(d));this._horizontalScrollbar.writeScrollPosition(u,h)}u=this._scrollable.validateScrollPosition(u),(c.scrollLeft!==u.scrollLeft||c.scrollTop!==u.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(u):this._scrollable.setScrollPositionNow(u),n=!0)}let s=n;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,s=n?" left":"",r=t?" top":"",o=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${o}${r}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),kze)}}class Eze extends vU{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new zy({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:s=>xa(rt(e),s)});super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class dA extends vU{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class bU extends vU{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new zy({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:s=>xa(rt(e),s)});super(e,t,n),this._register(n),this._element=e,this._register(this.onScroll(s=>{s.scrollTopChanged&&(this._element.scrollTop=s.scrollTop),s.scrollLeftChanged&&(this._element.scrollLeft=s.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function Tze(i){const e={lazyRender:typeof i.lazyRender<"u"?i.lazyRender:!1,className:typeof i.className<"u"?i.className:"",useShadows:typeof i.useShadows<"u"?i.useShadows:!0,handleMouseWheel:typeof i.handleMouseWheel<"u"?i.handleMouseWheel:!0,flipAxes:typeof i.flipAxes<"u"?i.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof i.consumeMouseWheelIfScrollbarIsNeeded<"u"?i.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof i.alwaysConsumeMouseWheel<"u"?i.alwaysConsumeMouseWheel:!1,scrollYToX:typeof i.scrollYToX<"u"?i.scrollYToX:!1,mouseWheelScrollSensitivity:typeof i.mouseWheelScrollSensitivity<"u"?i.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof i.fastScrollSensitivity<"u"?i.fastScrollSensitivity:5,scrollPredominantAxis:typeof i.scrollPredominantAxis<"u"?i.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof i.mouseWheelSmoothScroll<"u"?i.mouseWheelSmoothScroll:!0,arrowSize:typeof i.arrowSize<"u"?i.arrowSize:11,listenOnDomNode:typeof i.listenOnDomNode<"u"?i.listenOnDomNode:null,horizontal:typeof i.horizontal<"u"?i.horizontal:1,horizontalScrollbarSize:typeof i.horizontalScrollbarSize<"u"?i.horizontalScrollbarSize:10,horizontalSliderSize:typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:0,horizontalHasArrows:typeof i.horizontalHasArrows<"u"?i.horizontalHasArrows:!1,vertical:typeof i.vertical<"u"?i.vertical:1,verticalScrollbarSize:typeof i.verticalScrollbarSize<"u"?i.verticalScrollbarSize:10,verticalHasArrows:typeof i.verticalHasArrows<"u"?i.verticalHasArrows:!1,verticalSliderSize:typeof i.verticalSliderSize<"u"?i.verticalSliderSize:0,scrollByPage:typeof i.scrollByPage<"u"?i.scrollByPage:!1};return e.horizontalSliderSize=typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof i.verticalSliderSize<"u"?i.verticalSliderSize:e.verticalScrollbarSize,rn&&(e.className+=" mac"),e}const QE=ht;let Lze=class extends be{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new bU(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}};class yU extends be{static render(e,t,n){return new yU(e,t,n)}constructor(e,t,n){super(),this.actionLabel=t.label,this.actionKeybindingLabel=n,this.actionContainer=Qe(e,QE("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=Qe(this.actionContainer,QE("a.action")),this.action.setAttribute("role","button"),t.iconClass&&Qe(this.action,QE(`span.icon.${t.iconClass}`));const s=Qe(this.action,QE("span"));s.textContent=n?`${t.label} (${n})`:t.label,this._store.add(new Dze(this.actionContainer,t.run)),this._store.add(new Nze(this.actionContainer,t.run,[3,10])),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function Ize(i,e){return i&&e?S("acessibleViewHint","Inspect this in the accessible view with {0}.",e):i?S("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}class Dze extends be{constructor(e,t){super(),this._register(ge(e,De.CLICK,n=>{n.stopPropagation(),n.preventDefault(),t(e)}))}}class Nze extends be{constructor(e,t,n){super(),this._register(ge(e,De.KEY_DOWN,s=>{const r=new hi(s);n.some(o=>r.equals(o))&&(s.stopPropagation(),s.preventDefault(),t(e))}))}}const Y2=nn("openerService");function Rze(i){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(i.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},i=i.with({fragment:""})),{selection:e,uri:i}}class qt{get event(){return this.emitter.event}constructor(e,t,n){const s=r=>this.emitter.fire(r);this.emitter=new se({onWillAddFirstListener:()=>e.addEventListener(t,s,n),onDidRemoveLastListener:()=>e.removeEventListener(t,s,n)})}dispose(){this.emitter.dispose()}}function Aze(i,e={}){const t=wU(e);return t.textContent=i,t}function Pze(i,e={}){const t=wU(e);return ege(t,Oze(i,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function wU(i){const e=i.inline?"span":"div",t=document.createElement(e);return i.className&&(t.className=i.className),t}class Mze{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function ege(i,e,t,n){let s;if(e.type===2)s=document.createTextNode(e.content||"");else if(e.type===3)s=document.createElement("b");else if(e.type===4)s=document.createElement("i");else if(e.type===7&&n)s=document.createElement("code");else if(e.type===5&&t){const r=document.createElement("a");t.disposables.add(Vs(r,"click",o=>{t.callback(String(e.index),o)})),s=r}else e.type===8?s=document.createElement("br"):e.type===1&&(s=i);s&&i!==s&&i.appendChild(s),s&&Array.isArray(e.children)&&e.children.forEach(r=>{ege(s,r,t,n)})}function Oze(i,e){const t={type:1,children:[]};let n=0,s=t;const r=[],o=new Mze(i);for(;!o.eos();){let a=o.next();const l=a==="\\"&&Q8(o.peek(),e)!==0;if(l&&(a=o.next()),!l&&Fze(a,e)&&a===o.peek()){o.advance(),s.type===2&&(s=r.pop());const c=Q8(a,e);if(s.type===c||s.type===5&&c===6)s=r.pop();else{const u={type:c,children:[]};c===5&&(u.index=n,n++),s.children.push(u),r.push(s),s=u}}else if(a===`
`)s.type===2&&(s=r.pop()),s.children.push({type:8});else if(s.type!==2){const c={type:2,content:a};s.children.push(c),r.push(s),s=c}else s.content+=a}return s.type===2&&(s=r.pop()),t}function Fze(i,e){return Q8(i,e)!==0}function Q8(i,e){switch(i){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}const Bze=new RegExp(`(\\\\)?\\$\\((${dn.iconNameExpression}(?:${dn.iconModifierExpression})?)\\)`,"g");function _0(i){const e=new Array;let t,n=0,s=0;for(;(t=Bze.exec(i))!==null;){s=t.index||0,n<s&&e.push(i.substring(n,s)),n=(t.index||0)+t[0].length;const[,r,o]=t;e.push(r?`$(${o})`:pD({id:o}))}return n<i.length&&e.push(i.substring(n)),e}function pD(i){const e=ht("span");return e.classList.add(...dn.asClassNameArray(i)),e}function tge(...i){return function(e,t){for(let n=0,s=i.length;n<s;n++){const r=i[n](e,t);if(r)return r}return null}}nge.bind(void 0,!1);const _D=nge.bind(void 0,!0);function nge(i,e,t){if(!t||t.length<e.length)return null;let n;return i?n=PH(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function Vze(i,e){const t=e.toLowerCase().indexOf(i.toLowerCase());return t===-1?null:[{start:t,end:t+i.length}]}function Wze(i,e){return X8(i.toLowerCase(),e.toLowerCase(),0,0)}function X8(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]===e[n]){let s=null;return(s=X8(i,e,t+1,n+1))?sge({start:n,end:n+1},s):null}return X8(i,e,t,n+1)}function CU(i){return 97<=i&&i<=122}function hA(i){return 65<=i&&i<=90}function SU(i){return 48<=i&&i<=57}function Hze(i){return i===32||i===9||i===10||i===13}const Uze=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(i=>Uze.add(i.charCodeAt(0)));function ige(i){return CU(i)||hA(i)||SU(i)}function sge(i,e){return e.length===0?e=[i]:i.end===e[0].start?e[0].start=i.start:e.unshift(i),e}function rge(i,e){for(let t=e;t<i.length;t++){const n=i.charCodeAt(t);if(hA(n)||SU(n)||t>0&&!ige(i.charCodeAt(t-1)))return t}return i.length}function Z8(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]!==e[n].toLowerCase())return null;{let s=null,r=n+1;for(s=Z8(i,e,t+1,n+1);!s&&(r=rge(e,r))<e.length;)s=Z8(i,e,t+1,r),r++;return s===null?null:sge({start:n,end:n+1},s)}}function zze(i){let e=0,t=0,n=0,s=0,r=0;for(let u=0;u<i.length;u++)r=i.charCodeAt(u),hA(r)&&e++,CU(r)&&t++,ige(r)&&n++,SU(r)&&s++;const o=e/i.length,a=t/i.length,l=n/i.length,c=s/i.length;return{upperPercent:o,lowerPercent:a,alphaPercent:l,numericPercent:c}}function jze(i){const{upperPercent:e,lowerPercent:t}=i;return t===0&&e>.6}function $ze(i){const{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:s}=i;return t>.2&&e<.8&&n>.6&&s<.2}function qze(i){let e=0,t=0,n=0,s=0;for(let r=0;r<i.length;r++)n=i.charCodeAt(r),hA(n)&&e++,CU(n)&&t++,Hze(n)&&s++;return(e===0||t===0)&&s===0?i.length<=30:e<=5}function oge(i,e){if(!e||(e=e.trim(),e.length===0)||!qze(i))return null;e.length>60&&(e=e.substring(0,60));const t=zze(e);if(!$ze(t)){if(!jze(t))return null;e=e.toLowerCase()}let n=null,s=0;for(i=i.toLowerCase();s<e.length&&(n=Z8(i,e,0,s))===null;)s=rge(e,s+1);return n}const Kze=tge(_D,oge,Vze),Gze=tge(_D,oge,Wze),BZ=new j2(1e4);function VZ(i,e,t=!1){if(typeof i!="string"||typeof e!="string")return null;let n=BZ.get(i);n||(n=new RegExp(N7e(i),"i"),BZ.set(i,n));const s=n.exec(e);return s?[{start:s.index,end:s.index+s[0].length}]:t?Gze(i,e):Kze(i,e)}function Yze(i,e){const t=cge(i,i.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?Qze(t):null}function Qze(i){if(typeof i>"u")return[];const e=[],t=i[1];for(let n=i.length-1;n>1;n--){const s=i[n]+t,r=e[e.length-1];r&&r.end===s?r.end=s+1:e.push({start:s,end:s+1})}return e}const Hg=128;function kU(){const i=[],e=[];for(let t=0;t<=Hg;t++)e[t]=0;for(let t=0;t<=Hg;t++)i.push(e.slice(0));return i}function age(i){const e=[];for(let t=0;t<=i;t++)e[t]=0;return e}const lge=age(2*Hg),J8=age(2*Hg),uh=kU(),gp=kU(),XE=kU();function ZE(i,e){if(e<0||e>=i.length)return!1;const t=i.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!VH(t)}}function WZ(i,e){if(e<0||e>=i.length)return!1;switch(i.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function hL(i,e,t){return e[i]!==t[i]}function Xze(i,e,t,n,s,r,o=!1){for(;e<t&&s<r;)i[e]===n[s]&&(o&&(lge[e]=s),e+=1),s+=1;return e===t}var tb;(function(i){i.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}i.isDefault=e})(tb||(tb={}));const _j=class _j{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}};_j.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};let e7=_j;function cge(i,e,t,n,s,r,o=e7.default){const a=i.length>Hg?Hg:i.length,l=n.length>Hg?Hg:n.length;if(t>=a||r>=l||a-t>l-r||!Xze(e,t,a,s,r,l,!0))return;Zze(a,l,t,r,e,s);let c=1,u=1,d=t,h=r;const g=[!1];for(c=1,d=t;d<a;c++,d++){const w=lge[d],x=J8[d],k=d+1<a?J8[d+1]:l;for(u=w-r+1,h=w;h<k;u++,h++){let T=Number.MIN_SAFE_INTEGER,R=!1;h<=x&&(T=Jze(i,e,d,t,n,s,h,l,r,uh[c-1][u-1]===0,g));let L=0;T!==Number.MAX_SAFE_INTEGER&&(R=!0,L=T+gp[c-1][u-1]);const I=h>w,A=I?gp[c][u-1]+(uh[c][u-1]>0?-5:0):0,B=h>w+1&&uh[c][u-1]>0,V=B?gp[c][u-2]+(uh[c][u-2]>0?-5:0):0;if(B&&(!I||V>=A)&&(!R||V>=L))gp[c][u]=V,XE[c][u]=3,uh[c][u]=0;else if(I&&(!R||A>=L))gp[c][u]=A,XE[c][u]=2,uh[c][u]=0;else if(R)gp[c][u]=L,XE[c][u]=1,uh[c][u]=uh[c-1][u-1]+1;else throw new Error("not possible")}}if(!g[0]&&!o.firstMatchCanBeWeak)return;c--,u--;const p=[gp[c][u],r];let _=0,v=0;for(;c>=1;){let w=u;do{const x=XE[c][w];if(x===3)w=w-2;else if(x===2)w=w-1;else break}while(w>=1);_>1&&e[t+c-1]===s[r+u-1]&&!hL(w+r-1,n,s)&&_+1>uh[c][w]&&(w=u),w===u?_++:_=1,v||(v=w),c--,u=w-1,p.push(u)}l-r===a&&o.boostFullMatch&&(p[0]+=2);const y=v-a;return p[0]-=y,p}function Zze(i,e,t,n,s,r){let o=i-1,a=e-1;for(;o>=t&&a>=n;)s[o]===r[a]&&(J8[o]=a,o--),a--}function Jze(i,e,t,n,s,r,o,a,l,c,u){if(e[t]!==r[o])return Number.MIN_SAFE_INTEGER;let d=1,h=!1;return o===t-n?d=i[t]===s[o]?7:5:hL(o,s,r)&&(o===0||!hL(o-1,s,r))?(d=i[t]===s[o]?7:5,h=!0):ZE(r,o)&&(o===0||!ZE(r,o-1))?d=5:(ZE(r,o-1)||WZ(r,o-1))&&(d=5,h=!0),d>1&&t===n&&(u[0]=!0),h||(h=hL(o,s,r)||ZE(r,o-1)||WZ(r,o-1)),t===n?o>l&&(d-=h?3:5):c?d+=h?2:0:d+=h?0:1,o+1===a&&(d-=h?3:5),d}const eje="$(",xU=new RegExp(`\\$\\(${dn.iconNameExpression}(?:${dn.iconModifierExpression})?\\)`,"g"),tje=new RegExp(`(\\\\)?${xU.source}`,"g");function nje(i){return i.replace(tje,(e,t)=>t?e:`\\${e}`)}const ije=new RegExp(`\\\\${xU.source}`,"g");function sje(i){return i.replace(ije,e=>`\\${e}`)}const rje=new RegExp(`(\\s)?(\\\\)?${xU.source}(\\s)?`,"g");function uge(i){return i.indexOf(eje)===-1?i:i.replace(rje,(e,t,n,s)=>n?e:t||s||"")}function oje(i){return i?i.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}const t6=new RegExp(`\\$\\(${dn.iconNameCharacter}+\\)`,"g");function bC(i){t6.lastIndex=0;let e="";const t=[];let n=0;for(;;){const s=t6.lastIndex,r=t6.exec(i),o=i.substring(s,r==null?void 0:r.index);if(o.length>0){e+=o;for(let a=0;a<o.length;a++)t.push(n)}if(!r)break;n+=r[0].length}return{text:e,iconOffsets:t}}function n6(i,e,t=!1){const{text:n,iconOffsets:s}=e;if(!s||s.length===0)return VZ(i,n,t);const r=H4(n," "),o=n.length-r.length,a=VZ(i,r,t);if(a)for(const l of a){const c=s[l.start+o]+o;l.start+=c,l.end+=c}return a}function dh(i){return $I(i,!0)}class aje{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:G9(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,n=!1){if(e.scheme===t.scheme){if(e.scheme===Wt.file)return W8(dh(e),dh(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(UZ(e.authority,t.authority))return W8(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return Ut.joinPath(e,...t)}basenameOrAuthority(e){return EU(e)||e.authority}basename(e){return $i.basename(e.path)}extname(e){return $i.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Wt.file?t=Ut.file(u7e(dh(e))).path:(t=$i.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Wt.file?t=Ut.file(Gde(dh(e))).path:t=$i.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!UZ(e.authority,t.authority))return;if(e.scheme===Wt.file){const r=c7e(dh(e),dh(t));return Sa?xfe(r):r}let n=e.path||"/";const s=t.path||"/";if(this._ignorePathCasing(e)){let r=0;for(const o=Math.min(n.length,s.length);r<o&&!(n.charCodeAt(r)!==s.charCodeAt(r)&&n.charAt(r).toLowerCase()!==s.charAt(r).toLowerCase());r++);n=s.substr(0,r)+n.substr(r)}return $i.relative(n,s)}resolvePath(e,t){if(e.scheme===Wt.file){const n=Ut.file(l7e(dh(e),t));return e.with({authority:n.authority,path:n.path})}return t=hHe(t),e.with({path:$i.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&ev(e,t)}hasTrailingPathSeparator(e,t=im){if(e.scheme===Wt.file){const n=dh(e);return n.length>gZ(n).length&&n[n.length-1]===t}else{const n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=im){return zZ(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=im){let n=!1;if(e.scheme===Wt.file){const s=dh(e);n=s!==void 0&&s.length===gZ(s).length&&s[s.length-1]===t}else{t="/";const s=e.path;n=s.length===1&&s.charCodeAt(s.length-1)===47}return!n&&!zZ(e,t)?e.with({path:e.path+"/"}):e}}const bi=new aje(()=>!1),lje=bi.isEqual.bind(bi);bi.isEqualOrParent.bind(bi);bi.getComparisonKey.bind(bi);bi.basenameOrAuthority.bind(bi);const EU=bi.basename.bind(bi);bi.extname.bind(bi);const cje=bi.dirname.bind(bi);bi.joinPath.bind(bi);const uje=bi.normalizePath.bind(bi);bi.relativePath.bind(bi);const HZ=bi.resolvePath.bind(bi);bi.isAbsolutePath.bind(bi);const UZ=bi.isEqualAuthority.bind(bi),zZ=bi.hasTrailingPathSeparator.bind(bi);bi.removeTrailingPathSeparator.bind(bi);bi.addTrailingPathSeparator.bind(bi);var vD;(function(i){i.META_DATA_LABEL="label",i.META_DATA_DESCRIPTION="description",i.META_DATA_SIZE="size",i.META_DATA_MIME="mime";function e(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,l]=o.split(":");a&&l&&n.set(a,l)});const r=t.path.substring(0,t.path.indexOf(";"));return r&&n.set(i.META_DATA_MIME,r),n}i.parseMetaData=e})(vD||(vD={}));class dge{constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw V4("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=hje(this.supportThemeIcons?nje(e):e).replace(/([ \t]+)/g,(n,s)=>"&nbsp;".repeat(s.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${fje(t,e)}
`,this}appendLink(e,t,n){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=` "${this._escape(this._escape(n,'"'),")")}"`),this.value+=")",this}_escape(e,t){const n=new RegExp(wf(t),"g");return e.replace(n,(s,r)=>e.charAt(r-1)!=="\\"?`\\${s}`:s)}}function nb(i){return i instanceof dge?!0:i&&typeof i=="object"?typeof i.value=="string"&&(typeof i.isTrusted=="boolean"||typeof i.isTrusted=="object"||i.isTrusted===void 0)&&(typeof i.supportThemeIcons=="boolean"||i.supportThemeIcons===void 0):!1}function dje(i,e){return i===e?!0:!i||!e?!1:i.value===e.value&&i.isTrusted===e.isTrusted&&i.supportThemeIcons===e.supportThemeIcons&&i.supportHtml===e.supportHtml&&(i.baseUri===e.baseUri||!!i.baseUri&&!!e.baseUri&&lje(Ut.from(i.baseUri),Ut.from(e.baseUri)))}function hje(i){return i.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function fje(i,e){var s;const t=((s=i.match(/^`+/gm))==null?void 0:s.reduce((r,o)=>r.length>o.length?r:o).length)??0,n=t>=3?t+1:3;return[`${"`".repeat(n)}${e}`,i,`${"`".repeat(n)}`].join(`
`)}function JE(i){return i.replace(/"/g,"&quot;")}function i6(i){return i&&i.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function gje(i){const e=[],t=i.split("|").map(s=>s.trim());i=t[0];const n=t[1];if(n){const s=/height=(\d+)/.exec(n),r=/width=(\d+)/.exec(n),o=s?s[1]:"",a=r?r[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(o));l&&e.push(`width="${a}"`),c&&e.push(`height="${o}"`)}return{href:i,dimensions:e}}class hge{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const jZ=new hge("id#");let Mr={};(function(){function i(e,t){t(Mr)}i.amd=!0,function(e,t){typeof i=="function"&&i.amd?i(["exports"],t):typeof nr=="object"&&typeof x1e<"u"?t(nr):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}e.defaults=t();function n(kt){e.defaults=kt}const s=/[&<>"']/,r=new RegExp(s.source,"g"),o=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a=new RegExp(o.source,"g"),l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=kt=>l[kt];function u(kt,$){if($){if(s.test(kt))return kt.replace(r,c)}else if(o.test(kt))return kt.replace(a,c);return kt}const d=/(^|[^\[])\^/g;function h(kt,$){let q=typeof kt=="string"?kt:kt.source;$=$||"";const Q={replace:(ie,ae)=>{let me=typeof ae=="string"?ae:ae.source;return me=me.replace(d,"$1"),q=q.replace(ie,me),Q},getRegex:()=>new RegExp(q,$)};return Q}function g(kt){try{kt=encodeURI(kt).replace(/%25/g,"%")}catch{return null}return kt}const p={exec:()=>null};function _(kt,$){const q=kt.replace(/\|/g,(ae,me,Ce)=>{let ze=!1,Ye=me;for(;--Ye>=0&&Ce[Ye]==="\\";)ze=!ze;return ze?"|":" |"}),Q=q.split(/ \|/);let ie=0;if(Q[0].trim()||Q.shift(),Q.length>0&&!Q[Q.length-1].trim()&&Q.pop(),$)if(Q.length>$)Q.splice($);else for(;Q.length<$;)Q.push("");for(;ie<Q.length;ie++)Q[ie]=Q[ie].trim().replace(/\\\|/g,"|");return Q}function v(kt,$,q){const Q=kt.length;if(Q===0)return"";let ie=0;for(;ie<Q&&kt.charAt(Q-ie-1)===$;)ie++;return kt.slice(0,Q-ie)}function y(kt,$){if(kt.indexOf($[1])===-1)return-1;let q=0;for(let Q=0;Q<kt.length;Q++)if(kt[Q]==="\\")Q++;else if(kt[Q]===$[0])q++;else if(kt[Q]===$[1]&&(q--,q<0))return Q;return-1}function w(kt,$,q,Q){const ie=$.href,ae=$.title?u($.title):null,me=kt[1].replace(/\\([\[\]])/g,"$1");if(kt[0].charAt(0)!=="!"){Q.state.inLink=!0;const Ce={type:"link",raw:q,href:ie,title:ae,text:me,tokens:Q.inlineTokens(me)};return Q.state.inLink=!1,Ce}return{type:"image",raw:q,href:ie,title:ae,text:u(me)}}function x(kt,$){const q=kt.match(/^(\s+)(?:```)/);if(q===null)return $;const Q=q[1];return $.split(`
`).map(ie=>{const ae=ie.match(/^\s+/);if(ae===null)return ie;const[me]=ae;return me.length>=Q.length?ie.slice(Q.length):ie}).join(`
`)}class k{constructor($){Xi(this,"options");Xi(this,"rules");Xi(this,"lexer");this.options=$||e.defaults}space($){const q=this.rules.block.newline.exec($);if(q&&q[0].length>0)return{type:"space",raw:q[0]}}code($){const q=this.rules.block.code.exec($);if(q){const Q=q[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:q[0],codeBlockStyle:"indented",text:this.options.pedantic?Q:v(Q,`
`)}}}fences($){const q=this.rules.block.fences.exec($);if(q){const Q=q[0],ie=x(Q,q[3]||"");return{type:"code",raw:Q,lang:q[2]?q[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):q[2],text:ie}}}heading($){const q=this.rules.block.heading.exec($);if(q){let Q=q[2].trim();if(/#$/.test(Q)){const ie=v(Q,"#");(this.options.pedantic||!ie||/ $/.test(ie))&&(Q=ie.trim())}return{type:"heading",raw:q[0],depth:q[1].length,text:Q,tokens:this.lexer.inline(Q)}}}hr($){const q=this.rules.block.hr.exec($);if(q)return{type:"hr",raw:v(q[0],`
`)}}blockquote($){const q=this.rules.block.blockquote.exec($);if(q){let Q=v(q[0],`
`).split(`
`),ie="",ae="";const me=[];for(;Q.length>0;){let Ce=!1;const ze=[];let Ye;for(Ye=0;Ye<Q.length;Ye++)if(/^ {0,3}>/.test(Q[Ye]))ze.push(Q[Ye]),Ce=!0;else if(!Ce)ze.push(Q[Ye]);else break;Q=Q.slice(Ye);const Rt=ze.join(`
`),vn=Rt.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");ie=ie?`${ie}
${Rt}`:Rt,ae=ae?`${ae}
${vn}`:vn;const an=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(vn,me,!0),this.lexer.state.top=an,Q.length===0)break;const Qn=me[me.length-1];if((Qn==null?void 0:Qn.type)==="code")break;if((Qn==null?void 0:Qn.type)==="blockquote"){const kn=Qn,is=kn.raw+`
`+Q.join(`
`),Vi=this.blockquote(is);me[me.length-1]=Vi,ie=ie.substring(0,ie.length-kn.raw.length)+Vi.raw,ae=ae.substring(0,ae.length-kn.text.length)+Vi.text;break}else if((Qn==null?void 0:Qn.type)==="list"){const kn=Qn,is=kn.raw+`
`+Q.join(`
`),Vi=this.list(is);me[me.length-1]=Vi,ie=ie.substring(0,ie.length-Qn.raw.length)+Vi.raw,ae=ae.substring(0,ae.length-kn.raw.length)+Vi.raw,Q=is.substring(me[me.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:ie,tokens:me,text:ae}}}list($){let q=this.rules.block.list.exec($);if(q){let Q=q[1].trim();const ie=Q.length>1,ae={type:"list",raw:"",ordered:ie,start:ie?+Q.slice(0,-1):"",loose:!1,items:[]};Q=ie?`\\d{1,9}\\${Q.slice(-1)}`:`\\${Q}`,this.options.pedantic&&(Q=ie?Q:"[*+-]");const me=new RegExp(`^( {0,3}${Q})((?:[	 ][^\\n]*)?(?:\\n|$))`);let Ce=!1;for(;$;){let ze=!1,Ye="",Rt="";if(!(q=me.exec($))||this.rules.block.hr.test($))break;Ye=q[0],$=$.substring(Ye.length);let vn=q[2].split(`
`,1)[0].replace(/^\t+/,cl=>" ".repeat(3*cl.length)),an=$.split(`
`,1)[0],Qn=!vn.trim(),kn=0;if(this.options.pedantic?(kn=2,Rt=vn.trimStart()):Qn?kn=q[1].length+1:(kn=q[2].search(/[^ ]/),kn=kn>4?1:kn,Rt=vn.slice(kn),kn+=q[1].length),Qn&&/^ *$/.test(an)&&(Ye+=an+`
`,$=$.substring(an.length+1),ze=!0),!ze){const cl=new RegExp(`^ {0,${Math.min(3,kn-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),mt=new RegExp(`^ {0,${Math.min(3,kn-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),de=new RegExp(`^ {0,${Math.min(3,kn-1)}}(?:\`\`\`|~~~)`),je=new RegExp(`^ {0,${Math.min(3,kn-1)}}#`);for(;$;){const dt=$.split(`
`,1)[0];if(an=dt,this.options.pedantic&&(an=an.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),de.test(an)||je.test(an)||cl.test(an)||mt.test($))break;if(an.search(/[^ ]/)>=kn||!an.trim())Rt+=`
`+an.slice(kn);else{if(Qn||vn.search(/[^ ]/)>=4||de.test(vn)||je.test(vn)||mt.test(vn))break;Rt+=`
`+an}!Qn&&!an.trim()&&(Qn=!0),Ye+=dt+`
`,$=$.substring(dt.length+1),vn=an.slice(kn)}}ae.loose||(Ce?ae.loose=!0:/\n *\n *$/.test(Ye)&&(Ce=!0));let is=null,Vi;this.options.gfm&&(is=/^\[[ xX]\] /.exec(Rt),is&&(Vi=is[0]!=="[ ] ",Rt=Rt.replace(/^\[[ xX]\] +/,""))),ae.items.push({type:"list_item",raw:Ye,task:!!is,checked:Vi,loose:!1,text:Rt,tokens:[]}),ae.raw+=Ye}ae.items[ae.items.length-1].raw=ae.items[ae.items.length-1].raw.trimEnd(),ae.items[ae.items.length-1].text=ae.items[ae.items.length-1].text.trimEnd(),ae.raw=ae.raw.trimEnd();for(let ze=0;ze<ae.items.length;ze++)if(this.lexer.state.top=!1,ae.items[ze].tokens=this.lexer.blockTokens(ae.items[ze].text,[]),!ae.loose){const Ye=ae.items[ze].tokens.filter(vn=>vn.type==="space"),Rt=Ye.length>0&&Ye.some(vn=>/\n.*\n/.test(vn.raw));ae.loose=Rt}if(ae.loose)for(let ze=0;ze<ae.items.length;ze++)ae.items[ze].loose=!0;return ae}}html($){const q=this.rules.block.html.exec($);if(q)return{type:"html",block:!0,raw:q[0],pre:q[1]==="pre"||q[1]==="script"||q[1]==="style",text:q[0]}}def($){const q=this.rules.block.def.exec($);if(q){const Q=q[1].toLowerCase().replace(/\s+/g," "),ie=q[2]?q[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",ae=q[3]?q[3].substring(1,q[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):q[3];return{type:"def",tag:Q,raw:q[0],href:ie,title:ae}}}table($){const q=this.rules.block.table.exec($);if(!q||!/[:|]/.test(q[2]))return;const Q=_(q[1]),ie=q[2].replace(/^\||\| *$/g,"").split("|"),ae=q[3]&&q[3].trim()?q[3].replace(/\n[ \t]*$/,"").split(`
`):[],me={type:"table",raw:q[0],header:[],align:[],rows:[]};if(Q.length===ie.length){for(const Ce of ie)/^ *-+: *$/.test(Ce)?me.align.push("right"):/^ *:-+: *$/.test(Ce)?me.align.push("center"):/^ *:-+ *$/.test(Ce)?me.align.push("left"):me.align.push(null);for(let Ce=0;Ce<Q.length;Ce++)me.header.push({text:Q[Ce],tokens:this.lexer.inline(Q[Ce]),header:!0,align:me.align[Ce]});for(const Ce of ae)me.rows.push(_(Ce,me.header.length).map((ze,Ye)=>({text:ze,tokens:this.lexer.inline(ze),header:!1,align:me.align[Ye]})));return me}}lheading($){const q=this.rules.block.lheading.exec($);if(q)return{type:"heading",raw:q[0],depth:q[2].charAt(0)==="="?1:2,text:q[1],tokens:this.lexer.inline(q[1])}}paragraph($){const q=this.rules.block.paragraph.exec($);if(q){const Q=q[1].charAt(q[1].length-1)===`
`?q[1].slice(0,-1):q[1];return{type:"paragraph",raw:q[0],text:Q,tokens:this.lexer.inline(Q)}}}text($){const q=this.rules.block.text.exec($);if(q)return{type:"text",raw:q[0],text:q[0],tokens:this.lexer.inline(q[0])}}escape($){const q=this.rules.inline.escape.exec($);if(q)return{type:"escape",raw:q[0],text:u(q[1])}}tag($){const q=this.rules.inline.tag.exec($);if(q)return!this.lexer.state.inLink&&/^<a /i.test(q[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(q[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(q[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(q[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:q[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:q[0]}}link($){const q=this.rules.inline.link.exec($);if(q){const Q=q[2].trim();if(!this.options.pedantic&&/^</.test(Q)){if(!/>$/.test(Q))return;const me=v(Q.slice(0,-1),"\\");if((Q.length-me.length)%2===0)return}else{const me=y(q[2],"()");if(me>-1){const ze=(q[0].indexOf("!")===0?5:4)+q[1].length+me;q[2]=q[2].substring(0,me),q[0]=q[0].substring(0,ze).trim(),q[3]=""}}let ie=q[2],ae="";if(this.options.pedantic){const me=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(ie);me&&(ie=me[1],ae=me[3])}else ae=q[3]?q[3].slice(1,-1):"";return ie=ie.trim(),/^</.test(ie)&&(this.options.pedantic&&!/>$/.test(Q)?ie=ie.slice(1):ie=ie.slice(1,-1)),w(q,{href:ie&&ie.replace(this.rules.inline.anyPunctuation,"$1"),title:ae&&ae.replace(this.rules.inline.anyPunctuation,"$1")},q[0],this.lexer)}}reflink($,q){let Q;if((Q=this.rules.inline.reflink.exec($))||(Q=this.rules.inline.nolink.exec($))){const ie=(Q[2]||Q[1]).replace(/\s+/g," "),ae=q[ie.toLowerCase()];if(!ae){const me=Q[0].charAt(0);return{type:"text",raw:me,text:me}}return w(Q,ae,Q[0],this.lexer)}}emStrong($,q,Q=""){let ie=this.rules.inline.emStrongLDelim.exec($);if(!ie||ie[3]&&Q.match(/[\p{L}\p{N}]/u))return;if(!(ie[1]||ie[2]||"")||!Q||this.rules.inline.punctuation.exec(Q)){const me=[...ie[0]].length-1;let Ce,ze,Ye=me,Rt=0;const vn=ie[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(vn.lastIndex=0,q=q.slice(-1*$.length+me);(ie=vn.exec(q))!=null;){if(Ce=ie[1]||ie[2]||ie[3]||ie[4]||ie[5]||ie[6],!Ce)continue;if(ze=[...Ce].length,ie[3]||ie[4]){Ye+=ze;continue}else if((ie[5]||ie[6])&&me%3&&!((me+ze)%3)){Rt+=ze;continue}if(Ye-=ze,Ye>0)continue;ze=Math.min(ze,ze+Ye+Rt);const an=[...ie[0]][0].length,Qn=$.slice(0,me+ie.index+an+ze);if(Math.min(me,ze)%2){const is=Qn.slice(1,-1);return{type:"em",raw:Qn,text:is,tokens:this.lexer.inlineTokens(is)}}const kn=Qn.slice(2,-2);return{type:"strong",raw:Qn,text:kn,tokens:this.lexer.inlineTokens(kn)}}}}codespan($){const q=this.rules.inline.code.exec($);if(q){let Q=q[2].replace(/\n/g," ");const ie=/[^ ]/.test(Q),ae=/^ /.test(Q)&&/ $/.test(Q);return ie&&ae&&(Q=Q.substring(1,Q.length-1)),Q=u(Q,!0),{type:"codespan",raw:q[0],text:Q}}}br($){const q=this.rules.inline.br.exec($);if(q)return{type:"br",raw:q[0]}}del($){const q=this.rules.inline.del.exec($);if(q)return{type:"del",raw:q[0],text:q[2],tokens:this.lexer.inlineTokens(q[2])}}autolink($){const q=this.rules.inline.autolink.exec($);if(q){let Q,ie;return q[2]==="@"?(Q=u(q[1]),ie="mailto:"+Q):(Q=u(q[1]),ie=Q),{type:"link",raw:q[0],text:Q,href:ie,tokens:[{type:"text",raw:Q,text:Q}]}}}url($){var Q;let q;if(q=this.rules.inline.url.exec($)){let ie,ae;if(q[2]==="@")ie=u(q[0]),ae="mailto:"+ie;else{let me;do me=q[0],q[0]=((Q=this.rules.inline._backpedal.exec(q[0]))==null?void 0:Q[0])??"";while(me!==q[0]);ie=u(q[0]),q[1]==="www."?ae="http://"+q[0]:ae=q[0]}return{type:"link",raw:q[0],text:ie,href:ae,tokens:[{type:"text",raw:ie,text:ie}]}}}inlineText($){const q=this.rules.inline.text.exec($);if(q){let Q;return this.lexer.state.inRawBlock?Q=q[0]:Q=u(q[0]),{type:"text",raw:q[0],text:Q}}}}const T=/^(?: *(?:\n|$))+/,R=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,L=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,I=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,A=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,B=/(?:[*+-]|\d{1,9}[.)])/,V=h(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,B).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),U=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,W=/^[^\n]+/,G=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Z=h(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",G).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),ne=h(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,B).getRegex(),fe="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",te=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ce=h("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",te).replace("tag",fe).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ve=h(U).replace("hr",I).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fe).getRegex(),oe={blockquote:h(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ve).getRegex(),code:R,def:Z,fences:L,heading:A,hr:I,html:ce,lheading:V,list:ne,newline:T,paragraph:ve,table:p,text:W},Ne=h("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",I).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fe).getRegex(),Ie={...oe,table:Ne,paragraph:h(U).replace("hr",I).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Ne).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fe).getRegex()},Oe={...oe,html:h(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",te).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:p,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:h(U).replace("hr",I).replace("heading",` *#{1,6} *[^
]`).replace("lheading",V).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},it=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,We=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,at=/^( {2,}|\\)\n(?!\s*$)/,Ft=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,_t="\\p{P}\\p{S}",Nt=h(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,_t).getRegex(),Zt=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,on=h(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,_t).getRegex(),zn=h("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,_t).getRegex(),sr=h("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,_t).getRegex(),Or=h(/\\([punct])/,"gu").replace(/punct/g,_t).getRegex(),Ts=h(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),No=h(te).replace("(?:-->|$)","-->").getRegex(),Hs=h("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",No).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),wr=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ro=h(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",wr).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),jl=h(/^!?\[(label)\]\[(ref)\]/).replace("label",wr).replace("ref",G).getRegex(),aa=h(/^!?\[(ref)\](?:\[\])?/).replace("ref",G).getRegex(),Ao=h("reflink|nolink(?!\\()","g").replace("reflink",jl).replace("nolink",aa).getRegex(),Fr={_backpedal:p,anyPunctuation:Or,autolink:Ts,blockSkip:Zt,br:at,code:We,del:p,emStrongLDelim:on,emStrongRDelimAst:zn,emStrongRDelimUnd:sr,escape:it,link:Ro,nolink:aa,punctuation:Nt,reflink:jl,reflinkSearch:Ao,tag:Hs,text:Ft,url:p},yi={...Fr,link:h(/^!?\[(label)\]\((.*?)\)/).replace("label",wr).getRegex(),reflink:h(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",wr).getRegex()},Ti={...Fr,escape:h(it).replace("])","~|])").getRegex(),url:h(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Po={...Ti,br:h(at).replace("{2,}","*").getRegex(),text:h(Ti.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},La={normal:oe,gfm:Ie,pedantic:Oe},Cr={normal:Fr,gfm:Ti,breaks:Po,pedantic:yi};class cs{constructor($){Xi(this,"tokens");Xi(this,"options");Xi(this,"state");Xi(this,"tokenizer");Xi(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=$||e.defaults,this.options.tokenizer=this.options.tokenizer||new k,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const q={block:La.normal,inline:Cr.normal};this.options.pedantic?(q.block=La.pedantic,q.inline=Cr.pedantic):this.options.gfm&&(q.block=La.gfm,this.options.breaks?q.inline=Cr.breaks:q.inline=Cr.gfm),this.tokenizer.rules=q}static get rules(){return{block:La,inline:Cr}}static lex($,q){return new cs(q).lex($)}static lexInline($,q){return new cs(q).inlineTokens($)}lex($){$=$.replace(/\r\n|\r/g,`
`),this.blockTokens($,this.tokens);for(let q=0;q<this.inlineQueue.length;q++){const Q=this.inlineQueue[q];this.inlineTokens(Q.src,Q.tokens)}return this.inlineQueue=[],this.tokens}blockTokens($,q=[],Q=!1){this.options.pedantic?$=$.replace(/\t/g,"    ").replace(/^ +$/gm,""):$=$.replace(/^( *)(\t+)/gm,(Ce,ze,Ye)=>ze+"    ".repeat(Ye.length));let ie,ae,me;for(;$;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(Ce=>(ie=Ce.call({lexer:this},$,q))?($=$.substring(ie.raw.length),q.push(ie),!0):!1))){if(ie=this.tokenizer.space($)){$=$.substring(ie.raw.length),ie.raw.length===1&&q.length>0?q[q.length-1].raw+=`
`:q.push(ie);continue}if(ie=this.tokenizer.code($)){$=$.substring(ie.raw.length),ae=q[q.length-1],ae&&(ae.type==="paragraph"||ae.type==="text")?(ae.raw+=`
`+ie.raw,ae.text+=`
`+ie.text,this.inlineQueue[this.inlineQueue.length-1].src=ae.text):q.push(ie);continue}if(ie=this.tokenizer.fences($)){$=$.substring(ie.raw.length),q.push(ie);continue}if(ie=this.tokenizer.heading($)){$=$.substring(ie.raw.length),q.push(ie);continue}if(ie=this.tokenizer.hr($)){$=$.substring(ie.raw.length),q.push(ie);continue}if(ie=this.tokenizer.blockquote($)){$=$.substring(ie.raw.length),q.push(ie);continue}if(ie=this.tokenizer.list($)){$=$.substring(ie.raw.length),q.push(ie);continue}if(ie=this.tokenizer.html($)){$=$.substring(ie.raw.length),q.push(ie);continue}if(ie=this.tokenizer.def($)){$=$.substring(ie.raw.length),ae=q[q.length-1],ae&&(ae.type==="paragraph"||ae.type==="text")?(ae.raw+=`
`+ie.raw,ae.text+=`
`+ie.raw,this.inlineQueue[this.inlineQueue.length-1].src=ae.text):this.tokens.links[ie.tag]||(this.tokens.links[ie.tag]={href:ie.href,title:ie.title});continue}if(ie=this.tokenizer.table($)){$=$.substring(ie.raw.length),q.push(ie);continue}if(ie=this.tokenizer.lheading($)){$=$.substring(ie.raw.length),q.push(ie);continue}if(me=$,this.options.extensions&&this.options.extensions.startBlock){let Ce=1/0;const ze=$.slice(1);let Ye;this.options.extensions.startBlock.forEach(Rt=>{Ye=Rt.call({lexer:this},ze),typeof Ye=="number"&&Ye>=0&&(Ce=Math.min(Ce,Ye))}),Ce<1/0&&Ce>=0&&(me=$.substring(0,Ce+1))}if(this.state.top&&(ie=this.tokenizer.paragraph(me))){ae=q[q.length-1],Q&&(ae==null?void 0:ae.type)==="paragraph"?(ae.raw+=`
`+ie.raw,ae.text+=`
`+ie.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ae.text):q.push(ie),Q=me.length!==$.length,$=$.substring(ie.raw.length);continue}if(ie=this.tokenizer.text($)){$=$.substring(ie.raw.length),ae=q[q.length-1],ae&&ae.type==="text"?(ae.raw+=`
`+ie.raw,ae.text+=`
`+ie.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=ae.text):q.push(ie);continue}if($){const Ce="Infinite loop on byte: "+$.charCodeAt(0);if(this.options.silent){console.error(Ce);break}else throw new Error(Ce)}}return this.state.top=!0,q}inline($,q=[]){return this.inlineQueue.push({src:$,tokens:q}),q}inlineTokens($,q=[]){let Q,ie,ae,me=$,Ce,ze,Ye;if(this.tokens.links){const Rt=Object.keys(this.tokens.links);if(Rt.length>0)for(;(Ce=this.tokenizer.rules.inline.reflinkSearch.exec(me))!=null;)Rt.includes(Ce[0].slice(Ce[0].lastIndexOf("[")+1,-1))&&(me=me.slice(0,Ce.index)+"["+"a".repeat(Ce[0].length-2)+"]"+me.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(Ce=this.tokenizer.rules.inline.blockSkip.exec(me))!=null;)me=me.slice(0,Ce.index)+"["+"a".repeat(Ce[0].length-2)+"]"+me.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(Ce=this.tokenizer.rules.inline.anyPunctuation.exec(me))!=null;)me=me.slice(0,Ce.index)+"++"+me.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;$;)if(ze||(Ye=""),ze=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(Rt=>(Q=Rt.call({lexer:this},$,q))?($=$.substring(Q.raw.length),q.push(Q),!0):!1))){if(Q=this.tokenizer.escape($)){$=$.substring(Q.raw.length),q.push(Q);continue}if(Q=this.tokenizer.tag($)){$=$.substring(Q.raw.length),ie=q[q.length-1],ie&&Q.type==="text"&&ie.type==="text"?(ie.raw+=Q.raw,ie.text+=Q.text):q.push(Q);continue}if(Q=this.tokenizer.link($)){$=$.substring(Q.raw.length),q.push(Q);continue}if(Q=this.tokenizer.reflink($,this.tokens.links)){$=$.substring(Q.raw.length),ie=q[q.length-1],ie&&Q.type==="text"&&ie.type==="text"?(ie.raw+=Q.raw,ie.text+=Q.text):q.push(Q);continue}if(Q=this.tokenizer.emStrong($,me,Ye)){$=$.substring(Q.raw.length),q.push(Q);continue}if(Q=this.tokenizer.codespan($)){$=$.substring(Q.raw.length),q.push(Q);continue}if(Q=this.tokenizer.br($)){$=$.substring(Q.raw.length),q.push(Q);continue}if(Q=this.tokenizer.del($)){$=$.substring(Q.raw.length),q.push(Q);continue}if(Q=this.tokenizer.autolink($)){$=$.substring(Q.raw.length),q.push(Q);continue}if(!this.state.inLink&&(Q=this.tokenizer.url($))){$=$.substring(Q.raw.length),q.push(Q);continue}if(ae=$,this.options.extensions&&this.options.extensions.startInline){let Rt=1/0;const vn=$.slice(1);let an;this.options.extensions.startInline.forEach(Qn=>{an=Qn.call({lexer:this},vn),typeof an=="number"&&an>=0&&(Rt=Math.min(Rt,an))}),Rt<1/0&&Rt>=0&&(ae=$.substring(0,Rt+1))}if(Q=this.tokenizer.inlineText(ae)){$=$.substring(Q.raw.length),Q.raw.slice(-1)!=="_"&&(Ye=Q.raw.slice(-1)),ze=!0,ie=q[q.length-1],ie&&ie.type==="text"?(ie.raw+=Q.raw,ie.text+=Q.text):q.push(Q);continue}if($){const Rt="Infinite loop on byte: "+$.charCodeAt(0);if(this.options.silent){console.error(Rt);break}else throw new Error(Rt)}}return q}}class Us{constructor($){Xi(this,"options");Xi(this,"parser");this.options=$||e.defaults}space($){return""}code({text:$,lang:q,escaped:Q}){var me;const ie=(me=(q||"").match(/^\S*/))==null?void 0:me[0],ae=$.replace(/\n$/,"")+`
`;return ie?'<pre><code class="language-'+u(ie)+'">'+(Q?ae:u(ae,!0))+`</code></pre>
`:"<pre><code>"+(Q?ae:u(ae,!0))+`</code></pre>
`}blockquote({tokens:$}){return`<blockquote>
${this.parser.parse($)}</blockquote>
`}html({text:$}){return $}heading({tokens:$,depth:q}){return`<h${q}>${this.parser.parseInline($)}</h${q}>
`}hr($){return`<hr>
`}list($){const q=$.ordered,Q=$.start;let ie="";for(let Ce=0;Ce<$.items.length;Ce++){const ze=$.items[Ce];ie+=this.listitem(ze)}const ae=q?"ol":"ul",me=q&&Q!==1?' start="'+Q+'"':"";return"<"+ae+me+`>
`+ie+"</"+ae+`>
`}listitem($){let q="";if($.task){const Q=this.checkbox({checked:!!$.checked});$.loose?$.tokens.length>0&&$.tokens[0].type==="paragraph"?($.tokens[0].text=Q+" "+$.tokens[0].text,$.tokens[0].tokens&&$.tokens[0].tokens.length>0&&$.tokens[0].tokens[0].type==="text"&&($.tokens[0].tokens[0].text=Q+" "+$.tokens[0].tokens[0].text)):$.tokens.unshift({type:"text",raw:Q+" ",text:Q+" "}):q+=Q+" "}return q+=this.parser.parse($.tokens,!!$.loose),`<li>${q}</li>
`}checkbox({checked:$}){return"<input "+($?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:$}){return`<p>${this.parser.parseInline($)}</p>
`}table($){let q="",Q="";for(let ae=0;ae<$.header.length;ae++)Q+=this.tablecell($.header[ae]);q+=this.tablerow({text:Q});let ie="";for(let ae=0;ae<$.rows.length;ae++){const me=$.rows[ae];Q="";for(let Ce=0;Ce<me.length;Ce++)Q+=this.tablecell(me[Ce]);ie+=this.tablerow({text:Q})}return ie&&(ie=`<tbody>${ie}</tbody>`),`<table>
<thead>
`+q+`</thead>
`+ie+`</table>
`}tablerow({text:$}){return`<tr>
${$}</tr>
`}tablecell($){const q=this.parser.parseInline($.tokens),Q=$.header?"th":"td";return($.align?`<${Q} align="${$.align}">`:`<${Q}>`)+q+`</${Q}>
`}strong({tokens:$}){return`<strong>${this.parser.parseInline($)}</strong>`}em({tokens:$}){return`<em>${this.parser.parseInline($)}</em>`}codespan({text:$}){return`<code>${$}</code>`}br($){return"<br>"}del({tokens:$}){return`<del>${this.parser.parseInline($)}</del>`}link({href:$,title:q,tokens:Q}){const ie=this.parser.parseInline(Q),ae=g($);if(ae===null)return ie;$=ae;let me='<a href="'+$+'"';return q&&(me+=' title="'+q+'"'),me+=">"+ie+"</a>",me}image({href:$,title:q,text:Q}){const ie=g($);if(ie===null)return Q;$=ie;let ae=`<img src="${$}" alt="${Q}"`;return q&&(ae+=` title="${q}"`),ae+=">",ae}text($){return"tokens"in $&&$.tokens?this.parser.parseInline($.tokens):$.text}}class lo{strong({text:$}){return $}em({text:$}){return $}codespan({text:$}){return $}del({text:$}){return $}html({text:$}){return $}text({text:$}){return $}link({text:$}){return""+$}image({text:$}){return""+$}br(){return""}}class Ci{constructor($){Xi(this,"options");Xi(this,"renderer");Xi(this,"textRenderer");this.options=$||e.defaults,this.options.renderer=this.options.renderer||new Us,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new lo}static parse($,q){return new Ci(q).parse($)}static parseInline($,q){return new Ci(q).parseInline($)}parse($,q=!0){let Q="";for(let ie=0;ie<$.length;ie++){const ae=$[ie];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ae.type]){const Ce=ae,ze=this.options.extensions.renderers[Ce.type].call({parser:this},Ce);if(ze!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Ce.type)){Q+=ze||"";continue}}const me=ae;switch(me.type){case"space":{Q+=this.renderer.space(me);continue}case"hr":{Q+=this.renderer.hr(me);continue}case"heading":{Q+=this.renderer.heading(me);continue}case"code":{Q+=this.renderer.code(me);continue}case"table":{Q+=this.renderer.table(me);continue}case"blockquote":{Q+=this.renderer.blockquote(me);continue}case"list":{Q+=this.renderer.list(me);continue}case"html":{Q+=this.renderer.html(me);continue}case"paragraph":{Q+=this.renderer.paragraph(me);continue}case"text":{let Ce=me,ze=this.renderer.text(Ce);for(;ie+1<$.length&&$[ie+1].type==="text";)Ce=$[++ie],ze+=`
`+this.renderer.text(Ce);q?Q+=this.renderer.paragraph({type:"paragraph",raw:ze,text:ze,tokens:[{type:"text",raw:ze,text:ze}]}):Q+=ze;continue}default:{const Ce='Token with "'+me.type+'" type was not found.';if(this.options.silent)return console.error(Ce),"";throw new Error(Ce)}}}return Q}parseInline($,q){q=q||this.renderer;let Q="";for(let ie=0;ie<$.length;ie++){const ae=$[ie];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ae.type]){const Ce=this.options.extensions.renderers[ae.type].call({parser:this},ae);if(Ce!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(ae.type)){Q+=Ce||"";continue}}const me=ae;switch(me.type){case"escape":{Q+=q.text(me);break}case"html":{Q+=q.html(me);break}case"link":{Q+=q.link(me);break}case"image":{Q+=q.image(me);break}case"strong":{Q+=q.strong(me);break}case"em":{Q+=q.em(me);break}case"codespan":{Q+=q.codespan(me);break}case"br":{Q+=q.br(me);break}case"del":{Q+=q.del(me);break}case"text":{Q+=q.text(me);break}default:{const Ce='Token with "'+me.type+'" type was not found.';if(this.options.silent)return console.error(Ce),"";throw new Error(Ce)}}}return Q}}class ft{constructor($){Xi(this,"options");this.options=$||e.defaults}preprocess($){return $}postprocess($){return $}processAllTokens($){return $}}Xi(ft,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class Ia{constructor(...$){Xi(this,"defaults",t());Xi(this,"options",this.setOptions);Xi(this,"parse",this.parseMarkdown(cs.lex,Ci.parse));Xi(this,"parseInline",this.parseMarkdown(cs.lexInline,Ci.parseInline));Xi(this,"Parser",Ci);Xi(this,"Renderer",Us);Xi(this,"TextRenderer",lo);Xi(this,"Lexer",cs);Xi(this,"Tokenizer",k);Xi(this,"Hooks",ft);this.use(...$)}walkTokens($,q){var ie,ae;let Q=[];for(const me of $)switch(Q=Q.concat(q.call(this,me)),me.type){case"table":{const Ce=me;for(const ze of Ce.header)Q=Q.concat(this.walkTokens(ze.tokens,q));for(const ze of Ce.rows)for(const Ye of ze)Q=Q.concat(this.walkTokens(Ye.tokens,q));break}case"list":{const Ce=me;Q=Q.concat(this.walkTokens(Ce.items,q));break}default:{const Ce=me;(ae=(ie=this.defaults.extensions)==null?void 0:ie.childTokens)!=null&&ae[Ce.type]?this.defaults.extensions.childTokens[Ce.type].forEach(ze=>{const Ye=Ce[ze].flat(1/0);Q=Q.concat(this.walkTokens(Ye,q))}):Ce.tokens&&(Q=Q.concat(this.walkTokens(Ce.tokens,q)))}}return Q}use(...$){const q=this.defaults.extensions||{renderers:{},childTokens:{}};return $.forEach(Q=>{const ie={...Q};if(ie.async=this.defaults.async||ie.async||!1,Q.extensions&&(Q.extensions.forEach(ae=>{if(!ae.name)throw new Error("extension name required");if("renderer"in ae){const me=q.renderers[ae.name];me?q.renderers[ae.name]=function(...Ce){let ze=ae.renderer.apply(this,Ce);return ze===!1&&(ze=me.apply(this,Ce)),ze}:q.renderers[ae.name]=ae.renderer}if("tokenizer"in ae){if(!ae.level||ae.level!=="block"&&ae.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const me=q[ae.level];me?me.unshift(ae.tokenizer):q[ae.level]=[ae.tokenizer],ae.start&&(ae.level==="block"?q.startBlock?q.startBlock.push(ae.start):q.startBlock=[ae.start]:ae.level==="inline"&&(q.startInline?q.startInline.push(ae.start):q.startInline=[ae.start]))}"childTokens"in ae&&ae.childTokens&&(q.childTokens[ae.name]=ae.childTokens)}),ie.extensions=q),Q.renderer){const ae=this.defaults.renderer||new Us(this.defaults);for(const me in Q.renderer){if(!(me in ae))throw new Error(`renderer '${me}' does not exist`);if(["options","parser"].includes(me))continue;const Ce=me,ze=Q.renderer[Ce],Ye=ae[Ce];ae[Ce]=(...Rt)=>{let vn=ze.apply(ae,Rt);return vn===!1&&(vn=Ye.apply(ae,Rt)),vn||""}}ie.renderer=ae}if(Q.tokenizer){const ae=this.defaults.tokenizer||new k(this.defaults);for(const me in Q.tokenizer){if(!(me in ae))throw new Error(`tokenizer '${me}' does not exist`);if(["options","rules","lexer"].includes(me))continue;const Ce=me,ze=Q.tokenizer[Ce],Ye=ae[Ce];ae[Ce]=(...Rt)=>{let vn=ze.apply(ae,Rt);return vn===!1&&(vn=Ye.apply(ae,Rt)),vn}}ie.tokenizer=ae}if(Q.hooks){const ae=this.defaults.hooks||new ft;for(const me in Q.hooks){if(!(me in ae))throw new Error(`hook '${me}' does not exist`);if(me==="options")continue;const Ce=me,ze=Q.hooks[Ce],Ye=ae[Ce];ft.passThroughHooks.has(me)?ae[Ce]=Rt=>{if(this.defaults.async)return Promise.resolve(ze.call(ae,Rt)).then(an=>Ye.call(ae,an));const vn=ze.call(ae,Rt);return Ye.call(ae,vn)}:ae[Ce]=(...Rt)=>{let vn=ze.apply(ae,Rt);return vn===!1&&(vn=Ye.apply(ae,Rt)),vn}}ie.hooks=ae}if(Q.walkTokens){const ae=this.defaults.walkTokens,me=Q.walkTokens;ie.walkTokens=function(Ce){let ze=[];return ze.push(me.call(this,Ce)),ae&&(ze=ze.concat(ae.call(this,Ce))),ze}}this.defaults={...this.defaults,...ie}}),this}setOptions($){return this.defaults={...this.defaults,...$},this}lexer($,q){return cs.lex($,q??this.defaults)}parser($,q){return Ci.parse($,q??this.defaults)}parseMarkdown($,q){return(ie,ae)=>{const me={...ae},Ce={...this.defaults,...me},ze=this.onError(!!Ce.silent,!!Ce.async);if(this.defaults.async===!0&&me.async===!1)return ze(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof ie>"u"||ie===null)return ze(new Error("marked(): input parameter is undefined or null"));if(typeof ie!="string")return ze(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(ie)+", string expected"));if(Ce.hooks&&(Ce.hooks.options=Ce),Ce.async)return Promise.resolve(Ce.hooks?Ce.hooks.preprocess(ie):ie).then(Ye=>$(Ye,Ce)).then(Ye=>Ce.hooks?Ce.hooks.processAllTokens(Ye):Ye).then(Ye=>Ce.walkTokens?Promise.all(this.walkTokens(Ye,Ce.walkTokens)).then(()=>Ye):Ye).then(Ye=>q(Ye,Ce)).then(Ye=>Ce.hooks?Ce.hooks.postprocess(Ye):Ye).catch(ze);try{Ce.hooks&&(ie=Ce.hooks.preprocess(ie));let Ye=$(ie,Ce);Ce.hooks&&(Ye=Ce.hooks.processAllTokens(Ye)),Ce.walkTokens&&this.walkTokens(Ye,Ce.walkTokens);let Rt=q(Ye,Ce);return Ce.hooks&&(Rt=Ce.hooks.postprocess(Rt)),Rt}catch(Ye){return ze(Ye)}}}onError($,q){return Q=>{if(Q.message+=`
Please report this to https://github.com/markedjs/marked.`,$){const ie="<p>An error occurred:</p><pre>"+u(Q.message+"",!0)+"</pre>";return q?Promise.resolve(ie):ie}if(q)return Promise.reject(Q);throw Q}}}const Br=new Ia;function hn(kt,$){return Br.parse(kt,$)}hn.options=hn.setOptions=function(kt){return Br.setOptions(kt),hn.defaults=Br.defaults,n(hn.defaults),hn},hn.getDefaults=t,hn.defaults=e.defaults,hn.use=function(...kt){return Br.use(...kt),hn.defaults=Br.defaults,n(hn.defaults),hn},hn.walkTokens=function(kt,$){return Br.walkTokens(kt,$)},hn.parseInline=Br.parseInline,hn.Parser=Ci,hn.parser=Ci.parse,hn.Renderer=Us,hn.TextRenderer=lo,hn.Lexer=cs,hn.lexer=cs.lex,hn.Tokenizer=k,hn.Hooks=ft,hn.parse=hn;const Vr=hn.options,ns=hn.setOptions,Wr=hn.use,ri=hn.walkTokens,Sr=hn.parseInline,la=hn,Bi=Ci.parse,rr=cs.lex;e.Hooks=ft,e.Lexer=cs,e.Marked=Ia,e.Parser=Ci,e.Renderer=Us,e.TextRenderer=lo,e.Tokenizer=k,e.getDefaults=t,e.lexer=rr,e.marked=hn,e.options=Vr,e.parse=la,e.parseInline=Sr,e.parser=Bi,e.setOptions=ns,e.use=Wr,e.walkTokens=ri})})();Mr.Hooks||nr.Hooks;Mr.Lexer||nr.Lexer;Mr.Marked||nr.Marked;Mr.Parser||nr.Parser;var fge=Mr.Renderer||nr.Renderer;Mr.TextRenderer||nr.TextRenderer;Mr.Tokenizer||nr.Tokenizer;var mje=Mr.defaults||nr.defaults;Mr.getDefaults||nr.getDefaults;var fA=Mr.lexer||nr.lexer;Mr.marked||nr.marked;Mr.options||nr.options;var gge=Mr.parse||nr.parse;Mr.parseInline||nr.parseInline;var pje=Mr.parser||nr.parser;Mr.setOptions||nr.setOptions;Mr.use||nr.use;Mr.walkTokens||nr.walkTokens;function _je(i){return JSON.stringify(i,vje)}function t7(i){let e=JSON.parse(i);return e=n7(e),e}function vje(i,e){return e instanceof RegExp?{$mid:2,source:e.source,flags:e.flags}:e}function n7(i,e=0){if(!i||e>200)return i;if(typeof i=="object"){switch(i.$mid){case 1:return Ut.revive(i);case 2:return new RegExp(i.source,i.flags);case 17:return new Date(i.source)}if(i instanceof iU||i instanceof Uint8Array)return i;if(Array.isArray(i))for(let t=0;t<i.length;++t)i[t]=n7(i[t],e+1);else for(const t in i)Object.hasOwnProperty.call(i,t)&&(i[t]=n7(i[t],e+1))}return i}const s6=Object.freeze({image:({href:i,title:e,text:t})=>{let n=[],s=[];return i&&({href:i,dimensions:n}=gje(i),s.push(`src="${JE(i)}"`)),t&&s.push(`alt="${JE(t)}"`),e&&s.push(`title="${JE(e)}"`),n.length&&(s=s.concat(n)),"<img "+s.join(" ")+">"},paragraph({tokens:i}){return`<p>${this.parser.parseInline(i)}</p>`},link({href:i,title:e,tokens:t}){let n=this.parser.parseInline(t);return typeof i!="string"?"":(i===n&&(n=i6(n)),e=typeof e=="string"?JE(i6(e)):"",i=i6(i),i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${i}" title="${e||i}" draggable="false">${n}</a>`)}});function TU(i,e={},t={}){const n=new Ze;let s=!1;const r=wU(e),o=function(_){let v;try{v=t7(decodeURIComponent(_))}catch{}return v?(v=Ide(v,y=>{if(i.uris&&i.uris[y])return Ut.revive(i.uris[y])}),encodeURIComponent(JSON.stringify(v))):_},a=function(_,v){const y=i.uris&&i.uris[_];let w=Ut.revive(y);return v?_.startsWith(Wt.data+":")?_:(w||(w=Ut.parse(_)),z4.uriToBrowserUri(w).toString(!0)):!w||Ut.parse(_).toString()===w.toString()?_:(w.query&&(w=w.with({query:o(w.query)})),w.toString())},l=new fge;l.image=s6.image,l.link=s6.link,l.paragraph=s6.paragraph;const c=[],u=[];if(e.codeBlockRendererSync?l.code=({text:_,lang:v})=>{const y=jZ.nextId(),w=e.codeBlockRendererSync($Z(v),_);return u.push([y,w]),`<div class="code" data-code="${y}">${zC(_)}</div>`}:e.codeBlockRenderer&&(l.code=({text:_,lang:v})=>{const y=jZ.nextId(),w=e.codeBlockRenderer($Z(v),_);return c.push(w.then(x=>[y,x])),`<div class="code" data-code="${y}">${zC(_)}</div>`}),e.actionHandler){const _=function(w){let x=w.target;if(!(x.tagName!=="A"&&(x=x.parentElement,!x||x.tagName!=="A")))try{let k=x.dataset.href;k&&(i.baseUri&&(k=r6(Ut.from(i.baseUri),k)),e.actionHandler.callback(k,w))}catch(k){Un(k)}finally{w.preventDefault()}},v=e.actionHandler.disposables.add(new qt(r,"click")),y=e.actionHandler.disposables.add(new qt(r,"auxclick"));e.actionHandler.disposables.add(Le.any(v.event,y.event)(w=>{const x=new iu(rt(r),w);!x.leftButton&&!x.middleButton||_(x)})),e.actionHandler.disposables.add(ge(r,"keydown",w=>{const x=new hi(w);!x.equals(10)&&!x.equals(3)||_(x)}))}i.supportHtml||(l.html=({text:_})=>{var y;return(y=e.sanitizerOptions)!=null&&y.replaceWithPlaintext?zC(_):(i.isTrusted?_.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?_:""}),t.renderer=l;let d=i.value??"";d.length>1e5&&(d=`${d.substr(0,1e5)}`),i.supportThemeIcons&&(d=sje(d));let h;if(e.fillInIncompleteTokens){const _={...mje,...t},v=fA(d,_),y=Nje(v);h=pje(y,_)}else h=gge(d,{...t,async:!1});i.supportThemeIcons&&(h=_0(h).map(v=>typeof v=="string"?v:v.outerHTML).join(""));const p=new DOMParser().parseFromString(i7({isTrusted:i.isTrusted,...e.sanitizerOptions},h),"text/html");if(p.body.querySelectorAll("img, audio, video, source").forEach(_=>{const v=_.getAttribute("src");if(v){let y=v;try{i.baseUri&&(y=r6(Ut.from(i.baseUri),y))}catch{}if(_.setAttribute("src",a(y,!0)),e.remoteImageIsAllowed){const w=Ut.parse(y);w.scheme!==Wt.file&&w.scheme!==Wt.data&&!e.remoteImageIsAllowed(w)&&_.replaceWith(ht("",void 0,_.outerHTML))}}}),p.body.querySelectorAll("a").forEach(_=>{const v=_.getAttribute("href");if(_.setAttribute("href",""),!v||/^data:|javascript:/i.test(v)||/^command:/i.test(v)&&!i.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(v))_.replaceWith(..._.childNodes);else{let y=a(v,!1);i.baseUri&&(y=r6(Ut.from(i.baseUri),v)),_.dataset.href=y}}),r.innerHTML=i7({isTrusted:i.isTrusted,...e.sanitizerOptions},p.body.innerHTML),c.length>0)Promise.all(c).then(_=>{var w;if(s)return;const v=new Map(_),y=r.querySelectorAll("div[data-code]");for(const x of y){const k=v.get(x.dataset.code??"");k&&ko(x,k)}(w=e.asyncRenderCallback)==null||w.call(e)});else if(u.length>0){const _=new Map(u),v=r.querySelectorAll("div[data-code]");for(const y of v){const w=_.get(y.dataset.code??"");w&&ko(y,w)}}if(e.asyncRenderCallback)for(const _ of r.getElementsByTagName("img")){const v=n.add(ge(_,"load",()=>{v.dispose(),e.asyncRenderCallback()}))}return{element:r,dispose:()=>{s=!0,n.dispose()}}}function $Z(i){if(!i)return"";const e=i.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:i}function r6(i,e){return/^\w[\w\d+.-]*:/.test(e)?e:i.path.endsWith("/")?HZ(i,e).toString():HZ(cje(i),e).toString()}const bje=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function i7(i,e){const{config:t,allowedSchemes:n}=wje(i),s=new Ze;s.add(qZ("uponSanitizeAttribute",(r,o)=>{var a;if(o.attrName==="style"||o.attrName==="class"){if(r.tagName==="SPAN"){if(o.attrName==="style"){o.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(border-radius:[0-9]+px;)?$/.test(o.attrValue);return}else if(o.attrName==="class"){o.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(o.attrValue);return}}o.keepAttr=!1;return}else if(r.tagName==="INPUT"&&((a=r.attributes.getNamedItem("type"))==null?void 0:a.value)==="checkbox"){if(o.attrName==="type"&&o.attrValue==="checkbox"||o.attrName==="disabled"||o.attrName==="checked"){o.keepAttr=!0;return}o.keepAttr=!1}})),s.add(qZ("uponSanitizeElement",(r,o)=>{var a;if(o.tagName==="input"&&(((a=r.attributes.getNamedItem("type"))==null?void 0:a.value)==="checkbox"?r.setAttribute("disabled",""):i.replaceWithPlaintext||r.remove()),i.replaceWithPlaintext&&!o.allowedTags[o.tagName]&&o.tagName!=="body"&&r.parentElement){let l,c;if(o.tagName==="#comment")l=`<!--${r.textContent}-->`;else{const g=bje.includes(o.tagName),p=r.attributes.length?" "+Array.from(r.attributes).map(_=>`${_.name}="${_.value}"`).join(" "):"";l=`<${o.tagName}${p}>`,g||(c=`</${o.tagName}>`)}const u=document.createDocumentFragment(),d=r.parentElement.ownerDocument.createTextNode(l);u.appendChild(d);const h=c?r.parentElement.ownerDocument.createTextNode(c):void 0;for(;r.firstChild;)u.appendChild(r.firstChild);h&&u.appendChild(h),r.nodeType===Node.COMMENT_NODE?r.parentElement.insertBefore(u,r):r.parentElement.replaceChild(u,r)}})),s.add(YFe(n));try{return whe(e,{...t,RETURN_TRUSTED_TYPE:!0})}finally{s.dispose()}}const yje=["align","autoplay","alt","checked","class","colspan","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","style","target","title","type","width","start"];function wje(i){const e=[Wt.http,Wt.https,Wt.mailto,Wt.data,Wt.file,Wt.vscodeFileResource,Wt.vscodeRemote,Wt.vscodeRemoteResource];return i.isTrusted&&e.push(Wt.command),{config:{ALLOWED_TAGS:i.allowedTags??[...QFe],ALLOWED_ATTR:yje,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}function Cje(i){return typeof i=="string"?i:Sje(i)}function Sje(i,e){let t=i.value??"";t.length>1e5&&(t=`${t.substr(0,1e5)}`);const n=gge(t,{async:!1,renderer:Eje.value}).replace(/&(#\d+|[a-zA-Z]+);/g,s=>kje.get(s)??s);return i7({isTrusted:!1},n).toString()}const kje=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function xje(){const i=new fge;return i.code=({text:e})=>e,i.blockquote=({text:e})=>e+`
`,i.html=e=>"",i.heading=function({tokens:e}){return this.parser.parseInline(e)+`
`},i.hr=()=>"",i.list=function({items:e}){return e.map(t=>this.listitem(t)).join(`
`)+`
`},i.listitem=({text:e})=>e+`
`,i.paragraph=function({tokens:e}){return this.parser.parseInline(e)+`
`},i.table=function({header:e,rows:t}){return e.map(n=>this.tablecell(n)).join(" ")+`
`+t.map(n=>n.map(s=>this.tablecell(s)).join(" ")).join(`
`)+`
`},i.tablerow=({text:e})=>e,i.tablecell=function({tokens:e}){return this.parser.parseInline(e)},i.strong=({text:e})=>e,i.em=({text:e})=>e,i.codespan=({text:e})=>e,i.br=e=>`
`,i.del=({text:e})=>e,i.image=e=>"",i.text=({text:e})=>e,i.link=({text:e})=>e,i}const Eje=new Em(i=>xje());function bD(i){let e="";return i.forEach(t=>{e+=t.raw}),e}function mge(i){var e,t;if(i.tokens)for(let n=i.tokens.length-1;n>=0;n--){const s=i.tokens[n];if(s.type==="text"){const r=s.raw.split(`
`),o=r[r.length-1];if(o.includes("`"))return Aje(i);if(o.includes("**"))return Vje(i);if(o.match(/\*\w/))return Pje(i);if(o.match(/(^|\s)__\w/))return Wje(i);if(o.match(/(^|\s)_\w/))return Mje(i);if(Tje(o)||Lje(o)&&i.tokens.slice(0,n).some(a=>a.type==="text"&&a.raw.match(/\[[^\]]*$/))){const a=i.tokens.slice(n+1);return((e=a[0])==null?void 0:e.type)==="link"&&((t=a[1])==null?void 0:t.type)==="text"&&a[1].raw.match(/^ *"[^"]*$/)||o.match(/^[^"]* +"[^"]*$/)?Fje(i):Oje(i)}else if(o.match(/(^|\s)\[\w*/))return Bje(i)}}}function Tje(i){return!!i.match(/(^|\s)\[.*\]\(\w*/)}function Lje(i){return!!i.match(/^[^\[]*\]\([^\)]*$/)}function Ije(i){var l;const e=i.items[i.items.length-1],t=e.tokens?e.tokens[e.tokens.length-1]:void 0;let n;if((t==null?void 0:t.type)==="text"&&!("inRawBlock"in e)&&(n=mge(t)),!n||n.type!=="paragraph")return;const s=bD(i.items.slice(0,-1)),r=(l=e.raw.match(/^(\s*(-|\d+\.|\*) +)/))==null?void 0:l[0];if(!r)return;const o=r+bD(e.tokens.slice(0,-1))+n.raw,a=fA(s+o)[0];if(a.type==="list")return a}const Dje=3;function Nje(i){for(let e=0;e<Dje;e++){const t=Rje(i);if(t)i=t;else break}return i}function Rje(i){let e,t;for(e=0;e<i.length;e++){const n=i[e];if(n.type==="paragraph"&&n.raw.match(/(\n|^)\|/)){t=Hje(i.slice(e));break}if(e===i.length-1&&n.type==="list"){const s=Ije(n);if(s){t=[s];break}}if(e===i.length-1&&n.type==="paragraph"){const s=mge(n);if(s){t=[s];break}}}if(t){const n=[...i.slice(0,e),...t];return n.links=i.links,n}return null}function Aje(i){return jm(i,"`")}function Pje(i){return jm(i,"*")}function Mje(i){return jm(i,"_")}function Oje(i){return jm(i,")")}function Fje(i){return jm(i,'")')}function Bje(i){return jm(i,"](https://microsoft.com)")}function Vje(i){return jm(i,"**")}function Wje(i){return jm(i,"__")}function jm(i,e){const t=bD(Array.isArray(i)?i:[i]);return fA(t+e)[0]}function Hje(i){const e=bD(i),t=e.split(`
`);let n,s=!1;for(let r=0;r<t.length;r++){const o=t[r].trim();if(typeof n>"u"&&o.match(/^\s*\|/)){const a=o.match(/(\|[^\|]+)(?=\||$)/g);a&&(n=a.length)}else if(typeof n=="number")if(o.match(/^\s*\|/)){if(r!==t.length-1)return;s=!0}else return}if(typeof n=="number"&&n>0){const r=s?t.slice(0,-1).join(`
`):e,o=!!r.match(/\|\s*$/),a=r+(o?"":"|")+`
|${" --- |".repeat(n)}`;return fA(a)}}function qZ(i,e){return Che(i,e),Dt(()=>She(i))}const kh=class kh{static createEmpty(e,t){const n=kh.defaultTokenMetadata,s=new Uint32Array(2);return s[0]=e.length,s[1]=n,new kh(s,e,t)}static createFromTextAndMetadata(e,t){let n=0,s="";const r=new Array;for(const{text:o,metadata:a}of e)r.push(n+o.length,a),n+=o.length,s+=o;return new kh(new Uint32Array(r),s,t)}constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=n}equals(e){return e instanceof kh?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const s=t<<1,r=s+(n<<1);for(let o=s;o<r;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],n=Qc.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return Qc.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return Qc.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return Qc.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[(e<<1)+1];return Qc.getInlineStyleFromMetadata(n,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return Qc.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return kh.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new LU(this,e,t,n)}static convertToEndOffset(e,t){const s=(e.length>>>1)-1;for(let r=0;r<s;r++)e[r<<1]=e[r+1<<1];e[s<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,s=(e.length>>>1)-1;for(;n<s;){const r=n+Math.floor((s-n)/2),o=e[r<<1];if(o===t)return r+1;o<t?n=r+1:o>t&&(s=r)}return n}withInserted(e){if(e.length===0)return this;let t=0,n=0,s="";const r=new Array;let o=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){s+=this._text.substring(o,a);const c=this._tokens[(t<<1)+1];r.push(s.length,c),t++,o=a}else if(l){if(l.offset>o){s+=this._text.substring(o,l.offset);const c=this._tokens[(t<<1)+1];r.push(s.length,c),o=l.offset}s+=l.text,r.push(s.length,l.tokenMetadata),n++}else break}return new kh(new Uint32Array(r),s,this.languageIdCodec)}getTokenText(e){const t=this.getStartOffset(e),n=this.getEndOffset(e);return this._text.substring(t,n)}forEach(e){const t=this.getCount();for(let n=0;n<t;n++)e(n)}};kh.defaultTokenMetadata=(32768|2<<24)>>>0;let tr=kh;class LU{constructor(e,t,n,s){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=s,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let r=this._firstTokenIndex,o=e.getCount();r<o&&!(e.getStartOffset(r)>=n);r++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof LU?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){const t=this._firstTokenIndex+e,n=this._source.getStartOffset(t),s=this._source.getEndOffset(t);let r=this._source.getTokenText(t);return n<this._startOffset&&(r=r.substring(this._startOffset-n)),s>this._endOffset&&(r=r.substring(0,r.length-(s-this._endOffset))),r}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}}const Rk=new class{clone(){return this}equals(i){return this===i}};function pge(i,e){return new RH([new vk(0,"",i)],e)}function IU(i,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(i<<0|0|0|32768|2<<24)>>>0,new W4(t,e===null?Rk:e)}const KZ={getInitialState:()=>Rk,tokenizeEncoded:(i,e,t)=>IU(0,t)};async function Uje(i,e,t){if(!t)return GZ(e,i.languageIdCodec,KZ);const n=await es.getOrCreate(t);return GZ(e,i.languageIdCodec,n||KZ)}function zje(i,e,t,n,s,r,o){let a="<div>",l=n,c=0,u=!0;for(let d=0,h=e.getCount();d<h;d++){const g=e.getEndOffset(d);if(g<=n)continue;let p="";for(;l<g&&l<s;l++){const _=i.charCodeAt(l);switch(_){case 9:{let v=r-(l+c)%r;for(c+=v-1;v>0;)o&&u?(p+="&#160;",u=!1):(p+=" ",u=!0),v--;break}case 60:p+="&lt;",u=!1;break;case 62:p+="&gt;",u=!1;break;case 38:p+="&amp;",u=!1;break;case 0:p+="&#00;",u=!1;break;case 65279:case 8232:case 8233:case 133:p+="",u=!1;break;case 13:p+="&#8203",u=!1;break;case 32:o&&u?(p+="&#160;",u=!1):(p+=" ",u=!0);break;default:p+=String.fromCharCode(_),u=!1}}if(a+=`<span style="${e.getInlineStyle(d,t)}">${p}</span>`,g>s||l>=s)break}return a+="</div>",a}function GZ(i,e,t){let n='<div class="monaco-tokenized-source">';const s=Hy(i);let r=t.getInitialState();for(let o=0,a=s.length;o<a;o++){const l=s[o];o>0&&(n+="<br/>");const c=t.tokenizeEncoded(l,!0,r);tr.convertToEndOffset(c.tokens,l.length);const d=new tr(c.tokens,l,e).inflate();let h=0;for(let g=0,p=d.getCount();g<p;g++){const _=d.getClassName(g),v=d.getEndOffset(g);n+=`<span class="${_}">${zC(l.substring(h,v))}</span>`,h=v}r=c.endState}return n+="</div>",n}var jje=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},YZ=function(i,e){return function(t,n){e(t,n,i)}},s7,E0;let r7=(E0=class{constructor(e,t,n){this._options=e,this._languageService=t,this._openerService=n,this._onDidRenderAsync=new se,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const s=new Ze,r=s.add(TU(e,{...this._getRenderOptions(e,s),...t},n));return r.element.classList.add("rendered-markdown"),{element:r.element,dispose:()=>s.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(n,s)=>{var l,c;let r;n?r=this._languageService.getLanguageIdByLanguageName(n):this._options.editor&&(r=(l=this._options.editor.getModel())==null?void 0:l.getLanguageId()),r||(r=gc);const o=await Uje(this._languageService,s,r),a=document.createElement("span");if(a.innerHTML=((c=s7._ttpTokenizer)==null?void 0:c.createHTML(o))??o,this._options.editor){const u=this._options.editor.getOption(50);Nr(a,u)}else this._options.codeBlockFontFamily&&(a.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(a.style.fontSize=this._options.codeBlockFontSize),a},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:n=>_ge(this._openerService,n,e.isTrusted),disposables:t}}}},s7=E0,E0._ttpTokenizer=N1("tokenizeToString",{createHTML(e){return e}}),E0);r7=s7=jje([YZ(1,Ws),YZ(2,Y2)],r7);async function _ge(i,e,t){try{return await i.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:$je(t)})}catch(n){return Un(n),!1}}function $je(i){return i===!0?!0:i&&Array.isArray(i.enabledCommands)?i.enabledCommands:!1}const Iu=nn("accessibilityService"),qje=new et("accessibilityModeEnabled",!1),QZ=2e4;let Vp,fL,o7,gL,a7;function Kje(i){Vp=document.createElement("div"),Vp.className="monaco-aria-container";const e=()=>{const n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),Vp.appendChild(n),n};fL=e(),o7=e();const t=()=>{const n=document.createElement("div");return n.className="monaco-status",n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),Vp.appendChild(n),n};gL=t(),a7=t(),i.appendChild(Vp)}function Ak(i){Vp&&(fL.textContent!==i?(gu(o7),wD(fL,i)):(gu(fL),wD(o7,i)))}function yD(i){Vp&&(gL.textContent!==i?(gu(a7),wD(gL,i)):(gu(gL),wD(a7,i)))}function wD(i,e){gu(i),e.length>QZ&&(e=e.substr(0,QZ)),i.textContent=e,i.style.visibility="hidden",i.style.visibility="visible"}var Gje=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},zw=function(i,e){return function(t,n){e(t,n,i)}};const zu=ht;let l7=class extends Af{get _targetWindow(){return rt(this._target.targetElements[0])}get _targetDocumentElement(){return rt(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return this._hoverPosition===2?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,n,s,r,o){var h,g,p,_,v,y,w;super(),this._keybindingService=t,this._configurationService=n,this._openerService=s,this._instantiationService=r,this._accessibilityService=o,this._messageListeners=new Ze,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new se),this._onRequestLayout=this._register(new se),this._linkHandler=e.linkHandler||(x=>_ge(this._openerService,x,nb(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new Yje(e.target),this._hoverPointer=(h=e.appearance)!=null&&h.showPointer?zu("div.workbench-hover-pointer"):void 0,this._hover=this._register(new Lze),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),(g=e.appearance)!=null&&g.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),(p=e.appearance)!=null&&p.skipFadeInAnimation&&this._hover.containerDomNode.classList.add("skip-fade-in"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),(_=e.position)!=null&&_.forcePosition&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=((v=e.position)==null?void 0:v.hoverPosition)??3,this.onmousedown(this._hover.containerDomNode,x=>x.stopPropagation()),this.onkeydown(this._hover.containerDomNode,x=>{x.equals(9)&&this.dispose()}),this._register(ge(this._targetWindow,"blur",()=>this.dispose()));const a=zu("div.hover-row.markdown-hover"),l=zu("div.hover-contents");if(typeof e.content=="string")l.textContent=e.content,l.style.whiteSpace="pre-wrap";else if(Zs(e.content))l.appendChild(e.content),l.classList.add("html-hover-contents");else{const x=e.content,k=this._instantiationService.createInstance(r7,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||il.fontFamily}),{element:T}=k.render(x,{actionHandler:{callback:R=>this._linkHandler(R),disposables:this._messageListeners},asyncRenderCallback:()=>{l.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});l.appendChild(T)}if(a.appendChild(l),this._hover.contentsDomNode.appendChild(a),e.actions&&e.actions.length>0){const x=zu("div.hover-row.status-bar"),k=zu("div.actions");e.actions.forEach(T=>{const R=this._keybindingService.lookupKeybinding(T.commandId),L=R?R.getLabel():null;yU.render(k,{label:T.label,commandId:T.commandId,run:I=>{T.run(I),this.dispose()},iconClass:T.iconClass},L)}),x.appendChild(k),this._hover.containerDomNode.appendChild(x)}this._hoverContainer=zu("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode);let c;if(e.actions&&e.actions.length>0?c=!1:((y=e.persistence)==null?void 0:y.hideOnHover)===void 0?c=typeof e.content=="string"||nb(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):c=e.persistence.hideOnHover,(w=e.appearance)!=null&&w.showHoverHint){const x=zu("div.hover-row.status-bar"),k=zu("div.info");k.textContent=S("hoverhint","Hold {0} key to mouse over",rn?"Option":"Alt"),x.appendChild(k),this._hover.containerDomNode.appendChild(x)}const u=[...this._target.targetElements];c||u.push(this._hoverContainer);const d=this._register(new XZ(u));if(this._register(d.onMouseOut(()=>{this._isLocked||this.dispose()})),c){const x=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new XZ(x)),this._register(this._lockMouseTracker.onMouseOut(()=>{this._isLocked||this.dispose()}))}else this._lockMouseTracker=d}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){const n=QH(this._hoverContainer,zu("div")),s=Qe(this._hoverContainer,zu("div"));n.tabIndex=0,s.tabIndex=0,this._register(ge(s,"focus",r=>{e.focus(),r.preventDefault()})),this._register(ge(n,"focus",r=>{t.focus(),r.preventDefault()}))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes.item(e.childNodes.length-t-1);if(n.nodeType===n.ELEMENT_NODE){const r=n;if(typeof r.tabIndex=="number"&&r.tabIndex>=0)return r}const s=this.findLastFocusableChild(n);if(s)return s}}render(e){var s;e.appendChild(this._hoverContainer);const n=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&Ize(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),(s=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))==null?void 0:s.getAriaLabel());n&&yD(n),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const e=u=>{const d=Lhe(u),h=u.getBoundingClientRect();return{top:h.top*d,bottom:h.bottom*d,right:h.right*d,left:h.left*d}},t=this._target.targetElements.map(u=>e(u)),{top:n,right:s,bottom:r,left:o}=t[0],a=s-o,l=r-n,c={top:n,right:s,bottom:r,left:o,width:a,height:l,center:{x:o+a/2,y:n+l/2}};if(this.adjustHorizontalHoverPosition(c),this.adjustVerticalHoverPosition(c),this.adjustHoverMaxHeight(c),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:c.left+=3,c.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:c.left-=3,c.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:c.top+=3,c.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:c.top-=3,c.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px";break}c.center.x=c.left+a/2,c.center.y=c.top+l/2}this.computeXCordinate(c),this.computeYCordinate(c),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(c)),this._hover.onContentsChanged()}computeXCordinate(e){const t=this._hover.containerDomNode.clientWidth+2;this._target.x!==void 0?this._x=this._target.x:this._hoverPosition===1?this._x=e.right:this._hoverPosition===0?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+2)}computeYCordinate(e){this._target.y!==void 0?this._y=this._target.y:this._hoverPosition===3?this._y=e.top:this._hoverPosition===2?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(this._target.x!==void 0)return;const t=this._hoverPointer?3:0;if(this._forcePosition){const n=t+2;this._hoverPosition===1?this._hover.containerDomNode.style.maxWidth=`${this._targetDocumentElement.clientWidth-e.right-n}px`:this._hoverPosition===0&&(this._hover.containerDomNode.style.maxWidth=`${e.left-n}px`);return}this._hoverPosition===1?this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t&&(e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=0:this._hoverPosition=2):this._hoverPosition===0&&(e.left<this._hover.containerDomNode.clientWidth+t&&(this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=1:this._hoverPosition=2),e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1))}adjustVerticalHoverPosition(e){if(this._target.y!==void 0||this._forcePosition)return;const t=this._hoverPointer?3:0;this._hoverPosition===3?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=2):this._hoverPosition===2&&e.bottom+this._hover.containerDomNode.clientHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=3)}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight/2;if(this._forcePosition){const n=(this._hoverPointer?3:0)+2;this._hoverPosition===3?t=Math.min(t,e.top-n):this._hoverPosition===2&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-n))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const n=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==n&&(this._hover.contentsDomNode.style.paddingRight=n)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(this._hoverPosition===0?"right":"left");const t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=`${e.center.y-(this._y-t)-3}px`:this._hoverPointer.style.top=`${Math.round(t/2)-3}px`;break}case 3:case 2:{this._hoverPointer.classList.add(this._hoverPosition===3?"bottom":"top");const t=this._hover.containerDomNode.clientWidth;let n=Math.round(t/2)-3;const s=this._x+n;(s<e.left||s>e.right)&&(n=e.center.x-this._x-3),this._hoverPointer.style.left=`${n}px`;break}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};l7=Gje([zw(1,yr),zw(2,Oi),zw(3,Y2),zw(4,Pn),zw(5,Iu)],l7);class XZ extends Af{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e){super(),this._elements=e,this._isMouseIn=!0,this._onMouseOut=this._register(new se),this._elements.forEach(t=>this.onmouseover(t,()=>this._onTargetMouseOver(t))),this._elements.forEach(t=>this.onmouseleave(t,()=>this._onTargetMouseLeave(t)))}_onTargetMouseOver(e){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(e)}_onTargetMouseLeave(e){this._isMouseIn=!1,this._evaluateMouseState(e)}_evaluateMouseState(e){this._clearEvaluateMouseStateTimeout(e),this._mouseTimeout=rt(e).setTimeout(()=>this._fireIfMouseOutside(),0)}_clearEvaluateMouseStateTimeout(e){this._mouseTimeout&&(rt(e).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class Yje{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}}var Lr;(function(i){function e(r,o){if(r.start>=o.end||o.start>=r.end)return{start:0,end:0};const a=Math.max(r.start,o.start),l=Math.min(r.end,o.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}i.intersect=e;function t(r){return r.end-r.start<=0}i.isEmpty=t;function n(r,o){return!t(e(r,o))}i.intersects=n;function s(r,o){const a=[],l={start:r.start,end:Math.min(o.start,r.end)},c={start:Math.max(o.end,r.start),end:r.end};return t(l)||a.push(l),t(c)||a.push(c),a}i.relativeComplement=s})(Lr||(Lr={}));function Qje(i){const e=i;return!!e&&typeof e.x=="number"&&typeof e.y=="number"}var Ug;(function(i){i[i.AVOID=0]="AVOID",i[i.ALIGN=1]="ALIGN"})(Ug||(Ug={}));function av(i,e,t){const n=t.mode===Ug.ALIGN?t.offset:t.offset+t.size,s=t.mode===Ug.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=i-n?n:e<=s?s-e:Math.max(i-e,0):e<=s?s-e:e<=i-n?n:0}const Iv=class Iv extends be{constructor(e,t){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=be.None,this.toDisposeOnSetContainer=be.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=ht(".context-view"),hX(this.view),this.setContainer(e,t),this._register(Dt(()=>this.setContainer(null,1)))}setContainer(e,t){var s;this.useFixedPosition=t!==1;const n=this.useShadowDOM;if(this.useShadowDOM=t===3,!(e===this.container&&n===this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.view.remove(),this.shadowRoot&&(this.shadowRoot=null,(s=this.shadowRootHostElement)==null||s.remove(),this.shadowRootHostElement=null),this.container=null),e)){if(this.container=e,this.useShadowDOM){this.shadowRootHostElement=ht(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const o=document.createElement("style");o.textContent=Xje,this.shadowRoot.appendChild(o),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(ht("slot"))}else this.container.appendChild(this.view);const r=new Ze;Iv.BUBBLE_UP_EVENTS.forEach(o=>{r.add(Vs(this.container,o,a=>{this.onDOMEvent(a,!1)}))}),Iv.BUBBLE_DOWN_EVENTS.forEach(o=>{r.add(Vs(this.container,o,a=>{this.onDOMEvent(a,!0)},!0))}),this.toDisposeOnSetContainer=r}}show(e){var t,n;this.isVisible()&&this.hide(),gu(this.view),this.view.className="context-view monaco-component",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex=`${2575+(e.layer??0)}`,this.view.style.position=this.useFixedPosition?"fixed":"absolute",Ahe(this.view),this.toDisposeOnClean=e.render(this.view)||be.None,this.delegate=e,this.doLayout(),(n=(t=this.delegate).focus)==null||n.call(t)}getViewElement(){return this.view}layout(){var e,t;if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(X0&&uhe.pointerEvents)){this.hide();return}(t=(e=this.delegate)==null?void 0:e.layout)==null||t.call(e),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(Zs(e)){const h=Nl(e),g=Lhe(e);t={top:h.top*g,left:h.left*g,width:h.width*g,height:h.height*g}}else Qje(e)?t={top:e.y,left:e.x,width:e.width||1,height:e.height||2}:t={top:e.posy,left:e.posx,width:2,height:2};const n=qH(this.view),s=l8(this.view),r=this.delegate.anchorPosition||0,o=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;const u=mC();if(a===0){const h={offset:t.top-u.pageYOffset,size:t.height,position:r===0?0:1},g={offset:t.left,size:t.width,position:o===0?0:1,mode:Ug.ALIGN};l=av(u.innerHeight,s,h)+u.pageYOffset,Lr.intersects({start:l,end:l+s},{start:h.offset,end:h.offset+h.size})&&(g.mode=Ug.AVOID),c=av(u.innerWidth,n,g)}else{const h={offset:t.left,size:t.width,position:o===0?0:1},g={offset:t.top,size:t.height,position:r===0?0:1,mode:Ug.ALIGN};c=av(u.innerWidth,n,h),Lr.intersects({start:c,end:c+n},{start:h.offset,end:h.offset+h.size})&&(g.mode=Ug.AVOID),l=av(u.innerHeight,s,g)+u.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(r===0?"bottom":"top"),this.view.classList.add(o===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const d=Nl(this.container);this.view.style.top=`${l-(this.useFixedPosition?Nl(this.view).top:d.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?Nl(this.view).left:d.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),hX(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,rt(e).document.activeElement):t&&!Fs(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}};Iv.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],Iv.BUBBLE_DOWN_EVENTS=["click"];let c7=Iv;const Xje=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var Zje=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Jje=function(i,e){return function(t,n){e(t,n,i)}};let CD=class extends be{constructor(e){super(),this.layoutService=e,this.contextView=this._register(new c7(this.layoutService.mainContainer,1)),this.layout(),this._register(e.onDidLayoutContainer(()=>this.layout()))}showContextView(e,t,n){let s;t?t===this.layoutService.getContainer(rt(t))?s=1:n?s=3:s=2:s=1,this.contextView.setContainer(t??this.layoutService.activeContainer,s),this.contextView.show(e);const r={close:()=>{this.openContextView===r&&this.hideContextView()}};return this.openContextView=r,r}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e),this.openContextView=void 0}};CD=Zje([Jje(0,zm)],CD);class e$e extends CD{getContextViewElement(){return this.contextView.getViewElement()}}class t$e{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}async update(e,t,n){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let s;if(e===void 0||nl(e)||Zs(e))s=e;else if(!FI(e.markdown))s=e.markdown??e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(S("iconLabel.loading","Loading..."),t,n),this._cancellationTokenSource=new Wy;const r=this._cancellationTokenSource.token;if(s=await e.markdown(r),s===void 0&&(s=e.markdownNotSupportedFallback),this.isDisposed||r.isCancellationRequested)return}this.show(s,t,n)}show(e,t,n){var r;const s=this._hoverWidget;if(this.hasContent(e)){const o={content:e,target:this.target,actions:n==null?void 0:n.actions,linkHandler:n==null?void 0:n.linkHandler,trapFocus:n==null?void 0:n.trapFocus,appearance:{showPointer:this.hoverDelegate.placement==="element",skipFadeInAnimation:!this.fadeInAnimation||!!s,showHoverHint:(r=n==null?void 0:n.appearance)==null?void 0:r.showHoverHint},position:{hoverPosition:2}};this._hoverWidget=this.hoverDelegate.showHover(o,t)}s==null||s.dispose()}hasContent(e){return e?nb(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)==null?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)==null||e.dispose(),(t=this._cancellationTokenSource)==null||t.dispose(!0),this._cancellationTokenSource=void 0}}var n$e=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},jw=function(i,e){return function(t,n){e(t,n,i)}};let u7=class extends be{constructor(e,t,n,s,r){super(),this._instantiationService=e,this._keybindingService=n,this._layoutService=s,this._accessibilityService=r,this._managedHovers=new Map,t.onDidShowContextMenu(()=>this.hideHover()),this._contextViewHandler=this._register(new CD(this._layoutService))}showHover(e,t,n){var l,c,u,d;if(ZZ(this._currentHoverOptions)===ZZ(e)||this._currentHover&&((c=(l=this._currentHoverOptions)==null?void 0:l.persistence)!=null&&c.sticky))return;this._currentHoverOptions=e,this._lastHoverOptions=e;const s=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),r=ro();n||(s&&r?r.classList.contains("monaco-hover")||(this._lastFocusedElementBeforeOpen=r):this._lastFocusedElementBeforeOpen=void 0);const o=new Ze,a=this._instantiationService.createInstance(l7,e);if((u=e.persistence)!=null&&u.sticky&&(a.isLocked=!0),a.onDispose(()=>{var g,p;((g=this._currentHover)==null?void 0:g.domNode)&&Dhe(this._currentHover.domNode)&&((p=this._lastFocusedElementBeforeOpen)==null||p.focus()),this._currentHoverOptions===e&&(this._currentHoverOptions=void 0),o.dispose()},void 0,o),!e.container){const h=Zs(e.target)?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer(rt(h))}if(this._contextViewHandler.showContextView(new i$e(a,t),e.container),a.onRequestLayout(()=>this._contextViewHandler.layout(),void 0,o),(d=e.persistence)!=null&&d.sticky)o.add(ge(rt(e.container).document,De.MOUSE_DOWN,h=>{Fs(h.target,a.domNode)||this.doHideHover()}));else{if("targetElements"in e.target)for(const g of e.target.targetElements)o.add(ge(g,De.CLICK,()=>this.hideHover()));else o.add(ge(e.target,De.CLICK,()=>this.hideHover()));const h=ro();if(h){const g=rt(h).document;o.add(ge(h,De.KEY_DOWN,p=>{var _;return this._keyDown(p,a,!!((_=e.persistence)!=null&&_.hideOnKeyDown))})),o.add(ge(g,De.KEY_DOWN,p=>{var _;return this._keyDown(p,a,!!((_=e.persistence)!=null&&_.hideOnKeyDown))})),o.add(ge(h,De.KEY_UP,p=>this._keyUp(p,a))),o.add(ge(g,De.KEY_UP,p=>this._keyUp(p,a)))}}if("IntersectionObserver"in Kn){const h=new IntersectionObserver(p=>this._intersectionChange(p,a),{threshold:0}),g="targetElements"in e.target?e.target.targetElements[0]:e.target;h.observe(g),o.add(Dt(()=>h.disconnect()))}return this._currentHover=a,a}hideHover(){var e;(e=this._currentHover)!=null&&e.isLocked||!this._currentHoverOptions||this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showHover(this._lastHoverOptions,!0,!0)}_keyDown(e,t,n){var o,a;if(e.key==="Alt"){t.isLocked=!0;return}const s=new hi(e);this._keybindingService.resolveKeyboardEvent(s).getSingleModifierDispatchChords().some(l=>!!l)||this._keybindingService.softDispatch(s,s.target).kind!==0||n&&(!((o=this._currentHoverOptions)!=null&&o.trapFocus)||e.key!=="Tab")&&(this.hideHover(),(a=this._lastFocusedElementBeforeOpen)==null||a.focus())}_keyUp(e,t){var n;e.key==="Alt"&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),(n=this._lastFocusedElementBeforeOpen)==null||n.focus()))}setupManagedHover(e,t,n,s){t.setAttribute("custom-hover","true"),t.title!==""&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",t.title),t.title="");let r,o;const a=(x,k)=>{var R;const T=o!==void 0;x&&(o==null||o.dispose(),o=void 0),k&&(r==null||r.dispose(),r=void 0),T&&((R=e.onDidHideHover)==null||R.call(e),o=void 0)},l=(x,k,T,R)=>new x1(async()=>{(!o||o.isDisposed)&&(o=new t$e(e,T||t,x>0),await o.update(typeof n=="function"?n():n,k,{...s,trapFocus:R}))},x);let c=!1;const u=ge(t,De.MOUSE_DOWN,()=>{c=!0,a(!0,!0)},!0),d=ge(t,De.MOUSE_UP,()=>{c=!1},!0),h=ge(t,De.MOUSE_LEAVE,x=>{c=!1,a(!1,x.fromElement===t)},!0),g=x=>{if(r)return;const k=new Ze,T={targetElements:[t],dispose:()=>{}};if(e.placement===void 0||e.placement==="mouse"){const R=L=>{T.x=L.x+10,Zs(L.target)&&JZ(L.target,t)!==t&&a(!0,!0)};k.add(ge(t,De.MOUSE_MOVE,R,!0))}r=k,!(Zs(x.target)&&JZ(x.target,t)!==t)&&k.add(l(e.delay,!1,T))},p=ge(t,De.MOUSE_OVER,g,!0),_=()=>{if(c||r)return;const x={targetElements:[t],dispose:()=>{}},k=new Ze,T=()=>a(!0,!0);k.add(ge(t,De.BLUR,T,!0)),k.add(l(e.delay,!1,x)),r=k};let v;const y=t.tagName.toLowerCase();y!=="input"&&y!=="textarea"&&(v=ge(t,De.FOCUS,_,!0));const w={show:x=>{a(!1,!0),l(0,x,void 0,x)},hide:()=>{a(!0,!0)},update:async(x,k)=>{n=x,await(o==null?void 0:o.update(n,void 0,k))},dispose:()=>{this._managedHovers.delete(t),p.dispose(),h.dispose(),u.dispose(),d.dispose(),v==null||v.dispose(),a(!0,!0)}};return this._managedHovers.set(t,w),w}showManagedHover(e){const t=this._managedHovers.get(e);t&&t.show(!0)}dispose(){this._managedHovers.forEach(e=>e.dispose()),super.dispose()}};u7=n$e([jw(0,Pn),jw(1,Rf),jw(2,yr),jw(3,zm),jw(4,Iu)],u7);function ZZ(i){if(i!==void 0)return(i==null?void 0:i.id)??i}class i$e{get anchorPosition(){return this._hover.anchor}constructor(e,t=!1){this._hover=e,this._focus=t,this.layer=1}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}function JZ(i,e){for(e=e??rt(i).document.body;!i.hasAttribute("custom-hover")&&i!==e;)i=i.parentElement;return i}_n(K2,u7,1);Nf((i,e)=>{const t=i.getColor(UHe);t&&(e.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`))});const s$e=nn("IWorkspaceEditService");class DU{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(v0.is(t))return v0.lift(t);if(ib.is(t))return ib.lift(t);throw new Error("Unsupported edit")})}}class v0 extends DU{static is(e){return e instanceof v0?!0:Xo(e)&&Ut.isUri(e.resource)&&Xo(e.textEdit)}static lift(e){return e instanceof v0?e:new v0(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,n=void 0,s){super(s),this.resource=e,this.textEdit=t,this.versionId=n}}class ib extends DU{static is(e){return e instanceof ib?!0:Xo(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof ib?e:new ib(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,n={},s){super(s),this.oldResource=e,this.newResource=t,this.options=n}}const lr={enableSplitViewResizing:!0,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0,useTrueInlineView:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0,compactMode:!1},r$e=Object.freeze({id:"editor",order:5,type:"object",title:S("editorConfigurationTitle","Editor"),scope:5}),SD={...r$e,properties:{"editor.tabSize":{type:"number",default:Ir.tabSize,minimum:1,markdownDescription:S("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:S("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:Ir.insertSpaces,markdownDescription:S("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:Ir.detectIndentation,markdownDescription:S("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:Ir.trimAutoWhitespace,description:S("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Ir.largeFileOptimizations,description:S("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[S("wordBasedSuggestions.off","Turn off Word Based Suggestions."),S("wordBasedSuggestions.currentDocument","Only suggest words from the active document."),S("wordBasedSuggestions.matchingDocuments","Suggest words from all open documents of the same language."),S("wordBasedSuggestions.allDocuments","Suggest words from all open documents.")],description:S("wordBasedSuggestions","Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[S("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),S("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),S("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:S("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:S("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:S("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!0,description:S("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:S("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:S("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.experimental.treeSitterTelemetry":{type:"boolean",default:!1,markdownDescription:S("editor.experimental.treeSitterTelemetry","Controls whether tree sitter parsing should be turned on and telemetry collected. Setting `editor.experimental.preferTreeSitter` for specific languages will take precedence."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:S("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:S("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:S("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:S("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:S("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:S("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:lr.maxComputationTime,description:S("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:lr.maxFileSize,description:S("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:lr.renderSideBySide,description:S("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:lr.renderSideBySideInlineBreakpoint,description:S("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:lr.useInlineViewWhenSpaceIsLimited,description:S("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:lr.renderMarginRevertIcon,description:S("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:lr.renderGutterMenu,description:S("renderGutterMenu","When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:lr.ignoreTrimWhitespace,description:S("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:lr.renderIndicators,description:S("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:lr.diffCodeLens,description:S("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:lr.diffWordWrap,markdownEnumDescriptions:[S("wordWrap.off","Lines will never wrap."),S("wordWrap.on","Lines will wrap at the viewport width."),S("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:lr.diffAlgorithm,markdownEnumDescriptions:[S("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),S("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:lr.hideUnchangedRegions.enabled,markdownDescription:S("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:lr.hideUnchangedRegions.revealLineCount,markdownDescription:S("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:lr.hideUnchangedRegions.minimumLineCount,markdownDescription:S("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:lr.hideUnchangedRegions.contextLineCount,markdownDescription:S("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:lr.experimental.showMoves,markdownDescription:S("showMoves","Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:lr.experimental.showEmptyDecorations,description:S("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")},"diffEditor.experimental.useTrueInlineView":{type:"boolean",default:lr.experimental.useTrueInlineView,description:S("useTrueInlineView","If enabled and the editor uses the inline view, word changes are rendered inline.")}}};function o$e(i){return typeof i.type<"u"||typeof i.anyOf<"u"}for(const i of Z_){const e=i.schema;if(typeof e<"u")if(o$e(e))SD.properties[`editor.${i.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(SD.properties[t]=e[t])}let eT=null;function vge(){return eT===null&&(eT=Object.create(null),Object.keys(SD.properties).forEach(i=>{eT[i]=!0})),eT}function a$e(i){return vge()[`editor.${i}`]||!1}function l$e(i){return vge()[`diffEditor.${i}`]||!1}const c$e=ir.as(R1.Configuration);c$e.registerConfiguration(SD);class u$e{static insert(e,t){return{range:new J(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}function tT(i){return Object.isFrozen(i)?i:L9e(i)}class Qs{static createEmptyModel(e){return new Qs({},[],[],void 0,e)}constructor(e,t,n,s,r){this._contents=e,this._keys=t,this._overrides=n,this.raw=s,this.logService=r,this.overrideConfigurations=new Map}get rawConfiguration(){var e;if(!this._rawConfiguration)if((e=this.raw)!=null&&e.length){const t=this.raw.map(n=>{if(n instanceof Qs)return n;const s=new d$e("",this.logService);return s.parseRaw(n),s.configurationModel});this._rawConfiguration=t.reduce((n,s)=>s===n?s:n.merge(s),t[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?TX(this.contents,e):this.contents}inspect(e,t){const n=this;return{get value(){return tT(n.rawConfiguration.getValue(e))},get override(){return t?tT(n.rawConfiguration.getOverrideValue(e,t)):void 0},get merged(){return tT(t?n.rawConfiguration.override(t).getValue(e):n.rawConfiguration.getValue(e))},get overrides(){const s=[];for(const{contents:r,identifiers:o,keys:a}of n.rawConfiguration.overrides){const l=new Qs(r,a,[],void 0,n.logService).getValue(e);l!==void 0&&s.push({identifiers:o,value:l})}return s.length?tT(s):void 0}}}getOverrideValue(e,t){const n=this.getContentsForOverrideIdentifer(t);return n?e?TX(n,e):n:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){var o,a;const t=yg(this.contents),n=yg(this.overrides),s=[...this.keys],r=(o=this.raw)!=null&&o.length?[...this.raw]:[this];for(const l of e)if(r.push(...(a=l.raw)!=null&&a.length?l.raw:[l]),!l.isEmpty()){this.mergeContents(t,l.contents);for(const c of l.overrides){const[u]=n.filter(d=>ks(d.identifiers,c.identifiers));u?(this.mergeContents(u.contents,c.contents),u.keys.push(...c.keys),u.keys=Q0(u.keys)):n.push(yg(c))}for(const c of l.keys)s.indexOf(c)===-1&&s.push(c)}return new Qs(t,s,n,r.every(l=>l instanceof Qs)?void 0:r,this.logService)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const n={};for(const s of Q0([...Object.keys(this.contents),...Object.keys(t)])){let r=this.contents[s];const o=t[s];o&&(typeof r=="object"&&typeof o=="object"?(r=yg(r),this.mergeContents(r,o)):r=o),n[s]=r}return new Qs(n,this.keys,this.overrides,void 0,this.logService)}mergeContents(e,t){for(const n of Object.keys(t)){if(n in e&&Xo(e[n])&&Xo(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=yg(t[n])}}getContentsForOverrideIdentifer(e){let t=null,n=null;const s=r=>{r&&(n?this.mergeContents(n,r):n=yg(r))};for(const r of this.overrides)r.identifiers.length===1&&r.identifiers[0]===e?t=r.contents:r.identifiers.includes(e)&&s(r.contents);return s(t),n}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);t!==-1&&(this.keys.splice(t,1),dVe(this.contents,e),Im.test(e)&&this.overrides.splice(this.overrides.findIndex(n=>ks(n.identifiers,eD(e))),1))}updateValue(e,t,n){if(Qhe(this.contents,e,t,s=>this.logService.error(s)),n=n||this.keys.indexOf(e)===-1,n&&this.keys.push(e),Im.test(e)){const s=eD(e),r={identifiers:s,keys:Object.keys(this.contents[e]),contents:v8(this.contents[e],a=>this.logService.error(a))},o=this.overrides.findIndex(a=>ks(a.identifiers,s));o!==-1?this.overrides[o]=r:this.overrides.push(r)}}}class d$e{constructor(e,t){this._name=e,this.logService=t,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||Qs.createEmptyModel(this.logService)}parseRaw(e,t){this._raw=e;const{contents:n,keys:s,overrides:r,restricted:o,hasExcludedProperties:a}=this.doParseRaw(e,t);this._configurationModel=new Qs(n,s,r,a?[e]:void 0,this.logService),this._restrictedConfigurations=o||[]}doParseRaw(e,t){const n=ir.as(R1.Configuration).getConfigurationProperties(),s=this.filter(e,n,!0,t);e=s.raw;const r=v8(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`)),o=Object.keys(e),a=this.toOverrides(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`));return{contents:r,keys:o,overrides:a,restricted:s.restricted,hasExcludedProperties:s.hasExcludedProperties}}filter(e,t,n,s){var l,c,u;let r=!1;if(!(s!=null&&s.scopes)&&!(s!=null&&s.skipRestricted)&&!((l=s==null?void 0:s.exclude)!=null&&l.length))return{raw:e,restricted:[],hasExcludedProperties:r};const o={},a=[];for(const d in e)if(Im.test(d)&&n){const h=this.filter(e[d],t,!1,s);o[d]=h.raw,r=r||h.hasExcludedProperties,a.push(...h.restricted)}else{const h=t[d],g=h?typeof h.scope<"u"?h.scope:3:void 0;h!=null&&h.restricted&&a.push(d),!((c=s.exclude)!=null&&c.includes(d))&&((u=s.include)!=null&&u.includes(d)||(g===void 0||s.scopes===void 0||s.scopes.includes(g))&&!(s.skipRestricted&&(h!=null&&h.restricted)))?o[d]=e[d]:r=!0}return{raw:o,restricted:a,hasExcludedProperties:r}}toOverrides(e,t){const n=[];for(const s of Object.keys(e))if(Im.test(s)){const r={};for(const o in e[s])r[o]=e[s][o];n.push({identifiers:eD(s),keys:Object.keys(r),contents:v8(r,t)})}return n}}class h$e{constructor(e,t,n,s,r,o,a,l,c,u,d,h,g){this.key=e,this.overrides=t,this._value=n,this.overrideIdentifiers=s,this.defaultConfiguration=r,this.policyConfiguration=o,this.applicationConfiguration=a,this.userConfiguration=l,this.localUserConfiguration=c,this.remoteUserConfiguration=u,this.workspaceConfiguration=d,this.folderConfigurationModel=h,this.memoryConfigurationModel=g}toInspectValue(e){return(e==null?void 0:e.value)!==void 0||(e==null?void 0:e.override)!==void 0||(e==null?void 0:e.overrides)!==void 0?e:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.toInspectValue(this.userInspectValue)}}class gA{constructor(e,t,n,s,r,o,a,l,c,u){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=n,this._localUserConfiguration=s,this._remoteUserConfiguration=r,this._workspaceConfiguration=o,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this.logService=u,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new sl,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidatedConfigurationModel(e,t,n).getValue(e)}updateValue(e,t,n={}){let s;n.resource?(s=this._memoryConfigurationByResource.get(n.resource),s||(s=Qs.createEmptyModel(this.logService),this._memoryConfigurationByResource.set(n.resource,s))):s=this._memoryConfiguration,t===void 0?s.removeValue(e):s.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,n){const s=this.getConsolidatedConfigurationModel(e,t,n),r=this.getFolderConfigurationModelForResource(t.resource,n),o=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=new Set;for(const l of s.overrides)for(const c of l.identifiers)s.getOverrideValue(e,c)!==void 0&&a.add(c);return new h$e(e,t,s.getValue(e),a.size?[...a]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,n?this._workspaceConfiguration:void 0,r||void 0,o)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,n){let s=this.getConsolidatedConfigurationModelForResource(t,n);return t.overrideIdentifier&&(s=s.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(s=s.merge(this._policyConfiguration)),s}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const s=t.getFolder(e);s&&(n=this.getFolderConsolidatedConfiguration(s.uri)||n);const r=this._memoryConfigurationByResource.get(e);r&&(n=n.merge(r))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),s=this._folderConfigurations.get(e);s?(t=n.merge(s),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const n=t.getFolder(e);if(n)return this._folderConfigurations.get(n.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:n,overrides:s,keys:r}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:s,keys:r}]),e},[])}}static parse(e,t){const n=this.parseConfigurationModel(e.defaults,t),s=this.parseConfigurationModel(e.policy,t),r=this.parseConfigurationModel(e.application,t),o=this.parseConfigurationModel(e.user,t),a=this.parseConfigurationModel(e.workspace,t),l=e.folders.reduce((c,u)=>(c.set(Ut.revive(u[0]),this.parseConfigurationModel(u[1],t)),c),new sl);return new gA(n,s,r,o,Qs.createEmptyModel(t),a,l,Qs.createEmptyModel(t),new sl,t)}static parseConfigurationModel(e,t){return new Qs(e.contents,e.keys,e.overrides,void 0,t)}}class f$e{constructor(e,t,n,s,r){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=s,this.logService=r,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const o of e.keys)this.affectedKeys.add(o);for(const[,o]of e.overrides)for(const a of o)this.affectedKeys.add(a);this._affectsConfigStr=this._marker;for(const o of this.affectedKeys)this._affectsConfigStr+=o+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=gA.parse(this.previous.data,this.logService)),this._previousConfiguration}affectsConfiguration(e,t){var a;const n=this._marker+e,s=this._affectsConfigStr.indexOf(n);if(s<0)return!1;const r=s+n.length;if(r>=this._affectsConfigStr.length)return!1;const o=this._affectsConfigStr.charCodeAt(r);if(o!==this._markerCode1&&o!==this._markerCode2)return!1;if(t){const l=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(a=this.previous)==null?void 0:a.workspace):void 0,c=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!wa(l,c)}return!0}}class g$e{constructor(){this._onDidChange=new se,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}const QC=new g$e,kD={kind:0},m$e={kind:1};function p$e(i,e,t){return{kind:2,commandId:i,commandArgs:e,isBubble:t}}class XC{constructor(e,t,n){var s;this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const r of e){const o=r.command;o&&o.charAt(0)!=="-"&&this._defaultBoundCommands.set(o,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=XC.handleRemovals([].concat(e).concat(t));for(let r=0,o=this._keybindings.length;r<o;r++){const a=this._keybindings[r];if(a.chords.length===0)continue;const l=(s=a.when)==null?void 0:s.substituteConstants();l&&l.type===0||this._addKeyPress(a.chords[0],a)}}static _isTargetedForRemoval(e,t,n){if(t){for(let s=0;s<t.length;s++)if(t[s]!==e.chords[s])return!1}return!(n&&n.type!==1&&(!e.when||!wBe(n,e.when)))}static handleRemovals(e){const t=new Map;for(let s=0,r=e.length;s<r;s++){const o=e[s];if(o.command&&o.command.charAt(0)==="-"){const a=o.command.substring(1);t.has(a)?t.get(a).push(o):t.set(a,[o])}}if(t.size===0)return e;const n=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];if(!o.command||o.command.length===0){n.push(o);continue}if(o.command.charAt(0)==="-")continue;const a=t.get(o.command);if(!a||!o.isDefault){n.push(o);continue}let l=!1;for(const c of a){const u=c.when;if(this._isTargetedForRemoval(o,c.chords,u)){l=!0;break}}if(!l){n.push(o);continue}}return n}_addKeyPress(e,t){const n=this._map.get(e);if(typeof n>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let s=n.length-1;s>=0;s--){const r=n[s];if(r.command===t.command)continue;let o=!0;for(let a=1;a<r.chords.length&&a<t.chords.length;a++)if(r.chords[a]!==t.chords[a]){o=!1;break}o&&XC.whenIsEntirelyIncluded(r.when,t.when)&&this._removeFromLookupMap(r)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let n=0,s=t.length;n<s;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:g8(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const n=this._lookupMap.get(e);if(typeof n>"u"||n.length===0)return null;if(n.length===1)return n[0];for(let s=n.length-1;s>=0;s--){const r=n[s];if(t.contextMatchesRules(r.when))return r}return n[n.length-1]}resolve(e,t,n){const s=[...t,n];this._log(`| Resolving ${s}`);const r=this._map.get(s[0]);if(r===void 0)return this._log("\\ No keybinding entries."),kD;let o=null;if(s.length<2)o=r;else{o=[];for(let l=0,c=r.length;l<c;l++){const u=r[l];if(s.length>u.chords.length)continue;let d=!0;for(let h=1;h<s.length;h++)if(u.chords[h]!==s[h]){d=!1;break}d&&o.push(u)}}const a=this._findCommand(e,o);return a?s.length<a.chords.length?(this._log(`\\ From ${o.length} keybinding entries, awaiting ${a.chords.length-s.length} more chord(s), when: ${eJ(a.when)}, source: ${tJ(a)}.`),m$e):(this._log(`\\ From ${o.length} keybinding entries, matched ${a.command}, when: ${eJ(a.when)}, source: ${tJ(a)}.`),p$e(a.command,a.commandArgs,a.bubble)):(this._log(`\\ From ${o.length} keybinding entries, no when clauses matched the context.`),kD)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){const s=t[n];if(XC._contextMatchesRules(e,s.when))return s}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function eJ(i){return i?`${i.serialize()}`:"no when condition"}function tJ(i){return i.extensionId?i.isBuiltinExtension?`built-in extension ${i.extensionId}`:`user extension ${i.extensionId}`:i.isDefault?"built-in":"user"}const _$e=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class v$e extends be{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:Le.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,n,s,r){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=s,this._logService=r,this._onDidUpdateKeybindings=this._register(new se),this._currentChords=[],this._currentChordChecker=new HH,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=lv.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new x1,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const n=this.resolveKeyboardEvent(e);if(n.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),kD;const[s]=n.getDispatchChords();if(s===null)return this._log("\\ Keyboard event cannot be dispatched"),kD;const r=this._contextKeyService.getContext(t),o=this._currentChords.map(({keypress:a})=>a);return this._getResolver().resolve(r,o,s)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-e>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw TH("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(S("first.chord","({0}) was pressed. Waiting for second key of chord...",t));break;default:{const n=this._currentChords.map(({label:s})=>s).join(", ");this._currentChordStatusMessage=this._notificationService.status(S("next.chord","({0}) was pressed. Waiting for next key of chord...",n))}}this._scheduleLeaveChordMode(),QC.enabled&&QC.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],QC.enable()}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[s]=n.getSingleModifierDispatchChords();if(s)return this._ignoreSingleModifiers.has(s)?(this._log(`+ Ignoring single modifier ${s} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=lv.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=lv.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${s}.`),this._currentSingleModifier=s,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):s===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${s} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[r]=n.getChords();return this._ignoreSingleModifiers=new lv(r),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,n=!1){let s=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let r=null,o=null;if(n){const[u]=e.getSingleModifierDispatchChords();r=u,o=u?[u]:[]}else[r]=e.getDispatchChords(),o=this._currentChords.map(({keypress:u})=>u);if(r===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),s;const a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,o,r);switch(c.kind){case 0:{if(this._logService.trace("KeybindingService#dispatch",l,"[ No matching keybinding ]"),this.inChordMode){const u=this._currentChords.map(({label:d})=>d).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${u}, ${l}".`),this._notificationService.status(S("missing.chord","The key combination ({0}, {1}) is not a command.",u,l),{hideAfter:10*1e3}),this._leaveChordMode(),s=!0}return s}case 1:return this._logService.trace("KeybindingService#dispatch",l,"[ Several keybindings match - more chords needed ]"),s=!0,this._expectAnotherChord(r,l),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),s;case 2:{if(this._logService.trace("KeybindingService#dispatch",l,`[ Will dispatch command ${c.commandId} ]`),c.commandId===null||c.commandId===""){if(this.inChordMode){const u=this._currentChords.map(({label:d})=>d).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${u}, ${l}".`),this._notificationService.status(S("missing.chord","The key combination ({0}, {1}) is not a command.",u,l),{hideAfter:10*1e3}),this._leaveChordMode(),s=!0}}else{this.inChordMode&&this._leaveChordMode(),c.isBubble||(s=!0),this._log(`+ Invoking command ${c.commandId}.`),this._currentlyDispatchingCommandId=c.commandId;try{typeof c.commandArgs>"u"?this._commandService.executeCommand(c.commandId).then(void 0,u=>this._notificationService.warn(u)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,u=>this._notificationService.warn(u))}finally{this._currentlyDispatchingCommandId=null}_$e.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding",detail:e.getUserSettingsLabel()??void 0})}return s}}}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}const QN=class QN{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}};QN.EMPTY=new QN(null);let lv=QN;class nJ{constructor(e,t,n,s,r,o,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?d7(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=d7(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=s,this.isDefault=r,this.extensionId=o,this.isBuiltinExtension=a}}function d7(i){const e=[];for(let t=0,n=i.length;t<n;t++){const s=i[t];if(!s)return[];e.push(s)}return e}class mA{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=n(a);if(l===null)return null;s[r]=C$e(a,l,this.modifierLabels[e])}return s.join(" ")}}const NU=new mA({ctrlKey:"",shiftKey:"",altKey:"",metaKey:"",separator:""},{ctrlKey:S({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:S({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:S({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:S({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:S({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:S({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:S({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:S({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),b$e=new mA({ctrlKey:S({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:S({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:S({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:S({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:S({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:S({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:S({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:S({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:S({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:S({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:S({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:S({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),y$e=new mA({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),w$e=new mA({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function C$e(i,e,t){if(e===null)return"";const n=[];return i.ctrlKey&&n.push(t.ctrlKey),i.shiftKey&&n.push(t.shiftKey),i.altKey&&n.push(t.altKey),i.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}class S$e extends j7e{constructor(e,t){if(super(),t.length===0)throw V4("chords");this._os=e,this._chords=t}getLabel(){return NU.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return b$e.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:y$e.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return w$e.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new z7e(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}}class Pk extends S$e{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"";case 16:return"";case 17:return"";case 18:return""}return Rh.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":Rh.toString(e.keyCode)}_getElectronAccelerator(e){return Rh.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=Rh.toUserSettingsUS(e.keyCode);return t&&t.toLowerCase()}_getChordDispatch(e){return Pk.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=Rh.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=NH[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof J0)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new J0(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const n=d7(e.chords.map(s=>this._toKeyCodeChord(s)));return n.length>0?[new Pk(n,t)]:[]}}const k$e=nn("labelService"),x$e=nn("progressService"),vj=class vj{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}};vj.None=Object.freeze({report(){}});let iJ=vj;const RU=nn("editorProgressService");class E$e{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}}class T$e{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?AH(e,this._value,0,e.length,this._from,this._to):O2(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class L$e{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const n=this._value.charCodeAt(t);if(!(n===47||this._splitOnBackslash&&n===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?AH(e,this._value,0,e.length,this._from,this._to):O2(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class I$e{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new L$e(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return YQ(e,this._value.scheme);if(this._states[this._stateIdx]===2)return YQ(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return G9(e,this._value.query);if(this._states[this._stateIdx]===5)return G9(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class nT{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e;return((e=this.left)==null?void 0:e.height)??0}get heightRight(){var e;return((e=this.right)==null?void 0:e.height)??0}}class ZC{static forUris(e=()=>!1,t=()=>!1){return new ZC(new I$e(e,t))}static forStrings(){return new ZC(new E$e)}static forConfigKeys(){return new ZC(new T$e)}constructor(e){this._iter=e}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let s;this._root||(this._root=new nT,this._root.segment=n.value());const r=[];for(s=this._root;;){const a=n.cmp(s.segment);if(a>0)s.left||(s.left=new nT,s.left.segment=n.value()),r.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new nT,s.right.segment=n.value()),r.push([1,s]),s=s.right;else if(n.hasNext())n.next(),s.mid||(s.mid=new nT,s.mid.segment=n.value()),r.push([0,s]),s=s.mid;else break}const o=s.value;s.value=t,s.key=e;for(let a=r.length-1;a>=0;a--){const l=r[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const u=r[a][0],d=r[a+1][0];if(u===1&&d===1)r[a][1]=l.rotateLeft();else if(u===-1&&d===-1)r[a][1]=l.rotateRight();else if(u===1&&d===-1)l.right=r[a+1][1]=r[a+1][1].rotateRight(),r[a][1]=l.rotateLeft();else if(u===-1&&d===1)l.left=r[a+1][1]=r[a+1][1].rotateLeft(),r[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(r[a-1][0]){case-1:r[a-1][1].left=r[a][1];break;case 1:r[a-1][1].right=r[a][1];break;case 0:r[a-1][1].mid=r[a][1];break}else this._root=r[0][1]}}return o}get(e){var t;return(t=this._getNode(e))==null?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const s=t.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const n=this._iter.reset(e),s=[];let r=this._root;for(;r;){const o=n.cmp(r.segment);if(o>0)s.push([-1,r]),r=r.left;else if(o<0)s.push([1,r]),r=r.right;else if(n.hasNext())n.next(),s.push([0,r]),r=r.mid;else break}if(r){if(t?(r.left=void 0,r.mid=void 0,r.right=void 0,r.height=1):(r.key=void 0,r.value=void 0),!r.mid&&!r.value)if(r.left&&r.right){const o=this._min(r.right);if(o.key){const{key:a,value:l,segment:c}=o;this._delete(o.key,!1),r.key=a,r.value=l,r.segment=c}}else{const o=r.left??r.right;if(s.length>0){const[a,l]=s[s.length-1];switch(a){case-1:l.left=o;break;case 0:l.mid=o;break;case 1:l.right=o;break}}else this._root=o}for(let o=s.length-1;o>=0;o--){const a=s[o][1];a.updateHeight();const l=a.balanceFactor();if(l>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),s[o][1]=a.rotateLeft()):l<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),s[o][1]=a.rotateRight()),o>0)switch(s[o-1][0]){case-1:s[o-1][1].left=s[o][1];break;case 1:s[o-1][1].right=s[o][1];break;case 0:s[o-1][1].mid=s[o][1];break}else this._root=s[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let n=this._root,s;for(;n;){const r=t.cmp(n.segment);if(r>0)n=n.left;else if(r<0)n=n.right;else if(t.hasNext())t.next(),s=n.value||s,n=n.mid;else break}return n&&n.value||s}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const n=this._iter.reset(e);let s=this._root;for(;s;){const r=n.cmp(s.segment);if(r>0)s=s.left;else if(r<0)s=s.right;else if(n.hasNext())n.next(),s=s.mid;else return s.mid?this._entries(s.mid):t?s.value:void 0}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}const D$e=nn("contextService");class N$e{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const R$e="code-workspace";S("codeWorkspace","Code Workspace");const A$e="4064f6ec-cb38-4ad0-af64-ee6467e63c82";var sJ;(function(i){i.inspectTokensAction=S("inspectTokens","Developer: Inspect Tokens")})(sJ||(sJ={}));var rJ;(function(i){i.gotoLineActionLabel=S("gotoLineActionLabel","Go to Line/Column...")})(rJ||(rJ={}));var oJ;(function(i){i.helpQuickAccessActionLabel=S("helpQuickAccess","Show all Quick Access Providers")})(oJ||(oJ={}));var aJ;(function(i){i.quickCommandActionLabel=S("quickCommandActionLabel","Command Palette"),i.quickCommandHelp=S("quickCommandActionHelp","Show And Run Commands")})(aJ||(aJ={}));var lJ;(function(i){i.quickOutlineActionLabel=S("quickOutlineActionLabel","Go to Symbol..."),i.quickOutlineByCategoryActionLabel=S("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(lJ||(lJ={}));var h7;(function(i){i.editorViewAccessibleLabel=S("editorViewAccessibleLabel","Editor content")})(h7||(h7={}));var cJ;(function(i){i.toggleHighContrast=S("toggleHighContrast","Toggle High Contrast Theme")})(cJ||(cJ={}));var f7;(function(i){i.bulkEditServiceSummary=S("bulkEditServiceSummary","Made {0} edits in {1} files")})(f7||(f7={}));const P$e=nn("workspaceTrustManagementService");let iy=[],AU=[],bge=[];function iT(i,e=!1){M$e(i,!1,e)}function M$e(i,e,t){const n=O$e(i,e);iy.push(n),n.userConfigured?bge.push(n):AU.push(n),t&&!n.userConfigured&&iy.forEach(s=>{s.mime===n.mime||s.userConfigured||(n.extension&&s.extension===n.extension&&console.warn(`Overwriting extension <<${n.extension}>> to now point to mime <<${n.mime}>>`),n.filename&&s.filename===n.filename&&console.warn(`Overwriting filename <<${n.filename}>> to now point to mime <<${n.mime}>>`),n.filepattern&&s.filepattern===n.filepattern&&console.warn(`Overwriting filepattern <<${n.filepattern}>> to now point to mime <<${n.mime}>>`),n.firstline&&s.firstline===n.firstline&&console.warn(`Overwriting firstline <<${n.firstline}>> to now point to mime <<${n.mime}>>`))})}function O$e(i,e){return{id:i.id,mime:i.mime,filename:i.filename,extension:i.extension,filepattern:i.filepattern,firstline:i.firstline,userConfigured:e,filenameLowercase:i.filename?i.filename.toLowerCase():void 0,extensionLowercase:i.extension?i.extension.toLowerCase():void 0,filepatternLowercase:i.filepattern?Tfe(i.filepattern.toLowerCase()):void 0,filepatternOnPath:i.filepattern?i.filepattern.indexOf($i.sep)>=0:!1}}function F$e(){iy=iy.filter(i=>i.userConfigured),AU=[]}function B$e(i,e){return V$e(i,e).map(t=>t.id)}function V$e(i,e){let t;if(i)switch(i.scheme){case Wt.file:t=i.fsPath;break;case Wt.data:{t=vD.parseMetaData(i).get(vD.META_DATA_LABEL);break}case Wt.vscodeNotebookCell:t=void 0;break;default:t=i.path}if(!t)return[{id:"unknown",mime:Mh.unknown}];t=t.toLowerCase();const n=Yde(t),s=uJ(t,n,bge);if(s)return[s,{id:gc,mime:Mh.text}];const r=uJ(t,n,AU);if(r)return[r,{id:gc,mime:Mh.text}];if(e){const o=W$e(e);if(o)return[o,{id:gc,mime:Mh.text}]}return[{id:"unknown",mime:Mh.unknown}]}function uJ(i,e,t){var o;let n,s,r;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){n=l;break}if(l.filepattern&&(!s||l.filepattern.length>s.filepattern.length)){const c=l.filepatternOnPath?i:e;(o=l.filepatternLowercase)!=null&&o.call(l,c)&&(s=l)}l.extension&&(!r||l.extension.length>r.extension.length)&&e.endsWith(l.extensionLowercase)&&(r=l)}if(n)return n;if(s)return s;if(r)return r}function W$e(i){if(WH(i)&&(i=i.substr(1)),i.length>0)for(let e=iy.length-1;e>=0;e--){const t=iy[e];if(!t.firstline)continue;const n=i.match(t.firstline);if(n&&n.length>0)return t}}const sT=Object.prototype.hasOwnProperty,dJ="vs.editor.nullLanguage";class H$e{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(dJ,0),this._register(gc,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||dJ}}const IS=class IS extends be{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new se),this.onDidChange=this._onDidChange.event,IS.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new H$e,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(Gb.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){IS.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},F$e();const e=[].concat(Gb.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(s=>{this._lowercaseNameMap[s.toLowerCase()]=n.identifier}),n.mimetypes.forEach(s=>{this._mimeTypesMap[s]=n.identifier})}),ir.as(R1.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;sT.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let s=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),s=t.mimetypes[0]),s||(s=`text/x-${n}`,e.mimetypes.push(s)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)iT({id:n,mime:s,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)iT({id:n,mime:s,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)iT({id:n,mime:s,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);R7e(l)||iT({id:n,mime:s,firstline:l},this._warnOnOverwrite)}catch(l){console.warn(`[${t.id}]: Invalid regular expression \`${a}\`: `,l)}}e.aliases.push(n);let r=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?r=[null]:r=t.aliases),r!==null)for(const a of r)!a||a.length===0||e.aliases.push(a);const o=r!==null&&r.length>0;if(!(o&&r[0]===null)){const a=(o?r[0]:null)||n;(o||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?sT.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return sT.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&sT.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:B$e(e,t)}};IS.instanceCount=0;let g7=IS;const yc=(i,e)=>i===e;function U$e(i=yc){return(e,t)=>ks(e,t,i)}function hJ(i,e,t){{const n=i;return(s,r)=>s==null||r===void 0||r===null?r===s:n(s,r)}}class Lo{constructor(e,t,n){this.owner=e,this.debugNameSource=t,this.referenceFn=n}getDebugName(e){return z$e(e,this)}}const fJ=new Map,m7=new WeakMap;function z$e(i,e){const t=m7.get(i);if(t)return t;const n=j$e(i,e);if(n){let s=fJ.get(n)??0;s++,fJ.set(n,s);const r=s===1?n:`${n}#${s}`;return m7.set(i,r),r}}function j$e(i,e){const t=m7.get(i);if(t)return t;const n=e.owner?q$e(e.owner)+".":"";let s;const r=e.debugNameSource;if(r!==void 0)if(typeof r=="function"){if(s=r(),s!==void 0)return n+s}else return n+r;const o=e.referenceFn;if(o!==void 0&&(s=PU(o),s!==void 0))return n+s;if(e.owner!==void 0){const a=$$e(e.owner,i);if(a!==void 0)return n+a}}function $$e(i,e){for(const t in i)if(i[t]===e)return t}const gJ=new Map,mJ=new WeakMap;function q$e(i){const e=mJ.get(i);if(e)return e;const t=K$e(i);let n=gJ.get(t)??0;n++,gJ.set(t,n);const s=n===1?t:`${t}#${n}`;return mJ.set(i,s),s}function K$e(i){const e=i.constructor;return e?e.name:"Object"}function PU(i){const e=i.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e),s=n?n[1]:void 0;return s==null?void 0:s.trim()}let G$e;function yge(){return G$e}let wge;function Y$e(i){wge=i}let Cge;function Q$e(i){Cge=i}let p7;function X$e(i){p7=i}class Sge{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const n=t===void 0?void 0:e,s=t===void 0?e:t;return p7({owner:n,debugName:()=>{const r=PU(s);if(r!==void 0)return r;const a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(s.toString());if(a)return`${this.debugName}.${a[2]}`;if(!n)return`${this.debugName} (mapped)`},debugReferenceFn:s},r=>s(this.read(r),r))}flatten(){return p7({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(wge(this,t)),this}keepObserved(e){return e.add(Cge(this)),this}}class jy extends Sge{constructor(){super(...arguments),this.observers=new Set}addObserver(e){const t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function Cs(i,e){const t=new Q2(i,e);try{i(t)}finally{t.finish()}}let rT;function yC(i){if(rT)i(rT);else{const e=new Q2(i,void 0);rT=e;try{i(e)}finally{e.finish(),rT=void 0}}}function MU(i,e,t){i?e(i):Cs(e,t)}class Q2{constructor(e,t){this._fn=e,this._getDebugName=t,this.updatingObservers=[]}getDebugName(){return this._getDebugName?this._getDebugName():PU(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.updatingObservers;for(let t=0;t<e.length;t++){const{observer:n,observable:s}=e[t];n.endUpdate(s)}this.updatingObservers=null}}function un(i,e){let t;return typeof i=="string"?t=new Lo(void 0,i,void 0):t=new Lo(i,void 0,void 0),new OU(t,e,yc)}class OU extends jy{get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}constructor(e,t,n){super(),this._debugNameData=e,this._equalityComparator=n,this._value=t}get(){return this._value}set(e,t,n){var r;if(n===void 0&&this._equalityComparator(this._value,e))return;let s;t||(t=s=new Q2(()=>{},()=>`Setting ${this.debugName}`));try{const o=this._value;this._setValue(e),(r=yge())==null||r.handleObservableChanged(this,{oldValue:o,newValue:e,change:n,didChange:!0,hadValue:!0});for(const a of this.observers)t.updateObserver(a,this),a.handleChange(this,n)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function kge(i,e){let t;return typeof i=="string"?t=new Lo(void 0,i,void 0):t=new Lo(i,void 0,void 0),new Z$e(t,e,yc)}class Z$e extends OU{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){var e;(e=this._value)==null||e.dispose()}}function It(i,e){return e!==void 0?new sy(new Lo(i,void 0,e),e,void 0,void 0,void 0,yc):new sy(new Lo(void 0,void 0,i),i,void 0,void 0,void 0,yc)}function FU(i,e,t){return new J$e(new Lo(i,void 0,e),e,void 0,void 0,void 0,yc,t)}function pA(i,e){return new sy(new Lo(i.owner,i.debugName,i.debugReferenceFn),e,void 0,void 0,i.onLastObserverRemoved,i.equalsFn??yc)}X$e(pA);function $y(i,e){let t,n;e===void 0?(t=i,n=void 0):(n=i,t=e);const s=new Ze;return new sy(new Lo(n,void 0,t),r=>(s.clear(),t(r,s)),void 0,void 0,()=>s.dispose(),yc)}function Yu(i,e){let t,n;e===void 0?(t=i,n=void 0):(n=i,t=e);let s;return new sy(new Lo(n,void 0,t),r=>{s?s.clear():s=new Ze;const o=t(r);return o&&s.add(o),o},void 0,void 0,()=>{s&&(s.dispose(),s=void 0)},yc)}class sy extends jy{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,n,s,r=void 0,o){var a;super(),this._debugNameData=e,this._computeFn=t,this.createChangeSummary=n,this._handleChange=s,this._handleLastObserverRemoved=r,this._equalityComparator=o,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=(a=this.createChangeSummary)==null?void 0:a.call(this)}onLastObserverRemoved(){var e;this.state=0,this.value=void 0;for(const t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),(e=this._handleLastObserverRemoved)==null||e.call(this)}get(){var e;if(this.observers.size===0){const t=this._computeFn(this,(e=this.createChangeSummary)==null?void 0:e.call(this));return this.onLastObserverRemoved(),t}else{do{if(this.state===1){for(const t of this.dependencies)if(t.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){var o;if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e;const t=this.state!==0,n=this.value;this.state=3;const s=this.changeSummary;this.changeSummary=(o=this.createChangeSummary)==null?void 0:o.call(this);try{this.value=this._computeFn(this,s)}finally{for(const a of this.dependenciesToBeRemoved)a.removeObserver(this);this.dependenciesToBeRemoved.clear()}if(t&&!this._equalityComparator(n,this.value))for(const a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.updateCount++;const t=this.updateCount===1;if(this.state===3&&(this.state=1,!t))for(const n of this.observers)n.handlePossibleChange(this);if(t)for(const n of this.observers)n.beginUpdate(this)}endUpdate(e){if(this.updateCount--,this.updateCount===0){const t=[...this.observers];for(const n of t)n.endUpdate(this)}n1(()=>this.updateCount>=0)}handlePossibleChange(e){if(this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;for(const t of this.observers)t.handlePossibleChange(this)}}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){const n=this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:r=>r===e},this.changeSummary):!0,s=this.state===3;if(n&&(this.state===1||s)&&(this.state=2,s))for(const r of this.observers)r.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){const t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}}class J$e extends sy{constructor(e,t,n,s,r=void 0,o,a){super(e,t,n,s,r,o),this.set=a}}function Cn(i){return new bA(new Lo(void 0,void 0,i),i,void 0,void 0)}function _A(i,e){return new bA(new Lo(i.owner,i.debugName,i.debugReferenceFn??e),e,void 0,void 0)}function vA(i,e){return new bA(new Lo(i.owner,i.debugName,i.debugReferenceFn??e),e,i.createEmptyChangeSummary,i.handleChange)}function lu(i){const e=new Ze,t=_A({owner:void 0,debugName:void 0,debugReferenceFn:i},n=>{e.clear(),i(n,e)});return Dt(()=>{t.dispose(),e.dispose()})}class bA{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,n,s){var r;this._debugNameData=e,this._runFn=t,this.createChangeSummary=n,this._handleChange=s,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=(r=this.createChangeSummary)==null?void 0:r.call(this),this._runIfNeeded()}dispose(){this.disposed=!0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear()}_runIfNeeded(){var n,s;if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;const t=this.disposed;try{if(!t){(n=yge())==null||n.handleAutorunTriggered(this);const r=this.changeSummary;this.changeSummary=(s=this.createChangeSummary)==null?void 0:s.call(this),this._runFn(this,r)}}finally{for(const r of this.dependenciesToBeRemoved)r.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(const e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,n1(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:s=>s===e},this.changeSummary))&&(this.state=2)}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}}(function(i){i.Observer=bA})(Cn||(Cn={}));function xD(i){return new eqe(i)}class eqe extends Sge{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}}function Mi(...i){let e,t,n;return i.length===3?[e,t,n]=i:[t,n]=i,new cv(new Lo(e,void 0,n),t,n,()=>cv.globalTransaction,yc)}class cv extends jy{constructor(e,t,n,s,r){super(),this._debugNameData=e,this.event=t,this._getValue=n,this._getTransaction=s,this._equalityComparator=r,this.hasValue=!1,this.handleEvent=o=>{const a=this._getValue(o),l=this.value;(!this.hasValue||!this._equalityComparator(l,a))&&(this.value=a,this.hasValue&&MU(this._getTransaction(),u=>{for(const d of this.observers)u.updateObserver(d,this),d.handleChange(this,void 0)},()=>{const u=this.getDebugName();return"Event fired"+(u?`: ${u}`:"")}),this.hasValue=!0)}}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}}(function(i){i.Observer=cv;function e(t,n){let s=!1;cv.globalTransaction===void 0&&(cv.globalTransaction=t,s=!0);try{n()}finally{s&&(cv.globalTransaction=void 0)}}i.batchEventsGlobally=e})(Mi||(Mi={}));function Ll(i,e){return new tqe(i,e)}class tqe extends jy{constructor(e,t){super(),this.debugName=e,this.event=t,this.handleEvent=()=>{Cs(n=>{for(const s of this.observers)n.updateObserver(s,this),s.handleChange(this,void 0)},()=>this.debugName)}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function BU(i){return typeof i=="string"?new pJ(i):new pJ(void 0,i)}class pJ extends jy{get debugName(){return new Lo(this._owner,this._debugName,void 0).getDebugName(this)??"Observable Signal"}toString(){return this.debugName}constructor(e,t){super(),this._debugName=e,this._owner=t}trigger(e,t){if(!e){Cs(n=>{this.trigger(n,t)},()=>`Trigger signal ${this.debugName}`);return}for(const n of this.observers)e.updateObserver(n,this),n.handleChange(this,t)}get(){}}function nqe(i){const e=new xge(!1,void 0);return i.addObserver(e),Dt(()=>{i.removeObserver(e)})}Q$e(nqe);function yA(i,e){const t=new xge(!0,e);return i.addObserver(t),e?e(i.get()):i.reportChanges(),Dt(()=>{i.removeObserver(t)})}Y$e(yA);class xge{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}}function iqe(i,e){let t;return pA({owner:i,debugReferenceFn:e},s=>(t=e(s,t),t))}function sqe(i,e){return iqe(i,(t,n)=>n??e(t))}function rqe(i,e,t,n){return e||(e=s=>s!=null),new Promise((s,r)=>{let o=!0,a=!1;const l=i.map(u=>({isFinished:e(u),error:!1,state:u})),c=Cn(u=>{const{isFinished:d,error:h,state:g}=l.read(u);(d||h)&&(o?a=!0:c.dispose(),h?r(h===!0?g:h):s(g))});o=!1,a&&c.dispose()})}class oqe extends jy{get debugName(){return this._debugNameData.getDebugName(this)??"LazyObservableValue"}constructor(e,t,n){super(),this._debugNameData=e,this._equalityComparator=n,this._isUpToDate=!0,this._deltas=[],this._updateCounter=0,this._value=t}get(){return this._update(),this._value}_update(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){for(const e of this.observers)for(const t of this._deltas)e.handleChange(this,t);this._deltas.length=0}else for(const e of this.observers)e.handleChange(this,void 0)}_beginUpdate(){if(this._updateCounter++,this._updateCounter===1)for(const e of this.observers)e.beginUpdate(this)}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){this._update();const e=[...this.observers];for(const t of e)t.endUpdate(this)}}addObserver(e){const t=!this.observers.has(e)&&this._updateCounter>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this._updateCounter>0;super.removeObserver(e),t&&e.endUpdate(this)}set(e,t,n){if(n===void 0&&this._equalityComparator(this._value,e))return;let s;t||(t=s=new Q2(()=>{},()=>`Setting ${this.debugName}`));try{if(this._isUpToDate=!1,this._setValue(e),n!==void 0&&this._deltas.push(n),t.updateObserver({beginUpdate:()=>this._beginUpdate(),endUpdate:()=>this._endUpdate(),handleChange:(r,o)=>{},handlePossibleChange:r=>{}},this),this._updateCounter>1)for(const r of this.observers)r.handlePossibleChange(this)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function _7(i,e){return i.lazy?new oqe(new Lo(i.owner,i.debugName,void 0),e,i.equalsFn??yc):new OU(new Lo(i.owner,i.debugName,void 0),e,i.equalsFn??yc)}const DS=class DS extends be{constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new se),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new se),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new se({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,DS.instanceCount++,this._registry=this._register(new g7(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){DS.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const n=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return yH(n,null)}createById(e){return new _J(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new _J(this.onDidChange,()=>{const n=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(n)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=gc),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),es.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}};DS.instanceCount=0;let v7=DS;class _J{constructor(e,t){this._value=Mi(this,e,()=>t()),this.onDidChange=Le.fromObservable(this._value)}get languageId(){return this._value.get()}}const Ege={TEXT:Mh.text},aqe=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}});let wA=aqe;const lqe=new Em(()=>wA("mouse",!1)),cqe=new Em(()=>wA("element",!1));function uqe(i){wA=i}function zl(i){return i==="element"?cqe.value:lqe.value}function VU(){return wA("element",!0)}let Tge={showHover:()=>{},hideHover:()=>{},showAndFocusLastHover:()=>{},setupManagedHover:()=>null,showManagedHover:()=>{}};function dqe(i){Tge=i}function zd(){return Tge}class hqe{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(s=>s.splice(e,t,n))}}class mp extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function vJ(i,e){const t=[];for(const n of e){if(i.start>=n.range.end)continue;if(i.end<n.range.start)break;const s=Lr.intersect(i,n.range);Lr.isEmpty(s)||t.push({range:s,size:n.size})}return t}function b7({start:i,end:e},t){return{start:i+t,end:e+t}}function fqe(i){const e=[];let t=null;for(const n of i){const s=n.range.start,r=n.range.end,o=n.size;if(t&&o===t.size){t.range.end=r;continue}t={range:{start:s,end:r},size:o},e.push(t)}return e}function gqe(...i){return fqe(i.reduce((e,t)=>e.concat(t),[]))}class mqe{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,n=[]){const s=n.length-t,r=vJ({start:0,end:e},this.groups),o=vJ({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:b7(l.range,s),size:l.size})),a=n.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=gqe(r,a,o),this._size=this._paddingTop+this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,n=this._paddingTop;for(const s of this.groups){const r=s.range.end-s.range.start,o=n+r*s.size;if(e<o)return t+Math.floor((e-n)/s.size);t+=r,n=o}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(const s of this.groups){const r=s.range.end-s.range.start,o=n+r;if(e<o)return this._paddingTop+t+(e-n)*s.size;t+=r*s.size,n=o}return-1}}class pqe{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),n=!1;if(t)n=this.transactionNodesPendingRemoval.has(t.domNode),n&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const s=ht(".monaco-list-row"),o=this.getRenderer(e).renderTemplate(s);t={domNode:s,templateId:e,templateData:o}}return{row:t,isReusingConnectedDomNode:n}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(n).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var Pf=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const pp={CurrentDragAndDropData:void 0},ju={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(i){return[i]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class X2{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class _qe{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class vqe{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}}function bqe(i,e){return Array.isArray(i)&&Array.isArray(e)?ks(i,e):i===e}class yqe{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,s)=>s,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}const XN=class XN{get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:AO(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,n,s=ju){var o,a;if(this.virtualDelegate=t,this.domId=`list_id_${++XN.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new B2(50),this.splicing=!1,this.dragOverAnimationStopDisposable=be.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=be.None,this.onDragLeaveTimeout=be.None,this.disposables=new Ze,this._onDidChangeContentHeight=new se,this._onDidChangeContentWidth=new se,this.onDidChangeContentHeight=Le.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,s.horizontalScrolling&&s.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(s.paddingTop??0);for(const l of n)this.renderers.set(l.templateId,l);this.cache=this.disposables.add(new pqe(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof s.mouseSupport=="boolean"?s.mouseSupport:!0),this._horizontalScrolling=s.horizontalScrolling??ju.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof s.paddingBottom>"u"?0:s.paddingBottom,this.accessibilityProvider=new yqe(s.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(s.transformOptimization??ju.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(To.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new zy({forceIntegerValues:!0,smoothScrollDuration:s.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:l=>xa(rt(this.domNode),l)})),this.scrollableElement=this.disposables.add(new dA(this.rowsContainer,{alwaysConsumeMouseWheel:s.alwaysConsumeMouseWheel??ju.alwaysConsumeMouseWheel,horizontal:1,vertical:s.verticalScrollMode??ju.verticalScrollMode,useShadows:s.useShadows??ju.useShadows,mouseWheelScrollSensitivity:s.mouseWheelScrollSensitivity,fastScrollSensitivity:s.fastScrollSensitivity,scrollByPage:s.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(ge(this.rowsContainer,ei.Change,l=>this.onTouchChange(l))),this.disposables.add(ge(this.scrollableElement.getDomNode(),"scroll",l=>l.target.scrollTop=0)),this.disposables.add(ge(this.domNode,"dragover",l=>this.onDragOver(this.toDragEvent(l)))),this.disposables.add(ge(this.domNode,"drop",l=>this.onDrop(this.toDragEvent(l)))),this.disposables.add(ge(this.domNode,"dragleave",l=>this.onDragLeave(this.toDragEvent(l)))),this.disposables.add(ge(this.domNode,"dragend",l=>this.onDragEnd(l))),this.setRowLineHeight=s.setRowLineHeight??ju.setRowLineHeight,this.setRowHeight=s.setRowHeight??ju.setRowHeight,this.supportDynamicHeights=s.supportDynamicHeights??ju.supportDynamicHeights,this.dnd=s.dnd??this.disposables.add(ju.dnd),this.layout((o=s.initialSize)==null?void 0:o.height,(a=s.initialSize)==null?void 0:a.width)}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){const n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(n,Math.max(0,this.lastRenderTop+s),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}createRangeMap(e){return new mqe(e)}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){const s=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r={start:e,end:e+t},o=Lr.intersect(s,r),a=new Map;for(let T=o.end-1;T>=o.start;T--){const R=this.items[T];if(R.dragStartDisposable.dispose(),R.checkedDisposable.dispose(),R.row){let L=a.get(R.templateId);L||(L=[],a.set(R.templateId,L));const I=this.renderers.get(R.templateId);I&&I.disposeElement&&I.disposeElement(R.element,T,R.row.templateData,R.size),L.unshift(R.row)}R.row=null,R.stale=!0}const l={start:e+t,end:this.items.length},c=Lr.intersect(l,s),u=Lr.relativeComplement(l,s),d=n.map(T=>({id:String(this.itemId++),element:T,templateId:this.virtualDelegate.getTemplateId(T),size:this.virtualDelegate.getHeight(T),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(T),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:be.None,checkedDisposable:be.None,stale:!1}));let h;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,d),h=this.items,this.items=d):(this.rangeMap.splice(e,t,d),h=this.items.splice(e,t,...d));const g=n.length-t,p=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),_=b7(c,g),v=Lr.intersect(p,_);for(let T=v.start;T<v.end;T++)this.updateItemInDOM(this.items[T],T);const y=Lr.relativeComplement(_,p);for(const T of y)for(let R=T.start;R<T.end;R++)this.removeItemFromDOM(R);const w=u.map(T=>b7(T,g)),k=[{start:e,end:e+n.length},...w].map(T=>Lr.intersect(p,T)).reverse();for(const T of k)for(let R=T.end-1;R>=T.start;R--){const L=this.items[R],I=a.get(L.templateId),A=I==null?void 0:I.pop();this.insertItemInDOM(R,A)}for(const T of a.values())for(const R of T)this.cache.release(R);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),h.map(T=>T.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=xa(rt(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const n={height:typeof e=="number"?e:OFe(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:AO(this.domNode)})}render(e,t,n,s,r,o=!1){const a=this.getRenderRange(t,n),l=Lr.relativeComplement(a,e).reverse(),c=Lr.relativeComplement(e,a);if(o){const u=Lr.intersect(e,a);for(let d=u.start;d<u.end;d++)this.updateItemInDOM(this.items[d],d)}this.cache.transact(()=>{for(const u of c)for(let d=u.start;d<u.end;d++)this.removeItemFromDOM(d);for(const u of l)for(let d=u.end-1;d>=u.start;d--)this.insertItemInDOM(d)}),s!==void 0&&(this.rowsContainer.style.left=`-${s}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&r!==void 0&&(this.rowsContainer.style.width=`${Math.max(r,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t){var l,c;const n=this.items[e];if(!n.row)if(t)n.row=t,n.stale=!0;else{const u=this.cache.alloc(n.templateId);n.row=u.row,n.stale||(n.stale=u.isReusingConnectedDomNode)}const s=this.accessibilityProvider.getRole(n.element)||"listitem";n.row.domNode.setAttribute("role",s);const r=this.accessibilityProvider.isChecked(n.element);if(typeof r=="boolean")n.row.domNode.setAttribute("aria-checked",String(!!r));else if(r){const u=d=>n.row.domNode.setAttribute("aria-checked",String(!!d));u(r.value),n.checkedDisposable=r.onDidChange(()=>u(r.value))}if(n.stale||!n.row.domNode.parentElement){const u=((c=(l=this.items.at(e+1))==null?void 0:l.row)==null?void 0:c.domNode)??null;(n.row.domNode.parentElement!==this.rowsContainer||n.row.domNode.nextElementSibling!==u)&&this.rowsContainer.insertBefore(n.row.domNode,u),n.stale=!1}this.updateItemInDOM(n,e);const o=this.renderers.get(n.templateId);if(!o)throw new Error(`No renderer found for template id ${n.templateId}`);o==null||o.renderElement(n.element,e,n.row.templateData,n.size);const a=this.dnd.getDragURI(n.element);n.dragStartDisposable.dispose(),n.row.domNode.draggable=!!a,a&&(n.dragStartDisposable=ge(n.row.domNode,"dragstart",u=>this.onDragStart(n.element,a,u))),this.horizontalScrolling&&(this.measureItemWidth(n),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=AO(e.row.domNode);const t=rt(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return Le.map(this.disposables.add(new qt(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return Le.map(this.disposables.add(new qt(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return Le.filter(Le.map(this.disposables.add(new qt(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return Le.map(this.disposables.add(new qt(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return Le.map(this.disposables.add(new qt(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return Le.map(this.disposables.add(new qt(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return Le.any(Le.map(this.disposables.add(new qt(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),Le.map(this.disposables.add(new qt(this.domNode,ei.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return Le.map(this.disposables.add(new qt(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return Le.map(this.disposables.add(new qt(this.rowsContainer,ei.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element,r=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:s,sector:r}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){var r,o;if(!n.dataTransfer)return;const s=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(Ege.TEXT,t),n.dataTransfer.setDragImage){let a;this.dnd.getDragLabel&&(a=this.dnd.getDragLabel(s,n)),typeof a>"u"&&(a=String(s.length));const l=ht(".monaco-drag-image");l.textContent=a,(d=>{for(;d&&!d.classList.contains("monaco-workbench");)d=d.parentElement;return d||this.domNode.ownerDocument})(this.domNode).appendChild(l),n.dataTransfer.setDragImage(l,-10,-10),setTimeout(()=>l.remove(),0)}this.domNode.classList.add("dragging"),this.currentDragData=new X2(s),pp.CurrentDragAndDropData=new _qe(s),(o=(r=this.dnd).onDragStart)==null||o.call(r,this.currentDragData,n)}onDragOver(e){var r,o;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),pp.CurrentDragAndDropData&&pp.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(pp.CurrentDragAndDropData)this.currentDragData=pp.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new vqe}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&((r=t.effect)==null?void 0:r.type)===0?"copy":"move";let n;typeof t!="boolean"&&t.feedback?n=t.feedback:typeof e.index>"u"?n=[-1]:n=[e.index],n=Q0(n).filter(a=>a>=-1&&a<this.length).sort((a,l)=>a-l),n=n[0]===-1?[-1]:n;let s=typeof t!="boolean"&&t.effect&&t.effect.position?t.effect.position:"drop-target";if(bqe(this.currentDragFeedback,n)&&this.currentDragFeedbackPosition===s)return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackPosition=s,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add(s),this.rowsContainer.classList.add(s),this.currentDragFeedbackDisposable=Dt(()=>{this.domNode.classList.remove(s),this.rowsContainer.classList.remove(s)});else{if(n.length>1&&s!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");s==="drop-target-after"&&n[0]<this.length-1&&(n[0]+=1,s="drop-target-before");for(const a of n){const l=this.items[a];l.dropTarget=!0,(o=l.row)==null||o.domNode.classList.add(s)}this.currentDragFeedbackDisposable=Dt(()=>{var a;for(const l of n){const c=this.items[l];c.dropTarget=!1,(a=c.row)==null||a.domNode.classList.remove(s)}})}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=e8(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&((n=(t=this.dnd).onDragLeave)==null||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,pp.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){var t,n;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,pp.CurrentDragAndDropData=void 0,(n=(t=this.dnd).onDragEnd)==null||n.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=be.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=MFe(this.domNode).top;this.dragOverAnimationDisposable=GFe(rt(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=e8(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(t===void 0)return;const n=e.offsetY/this.items[t].size,s=Math.floor(n/.25);return qo(s,0,3)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;(Zs(n)||UFe(n))&&n!==this.rowsContainer&&t.contains(n);){const s=n.getAttribute("data-index");if(s){const r=Number(s);if(!isNaN(r))return r}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){const s=this.getRenderRange(e,t);let r,o;e===this.elementTop(s.start)?(r=s.start,o=0):s.end-s.start>1&&(r=s.start+1,o=this.elementTop(r)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let u=l.start;u<l.end;u++){const d=this.probeDynamicHeight(u);d!==0&&this.rangeMap.splice(u,1,[this.items[u]]),a+=d,c=c||d!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const u=Lr.relativeComplement(s,l);for(const h of u)for(let g=h.start;g<h.end;g++)this.items[g].row&&this.removeItemFromDOM(g);const d=Lr.relativeComplement(l,s).reverse();for(const h of d)for(let g=h.end-1;g>=h.start;g--)this.insertItemInDOM(g);for(let h=l.start;h<l.end;h++)this.items[h].row&&this.updateItemInDOM(this.items[h],h);if(typeof r=="number"){const h=this.scrollable.getFutureScrollPosition().scrollTop-e,g=this.elementTop(r)-o+h;this.setScrollTop(g,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){var o,a,l;const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const c=this.virtualDelegate.getDynamicHeight(t.element);if(c!==null){const u=t.size;return t.size=c,t.lastDynamicHeightWidth=this.renderWidth,c-u}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const n=t.size;if(t.row)return t.row.domNode.style.height="",t.size=t.row.domNode.offsetHeight,t.size===0&&!Fs(t.row.domNode,rt(t.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",new Error().stack),t.lastDynamicHeightWidth=this.renderWidth,t.size-n;const{row:s}=this.cache.alloc(t.templateId);s.domNode.style.height="",this.rowsContainer.appendChild(s.domNode);const r=this.renderers.get(t.templateId);if(!r)throw new Dn("Missing renderer for templateId: "+t.templateId);return r.renderElement(t.element,e,s.templateData,void 0),t.size=s.domNode.offsetHeight,(o=r.disposeElement)==null||o.call(r,t.element,e,s.templateData,void 0),(l=(a=this.virtualDelegate).setDynamicHeight)==null||l.call(a,t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,s.domNode.remove(),this.cache.release(s),t.size-n}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e,t,n;for(const s of this.items)if(s.dragStartDisposable.dispose(),s.checkedDisposable.dispose(),s.row){const r=this.renderers.get(s.row.templateId);r&&((e=r.disposeElement)==null||e.call(r,s.element,-1,s.row.templateData,void 0),r.disposeTemplate(s.row.templateData))}this.items=[],(t=this.domNode)==null||t.remove(),(n=this.dragOverAnimationDisposable)==null||n.dispose(),this.disposables.dispose()}};XN.InstanceCount=0;let wc=XN;Pf([Fi],wc.prototype,"onMouseClick",null);Pf([Fi],wc.prototype,"onMouseDblClick",null);Pf([Fi],wc.prototype,"onMouseMiddleClick",null);Pf([Fi],wc.prototype,"onMouseDown",null);Pf([Fi],wc.prototype,"onMouseOver",null);Pf([Fi],wc.prototype,"onMouseOut",null);Pf([Fi],wc.prototype,"onContextMenu",null);Pf([Fi],wc.prototype,"onTouchStart",null);Pf([Fi],wc.prototype,"onTap",null);var $m=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class wqe{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,n){const s=this.renderedElements.findIndex(r=>r.templateData===n);if(s>=0){const r=this.renderedElements[s];this.trait.unrender(n),r.index=t}else{const r={index:t,templateData:n};this.renderedElements.push(r)}this.trait.renderIndex(t,n)}splice(e,t,n){const s=[];for(const r of this.renderedElements)r.index<e?s.push(r):r.index>=e+t&&s.push({index:r.index+n-t,templateData:r.templateData});this.renderedElements=s}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}}let ED=class{get name(){return this._trait}get renderer(){return new wqe(this)}constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new se,this.onChange=this._onChange.event}splice(e,t,n){const s=n.length-t,r=e+t,o=[];let a=0;for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)o.push(this.sortedIndexes[a++]);for(let l=0;l<n.length;l++)n[l]&&o.push(l+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=r;)o.push(this.sortedIndexes[a++]+s);this.renderer.splice(e,t,n.length),this._set(o,o)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(yJ),t)}_set(e,t,n){const s=this.indexes,r=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const o=y7(r,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:n}),s}get(){return this.indexes}contains(e){return _9e(this.sortedIndexes,e,yJ)>=0}dispose(){br(this._onChange)}};$m([Fi],ED.prototype,"renderer",null);class Cqe extends ED{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class o6{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,new Array(n.length).fill(!1));const s=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(s.length===0)return this.trait.splice(e,t,new Array(n.length).fill(!1));const r=new Set(s),o=n.map(a=>r.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,o)}}function rm(i){return i.tagName==="INPUT"||i.tagName==="TEXTAREA"}function Z2(i,e){return i.classList.contains(e)?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:Z2(i.parentElement,e)}function wC(i){return Z2(i,"monaco-editor")}function Sqe(i){return Z2(i,"monaco-custom-toggle")}function kqe(i){return Z2(i,"action-item")}function JC(i){return Z2(i,"monaco-tree-sticky-row")}function Mk(i){return i.classList.contains("monaco-tree-sticky-container")}function Lge(i){return i.tagName==="A"&&i.classList.contains("monaco-button")||i.tagName==="DIV"&&i.classList.contains("monaco-button-dropdown")?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:Lge(i.parentElement)}class Ige{get onKeyDown(){return Le.chain(this.disposables.add(new qt(this.view.domNode,"keydown")).event,e=>e.filter(t=>!rm(t.target)).map(t=>new hi(t)))}constructor(e,t,n){this.list=e,this.view=t,this.disposables=new Ze,this.multipleSelectionDisposables=new Ze,this.multipleSelectionSupport=n.multipleSelectionSupport,this.disposables.add(this.onKeyDown(s=>{switch(s.keyCode){case 3:return this.onEnter(s);case 16:return this.onUpArrow(s);case 18:return this.onDownArrow(s);case 11:return this.onPageUpArrow(s);case 12:return this.onPageDownArrow(s);case 9:return this.onEscape(s);case 31:this.multipleSelectionSupport&&(rn?s.metaKey:s.ctrlKey)&&this.onCtrlA(s)}}))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(Uo(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}$m([Fi],Ige.prototype,"onKeyDown",null);var hd;(function(i){i[i.Automatic=0]="Automatic",i[i.Trigger=1]="Trigger"})(hd||(hd={}));var uv;(function(i){i[i.Idle=0]="Idle",i[i.Typing=1]="Typing"})(uv||(uv={}));const xqe=new class{mightProducePrintableCharacter(i){return i.ctrlKey||i.metaKey||i.altKey?!1:i.keyCode>=31&&i.keyCode<=56||i.keyCode>=21&&i.keyCode<=30||i.keyCode>=98&&i.keyCode<=107||i.keyCode>=85&&i.keyCode<=95}};class Eqe{constructor(e,t,n,s,r){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.keyboardNavigationEventFilter=s,this.delegate=r,this.enabled=!1,this.state=uv.Idle,this.mode=hd.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new Ze,this.disposables=new Ze,this.updateOptions(e.options)}updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??hd.Automatic}enable(){if(this.enabled)return;let e=!1;const t=Le.chain(this.enabledDisposables.add(new qt(this.view.domNode,"keydown")).event,r=>r.filter(o=>!rm(o.target)).filter(()=>this.mode===hd.Automatic||this.triggered).map(o=>new hi(o)).filter(o=>e||this.keyboardNavigationEventFilter(o)).filter(o=>this.delegate.mightProducePrintableCharacter(o)).forEach(o=>Xt.stop(o,!0)).map(o=>o.browserEvent.key)),n=Le.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);Le.reduce(Le.any(t,n),(r,o)=>o===null?null:(r||"")+o,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),n(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),n(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var t;const e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){const n=(t=this.list.options.accessibilityProvider)==null?void 0:t.getAriaLabel(this.list.element(e[0]));typeof n=="string"?Ak(n):n&&Ak(n.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=uv.Idle,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,s=this.state===uv.Idle?1:0;this.state=uv.Typing;for(let r=0;r<this.list.length;r++){const o=(n+r+s)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if(_D(e,l)){this.previouslyFocused=n,this.list.setFocus([o]),this.list.reveal(o);return}const c=Yze(e,l);if(c&&c[0].end-c[0].start>1&&c.length===1){this.previouslyFocused=n,this.list.setFocus([o]),this.list.reveal(o);return}}}else if(typeof l>"u"||_D(e,l)){this.previouslyFocused=n,this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class Tqe{constructor(e,t){this.list=e,this.view=t,this.disposables=new Ze;const n=Le.chain(this.disposables.add(new qt(t.domNode,"keydown")).event,r=>r.filter(o=>!rm(o.target)).map(o=>new hi(o)));Le.chain(n,r=>r.filter(o=>o.keyCode===2&&!o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.altKey))(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const s=n.querySelector("[tabIndex]");if(!s||!Zs(s)||s.tabIndex===-1)return;const r=rt(s).getComputedStyle(s);r.visibility==="hidden"||r.display==="none"||(e.preventDefault(),e.stopPropagation(),s.focus())}dispose(){this.disposables.dispose()}}function Dge(i){return rn?i.browserEvent.metaKey:i.browserEvent.ctrlKey}function Nge(i){return i.browserEvent.shiftKey}function Lqe(i){return YH(i)&&i.button===2}const bJ={isSelectionSingleChangeEvent:Dge,isSelectionRangeChangeEvent:Nge};class Rge{constructor(e){this.list=e,this.disposables=new Ze,this._onPointer=new se,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||bJ),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(To.addTarget(e.getHTMLElement()))),Le.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||bJ))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){wC(e.browserEvent.target)||ro()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(rm(e.browserEvent.target)||wC(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||rm(e.browserEvent.target)||wC(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),Lqe(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(rm(e.browserEvent.target)||wC(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){typeof n>"u"&&(n=this.list.getFocus()[0]??t,this.list.setAnchor(n));const s=Math.min(n,t),r=Math.max(n,t),o=Uo(s,r+1),a=this.list.getSelection(),l=Nqe(y7(a,[n]),n);if(l.length===0)return;const c=y7(o,Rqe(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const s=this.list.getSelection(),r=s.filter(o=>o!==t);this.list.setFocus([t]),this.list.setAnchor(t),s.length===r.length?this.list.setSelection([...r,t],e.browserEvent):this.list.setSelection(r,e.browserEvent)}}dispose(){this.disposables.dispose()}}class Age{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const s=ef(e.listFocusAndSelectionOutline,ef(e.listSelectionOutline,e.listFocusOutline??""));s&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${s}; outline-offset: -1px;}`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);const r=ef(e.listSelectionOutline,e.listInactiveFocusOutline??"");r&&n.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${r}; outline-offset: -1px; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(n.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${t} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),n.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${t} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&n.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&n.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=n.join(`
`)}}const Iqe={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:ke.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:ke.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:ke.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},Dqe={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function Nqe(i,e){const t=i.indexOf(e);if(t===-1)return[];const n=[];let s=t-1;for(;s>=0&&i[s]===e-(t-s);)n.push(i[s--]);for(n.reverse(),s=t;s<i.length&&i[s]===e+(s-t);)n.push(i[s++]);return n}function y7(i,e){const t=[];let n=0,s=0;for(;n<i.length||s<e.length;)if(n>=i.length)t.push(e[s++]);else if(s>=e.length)t.push(i[n++]);else if(i[n]===e[s]){t.push(i[n]),n++,s++;continue}else i[n]<e[s]?t.push(i[n++]):t.push(e[s++]);return t}function Rqe(i,e){const t=[];let n=0,s=0;for(;n<i.length||s<e.length;)if(n>=i.length)t.push(e[s++]);else if(s>=e.length)t.push(i[n++]);else if(i[n]===e[s]){n++,s++;continue}else i[n]<e[s]?t.push(i[n++]):s++;return t}const yJ=(i,e)=>i-e;class Aqe{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,s){let r=0;for(const o of this.renderers)o.renderElement(e,t,n[r++],s)}disposeElement(e,t,n,s){var o;let r=0;for(const a of this.renderers)(o=a.disposeElement)==null||o.call(a,e,t,n[r],s),r+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}class Pqe{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return{container:e,disposables:new Ze}}renderElement(e,t,n){const s=this.accessibilityProvider.getAriaLabel(e),r=s&&typeof s!="string"?s:xD(s);n.disposables.add(Cn(a=>{this.setAriaLabel(a.readObservable(r),n.container)}));const o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof o=="number"?n.container.setAttribute("aria-level",`${o}`):n.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,n,s){n.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}}class Mqe{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var n,s;(s=(n=this.dnd).onDragStart)==null||s.call(n,e,t)}onDragOver(e,t,n,s,r){return this.dnd.onDragOver(e,t,n,s,r)}onDragLeave(e,t,n,s){var r,o;(o=(r=this.dnd).onDragLeave)==null||o.call(r,e,t,n,s)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)==null||n.call(t,e)}drop(e,t,n,s,r){this.dnd.drop(e,t,n,s,r)}dispose(){this.dnd.dispose()}}class Du{get onDidChangeFocus(){return Le.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return Le.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=Le.chain(this.disposables.add(new qt(this.view.domNode,"keydown")).event,r=>r.map(o=>new hi(o)).filter(o=>e=o.keyCode===58||o.shiftKey&&o.keyCode===68).map(o=>Xt.stop(o,!0)).filter(()=>!1)),n=Le.chain(this.disposables.add(new qt(this.view.domNode,"keyup")).event,r=>r.forEach(()=>e=!1).map(o=>new hi(o)).filter(o=>o.keyCode===58||o.shiftKey&&o.keyCode===68).map(o=>Xt.stop(o,!0)).map(({browserEvent:o})=>{const a=this.getFocus(),l=a.length?a[0]:void 0,c=typeof l<"u"?this.view.element(l):void 0,u=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:c,anchor:u,browserEvent:o}})),s=Le.chain(this.view.onContextMenu,r=>r.filter(o=>!e).map(({element:o,index:a,browserEvent:l})=>({element:o,index:a,anchor:new iu(rt(this.view.domNode),l),browserEvent:l})));return Le.any(t,n,s)}get onKeyDown(){return this.disposables.add(new qt(this.view.domNode,"keydown")).event}get onDidFocus(){return Le.signal(this.disposables.add(new qt(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return Le.signal(this.disposables.add(new qt(this.view.domNode,"blur",!0)).event)}constructor(e,t,n,s,r=Dqe){var c,u,d;this.user=e,this._options=r,this.focus=new ED("focused"),this.anchor=new ED("anchor"),this.eventBufferer=new M2,this._ariaLabel="",this.disposables=new Ze,this._onDidDispose=new se,this.onDidDispose=this._onDidDispose.event;const o=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(c=this._options.accessibilityProvider)==null?void 0:c.getWidgetRole():"list";this.selection=new Cqe(o!=="listbox");const a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=r.accessibilityProvider,this.accessibilityProvider&&(a.push(new Pqe(this.accessibilityProvider)),(d=(u=this.accessibilityProvider).onDidChangeActiveDescendant)==null||d.call(u,this.onDidChangeActiveDescendant,this,this.disposables)),s=s.map(h=>new Aqe(h.templateId,[...a,h]));const l={...r,dnd:r.dnd&&new Mqe(this,r.dnd)};if(this.view=this.createListView(t,n,s,l),this.view.domNode.setAttribute("role",o),r.styleController)this.styleController=r.styleController(this.view.domId);else{const h=Hl(this.view.domNode);this.styleController=new Age(h,this.view.domId)}if(this.spliceable=new hqe([new o6(this.focus,this.view,r.identityProvider),new o6(this.selection,this.view,r.identityProvider),new o6(this.anchor,this.view,r.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new Tqe(this,this.view)),(typeof r.keyboardSupport!="boolean"||r.keyboardSupport)&&(this.keyboardController=new Ige(this,this.view,r),this.disposables.add(this.keyboardController)),r.keyboardNavigationLabelProvider){const h=r.keyboardNavigationDelegate||xqe;this.typeNavigationController=new Eqe(this,this.view,r.keyboardNavigationLabelProvider,r.keyboardNavigationEventFilter??(()=>!0),h),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(r),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,n,s){return new wc(e,t,n,s)}createMouseController(e){return new Rge(this)}updateOptions(e={}){var t,n;this._options={...this._options,...e},(t=this.typeNavigationController)==null||t.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(n=this.keyboardController)==null||n.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new mp(this.user,`Invalid start index: ${e}`);if(t<0)throw new mp(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new mp(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new mp(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return yH(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new mp(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,s){if(this.length===0)return;const r=this.focus.get(),o=this.findNextIndex(r.length>0?r[0]+e:0,t,s);o>-1&&this.setFocus([o],n)}focusPrevious(e=1,t=!1,n,s){if(this.length===0)return;const r=this.focus.get(),o=this.findPreviousIndex(r.length>0?r[0]-e:0,t,s);o>-1&&this.setFocus([o],n)}async focusNextPage(e,t){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const s=this.getFocus()[0];if(s!==n&&(s===void 0||n>s)){const r=this.findPreviousIndex(n,!1,t);r>-1&&s!==r?this.setFocus([r],e):this.setFocus([n],e)}else{const r=this.view.getScrollTop();let o=r+this.view.renderHeight;n>s&&(o-=this.view.elementHeight(n)),this.view.setScrollTop(o),this.view.getScrollTop()!==r&&(this.setFocus([]),await wk(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,n=()=>0){let s;const r=n(),o=this.view.getScrollTop()+r;o===0?s=this.view.indexAt(o):s=this.view.indexAfter(o-1);const a=this.getFocus()[0];if(a!==s&&(a===void 0||a>=s)){const l=this.findNextIndex(s,!1,t);l>-1&&a!==l?this.setFocus([l],e):this.setFocus([s],e)}else{const l=o;this.view.setScrollTop(o-this.view.renderHeight-r),this.view.getScrollTop()+n()!==l&&(this.setFocus([]),await wk(0),await this.focusPreviousPage(e,t,n))}}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const s=this.findNextIndex(e,!1,n);s>-1&&this.setFocus([s],t)}findNextIndex(e,t=!1,n){for(let s=0;s<this.length;s++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let s=0;s<this.length;s++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,n=0){if(e<0||e>=this.length)throw new mp(this.user,`Invalid index ${e}`);const s=this.view.getScrollTop(),r=this.view.elementTop(e),o=this.view.elementHeight(e);if(Fy(t)){const a=o-this.view.renderHeight+n;this.view.setScrollTop(a*qo(t,0,1)+r-n)}else{const a=r+o,l=s+this.view.renderHeight;r<s+n&&a>=l||(r<s+n||a>=l&&o>=this.view.renderHeight?this.view.setScrollTop(r-n):a>=l&&this.view.setScrollTop(a-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new mp(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),s=this.view.elementTop(e),r=this.view.elementHeight(e);if(s<n+t||s+r>n+this.view.renderHeight)return null;const o=r-this.view.renderHeight+t;return Math.abs((n+t-s)/o)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var t;const e=this.focus.get();if(e.length>0){let n;(t=this.accessibilityProvider)!=null&&t.getActiveDescendantId&&(n=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",n||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}$m([Fi],Du.prototype,"onDidChangeFocus",null);$m([Fi],Du.prototype,"onDidChangeSelection",null);$m([Fi],Du.prototype,"onContextMenu",null);$m([Fi],Du.prototype,"onKeyDown",null);$m([Fi],Du.prototype,"onDidFocus",null);$m([Fi],Du.prototype,"onDidBlur",null);const o0=ht,Pge="selectOption.entry.template";class Oqe{get templateId(){return Pge}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=Qe(e,o0(".option-text")),t.detail=Qe(e,o0(".option-detail")),t.decoratorRight=Qe(e,o0(".option-decorator-right")),t}renderElement(e,t,n){const s=n,r=e.text,o=e.detail,a=e.decoratorRight,l=e.isDisabled;s.text.textContent=r,s.detail.textContent=o||"",s.decoratorRight.innerText=a||"",l?s.root.classList.add("option-disabled"):s.root.classList.remove("option-disabled")}disposeTemplate(e){}}const Ju=class Ju extends be{constructor(e,t,n,s,r){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=s,this.selectBoxOptions=r||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=Ju.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new se,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(n),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(zd().setupManagedHover(zl("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return Pge}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=ht(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=Qe(this.selectDropDownContainer,o0(".select-box-details-pane"));const t=Qe(this.selectDropDownContainer,o0(".select-box-dropdown-container-width-control")),n=Qe(t,o0(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",Qe(n,this.widthControlElement),this._dropDownPosition=0,this.styleElement=Hl(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(ge(this.selectDropDownContainer,De.DRAG_START,s=>{Xt.stop(s,!0)}))}registerListeners(){this._register(Vs(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(ge(this.selectElement,De.CLICK,t=>{Xt.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(ge(this.selectElement,De.MOUSE_DOWN,t=>{Xt.stop(t)}));let e;this._register(ge(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(ge(this.selectElement,"touchend",t=>{Xt.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(ge(this.selectElement,De.KEY_DOWN,t=>{const n=new hi(t);let s=!1;rn?(n.keyCode===18||n.keyCode===16||n.keyCode===10||n.keyCode===3)&&(s=!0):(n.keyCode===18&&n.altKey||n.keyCode===16&&n.altKey||n.keyCode===10||n.keyCode===3)&&(s=!0),s&&(this.showSelectDropDown(),Xt.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){ks(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((n,s)=>{this.selectElement.add(this.createOption(n.text,s,n.isDisabled)),typeof n.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){var e;(e=this.selectList)==null||e.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){const e=this.styles.selectBackground??"",t=this.styles.selectForeground??"",n=this.styles.selectBorder??"";this.selectElement.style.backgroundColor=e,this.selectElement.style.color=t,this.selectElement.style.borderColor=n}styleList(){const e=this.styles.selectBackground??"",t=ef(this.styles.selectListBackground,e);this.selectDropDownListContainer.style.backgroundColor=t,this.selectionDetailsPane.style.backgroundColor=t;const n=this.styles.focusBorder??"";this.selectDropDownContainer.style.outlineColor=n,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,n){const s=document.createElement("option");return s.value=e,s.text=e,s.disabled=!!n,s}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{this.selectDropDownContainer.remove()}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,n)=>{this.updateDetail(n),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=rt(this.selectElement),n=Nl(this.selectElement),s=rt(this.selectElement).getComputedStyle(this.selectElement),r=parseFloat(s.getPropertyValue("--dropdown-padding-top"))+parseFloat(s.getPropertyValue("--dropdown-padding-bottom")),o=t.innerHeight-n.top-n.height-(this.selectBoxOptions.minBottomMargin||0),a=n.top-Ju.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,l=this.selectElement.offsetWidth,c=this.setWidthControlElement(this.widthControlElement),u=Math.max(c,Math.round(l)).toString()+"px";this.selectDropDownContainer.style.width=u,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let d=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const h=this._hasDetails?this._cachedMaxDetailsHeight:0,g=d+r+h,p=Math.floor((o-r-h)/this.getHeight()),_=Math.floor((a-r-h)/this.getHeight());if(e)return n.top+n.height>t.innerHeight-22||n.top<Ju.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||p<1&&_<1?!1:(p<Ju.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&_>p&&this.options.length>p?(this._dropDownPosition=1,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(n.top+n.height>t.innerHeight-22||n.top<Ju.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&p<1||this._dropDownPosition===1&&_<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&p+_<1)return this.hideSelectDropDown(!0),!1;g>o&&(d=p*this.getHeight())}else g>a&&(d=_*this.getHeight());return this.selectList.layout(d),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=d+r+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=d+r+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=u,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let n=0,s=0;this.options.forEach((r,o)=>{const a=r.detail?r.detail.length:0,l=r.decoratorRight?r.decoratorRight.length:0,c=r.text.length+a+l;c>s&&(n=o,s=c)}),e.textContent=this.options[n].text+(this.options[n].decoratorRight?this.options[n].decoratorRight+" ":""),t=qH(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=Qe(e,o0(".select-box-dropdown-list-container")),this.listRenderer=new Oqe,this.selectList=this._register(new Du("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:s=>{let r=s.text;return s.detail&&(r+=`. ${s.detail}`),s.decoratorRight&&(r+=`. ${s.decoratorRight}`),s.description&&(r+=`. ${s.description}`),r},getWidgetAriaLabel:()=>S({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>rn?"":"option",getWidgetRole:()=>"listbox"}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new qt(this.selectDropDownListContainer,"keydown")),n=Le.chain(t.event,s=>s.filter(()=>this.selectList.length>0).map(r=>new hi(r)));this._register(Le.chain(n,s=>s.filter(r=>r.keyCode===3))(this.onEnter,this)),this._register(Le.chain(n,s=>s.filter(r=>r.keyCode===2))(this.onEnter,this)),this._register(Le.chain(n,s=>s.filter(r=>r.keyCode===9))(this.onEscape,this)),this._register(Le.chain(n,s=>s.filter(r=>r.keyCode===16))(this.onUpArrow,this)),this._register(Le.chain(n,s=>s.filter(r=>r.keyCode===18))(this.onDownArrow,this)),this._register(Le.chain(n,s=>s.filter(r=>r.keyCode===12))(this.onPageDown,this)),this._register(Le.chain(n,s=>s.filter(r=>r.keyCode===11))(this.onPageUp,this)),this._register(Le.chain(n,s=>s.filter(r=>r.keyCode===14))(this.onHome,this)),this._register(Le.chain(n,s=>s.filter(r=>r.keyCode===13))(this.onEnd,this)),this._register(Le.chain(n,s=>s.filter(r=>r.keyCode>=21&&r.keyCode<=56||r.keyCode>=85&&r.keyCode<=113))(this.onCharacter,this)),this._register(ge(this.selectList.getHTMLElement(),De.POINTER_UP,s=>this.onPointerUp(s))),this._register(this.selectList.onMouseOver(s=>typeof s.index<"u"&&this.selectList.setFocus([s.index]))),this._register(this.selectList.onDidChangeFocus(s=>this.onListFocus(s))),this._register(ge(this.selectDropDownContainer,De.FOCUS_OUT,s=>{!this._isVisible||Fs(s.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;Xt.stop(e);const t=e.target;if(!t||t.classList.contains("slider"))return;const n=t.closest(".monaco-list-row");if(!n)return;const s=Number(n.getAttribute("data-index")),r=n.classList.contains("option-disabled");s>=0&&s<this.options.length&&!r&&(this.selected=s,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const n=r=>{for(let o=0;o<r.childNodes.length;o++){const a=r.childNodes.item(o);(a.tagName&&a.tagName.toLowerCase())==="img"?a.remove():n(a)}},s=TU({value:e,supportThemeIcons:!0},{actionHandler:t});return s.element.classList.add("select-box-description-markdown"),n(s.element),s.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){this.selectionDetailsPane.innerText="";const t=this.options[e],n=(t==null?void 0:t.description)??"",s=(t==null?void 0:t.descriptionIsMarkdown)??!1;if(n){if(s){const r=t.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(n,r))}else this.selectionDetailsPane.innerText=n;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){Xt.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){Xt.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){Xt.stop(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(Xt.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){Xt.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){Xt.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){Xt.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){Xt.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=Rh.toString(e.keyCode);let n=-1;for(let s=0;s<this.options.length-1;s++)if(n=(s+this.selected+1)%this.options.length,this.options[n].text.charAt(0).toUpperCase()===t&&!this.options[n].isDisabled){this.select(n),this.selectList.setFocus([n]),this.selectList.reveal(this.selectList.getFocus()[0]),Xt.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}};Ju.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32,Ju.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2,Ju.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;let w7=Ju;class Fqe extends be{constructor(e,t,n,s){super(),this.selected=0,this.selectBoxOptions=s||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new se),this.styles=n,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(To.addTarget(this.selectElement)),[ei.Tap].forEach(e=>{this._register(ge(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(Vs(this.selectElement,"click",e=>{Xt.stop(e,!0)})),this._register(Vs(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(Vs(this.selectElement,"keydown",e=>{let t=!1;rn?(e.keyCode===18||e.keyCode===16||e.keyCode===10)&&(t=!0):(e.keyCode===18&&e.altKey||e.keyCode===10||e.keyCode===3)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!ks(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((n,s)=>{this.selectElement.add(this.createOption(n.text,s,n.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??"",this.selectElement.style.color=this.styles.selectForeground??"",this.selectElement.style.borderColor=this.styles.selectBorder??"")}createOption(e,t,n){const s=document.createElement("option");return s.value=e,s.text=e,s.disabled=!!n,s}}class Bqe extends Af{constructor(e,t,n,s,r){super(),rn&&!(r!=null&&r.useCustomDrawn)?this.selectBoxDelegate=new Fqe(e,t,s,r):this.selectBoxDelegate=new w7(e,t,n,s,r),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}}class Xc extends be{get action(){return this._action}constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof tf&&this._register(t.onDidChange(s=>{this.element&&this.handleActionChangeEvent(s)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new t1)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(To.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,vc&&this._register(ge(e,De.DRAG_START,s=>{var r;return(r=s.dataTransfer)==null?void 0:r.setData(Ege.TEXT,this._action.label)}))),this._register(ge(t,ei.Tap,s=>this.onClick(s,!0))),this._register(ge(t,De.MOUSE_DOWN,s=>{n||Xt.stop(s,!0),this._action.enabled&&s.button===0&&t.classList.add("active")})),rn&&this._register(ge(t,De.CONTEXT_MENU,s=>{s.button===0&&s.ctrlKey===!0&&this.onClick(s)})),this._register(ge(t,De.CLICK,s=>{Xt.stop(s,!0),this.options&&this.options.isMenu||this.onClick(s)})),this._register(ge(t,De.DBLCLICK,s=>{Xt.stop(s,!0)})),[De.MOUSE_UP,De.MOUSE_OUT].forEach(s=>{this._register(ge(t,s,r=>{Xt.stop(r),t.classList.remove("active")}))})}onClick(e,t=!1){var s;Xt.stop(e,!0);const n=Ka(this._context)?(s=this.options)!=null&&s.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,n)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){var t;if(!this.element)return;const e=this.getTooltip()??"";if(this.updateAriaLabel(),(t=this.options.hoverDelegate)!=null&&t.showNativeHover)this.element.title=e;else if(!this.customHover&&e!==""){const n=this.options.hoverDelegate??zl("element");this.customHover=this._store.add(zd().setupManagedHover(n,this.element,e))}else this.customHover&&this.customHover.update(e)}updateAriaLabel(){if(this.element){const e=this.getTooltip()??"";this.element.setAttribute("aria-label",e)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class WU extends Xc{constructor(e,t,n){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),tm(this.element);const t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding){const n=document.createElement("span");n.classList.add("keybinding"),n.textContent=this.options.keybinding,this.element.appendChild(n)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===oo.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=S({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(e=this.label)==null||e.classList.remove("codicon")}updateEnabled(){var e,t;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(e=this.element)==null||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(t=this.element)==null||t.classList.add("disabled"))}updateAriaLabel(){if(this.label){const e=this.getTooltip()??"";this.label.setAttribute("aria-label",e)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))):(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class Vqe extends Xc{constructor(e,t,n,s,r,o,a){super(e,t),this.selectBox=new Bqe(n,s,r,o,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){var e;(e=this.selectBox)==null||e.focus()}blur(){var e;(e=this.selectBox)==null||e.blur()}render(e){this.selectBox.render(e)}}class Wqe extends t1{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new se),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=Qe(e,ht(".monaco-dropdown")),this._label=Qe(this._element,ht(".dropdown-label"));let n=t.labelRenderer;n||(n=r=>(r.textContent=t.label||"",null));for(const r of[De.CLICK,De.MOUSE_DOWN,ei.Tap])this._register(ge(this.element,r,o=>Xt.stop(o,!0)));for(const r of[De.MOUSE_DOWN,ei.Tap])this._register(ge(this._label,r,o=>{YH(o)&&(o.detail>1||o.button!==0)||(this.visible?this.hide():this.show())}));this._register(ge(this._label,De.KEY_UP,r=>{const o=new hi(r);(o.equals(3)||o.equals(10))&&(Xt.stop(r,!0),this.visible?this.hide():this.show())}));const s=n(this._label);s&&this._register(s),this._register(To.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class Hqe extends Wqe{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class TD extends Xc{constructor(e,t,n,s=Object.create(null)){super(null,e,s),this.actionItem=null,this._onDidChangeVisibility=this._register(new se),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=s,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=r=>{this.element=Qe(r,ht("a.action-label"));let o=[];return typeof this.options.classNames=="string"?o=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(o=this.options.classNames),o.find(a=>a==="icon")||o.push("codicon"),this.element.classList.add(...o),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register(zd().setupManagedHover(this.options.hoverDelegate??zl("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},n=Array.isArray(this.menuActionsOrProvider),s={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new Hqe(e,s)),this._register(this.dropdownMenu.onDidChangeVisibility(r=>{var o;(o=this.element)==null||o.setAttribute("aria-expanded",`${r}`),this._onDidChangeVisibility.fire(r)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const r=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return r.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){var e;(e=this.dropdownMenu)==null||e.show()}updateEnabled(){var t,n;const e=!this.action.enabled;(t=this.actionItem)==null||t.classList.toggle("disabled",e),(n=this.element)==null||n.classList.toggle("disabled",e)}}function Uqe(i){return i?i.condition!==void 0:!1}var sb;(function(i){i[i.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",i[i.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(sb||(sb={}));var dv;(function(i){i[i.None=0]="None",i[i.Initialized=1]="Initialized",i[i.Closed=2]="Closed"})(dv||(dv={}));const ZN=class ZN extends be{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new _k),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=dv.None,this.cache=new Map,this.flushDelayer=this._register(new fhe(ZN.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,n;this._onDidChangeStorage.pause();try{(t=e.changed)==null||t.forEach((s,r)=>this.acceptExternal(r,s)),(n=e.deleted)==null||n.forEach(s=>this.acceptExternal(s,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===dv.Closed)return;let n=!1;Ka(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire({key:e,external:!0})}get(e,t){const n=this.cache.get(e);return Ka(n)?t:n}getBoolean(e,t){const n=this.get(e);return Ka(n)?t:n==="true"}getNumber(e,t){const n=this.get(e);return Ka(n)?t:parseInt(n,10)}async set(e,t,n=!1){if(this.state===dv.Closed)return;if(Ka(t))return this.delete(e,n);const s=Xo(t)||Array.isArray(t)?_je(t):String(t);if(this.cache.get(e)!==s)return this.cache.set(e,s),this.pendingInserts.set(e,s),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:n}),this.doFlush()}async delete(e,t=!1){if(!(this.state===dv.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())==null||t()})}async doFlush(e){return this.options.hint===sb.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),e)}};ZN.DEFAULT_FLUSH_DELAY=100;let eS=ZN;class a6{constructor(){this.onDidChangeItemsExternal=Le.None,this.items=new Map}async updateItems(e){var t,n;(t=e.insert)==null||t.forEach((s,r)=>this.items.set(r,s)),(n=e.delete)==null||n.forEach(s=>this.items.delete(s))}}const mL="__$__targetStorageMarker",CA=nn("storageService");var wJ;(function(i){i[i.NONE=0]="NONE",i[i.SHUTDOWN=1]="SHUTDOWN"})(wJ||(wJ={}));function zqe(i){const e=i.get(mL);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}const JN=class JN extends be{constructor(e={flushInterval:JN.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new _k),this._onDidChangeTarget=this._register(new _k),this._onWillSaveState=this._register(new se),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(e,t,n){return Le.filter(this._onDidChangeValue.event,s=>s.scope===e&&(t===void 0||s.key===t),n)}emitDidChangeValue(e,t){const{key:n,external:s}=t;if(n===mL){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:n,target:this.getKeyTargets(e)[n],external:s})}get(e,t,n){var s;return(s=this.getStorage(t))==null?void 0:s.get(e,n)}getBoolean(e,t,n){var s;return(s=this.getStorage(t))==null?void 0:s.getBoolean(e,n)}getNumber(e,t,n){var s;return(s=this.getStorage(t))==null?void 0:s.getNumber(e,n)}store(e,t,n,s,r=!1){if(Ka(t)){this.remove(e,n,r);return}this.withPausedEmitters(()=>{var o;this.updateKeyTarget(e,n,s),(o=this.getStorage(n))==null||o.set(e,t,r)})}remove(e,t,n=!1){this.withPausedEmitters(()=>{var s;this.updateKeyTarget(e,t,void 0),(s=this.getStorage(t))==null||s.delete(e,n)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,n,s=!1){var o,a;const r=this.getKeyTargets(t);typeof n=="number"?r[e]!==n&&(r[e]=n,(o=this.getStorage(t))==null||o.set(mL,JSON.stringify(r),s)):typeof r[e]=="number"&&(delete r[e],(a=this.getStorage(t))==null||a.set(mL,JSON.stringify(r),s))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?zqe(t):Object.create(null)}};JN.DEFAULT_FLUSH_INTERVAL=60*1e3;let C7=JN;class jqe extends C7{constructor(){super(),this.applicationStorage=this._register(new eS(new a6,{hint:sb.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new eS(new a6,{hint:sb.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new eS(new a6,{hint:sb.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}function $qe(i,e){const t={...e};for(const n in i){const s=i[n];t[n]=s!==void 0?Re(s):void 0}return t}const qqe={keybindingLabelBackground:Re(MUe),keybindingLabelForeground:Re(OUe),keybindingLabelBorder:Re(FUe),keybindingLabelBottomBorder:Re(BUe),keybindingLabelShadow:Re(q2)},Kqe={buttonForeground:Re(qfe),buttonSeparator:Re(wUe),buttonBackground:Re(_C),buttonHoverBackground:Re(CUe),buttonSecondaryForeground:Re(kUe),buttonSecondaryBackground:Re(K8),buttonSecondaryHoverBackground:Re(xUe),buttonBorder:Re(SUe)},Gqe={progressBarBackground:Re(BHe)},Mge={inputActiveOptionBorder:Re(zfe),inputActiveOptionForeground:Re($fe),inputActiveOptionBackground:Re(jfe)};Re(vC),Re(EUe),Re(TUe),Re(LUe),Re(IUe),Re(DUe),Re(NUe);Re(RUe),Re(PUe),Re(AUe);Re(cc),Re(lA),Re(q2),Re(Sn),Re(ZHe),Re(JHe),Re(eUe),Re(OHe);const Oge={inputBackground:Re(aUe),inputForeground:Re(lUe),inputBorder:Re(cUe),inputValidationInfoBorder:Re(fUe),inputValidationInfoBackground:Re(dUe),inputValidationInfoForeground:Re(hUe),inputValidationWarningBorder:Re(pUe),inputValidationWarningBackground:Re(gUe),inputValidationWarningForeground:Re(mUe),inputValidationErrorBorder:Re(bUe),inputValidationErrorBackground:Re(_Ue),inputValidationErrorForeground:Re(vUe)},Yqe={listFilterWidgetBackground:Re(QUe),listFilterWidgetOutline:Re(XUe),listFilterWidgetNoMatchesOutline:Re(ZUe),listFilterWidgetShadow:Re(JUe),inputBoxStyles:Oge,toggleStyles:Mge},Qqe={badgeBackground:Re(dL),badgeForeground:Re(FHe),badgeBorder:Re(Sn)};Re(QHe),Re(YHe),Re(LZ),Re(LZ),Re(XHe);const qy={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:Re(VUe),listFocusForeground:Re(WUe),listFocusOutline:Re(HUe),listActiveSelectionBackground:Re(r1),listActiveSelectionForeground:Re(Ik),listActiveSelectionIconForeground:Re(Kfe),listFocusAndSelectionOutline:Re(UUe),listFocusAndSelectionBackground:Re(r1),listFocusAndSelectionForeground:Re(Ik),listInactiveSelectionBackground:Re(zUe),listInactiveSelectionIconForeground:Re($Ue),listInactiveSelectionForeground:Re(jUe),listInactiveFocusBackground:Re(qUe),listInactiveFocusOutline:Re(KUe),listHoverBackground:Re(Gfe),listHoverForeground:Re(Yfe),listDropOverBackground:Re(GUe),listDropBetweenBackground:Re(YUe),listSelectionOutline:Re(Gi),listHoverOutline:Re(Gi),treeIndentGuidesStroke:Re(Qfe),treeInactiveIndentGuidesStroke:Re(eze),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:Re(fU),tableColumnsBorder:Re(tze),tableOddRowsBackgroundColor:Re(nze)};function J2(i){return $qe(i,qy)}const Xqe={selectBackground:Re(cA),selectListBackground:Re(yUe),selectForeground:Re(pU),decoratorRightForeground:Re(Xfe),selectBorder:Re(_U),focusBorder:Re(Nd),listFocusBackground:Re(Y8),listInactiveSelectionIconForeground:Re(Zfe),listFocusForeground:Re(G8),listFocusOutline:DHe(Gi,ke.transparent.toString()),listHoverBackground:Re(Gfe),listHoverForeground:Re(Yfe),listHoverOutline:Re(Gi),selectListBorder:Re(Ffe),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},Zqe={shadowColor:Re(q2),borderColor:Re(ize),foregroundColor:Re(sze),backgroundColor:Re(rze),selectionForegroundColor:Re(oze),selectionBackgroundColor:Re(aze),selectionBorderColor:Re(lze),separatorColor:Re(cze),scrollbarShadow:Re(fU),scrollbarSliderBackground:Re(Pfe),scrollbarSliderHoverBackground:Re(Mfe),scrollbarSliderActiveBackground:Re(Ofe)};var SA=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Yo=function(i,e){return function(t,n){e(t,n,i)}};function Jqe(i,e,t,n){let s,r,o;if(Array.isArray(i))o=i,s=e,r=t;else{const c=e;o=i.getActions(c),s=t,r=n}const a=Vg.getInstance(),l=a.keyStatus.altKey||(Sa||ia)&&a.keyStatus.shiftKey;Fge(o,s,l,r?c=>c===r:c=>c==="navigation")}function eKe(i,e,t,n,s,r){let o,a,l,c,u;if(Array.isArray(i))u=i,o=e,a=t,l=n,c=s;else{const h=e;u=i.getActions(h),o=t,a=n,l=s,c=r}Fge(u,o,!1,typeof a=="string"?h=>h===a:a,l,c)}function Fge(i,e,t,n=o=>o==="navigation",s=()=>!1,r=!1){let o,a;Array.isArray(e)?(o=e,a=e):(o=e.primary,a=e.secondary);const l=new Set;for(const[c,u]of i){let d;n(c)?(d=o,d.length>0&&r&&d.push(new oo)):(d=a,d.length>0&&d.push(new oo));for(let h of u){t&&(h=h instanceof nf&&h.alt?h.alt:h);const g=d.push(h);h instanceof K4&&l.add({group:c,action:h,index:g-1})}}for(const{group:c,action:u,index:d}of l){const h=n(c)?o:a,g=u.actions;s(u,c,h.length)&&h.splice(d,1,...g)}}let Ok=class extends WU{constructor(e,t,n,s,r,o,a,l){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable,keybinding:t==null?void 0:t.keybinding,hoverDelegate:t==null?void 0:t.hoverDelegate}),this._options=t,this._keybindingService=n,this._notificationService=s,this._contextKeyService=r,this._themeService=o,this._contextMenuService=a,this._accessibilityService=l,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new yf),this._altKey=Vg.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(e){e.preventDefault(),e.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1;const n=()=>{var r;const s=!!((r=this._menuItemAction.alt)!=null&&r.enabled)&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);s!==this._wantsAltCommand&&(this._wantsAltCommand=s,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(n)),this._register(ge(e,"mouseleave",s=>{t=!1,n()})),this._register(ge(e,"mouseenter",s=>{t=!0,n()})),n()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var r;const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),n=this._commandAction.tooltip||this._commandAction.label;let s=t?S("titleAndKb","{0} ({1})",n,t):n;if(!this._wantsAltCommand&&((r=this._menuItemAction.alt)!=null&&r.enabled)){const o=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),l=a&&a.getLabel(),c=l?S("titleAndKb","{0} ({1})",o,l):o;s=S("titleAndKbAndAlt",`{0}
[{1}] {2}`,s,NU.modifierLabels[lc].altKey,c)}return s}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:n}=this;if(!t||!n)return;const s=this._commandAction.checked&&Uqe(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(s)if(dn.isThemeIcon(s)){const r=dn.asClassNameArray(s);n.classList.add(...r),this._itemClassDispose.value=Dt(()=>{n.classList.remove(...r)})}else n.style.backgroundImage=oA(this._themeService.getColorTheme().type)?Cf(s.dark):Cf(s.light),n.classList.add("icon"),this._itemClassDispose.value=Cd(Dt(()=>{n.style.backgroundImage="",n.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};Ok=SA([Yo(2,yr),Yo(3,Lu),Yo(4,Nn),Yo(5,Sc),Yo(6,Rf),Yo(7,Iu)],Ok);let S7=class extends TD{constructor(e,t,n,s,r){const o={...t,menuAsChild:(t==null?void 0:t.menuAsChild)??!1,classNames:(t==null?void 0:t.classNames)??(dn.isThemeIcon(e.item.icon)?dn.asClassName(e.item.icon):void 0),keybindingProvider:(t==null?void 0:t.keybindingProvider)??(a=>n.lookupKeybinding(a.id))};super(e,{getActions:()=>e.actions},s,o),this._keybindingService=n,this._contextMenuService=s,this._themeService=r}render(e){super.render(e),tm(this.element),e.classList.add("menu-entry");const t=this._action,{icon:n}=t.item;if(n&&!dn.isThemeIcon(n)){this.element.classList.add("icon");const s=()=>{this.element&&(this.element.style.backgroundImage=oA(this._themeService.getColorTheme().type)?Cf(n.dark):Cf(n.light))};s(),this._register(this._themeService.onDidColorThemeChange(()=>{s()}))}}};S7=SA([Yo(2,yr),Yo(3,Rf),Yo(4,Sc)],S7);let k7=class extends Xc{constructor(e,t,n,s,r,o,a,l){super(null,e),this._keybindingService=n,this._notificationService=s,this._contextMenuService=r,this._menuService=o,this._instaService=a,this._storageService=l,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let c;const u=t!=null&&t.persistLastActionId?l.get(this._storageKey,1):void 0;u&&(c=e.actions.find(h=>u===h.id)),c||(c=e.actions[0]),this._defaultAction=this._instaService.createInstance(Ok,c,{keybinding:this._getDefaultActionKeybindingLabel(c)});const d={keybindingProvider:h=>this._keybindingService.lookupKeybinding(h.id),...t,menuAsChild:(t==null?void 0:t.menuAsChild)??!0,classNames:(t==null?void 0:t.classNames)??["codicon","codicon-chevron-down"],actionRunner:(t==null?void 0:t.actionRunner)??new t1};this._dropdown=new TD(e,e.actions,this._contextMenuService,d),this._register(this._dropdown.actionRunner.onDidRun(h=>{h.action instanceof nf&&this.update(h.action)}))}update(e){var t;(t=this._options)!=null&&t.persistLastActionId&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(Ok,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends t1{async runAction(n,s){await n.run(void 0)}},this._container&&this._defaultAction.render(QH(this._container,ht(".action-container")))}_getDefaultActionKeybindingLabel(e){var n;let t;if((n=this._options)!=null&&n.renderKeybindingWithDefaultActionLabel){const s=this._keybindingService.lookupKeybinding(e.id);s&&(t=`(${s.getLabel()})`)}return t}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=ht(".action-container");this._defaultAction.render(Qe(this._container,t)),this._register(ge(t,De.KEY_DOWN,s=>{const r=new hi(s);r.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),r.stopPropagation())}));const n=ht(".dropdown-action-container");this._dropdown.render(Qe(this._container,n)),this._register(ge(n,De.KEY_DOWN,s=>{var o;const r=new hi(s);r.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(o=this._defaultAction.element)==null||o.focus(),r.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};k7=SA([Yo(2,yr),Yo(3,Lu),Yo(4,Rf),Yo(5,I1),Yo(6,Pn),Yo(7,CA)],k7);let x7=class extends Vqe{constructor(e,t){super(null,e,e.actions.map(n=>({text:n.id===oo.ID?"":n.label,isDisabled:!n.enabled})),0,t,Xqe,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex(n=>n.checked)))}render(e){super.render(e),e.style.borderColor=Re(_U)}runAction(e,t){const n=this.action.actions[t];n&&this.actionRunner.run(n)}};x7=SA([Yo(1,G2)],x7);function tKe(i,e,t){return e instanceof nf?i.createInstance(Ok,e,t):e instanceof GC?e.item.isSelection?i.createInstance(x7,e):e.item.rememberDefaultAction?i.createInstance(k7,e,{...t,persistLastActionId:!0}):i.createInstance(S7,e,t):void 0}class rf extends be{constructor(e,t={}){var r,o;super(),this._actionRunnerDisposables=this._register(new Ze),this.viewItemDisposables=this._register(new LH),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new se),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new se({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new se),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new se),this.onWillRun=this._onWillRun.event,this.options=t,this._context=t.context??null,this._orientation=this.options.orientation??0,this._triggerKeys={keyDown:((r=this.options.triggerKeys)==null?void 0:r.keyDown)??!1,keys:((o=this.options.triggerKeys)==null?void 0:o.keys)??[3,10]},this._hoverDelegate=t.hoverDelegate??this._register(VU()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new t1,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(a=>this._onDidRun.fire(a))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(a=>this._onWillRun.fire(a))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";let n,s;switch(this._orientation){case 0:n=[15],s=[17];break;case 1:n=[16],s=[18],this.domNode.className+=" vertical";break}this._register(ge(this.domNode,De.KEY_DOWN,a=>{const l=new hi(a);let c=!0;const u=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;n&&(l.equals(n[0])||l.equals(n[1]))?c=this.focusPrevious():s&&(l.equals(s[0])||l.equals(s[1]))?c=this.focusNext():l.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():l.equals(14)?c=this.focusFirst():l.equals(13)?c=this.focusLast():l.equals(2)&&u instanceof Xc&&u.trapsArrowNavigation?c=this.focusNext(void 0,!0):this.isTriggerKeyEvent(l)?this._triggerKeys.keyDown?this.doTrigger(l):this.triggerKeyDown=!0:c=!1,c&&(l.preventDefault(),l.stopPropagation())})),this._register(ge(this.domNode,De.KEY_UP,a=>{const l=new hi(a);this.isTriggerKeyEvent(l)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(l)),l.preventDefault(),l.stopPropagation()):(l.equals(2)||l.equals(1026)||l.equals(16)||l.equals(18)||l.equals(15)||l.equals(17))&&this.updateFocusedItem()})),this.focusTracker=this._register(Ck(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(ro()===this.domNode||!Fs(ro(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(n=>n instanceof Xc&&n.isEnabled());t instanceof Xc&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof Xc&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){var e,t;for(let n=0;n<this.actionsList.children.length;n++){const s=this.actionsList.children[n];if(Fs(ro(),s)){this.focusedItem=n,(t=(e=this.viewItems[this.focusedItem])==null?void 0:e.showHover)==null||t.call(e);break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}getAction(e){var t;if(typeof e=="number")return(t=this.viewItems[e])==null?void 0:t.action;if(Zs(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let n=0;n<this.actionsList.childNodes.length;n++)if(this.actionsList.childNodes[n]===e)return this.viewItems[n].action}}push(e,t={}){const n=Array.isArray(e)?e:[e];let s=Fy(t.index)?t.index:null;n.forEach(r=>{const o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation");let a;const l={hoverDelegate:this._hoverDelegate,...t,isTabList:this.options.ariaRole==="tablist"};this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(r,l)),a||(a=new WU(this.context,r,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,ge(o,De.CONTEXT_MENU,c=>{Xt.stop(c,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(o),this.focusable&&a instanceof Xc&&this.viewItems.length===0&&a.setFocusable(!0),s===null||s<0||s>=this.actionsList.children.length?(this.actionsList.appendChild(o),this.viewItems.push(a)):(this.actionsList.insertBefore(o,this.actionsList.children[s]),this.viewItems.splice(s,0,a),s++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=br(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),gu(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const s=this.viewItems.findIndex(r=>r.isEnabled());this.focusedItem=s===-1?void 0:s,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e,t){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const n=this.focusedItem;let s;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=n,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,s=this.viewItems[this.focusedItem]}while(this.focusedItem!==n&&(this.options.focusOnlyEnabledItems&&!s.isEnabled()||s.action.id===oo.ID));return this.updateFocus(void 0,void 0,t),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===oo.ID));return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){var r,o;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((r=this.viewItems[this.previouslyFocusedItem])==null||r.blur());const s=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(s){let a=!0;FI(s.focus)||(a=!1),this.options.focusOnlyEnabledItems&&FI(s.isEnabled)&&!s.isEnabled()&&(a=!1),s.action.id===oo.ID&&(a=!1),a?(n||this.previouslyFocusedItem!==this.focusedItem)&&(s.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),a&&((o=s.showHover)==null||o.call(s))}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof Xc){const n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=br(this.viewItems),this.getContainer().remove(),super.dispose()}}const E7=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,l6=/(&amp;)?(&amp;)([^\s&])/g;var LD;(function(i){i[i.Right=0]="Right",i[i.Left=1]="Left"})(LD||(LD={}));var T7;(function(i){i[i.Above=0]="Above",i[i.Below=1]="Below"})(T7||(T7={}));class rb extends rf{constructor(e,t,n,s){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const r=document.createElement("div");r.classList.add("monaco-menu"),r.setAttribute("role","presentation"),super(r,{orientation:1,actionViewItemProvider:c=>this.doGetActionViewItem(c,n,o),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...rn||ia?[10]:[]],keyDown:!0}}),this.menuStyles=s,this.menuElement=r,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,s),this._register(To.addTarget(r)),this._register(ge(r,De.KEY_DOWN,c=>{new hi(c).equals(2)&&c.preventDefault()})),n.enableMnemonics&&this._register(ge(r,De.KEY_DOWN,c=>{const u=c.key.toLocaleLowerCase();if(this.mnemonics.has(u)){Xt.stop(c,!0);const d=this.mnemonics.get(u);if(d.length===1&&(d[0]instanceof CJ&&d[0].container&&this.focusItemByElement(d[0].container),d[0].onClick(c)),d.length>1){const h=d.shift();h&&h.container&&(this.focusItemByElement(h.container),d.push(h)),this.mnemonics.set(u,d)}}})),ia&&this._register(ge(r,De.KEY_DOWN,c=>{const u=new hi(c);u.equals(14)||u.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),Xt.stop(c,!0)):(u.equals(13)||u.equals(12))&&(this.focusedItem=0,this.focusPrevious(),Xt.stop(c,!0))})),this._register(ge(this.domNode,De.MOUSE_OUT,c=>{const u=c.relatedTarget;Fs(u,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),c.stopPropagation())})),this._register(ge(this.actionsList,De.MOUSE_OVER,c=>{let u=c.target;if(!(!u||!Fs(u,this.actionsList)||u===this.actionsList)){for(;u.parentElement!==this.actionsList&&u.parentElement!==null;)u=u.parentElement;if(u.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(u),d!==this.focusedItem&&this.updateFocus()}}})),this._register(To.addTarget(this.actionsList)),this._register(ge(this.actionsList,ei.Tap,c=>{let u=c.initialTarget;if(!(!u||!Fs(u,this.actionsList)||u===this.actionsList)){for(;u.parentElement!==this.actionsList&&u.parentElement!==null;)u=u.parentElement;if(u.classList.contains("action-item")){const d=this.focusedItem;this.setFocusedItem(u),d!==this.focusedItem&&this.updateFocus()}}}));const o={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new bU(r,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const a=this.scrollableElement.getDomNode();a.style.position="",this.styleScrollElement(a,s),this._register(ge(r,ei.Change,c=>{Xt.stop(c,!0);const u=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:u-c.translationY})})),this._register(ge(a,De.MOUSE_UP,c=>{c.preventDefault()}));const l=rt(e);r.style.maxHeight=`${Math.max(10,l.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter((c,u)=>{var d;return(d=n.submenuIds)!=null&&d.has(c.id)?(console.warn(`Found submenu cycle: ${c.id}`),!1):!(c instanceof oo&&(u===t.length-1||u===0||t[u-1]instanceof oo))}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(c=>!(c instanceof SJ)).forEach((c,u,d)=>{c.updatePositionInSet(u+1,d.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(QI(e)?this.styleSheet=Hl(e):(rb.globalStyleSheet||(rb.globalStyleSheet=Hl()),this.styleSheet=rb.globalStyleSheet)),this.styleSheet.textContent=iKe(t,QI(e))}styleScrollElement(e,t){const n=t.foregroundColor??"",s=t.backgroundColor??"",r=t.borderColor?`1px solid ${t.borderColor}`:"",o="5px",a=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=r,e.style.borderRadius=o,e.style.color=n,e.style.backgroundColor=s,e.style.boxShadow=a}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const n=this.actionsList.children[t];if(e===n){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof oo)return new SJ(t.context,e,{icon:!0},this.menuStyles);if(e instanceof K4){const s=new CJ(e,e.actions,n,{...t,submenuIds:new Set([...t.submenuIds||[],e.id])},this.menuStyles);if(t.enableMnemonics){const r=s.getMnemonic();if(r&&s.isEnabled()){let o=[];this.mnemonics.has(r)&&(o=this.mnemonics.get(r)),o.push(s),this.mnemonics.set(r,o)}}return s}else{const s={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const o=t.getKeyBinding(e);if(o){const a=o.getLabel();a&&(s.keybinding=a)}}const r=new Bge(t.context,e,s,this.menuStyles);if(t.enableMnemonics){const o=r.getMnemonic();if(o&&r.isEnabled()){let a=[];this.mnemonics.has(o)&&(a=this.mnemonics.get(o)),a.push(r),this.mnemonics.set(o,a)}}return r}}}class Bge extends Xc{constructor(e,t,n,s){if(n.isMenu=!0,super(t,t,n),this.menuStyle=s,this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){const r=this.action.label;if(r){const o=E7.exec(r);o&&(this.mnemonic=(o[1]?o[1]:o[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new so(()=>{this.element&&(this._register(ge(this.element,De.MOUSE_UP,r=>{if(Xt.stop(r,!0),vc){if(new iu(rt(this.element),r).rightButton)return;this.onClick(r)}else setTimeout(()=>{this.onClick(r)},0)})),this._register(ge(this.element,De.CONTEXT_MENU,r=>{Xt.stop(r,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=Qe(this.element,ht("a.action-menu-item")),this._action.id===oo.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=Qe(this.item,ht("span.menu-item-check"+dn.asCSSSelector(Ke.menuSelection))),this.check.setAttribute("role","none"),this.label=Qe(this.item,ht("span.action-label")),this.options.label&&this.options.keybinding&&(Qe(this.item,ht("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){var e;super.focus(),(e=this.item)==null||e.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){var e;if(this.label&&this.options.label){gu(this.label);let t=uge(this.action.label);if(t){const n=nKe(t);this.options.enableMnemonics||(t=n),this.label.setAttribute("aria-label",n.replace(/&&/g,"&"));const s=E7.exec(t);if(s){t=zC(t),l6.lastIndex=0;let r=l6.exec(t);for(;r&&r[1];)r=l6.exec(t);const o=a=>a.replace(/&amp;&amp;/g,"&amp;");r?this.label.append(H4(o(t.substr(0,r.index))," "),ht("u",{"aria-hidden":"true"},r[3]),D7e(o(t.substr(r.index+r[0].length))," ")):this.label.innerText=o(t).trim(),(e=this.item)==null||e.setAttribute("aria-keyshortcuts",(s[1]?s[1]:s[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,s=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",r=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=n??"",this.item.style.outline=s,this.item.style.outlineOffset=r),this.check&&(this.check.style.color=t??"")}}class CJ extends Bge{constructor(e,t,n,s,r){super(e,e,s,r),this.submenuActions=t,this.parentData=n,this.submenuOptions=s,this.mysubmenu=null,this.submenuDisposables=this._register(new Ze),this.mouseOver=!1,this.expandDirection=s&&s.expandDirection!==void 0?s.expandDirection:{horizontal:LD.Right,vertical:T7.Below},this.showScheduler=new so(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new so(()=>{this.element&&!Fs(ro(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=Qe(this.item,ht("span.submenu-indicator"+dn.asCSSSelector(Ke.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(ge(this.element,De.KEY_UP,t=>{const n=new hi(t);(n.equals(17)||n.equals(3))&&(Xt.stop(t,!0),this.createSubmenu(!0))})),this._register(ge(this.element,De.KEY_DOWN,t=>{const n=new hi(t);ro()===this.item&&(n.equals(17)||n.equals(3))&&Xt.stop(t,!0)})),this._register(ge(this.element,De.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(ge(this.element,De.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(ge(this.element,De.FOCUS_OUT,t=>{this.element&&!Fs(ro(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){Xt.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,s){const r={top:0,left:0};return r.left=av(e.width,t.width,{position:s.horizontal===LD.Right?0:1,offset:n.left,size:n.width}),r.left>=n.left&&r.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(r.left=n.left+10),n.top+=10,n.height=0),r.top=av(e.height,t.height,{position:0,offset:n.top,size:0}),r.top+t.height===n.top&&r.top+n.height+t.height<=e.height&&(r.top+=n.height),r}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=Qe(this.element,ht("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=rt(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new rb(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new h8],this.submenuOptions,this.menuStyle);const s=this.element.getBoundingClientRect(),r={top:s.top-n,left:s.left,height:s.height+2*n,width:s.width},o=this.submenuContainer.getBoundingClientRect(),a=rt(this.element),{top:l,left:c}=this.calculateSubmenuMenuLayout(new Ah(a.innerWidth,a.innerHeight),Ah.lift(o),r,this.expandDirection);this.submenuContainer.style.left=`${c-o.left}px`,this.submenuContainer.style.top=`${l-o.top}px`,this.submenuDisposables.add(ge(this.submenuContainer,De.KEY_UP,u=>{new hi(u).equals(15)&&(Xt.stop(u,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(ge(this.submenuContainer,De.KEY_DOWN,u=>{new hi(u).equals(15)&&Xt.stop(u,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)==null||t.setAttribute("aria-expanded",e))}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class SJ extends WU{constructor(e,t,n,s){super(e,t,n),this.menuStyles=s}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function nKe(i){const e=E7,t=e.exec(i);if(!t)return i;const n=!t[1];return i.replace(e,n?"$2$3":"").trim()}function kJ(i){const e=Jde()[i.id];return`.codicon-${i.id}:before { content: '\\${e.toString(16)}'; }`}function iKe(i,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${kJ(Ke.menuSelection)}
${kJ(Ke.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
	max-height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const n=i.scrollbarShadow;n&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${n} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${n} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${n} 6px 6px 6px -6px inset;
				}
			`);const s=i.scrollbarSliderBackground;s&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${s};
				}
			`);const r=i.scrollbarSliderHoverBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${r};
				}
			`);const o=i.scrollbarSliderActiveBackground;o&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${o};
				}
			`)}return t}class sKe{constructor(e,t,n,s){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=s,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=ro();let n;const s=Zs(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:r=>{var u;this.lastContainer=r;const o=e.getMenuClassName?e.getMenuClassName():"";o&&(r.className+=" "+o),this.options.blockMouse&&(this.block=r.appendChild(ht(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",(u=this.blockDisposable)==null||u.dispose(),this.blockDisposable=ge(this.block,De.MOUSE_DOWN,d=>d.stopPropagation()));const a=new Ze,l=e.actionRunner||new t1;l.onWillRun(d=>this.onActionRun(d,!e.skipTelemetry),this,a),l.onDidRun(this.onDidActionRun,this,a),n=new rb(r,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:d=>this.keybindingService.lookupKeybinding(d.id)},Zqe),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a);const c=rt(r);return a.add(ge(c,De.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(ge(c,De.MOUSE_DOWN,d=>{if(d.defaultPrevented)return;const h=new iu(c,d);let g=h.target;if(!h.rightButton){for(;g;){if(g===r)return;g=g.parentElement}this.contextViewService.hideContextView(!0)}})),Cd(a,n)},focus:()=>{n==null||n.focus(!!e.autoSelectFirstItem)},onHide:r=>{var o,a,l;(o=e.onHide)==null||o.call(e,!!r),this.block&&(this.block.remove(),this.block=null),(a=this.blockDisposable)==null||a.dispose(),this.blockDisposable=null,this.lastContainer&&(ro()===this.lastContainer||Fs(ro(),this.lastContainer))&&((l=this.focusToReturn)==null||l.focus()),this.lastContainer=null}},s,!!s)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!A2(e.error)&&this.notificationService.error(e.error)}}var rKe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},N_=function(i,e){return function(t,n){e(t,n,i)}};let L7=class extends be{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new sKe(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,n,s,r,o){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=n,this.keybindingService=s,this.menuService=r,this.contextKeyService=o,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new se),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new se)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=I7.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...e,onHide:t=>{var n;(n=e.onHide)==null||n.call(e,t),this._onDidHideContextMenu.fire()}}),Vg.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};L7=rKe([N_(0,D1),N_(1,Lu),N_(2,G2),N_(3,yr),N_(4,I1),N_(5,Nn)],L7);var I7;(function(i){function e(n){return n&&n.menuId instanceof _r}function t(n,s,r){if(!e(n))return n;const{menuId:o,menuActionOptions:a,contextKeyService:l}=n;return{...n,getActions:()=>{const c=[];if(o){const u=s.getMenuActions(o,l??r,a);Jqe(u,c)}return n.getActions?oo.join(n.getActions(),c):c}}}i.transform=t})(I7||(I7={}));var ID;(function(i){i[i.API=0]="API",i[i.USER=1]="USER"})(ID||(ID={}));var HU=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},DD=function(i,e){return function(t,n){e(t,n,i)}};let D7=class{constructor(e){this._commandService=e}async open(e,t){if(!UH(e,Wt.command))return!1;if(!(t!=null&&t.allowCommands)||(typeof e=="string"&&(e=Ut.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let n=[];try{n=t7(decodeURIComponent(e.query))}catch{try{n=t7(e.query)}catch{}}return Array.isArray(n)||(n=[n]),await this._commandService.executeCommand(e.path,...n),!0}};D7=HU([DD(0,ll)],D7);let N7=class{constructor(e){this._editorService=e}async open(e,t){typeof e=="string"&&(e=Ut.parse(e));const{selection:n,uri:s}=Rze(e);return e=s,e.scheme===Wt.file&&(e=uje(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:n,source:t!=null&&t.fromUserGesture?ID.USER:ID.API,...t==null?void 0:t.editorOptions}},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0}};N7=HU([DD(0,Es)],N7);let R7=class{constructor(e,t){this._openers=new ba,this._validators=new ba,this._resolvers=new ba,this._resolvedUriTargets=new sl(n=>n.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new ba,this._defaultExternalOpener={openExternal:async n=>(lX(n,Wt.http,Wt.https)?Phe(n):Kn.location.href=n,!0)},this._openers.push({open:async(n,s)=>s!=null&&s.openExternal||lX(n,Wt.mailto,Wt.http,Wt.https,Wt.vsls)?(await this._doOpenExternal(n,s),!0):!1}),this._openers.push(new D7(t)),this._openers.push(new N7(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}async open(e,t){const n=typeof e=="string"?Ut.parse(e):e,s=this._resolvedUriTargets.get(n)??e;for(const r of this._validators)if(!await r.shouldOpen(s,t))return!1;for(const r of this._openers)if(await r.open(e,t))return!0;return!1}async resolveExternalUri(e,t){for(const n of this._resolvers)try{const s=await n.resolveExternalUri(e,t);if(s)return this._resolvedUriTargets.has(s.resolved)||this._resolvedUriTargets.set(s.resolved,e),s}catch{}throw new Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){const n=typeof e=="string"?Ut.parse(e):e;let s;try{s=(await this.resolveExternalUri(n,t)).resolved}catch{s=n}let r;if(typeof e=="string"&&n.toString()===s.toString()?r=e:r=encodeURI(s.toString(!0)),t!=null&&t.allowContributedOpeners){const o=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(await a.openExternal(r,{sourceUri:n,preferredOpenerId:o},_c.None))return!0}return this._defaultExternalOpener.openExternal(r,{sourceUri:n},_c.None)}dispose(){this._validators.clear()}};R7=HU([DD(0,Es),DD(1,ll)],R7);const ex=nn("editorWorkerService");var Il;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(Il||(Il={}));(function(i){function e(o,a){return a-o}i.compare=e;const t=Object.create(null);t[i.Error]=S("sev.error","Error"),t[i.Warning]=S("sev.warning","Warning"),t[i.Info]=S("sev.info","Info");function n(o){return t[o]||""}i.toString=n;function s(o){switch(o){case fs.Error:return i.Error;case fs.Warning:return i.Warning;case fs.Info:return i.Info;case fs.Ignore:return i.Hint}}i.fromSeverity=s;function r(o){switch(o){case i.Error:return fs.Error;case i.Warning:return fs.Warning;case i.Info:return fs.Info;case i.Hint:return fs.Ignore}}i.toSeverity=r})(Il||(Il={}));var xJ;(function(i){const e="";function t(s){return n(s,!0)}i.makeKey=t;function n(s,r){const o=[e];return s.source?o.push(s.source.replace("","\\")):o.push(e),s.code?typeof s.code=="string"?o.push(s.code.replace("","\\")):o.push(s.code.value.replace("","\\")):o.push(e),s.severity!==void 0&&s.severity!==null?o.push(Il.toString(s.severity)):o.push(e),s.message&&r?o.push(s.message.replace("","\\")):o.push(e),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(e),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(e),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(e),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(e),o.push(e),o.join("")}i.makeKeyOptionalMessage=n})(xJ||(xJ={}));const P1=nn("markerService"),Vge=Y("editor.lineHighlightBackground",null,S("lineHighlight","Background color for the highlight of line at the cursor position.")),EJ=Y("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:Sn},S("lineHighlightBorderBox","Background color for the border around the line at the cursor position."));Y("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},S("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);Y("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:Gi,hcLight:Gi},S("rangeHighlightBorder","Background color of the border around highlighted ranges."));Y("editor.symbolHighlightBackground",{dark:Wg,light:Wg,hcDark:null,hcLight:null},S("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0);Y("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:Gi,hcLight:Gi},S("symbolHighlightBorder","Background color of the border around highlighted symbols."));const kA=Y("editorCursor.foreground",{dark:"#AEAFAD",light:ke.black,hcDark:ke.white,hcLight:"#0F4A85"},S("caret","Color of the editor cursor.")),UU=Y("editorCursor.background",null,S("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),Wge=Y("editorMultiCursor.primary.foreground",kA,S("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),oKe=Y("editorMultiCursor.primary.background",UU,S("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),Hge=Y("editorMultiCursor.secondary.foreground",kA,S("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),aKe=Y("editorMultiCursor.secondary.background",UU,S("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),zU=Y("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},S("editorWhitespaces","Color of whitespace characters in the editor.")),lKe=Y("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:ke.white,hcLight:"#292929"},S("editorLineNumbers","Color of editor line numbers.")),cKe=Y("editorIndentGuide.background",zU,S("editorIndentGuides","Color of the editor indentation guides."),!1,S("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),uKe=Y("editorIndentGuide.activeBackground",zU,S("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,S("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),tx=Y("editorIndentGuide.background1",cKe,S("editorIndentGuides1","Color of the editor indentation guides (1).")),dKe=Y("editorIndentGuide.background2","#00000000",S("editorIndentGuides2","Color of the editor indentation guides (2).")),hKe=Y("editorIndentGuide.background3","#00000000",S("editorIndentGuides3","Color of the editor indentation guides (3).")),fKe=Y("editorIndentGuide.background4","#00000000",S("editorIndentGuides4","Color of the editor indentation guides (4).")),gKe=Y("editorIndentGuide.background5","#00000000",S("editorIndentGuides5","Color of the editor indentation guides (5).")),mKe=Y("editorIndentGuide.background6","#00000000",S("editorIndentGuides6","Color of the editor indentation guides (6).")),nx=Y("editorIndentGuide.activeBackground1",uKe,S("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),pKe=Y("editorIndentGuide.activeBackground2","#00000000",S("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),_Ke=Y("editorIndentGuide.activeBackground3","#00000000",S("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),vKe=Y("editorIndentGuide.activeBackground4","#00000000",S("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),bKe=Y("editorIndentGuide.activeBackground5","#00000000",S("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),yKe=Y("editorIndentGuide.activeBackground6","#00000000",S("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),wKe=Y("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:Gi,hcLight:Gi},S("editorActiveLineNumber","Color of editor active line number"),!1,S("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));Y("editorLineNumber.activeForeground",wKe,S("editorActiveLineNumber","Color of editor active line number"));const CKe=Y("editorLineNumber.dimmedForeground",null,S("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."));Y("editorRuler.foreground",{dark:"#5A5A5A",light:ke.lightgrey,hcDark:ke.white,hcLight:"#292929"},S("editorRuler","Color of the editor rulers."));Y("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},S("editorCodeLensForeground","Foreground color of editor CodeLens"));Y("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},S("editorBracketMatchBackground","Background color behind matching brackets"));Y("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:Sn,hcLight:Sn},S("editorBracketMatchBorder","Color for matching brackets boxes"));const SKe=Y("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},S("editorOverviewRulerBorder","Color of the overview ruler border.")),kKe=Y("editorOverviewRuler.background",null,S("editorOverviewRulerBackground","Background color of the editor overview ruler."));Y("editorGutter.background",mu,S("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers."));Y("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:ke.fromHex("#fff").transparent(.8),hcLight:Sn},S("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor."));const xKe=Y("editorUnnecessaryCode.opacity",{dark:ke.fromHex("#000a"),light:ke.fromHex("#0007"),hcDark:null,hcLight:null},S("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));Y("editorGhostText.border",{dark:null,light:null,hcDark:ke.fromHex("#fff").transparent(.8),hcLight:ke.fromHex("#292929").transparent(.8)},S("editorGhostTextBorder","Border color of ghost text in the editor."));Y("editorGhostText.foreground",{dark:ke.fromHex("#ffffff56"),light:ke.fromHex("#0007"),hcDark:null,hcLight:null},S("editorGhostTextForeground","Foreground color of the ghost text in the editor."));Y("editorGhostText.background",null,S("editorGhostTextBackground","Background color of the ghost text in the editor."));const EKe=new ke(new gn(0,122,204,.6));Y("editorOverviewRuler.rangeHighlightForeground",EKe,S("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0);const TKe=Y("editorOverviewRuler.errorForeground",{dark:new ke(new gn(255,18,18,.7)),light:new ke(new gn(255,18,18,.7)),hcDark:new ke(new gn(255,50,50,1)),hcLight:"#B5200D"},S("overviewRuleError","Overview ruler marker color for errors.")),LKe=Y("editorOverviewRuler.warningForeground",{dark:Rm,light:Rm,hcDark:hD,hcLight:hD},S("overviewRuleWarning","Overview ruler marker color for warnings.")),IKe=Y("editorOverviewRuler.infoForeground",{dark:s1,light:s1,hcDark:fD,hcLight:fD},S("overviewRuleInfo","Overview ruler marker color for infos.")),Uge=Y("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},S("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),zge=Y("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},S("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),jge=Y("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},S("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),$ge=Y("editorBracketHighlight.foreground4","#00000000",S("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),qge=Y("editorBracketHighlight.foreground5","#00000000",S("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),Kge=Y("editorBracketHighlight.foreground6","#00000000",S("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),DKe=Y("editorBracketHighlight.unexpectedBracket.foreground",{dark:new ke(new gn(255,18,18,.8)),light:new ke(new gn(255,18,18,.8)),hcDark:"new Color(new RGBA(255, 50, 50, 1))",hcLight:"#B5200D"},S("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),NKe=Y("editorBracketPairGuide.background1","#00000000",S("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),RKe=Y("editorBracketPairGuide.background2","#00000000",S("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),AKe=Y("editorBracketPairGuide.background3","#00000000",S("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),PKe=Y("editorBracketPairGuide.background4","#00000000",S("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),MKe=Y("editorBracketPairGuide.background5","#00000000",S("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),OKe=Y("editorBracketPairGuide.background6","#00000000",S("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),FKe=Y("editorBracketPairGuide.activeBackground1","#00000000",S("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),BKe=Y("editorBracketPairGuide.activeBackground2","#00000000",S("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),VKe=Y("editorBracketPairGuide.activeBackground3","#00000000",S("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),WKe=Y("editorBracketPairGuide.activeBackground4","#00000000",S("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),HKe=Y("editorBracketPairGuide.activeBackground5","#00000000",S("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),UKe=Y("editorBracketPairGuide.activeBackground6","#00000000",S("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));Y("editorUnicodeHighlight.border",Rm,S("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));Y("editorUnicodeHighlight.background",VHe,S("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));Nf((i,e)=>{const t=i.getColor(mu),n=i.getColor(Vge),s=n&&!n.isTransparent()?n:t;s&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${s}; }`)});function zKe(i,e){const t=[],n=[];for(const s of i)e.has(s)||t.push(s);for(const s of e)i.has(s)||n.push(s);return{removed:t,added:n}}function jKe(i,e){const t=new Set;for(const n of e)i.has(n)&&t.add(n);return t}var $Ke=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},TJ=function(i,e){return function(t,n){e(t,n,i)}};let A7=class extends be{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new se),this._markerDecorations=new sl,e.getModels().forEach(n=>this._onModelAdded(n)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const n=this._markerDecorations.get(t);n&&this._updateDecorations(n)})}_onModelAdded(e){const t=new qKe(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){var n;const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===Wt.inMemory||e.uri.scheme===Wt.internal||e.uri.scheme===Wt.vscode)&&((n=this._markerService)==null||n.read({resource:e.uri}).map(s=>s.owner).forEach(s=>this._markerService.remove(s,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});e.update(t)&&this._onDidChangeMarker.fire(e.model)}};A7=$Ke([TJ(0,Io),TJ(1,P1)],A7);class qKe extends be{constructor(e){super(),this.model=e,this._map=new HVe,this._register(Dt(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(e){const{added:t,removed:n}=zKe(new Set(this._map.keys()),new Set(e));if(t.length===0&&n.length===0)return!1;const s=n.map(a=>this._map.get(a)),r=t.map(a=>({range:this._createDecorationRange(this.model,a),options:this._createDecorationOption(a)})),o=this.model.deltaDecorations(s,r);for(const a of n)this._map.delete(a);for(let a=0;a<o.length;a++)this._map.set(t[a],o[a]);return!0}getMarker(e){return this._map.getKey(e.id)}_createDecorationRange(e,t){let n=J.lift(t);if(t.severity===Il.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),n=e.validateRange(n),n.isEmpty()){const s=e.getLineLastNonWhitespaceColumn(n.startLineNumber)||e.getLineMaxColumn(n.startLineNumber);if(s===1||n.endColumn>=s)return n;const r=e.getWordAtPosition(n.getStartPosition());r&&(n=new J(n.startLineNumber,r.startColumn,n.endLineNumber,r.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&n.startLineNumber===n.endLineNumber){const s=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);s<n.endColumn&&(n=new J(n.startLineNumber,s,n.endLineNumber,n.endColumn),t.startColumn=s)}return n}_createDecorationOption(e){let t,n,s,r,o;switch(e.severity){case Il.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",s=0;break;case Il.Info:t="squiggly-info",n=D_(IKe),s=10,o={color:D_(nUe),position:1};break;case Il.Warning:t="squiggly-warning",n=D_(LKe),s=20,o={color:D_(iUe),position:1};break;case Il.Error:default:t="squiggly-error",n=D_(TKe),s=30,o={color:D_(sUe),position:1};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(r="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(r="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:iD.Right},minimap:o,zIndex:s,inlineClassName:r}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}}const Gge=nn("markerDecorationsService");class ws{static _nextVisibleColumn(e,t,n){return e===9?ws.nextRenderTabStop(t,n):Tm(e)||VH(e)?t+2:t+1}static visibleColumnFromColumn(e,t,n){const s=Math.min(t-1,e.length),r=e.substring(0,s),o=new KI(r);let a=0;for(;!o.eol();){const l=qI(r,s,o.offset);o.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,n)}return a}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const s=e.length,r=new KI(e);let o=0,a=1;for(;!r.eol();){const l=qI(e,s,r.offset);r.nextGraphemeLength();const c=this._nextVisibleColumn(l,o,n),u=r.offset+1;if(c>=t){const d=t-o;return c-t<d?u:a}o=c,a=u}return s+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}function KKe(i,e,t){let n=0;for(let r=0;r<i.length;r++)i.charAt(r)==="	"?n=ws.nextIndentTabStop(n,e):n++;let s="";if(!t){const r=Math.floor(n/e);n=n%e;for(let o=0;o<r;o++)s+="	"}for(let r=0;r<n;r++)s+=" ";return s}function Yge(i,e,t){let n=Ca(i);return n===-1&&(n=i.length),KKe(i.substring(0,n),e,t)+i.substring(n)}class LJ{constructor(e,t,n,s){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=n,this.isInvalid=s}}class GKe{constructor(e,t,n,s,r,o){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=s,this.nestingLevelOfEqualBracketType=r,this.bracketPairNode=o}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class YKe extends GKe{constructor(e,t,n,s,r,o,a){super(e,t,n,s,r,o),this.minVisibleColumnIndentation=a}}function QKe(i,e,t,n){return i!==t?zi(t-i,n):zi(0,n-e)}const Jo=0;function ND(i){return i===0}const Qa=2**26;function zi(i,e){return i*Qa+e}function Bl(i){const e=i,t=Math.floor(e/Qa),n=e-t*Qa;return new Nm(t,n)}function XKe(i){return Math.floor(i/Qa)}function ls(i,e){let t=i+e;return e>=Qa&&(t=t-i%Qa),t}function ZKe(i,e){return i.reduce((t,n)=>ls(t,e(n)),Jo)}function Qge(i,e){return i===e}function Fk(i,e){const t=i,n=e;if(n-t<=0)return Jo;const r=Math.floor(t/Qa),o=Math.floor(n/Qa),a=n-o*Qa;if(r===o){const l=t-r*Qa;return zi(0,a-l)}else return zi(o-r,a)}function ob(i,e){return i<e}function ab(i,e){return i<=e}function CC(i,e){return i>=e}function hv(i){return zi(i.lineNumber-1,i.column-1)}function b0(i,e){const t=i,n=Math.floor(t/Qa),s=t-n*Qa,r=e,o=Math.floor(r/Qa),a=r-o*Qa;return new J(n+1,s+1,o+1,a+1)}function JKe(i){const e=Hy(i);return zi(e.length-1,e[e.length-1].length)}class $h{static fromModelContentChanges(e){return e.map(n=>{const s=J.lift(n.range);return new $h(hv(s.getStartPosition()),hv(s.getEndPosition()),JKe(n.text))}).reverse()}constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}toString(){return`[${Bl(this.startOffset)}...${Bl(this.endOffset)}) -> ${Bl(this.newLength)}`}}class eGe{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(t=>jU.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):null;return n===null?null:Fk(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?zi(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):zi(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=Bl(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?zi(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):zi(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(ab(n,e)){this.nextEditIdx++;const s=Bl(n),r=Bl(this.translateOldToCur(t.endOffsetBeforeObj)),o=s.lineCount-r.lineCount;this.deltaOldToNewLineCount+=o;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=s.columnCount-r.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class jU{static from(e){return new jU(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,n){this.endOffsetBeforeObj=Bl(t),this.endOffsetAfterObj=Bl(ls(e,n)),this.offsetObj=Bl(e)}}const oT=[],yl=class yl{static create(e,t){if(e<=128&&t.length===0){let n=yl.cache[e];return n||(n=new yl(e,t),yl.cache[e]=n),n}return new yl(e,t)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const n=t.getKey(e);let s=n>>5;if(s===0){const o=1<<n|this.items;return o===this.items?this:yl.create(o,this.additionalItems)}s--;const r=this.additionalItems.slice(0);for(;r.length<s;)r.push(0);return r[s]|=1<<(n&31),yl.create(this.items,r)}merge(e){const t=this.items|e.items;if(this.additionalItems===oT&&e.additionalItems===oT)return t===this.items?this:t===e.items?e:yl.create(t,oT);const n=[];for(let s=0;s<Math.max(this.additionalItems.length,e.additionalItems.length);s++){const r=this.additionalItems[s]||0,o=e.additionalItems[s]||0;n.push(r|o)}return yl.create(t,n)}intersects(e){if((this.items&e.items)!==0)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if((this.additionalItems[t]&e.additionalItems[t])!==0)return!0;return!1}};yl.cache=new Array(129),yl.empty=yl.create(0,oT);let _a=yl;const IJ={getKey(i){return i}};class tGe{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class $U{get length(){return this._length}constructor(e){this._length=e}}class Bk extends $U{static create(e,t,n){let s=e.length;return t&&(s=ls(s,t.length)),n&&(s=ls(s,n.length)),new Bk(s,e,t,n,t?t.missingOpeningBracketIds:_a.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,n,s,r){super(e),this.openingBracket=t,this.child=n,this.closingBracket=s,this.missingOpeningBracketIds=r}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new Bk(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(ls(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class Rd extends $U{static create23(e,t,n,s=!1){let r=e.length,o=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(r=ls(r,t.length),o=o.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");r=ls(r,n.length),o=o.merge(n.missingOpeningBracketIds)}return s?new nGe(r,e.listHeight+1,e,t,n,o):new Vk(r,e.listHeight+1,e,t,n,o)}static getEmpty(){return new iGe(Jo,0,[],_a.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(0,n),n}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let t=this;for(;t.kind===4;){const n=t.childrenLength;if(n===0)throw new Dn;t=t.getChild(n-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let s=1;s<e;s++){const r=this.getChild(s);t=ls(t,r.length),n=n.merge(r.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,s=e;for(let r=0;r<this.childrenLength;r++){const o=this.getChild(r);o&&(n=Math.min(n,o.computeMinIndentation(s,t)),s=ls(s,o.length))}return this.cachedMinIndentation=n,n}}class Vk extends Rd{get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,n,s,r,o){super(e,t,o),this._item1=n,this._item2=s,this._item3=r}deepClone(){return new Vk(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class nGe extends Vk{toMutable(){return new Vk(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class RD extends Rd{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,n,s){super(e,t,s),this._children=n}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new RD(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class iGe extends RD{toMutable(){return new RD(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const sGe=[];class qU extends $U{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return sGe}deepClone(){return this}}class Wp extends qU{get kind(){return 0}get missingOpeningBracketIds(){return _a.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=Bl(e),s=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,r=XKe(ls(e,this.length))+1;let o=Number.MAX_SAFE_INTEGER;for(let a=s;a<=r;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const u=ws.visibleColumnFromColumn(c,l,t.getOptions().tabSize);o=Math.min(o,u)}return o}}class AD extends qU{static create(e,t,n){return new AD(e,t,n)}get kind(){return 1}get missingOpeningBracketIds(){return _a.getEmpty()}constructor(e,t,n){super(e),this.bracketInfo=t,this.bracketIds=n}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class rGe extends qU{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class Dg{constructor(e,t,n,s,r){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=s,this.astNode=r}}class oGe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new aGe(this.textModel,this.bracketTokens),this._offset=Jo,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return zi(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=ls(this._offset,e);const t=Bl(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=ls(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class aGe{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const r=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=r.length,r}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const r=this.lineTokens,o=r.getCount();let a=null;if(this.lineTokenOffset<o){const l=r.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<o&&l===r.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=Qc.getTokenType(l)===0,u=Qc.containsBalancedBrackets(l),d=r.getEndOffset(this.lineTokenOffset);if(u&&c&&this.lineCharOffset<d){const h=r.getLanguageId(this.lineTokenOffset),g=this.line.substring(this.lineCharOffset,d),p=this.bracketTokens.getSingleLanguageBracketTokens(h),_=p.regExpGlobal;if(_){_.lastIndex=0;const v=_.exec(g);v&&(a=p.getToken(v[0]),a&&(this.lineCharOffset+=v.index))}}if(n+=d-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=d}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}const s=QKe(e,t,this.lineIdx,this.lineCharOffset);return new Dg(s,0,-1,_a.getEmpty(),new Wp(s))}}class lGe{constructor(e,t){this.text=e,this._offset=Jo,this.idx=0;const n=t.getRegExpStr(),s=n?new RegExp(n+`|
`,"gi"):null,r=[];let o,a=0,l=0,c=0,u=0;const d=[];for(let p=0;p<60;p++)d.push(new Dg(zi(0,p),0,-1,_a.getEmpty(),new Wp(zi(0,p))));const h=[];for(let p=0;p<60;p++)h.push(new Dg(zi(1,p),0,-1,_a.getEmpty(),new Wp(zi(1,p))));if(s)for(s.lastIndex=0;(o=s.exec(e))!==null;){const p=o.index,_=o[0];if(_===`
`)a++,l=p+1;else{if(c!==p){let v;if(u===a){const y=p-c;if(y<d.length)v=d[y];else{const w=zi(0,y);v=new Dg(w,0,-1,_a.getEmpty(),new Wp(w))}}else{const y=a-u,w=p-l;if(y===1&&w<h.length)v=h[w];else{const x=zi(y,w);v=new Dg(x,0,-1,_a.getEmpty(),new Wp(x))}}r.push(v)}r.push(t.getToken(_)),c=p+_.length,u=a}}const g=e.length;if(c!==g){const p=u===a?zi(0,g-c):zi(a-u,g-l);r.push(new Dg(p,0,-1,_a.getEmpty(),new Wp(p)))}this.length=zi(a,g-l),this.tokens=r}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new V8e}}class KU{static createFromLanguage(e,t){function n(r){return t.getKey(`${r.languageId}:::${r.bracketText}`)}const s=new Map;for(const r of e.bracketsNew.openingBrackets){const o=zi(0,r.bracketText.length),a=n(r),l=_a.getEmpty().add(a,IJ);s.set(r.bracketText,new Dg(o,1,a,l,AD.create(o,r,l)))}for(const r of e.bracketsNew.closingBrackets){const o=zi(0,r.bracketText.length);let a=_a.getEmpty();const l=r.getOpeningBrackets();for(const c of l)a=a.add(n(c),IJ);s.set(r.bracketText,new Dg(o,2,n(l[0]),a,AD.create(o,r,a)))}return new KU(s)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>cGe(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,n]of this.map)if(n.kind===2&&n.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}function cGe(i){let e=wf(i);return/^[\w ]+/.test(i)&&(e=`\\b${e}`),/[\w ]+$/.test(i)&&(e=`${e}\\b`),e}class uGe{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=KU.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function dGe(i){if(i.length===0)return null;if(i.length===1)return i[0];let e=0;function t(){if(e>=i.length)return null;const o=e,a=i[o].listHeight;for(e++;e<i.length&&i[e].listHeight===a;)e++;return e-o>=2?Xge(o===0&&e===i.length?i:i.slice(o,e),!1):i[o]}let n=t(),s=t();if(!s)return n;for(let o=t();o;o=t())DJ(n,s)<=DJ(s,o)?(n=c6(n,s),s=o):s=c6(s,o);return c6(n,s)}function Xge(i,e=!1){if(i.length===0)return null;if(i.length===1)return i[0];let t=i.length;for(;t>3;){const n=t>>1;for(let s=0;s<n;s++){const r=s<<1;i[s]=Rd.create23(i[r],i[r+1],r+3===t?i[r+2]:null,e)}t=n}return Rd.create23(i[0],i[1],t>=3?i[2]:null,e)}function DJ(i,e){return Math.abs(i.listHeight-e.listHeight)}function c6(i,e){return i.listHeight===e.listHeight?Rd.create23(i,e,null,!1):i.listHeight>e.listHeight?hGe(i,e):fGe(e,i)}function hGe(i,e){i=i.toMutable();let t=i;const n=[];let s;for(;;){if(e.listHeight===t.listHeight){s=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let r=n.length-1;r>=0;r--){const o=n[r];s?o.childrenLength>=3?s=Rd.create23(o.unappendChild(),s,null,!1):(o.appendChildOfSameHeight(s),s=void 0):o.handleChildrenChanged()}return s?Rd.create23(i,s,null,!1):i}function fGe(i,e){i=i.toMutable();let t=i;const n=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let s=e;for(let r=n.length-1;r>=0;r--){const o=n[r];s?o.childrenLength>=3?s=Rd.create23(s,o.unprependChild(),null,!1):(o.prependChildOfSameHeight(s),s=void 0):o.handleChildrenChanged()}return s?Rd.create23(s,i,null,!1):i}class gGe{constructor(e){this.lastOffset=Jo,this.nextNodes=[e],this.offsets=[Jo],this.idxs=[]}readLongestNodeAt(e,t){if(ob(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=$w(this.nextNodes);if(!n)return;const s=$w(this.offsets);if(ob(e,s))return;if(ob(s,e))if(ls(s,n.length)<=e)this.nextNodeAfterCurrent();else{const r=u6(n);r!==-1?(this.nextNodes.push(n.getChild(r)),this.offsets.push(s),this.idxs.push(r)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const r=u6(n);if(r===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(r)),this.offsets.push(s),this.idxs.push(r)}}}}nextNodeAfterCurrent(){for(;;){const e=$w(this.offsets),t=$w(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const n=$w(this.nextNodes),s=u6(n,this.idxs[this.idxs.length-1]);if(s!==-1){this.nextNodes.push(n.getChild(s)),this.offsets.push(ls(e,t.length)),this.idxs[this.idxs.length-1]=s;break}else this.idxs.pop()}}}function u6(i,e=-1){for(;;){if(e++,e>=i.childrenLength)return-1;if(i.getChild(e))return e}}function $w(i){return i.length>0?i[i.length-1]:void 0}function NJ(i,e,t,n){return new mGe(i,e,t,n).parseDocument()}class mGe{constructor(e,t,n,s){if(this.tokenizer=e,this.createImmutableLists=s,this._itemsConstructed=0,this._itemsFromCache=0,n&&s)throw new Error("Not supported");this.oldNodeReader=n?new gGe(n):void 0,this.positionMapper=new eGe(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(_a.getEmpty(),0);return e||(e=Rd.getEmpty()),e}parseList(e,t){const n=[];for(;;){let r=this.tryReadChildFromCache(e);if(!r){const o=this.tokenizer.peek();if(!o||o.kind===2&&o.bracketIds.intersects(e))break;r=this.parseChild(e,t+1)}r.kind===4&&r.childrenLength===0||n.push(r)}return this.oldNodeReader?dGe(n):Xge(n,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!ND(t)){const n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),s=>t!==null&&!ob(s.length,t)?!1:s.canBeReused(e));if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}}parseChild(e,t){this._itemsConstructed++;const n=this.tokenizer.read();switch(n.kind){case 2:return new rGe(n.bracketIds,n.length);case 0:return n.astNode;case 1:{if(t>300)return new Wp(n.length);const s=e.merge(n.bracketIds),r=this.parseList(s,t+1),o=this.tokenizer.peek();return o&&o.kind===2&&(o.bracketId===n.bracketId||o.bracketIds.intersects(n.bracketIds))?(this.tokenizer.read(),Bk.create(n.astNode,r,o.astNode)):Bk.create(n.astNode,r,null)}default:throw new Error("unexpected")}}}function PD(i,e){if(i.length===0)return e;if(e.length===0)return i;const t=new bf(RJ(i)),n=RJ(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let s=t.dequeue();function r(c){if(c===void 0){const d=t.takeWhile(h=>!0)||[];return s&&d.unshift(s),d}const u=[];for(;s&&!ND(c);){const[d,h]=s.splitAt(c);u.push(d),c=Fk(d.lengthAfter,c),s=h??t.dequeue()}return ND(c)||u.push(new zg(!1,c,c)),u}const o=[];function a(c,u,d){if(o.length>0&&Qge(o[o.length-1].endOffset,c)){const h=o[o.length-1];o[o.length-1]=new $h(h.startOffset,u,ls(h.newLength,d))}else o.push({startOffset:c,endOffset:u,newLength:d})}let l=Jo;for(const c of n){const u=r(c.lengthBefore);if(c.modified){const d=ZKe(u,g=>g.lengthBefore),h=ls(l,d);a(l,h,c.lengthAfter),l=h}else for(const d of u){const h=l;l=ls(l,d.lengthBefore),d.modified&&a(h,l,d.lengthAfter)}}return o}class zg{constructor(e,t,n){this.modified=e,this.lengthBefore=t,this.lengthAfter=n}splitAt(e){const t=Fk(e,this.lengthAfter);return Qge(t,Jo)?[this,void 0]:this.modified?[new zg(this.modified,this.lengthBefore,e),new zg(this.modified,Jo,t)]:[new zg(this.modified,e,e),new zg(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${Bl(this.lengthBefore)} -> ${Bl(this.lengthAfter)}`}}function RJ(i){const e=[];let t=Jo;for(const n of i){const s=Fk(t,n.startOffset);ND(s)||e.push(new zg(!1,s,s));const r=Fk(n.startOffset,n.endOffset);e.push(new zg(!0,r,n.newLength)),t=n.endOffset}return e}class pGe extends be{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new se,this.denseKeyProvider=new tGe,this.brackets=new uGe(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const n=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),s=new lGe(this.textModel.getValue(),n);this.initialAstWithoutTokens=NJ(s,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(n=>new $h(zi(n.fromLineNumber-1,0),zi(n.toLineNumber,0),zi(n.toLineNumber-n.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=$h.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const n=PD(this.queuedTextEdits,e);this.queuedTextEdits=n,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=PD(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,n){const s=t,r=new oGe(this.textModel,this.brackets);return NJ(r,e,s,n)}getBracketsInRange(e,t){this.flushQueue();const n=zi(e.startLineNumber-1,e.startColumn-1),s=zi(e.endLineNumber-1,e.endColumn-1);return new m0(r=>{const o=this.initialAstWithoutTokens||this.astWithTokens;P7(o,Jo,o.length,n,s,r,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();const n=hv(e.getStartPosition()),s=hv(e.getEndPosition());return new m0(r=>{const o=this.initialAstWithoutTokens||this.astWithTokens,a=new _Ge(r,t,this.textModel);M7(o,Jo,o.length,n,s,a,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return Jge(t,Jo,t.length,hv(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return Zge(t,Jo,t.length,hv(e))}}function Zge(i,e,t,n){if(i.kind===4||i.kind===2){const s=[];for(const r of i.children)t=ls(e,r.length),s.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let r=s.length-1;r>=0;r--){const{nodeOffsetStart:o,nodeOffsetEnd:a}=s[r];if(ob(o,n)){const l=Zge(i.children[r],o,a,n);if(l)return l}}return null}else{if(i.kind===3)return null;if(i.kind===1){const s=b0(e,t);return{bracketInfo:i.bracketInfo,range:s}}}return null}function Jge(i,e,t,n){if(i.kind===4||i.kind===2){for(const s of i.children){if(t=ls(e,s.length),ob(n,t)){const r=Jge(s,e,t,n);if(r)return r}e=t}return null}else{if(i.kind===3)return null;if(i.kind===1){const s=b0(e,t);return{bracketInfo:i.bracketInfo,range:s}}}return null}function P7(i,e,t,n,s,r,o,a,l,c,u=!1){if(o>200)return!0;e:for(;;)switch(i.kind){case 4:{const d=i.childrenLength;for(let h=0;h<d;h++){const g=i.getChild(h);if(g){if(t=ls(e,g.length),ab(e,s)&&CC(t,n)){if(CC(t,s)){i=g;continue e}if(!P7(g,e,t,n,s,r,o,0,l,c))return!1}e=t}}return!0}case 2:{const d=!c||!i.closingBracket||i.closingBracket.bracketInfo.closesColorized(i.openingBracket.bracketInfo);let h=0;if(l){let p=l.get(i.openingBracket.text);p===void 0&&(p=0),h=p,d&&(p++,l.set(i.openingBracket.text,p))}const g=i.childrenLength;for(let p=0;p<g;p++){const _=i.getChild(p);if(_){if(t=ls(e,_.length),ab(e,s)&&CC(t,n)){if(CC(t,s)&&_.kind!==1){i=_,d?(o++,a=h+1):a=h;continue e}if((d||_.kind!==1||!i.closingBracket)&&!P7(_,e,t,n,s,r,d?o+1:o,d?h+1:h,l,c,!i.closingBracket))return!1}e=t}}return l==null||l.set(i.openingBracket.text,h),!0}case 3:{const d=b0(e,t);return r(new LJ(d,o-1,0,!0))}case 1:{const d=b0(e,t);return r(new LJ(d,o-1,a-1,u))}case 0:return!0}}class _Ge{constructor(e,t,n){this.push=e,this.includeMinIndentation=t,this.textModel=n}}function M7(i,e,t,n,s,r,o,a){var c;if(o>200)return!0;let l=!0;if(i.kind===2){let u=0;if(a){let g=a.get(i.openingBracket.text);g===void 0&&(g=0),u=g,g++,a.set(i.openingBracket.text,g)}const d=ls(e,i.openingBracket.length);let h=-1;if(r.includeMinIndentation&&(h=i.computeMinIndentation(e,r.textModel)),l=r.push(new YKe(b0(e,t),b0(e,d),i.closingBracket?b0(ls(d,((c=i.child)==null?void 0:c.length)||Jo),t):void 0,o,u,i,h)),e=d,l&&i.child){const g=i.child;if(t=ls(e,g.length),ab(e,s)&&CC(t,n)&&(l=M7(g,e,t,n,s,r,o+1,a),!l))return!1}a==null||a.set(i.openingBracket.text,u)}else{let u=e;for(const d of i.children){const h=u;if(u=ls(u,d.length),ab(h,s)&&ab(n,u)&&(l=M7(d,h,u,n,s,r,o,a),!l))return!1}}return l}class vGe extends be{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new yf),this.onDidChangeEmitter=new se,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1}handleLanguageConfigurationServiceChange(e){var t;(!e.languageId||(t=this.bracketPairsTree.value)!=null&&t.object.didLanguageChange(e.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;(t=this.bracketPairsTree.value)==null||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;(e=this.bracketPairsTree.value)==null||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;(t=this.bracketPairsTree.value)==null||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new Ze;this.bracketPairsTree.value=bGe(e.add(new pGe(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)==null?void 0:t.object.getBracketPairsInRange(e,!1))||m0.empty}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)==null?void 0:t.object.getBracketPairsInRange(e,!0))||m0.empty}getBracketsInRange(e,t=!1){var n;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((n=this.bracketPairsTree.value)==null?void 0:n.object.getBracketsInRange(e,t))||m0.empty}findMatchingBracketUp(e,t,n){const s=this.textModel.validatePosition(t),r=this.textModel.getLanguageIdAtPosition(s.lineNumber,s.column);if(this.canBuildAST){const o=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew.getClosingBracketInfo(e);if(!o)return null;const a=this.getBracketPairsInRange(J.fromPositions(t,t)).findLast(l=>o.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const o=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(r).brackets;if(!a)return null;const l=a.textIsBracket[o];return l?aT(this._findMatchingBracketUp(l,s,d6(n))):null}}matchBracket(e,t){if(this.canBuildAST){const n=this.getBracketPairsInRange(J.fromPositions(e,e)).filter(s=>s.closingBracketRange!==void 0&&(s.openingBracketRange.containsPosition(e)||s.closingBracketRange.containsPosition(e))).findLastMaxBy(fc(s=>s.openingBracketRange.containsPosition(e)?s.openingBracketRange:s.closingBracketRange,J.compareRangesUsingStarts));return n?[n.openingBracketRange,n.closingBracketRange]:null}else{const n=d6(t);return this._matchBracket(this.textModel.validatePosition(e),n)}}_establishBracketSearchOffsets(e,t,n,s){const r=t.getCount(),o=t.getLanguageId(s);let a=Math.max(0,e.column-1-n.maxBracketLength);for(let c=s-1;c>=0;c--){const u=t.getEndOffset(c);if(u<=a)break;if(Ku(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){a=u;break}}let l=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let c=s+1;c<r;c++){const u=t.getStartOffset(c);if(u>=l)break;if(Ku(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){l=u;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const n=e.lineNumber,s=this.textModel.tokenization.getLineTokens(n),r=this.textModel.getLineContent(n),o=s.findTokenIndexAtOffset(e.column-1);if(o<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId(o)).brackets;if(a&&!Ku(s.getStandardTokenType(o))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,s,a,o),u=null;for(;;){const d=ec.findNextBracketInRange(a.forwardRegex,n,r,l,c);if(!d)break;if(d.startColumn<=e.column&&e.column<=d.endColumn){const h=r.substring(d.startColumn-1,d.endColumn-1).toLowerCase(),g=this._matchFoundBracket(d,a.textIsBracket[h],a.textIsOpenBracket[h],t);if(g){if(g instanceof Th)return null;u=g}}l=d.endColumn-1}if(u)return u}if(o>0&&s.getStartOffset(o)===e.column-1){const l=o-1,c=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId(l)).brackets;if(c&&!Ku(s.getStandardTokenType(l))){const{searchStartOffset:u,searchEndOffset:d}=this._establishBracketSearchOffsets(e,s,c,l),h=ec.findPrevBracketInRange(c.reversedRegex,n,r,u,d);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn){const g=r.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),p=this._matchFoundBracket(h,c.textIsBracket[g],c.textIsOpenBracket[g],t);if(p)return p instanceof Th?null:p}}}return null}_matchFoundBracket(e,t,n,s){if(!t)return null;const r=n?this._findMatchingBracketDown(t,e.getEndPosition(),s):this._findMatchingBracketUp(t,e.getStartPosition(),s);return r?r instanceof Th?r:[e,r]:null}_findMatchingBracketUp(e,t,n){const s=e.languageId,r=e.reversedRegex;let o=-1,a=0;const l=(c,u,d,h)=>{for(;;){if(n&&++a%100===0&&!n())return Th.INSTANCE;const g=ec.findPrevBracketInRange(r,c,u,d,h);if(!g)break;const p=u.substring(g.startColumn-1,g.endColumn-1).toLowerCase();if(e.isOpen(p)?o++:e.isClose(p)&&o--,o===0)return g;h=g.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const u=this.textModel.tokenization.getLineTokens(c),d=u.getCount(),h=this.textModel.getLineContent(c);let g=d-1,p=h.length,_=h.length;c===t.lineNumber&&(g=u.findTokenIndexAtOffset(t.column-1),p=t.column-1,_=t.column-1);let v=!0;for(;g>=0;g--){const y=u.getLanguageId(g)===s&&!Ku(u.getStandardTokenType(g));if(y)v?p=u.getStartOffset(g):(p=u.getStartOffset(g),_=u.getEndOffset(g));else if(v&&p!==_){const w=l(c,h,p,_);if(w)return w}v=y}if(v&&p!==_){const y=l(c,h,p,_);if(y)return y}}return null}_findMatchingBracketDown(e,t,n){const s=e.languageId,r=e.forwardRegex;let o=1,a=0;const l=(u,d,h,g)=>{for(;;){if(n&&++a%100===0&&!n())return Th.INSTANCE;const p=ec.findNextBracketInRange(r,u,d,h,g);if(!p)break;const _=d.substring(p.startColumn-1,p.endColumn-1).toLowerCase();if(e.isOpen(_)?o++:e.isClose(_)&&o--,o===0)return p;h=p.endColumn-1}return null},c=this.textModel.getLineCount();for(let u=t.lineNumber;u<=c;u++){const d=this.textModel.tokenization.getLineTokens(u),h=d.getCount(),g=this.textModel.getLineContent(u);let p=0,_=0,v=0;u===t.lineNumber&&(p=d.findTokenIndexAtOffset(t.column-1),_=t.column-1,v=t.column-1);let y=!0;for(;p<h;p++){const w=d.getLanguageId(p)===s&&!Ku(d.getStandardTokenType(p));if(w)y||(_=d.getStartOffset(p)),v=d.getEndOffset(p);else if(y&&_!==v){const x=l(u,g,_,v);if(x)return x}y=w}if(y&&_!==v){const w=l(u,g,_,v);if(w)return w}}return null}findPrevBracket(e){var o;const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((o=this.bracketPairsTree.value)==null?void 0:o.object.getFirstBracketBefore(t))||null;let n=null,s=null,r=null;for(let a=t.lineNumber;a>=1;a--){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),u=this.textModel.getLineContent(a);let d=c-1,h=u.length,g=u.length;if(a===t.lineNumber){d=l.findTokenIndexAtOffset(t.column-1),h=t.column-1,g=t.column-1;const _=l.getLanguageId(d);n!==_&&(n=_,s=this.languageConfigurationService.getLanguageConfiguration(n).brackets,r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew)}let p=!0;for(;d>=0;d--){const _=l.getLanguageId(d);if(n!==_){if(s&&r&&p&&h!==g){const y=ec.findPrevBracketInRange(s.reversedRegex,a,u,h,g);if(y)return this._toFoundBracket(r,y);p=!1}n=_,s=this.languageConfigurationService.getLanguageConfiguration(n).brackets,r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew}const v=!!s&&!Ku(l.getStandardTokenType(d));if(v)p?h=l.getStartOffset(d):(h=l.getStartOffset(d),g=l.getEndOffset(d));else if(r&&s&&p&&h!==g){const y=ec.findPrevBracketInRange(s.reversedRegex,a,u,h,g);if(y)return this._toFoundBracket(r,y)}p=v}if(r&&s&&p&&h!==g){const _=ec.findPrevBracketInRange(s.reversedRegex,a,u,h,g);if(_)return this._toFoundBracket(r,_)}}return null}findNextBracket(e){var a;const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((a=this.bracketPairsTree.value)==null?void 0:a.object.getFirstBracketAfter(t))||null;const n=this.textModel.getLineCount();let s=null,r=null,o=null;for(let l=t.lineNumber;l<=n;l++){const c=this.textModel.tokenization.getLineTokens(l),u=c.getCount(),d=this.textModel.getLineContent(l);let h=0,g=0,p=0;if(l===t.lineNumber){h=c.findTokenIndexAtOffset(t.column-1),g=t.column-1,p=t.column-1;const v=c.getLanguageId(h);s!==v&&(s=v,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew)}let _=!0;for(;h<u;h++){const v=c.getLanguageId(h);if(s!==v){if(o&&r&&_&&g!==p){const w=ec.findNextBracketInRange(r.forwardRegex,l,d,g,p);if(w)return this._toFoundBracket(o,w);_=!1}s=v,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew}const y=!!r&&!Ku(c.getStandardTokenType(h));if(y)_||(g=c.getStartOffset(h)),p=c.getEndOffset(h);else if(o&&r&&_&&g!==p){const w=ec.findNextBracketInRange(r.forwardRegex,l,d,g,p);if(w)return this._toFoundBracket(o,w)}_=y}if(o&&r&&_&&g!==p){const v=ec.findNextBracketInRange(r.forwardRegex,l,d,g,p);if(v)return this._toFoundBracket(o,v)}}return null}findEnclosingBrackets(e,t){const n=this.textModel.validatePosition(e);if(this.canBuildAST){const g=J.fromPositions(n),p=this.getBracketPairsInRange(J.fromPositions(n,n)).findLast(_=>_.closingBracketRange!==void 0&&_.range.strictContainsRange(g));return p?[p.openingBracketRange,p.closingBracketRange]:null}const s=d6(t),r=this.textModel.getLineCount(),o=new Map;let a=[];const l=(g,p)=>{if(!o.has(g)){const _=[];for(let v=0,y=p?p.brackets.length:0;v<y;v++)_[v]=0;o.set(g,_)}a=o.get(g)};let c=0;const u=(g,p,_,v,y)=>{for(;;){if(s&&++c%100===0&&!s())return Th.INSTANCE;const w=ec.findNextBracketInRange(g.forwardRegex,p,_,v,y);if(!w)break;const x=_.substring(w.startColumn-1,w.endColumn-1).toLowerCase(),k=g.textIsBracket[x];if(k&&(k.isOpen(x)?a[k.index]++:k.isClose(x)&&a[k.index]--,a[k.index]===-1))return this._matchFoundBracket(w,k,!1,s);v=w.endColumn-1}return null};let d=null,h=null;for(let g=n.lineNumber;g<=r;g++){const p=this.textModel.tokenization.getLineTokens(g),_=p.getCount(),v=this.textModel.getLineContent(g);let y=0,w=0,x=0;if(g===n.lineNumber){y=p.findTokenIndexAtOffset(n.column-1),w=n.column-1,x=n.column-1;const T=p.getLanguageId(y);d!==T&&(d=T,h=this.languageConfigurationService.getLanguageConfiguration(d).brackets,l(d,h))}let k=!0;for(;y<_;y++){const T=p.getLanguageId(y);if(d!==T){if(h&&k&&w!==x){const L=u(h,g,v,w,x);if(L)return aT(L);k=!1}d=T,h=this.languageConfigurationService.getLanguageConfiguration(d).brackets,l(d,h)}const R=!!h&&!Ku(p.getStandardTokenType(y));if(R)k||(w=p.getStartOffset(y)),x=p.getEndOffset(y);else if(h&&k&&w!==x){const L=u(h,g,v,w,x);if(L)return aT(L)}k=R}if(h&&k&&w!==x){const T=u(h,g,v,w,x);if(T)return aT(T)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.textModel.getValueInRange(t);n=n.toLowerCase();const s=e.getBracketInfo(n);return s?{range:t,bracketInfo:s}:null}}function bGe(i,e){return{object:i,dispose:()=>e==null?void 0:e.dispose()}}function d6(i){if(typeof i>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=i}}const eR=class eR{constructor(){this._searchCanceledBrand=void 0}};eR.INSTANCE=new eR;let Th=eR;function aT(i){return i instanceof Th?null:i}class yGe extends be{constructor(e){super(),this.textModel=e,this.colorProvider=new eme,this.onDidChangeEmitter=new se,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,n,s){return s?[]:t===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(e,!0).map(o=>({id:`bracket${o.range.toString()}-${o.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(o,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:o.range})).toArray():[]}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new J(1,1,this.textModel.getLineCount(),1),e,t):[]}}class eme{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}Nf((i,e)=>{const t=[Uge,zge,jge,$ge,qge,Kge],n=new eme;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${i.getColor(DKe)}; }`);const s=t.map(r=>i.getColor(r)).filter(r=>!!r).filter(r=>!r.isTransparent());for(let r=0;r<30;r++){const o=s[r%s.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(r)} { color: ${o}; }`)}});function lT(i){return i.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class fr{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,n,s){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${lT(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${lT(this.oldText)}")`:`(replace@${this.oldPosition} "${lT(this.oldText)}" with "${lT(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const s=t.length;Kc(e,s,n),n+=4;for(let r=0;r<s;r++)ZBe(e,t.charCodeAt(r),n),n+=2;return n}static _readString(e,t){const n=qc(e,t);return t+=4,eVe(e,t,n)}writeSize(){return 8+fr._writeStringSize(this.oldText)+fr._writeStringSize(this.newText)}write(e,t){return Kc(e,this.oldPosition,t),t+=4,Kc(e,this.newPosition,t),t+=4,t=fr._writeString(e,this.oldText,t),t=fr._writeString(e,this.newText,t),t}static read(e,t,n){const s=qc(e,t);t+=4;const r=qc(e,t);t+=4;const o=fr._readString(e,t);t+=fr._writeStringSize(o);const a=fr._readString(e,t);return t+=fr._writeStringSize(a),n.push(new fr(s,o,r,a)),t}}function wGe(i,e){return i===null||i.length===0?e:new Qu(i,e).compress()}class Qu{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),s=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(s),s=this._getCurr(++t);continue}if(s===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(s.oldEnd<=n.newPosition){this._acceptCurr(s),s=this._getCurr(++t);continue}if(n.newEnd<=s.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(s.oldPosition<n.newPosition){const[c,u]=Qu._splitCurr(s,n.newPosition-s.oldPosition);this._acceptCurr(c),s=u;continue}if(n.newPosition<s.oldPosition){const[c,u]=Qu._splitPrev(n,s.oldPosition-n.newPosition);this._acceptPrev(c),n=u;continue}let a,l;if(s.oldEnd===n.newEnd)a=n,l=s,n=this._getPrev(++e),s=this._getCurr(++t);else if(s.oldEnd<n.newEnd){const[c,u]=Qu._splitPrev(n,s.oldLength);a=c,l=s,n=u,s=this._getCurr(++t)}else{const[c,u]=Qu._splitCurr(s,n.newLength);a=n,l=c,n=this._getPrev(++e),s=u}this._result[this._resultLen++]=new fr(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const r=Qu._merge(this._result);return Qu._removeNoOps(r)}_acceptCurr(e){this._result[this._resultLen++]=Qu._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=Qu._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new fr(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new fr(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),s=e.newText.substr(t);return[new fr(e.oldPosition,e.oldText,e.newPosition,n),new fr(e.oldEnd,"",e.newPosition+t,s)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),s=e.oldText.substr(t);return[new fr(e.oldPosition,n,e.newPosition,e.newText),new fr(e.oldPosition+t,s,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let n=0,s=e[0];for(let r=1;r<e.length;r++){const o=e[r];s.oldEnd===o.oldPosition?s=new fr(s.oldPosition,s.oldText+o.oldText,s.newPosition,s.newText+o.newText):(t[n++]=s,s=o)}return t[n++]=s,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let n=0;for(let s=0;s<e.length;s++){const r=e[s];r.oldText!==r.newText&&(t[n++]=r)}return t}}function R_(i){return i.toString()}class Ds{static create(e,t){const n=e.getAlternativeVersionId(),s=O7(e);return new Ds(n,n,s,s,t,t,[])}constructor(e,t,n,s,r,o,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=s,this.beforeCursorState=r,this.afterCursorState=o,this.changes=a}append(e,t,n,s,r){t.length>0&&(this.changes=wGe(this.changes,t)),this.afterEOL=n,this.afterVersionId=s,this.afterCursorState=r}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(Kc(e,t?t.length:0,n),n+=4,t)for(const s of t)Kc(e,s.selectionStartLineNumber,n),n+=4,Kc(e,s.selectionStartColumn,n),n+=4,Kc(e,s.positionLineNumber,n),n+=4,Kc(e,s.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const s=qc(e,t);t+=4;for(let r=0;r<s;r++){const o=qc(e,t);t+=4;const a=qc(e,t);t+=4;const l=qc(e,t);t+=4;const c=qc(e,t);t+=4,n.push(new Gn(o,a,l,c))}return t}serialize(){let e=10+Ds._writeSelectionsSize(this.beforeCursorState)+Ds._writeSelectionsSize(this.afterCursorState)+4;for(const s of this.changes)e+=s.writeSize();const t=new Uint8Array(e);let n=0;Kc(t,this.beforeVersionId,n),n+=4,Kc(t,this.afterVersionId,n),n+=4,EX(t,this.beforeEOL,n),n+=1,EX(t,this.afterEOL,n),n+=1,n=Ds._writeSelections(t,this.beforeCursorState,n),n=Ds._writeSelections(t,this.afterCursorState,n),Kc(t,this.changes.length,n),n+=4;for(const s of this.changes)n=s.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const s=qc(t,n);n+=4;const r=qc(t,n);n+=4;const o=xX(t,n);n+=1;const a=xX(t,n);n+=1;const l=[];n=Ds._readSelections(t,n,l);const c=[];n=Ds._readSelections(t,n,c);const u=qc(t,n);n+=4;const d=[];for(let h=0;h<u;h++)n=fr.read(t,n,d);return new Ds(s,r,o,a,l,c,d)}}class tme{get type(){return 0}get resource(){return Ut.isUri(this.model)?this.model:this.model.uri}constructor(e,t,n,s){this.label=e,this.code=t,this.model=n,this._data=Ds.create(n,s)}toString(){return(this._data instanceof Ds?this._data:Ds.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(Ut.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof Ds}append(e,t,n,s,r){this._data instanceof Ds&&this._data.append(e,t,n,s,r)}close(){this._data instanceof Ds&&(this._data=this._data.serialize())}open(){this._data instanceof Ds||(this._data=Ds.deserialize(this._data))}undo(){if(Ut.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Ds&&(this._data=this._data.serialize());const e=Ds.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(Ut.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Ds&&(this._data=this._data.serialize());const e=Ds.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof Ds&&(this._data=this._data.serialize()),this._data.byteLength+168}}class CGe{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,n){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(const s of this._editStackElementsArr){const r=R_(s.resource);this._editStackElementsMap.set(r,s)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=R_(e);return this._editStackElementsMap.has(t)}setModel(e){const t=R_(Ut.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=R_(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,s,r){const o=R_(e.uri);this._editStackElementsMap.get(o).append(e,t,n,s,r)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=R_(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${EU(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function O7(i){return i.getEOL()===`
`?0:1}function Lh(i){return i?i instanceof tme||i instanceof CGe:!1}class GU{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Lh(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Lh(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const n=this._undoRedoService.getLastElement(this._model.uri);if(Lh(n)&&n.canAppend(this._model))return n;const s=new tme(S("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(s,t),s}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],O7(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n,s){const r=this._getOrCreateEditStackElement(e,s),o=this._model.applyEdits(t,!0),a=GU._computeCursorState(n,o),l=o.map((c,u)=>({index:u,textChange:c.textChange}));return l.sort((c,u)=>c.textChange.oldPosition===u.textChange.oldPosition?c.index-u.index:c.textChange.oldPosition-u.textChange.oldPosition),r.append(this._model,l.map(c=>c.textChange),O7(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return Un(n),null}}}class nme extends be{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}function SGe(i,e){let t=0,n=0;const s=i.length;for(;n<s;){const r=i.charCodeAt(n);if(r===32)t++;else if(r===9)t=t-t%e+e;else break;n++}return n===s?-1:t}var y0;(function(i){i[i.Disabled=0]="Disabled",i[i.EnabledForActive=1]="EnabledForActive",i[i.Enabled=2]="Enabled"})(y0||(y0={}));class a0{constructor(e,t,n,s,r,o){if(this.visibleColumn=e,this.column=t,this.className=n,this.horizontalLine=s,this.forWrappedLinesAfterColumn=r,this.forWrappedLinesBeforeOrAtColumn=o,e!==-1==(t!==-1))throw new Error}}class tS{constructor(e,t){this.top=e,this.endColumn=t}}class kGe extends nme{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return SGe(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,n){this.assertNotDisposed();const s=this.textModel.getLineCount();if(e<1||e>s)throw new Dn("Illegal value for lineNumber");const r=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(r&&r.offSide);let a=-2,l=-1,c=-2,u=-1;const d=L=>{if(a!==-1&&(a===-2||a>L-1)){a=-1,l=-1;for(let I=L-2;I>=0;I--){const A=this._computeIndentLevel(I);if(A>=0){a=I,l=A;break}}}if(c===-2){c=-1,u=-1;for(let I=L;I<s;I++){const A=this._computeIndentLevel(I);if(A>=0){c=I,u=A;break}}}};let h=-2,g=-1,p=-2,_=-1;const v=L=>{if(h===-2){h=-1,g=-1;for(let I=L-2;I>=0;I--){const A=this._computeIndentLevel(I);if(A>=0){h=I,g=A;break}}}if(p!==-1&&(p===-2||p<L-1)){p=-1,_=-1;for(let I=L;I<s;I++){const A=this._computeIndentLevel(I);if(A>=0){p=I,_=A;break}}}};let y=0,w=!0,x=0,k=!0,T=0,R=0;for(let L=0;w||k;L++){const I=e-L,A=e+L;L>1&&(I<1||I<t)&&(w=!1),L>1&&(A>s||A>n)&&(k=!1),L>5e4&&(w=!1,k=!1);let B=-1;if(w&&I>=1){const U=this._computeIndentLevel(I-1);U>=0?(c=I-1,u=U,B=Math.ceil(U/this.textModel.getOptions().indentSize)):(d(I),B=this._getIndentLevelForWhitespaceLine(o,l,u))}let V=-1;if(k&&A<=s){const U=this._computeIndentLevel(A-1);U>=0?(h=A-1,g=U,V=Math.ceil(U/this.textModel.getOptions().indentSize)):(v(A),V=this._getIndentLevelForWhitespaceLine(o,g,_))}if(L===0){R=B;continue}if(L===1){if(A<=s&&V>=0&&R+1===V){w=!1,y=A,x=A,T=V;continue}if(I>=1&&B>=0&&B-1===R){k=!1,y=I,x=I,T=B;continue}if(y=e,x=e,T=R,T===0)return{startLineNumber:y,endLineNumber:x,indent:T}}w&&(B>=T?y=I:w=!1),k&&(V>=T?x=A:k=!1)}return{startLineNumber:y,endLineNumber:x,indent:T}}getLinesBracketGuides(e,t,n,s){var d;const r=[];for(let h=e;h<=t;h++)r.push([]);const o=!0,a=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new J(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let l;if(n&&a.length>0){const h=(e<=n.lineNumber&&n.lineNumber<=t?a:this.textModel.bracketPairs.getBracketPairsInRange(J.fromPositions(n)).toArray()).filter(g=>J.strictContainsPosition(g.range,n));l=(d=sD(h,g=>o))==null?void 0:d.range}const c=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,u=new ime;for(const h of a){if(!h.closingBracketRange)continue;const g=l&&h.range.equalsRange(l);if(!g&&!s.includeInactive)continue;const p=u.getInlineClassName(h.nestingLevel,h.nestingLevelOfEqualBracketType,c)+(s.highlightActive&&g?" "+u.activeClassName:""),_=h.openingBracketRange.getStartPosition(),v=h.closingBracketRange.getStartPosition(),y=s.horizontalGuides===y0.Enabled||s.horizontalGuides===y0.EnabledForActive&&g;if(h.range.startLineNumber===h.range.endLineNumber){y&&r[h.range.startLineNumber-e].push(new a0(-1,h.openingBracketRange.getEndPosition().column,p,new tS(!1,v.column),-1,-1));continue}const w=this.getVisibleColumnFromPosition(v),x=this.getVisibleColumnFromPosition(h.openingBracketRange.getStartPosition()),k=Math.min(x,w,h.minVisibleColumnIndentation+1);let T=!1;Ca(this.textModel.getLineContent(h.closingBracketRange.startLineNumber))<h.closingBracketRange.startColumn-1&&(T=!0);const I=Math.max(_.lineNumber,e),A=Math.min(v.lineNumber,t),B=T?1:0;for(let V=I;V<A+B;V++)r[V-e].push(new a0(k,-1,p,null,V===_.lineNumber?_.column:-1,V===v.lineNumber?v.column:-1));y&&(_.lineNumber>=e&&x>k&&r[_.lineNumber-e].push(new a0(k,-1,p,new tS(!1,_.column),-1,-1)),v.lineNumber<=t&&w>k&&r[v.lineNumber-e].push(new a0(k,-1,p,new tS(!T,v.column),-1,-1)))}for(const h of r)h.sort((g,p)=>g.visibleColumn-p.visibleColumn);return r}getVisibleColumnFromPosition(e){return ws.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const s=this.textModel.getOptions(),r=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(r&&r.offSide),a=new Array(t-e+1);let l=-2,c=-1,u=-2,d=-1;for(let h=e;h<=t;h++){const g=h-e,p=this._computeIndentLevel(h-1);if(p>=0){l=h-1,c=p,a[g]=Math.ceil(p/s.indentSize);continue}if(l===-2){l=-1,c=-1;for(let _=h-2;_>=0;_--){const v=this._computeIndentLevel(_);if(v>=0){l=_,c=v;break}}}if(u!==-1&&(u===-2||u<h-1)){u=-1,d=-1;for(let _=h;_<n;_++){const v=this._computeIndentLevel(_);if(v>=0){u=_,d=v;break}}}a[g]=this._getIndentLevelForWhitespaceLine(o,c,d)}return a}_getIndentLevelForWhitespaceLine(e,t,n){const s=this.textModel.getOptions();return t===-1||n===-1?0:t<n?1+Math.floor(t/s.indentSize):t===n||e?Math.ceil(n/s.indentSize):1+Math.floor(n/s.indentSize)}}class ime{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}class xGe{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function EGe(i,e,t,n,s){s.spacesDiff=0,s.looksLikeAlignment=!1;let r;for(r=0;r<e&&r<n;r++){const h=i.charCodeAt(r),g=t.charCodeAt(r);if(h!==g)break}let o=0,a=0;for(let h=r;h<e;h++)i.charCodeAt(h)===32?o++:a++;let l=0,c=0;for(let h=r;h<n;h++)t.charCodeAt(h)===32?l++:c++;if(o>0&&a>0||l>0&&c>0)return;const u=Math.abs(a-c),d=Math.abs(o-l);if(u===0){s.spacesDiff=d,d>0&&0<=l-1&&l-1<i.length&&l<t.length&&t.charCodeAt(l)!==32&&i.charCodeAt(l-1)===32&&i.charCodeAt(i.length-1)===44&&(s.looksLikeAlignment=!0);return}if(d%u===0){s.spacesDiff=d/u;return}}function AJ(i,e,t){const n=Math.min(i.getLineCount(),1e4);let s=0,r=0,o="",a=0;const l=[2,4,6,8,3,5,7],c=8,u=[0,0,0,0,0,0,0,0,0],d=new xGe;for(let p=1;p<=n;p++){const _=i.getLineLength(p),v=i.getLineContent(p),y=_<=65536;let w=!1,x=0,k=0,T=0;for(let L=0,I=_;L<I;L++){const A=y?v.charCodeAt(L):i.getLineCharCode(p,L);if(A===9)T++;else if(A===32)k++;else{w=!0,x=L;break}}if(!w||(T>0?s++:k>1&&r++,EGe(o,a,v,x,d),d.looksLikeAlignment&&!(t&&e===d.spacesDiff)))continue;const R=d.spacesDiff;R<=c&&u[R]++,o=v,a=x}let h=t;s!==r&&(h=s<r);let g=e;if(h){let p=h?0:.1*n;l.forEach(_=>{const v=u[_];v>p&&(p=v,g=_)}),g===4&&u[4]>0&&u[2]>0&&u[2]>=u[4]/2&&(g=2)}return{insertSpaces:h,tabSize:g}}function Ho(i){return(i.metadata&1)>>>0}function ci(i,e){i.metadata=i.metadata&254|e<<0}function vr(i){return(i.metadata&2)>>>1===1}function ni(i,e){i.metadata=i.metadata&253|(e?1:0)<<1}function sme(i){return(i.metadata&4)>>>2===1}function PJ(i,e){i.metadata=i.metadata&251|(e?1:0)<<2}function rme(i){return(i.metadata&64)>>>6===1}function MJ(i,e){i.metadata=i.metadata&191|(e?1:0)<<6}function TGe(i){return(i.metadata&24)>>>3}function OJ(i,e){i.metadata=i.metadata&231|e<<3}function LGe(i){return(i.metadata&32)>>>5===1}function FJ(i,e){i.metadata=i.metadata&223|(e?1:0)<<5}class ome{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,ci(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,PJ(this,!1),MJ(this,!1),OJ(this,1),FJ(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,ni(this,!1)}reset(e,t,n,s){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=s}setOptions(e){this.options=e;const t=this.options.className;PJ(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),MJ(this,this.options.glyphMarginClassName!==null),OJ(this,this.options.stickiness),FJ(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const Vt=new ome(null,0,0);Vt.parent=Vt;Vt.left=Vt;Vt.right=Vt;ci(Vt,0);class h6{constructor(){this.root=Vt,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,s,r,o){return this.root===Vt?[]:OGe(this,e,t,n,s,r,o)}search(e,t,n,s){return this.root===Vt?[]:MGe(this,e,t,n,s)}collectNodesFromOwner(e){return AGe(this,e)}collectNodesPostOrder(){return PGe(this)}insert(e){BJ(this,e),this._normalizeDeltaIfNecessary()}delete(e){VJ(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let s=0;for(;e!==this.root;)e===e.parent.right&&(s+=e.parent.delta),e=e.parent;const r=n.start+s,o=n.end+s;n.setCachedOffsets(r,o,t)}acceptReplace(e,t,n,s){const r=NGe(this,e,e+t);for(let o=0,a=r.length;o<a;o++){const l=r[o];VJ(this,l)}this._normalizeDeltaIfNecessary(),RGe(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let o=0,a=r.length;o<a;o++){const l=r[o];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,DGe(l,e,e+t,n,s),l.maxEnd=l.end,BJ(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,IGe(this))}}function IGe(i){let e=i.root,t=0;for(;e!==Vt;){if(e.left!==Vt&&!vr(e.left)){e=e.left;continue}if(e.right!==Vt&&!vr(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,Am(e),ni(e,!0),ni(e.left,!1),ni(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}ni(i.root,!1)}function A_(i,e,t,n){return i<t?!0:i>t||n===1?!1:n===2?!0:e}function DGe(i,e,t,n,s){const r=TGe(i),o=r===0||r===2,a=r===1||r===2,l=t-e,c=n,u=Math.min(l,c),d=i.start;let h=!1;const g=i.end;let p=!1;e<=d&&g<=t&&LGe(i)&&(i.start=e,h=!0,i.end=e,p=!0);{const v=s?1:l>0?2:0;!h&&A_(d,o,e,v)&&(h=!0),!p&&A_(g,a,e,v)&&(p=!0)}if(u>0&&!s){const v=l>c?2:0;!h&&A_(d,o,e+u,v)&&(h=!0),!p&&A_(g,a,e+u,v)&&(p=!0)}{const v=s?1:0;!h&&A_(d,o,t,v)&&(i.start=e+c,h=!0),!p&&A_(g,a,t,v)&&(i.end=e+c,p=!0)}const _=c-l;h||(i.start=Math.max(0,d+_)),p||(i.end=Math.max(0,g+_)),i.start>i.end&&(i.end=i.start)}function NGe(i,e,t){let n=i.root,s=0,r=0,o=0,a=0;const l=[];let c=0;for(;n!==Vt;){if(vr(n)){ni(n.left,!1),ni(n.right,!1),n===n.parent.right&&(s-=n.parent.delta),n=n.parent;continue}if(!vr(n.left)){if(r=s+n.maxEnd,r<e){ni(n,!0);continue}if(n.left!==Vt){n=n.left;continue}}if(o=s+n.start,o>t){ni(n,!0);continue}if(a=s+n.end,a>=e&&(n.setCachedOffsets(o,a,0),l[c++]=n),ni(n,!0),n.right!==Vt&&!vr(n.right)){s+=n.delta,n=n.right;continue}}return ni(i.root,!1),l}function RGe(i,e,t,n){let s=i.root,r=0,o=0,a=0;const l=n-(t-e);for(;s!==Vt;){if(vr(s)){ni(s.left,!1),ni(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),Am(s),s=s.parent;continue}if(!vr(s.left)){if(o=r+s.maxEnd,o<e){ni(s,!0);continue}if(s.left!==Vt){s=s.left;continue}}if(a=r+s.start,a>t){s.start+=l,s.end+=l,s.delta+=l,(s.delta<-1073741824||s.delta>1073741824)&&(i.requestNormalizeDelta=!0),ni(s,!0);continue}if(ni(s,!0),s.right!==Vt&&!vr(s.right)){r+=s.delta,s=s.right;continue}}ni(i.root,!1)}function AGe(i,e){let t=i.root;const n=[];let s=0;for(;t!==Vt;){if(vr(t)){ni(t.left,!1),ni(t.right,!1),t=t.parent;continue}if(t.left!==Vt&&!vr(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[s++]=t),ni(t,!0),t.right!==Vt&&!vr(t.right)){t=t.right;continue}}return ni(i.root,!1),n}function PGe(i){let e=i.root;const t=[];let n=0;for(;e!==Vt;){if(vr(e)){ni(e.left,!1),ni(e.right,!1),e=e.parent;continue}if(e.left!==Vt&&!vr(e.left)){e=e.left;continue}if(e.right!==Vt&&!vr(e.right)){e=e.right;continue}t[n++]=e,ni(e,!0)}return ni(i.root,!1),t}function MGe(i,e,t,n,s){let r=i.root,o=0,a=0,l=0;const c=[];let u=0;for(;r!==Vt;){if(vr(r)){ni(r.left,!1),ni(r.right,!1),r===r.parent.right&&(o-=r.parent.delta),r=r.parent;continue}if(r.left!==Vt&&!vr(r.left)){r=r.left;continue}a=o+r.start,l=o+r.end,r.setCachedOffsets(a,l,n);let d=!0;if(e&&r.ownerId&&r.ownerId!==e&&(d=!1),t&&sme(r)&&(d=!1),s&&!rme(r)&&(d=!1),d&&(c[u++]=r),ni(r,!0),r.right!==Vt&&!vr(r.right)){o+=r.delta,r=r.right;continue}}return ni(i.root,!1),c}function OGe(i,e,t,n,s,r,o){let a=i.root,l=0,c=0,u=0,d=0;const h=[];let g=0;for(;a!==Vt;){if(vr(a)){ni(a.left,!1),ni(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!vr(a.left)){if(c=l+a.maxEnd,c<e){ni(a,!0);continue}if(a.left!==Vt){a=a.left;continue}}if(u=l+a.start,u>t){ni(a,!0);continue}if(d=l+a.end,d>=e){a.setCachedOffsets(u,d,r);let p=!0;n&&a.ownerId&&a.ownerId!==n&&(p=!1),s&&sme(a)&&(p=!1),o&&!rme(a)&&(p=!1),p&&(h[g++]=a)}if(ni(a,!0),a.right!==Vt&&!vr(a.right)){l+=a.delta,a=a.right;continue}}return ni(i.root,!1),h}function BJ(i,e){if(i.root===Vt)return e.parent=Vt,e.left=Vt,e.right=Vt,ci(e,0),i.root=e,i.root;FGe(i,e),mg(e.parent);let t=e;for(;t!==i.root&&Ho(t.parent)===1;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;Ho(n)===1?(ci(t.parent,0),ci(n,0),ci(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,nS(i,t)),ci(t.parent,0),ci(t.parent.parent,1),iS(i,t.parent.parent))}else{const n=t.parent.parent.left;Ho(n)===1?(ci(t.parent,0),ci(n,0),ci(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,iS(i,t)),ci(t.parent,0),ci(t.parent.parent,1),nS(i,t.parent.parent))}return ci(i.root,0),e}function FGe(i,e){let t=0,n=i.root;const s=e.start,r=e.end;for(;;)if(VGe(s,r,n.start+t,n.end+t)<0)if(n.left===Vt){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===Vt){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=Vt,e.right=Vt,ci(e,1)}function VJ(i,e){let t,n;if(e.left===Vt?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===Vt?(t=e.left,n=e):(n=BGe(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(i.requestNormalizeDelta=!0)),n===i.root){i.root=t,ci(t,0),e.detach(),f6(),Am(t),i.root.parent=Vt;return}const s=Ho(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,ci(n,Ho(e)),e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Vt&&(n.left.parent=n),n.right!==Vt&&(n.right.parent=n)),e.detach(),s){mg(t.parent),n!==e&&(mg(n),mg(n.parent)),f6();return}mg(t),mg(t.parent),n!==e&&(mg(n),mg(n.parent));let r;for(;t!==i.root&&Ho(t)===0;)t===t.parent.left?(r=t.parent.right,Ho(r)===1&&(ci(r,0),ci(t.parent,1),nS(i,t.parent),r=t.parent.right),Ho(r.left)===0&&Ho(r.right)===0?(ci(r,1),t=t.parent):(Ho(r.right)===0&&(ci(r.left,0),ci(r,1),iS(i,r),r=t.parent.right),ci(r,Ho(t.parent)),ci(t.parent,0),ci(r.right,0),nS(i,t.parent),t=i.root)):(r=t.parent.left,Ho(r)===1&&(ci(r,0),ci(t.parent,1),iS(i,t.parent),r=t.parent.left),Ho(r.left)===0&&Ho(r.right)===0?(ci(r,1),t=t.parent):(Ho(r.left)===0&&(ci(r.right,0),ci(r,1),nS(i,r),r=t.parent.left),ci(r,Ho(t.parent)),ci(t.parent,0),ci(r.left,0),iS(i,t.parent),t=i.root));ci(t,0),f6()}function BGe(i){for(;i.left!==Vt;)i=i.left;return i}function f6(){Vt.parent=Vt,Vt.delta=0,Vt.start=0,Vt.end=0}function nS(i,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==Vt&&(t.left.parent=e),t.parent=e.parent,e.parent===Vt?i.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Am(e),Am(t)}function iS(i,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(i.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==Vt&&(t.right.parent=e),t.parent=e.parent,e.parent===Vt?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Am(e),Am(t)}function ame(i){let e=i.end;if(i.left!==Vt){const t=i.left.maxEnd;t>e&&(e=t)}if(i.right!==Vt){const t=i.right.maxEnd+i.delta;t>e&&(e=t)}return e}function Am(i){i.maxEnd=ame(i)}function mg(i){for(;i!==Vt;){const e=ame(i);if(i.maxEnd===e)return;i.maxEnd=e,i=i.parent}}function VGe(i,e,t,n){return i===t?e-n:i-t}class F7{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==yt)return YU(this.right);let e=this;for(;e.parent!==yt&&e.parent.left!==e;)e=e.parent;return e.parent===yt?yt:e.parent}prev(){if(this.left!==yt)return lme(this.left);let e=this;for(;e.parent!==yt&&e.parent.right!==e;)e=e.parent;return e.parent===yt?yt:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const yt=new F7(null,0);yt.parent=yt;yt.left=yt;yt.right=yt;yt.color=0;function YU(i){for(;i.left!==yt;)i=i.left;return i}function lme(i){for(;i.right!==yt;)i=i.right;return i}function QU(i){return i===yt?0:i.size_left+i.piece.length+QU(i.right)}function XU(i){return i===yt?0:i.lf_left+i.piece.lineFeedCnt+XU(i.right)}function g6(){yt.parent=yt}function sS(i,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==yt&&(t.left.parent=e),t.parent=e.parent,e.parent===yt?i.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function rS(i,e){const t=e.left;e.left=t.right,t.right!==yt&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===yt?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function cT(i,e){let t,n;if(e.left===yt?(n=e,t=n.right):e.right===yt?(n=e,t=n.left):(n=YU(e.right),t=n.right),n===i.root){i.root=t,t.color=0,e.detach(),g6(),i.root.parent=yt;return}const s=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,SC(i,t)):(n.parent===e?t.parent=n:t.parent=n.parent,SC(i,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==yt&&(n.left.parent=n),n.right!==yt&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,SC(i,n)),e.detach(),t.parent.left===t){const o=QU(t),a=XU(t);if(o!==t.parent.size_left||a!==t.parent.lf_left){const l=o-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=o,t.parent.lf_left=a,ph(i,t.parent,l,c)}}if(SC(i,t.parent),s){g6();return}let r;for(;t!==i.root&&t.color===0;)t===t.parent.left?(r=t.parent.right,r.color===1&&(r.color=0,t.parent.color=1,sS(i,t.parent),r=t.parent.right),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.right.color===0&&(r.left.color=0,r.color=1,rS(i,r),r=t.parent.right),r.color=t.parent.color,t.parent.color=0,r.right.color=0,sS(i,t.parent),t=i.root)):(r=t.parent.left,r.color===1&&(r.color=0,t.parent.color=1,rS(i,t.parent),r=t.parent.left),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.left.color===0&&(r.right.color=0,r.color=1,sS(i,r),r=t.parent.left),r.color=t.parent.color,t.parent.color=0,r.left.color=0,rS(i,t.parent),t=i.root));t.color=0,g6()}function WJ(i,e){for(SC(i,e);e!==i.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,sS(i,e)),e.parent.color=0,e.parent.parent.color=1,rS(i,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,rS(i,e)),e.parent.color=0,e.parent.parent.color=1,sS(i,e.parent.parent))}i.root.color=0}function ph(i,e,t,n){for(;e!==i.root&&e!==yt;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function SC(i,e){let t=0,n=0;if(e!==i.root){for(;e!==i.root&&e===e.parent.right;)e=e.parent;if(e!==i.root)for(e=e.parent,t=QU(e.left)-e.size_left,n=XU(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==i.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}const hh=65535;function cme(i){let e;return i[i.length-1]<65536?e=new Uint16Array(i.length):e=new Uint32Array(i.length),e.set(i,0),e}class WGe{constructor(e,t,n,s,r){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=s,this.isBasicASCII=r}}function vh(i,e=!0){const t=[0];let n=1;for(let s=0,r=i.length;s<r;s++){const o=i.charCodeAt(s);o===13?s+1<r&&i.charCodeAt(s+1)===10?(t[n++]=s+2,s++):t[n++]=s+1:o===10&&(t[n++]=s+1)}return e?cme(t):t}function HGe(i,e){i.length=0,i[0]=0;let t=1,n=0,s=0,r=0,o=!0;for(let l=0,c=e.length;l<c;l++){const u=e.charCodeAt(l);u===13?l+1<c&&e.charCodeAt(l+1)===10?(r++,i[t++]=l+2,l++):(n++,i[t++]=l+1):u===10?(s++,i[t++]=l+1):o&&u!==9&&(u<32||u>126)&&(o=!1)}const a=new WGe(cme(i),n,s,r,o);return i.length=0,a}class fa{constructor(e,t,n,s,r){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=s,this.length=r}}class Hp{constructor(e,t){this.buffer=e,this.lineStarts=t}}class UGe{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==yt&&e.iterate(e.root,n=>(n!==yt&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class zGe{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const n=this._cache;for(let s=0;s<n.length;s++){const r=n[s];if(r.node.parent===null||r.nodeStartOffset>=e){n[s]=null,t=!0;continue}}if(t){const s=[];for(const r of n)r!==null&&s.push(r);this._cache=s}}}class jGe{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new Hp("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=yt,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let s=null;for(let r=0,o=e.length;r<o;r++)if(e[r].buffer.length>0){e[r].lineStarts||(e[r].lineStarts=vh(e[r].buffer));const a=new fa(r+1,{line:0,column:0},{line:e[r].lineStarts.length-1,column:e[r].buffer.length-e[r].lineStarts[e[r].lineStarts.length-1]},e[r].lineStarts.length-1,e[r].buffer.length);this._buffers.push(e[r]),s=this.rbInsertRight(s,a)}this._searchCache=new zGe(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=hh,n=t-Math.floor(t/3),s=n*2;let r="",o=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),u=c.length;if(o<=n||o+u<s)return r+=c,o+=u,!0;const d=r.replace(/\r\n|\r|\n/g,e);return a.push(new Hp(d,vh(d))),r=c,o=u,!0}),o>0){const l=r.replace(/\r\n|\r|\n/g,e);a.push(new Hp(l,vh(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new UGe(this,e)}getOffsetAt(e,t){let n=0,s=this.root;for(;s!==yt;)if(s.left!==yt&&s.lf_left+1>=e)s=s.left;else if(s.lf_left+s.piece.lineFeedCnt+1>=e){n+=s.size_left;const r=this.getAccumulatedValue(s,e-s.lf_left-2);return n+=r+t-1}else e-=s.lf_left+s.piece.lineFeedCnt,n+=s.size_left+s.piece.length,s=s.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0;const s=e;for(;t!==yt;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const r=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+r.index,r.index===0){const o=this.getOffsetAt(n+1,1),a=s-o;return new ue(n+1,a+1)}return new ue(n+1,r.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===yt){const r=this.getOffsetAt(n+1,1),o=s-e-r;return new ue(n+1,o+1)}else t=t.right;return new ue(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const n=this.nodeAt2(e.startLineNumber,e.startColumn),s=this.nodeAt2(e.endLineNumber,e.endColumn),r=this.getValueInRange2(n,s);return t?t!==this._EOL||!this._EOLNormalized?r.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?r:r.replace(/\r\n|\r|\n/g,t):r}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let n=e.node;const s=this._buffers[n.piece.bufferIndex].buffer,r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);let o=s.substring(r+e.remainder,r+n.piece.length);for(n=n.next();n!==yt;){const a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){o+=a.substring(l,l+t.remainder);break}else o+=a.substr(l,n.piece.length);n=n.next()}return o}getLinesContent(){const e=[];let t=0,n="",s=!1;return this.iterate(this.root,r=>{if(r===yt)return!0;const o=r.piece;let a=o.length;if(a===0)return!0;const l=this._buffers[o.bufferIndex].buffer,c=this._buffers[o.bufferIndex].lineStarts,u=o.start.line,d=o.end.line;let h=c[u]+o.start.column;if(s&&(l.charCodeAt(h)===10&&(h++,a--),e[t++]=n,n="",s=!1,a===0))return!0;if(u===d)return!this._EOLNormalized&&l.charCodeAt(h+a-1)===13?(s=!0,n+=l.substr(h,a-1)):n+=l.substr(h,a),!0;n+=this._EOLNormalized?l.substring(h,Math.max(h,c[u+1]-this._EOLLength)):l.substring(h,c[u+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let g=u+1;g<d;g++)n=this._EOLNormalized?l.substring(c[g],c[g+1]-this._EOLLength):l.substring(c[g],c[g+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(c[d]+o.end.column-1)===13?(s=!0,o.end.column===0?t--:n=l.substr(c[d],o.end.column-1)):n=l.substr(c[d],o.end.column),!0}),s&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const n=this._buffers[t.piece.bufferIndex],s=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(s)}else{const t=this._buffers[e.node.piece.bufferIndex],s=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(s)}}getLineCharCode(e,t){const n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,s,r,o,a,l,c,u,d){const h=this._buffers[e.piece.bufferIndex],g=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),p=this.offsetInBuffer(e.piece.bufferIndex,r),_=this.offsetInBuffer(e.piece.bufferIndex,o);let v;const y={line:0,column:0};let w,x;t._wordSeparators?(w=h.buffer.substring(p,_),x=k=>k+p,t.reset(0)):(w=h.buffer,x=k=>k,t.reset(p));do if(v=t.next(w),v){if(x(v.index)>=_)return u;this.positionInBuffer(e,x(v.index)-g,y);const k=this.getLineFeedCnt(e.piece.bufferIndex,r,y),T=y.line===r.line?y.column-r.column+s:y.column+1,R=T+v[0].length;if(d[u++]=Mp(new J(n+k,T,n+k,R),v,l),x(v.index)+v[0].length>=_||u>=c)return u}while(v);return u}findMatchesLineByLine(e,t,n,s){const r=[];let o=0;const a=new iv(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let u=this.positionInBuffer(l.node,l.remainder);const d=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,u,d,t,n,s,o,r),r;let h=e.startLineNumber,g=l.node;for(;g!==c.node;){const _=this.getLineFeedCnt(g.piece.bufferIndex,u,g.piece.end);if(_>=1){const y=this._buffers[g.piece.bufferIndex].lineStarts,w=this.offsetInBuffer(g.piece.bufferIndex,g.piece.start),x=y[u.line+_],k=h===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(g,a,h,k,u,this.positionInBuffer(g,x-w),t,n,s,o,r),o>=s)return r;h+=_}const v=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const y=this.getLineContent(h).substring(v,e.endColumn-1);return o=this._findMatchesInLine(t,a,y,e.endLineNumber,v,o,r,n,s),r}if(o=this._findMatchesInLine(t,a,this.getLineContent(h).substr(v),h,v,o,r,n,s),o>=s)return r;h++,l=this.nodeAt2(h,1),g=l.node,u=this.positionInBuffer(l.node,l.remainder)}if(h===e.endLineNumber){const _=h===e.startLineNumber?e.startColumn-1:0,v=this.getLineContent(h).substring(_,e.endColumn-1);return o=this._findMatchesInLine(t,a,v,e.endLineNumber,_,o,r,n,s),r}const p=h===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(c.node,a,h,p,u,d,t,n,s,o,r),r}_findMatchesInLine(e,t,n,s,r,o,a,l,c){const u=e.wordSeparators;if(!l&&e.simpleSearch){const h=e.simpleSearch,g=h.length,p=n.length;let _=-g;for(;(_=n.indexOf(h,_+g))!==-1;)if((!u||rU(u,n,p,_,g))&&(a[o++]=new xk(new J(s,_+1+r,s,_+1+g+r),null),o>=c))return o;return o}let d;t.reset(0);do if(d=t.next(n),d&&(a[o++]=Mp(new J(s,d.index+1+r,s,d.index+1+d[0].length+r),d,l),o>=c))return o;while(d);return o}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==yt){const{node:s,remainder:r,nodeStartOffset:o}=this.nodeAt(e),a=s.piece,l=a.bufferIndex,c=this.positionInBuffer(s,r);if(s.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&o+a.length===e&&t.length<hh){this.appendToNode(s,t),this.computeBufferMetadata();return}if(o===e)this.insertContentToNodeLeft(t,s),this._searchCache.validate(e);else if(o+s.piece.length>e){const u=[];let d=new fa(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(s,r)===10){const _={line:d.start.line+1,column:0};d=new fa(d.bufferIndex,_,d.end,this.getLineFeedCnt(d.bufferIndex,_,d.end),d.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(s,r-1)===13){const _=this.positionInBuffer(s,r-1);this.deleteNodeTail(s,_),t="\r"+t,s.piece.length===0&&u.push(s)}else this.deleteNodeTail(s,c);else this.deleteNodeTail(s,c);const h=this.createNewPieces(t);d.length>0&&this.rbInsertRight(s,d);let g=s;for(let p=0;p<h.length;p++)g=this.rbInsertRight(g,h[p]);this.deleteNodes(u)}else this.insertContentToNodeRight(t,s)}else{const s=this.createNewPieces(t);let r=this.rbInsertLeft(null,s[0]);for(let o=1;o<s.length;o++)r=this.rbInsertRight(r,s[o])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===yt)return;const n=this.nodeAt(e),s=this.nodeAt(e+t),r=n.node,o=s.node;if(r===o){const h=this.positionInBuffer(r,n.remainder),g=this.positionInBuffer(r,s.remainder);if(n.nodeStartOffset===e){if(t===r.piece.length){const p=r.next();cT(this,r),this.validateCRLFWithPrevNode(p),this.computeBufferMetadata();return}this.deleteNodeHead(r,g),this._searchCache.validate(e),this.validateCRLFWithPrevNode(r),this.computeBufferMetadata();return}if(n.nodeStartOffset+r.piece.length===e+t){this.deleteNodeTail(r,h),this.validateCRLFWithNextNode(r),this.computeBufferMetadata();return}this.shrinkNode(r,h,g),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(r,n.remainder);this.deleteNodeTail(r,l),this._searchCache.validate(e),r.piece.length===0&&a.push(r);const c=this.positionInBuffer(o,s.remainder);this.deleteNodeHead(o,c),o.piece.length===0&&a.push(o);const u=r.next();for(let h=u;h!==yt&&h!==o;h=h.next())a.push(h);const d=r.piece.length===0?r.prev():r;this.deleteNodes(a),this.validateCRLFWithNextNode(d),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const o=t.piece,a={line:o.start.line+1,column:0},l=new fa(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),o.length-1);t.piece=l,e+=`
`,ph(this,t,-1,-1),t.piece.length===0&&n.push(t)}const s=this.createNewPieces(e);let r=this.rbInsertLeft(t,s[s.length-1]);for(let o=s.length-2;o>=0;o--)r=this.rbInsertLeft(r,s[o]);this.validateCRLFWithPrevNode(r),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const n=this.createNewPieces(e),s=this.rbInsertRight(t,n[0]);let r=s;for(let o=1;o<n.length;o++)r=this.rbInsertRight(r,n[o]);this.validateCRLFWithPrevNode(s)}positionInBuffer(e,t,n){const s=e.piece,r=e.piece.bufferIndex,o=this._buffers[r].lineStarts,l=o[s.start.line]+s.start.column+t;let c=s.start.line,u=s.end.line,d=0,h=0,g=0;for(;c<=u&&(d=c+(u-c)/2|0,g=o[d],d!==u);)if(h=o[d+1],l<g)u=d-1;else if(l>=h)c=d+1;else break;return n?(n.line=d,n.column=l-g,null):{line:d,column:l-g}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;const s=this._buffers[e].lineStarts;if(n.line===s.length-1)return n.line-t.line;const r=s[n.line+1],o=s[n.line]+n.column;if(r>o+1)return n.line-t.line;const a=o-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)cT(this,e[t])}createNewPieces(e){if(e.length>hh){const u=[];for(;e.length>hh;){const h=e.charCodeAt(hh-1);let g;h===13||h>=55296&&h<=56319?(g=e.substring(0,hh-1),e=e.substring(hh-1)):(g=e.substring(0,hh),e=e.substring(hh));const p=vh(g);u.push(new fa(this._buffers.length,{line:0,column:0},{line:p.length-1,column:g.length-p[p.length-1]},p.length-1,g.length)),this._buffers.push(new Hp(g,p))}const d=vh(e);return u.push(new fa(this._buffers.length,{line:0,column:0},{line:d.length-1,column:e.length-d[d.length-1]},d.length-1,e.length)),this._buffers.push(new Hp(e,d)),u}let t=this._buffers[0].buffer.length;const n=vh(e,!1);let s=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},s=this._lastChangeBufferPos;for(let u=0;u<n.length;u++)n[u]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let u=0;u<n.length;u++)n[u]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const r=this._buffers[0].buffer.length,o=this._buffers[0].lineStarts.length-1,a=r-this._buffers[0].lineStarts[o],l={line:o,column:a},c=new fa(0,s,l,this.getLineFeedCnt(0,s,l),r-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let n=this.root,s="";const r=this._searchCache.get2(e);if(r){n=r.node;const o=this.getAccumulatedValue(n,e-r.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(r.nodeStartLineNumber+n.piece.lineFeedCnt===e)s=a.substring(l+o,l+n.piece.length);else{const c=this.getAccumulatedValue(n,e-r.nodeStartLineNumber);return a.substring(l+o,l+c-t)}}else{let o=0;const a=e;for(;n!==yt;)if(n.left!==yt&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this.getAccumulatedValue(n,e-n.lf_left-1),u=this._buffers[n.piece.bufferIndex].buffer,d=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return o+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:o,nodeStartLineNumber:a-(e-1-n.lf_left)}),u.substring(d+l,d+c-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this._buffers[n.piece.bufferIndex].buffer,u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);s=c.substring(u+l,u+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,o+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==yt;){const o=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return s+=o.substring(l,l+a-t),s}else{const a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);s+=o.substr(a,n.piece.length)}n=n.next()}return s}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==yt;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){const n=e.piece,s=this.positionInBuffer(e,t),r=s.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){const o=this.getLineFeedCnt(e.piece.bufferIndex,n.start,s);if(o!==r)return{index:o,remainder:0}}return{index:r,remainder:s.column}}getAccumulatedValue(e,t){if(t<0)return 0;const n=e.piece,s=this._buffers[n.bufferIndex].lineStarts,r=n.start.line+t+1;return r>n.end.line?s[n.end.line]+n.end.column-s[n.start.line]-n.start.column:s[r]-s[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,s=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.end),o=t,a=this.offsetInBuffer(n.bufferIndex,o),l=this.getLineFeedCnt(n.bufferIndex,n.start,o),c=l-s,u=a-r,d=n.length+u;e.piece=new fa(n.bufferIndex,n.start,o,l,d),ph(this,e,u,c)}deleteNodeHead(e,t){const n=e.piece,s=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.start),o=t,a=this.getLineFeedCnt(n.bufferIndex,o,n.end),l=this.offsetInBuffer(n.bufferIndex,o),c=a-s,u=r-l,d=n.length+u;e.piece=new fa(n.bufferIndex,o,n.end,a,d),ph(this,e,u,c)}shrinkNode(e,t,n){const s=e.piece,r=s.start,o=s.end,a=s.length,l=s.lineFeedCnt,c=t,u=this.getLineFeedCnt(s.bufferIndex,s.start,c),d=this.offsetInBuffer(s.bufferIndex,t)-this.offsetInBuffer(s.bufferIndex,r);e.piece=new fa(s.bufferIndex,s.start,c,u,d),ph(this,e,d-a,u-l);const h=new fa(s.bufferIndex,n,o,this.getLineFeedCnt(s.bufferIndex,n,o),this.offsetInBuffer(s.bufferIndex,o)-this.offsetInBuffer(s.bufferIndex,n)),g=this.rbInsertRight(e,h);this.validateCRLFWithPrevNode(g)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),s=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const r=vh(t,!1);for(let g=0;g<r.length;g++)r[g]+=s;if(n){const g=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:s-g}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1));const o=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[o],l={line:o,column:a},c=e.piece.length+t.length,u=e.piece.lineFeedCnt,d=this.getLineFeedCnt(0,e.piece.start,l),h=d-u;e.piece=new fa(e.piece.bufferIndex,e.piece.start,l,d,c),this._lastChangeBufferPos=l,ph(this,e,t.length,h)}nodeAt(e){let t=this.root;const n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let s=0;for(;t!==yt;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){s+=t.size_left;const r={node:t,remainder:e-t.size_left,nodeStartOffset:s};return this._searchCache.set(r),r}else e-=t.size_left+t.piece.length,s+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,s=0;for(;n!==yt;)if(n.left!==yt&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const r=this.getAccumulatedValue(n,e-n.lf_left-2),o=this.getAccumulatedValue(n,e-n.lf_left-1);return s+=n.size_left,{node:n,remainder:Math.min(r+t-1,o),nodeStartOffset:s}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const r=this.getAccumulatedValue(n,e-n.lf_left-2);if(r+t-1<=n.piece.length)return{node:n,remainder:r+t-1,nodeStartOffset:s};t-=n.piece.length-r;break}else e-=n.lf_left+n.piece.lineFeedCnt,s+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==yt;){if(n.piece.lineFeedCnt>0){const r=this.getAccumulatedValue(n,0),o=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,r),nodeStartOffset:o}}else if(n.piece.length>=t-1){const r=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:r}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const n=this._buffers[e.piece.bufferIndex],s=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(s)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===yt||e.piece.lineFeedCnt===0)return!1;const t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,s=t.start.line,r=n[s]+t.start.column;return s===n.length-1||n[s+1]>r+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(r)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===yt||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const n=[],s=this._buffers[e.piece.bufferIndex].lineStarts;let r;e.piece.end.column===0?r={line:e.piece.end.line-1,column:s[e.piece.end.line]-s[e.piece.end.line-1]-1}:r={line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new fa(e.piece.bufferIndex,e.piece.start,r,a,o),ph(this,e,-1,-1),e.piece.length===0&&n.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,u=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new fa(t.piece.bufferIndex,l,t.piece.end,u,c),ph(this,t,-1,-1),t.piece.length===0&&n.push(t);const d=this.createNewPieces(`\r
`);this.rbInsertRight(e,d[0]);for(let h=0;h<n.length;h++)cT(this,n[h])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)cT(this,n);else{const s=n.piece,r={line:s.start.line+1,column:0},o=s.length-1,a=this.getLineFeedCnt(s.bufferIndex,r,s.end);n.piece=new fa(s.bufferIndex,r,s.end,a,o),ph(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===yt)return t(yt);const n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===yt)return"";const t=this._buffers[e.piece.bufferIndex],n=e.piece,s=this.offsetInBuffer(n.bufferIndex,n.start),r=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(s,r)}getPieceContent(e){const t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),s=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,s)}rbInsertRight(e,t){const n=new F7(t,1);if(n.left=yt,n.right=yt,n.parent=yt,n.size_left=0,n.lf_left=0,this.root===yt)this.root=n,n.color=0;else if(e.right===yt)e.right=n,n.parent=e;else{const r=YU(e.right);r.left=n,n.parent=r}return WJ(this,n),n}rbInsertLeft(e,t){const n=new F7(t,1);if(n.left=yt,n.right=yt,n.parent=yt,n.size_left=0,n.lf_left=0,this.root===yt)this.root=n,n.color=0;else if(e.left===yt)e.left=n,n.parent=e;else{const s=lme(e.left);s.right=n,n.parent=s}return WJ(this,n),n}}class lb extends be{constructor(e,t,n,s,r,o,a){super(),this._onDidChangeContent=this._register(new se),this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=s,this._mightContainUnusualLineTerminators=r,this._pieceTree=new jGe(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const n=e+t,s=this.getPositionAt(e),r=this.getPositionAt(n);return new J(s.lineNumber,s.column,r.lineNumber,r.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const n=this.getOffsetAt(e.startLineNumber,e.startColumn),s=this.getOffsetAt(e.endLineNumber,e.endColumn);let r=0;const o=this._getEndOfLine(t),a=this.getEOL();if(o.length!==a.length){const l=o.length-a.length,c=e.endLineNumber-e.startLineNumber;r=l*c}return s-n+r}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const s=e.startLineNumber,r=e.endLineNumber;for(let o=s;o<=r;o++){const a=this.getLineContent(o),l=o===s?e.startColumn-1:0,c=o===r?e.endColumn-1:a.length;for(let u=l;u<c;u++)As(a.charCodeAt(u))?(n=n+1,u=u+1):n=n+1}return n+=this._getEndOfLine(t).length*(r-s),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=Ca(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=k1(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let s=this._mightContainRTL,r=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,a=!0,l=[];for(let _=0;_<e.length;_++){const v=e[_];a&&v._isTracked&&(a=!1);const y=v.range;if(v.text){let R=!0;o||(R=!BH(v.text),o=R),!s&&R&&(s=bk(v.text)),!r&&R&&(r=ohe(v.text))}let w="",x=0,k=0,T=0;if(v.text){let R;[x,k,T,R]=Zb(v.text);const L=this.getEOL();R===0||R===(L===`\r
`?2:1)?w=v.text:w=v.text.replace(/\r\n|\r|\n/g,L)}l[_]={sortIndex:_,identifier:v.identifier||null,range:y,rangeOffset:this.getOffsetAt(y.startLineNumber,y.startColumn),rangeLength:this.getValueLengthInRange(y),text:w,eolCount:x,firstLineLength:k,lastLineLength:T,forceMoveMarkers:!!v.forceMoveMarkers,isAutoWhitespaceEdit:v.isAutoWhitespaceEdit||!1}}l.sort(lb._sortOpsAscending);let c=!1;for(let _=0,v=l.length-1;_<v;_++){const y=l[_].range.getEndPosition(),w=l[_+1].range.getStartPosition();if(w.isBeforeOrEqual(y)){if(w.isBefore(y))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const u=n||t?lb._getInverseEditRanges(l):[],d=[];if(t)for(let _=0;_<l.length;_++){const v=l[_],y=u[_];if(v.isAutoWhitespaceEdit&&v.range.isEmpty())for(let w=y.startLineNumber;w<=y.endLineNumber;w++){let x="";w===y.startLineNumber&&(x=this.getLineContent(v.range.startLineNumber),Ca(x)!==-1)||d.push({lineNumber:w,oldContent:x})}}let h=null;if(n){let _=0;h=[];for(let v=0;v<l.length;v++){const y=l[v],w=u[v],x=this.getValueInRange(y.range),k=y.rangeOffset+_;_+=y.text.length-x.length,h[v]={sortIndex:y.sortIndex,identifier:y.identifier,range:w,text:x,textChange:new fr(y.rangeOffset,x,k,y.text)}}c||h.sort((v,y)=>v.sortIndex-y.sortIndex)}this._mightContainRTL=s,this._mightContainUnusualLineTerminators=r,this._mightContainNonBasicASCII=o;const g=this._doApplyEdits(l);let p=null;if(t&&d.length>0){d.sort((_,v)=>v.lineNumber-_.lineNumber),p=[];for(let _=0,v=d.length;_<v;_++){const y=d[_].lineNumber;if(_>0&&d[_-1].lineNumber===y)continue;const w=d[_].oldContent,x=this.getLineContent(y);x.length===0||x===w||Ca(x)!==-1||p.push(y)}}return this._onDidChangeContent.fire(),new $Ve(h,g,p)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,s=e[e.length-1].range,r=new J(n.startLineNumber,n.startColumn,s.endLineNumber,s.endColumn);let o=n.startLineNumber,a=n.startColumn;const l=[];for(let g=0,p=e.length;g<p;g++){const _=e[g],v=_.range;t=t||_.forceMoveMarkers,l.push(this.getValueInRange(new J(o,a,v.startLineNumber,v.startColumn))),_.text.length>0&&l.push(_.text),o=v.endLineNumber,a=v.endColumn}const c=l.join(""),[u,d,h]=Zb(c);return{sortIndex:0,identifier:e[0].identifier,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r,0),text:c,eolCount:u,firstLineLength:d,lastLineLength:h,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(lb._sortOpsDescending);const t=[];for(let n=0;n<e.length;n++){const s=e[n],r=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,l=s.range.endColumn;if(r===a&&o===l&&s.text.length===0)continue;s.text?(this._pieceTree.delete(s.rangeOffset,s.rangeLength),this._pieceTree.insert(s.rangeOffset,s.text,!0)):this._pieceTree.delete(s.rangeOffset,s.rangeLength);const c=new J(r,o,a,l);t.push({range:c,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,s){return this._pieceTree.findMatchesLineByLine(e,t,n,s)}static _getInverseEditRanges(e){const t=[];let n=0,s=0,r=null;for(let o=0,a=e.length;o<a;o++){const l=e[o];let c,u;r?r.range.endLineNumber===l.range.startLineNumber?(c=n,u=s+(l.range.startColumn-r.range.endColumn)):(c=n+(l.range.startLineNumber-r.range.endLineNumber),u=l.range.startColumn):(c=l.range.startLineNumber,u=l.range.startColumn);let d;if(l.text.length>0){const h=l.eolCount+1;h===1?d=new J(c,u,c,u+l.firstLineLength):d=new J(c,u,c+h-1,l.lastLineLength+1)}else d=new J(c,u,c,u);n=d.endLineNumber,s=d.endColumn,t.push(d),r=l}return t}static _sortOpsAscending(e,t){const n=J.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){const n=J.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}}class $Ge{constructor(e,t,n,s,r,o,a,l,c){this._chunks=e,this._bom=t,this._cr=n,this._lf=s,this._crlf=r,this._containsRTL=o,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let r=0,o=n.length;r<o;r++){const a=n[r].buffer.replace(/\r\n|\r|\n/g,t),l=vh(a);n[r]=new Hp(a,l)}const s=new lb(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:s,disposable:s}}}class ume{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&WH(e)&&(this.BOM=F7e,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=HGe(this._tmpLineStarts,e);this.chunks.push(new Hp(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=bk(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=ohe(e)))}finish(e=!0){return this._finish(),new $Ge(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=vh(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class qGe{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,n){if(e>=this._store.length)return;if(t===0){this.insert(e,n);return}else if(n===0){this.delete(e,t);return}const s=this._store.slice(0,e),r=this._store.slice(e+t),o=KGe(n,this._default);this._store=s.concat(o,r)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const n=[];for(let s=0;s<t;s++)n[s]=this._default;this._store=F4(this._store,e,n)}}function KGe(i,e){const t=[];for(let n=0;n<i;n++)t[n]=e;return t}class GGe{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class B7{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e){n.appendLineTokens(t);return}}this._tokens.push(new GGe(e,[t]))}finalize(){return this._tokens}}class YGe{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new V7(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class QGe extends YGe{constructor(e,t,n,s){super(e,t),this._textModel=n,this._languageIdCodec=s}updateTokensUntilLine(e,t){const n=this._textModel.getLanguageId();for(;;){const s=this.getFirstInvalidLine();if(!s||s.lineNumber>t)break;const r=this._textModel.getLineContent(s.lineNumber),o=qw(this._languageIdCodec,n,this.tokenizationSupport,r,!0,s.startState);e.add(s.lineNumber,o.tokens),this.store.setEndState(s.lineNumber,o.endState)}}getTokenTypeIfInsertingCharacter(e,t){const n=this.getStartState(e.lineNumber);if(!n)return 0;const s=this._textModel.getLanguageId(),r=this._textModel.getLineContent(e.lineNumber),o=r.substring(0,e.column-1)+t+r.substring(e.column-1),a=qw(this._languageIdCodec,s,this.tokenizationSupport,o,!0,n),l=new tr(a.tokens,o,this._languageIdCodec);if(l.getCount()===0)return 0;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLineWithEdit(e,t,n){const s=e.lineNumber,r=e.column,o=this.getStartState(s);if(!o)return null;const a=this._textModel.getLineContent(s),l=a.substring(0,r-1)+n+a.substring(r-1+t),c=this._textModel.getLanguageIdAtPosition(s,0),u=qw(this._languageIdCodec,c,this.tokenizationSupport,l,!0,o);return new tr(u.tokens,l,this._languageIdCodec)}hasAccurateTokensForLine(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,n){if(n<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,n),{heuristicTokens:!1};let s=this.guessStartState(t);const r=this._textModel.getLanguageId();for(let o=t;o<=n;o++){const a=this._textModel.getLineContent(o),l=qw(this._languageIdCodec,r,this.tokenizationSupport,a,!0,s);e.add(o,l.tokens),s=l.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const n=[];let s=null;for(let a=e-1;t>1&&a>=1;a--){const l=this._textModel.getLineFirstNonWhitespaceColumn(a);if(l!==0&&l<t&&(n.push(this._textModel.getLineContent(a)),t=l,s=this.getStartState(a),s))break}s||(s=this.tokenizationSupport.getInitialState()),n.reverse();const r=this._textModel.getLanguageId();let o=s;for(const a of n)o=qw(this._languageIdCodec,r,this.tokenizationSupport,a,!1,o).endState;return o}}class V7{constructor(e){this.lineCount=e,this._tokenizationStateStore=new XGe,this._invalidEndStatesLineNumbers=new ZGe,this._invalidEndStatesLineNumbers.addRange(new Mt(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new Dn("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const n=this._tokenizationStateStore.setEndState(e,t);return n&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new Mt(e+1,e+2)),n}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new Mt(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[n]=Zb(t.text);this.acceptChange(new wt(t.range.startLineNumber,t.range.endLineNumber+1),n+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new Mt(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;const n=this.getStartState(t,e);if(!n)throw new Dn("Start state must be defined");return{lineNumber:t,startState:n}}}class XGe{constructor(){this._lineEndStates=new qGe(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const n=this._lineEndStates.get(e);return n&&n.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let n=e.length;t>0&&n>0&&(n--,t--),this._lineEndStates.replace(e.startLineNumber,n,t)}}class ZGe{constructor(){this._ranges=[]}get min(){return this._ranges.length===0?null:this._ranges[0].start}delete(e){const t=this._ranges.findIndex(n=>n.contains(e));if(t!==-1){const n=this._ranges[t];n.start===e?n.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new Mt(e+1,n.endExclusive):n.endExclusive===e+1?this._ranges[t]=new Mt(n.start,e):this._ranges.splice(t,1,new Mt(n.start,e),new Mt(e+1,n.endExclusive))}}addRange(e){Mt.addRange(e,this._ranges)}addRangeAndResize(e,t){let n=0;for(;!(n>=this._ranges.length||e.start<=this._ranges[n].endExclusive);)n++;let s=n;for(;!(s>=this._ranges.length||e.endExclusive<this._ranges[s].start);)s++;const r=t-e.length;for(let o=s;o<this._ranges.length;o++)this._ranges[o]=this._ranges[o].delta(r);if(n===s){const o=new Mt(e.start,e.start+t);o.isEmpty||this._ranges.splice(n,0,o)}else{const o=Math.min(e.start,this._ranges[n].start),a=Math.max(e.endExclusive,this._ranges[s-1].endExclusive),l=new Mt(o,a+r);l.isEmpty?this._ranges.splice(n,s-n):this._ranges.splice(n,s-n,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}}function qw(i,e,t,n,s,r){let o=null;if(t)try{o=t.tokenizeEncoded(n,s,r.clone())}catch(a){Un(a)}return o||(o=IU(i.encodeLanguageId(e),r)),tr.convertToEndOffset(o.tokens,n.length),o}class JGe{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,ghe(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),n=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?Pde(n):this._beginBackgroundTokenization())};n()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new B7,n=S1.create(!1);do if(n.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){var n;const t=(n=this._tokenizerWithStateStore)==null?void 0:n.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new wt(e,t))}}class eYe{constructor(){this._onDidChangeVisibleRanges=new se,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const e=new tYe(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}class tYe{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){const n=e.map(s=>new wt(s.startLineNumber,s.endLineNumber+1));this.handleStateChange({visibleLineRanges:n,stabilized:t})}}class nYe extends be{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new so(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){ks(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}class dme extends be{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,n){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=n,this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new se),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new se),this.onDidChangeTokens=this._onDidChangeTokens.event}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}}class HJ extends dme{constructor(e,t,n,s){super(t,n,s),this._treeSitterService=e,this._tokenizationSupport=null,this._initialize()}_initialize(){const e=this.getLanguageId();(!this._tokenizationSupport||this._lastLanguageId!==e)&&(this._lastLanguageId=e,this._tokenizationSupport=J3.get(e))}getLineTokens(e){const t=this._textModel.getLineContent(e);if(this._tokenizationSupport){const n=this._tokenizationSupport.tokenizeEncoded(e,this._textModel);if(n)return new tr(n,t,this._languageIdCodec)}return tr.createEmpty(t,this._languageIdCodec)}resetTokenization(e=!0){e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]}),this._initialize()}handleDidChangeAttached(){}handleDidChangeContent(e){e.isFlush&&this.resetTokenization(!1)}forceTokenization(e){}hasAccurateTokensForLine(e){return!0}isCheapToTokenize(e){return!0}getTokenTypeIfInsertingCharacter(e,t,n){return 0}tokenizeLineWithEdit(e,t,n){return null}get hasTokens(){return this._treeSitterService.getParseResult(this._textModel)!==void 0}}const hme=nn("treeSitterParserService"),bh=new Uint32Array(0).buffer;class td{static deleteBeginning(e,t){return e===null||e===bh?e:td.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===bh)return e;const n=Fh(e),s=n[n.length-2];return td.delete(e,t,s)}static delete(e,t,n){if(e===null||e===bh||t===n)return e;const s=Fh(e),r=s.length>>>1;if(t===0&&s[s.length-2]===n)return bh;const o=tr.findIndexInTokensArray(s,t),a=o>0?s[o-1<<1]:0,l=s[o<<1];if(n<l){const g=n-t;for(let p=o;p<r;p++)s[p<<1]-=g;return e}let c,u;a!==t?(s[o<<1]=t,c=o+1<<1,u=t):(c=o<<1,u=a);const d=n-t;for(let g=o+1;g<r;g++){const p=s[g<<1]-d;p>u&&(s[c++]=p,s[c++]=s[(g<<1)+1],u=p)}if(c===s.length)return e;const h=new Uint32Array(c);return h.set(s.subarray(0,c),0),h.buffer}static append(e,t){if(t===bh)return e;if(e===bh)return t;if(e===null)return e;if(t===null)return null;const n=Fh(e),s=Fh(t),r=s.length>>>1,o=new Uint32Array(n.length+s.length);o.set(n,0);let a=n.length;const l=n[n.length-2];for(let c=0;c<r;c++)o[a++]=s[c<<1]+l,o[a++]=s[(c<<1)+1];return o.buffer}static insert(e,t,n){if(e===null||e===bh)return e;const s=Fh(e),r=s.length>>>1;let o=tr.findIndexInTokensArray(s,t);o>0&&s[o-1<<1]===t&&o--;for(let a=o;a<r;a++)s[a<<1]+=n;return e}}function Fh(i){return i instanceof Uint32Array?i:new Uint32Array(i)}class Wk{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,n){let s=null;if(t<this._len&&(s=this._lineTokens[t]),s!==null&&s!==bh)return new tr(Fh(s),n,this._languageIdCodec);const r=new Uint32Array(2);return r[0]=n.length,r[1]=UJ(this._languageIdCodec.encodeLanguageId(e)),new tr(r,n,this._languageIdCodec)}static _massageTokens(e,t,n){const s=n?Fh(n):null;if(t===0){let r=!1;if(s&&s.length>1&&(r=Qc.getLanguageId(s[1])!==e),!r)return bh}if(!s||s.length===0){const r=new Uint32Array(2);return r[0]=t,r[1]=UJ(e),r.buffer}return s[s.length-2]=t,s.byteOffset===0&&s.byteLength===s.buffer.byteLength?s.buffer:s}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const n=[];for(let s=0;s<t;s++)n[s]=null;this._lineTokens=F4(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,s,r){const o=Wk._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,s);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=o,r?!Wk._equals(a,o):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const n=Fh(e),s=Fh(t);if(n.length!==s.length)return!1;for(let r=0,o=n.length;r<o;r++)if(n[r]!==s[r])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new ue(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=td.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=td.deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let s=null;n<this._len&&(s=td.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=td.append(this._lineTokens[t],s),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const s=e.lineNumber-1;if(!(s>=this._len)){if(t===0){this._lineTokens[s]=td.insert(this._lineTokens[s],e.column-1,n);return}this._lineTokens[s]=td.deleteEnding(this._lineTokens[s],e.column-1),this._lineTokens[s]=td.insert(this._lineTokens[s],e.column-1,n),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};const n=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];let a=0,l=0,c=!1;for(let u=o.startLineNumber;u<=o.endLineNumber;u++)c?(this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),o.getLineTokens(u),!1),l=u):this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),o.getLineTokens(u),!0)&&(c=!0,a=u,l=u);c&&n.push({fromLineNumber:a,toLineNumber:l})}return{changes:n}}}function UJ(i){return(i<<0|0|0|32768|2<<24|1024)>>>0}class ZU{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const r=t[0].getRange(),o=t[t.length-1].getRange();if(!r||!o)return e;n=e.plusRange(r).plusRange(o)}let s=null;for(let r=0,o=this._pieces.length;r<o;r++){const a=this._pieces[r];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){s=s||{index:r};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(r,1),r--,o--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){s=s||{index:r};continue}const[l,c]=a.split(n);if(l.isEmpty()){s=s||{index:r};continue}c.isEmpty()||(this._pieces.splice(r,1,l,c),r++,o++,s=s||{index:r})}return s=s||{index:this._pieces.length},t.length>0&&(this._pieces=F4(this._pieces,s.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;const n=this._pieces;if(n.length===0)return t;const s=ZU._findFirstPieceWithLine(n,e),r=n[s].getLineTokens(e);if(!r)return t;const o=t.getCount(),a=r.getCount();let l=0;const c=[];let u=0,d=0;const h=(g,p)=>{g!==d&&(d=g,c[u++]=g,c[u++]=p)};for(let g=0;g<a;g++){const p=r.getStartCharacter(g),_=r.getEndCharacter(g),v=r.getMetadata(g),y=((v&1?2048:0)|(v&2?4096:0)|(v&4?8192:0)|(v&8?16384:0)|(v&16?16744448:0)|(v&32?4278190080:0))>>>0,w=~y>>>0;for(;l<o&&t.getEndOffset(l)<=p;)h(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<o&&t.getStartOffset(l)<p&&h(p,t.getMetadata(l));l<o&&t.getEndOffset(l)<_;)h(t.getEndOffset(l),t.getMetadata(l)&w|v&y),l++;if(l<o)h(_,t.getMetadata(l)&w|v&y),t.getEndOffset(l)===_&&l++;else{const x=Math.min(Math.max(0,l-1),o-1);h(_,t.getMetadata(x)&w|v&y)}}for(;l<o;)h(t.getEndOffset(l),t.getMetadata(l)),l++;return new tr(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,s=e.length-1;for(;n<s;){let r=n+Math.floor((s-n)/2);if(e[r].endLineNumber<t)n=r+1;else if(e[r].startLineNumber>t)s=r-1;else{for(;r>n&&e[r-1].startLineNumber<=t&&t<=e[r-1].endLineNumber;)r--;return r}}return n}acceptEdit(e,t,n,s,r){for(const o of this._pieces)o.acceptEdit(e,t,n,s,r)}}var iYe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},m6=function(i,e){return function(t,n){e(t,n,i)}},pL;let W7=pL=class extends nme{constructor(e,t,n,s,r,o,a){super(),this._textModel=e,this._bracketPairsTextModelPart=t,this._languageId=n,this._attachedViews=s,this._languageService=r,this._languageConfigurationService=o,this._treeSitterService=a,this._semanticTokens=new ZU(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new se),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new se),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new se),this.onDidChangeTokens=this._onDidChangeTokens.event,this._tokensDisposables=this._register(new Ze),this._register(this._languageConfigurationService.onDidChange(l=>{l.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(Le.filter(J3.onDidChange,l=>l.changedLanguages.includes(this._languageId))(()=>{this.createPreferredTokenProvider()})),this.createPreferredTokenProvider()}createGrammarTokens(){return this._register(new zJ(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews))}createTreeSitterTokens(){return this._register(new HJ(this._treeSitterService,this._languageService.languageIdCodec,this._textModel,()=>this._languageId))}createTokens(e){var n;const t=this._tokens!==void 0;(n=this._tokens)==null||n.dispose(),this._tokens=e?this.createTreeSitterTokens():this.createGrammarTokens(),this._tokensDisposables.clear(),this._tokensDisposables.add(this._tokens.onDidChangeTokens(s=>{this._emitModelTokensChangedEvent(s)})),this._tokensDisposables.add(this._tokens.onDidChangeBackgroundTokenizationState(s=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})),t&&this._tokens.resetTokenization()}createPreferredTokenProvider(){J3.get(this._languageId)?this._tokens instanceof HJ||this.createTokens(!0):this._tokens instanceof zJ||this.createTokens(!1)}handleLanguageConfigurationServiceChange(e){e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[n,s,r]=Zb(t.text);this._semanticTokens.acceptEdit(t.range,n,s,r,t.text.length>0?t.text.charCodeAt(0):0)}this._tokens.handleDidChangeContent(e)}handleDidChangeAttached(){this._tokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this._tokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new Dn("Illegal value for lineNumber")}get hasTokens(){return this._tokens.hasTokens}resetTokenization(){this._tokens.resetTokenization()}get backgroundTokenizationState(){return this._tokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this._tokens.forceTokenization(e)}hasAccurateTokensForLine(e){return this.validateLineNumber(e),this._tokens.hasAccurateTokensForLine(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this._tokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this._tokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,n){return this._tokens.getTokenTypeIfInsertingCharacter(e,t,n)}tokenizeLineWithEdit(e,t,n){return this._tokens.tokenizeLineWithEdit(e,t,n)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),n=this._textModel.getLineContent(t.lineNumber),s=this.getLineTokens(t.lineNumber),r=s.findTokenIndexAtOffset(t.column-1),[o,a]=pL._findLanguageBoundaries(s,r),l=mk(t.column,this.getLanguageConfiguration(s.getLanguageId(r)).getWordDefinition(),n.substring(o,a),o);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(r>0&&o===t.column-1){const[c,u]=pL._findLanguageBoundaries(s,r-1),d=mk(t.column,this.getLanguageConfiguration(s.getLanguageId(r-1)).getWordDefinition(),n.substring(c,u),c);if(d&&d.startColumn<=e.column&&e.column<=d.endColumn)return d}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let s=0;for(let o=t;o>=0&&e.getLanguageId(o)===n;o--)s=e.getStartOffset(o);let r=e.getLineContent().length;for(let o=t,a=e.getCount();o<a&&e.getLanguageId(o)===n;o++)r=e.getEndOffset(o);return[s,r]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const n=this._textModel.validatePosition(new ue(e,t)),s=this.getLineTokens(n.lineNumber);return s.getLanguageId(s.findTokenIndexAtOffset(n.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;const n={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(n),this._tokens.resetTokenization(),this.createPreferredTokenProvider(),this._onDidChangeLanguage.fire(n),this._onDidChangeLanguageConfiguration.fire({})}};W7=pL=iYe([m6(4,Ws),m6(5,Ud),m6(6,hme)],W7);class zJ extends dme{constructor(e,t,n,s){super(e,t,n),this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new yf),this._tokens=new Wk(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new yf),this._attachedViewStates=this._register(new LH),this._register(es.onDidChange(r=>{const o=this.getLanguageId();r.changedLanguages.indexOf(o)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(s.onDidChangeVisibleRanges(({view:r,state:o})=>{if(o){let a=this._attachedViewStates.get(r);a||(a=new nYe(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(r,a)),a.handleStateChange(o)}else this._attachedViewStates.deleteAndDispose(r)}))}resetTokenization(e=!0){var r;this._tokens.flush(),(r=this._debugBackgroundTokens)==null||r.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new V7(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const t=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const o=es.get(this.getLanguageId());if(!o)return[null,null];let a;try{a=o.getInitialState()}catch(l){return Un(l),[null,null]}return[o,a]},[n,s]=t();if(n&&s?this._tokenizer=new QGe(this._textModel.getLineCount(),n,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const o={setTokens:a=>{this.setTokens(a)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;const a=2;this._backgroundTokenizationState=a,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(a,l)=>{var u;if(!this._tokenizer)return;const c=this._tokenizer.store.getFirstInvalidEndStateLineNumber();c!==null&&a>=c&&((u=this._tokenizer)==null||u.store.setEndState(a,l))}};n&&n.createBackgroundTokenizer&&!n.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,o)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new JGe(this._tokenizer,o),this._defaultBackgroundTokenizer.handleChanges()),n!=null&&n.backgroundTokenizerShouldOnlyVerifyTokens&&n.createBackgroundTokenizer?(this._debugBackgroundTokens=new Wk(this._languageIdCodec),this._debugBackgroundStates=new V7(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,{setTokens:a=>{var l;(l=this._debugBackgroundTokens)==null||l.setMultilineTokens(a,this._textModel)},backgroundTokenizationFinished(){},setEndState:(a,l)=>{var c;(c=this._debugBackgroundStates)==null||c.setEndState(a,l)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){var e;(e=this._defaultBackgroundTokenizer)==null||e.handleChanges()}handleDidChangeContent(e){var t,n,s;if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const r of e.changes){const[o,a]=Zb(r.text);this._tokens.acceptEdit(r.range,o,a),(t=this._debugBackgroundTokens)==null||t.acceptEdit(r.range,o,a)}(n=this._debugBackgroundStates)==null||n.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),(s=this._defaultBackgroundTokenizer)==null||s.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=wt.joinMany([...this._attachedViewStates].map(([t,n])=>n.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){var o,a;if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const n=new B7,{heuristicTokens:s}=this._tokenizer.tokenizeHeuristically(n,e,t),r=this.setTokens(n.finalize());if(s)for(const l of r.changes)(o=this._backgroundTokenizer.value)==null||o.requestTokens(l.fromLineNumber,l.toLineNumber+1);(a=this._defaultBackgroundTokenizer)==null||a.checkFinished()}forceTokenization(e){var n,s;const t=new B7;(n=this._tokenizer)==null||n.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),(s=this._defaultBackgroundTokenizer)==null||s.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}getLineTokens(e){var s;const t=this._textModel.getLineContent(e),n=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const r=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!n.equals(r)&&((s=this._debugBackgroundTokenizer.value)!=null&&s.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return n}getTokenTypeIfInsertingCharacter(e,t,n){if(!this._tokenizer)return 0;const s=this._textModel.validatePosition(new ue(e,t));return this.forceTokenization(s.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(s,n)}tokenizeLineWithEdit(e,t,n){if(!this._tokenizer)return null;const s=this._textModel.validatePosition(e);return this.forceTokenization(s.lineNumber),this._tokenizer.tokenizeLineWithEdit(s,t,n)}get hasTokens(){return this._tokens.hasTokens}}class sYe{constructor(){this.changeType=1}}class pu{static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",s=0;for(const r of t)n+=e.substring(s,r.column-1),s=r.column-1,n+=r.options.content;return n+=e.substring(s),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new pu(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new pu(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,s)=>n.lineNumber===s.lineNumber?n.column===s.column?n.order-s.order:n.column-s.column:n.lineNumber-s.lineNumber),t}constructor(e,t,n,s,r){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=s,this.order=r}}class jJ{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}}class rYe{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class oYe{constructor(e,t,n,s){this.changeType=4,this.injectedTexts=s,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class aYe{constructor(){this.changeType=5}}class cb{constructor(e,t,n,s){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=s,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),s=t.versionId,r=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing;return new cb(n,s,r,o)}}class fme{constructor(e){this.changes=e}}class w0{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=cb.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=w0._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new w0(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),s=t.eol,r=t.versionId,o=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,c=e.isEolChange&&t.isEolChange;return{changes:n,eol:s,isEolChange:c,versionId:r,isUndoing:o,isRedoing:a,isFlush:l}}}var lYe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},uT=function(i,e){return function(t,n){e(t,n,i)}},Ep;function cYe(i){const e=new ume;return e.acceptChunk(i),e.finish()}function uYe(i){const e=new ume;let t;for(;typeof(t=i.read())=="string";)e.acceptChunk(t);return e.finish()}function $J(i,e){let t;return typeof i=="string"?t=cYe(i):zVe(i)?t=uYe(i):t=i,t.create(e)}let dT=0;const dYe=999,hYe=1e4;class fYe{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,n=0;do{const s=this._source.read();if(s===null)return this._eos=!0,t===0?null:e.join("");if(s.length>0&&(e[t++]=s,n+=s.length),n>=64*1024)return e.join("")}while(!0)}}const Kw=()=>{throw new Error("Invalid change accessor")};var Zc;let H7=(Zc=class extends be{static resolveOptions(e,t){if(t.detectIndentation){const n=AJ(e,t.tabSize,t.insertSpaces);return new oL({tabSize:n.tabSize,indentSize:"tabSize",insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new oL(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return Cd(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,n,s=null,r,o,a,l){super(),this._undoRedoService=r,this._languageService=o,this._languageConfigurationService=a,this.instantiationService=l,this._onWillDispose=this._register(new se),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new bYe(p=>this.handleBeforeFireDecorationsChangedEvent(p))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new se),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new se),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new se),this._eventEmitter=this._register(new yYe),this._languageSelectionListener=this._register(new yf),this._deltaDecorationCallCnt=0,this._attachedViews=new eYe,dT++,this.id="$model"+dT,this.isForSimpleWidget=n.isForSimpleWidget,typeof s>"u"||s===null?this._associatedResource=Ut.parse("inmemory://model/"+dT):this._associatedResource=s,this._attachedEditorCount=0;const{textBuffer:c,disposable:u}=$J(e,n.defaultEOL);this._buffer=c,this._bufferDisposable=u,this._options=Ep.resolveOptions(this._buffer,n);const d=typeof t=="string"?t:t.languageId;typeof t!="string"&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new vGe(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new kGe(this,this._languageConfigurationService)),this._decorationProvider=this._register(new yGe(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(W7,this,this._bracketPairs,d,this._attachedViews);const h=this._buffer.getLineCount(),g=this._buffer.getValueLengthInRange(new J(1,1,h,this._buffer.getLineLength(h)+1),0);n.largeFileOptimizations?(this._isTooLargeForTokenization=g>Ep.LARGE_FILE_SIZE_THRESHOLD||h>Ep.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=g>Ep.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=g>Ep._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=ahe(dT),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new qJ,this._commandManager=new GU(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(d),this._register(this._languageConfigurationService.onDidChange(p=>{this._bracketPairs.handleLanguageConfigurationServiceChange(p),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(p)}))}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new lb([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=be.None}_assertNotDisposed(){if(this._isDisposed)throw new Dn("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new w0(e,t)))}setValue(e){if(this._assertNotDisposed(),e==null)throw V4();const{textBuffer:t,disposable:n}=$J(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,s,r,o,a,l){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:s}],eol:this._buffer.getEOL(),isEolChange:l,versionId:this.getVersionId(),isUndoing:r,isRedoing:o,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),s=this.getValueLengthInRange(n),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new qJ,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new cb([new sYe],this._versionId,!1,!1),this._createContentChanged2(new J(1,1,r,o),0,s,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),s=this.getValueLengthInRange(n),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new cb([new aYe],this._versionId,!1,!1),this._createContentChanged2(new J(1,1,r,o),0,s,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,s=t.length;n<s;n++){const r=t[n],o=r.range,a=r.cachedAbsoluteStart-r.start,l=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),c=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);r.cachedAbsoluteStart=l,r.cachedAbsoluteEnd=c,r.cachedVersionId=e,r.start=l-a,r.end=c-a,Am(r)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let s=1;s<=n;s++){const r=this._buffer.getLineLength(s);r>=hYe?t+=r:e+=r}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,n=typeof e.indentSize<"u"?e.indentSize:this._options.originalIndentSize,s=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,r=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new oL({tabSize:t,indentSize:n,insertSpaces:s,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:r,bracketPairColorizationOptions:o});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const n=AJ(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),Yge(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(rhe.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(n=>({range:n.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Dn("Operation would exceed heap memory limits");const n=this.getFullModelRange(),s=this.getValueInRange(n,e);return t?this._buffer.getBOM()+s:s}createSnapshot(e=!1){return new fYe(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),s=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+s:s}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Dn("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Dn("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Dn("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Dn("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Dn("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Dn("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,s=e.startColumn;let r=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),o=Math.floor(typeof s=="number"&&!isNaN(s)?s:1);if(r<1)r=1,o=1;else if(r>t)r=t,o=this.getLineMaxColumn(r);else if(o<=1)o=1;else{const d=this.getLineMaxColumn(r);o>=d&&(o=d)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),u=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,u=1;else if(c>t)c=t,u=this.getLineMaxColumn(c);else if(u<=1)u=1;else{const d=this.getLineMaxColumn(c);u>=d&&(u=d)}return n===r&&s===o&&a===c&&l===u&&e instanceof J&&!(e instanceof Gn)?e:new J(r,o,c,u)}_isValidPosition(e,t,n){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const s=this._buffer.getLineCount();if(e>s)return!1;if(t===1)return!0;const r=this.getLineMaxColumn(e);if(t>r)return!1;if(n===1){const o=this._buffer.getLineCharCode(e,t-2);if(As(o))return!1}return!0}_validatePosition(e,t,n){const s=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),r=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),o=this._buffer.getLineCount();if(s<1)return new ue(1,1);if(s>o)return new ue(o,this.getLineMaxColumn(o));if(r<=1)return new ue(s,1);const a=this.getLineMaxColumn(s);if(r>=a)return new ue(s,a);if(n===1){const l=this._buffer.getLineCharCode(s,r-2);if(As(l))return new ue(s,r-1)}return new ue(s,r)}validatePosition(e){return this._assertNotDisposed(),e instanceof ue&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const n=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(n,s,0)||!this._isValidPosition(r,o,0))return!1;if(t===1){const a=s>1?this._buffer.getLineCharCode(n,s-2):0,l=o>1&&o<=this._buffer.getLineLength(r)?this._buffer.getLineCharCode(r,o-2):0,c=As(a),u=As(l);return!c&&!u}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof J&&!(e instanceof Gn)&&this._isValidRange(e,1))return e;const n=this._validatePosition(e.startLineNumber,e.startColumn,0),s=this._validatePosition(e.endLineNumber,e.endColumn,0),r=n.lineNumber,o=n.column,a=s.lineNumber,l=s.column;{const c=o>1?this._buffer.getLineCharCode(r,o-2):0,u=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,d=As(c),h=As(u);return!d&&!h?new J(r,o,a,l):r===a&&o===l?new J(r,o-1,a,l-1):d&&h?new J(r,o-1,a,l+1):d?new J(r,o-1,a,l):new J(r,o,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new J(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,s){return this._buffer.findMatchesLineByLine(e,t,n,s)}findMatches(e,t,n,s,r,o,a=dYe){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(d=>J.isIRange(d))&&(l=t.map(d=>this.validateRange(d)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((d,h)=>d.startLineNumber-h.startLineNumber||d.startColumn-h.startColumn);const c=[];c.push(l.reduce((d,h)=>J.areIntersecting(d,h)?d.plusRange(h):(c.push(d),h)));let u;if(!n&&e.indexOf(`
`)<0){const h=new L_(e,n,s,r).parseSearchRequest();if(!h)return[];u=g=>this.findMatchesLineByLine(g,h,o,a)}else u=d=>jE.findMatches(this,new L_(e,n,s,r),d,o,a);return c.map(u).reduce((d,h)=>d.concat(h),[])}findNextMatch(e,t,n,s,r,o){this._assertNotDisposed();const a=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){const c=new L_(e,n,s,r).parseSearchRequest();if(!c)return null;const u=this.getLineCount();let d=new J(a.lineNumber,a.column,u,this.getLineMaxColumn(u)),h=this.findMatchesLineByLine(d,c,o,1);return jE.findNextMatch(this,new L_(e,n,s,r),a,o),h.length>0||(d=new J(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),h=this.findMatchesLineByLine(d,c,o,1),h.length>0)?h[0]:null}return jE.findNextMatch(this,new L_(e,n,s,r),a,o)}findPreviousMatch(e,t,n,s,r,o){this._assertNotDisposed();const a=this.validatePosition(t);return jE.findPreviousMatch(this,new L_(e,n,s,r),a,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof KO?e:new KO(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n,s){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n,s)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n,s){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const r=t.map(a=>({range:this.validateRange(a.range),text:a.text}));let o=!0;if(e)for(let a=0,l=e.length;a<l;a++){const c=e[a];let u=!1;for(let d=0,h=r.length;d<h;d++){const g=r[d].range,p=g.startLineNumber>c.endLineNumber,_=c.startLineNumber>g.endLineNumber;if(!p&&!_){u=!0;break}}if(!u){o=!1;break}}if(o)for(let a=0,l=this._trimAutoWhitespaceLines.length;a<l;a++){const c=this._trimAutoWhitespaceLines[a],u=this.getLineMaxColumn(c);let d=!0;for(let h=0,g=r.length;h<g;h++){const p=r[h].range,_=r[h].text;if(!(c<p.startLineNumber||c>p.endLineNumber)&&!(c===p.startLineNumber&&p.startColumn===u&&p.isEmpty()&&_&&_.length>0&&_.charAt(0)===`
`)&&!(c===p.startLineNumber&&p.startColumn===1&&p.isEmpty()&&_&&_.length>0&&_.charAt(_.length-1)===`
`)){d=!1;break}}if(d){const h=new J(c,1,c,u);t.push(new KO(null,h,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n,s)}_applyUndo(e,t,n,s){const r=e.map(o=>{const a=this.getPositionAt(o.newPosition),l=this.getPositionAt(o.newEnd);return{range:new J(a.lineNumber,a.column,l.lineNumber,l.column),text:o.oldText}});this._applyUndoRedoEdits(r,t,!0,!1,n,s)}_applyRedo(e,t,n,s){const r=e.map(o=>{const a=this.getPositionAt(o.oldPosition),l=this.getPositionAt(o.oldEnd);return{range:new J(a.lineNumber,a.column,l.lineNumber,l.column),text:o.newText}});this._applyUndoRedoEdits(r,t,!1,!0,n,s)}_applyUndoRedoEdits(e,t,n,s,r,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=s,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(r)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),s=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),r=this._buffer.getLineCount(),o=s.changes;if(this._trimAutoWhitespaceLines=s.trimAutoWhitespaceLineNumbers,o.length!==0){for(let c=0,u=o.length;c<u;c++){const d=o[c];this._decorationsTree.acceptReplace(d.rangeOffset,d.rangeLength,d.text.length,d.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=n;for(let c=0,u=o.length;c<u;c++){const d=o[c],[h]=Zb(d.text);this._onDidChangeDecorations.fire();const g=d.range.startLineNumber,p=d.range.endLineNumber,_=p-g,v=h,y=Math.min(_,v),w=v-_,x=r-l-w+g,k=x,T=x+v,R=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new ue(k,1)),this.getOffsetAt(new ue(T,this.getLineMaxColumn(T))),0),L=pu.fromDecorations(R),I=new bf(L);for(let A=y;A>=0;A--){const B=g+A,V=x+A;I.takeFromEndWhile(W=>W.lineNumber>V);const U=I.takeFromEndWhile(W=>W.lineNumber===V);a.push(new jJ(B,this.getLineContent(V),U))}if(y<_){const A=g+y;a.push(new rYe(A+1,p))}if(y<v){const A=new bf(L),B=g+y,V=v-y,U=r-l-V+B+1,W=[],G=[];for(let Z=0;Z<V;Z++){const ne=U+Z;G[Z]=this.getLineContent(ne),A.takeWhile(fe=>fe.lineNumber<ne),W[Z]=A.takeWhile(fe=>fe.lineNumber===ne)}a.push(new oYe(B+1,g+v,G,W))}l+=w}this._emitContentChangedEvent(new cb(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return s.reverseEdits===null?void 0:s.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const n=Array.from(e).map(s=>new jJ(s,this.getLineContent(s),this._getInjectedTextInLine(s)));this._onDidChangeInjectedText.fire(new fme(n))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const n={addDecoration:(r,o)=>this._deltaDecorationsImpl(e,[],[{range:r,options:o}])[0],changeDecoration:(r,o)=>{this._changeDecorationImpl(r,o)},changeDecorationOptions:(r,o)=>{this._changeDecorationOptionsImpl(r,GJ(o))},removeDecoration:r=>{this._deltaDecorationsImpl(e,[r],[])},deltaDecorations:(r,o)=>r.length===0&&o.length===0?[]:this._deltaDecorationsImpl(e,r,o)};let s=null;try{s=t(n)}catch(r){Un(r)}return n.addDecoration=Kw,n.changeDecoration=Kw,n.changeDecorationOptions=Kw,n.removeDecoration=Kw,n.deltaDecorations=Kw,s}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),Un(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const s=e?this._decorations[e]:null;if(!s)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:KJ[n]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(s),delete this._decorations[s.id],null;const r=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),a=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);return this._decorationsTree.delete(s),s.reset(this.getVersionId(),o,a,r),s.setOptions(KJ[n]),this._decorationsTree.insert(s),s.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,s=t.length;n<s;n++){const r=t[n];this._decorationsTree.delete(r),delete this._decorations[r.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,s=!1,r=!1){const o=this.getLineCount(),a=Math.min(o,Math.max(1,e)),l=Math.min(o,Math.max(1,t)),c=this.getLineMaxColumn(l),u=new J(a,1,l,c),d=this._getDecorationsInRange(u,n,s,r);return V3(d,this._decorationProvider.getDecorationsInRange(u,n,s)),d}getDecorationsInRange(e,t=0,n=!1,s=!1,r=!1){const o=this.validateRange(e),a=this._getDecorationsInRange(o,t,n,r);return V3(a,this._decorationProvider.getDecorationsInRange(o,t,n,s)),a}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),s=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return pu.fromDecorations(s).filter(r=>r.lineNumber===e)}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,n,s){const r=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),o=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,r,o,t,n,s)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;if(n.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(n.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const s=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),o=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),r,o,s),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(s.startLineNumber)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const s=!!(n.options.overviewRuler&&n.options.overviewRuler.color),r=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){const l=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.endLineNumber)}if(n.options.before||t.before){const l=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.startLineNumber)}const o=s!==r,a=mYe(t)!==_L(n);o||a?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n,s=!1){const r=this.getVersionId(),o=t.length;let a=0;const l=n.length;let c=0;this._onDidChangeDecorations.beginDeferredEmit();try{const u=new Array(l);for(;a<o||c<l;){let d=null;if(a<o){do d=this._decorations[t[a++]];while(!d&&a<o);if(d){if(d.options.after){const h=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.endLineNumber)}if(d.options.before){const h=this._decorationsTree.getNodeRange(this,d);this._onDidChangeDecorations.recordLineAffectedByInjectedText(h.startLineNumber)}this._decorationsTree.delete(d),s||this._onDidChangeDecorations.checkAffectedAndFire(d.options)}}if(c<l){if(!d){const y=++this._lastDecorationId,w=`${this._instanceId};${y}`;d=new ome(w,0,0),this._decorations[w]=d}const h=n[c],g=this._validateRangeRelaxedNoAllocations(h.range),p=GJ(h.options),_=this._buffer.getOffsetAt(g.startLineNumber,g.startColumn),v=this._buffer.getOffsetAt(g.endLineNumber,g.endColumn);d.ownerId=e,d.reset(r,_,v,g),d.setOptions(p),d.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.endLineNumber),d.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.startLineNumber),s||this._onDidChangeDecorations.checkAffectedAndFire(p),this._decorationsTree.insert(d),u[c]=d.id,c++}else d&&delete this._decorations[d.id]}return u}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){typeof e=="string"?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return gYe(this.getLineContent(e))+1}},Ep=Zc,Zc._MODEL_SYNC_LIMIT=50*1024*1024,Zc.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024,Zc.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3,Zc.LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024,Zc.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Ir.tabSize,indentSize:Ir.indentSize,insertSpaces:Ir.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Ir.trimAutoWhitespace,largeFileOptimizations:Ir.largeFileOptimizations,bracketPairColorizationOptions:Ir.bracketPairColorizationOptions},Zc);H7=Ep=lYe([uT(4,uU),uT(5,Ws),uT(6,Ud),uT(7,Pn)],H7);function gYe(i){let e=0;for(const t of i)if(t===" "||t==="	")e++;else break;return e}function p6(i){return!!(i.options.overviewRuler&&i.options.overviewRuler.color)}function mYe(i){return!!i.after||!!i.before}function _L(i){return!!i.options.after||!!i.options.before}class qJ{constructor(){this._decorationsTree0=new h6,this._decorationsTree1=new h6,this._injectedTextDecorationsTree=new h6}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,s,r,o){const a=e.getVersionId(),l=this._intervalSearch(t,n,s,r,a,o);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,n,s,r,o){const a=this._decorationsTree0.intervalSearch(e,t,n,s,r,o),l=this._decorationsTree1.intervalSearch(e,t,n,s,r,o),c=this._injectedTextDecorationsTree.intervalSearch(e,t,n,s,r,o);return a.concat(l).concat(c)}getInjectedTextInInterval(e,t,n,s){const r=e.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(t,n,s,!1,r,!1);return this._ensureNodesHaveRanges(e,o).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const n=e.getVersionId(),s=this._injectedTextDecorationsTree.search(t,!1,n,!1);return this._ensureNodesHaveRanges(e,s).filter(r=>r.options.showIfCollapsed||!r.range.isEmpty())}getAll(e,t,n,s,r){const o=e.getVersionId(),a=this._search(t,n,s,o,r);return this._ensureNodesHaveRanges(e,a)}_search(e,t,n,s,r){if(n)return this._decorationsTree1.search(e,t,s,r);{const o=this._decorationsTree0.search(e,t,s,r),a=this._decorationsTree1.search(e,t,s,r),l=this._injectedTextDecorationsTree.search(e,t,s,r);return o.concat(a).concat(l)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),s=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(s)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){_L(e)?this._injectedTextDecorationsTree.insert(e):p6(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){_L(e)?this._injectedTextDecorationsTree.delete(e):p6(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){_L(e)?this._injectedTextDecorationsTree.resolveNode(e,t):p6(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,s){this._decorationsTree0.acceptReplace(e,t,n,s),this._decorationsTree1.acceptReplace(e,t,n,s),this._injectedTextDecorationsTree.acceptReplace(e,t,n,s)}}function $u(i){return i.replace(/[^a-z0-9\-_]/gi," ")}class gme{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class pYe extends gme{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:iD.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const n=e?t.getColor(e.id):null;return n?n.toString():""}}class _Ye{constructor(e){this.position=(e==null?void 0:e.position)??Dm.Center,this.persistLane=e==null?void 0:e.persistLane}}class vYe extends gme{constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?ke.fromHex(e):t.getColor(e.id)}}class Hk{static from(e){return e instanceof Hk?e:new Hk(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class Ss{static register(e){return new Ss(e)}static createDynamic(e){return new Ss(e)}constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?$u(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?$u(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new pYe(e.overviewRuler):null,this.minimap=e.minimap?new vYe(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new _Ye(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?$u(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?$u(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?$u(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?I7e(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?$u(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?$u(e.marginClassName):null,this.inlineClassName=e.inlineClassName?$u(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?$u(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?$u(e.afterContentClassName):null,this.after=e.after?Hk.from(e.after):null,this.before=e.before?Hk.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1}}Ss.EMPTY=Ss.register({description:"empty"});const KJ=[Ss.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Ss.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Ss.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Ss.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function GJ(i){return i instanceof Ss?i:Ss.createDynamic(i)}class bYe extends be{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new se),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),(e=this._affectedInjectedTextLines)==null||e.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){var t,n;this._affectsMinimap||(this._affectsMinimap=!!((t=e.minimap)!=null&&t.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!((n=e.overviewRuler)!=null&&n.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!e.glyphMarginClassName),this._affectsLineNumber||(this._affectsLineNumber=!!e.lineNumberClassName),this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class yYe extends be{constructor(){super(),this._fastEmitter=this._register(new se),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new se),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}var wYe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},hT=function(i,e){return function(t,n){e(t,n,i)}},$_;function _p(i){return i.toString()}let CYe=class{constructor(e,t,n){this.model=e,this._modelEventListeners=new Ze,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(s=>n(e,s)))}dispose(){this._modelEventListeners.dispose()}};const SYe=ia||rn?1:2;class kYe{constructor(e,t,n,s,r,o,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=s,this.heapSize=r,this.sha1=o,this.versionId=a,this.alternativeVersionId=l}}var T0;let U7=(T0=class extends be{constructor(e,t,n,s){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=n,this._instantiationService=s,this._onModelAdded=this._register(new se),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new se),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new se),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(r=>this._updateModelOptions(r))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){var h;let n=Ir.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const g=parseInt(e.editor.tabSize,10);isNaN(g)||(n=g),n<1&&(n=1)}let s="tabSize";if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const g=parseInt(e.editor.indentSize,10);isNaN(g)||(s=Math.max(g,1))}let r=Ir.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(r=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let o=SYe;const a=e.eol;a===`\r
`?o=2:a===`
`&&(o=1);let l=Ir.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(l=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let c=Ir.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(c=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let u=Ir.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(u=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let d=Ir.bracketPairColorizationOptions;return(h=e.editor)!=null&&h.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(d={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:n,indentSize:s,insertSpaces:r,detectIndentation:c,defaultEOL:o,trimAutoWhitespace:l,largeFileOptimizations:u,bracketPairColorizationOptions:d}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&typeof n=="string"&&n!=="auto"?n:lc===3||lc===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,n){const s=typeof e=="string"?e:e.languageId;let r=this._modelCreationOptionsByLanguageAndResource[s+t];if(!r){const o=this._configurationService.getValue("editor",{overrideIdentifier:s,resource:t}),a=this._getEOL(t,s);r=$_._readModelOptions({editor:o,eol:a},n),this._modelCreationOptionsByLanguageAndResource[s+t]=r}return r}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const n=Object.keys(this._models);for(let s=0,r=n.length;s<r;s++){const o=n[s],a=this._models[o],l=a.model.getLanguageId(),c=a.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:l,resource:c})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:l,resource:c}))continue;const u=t[l+c],d=this.getCreationOptions(l,c,a.model.isForSimpleWidget);$_._setModelOptionsForModel(a.model,d,u)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&wa(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(_p(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(_p(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(_p(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(n=>{n.sharesUndoRedoStack||t.push(n)}),t.sort((n,s)=>n.time-s.time);t.length>0&&this._disposedModelsHeapSize>e;){const n=t.shift();this._removeDisposedModel(n.uri),n.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,s){const r=this.getCreationOptions(t,n,s),o=this._instantiationService.createInstance(H7,e,t,r,n);if(n&&this._disposedModels.has(_p(n))){const c=this._removeDisposedModel(n),u=this._undoRedoService.getElements(n),d=this._getSHA1Computer(),h=d.canComputeSHA1(o)?d.computeSHA1(o)===c.sha1:!1;if(h||c.sharesUndoRedoStack){for(const g of u.past)Lh(g)&&g.matchesResource(n)&&g.setModel(o);for(const g of u.future)Lh(g)&&g.matchesResource(n)&&g.setModel(o);this._undoRedoService.setElementsValidFlag(n,!0,g=>Lh(g)&&g.matchesResource(n)),h&&(o._overwriteVersionId(c.versionId),o._overwriteAlternativeVersionId(c.alternativeVersionId),o._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=_p(o.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new CYe(o,c=>this._onWillDispose(c),(c,u)=>this._onDidChangeLanguage(c,u));return this._models[a]=l,l}createModel(e,t,n,s=!1){let r;return t?r=this._createModelData(e,t,n,s):r=this._createModelData(e,gc,n,s),this._onModelAdded.fire(r.model),r.model}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,s=t.length;n<s;n++){const r=t[n];e.push(this._models[r].model)}return e}getModel(e){const t=_p(e),n=this._models[t];return n?n.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===Wt.file||e.scheme===Wt.vscodeRemote||e.scheme===Wt.vscodeUserData||e.scheme===Wt.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=_p(e.uri),n=this._models[t],s=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let r=!1,o=0;if(s||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const c=this._undoRedoService.getElements(e.uri);if(c.past.length>0||c.future.length>0){for(const u of c.past)Lh(u)&&u.matchesResource(e.uri)&&(r=!0,o+=u.heapSize(e.uri),u.setModel(e.uri));for(const u of c.future)Lh(u)&&u.matchesResource(e.uri)&&(r=!0,o+=u.heapSize(e.uri),u.setModel(e.uri))}}const a=$_.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,l=this._getSHA1Computer();if(r)if(!s&&(o>a||!l.canComputeSHA1(e))){const c=n.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}else this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,c=>Lh(c)&&c.matchesResource(e.uri)),this._insertDisposedModel(new kYe(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),s,o,l.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!s){const c=n.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,s=e.getLanguageId(),r=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(s,e.uri,e.isForSimpleWidget);$_._setModelOptionsForModel(e,o,r),this._onModelModeChanged.fire({model:e,oldLanguageId:n})}_getSHA1Computer(){return new z7}},$_=T0,T0.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024,T0);U7=$_=wYe([hT(0,Oi),hT(1,ffe),hT(2,uU),hT(3,Pn)],U7);const tR=class tR{canComputeSHA1(e){return e.getValueLength()<=tR.MAX_MODEL_SIZE}computeSHA1(e){const t=new o8,n=e.createSnapshot();let s;for(;s=n.read();)t.update(s);return t.digest()}};tR.MAX_MODEL_SIZE=10*1024*1024;let z7=tR;var j7;(function(i){i[i.PRESERVE=0]="PRESERVE",i[i.LAST=1]="LAST"})(j7||(j7={}));const mme={Quickaccess:"workbench.contributions.quickaccess"};class xYe{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),Dt(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return bH([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}}ir.add(mme.Quickaccess,new xYe);const EYe={ctrlCmd:!1,alt:!1};var ry;(function(i){i[i.Blur=1]="Blur",i[i.Gesture=2]="Gesture",i[i.Other=3]="Other"})(ry||(ry={}));var nd;(function(i){i[i.NONE=0]="NONE",i[i.FIRST=1]="FIRST",i[i.SECOND=2]="SECOND",i[i.LAST=3]="LAST"})(nd||(nd={}));var Jn;(function(i){i[i.First=1]="First",i[i.Second=2]="Second",i[i.Last=3]="Last",i[i.Next=4]="Next",i[i.Previous=5]="Previous",i[i.NextPage=6]="NextPage",i[i.PreviousPage=7]="PreviousPage",i[i.NextSeparator=8]="NextSeparator",i[i.PreviousSeparator=9]="PreviousSeparator"})(Jn||(Jn={}));var MD;(function(i){i[i.Title=1]="Title",i[i.Inline=2]="Inline"})(MD||(MD={}));const xA=nn("quickInputService");var TYe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},YJ=function(i,e){return function(t,n){e(t,n,i)}};let $7=class extends be{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=ir.as(mme.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){var p,_;const[s,r]=this.getOrInstantiateProvider(e,n==null?void 0:n.enabledProviderPrefixes),o=this.visibleQuickAccess,a=o==null?void 0:o.descriptor;if(o&&r&&a===r){e!==r.prefix&&!(n!=null&&n.preserveValue)&&(o.picker.value=e),this.adjustValueSelection(o.picker,r,n);return}if(r&&!(n!=null&&n.preserveValue)){let v;if(o&&a&&a!==r){const y=o.value.substr(a.prefix.length);y&&(v=`${r.prefix}${y}`)}if(!v){const y=s==null?void 0:s.defaultFilterValue;y===j7.LAST?v=this.lastAcceptedPickerValues.get(r):typeof y=="string"&&(v=`${r.prefix}${y}`)}typeof v=="string"&&(e=v)}const l=(p=o==null?void 0:o.picker)==null?void 0:p.valueSelection,c=(_=o==null?void 0:o.picker)==null?void 0:_.value,u=new Ze,d=u.add(this.quickInputService.createQuickPick({useSeparators:!0}));d.value=e,this.adjustValueSelection(d,r,n),d.placeholder=(n==null?void 0:n.placeholder)??(r==null?void 0:r.placeholder),d.quickNavigate=n==null?void 0:n.quickNavigateConfiguration,d.hideInput=!!d.quickNavigate&&!o,(typeof(n==null?void 0:n.itemActivation)=="number"||n!=null&&n.quickNavigateConfiguration)&&(d.itemActivation=(n==null?void 0:n.itemActivation)??nd.SECOND),d.contextKey=r==null?void 0:r.contextKey,d.filterValue=v=>v.substring(r?r.prefix.length:0);let h;t&&(h=new mhe,u.add(Le.once(d.onWillAccept)(v=>{v.veto(),d.hide()}))),u.add(this.registerPickerListeners(d,s,r,e,n));const g=u.add(new Wy);if(s&&u.add(s.provide(d,g.token,n==null?void 0:n.providerOptions)),Le.once(d.onDidHide)(()=>{d.selectedItems.length===0&&g.cancel(),u.dispose(),h==null||h.complete(d.selectedItems.slice(0))}),d.show(),l&&c===e&&(d.valueSelection=l),t)return h==null?void 0:h.p}adjustValueSelection(e,t,n){let s;n!=null&&n.preserveValue?s=[e.value.length,e.value.length]:s=[(t==null?void 0:t.prefix.length)??0,e.value.length],e.valueSelection=s}registerPickerListeners(e,t,n,s,r){const o=new Ze,a=this.visibleQuickAccess={picker:e,descriptor:n,value:s};return o.add(Dt(()=>{a===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),o.add(e.onDidChangeValue(l=>{const[c]=this.getOrInstantiateProvider(l,r==null?void 0:r.enabledProviderPrefixes);c!==t?this.show(l,{enabledProviderPrefixes:r==null?void 0:r.enabledProviderPrefixes,preserveValue:!0,providerOptions:r==null?void 0:r.providerOptions}):a.value=l})),n&&o.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),o}getOrInstantiateProvider(e,t){const n=this.registry.getQuickAccessProvider(e);if(!n||t&&!(t!=null&&t.includes(n.prefix)))return[void 0,void 0];let s=this.mapProviderToDescriptor.get(n);return s||(s=this.instantiationService.createInstance(n.ctor),this.mapProviderToDescriptor.set(n,s)),[s,n]}};$7=TYe([YJ(0,xA),YJ(1,Pn)],$7);class EA extends Af{constructor(e){super(),this._onChange=this._register(new se),this.onChange=this._onChange.event,this._onKeyDown=this._register(new se),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...dn.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(zd().setupManagedHover(e.hoverDelegate??zl("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault(),n.stopPropagation();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}var LYe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class pme{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}}LYe([Fi],pme.prototype,"toString",null);const IYe=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function DYe(i){const e=[];let t=0,n;for(;n=IYe.exec(i);){n.index-t>0&&e.push(i.substring(t,n.index));const[,s,r,,o]=n;o?e.push({label:s,href:r,title:o}):e.push({label:s,href:r}),t=n.index+n[0].length}return t<i.length&&e.push(i.substring(t)),new pme(e)}const _6={},NYe=new hge("quick-input-button-icon-");function RYe(i){if(!i)return;let e;const t=i.dark.toString();return _6[t]?e=_6[t]:(e=NYe.nextId(),c8(`.${e}, .hc-light .${e}`,`background-image: ${Cf(i.light||i.dark)}`),c8(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${Cf(i.dark)}`),_6[t]=e),e}function oS(i,e,t){let n=i.iconClass||RYe(i.iconPath);return i.alwaysVisible&&(n=n?`${n} always-visible`:"always-visible"),{id:e,label:"",tooltip:i.tooltip||"",class:n,enabled:!0,run:t}}function AYe(i,e,t){ko(e);const n=DYe(i);let s=0;for(const r of n.nodes)if(typeof r=="string")e.append(..._0(r));else{let o=r.title;!o&&r.href.startsWith("command:")?o=S("executeCommand","Click to execute command '{0}'",r.href.substring(8)):o||(o=r.href);const a=ht("a",{href:r.href,title:o,tabIndex:s++},r.label);a.style.textDecoration="underline";const l=g=>{zFe(g)&&Xt.stop(g,!0),t.callback(r.href)},c=t.disposables.add(new qt(a,De.CLICK)).event,u=t.disposables.add(new qt(a,De.KEY_DOWN)).event,d=Le.chain(u,g=>g.filter(p=>{const _=new hi(p);return _.equals(10)||_.equals(3)}));t.disposables.add(To.addTarget(a));const h=t.disposables.add(new qt(a,ei.Tap)).event;Le.any(c,h,d)(l,null,t.disposables),e.appendChild(a)}}var PYe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},QJ=function(i,e){return function(t,n){e(t,n,i)}};const _me="inQuickInput",MYe=new et(_me,!1,S("inQuickInput","Whether keyboard focus is inside the quick input control")),OYe=En.has(_me),vme="quickInputType",FYe=new et(vme,void 0,S("quickInputType","The type of the currently visible quick input")),bme="cursorAtEndOfQuickInputBox",BYe=new et(bme,!1,S("cursorAtEndOfQuickInputBox","Whether the cursor in the quick input is at the end of the input box")),VYe=En.has(bme),q7={iconClass:dn.asClassName(Ke.quickInputBack),tooltip:S("quickInput.back","Back")},nR=class nR extends be{constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._leftButtons=[],this._rightButtons=[],this._inlineButtons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=nR.noPromptMessage,this._severity=fs.Ignore,this.onDidTriggerButtonEmitter=this._register(new se),this.onDidHideEmitter=this._register(new se),this.onWillHideEmitter=this._register(new se),this.onDisposeEmitter=this._register(new se),this.visibleDisposables=this._register(new Ze),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!X0;this._ignoreFocusOut=e&&!X0,t&&this.update()}get titleButtons(){return this._leftButtons.length?[...this._leftButtons,this._rightButtons]:this._rightButtons}get buttons(){return[...this._leftButtons,...this._rightButtons,...this._inlineButtons]}set buttons(e){this._leftButtons=e.filter(t=>t===q7),this._rightButtons=e.filter(t=>t!==q7&&t.location!==MD.Inline),this._inlineButtons=e.filter(t=>t.location===MD.Inline),this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=ry.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}willHide(e=ry.Other){this.onWillHideEmitter.fire({reason:e})}update(){var s;if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?ko(this.ui.widget,this._widget):ko(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new x1,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const r=this._leftButtons.map((l,c)=>oS(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.leftActionBar.push(r,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const o=this._rightButtons.map((l,c)=>oS(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.rightActionBar.push(o,{icon:!0,label:!1}),this.ui.inlineActionBar.clear();const a=this._inlineButtons.map((l,c)=>oS(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.inlineActionBar.push(a,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const r=((s=this.toggles)==null?void 0:s.filter(o=>o instanceof EA))??[];this.ui.inputBox.toggles=r}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const n=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==n&&(this._lastValidationMessage=n,ko(this.ui.message),AYe(n,this.ui.message,{callback:r=>{this.ui.linkOpenerDelegate(r)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?S("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==fs.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}};nR.noPromptMessage=S("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");let OD=nR;const iR=class iR extends OD{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new se),this.onWillAcceptEmitter=this._register(new se),this.onDidAcceptEmitter=this._register(new se),this.onDidCustomEmitter=this._register(new se),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=nd.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new se),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new se),this.onDidTriggerItemButtonEmitter=this._register(new se),this.onDidTriggerSeparatorButtonEmitter=this._register(new se),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this._focusEventBufferer=new M2,this.type="quickPick",this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?EYe:this.ui.keyMods}get valueSelection(){const e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(Jn.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this._focusEventBufferer.wrapEvent(this.ui.list.onDidChangeFocus,(e,t)=>t)(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&ks(e,this._activeItems,(t,n)=>t===n)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&ks(e,this._selectedItems,(n,s)=>n===s)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(YH(t)&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||!this.visible||this.selectedItemsToConfirm!==this._selectedItems&&ks(e,this._selectedItems,(t,n)=>t===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return ge(this.ui.container,De.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new hi(e),n=t.keyCode;this._quickNavigate.keybindings.some(o=>{const a=o.getChords();return a.length>1?!1:a[0].shiftKey&&n===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a[0].altKey&&n===6||a[0].ctrlKey&&n===5||a[0].metaKey&&n===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,n={title:!!this.title||!!this.step||!!this.titleButtons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let s=this.ariaLabel;!s&&n.inputBox&&(s=this.placeholder||iR.DEFAULT_ARIA_LABEL,this.title&&(s+=` - ${this.title}`)),this.ui.list.ariaLabel!==s&&(this.ui.list.ariaLabel=s??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated&&(this.itemsUpdated=!1,this._focusEventBufferer.bufferEvents(()=>{switch(this.ui.list.setElements(this.items),this.ui.list.shouldLoop=!this.canSelectMany,this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this._itemActivation){case nd.NONE:this._itemActivation=nd.FIRST;break;case nd.SECOND:this.ui.list.focus(Jn.Second),this._itemActivation=nd.FIRST;break;case nd.LAST:this.ui.list.focus(Jn.Last),this._itemActivation=nd.FIRST;break;default:this.trySelectFirst();break}})),this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(Jn.First)),this.keepScrollPosition&&(this.scrollTop=e)}focus(e){this.ui.list.focus(e),this.canSelectMany&&this.ui.list.domFocus()}accept(e){e&&!this._canAcceptInBackground||this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(e??!1))}};iR.DEFAULT_ARIA_LABEL=S("quickInputBox.ariaLabel","Type to narrow down results.");let FD=iR,WYe=class extends OD{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new se),this.onDidAcceptEmitter=this._register(new se),this.type="inputBox",this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}},K7=class extends Dk{constructor(e,t){super("element",!1,n=>this.getOverrideOptions(n),e,t)}getOverrideOptions(e){const t=(Zs(e.content)?e.content.textContent??"":typeof e.content=="string"?e.content:e.content.value).includes(`
`);return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:t,skipFadeInAnimation:!0}}}};K7=PYe([QJ(0,Oi),QJ(1,K2)],K7);ke.white.toString(),ke.white.toString();class G7 extends be{get onDidClick(){return this._onDidClick.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new se),this._onDidEscape=this._register(new se),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const n=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,s=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=s||"",this._element.style.backgroundColor=n||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof t.title=="string"&&this.setTitle(t.title),typeof t.ariaLabel=="string"&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(To.addTarget(this._element)),[De.CLICK,ei.Tap].forEach(r=>{this._register(ge(this._element,r,o=>{if(!this.enabled){Xt.stop(o);return}this._onDidClick.fire(o)}))}),this._register(ge(this._element,De.KEY_DOWN,r=>{const o=new hi(r);let a=!1;this.enabled&&(o.equals(3)||o.equals(10))?(this._onDidClick.fire(r),a=!0):o.equals(9)&&(this._onDidEscape.fire(r),this._element.blur(),a=!0),a&&Xt.stop(o,!0)})),this._register(ge(this._element,De.MOUSE_OVER,r=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(ge(this._element,De.MOUSE_OUT,r=>{this.updateBackground(!1)})),this.focusTracker=this._register(Ck(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let n of _0(e))if(typeof n=="string"){if(n=n.trim(),n==="")continue;const s=document.createElement("span");s.textContent=n,t.push(s)}else t.push(n);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){var s;if(this._label===e||nb(this._label)&&nb(e)&&dje(this._label,e))return;this._element.classList.add("monaco-text-button");const t=this.options.supportShortLabel?this._labelElement:this._element;if(nb(e)){const r=TU(e,{inline:!0});r.dispose();const o=(s=r.element.querySelector("p"))==null?void 0:s.innerHTML;if(o){const a=whe(o,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});t.innerHTML=a}else ko(t)}else this.options.supportIcons?ko(t,...this.getContentElements(e)):t.textContent=e;let n="";typeof this.options.title=="string"?n=this.options.title:this.options.title&&(n=Cje(e)),this.setTitle(n),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",n),this._label=e}get label(){return this._label}set icon(e){this._element.classList.add(...dn.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}setTitle(e){!this._hover&&e!==""?this._hover=this._register(zd().setupManagedHover(this.options.hoverDelegate??zl("mouse"),this._element,e)):this._hover&&this._hover.update(e)}}class XJ{constructor(e,t,n){this.options=t,this.styles=n,this.count=0,this.element=Qe(e,ht(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=K9(this.countFormat,this.count),this.element.title=K9(this.titleFormat,this.count),this.element.style.backgroundColor=this.styles.badgeBackground??"",this.element.style.color=this.styles.badgeForeground??"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}const ZJ="done",JJ="active",v6="infinite",b6="infinite-long-running",eee="discrete",sR=class sR extends be{constructor(e,t){super(),this.progressSignal=this._register(new yf),this.workedVal=0,this.showDelayedScheduler=this._register(new so(()=>Ahe(this.element),0)),this.longRunningScheduler=this._register(new so(()=>this.infiniteLongRunning(),sR.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=(t==null?void 0:t.progressBarBackground)||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(JJ,v6,b6,eee),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(ZJ),this.element.classList.contains(v6)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(eee,ZJ,b6),this.element.classList.add(JJ,v6),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(b6)}getContainer(){return this.element}};sR.LONG_RUNNING_INFINITE_THRESHOLD=1e4;let Y7=sR;const HYe=S("caseDescription","Match Case"),UYe=S("wordsDescription","Match Whole Word"),zYe=S("regexDescription","Use Regular Expression");class jYe extends EA{constructor(e){super({icon:Ke.caseSensitive,title:HYe+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??zl("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class $Ye extends EA{constructor(e){super({icon:Ke.wholeWord,title:UYe+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??zl("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class qYe extends EA{constructor(e){super({icon:Ke.regex,title:zYe+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??zl("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class KYe{constructor(e,t=0,n=e.length,s=t-1){this.items=e,this.start=t,this.end=n,this.index=s}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class GYe{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new KYe(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const Gw=ht;class YYe extends Af{constructor(e,t,n){super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new se),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new se),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=this.options.tooltip??(this.placeholder||""),this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=Qe(e,Gw(".monaco-inputbox.idle"));const s=this.options.flexibleHeight?"textarea":"input",r=Qe(this.element,Gw(".ibwrapper"));if(this.input=Qe(r,Gw(s+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=Qe(r,Gw("div.mirror")),this.mirror.innerText="",this.scrollableElement=new Eze(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),Qe(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(l=>this.input.scrollTop=l.scrollTop));const o=this._register(new qt(e.ownerDocument,"selectionchange")),a=Le.filter(o.event,()=>{const l=e.ownerDocument.getSelection();return(l==null?void 0:l.anchorNode)===r});this._register(a(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new rf(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover?this.hover.update(e):this.hover=this._register(zd().setupManagedHover(zl("mouse"),this.input,e))}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:l8(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return KH(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){const e=this.input.selectionStart;if(e===null)return null;const t=this.input.selectionEnd??e;return{start:e,end:t}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){if(this.state==="open"&&wa(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${ef(n.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=qH(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:s=>{if(!this.message)return null;e=Qe(s,Gw(".monaco-inputbox-container")),t();const r={inline:!0,className:"monaco-inputbox-message"},o=this.message.formatContent?Pze(this.message.content,r):Aze(this.message.content,r);o.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return o.style.backgroundColor=a.background??"",o.style.color=a.foreground??"",o.style.border=a.border?`1px solid ${a.border}`:"",Qe(e,o),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=S("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=S("alertWarningMessage","Warning: {0}",this.message.content):n=S("alertInfoMessage","Info: {0}",this.message.content),Ak(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText="",this.layout()}applyStyles(){const e=this.options.inputBoxStyles,t=e.inputBackground??"",n=e.inputForeground??"",s=e.inputBorder??"";this.element.style.backgroundColor=t,this.element.style.color=n,this.input.style.backgroundColor="inherit",this.input.style.color=n,this.element.style.border=`1px solid ${ef(s,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=l8(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,s=t.selectionEnd,r=t.value;n!==null&&s!==null&&(this.value=r.substr(0,n)+e+r.substr(s),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){var e;this._hideMessage(),this.message=null,(e=this.actionbar)==null||e.dispose(),super.dispose()}}class QYe extends YYe{constructor(e,t,n){const s=S({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is  to represent the up and down arrow keys.']}," or {0} for history",""),r=S({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is  to represent the up and down arrow keys.']}," ({0} for history)","");super(e,t,n),this._onDidFocus=this._register(new se),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new se),this.onDidBlur=this._onDidBlur.event,this.history=new GYe(n.history,100);const o=()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(s)&&!this.placeholder.endsWith(r)&&this.history.getHistory().length){const a=this.placeholder.endsWith(")")?s:r,l=this.placeholder+a;n.showPlaceholderOnFocus&&!KH(this.input)?this.placeholder=l:this.setPlaceHolder(l)}};this.observer=new MutationObserver((a,l)=>{a.forEach(c=>{c.target.textContent||o()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>o()),this.onblur(this.input,()=>{const a=l=>{if(this.placeholder.endsWith(l)){const c=this.placeholder.slice(0,this.placeholder.length-l.length);return n.showPlaceholderOnFocus?this.placeholder=c:this.setPlaceHolder(c),!0}else return!1};a(r)||a(s)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",yD(this.value?this.value:S("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,yD(this.value))}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}const XYe=S("defaultLabel","input");class ZYe extends Af{constructor(e,t,n){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new yf),this.additionalToggles=[],this._onDidOptionChange=this._register(new se),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new se),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new se),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new se),this._onKeyUp=this._register(new se),this._onCaseSensitiveKeyDown=this._register(new se),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new se),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||XYe,this.showCommonFindToggles=!!n.showCommonFindToggles;const s=n.appendCaseSensitiveLabel||"",r=n.appendWholeWordsLabel||"",o=n.appendRegexLabel||"",a=n.history||[],l=!!n.flexibleHeight,c=!!n.flexibleWidth,u=n.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new QYe(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:n.showHistoryHint,flexibleHeight:l,flexibleWidth:c,flexibleMaxHeight:u,inputBoxStyles:n.inputBoxStyles}));const d=this._register(VU());if(this.showCommonFindToggles){this.regex=this._register(new qYe({appendTitle:o,isChecked:!1,hoverDelegate:d,...n.toggleStyles})),this._register(this.regex.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(g=>{this._onRegexKeyDown.fire(g)})),this.wholeWords=this._register(new $Ye({appendTitle:r,isChecked:!1,hoverDelegate:d,...n.toggleStyles})),this._register(this.wholeWords.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new jYe({appendTitle:s,isChecked:!1,hoverDelegate:d,...n.toggleStyles})),this._register(this.caseSensitive.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(g=>{this._onCaseSensitiveKeyDown.fire(g)}));const h=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,g=>{if(g.equals(15)||g.equals(17)||g.equals(9)){const p=h.indexOf(this.domNode.ownerDocument.activeElement);if(p>=0){let _=-1;g.equals(17)?_=(p+1)%h.length:g.equals(15)&&(p===0?_=h.length-1:_=p-1),g.equals(9)?(h[p].blur(),this.inputBox.focus()):_>=0&&h[_].focus(),Xt.stop(g,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(n==null?void 0:n.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e==null||e.appendChild(this.domNode),this._register(ge(this.inputBox.inputElement,"compositionstart",h=>{this.imeSessionInProgress=!0})),this._register(ge(this.inputBox.inputElement,"compositionend",h=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,h=>this._onKeyDown.fire(h)),this.onkeyup(this.inputBox.inputElement,h=>this._onKeyUp.fire(h)),this.oninput(this.inputBox.inputElement,h=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,h=>this._onMouseDown.fire(h))}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){var e,t,n;this.domNode.classList.remove("disabled"),this.inputBox.enable(),(e=this.regex)==null||e.enable(),(t=this.wholeWords)==null||t.enable(),(n=this.caseSensitive)==null||n.enable();for(const s of this.additionalToggles)s.enable()}disable(){var e,t,n;this.domNode.classList.add("disabled"),this.inputBox.disable(),(e=this.regex)==null||e.disable(),(t=this.wholeWords)==null||t.disable(),(n=this.caseSensitive)==null||n.disable();for(const s of this.additionalToggles)s.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new Ze;for(const t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(n=>{this._onDidOptionChange.fire(n),!n&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){var t,n,s;e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(((t=this.caseSensitive)==null?void 0:t.width())??0)+(((n=this.wholeWords)==null?void 0:n.width())??0)+(((s=this.regex)==null?void 0:s.width())??0)+this.additionalToggles.reduce((r,o)=>r+o.width(),0)}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){var e;return((e=this.caseSensitive)==null?void 0:e.checked)??!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){var e;return((e=this.wholeWords)==null?void 0:e.checked)??!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){var e;return((e=this.regex)==null?void 0:e.checked)??!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){var e;(e=this.caseSensitive)==null||e.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}const JYe=ht;class eQe extends be{constructor(e,t,n){super(),this.parent=e,this.onKeyDown=r=>Vs(this.findInput.inputBox.inputElement,De.KEY_DOWN,r),this.onDidChange=r=>this.findInput.onDidChange(r),this.container=Qe(this.parent,JYe(".quick-input-box")),this.findInput=this._register(new ZYe(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:n}));const s=this.findInput.inputBox.inputElement;s.role="combobox",s.ariaHasPopup="menu",s.ariaAutoComplete="list",s.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}showDecoration(e){e===fs.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===fs.Info?1:e===fs.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===fs.Info?1:e===fs.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}class tQe{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:be.None}}renderElement(e,t,n,s){var l;if((l=n.disposable)==null||l.dispose(),!n.data)return;const r=this.modelProvider();if(r.isResolved(e))return this.renderer.renderElement(r.get(e),e,n.data,s);const o=new Wy,a=r.resolve(e,o.token);n.disposable={dispose:()=>o.cancel()},this.renderer.renderPlaceholder(e,n.data),a.then(c=>this.renderer.renderElement(c,e,n.data,s))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class nQe{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function iQe(i,e){return{...e,accessibilityProvider:e.accessibilityProvider&&new nQe(i,e.accessibilityProvider)}}class sQe{constructor(e,t,n,s,r={}){const o=()=>this.model,a=s.map(l=>new tQe(l,o));this.list=new Du(e,t,n,a,iQe(o,r))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return Le.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return Le.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeSelection(){return Le.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(s=>this._model.get(s)),indexes:t,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,Uo(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}var Ky=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};const rQe=!1;var tee;(function(i){i.North="north",i.South="south",i.East="east",i.West="west"})(tee||(tee={}));let oQe=4;const aQe=new se;let lQe=300;const cQe=new se;class JU{constructor(e){this.el=e,this.disposables=new Ze}get onPointerMove(){return this.disposables.add(new qt(rt(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new qt(rt(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}Ky([Fi],JU.prototype,"onPointerMove",null);Ky([Fi],JU.prototype,"onPointerUp",null);class ez{get onPointerMove(){return this.disposables.add(new qt(this.el,ei.Change)).event}get onPointerUp(){return this.disposables.add(new qt(this.el,ei.End)).event}constructor(e){this.el=e,this.disposables=new Ze}dispose(){this.disposables.dispose()}}Ky([Fi],ez.prototype,"onPointerMove",null);Ky([Fi],ez.prototype,"onPointerUp",null);class BD{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}}Ky([Fi],BD.prototype,"onPointerMove",null);Ky([Fi],BD.prototype,"onPointerUp",null);const nee="pointer-events-disabled";class Cl extends be{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=Qe(this.el,ht(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(Dt(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new qt(this._orthogonalStartDragHandle,"mouseenter")).event(()=>Cl.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new qt(this._orthogonalStartDragHandle,"mouseleave")).event(()=>Cl.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=Qe(this.el,ht(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(Dt(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new qt(this._orthogonalEndDragHandle,"mouseenter")).event(()=>Cl.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new qt(this._orthogonalEndDragHandle,"mouseleave")).event(()=>Cl.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,n){super(),this.hoverDelay=lQe,this.hoverDelayer=this._register(new B2(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new se),this._onDidStart=this._register(new se),this._onDidChange=this._register(new se),this._onDidReset=this._register(new se),this._onDidEnd=this._register(new se),this.orthogonalStartSashDisposables=this._register(new Ze),this.orthogonalStartDragHandleDisposables=this._register(new Ze),this.orthogonalEndSashDisposables=this._register(new Ze),this.orthogonalEndDragHandleDisposables=this._register(new Ze),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=Qe(e,ht(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),rn&&this.el.classList.add("mac");const s=this._register(new qt(this.el,"mousedown")).event;this._register(s(d=>this.onPointerStart(d,new JU(e)),this));const r=this._register(new qt(this.el,"dblclick")).event;this._register(r(this.onPointerDoublePress,this));const o=this._register(new qt(this.el,"mouseenter")).event;this._register(o(()=>Cl.onMouseEnter(this)));const a=this._register(new qt(this.el,"mouseleave")).event;this._register(a(()=>Cl.onMouseLeave(this))),this._register(To.addTarget(this.el));const l=this._register(new qt(this.el,ei.Start)).event;this._register(l(d=>this.onPointerStart(d,new ez(this.el)),this));const c=this._register(new qt(this.el,ei.Tap)).event;let u;this._register(c(d=>{if(u){clearTimeout(u),u=void 0,this.onPointerDoublePress(d);return}clearTimeout(u),u=setTimeout(()=>u=void 0,250)},this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=oQe,this._register(aQe.event(d=>{this.size=d,this.layout()}))),this._register(cQe.event(d=>this.hoverDelay=d)),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",rQe),this.layout()}onPointerStart(e,t){Xt.stop(e);let n=!1;if(!e.__orthogonalSashEvent){const p=this.getOrthogonalSash(e);p&&(n=!0,e.__orthogonalSashEvent=!0,p.onPointerStart(e,new BD(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new BD(t))),!this.state)return;const s=this.el.ownerDocument.getElementsByTagName("iframe");for(const p of s)p.classList.add(nee);const r=e.pageX,o=e.pageY,a=e.altKey,l={startX:r,currentX:r,startY:o,currentY:o,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=Hl(this.el),u=()=>{let p="";n?p="all-scroll":this.orientation===1?this.state===1?p="s-resize":this.state===2?p="n-resize":p=rn?"row-resize":"ns-resize":this.state===1?p="e-resize":this.state===2?p="w-resize":p=rn?"col-resize":"ew-resize",c.textContent=`* { cursor: ${p} !important; }`},d=new Ze;u(),n||this.onDidEnablementChange.event(u,null,d);const h=p=>{Xt.stop(p,!1);const _={startX:r,currentX:p.pageX,startY:o,currentY:p.pageY,altKey:a};this._onDidChange.fire(_)},g=p=>{Xt.stop(p,!1),c.remove(),this.el.classList.remove("active"),this._onDidEnd.fire(),d.dispose();for(const _ of s)_.classList.remove(nee)};t.onPointerMove(h,null,d),t.onPointerUp(g,null,d),d.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&Cl.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&Cl.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){Cl.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){const t=e.initialTarget??e.target;if(!(!t||!Zs(t))&&t.classList.contains("orthogonal-drag-handle"))return t.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const uQe={separatorBorder:ke.transparent};class yme{set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){var n,s;if(e!==this.visible){e?(this.size=qo(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{(s=(n=this.view).setVisible)==null||s.call(n,e)}catch(r){console.error("Splitview: Failed to set visible view"),console.error(r)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,n,s){this.container=e,this.view=t,this.disposable=s,this._cachedVisibleSize=void 0,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(n){console.error("Splitview: Failed to layout view"),console.error(n)}}dispose(){this.disposable.dispose()}}class dQe extends yme{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class hQe extends yme{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var yh;(function(i){i[i.Idle=0]="Idle",i[i.Busy=1]="Busy"})(yh||(yh={}));var iee;(function(i){i.Distribute={type:"distribute"};function e(s){return{type:"split",index:s}}i.Split=e;function t(s){return{type:"auto",index:s}}i.Auto=t;function n(s){return{type:"invisible",cachedVisibleSize:s}}i.Invisible=n})(iee||(iee={}));class fQe extends be{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=yh.Idle,this._onDidSashChange=this._register(new se),this._onDidSashReset=this._register(new se),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=t.orientation??0,this.inverseAltBehavior=t.inverseAltBehavior??!1,this.proportionalLayout=t.proportionalLayout??!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=Qe(this.el,ht(".sash-container")),this.viewContainer=ht(".split-view-container"),this.scrollable=this._register(new zy({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:s=>xa(rt(this.el),s)})),this.scrollableElement=this._register(new dA(this.viewContainer,{vertical:this.orientation===0?t.scrollbarVisibility??1:2,horizontal:this.orientation===1?t.scrollbarVisibility??1:2},this.scrollable));const n=this._register(new qt(this.viewContainer,"scroll")).event;this._register(n(s=>{const r=this.scrollableElement.getScrollPosition(),o=Math.abs(this.viewContainer.scrollLeft-r.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,a=Math.abs(this.viewContainer.scrollTop-r.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(o!==void 0||a!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:o,scrollTop:a})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(s=>{s.scrollTopChanged&&(this.viewContainer.scrollTop=s.scrollTop),s.scrollLeftChanged&&(this.viewContainer.scrollLeft=s.scrollLeft)})),Qe(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||uQe),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((s,r)=>{const o=Dl(s.visible)||s.visible?s.size:{type:"invisible",cachedVisibleSize:s.size},a=s.view;this.doAddView(a,o,r,!0)}),this._contentSize=this.viewItems.reduce((s,r)=>s+r.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,s){this.doAddView(e,t,n,s)}layout(e,t){const n=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let s=0;for(let r=0;r<this.viewItems.length;r++){const o=this.viewItems[r],a=this.proportions[r];typeof a=="number"?s+=a:e-=o.size}for(let r=0;r<this.viewItems.length;r++){const o=this.viewItems[r],a=this.proportions[r];typeof a=="number"&&s>0&&(o.size=qo(Math.round(a*e/s),o.minimumSize,o.maximumSize))}}else{const s=Uo(this.viewItems.length),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,r,o)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart({sash:e,start:t,alt:n}){for(const a of this.viewItems)a.enabled=!1;const s=this.sashItems.findIndex(a=>a.sash===e),r=Cd(ge(this.el.ownerDocument.body,"keydown",a=>o(this.sashDragState.current,a.altKey)),ge(this.el.ownerDocument.body,"keyup",()=>o(this.sashDragState.current,!1))),o=(a,l)=>{const c=this.viewItems.map(p=>p.size);let u=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(s===this.sashItems.length-1){const _=this.viewItems[s];u=(_.minimumSize-_.size)/2,d=(_.maximumSize-_.size)/2}else{const _=this.viewItems[s+1];u=(_.size-_.maximumSize)/2,d=(_.size-_.minimumSize)/2}let h,g;if(!l){const p=Uo(s,-1),_=Uo(s+1,this.viewItems.length),v=p.reduce((I,A)=>I+(this.viewItems[A].minimumSize-c[A]),0),y=p.reduce((I,A)=>I+(this.viewItems[A].viewMaximumSize-c[A]),0),w=_.length===0?Number.POSITIVE_INFINITY:_.reduce((I,A)=>I+(c[A]-this.viewItems[A].minimumSize),0),x=_.length===0?Number.NEGATIVE_INFINITY:_.reduce((I,A)=>I+(c[A]-this.viewItems[A].viewMaximumSize),0),k=Math.max(v,x),T=Math.min(w,y),R=this.findFirstSnapIndex(p),L=this.findFirstSnapIndex(_);if(typeof R=="number"){const I=this.viewItems[R],A=Math.floor(I.viewMinimumSize/2);h={index:R,limitDelta:I.visible?k-A:k+A,size:I.size}}if(typeof L=="number"){const I=this.viewItems[L],A=Math.floor(I.viewMinimumSize/2);g={index:L,limitDelta:I.visible?T+A:T-A,size:I.size}}}this.sashDragState={start:a,current:a,index:s,sizes:c,minDelta:u,maxDelta:d,alt:l,snapBefore:h,snapAfter:g,disposable:r}};o(t,n)}onSashChange({current:e}){const{index:t,start:n,sizes:s,alt:r,minDelta:o,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const u=e-n,d=this.resize(t,u,s,void 0,void 0,o,a,l,c);if(r){const h=t===this.sashItems.length-1,g=this.viewItems.map(x=>x.size),p=h?t:t+1,_=this.viewItems[p],v=_.size-_.maximumSize,y=_.size-_.minimumSize,w=h?t-1:t+1;this.resize(w,-d,g,void 0,void 0,v,y)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=qo(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==yh.Idle)throw new Error("Cant modify splitview");this.state=yh.Busy;try{const n=Uo(this.viewItems.length).filter(a=>a!==e),s=[...n.filter(a=>this.viewItems[a].priority===1),e],r=n.filter(a=>this.viewItems[a].priority===2),o=this.viewItems[e];t=Math.round(t),t=qo(t,o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=t,this.relayout(s,r)}finally{this.state=yh.Idle}}}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const n=Math.floor(t/e.length);for(const a of e)a.size=qo(n,a.minimumSize,a.maximumSize);const s=Uo(this.viewItems.length),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);this.relayout(r,o)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,s){if(this.state!==yh.Idle)throw new Error("Cant modify splitview");this.state=yh.Busy;try{const r=ht(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(r):this.viewContainer.insertBefore(r,this.viewContainer.children.item(n));const o=e.onDidChange(h=>this.onViewChange(u,h)),a=Dt(()=>r.remove()),l=Cd(o,a);let c;typeof t=="number"?c=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize);const u=this.orientation===0?new dQe(r,e,c,l):new hQe(r,e,c,l);if(this.viewItems.splice(n,0,u),this.viewItems.length>1){const h={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},g=this.orientation===0?new Cl(this.sashContainer,{getHorizontalSashTop:I=>this.getSashPosition(I),getHorizontalSashWidth:this.getSashOrthogonalSize},{...h,orientation:1}):new Cl(this.sashContainer,{getVerticalSashLeft:I=>this.getSashPosition(I),getVerticalSashHeight:this.getSashOrthogonalSize},{...h,orientation:0}),p=this.orientation===0?I=>({sash:g,start:I.startY,current:I.currentY,alt:I.altKey}):I=>({sash:g,start:I.startX,current:I.currentX,alt:I.altKey}),v=Le.map(g.onDidStart,p)(this.onSashStart,this),w=Le.map(g.onDidChange,p)(this.onSashChange,this),k=Le.map(g.onDidEnd,()=>this.sashItems.findIndex(I=>I.sash===g))(this.onSashEnd,this),T=g.onDidReset(()=>{const I=this.sashItems.findIndex(W=>W.sash===g),A=Uo(I,-1),B=Uo(I+1,this.viewItems.length),V=this.findFirstSnapIndex(A),U=this.findFirstSnapIndex(B);typeof V=="number"&&!this.viewItems[V].visible||typeof U=="number"&&!this.viewItems[U].visible||this._onDidSashReset.fire(I)}),R=Cd(v,w,k,T,g),L={sash:g,disposable:R};this.sashItems.splice(n-1,0,L)}r.appendChild(e.element);let d;typeof t!="number"&&t.type==="split"&&(d=[t.index]),s||this.relayout([n],d),!s&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}finally{this.state=yh.Idle}}relayout(e,t){const n=this.viewItems.reduce((s,r)=>s+r.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(u=>u.size),s,r,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const u=Uo(e,-1),d=Uo(e+1,this.viewItems.length);if(r)for(const L of r)bO(u,L),bO(d,L);if(s)for(const L of s)AE(u,L),AE(d,L);const h=u.map(L=>this.viewItems[L]),g=u.map(L=>n[L]),p=d.map(L=>this.viewItems[L]),_=d.map(L=>n[L]),v=u.reduce((L,I)=>L+(this.viewItems[I].minimumSize-n[I]),0),y=u.reduce((L,I)=>L+(this.viewItems[I].maximumSize-n[I]),0),w=d.length===0?Number.POSITIVE_INFINITY:d.reduce((L,I)=>L+(n[I]-this.viewItems[I].minimumSize),0),x=d.length===0?Number.NEGATIVE_INFINITY:d.reduce((L,I)=>L+(n[I]-this.viewItems[I].maximumSize),0),k=Math.max(v,x,o),T=Math.min(w,y,a);let R=!1;if(l){const L=this.viewItems[l.index],I=t>=l.limitDelta;R=I!==L.visible,L.setVisible(I,l.size)}if(!R&&c){const L=this.viewItems[c.index],I=t<c.limitDelta;R=I!==L.visible,L.setVisible(I,c.size)}if(R)return this.resize(e,t,n,s,r,o,a);t=qo(t,k,T);for(let L=0,I=t;L<h.length;L++){const A=h[L],B=qo(g[L]+I,A.minimumSize,A.maximumSize),V=B-g[L];I-=V,A.size=B}for(let L=0,I=t;L<p.length;L++){const A=p[L],B=qo(_[L]-I,A.minimumSize,A.maximumSize),V=B-_[L];I+=V,A.size=B}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let n=this.size-t;const s=Uo(this.viewItems.length-1,-1),r=s.filter(a=>this.viewItems[a].priority===1),o=s.filter(a=>this.viewItems[a].priority===2);for(const a of o)bO(s,a);for(const a of r)AE(s,a);typeof e=="number"&&AE(s,e);for(let a=0;n!==0&&a<s.length;a++){const l=this.viewItems[s[a]],c=qo(l.size+n,l.minimumSize,l.maximumSize),u=c-l.size;n-=u,l.size=c}}layoutViews(){this._contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),s=[...this.viewItems].reverse();e=!1;const r=s.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const o=s.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],u=this.viewItems[l];a+=u.size;const d=!(t[l]&&o[l+1]),h=!(n[l]&&r[l+1]);if(d&&h){const g=Uo(l,-1),p=Uo(l+1,this.viewItems.length),_=this.findFirstSnapIndex(g),v=this.findFirstSnapIndex(p),y=typeof _=="number"&&!this.viewItems[_].visible,w=typeof v=="number"&&!this.viewItems[v].visible;y&&r[l]&&(a>0||this.startSnappingEnabled)?c.state=1:w&&t[l]&&(a<this._contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else d&&!h?c.state=1:!d&&h?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const n=this.viewItems[t];if(n.visible&&n.snap)return t}for(const t of e){const n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}areViewsDistributed(){let e,t;for(const n of this.viewItems)if(e=e===void 0?n.size:Math.min(e,n.size),t=t===void 0?n.size:Math.max(t,n.size),t-e>2)return!1;return!0}dispose(){var e;(e=this.sashDragState)==null||e.disposable.dispose(),br(this.viewItems),this.viewItems=[],this.sashItems.forEach(t=>t.disposable.dispose()),this.sashItems=[],super.dispose()}}const rR=class rR{constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=rR.TemplateId,this.renderedTemplates=new Set;const s=new Map(t.map(r=>[r.templateId,r]));this.renderers=[];for(const r of e){const o=s.get(r.templateId);if(!o)throw new Error(`Table cell renderer for template id ${r.templateId} not found.`);this.renderers.push(o)}}renderTemplate(e){const t=Qe(e,ht(".monaco-table-tr")),n=[],s=[];for(let o=0;o<this.columns.length;o++){const a=this.renderers[o],l=Qe(t,ht(".monaco-table-td",{"data-col-index":o}));l.style.width=`${this.getColumnSize(o)}px`,n.push(l),s.push(a.renderTemplate(l))}const r={container:e,cellContainers:n,cellTemplateData:s};return this.renderedTemplates.add(r),r}renderElement(e,t,n,s){for(let r=0;r<this.columns.length;r++){const a=this.columns[r].project(e);this.renderers[r].renderElement(a,t,n.cellTemplateData[r],s)}}disposeElement(e,t,n,s){for(let r=0;r<this.columns.length;r++){const o=this.renderers[r];if(o.disposeElement){const l=this.columns[r].project(e);o.disposeElement(l,t,n.cellTemplateData[r],s)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);gu(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}};rR.TemplateId="row";let VD=rR;function gQe(i){return{getHeight(e){return i.getHeight(e)},getTemplateId(){return VD.TemplateId}}}class mQe extends be{get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??Number.POSITIVE_INFINITY}get onDidChange(){return this.column.onDidChangeWidthConstraints??Le.None}constructor(e,t){super(),this.column=e,this.index=t,this._onDidLayout=new se,this.onDidLayout=this._onDidLayout.event,this.element=ht(".monaco-table-th",{"data-col-index":t},e.label),e.tooltip&&this._register(zd().setupManagedHover(zl("mouse"),this.element,e.tooltip))}layout(e){this._onDidLayout.fire([this.index,e])}}const oR=class oR{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,n,s,r,o){this.virtualDelegate=n,this.columns=s,this.domId=`table_id_${++oR.InstanceCount}`,this.disposables=new Ze,this.cachedWidth=0,this.cachedHeight=0,this.domNode=Qe(t,ht(`.monaco-table.${this.domId}`));const a=s.map((u,d)=>this.disposables.add(new mQe(u,d))),l={size:a.reduce((u,d)=>u+d.column.weight,0),views:a.map(u=>({size:u.column.weight,view:u}))};this.splitview=this.disposables.add(new fQe(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;const c=new VD(s,r,u=>this.splitview.getViewSize(u));this.list=this.disposables.add(new Du(e,this.domNode,gQe(n),[c],o)),Le.any(...a.map(u=>u.onDidLayout))(([u,d])=>c.layoutColumn(u,d),null,this.disposables),this.splitview.onDidSashReset(u=>{const d=s.reduce((g,p)=>g+p.weight,0),h=s[u].weight/d*this.cachedWidth;this.splitview.resizeView(u,h)},null,this.disposables),this.styleElement=Hl(this.domNode),this.style(Iqe)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}};oR.InstanceCount=0;let Q7=oR;var za;(function(i){i[i.Expanded=0]="Expanded",i[i.Collapsed=1]="Collapsed",i[i.PreserveOrExpanded=2]="PreserveOrExpanded",i[i.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(za||(za={}));var l0;(function(i){i[i.Unknown=0]="Unknown",i[i.Twistie=1]="Twistie",i[i.Element=2]="Element",i[i.Filter=3]="Filter"})(l0||(l0={}));class Ga extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class tz{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function nz(i){return typeof i=="object"&&"visibility"in i&&"data"in i}function Uk(i){switch(i){case!0:return 1;case!1:return 0;default:return i}}function y6(i){return typeof i.collapsible=="boolean"}class pQe{constructor(e,t,n,s={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new M2,this._onDidChangeCollapseState=new se,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new se,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new se,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new B2(dhe),this.collapseByDefault=typeof s.collapseByDefault>"u"?!1:s.collapseByDefault,this.allowNonCollapsibleParents=s.allowNonCollapsibleParents??!1,this.filter=s.filter,this.autoExpandSingleChildren=typeof s.autoExpandSingleChildren>"u"?!1:s.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,n=yn.empty(),s={}){if(e.length===0)throw new Ga(this.user,"Invalid tree location");s.diffIdentityProvider?this.spliceSmart(s.diffIdentityProvider,e,t,n,s):this.spliceSimple(e,t,n,s)}spliceSmart(e,t,n,s=yn.empty(),r,o=r.diffDepth??0){const{parentNode:a}=this.getParentNodeWithListIndex(t);if(!a.lastDiffIds)return this.spliceSimple(t,n,s,r);const l=[...s],c=t[t.length-1],u=new Oh({getElements:()=>a.lastDiffIds},{getElements:()=>[...a.children.slice(0,c),...l,...a.children.slice(c+n)].map(_=>e.getId(_.element).toString())}).ComputeDiff(!1);if(u.quitEarly)return a.lastDiffIds=void 0,this.spliceSimple(t,n,l,r);const d=t.slice(0,-1),h=(_,v,y)=>{if(o>0)for(let w=0;w<y;w++)_--,v--,this.spliceSmart(e,[...d,_,0],Number.MAX_SAFE_INTEGER,l[v].children,r,o-1)};let g=Math.min(a.children.length,c+n),p=l.length;for(const _ of u.changes.sort((v,y)=>y.originalStart-v.originalStart))h(g,p,g-(_.originalStart+_.originalLength)),g=_.originalStart,p=_.modifiedStart-c,this.spliceSimple([...d,g],_.originalLength,yn.slice(l,p,p+_.modifiedLength),r);h(g,p,g)}spliceSimple(e,t,n=yn.empty(),{onDidCreateNode:s,onDidDeleteNode:r,diffIdentityProvider:o}){const{parentNode:a,listIndex:l,revealed:c,visible:u}=this.getParentNodeWithListIndex(e),d=[],h=yn.map(n,T=>this.createTreeNode(T,a,a.visible?1:0,c,d,s)),g=e[e.length-1];let p=0;for(let T=g;T>=0&&T<a.children.length;T--){const R=a.children[T];if(R.visible){p=R.visibleChildIndex;break}}const _=[];let v=0,y=0;for(const T of h)_.push(T),y+=T.renderNodeCount,T.visible&&(T.visibleChildIndex=p+v++);const w=xQ(a.children,g,t,_);o?a.lastDiffIds?xQ(a.lastDiffIds,g,t,_.map(T=>o.getId(T.element).toString())):a.lastDiffIds=a.children.map(T=>o.getId(T.element).toString()):a.lastDiffIds=void 0;let x=0;for(const T of w)T.visible&&x++;if(x!==0)for(let T=g+_.length;T<a.children.length;T++){const R=a.children[T];R.visible&&(R.visibleChildIndex-=x)}if(a.visibleChildrenCount+=v-x,c&&u){const T=w.reduce((R,L)=>R+(L.visible?L.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,y-T),this.list.splice(l,T,d)}if(w.length>0&&r){const T=R=>{r(R),R.children.forEach(T)};w.forEach(T)}this._onDidSplice.fire({insertedNodes:_,deletedNodes:w});let k=a;for(;k;){if(k.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}k=k.parent}}rerender(e){if(e.length===0)throw new Ga(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:s}=this.getTreeNodeWithListIndex(e);t.visible&&s&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:s}=this.getTreeNodeWithListIndex(e);return n&&s?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);const s={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const s=this.getTreeNode(e);typeof t>"u"&&(t=!s.collapsed);const r={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,r))}_setCollapseState(e,t){const{node:n,listIndex:s,revealed:r}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(n,s,r,t);if(n!==this.root&&this.autoExpandSingleChildren&&o&&!y6(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let l=0;l<n.children.length;l++)if(n.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return o}_setListNodeCollapseState(e,t,n,s){const r=this._setNodeCollapseState(e,s,!1);if(!n||!e.visible||!r)return r;const o=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=o-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),r}_setNodeCollapseState(e,t,n){let s;if(e===this.root?s=!1:(y6(t)?(s=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(s=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):s=!1,s&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!y6(t)&&t.recursive)for(const r of e.children)s=this._setNodeCollapseState(r,t,!0)||s;return s}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,n,s,r,o){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,n);a.visibility=l,s&&r.push(a);const c=e.children||yn.empty(),u=s&&l!==0&&!a.collapsed;let d=0,h=1;for(const g of c){const p=this.createTreeNode(g,a,l,u,r,o);a.children.push(p),h+=p.renderNodeCount,p.visible&&(p.visibleChildIndex=d++)}return this.allowNonCollapsibleParents||(a.collapsible=a.collapsible||a.children.length>0),a.visibleChildrenCount=d,a.visible=l===2?d>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=h):(a.renderNodeCount=0,s&&r.pop()),o==null||o(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,s=!0){let r;if(e!==this.root){if(r=this._filterNode(e,t),r===0)return e.visible=!1,e.renderNodeCount=0,!1;s&&n.push(e)}const o=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||r!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,r,n,s&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=r===2?a:r===1,e.visibility=r),e.visible?e.collapsed||(e.renderNodeCount+=n.length-o):(e.renderNodeCount=0,s&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):nz(n)?(e.filterData=n.data,Uk(n.visibility)):(e.filterData=void 0,Uk(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[n,...s]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(s,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[n,...s]=e;if(n<0||n>t.children.length)throw new Ga(this.user,"Invalid tree location");return this.getTreeNode(s,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:s,visible:r}=this.getParentNodeWithListIndex(e),o=e[e.length-1];if(o<0||o>t.children.length)throw new Ga(this.user,"Invalid tree location");const a=t.children[o];return{node:a,listIndex:n,revealed:s,visible:r&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,s=!0,r=!0){const[o,...a]=e;if(o<0||o>t.children.length)throw new Ga(this.user,"Invalid tree location");for(let l=0;l<o;l++)n+=t.children[l].renderNodeCount;return s=s&&!t.collapsed,r=r&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:s,visible:r}:this.getParentNodeWithListIndex(a,t.children[o],n+1,s,r)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:m9e(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}class _Qe extends X2{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function w6(i){return i instanceof X2?new _Qe(i):i}class vQe{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=be.None,this.disposables=new Ze}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){var n,s;(s=(n=this.dnd).onDragStart)==null||s.call(n,w6(e),t)}onDragOver(e,t,n,s,r,o=!0){const a=this.dnd.onDragOver(w6(e),t&&t.element,n,s,r),l=this.autoExpandNode!==t;if(l&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return a;if(l&&typeof a!="boolean"&&a.autoExpand&&(this.autoExpandDisposable=e8(()=>{const g=this.modelProvider(),p=g.getNodeLocation(t);g.isCollapsed(p)&&g.setCollapsed(p,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof a=="boolean"||!a.accept||typeof a.bubble>"u"||a.feedback){if(!o){const g=typeof a=="boolean"?a:a.accept,p=typeof a=="boolean"?void 0:a.effect;return{accept:g,effect:p,feedback:[n]}}return a}if(a.bubble===1){const g=this.modelProvider(),p=g.getNodeLocation(t),_=g.getParentNodeLocation(p),v=g.getNode(_),y=_&&g.getListIndex(_);return this.onDragOver(e,v,y,s,r,!1)}const c=this.modelProvider(),u=c.getNodeLocation(t),d=c.getListIndex(u),h=c.getListRenderCount(u);return{...a,feedback:Uo(d,d+h)}}drop(e,t,n,s,r){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(w6(e),t&&t.element,n,s,r)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)==null||n.call(t,e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function bQe(i,e){return e&&{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new vQe(i,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element})},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})}},accessibilityProvider:e.accessibilityProvider&&{...e.accessibilityProvider,getSetSize(t){const n=i(),s=n.getNodeLocation(t),r=n.getParentNodeLocation(s);return n.getNode(r).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}}}class iz{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var n,s;(s=(n=this.delegate).setDynamicHeight)==null||s.call(n,e.element,t)}}var oy;(function(i){i.None="none",i.OnHover="onHover",i.Always="always"})(oy||(oy={}));class yQe{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new Ze,this.onDidChange=Le.forEach(e,n=>this._elements=n,this.disposables)}dispose(){this.disposables.dispose()}}const NS=class NS{constructor(e,t,n,s,r,o={}){var a;this.renderer=e,this.modelProvider=t,this.activeNodes=s,this.renderedIndentGuides=r,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=NS.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=be.None,this.disposables=new Ze,this.templateId=e.templateId,this.updateOptions(o),Le.map(n,l=>l.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(a=e.onDidChangeTwistieState)==null||a.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"){const t=qo(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[n,s]of this.renderedNodes)this.renderTreeElement(n,s)}}if(typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==oy.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[n,s]of this.renderedNodes)this._renderIndentGuides(n,s);if(this.indentGuidesDisposable.dispose(),t){const n=new Ze;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=Qe(e,ht(".monaco-tl-row")),n=Qe(t,ht(".monaco-tl-indent")),s=Qe(t,ht(".monaco-tl-twistie")),r=Qe(t,ht(".monaco-tl-contents")),o=this.renderer.renderTemplate(r);return{container:e,indent:n,twistie:s,indentGuidesDisposable:be.None,templateData:o}}renderElement(e,t,n,s){this.renderedNodes.set(e,n),this.renderedElements.set(e.element,e),this.renderTreeElement(e,n),this.renderer.renderElement(e,t,n.templateData,s)}disposeElement(e,t,n,s){var r,o;n.indentGuidesDisposable.dispose(),(o=(r=this.renderer).disposeElement)==null||o.call(r,e,t,n.templateData,s),typeof s=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){const n=NS.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${n}px`,t.indent.style.width=`${n+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...dn.asClassNameArray(Ke.treeItemExpanded));let s=!1;this.renderer.renderTwistie&&(s=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(s||t.twistie.classList.add(...dn.asClassNameArray(Ke.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(gu(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new Ze,s=this.modelProvider();for(;;){const r=s.getNodeLocation(e),o=s.getParentNodeLocation(r);if(!o)break;const a=s.getNode(o),l=ht(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(a)&&l.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(l):t.indent.insertBefore(l,t.indent.firstElementChild),this.renderedIndentGuides.add(a,l),n.add(Dt(()=>this.renderedIndentGuides.delete(a,l))),e=a}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,n=this.modelProvider();e.forEach(s=>{const r=n.getNodeLocation(s);try{const o=n.getParentNodeLocation(r);s.collapsible&&s.children.length>0&&!s.collapsed?t.add(s):o&&t.add(n.getNode(o))}catch{}}),this.activeIndentNodes.forEach(s=>{t.has(s)||this.renderedIndentGuides.forEach(s,r=>r.classList.remove("active"))}),t.forEach(s=>{this.activeIndentNodes.has(s)||this.renderedIndentGuides.forEach(s,r=>r.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),br(this.disposables)}};NS.DefaultIndent=8;let X7=NS;class wQe{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new Ze,e.onWillRefilter(this.reset,this,this.disposables)}filter(e,t){let n=1;if(this._filter){const o=this._filter.filter(e,t);if(typeof o=="boolean"?n=o?1:0:nz(o)?n=Uk(o.visibility):n=o,n===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:tb.Default,visibility:n};const s=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),r=Array.isArray(s)?s:[s];for(const o of r){const a=o&&o.toString();if(typeof a>"u")return{data:tb.Default,visibility:n};let l;if(this.tree.findMatchType===o1.Contiguous){const c=a.toLowerCase().indexOf(this._lowercasePattern);if(c>-1){l=[Number.MAX_SAFE_INTEGER,0];for(let u=this._lowercasePattern.length;u>0;u--)l.push(c+u-1)}}else l=cge(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,r.length===1?{data:l,visibility:n}:{data:{label:a,score:l},visibility:n}}return this.tree.findMode===qh.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:tb.Default,visibility:n}}reset(){this._totalCount=0,this._matchCount=0}dispose(){br(this.disposables)}}var qh;(function(i){i[i.Highlight=0]="Highlight",i[i.Filter=1]="Filter"})(qh||(qh={}));var o1;(function(i){i[i.Fuzzy=0]="Fuzzy",i[i.Contiguous=1]="Contiguous"})(o1||(o1={}));class CQe{get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,n,s,r,o={}){this.tree=e,this.view=n,this.filter=s,this.contextViewProvider=r,this.options=o,this._pattern="",this.width=0,this._onDidChangeMode=new se,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new se,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new se,this._onDidChangeOpenState=new se,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new Ze,this.disposables=new Ze,this._mode=e.options.defaultFindMode??qh.Highlight,this._matchType=e.options.defaultFindMatchType??o1.Fuzzy,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){var t,n,s;const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&e?(Ak(S("replFindNoResults","No results")),this.tree.options.showNotFoundMessage??!0?(t=this.widget)==null||t.showMessage({type:2,content:S("not found","No elements found.")}):(n=this.widget)==null||n.showMessage({type:2})):((s=this.widget)==null||s.clearMessage(),this.pattern&&Ak(S("replFindResults","{0} results",this.filter.matchCount)))}shouldAllowFocus(e){return!this.widget||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!tb.isDefault(e.filterData)}layout(e){var t;this.width=e,(t=this.widget)==null||t.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}function SQe(i,e){return i.position===e.position&&wme(i,e)}function wme(i,e){return i.node.element===e.node.element&&i.startIndex===e.startIndex&&i.height===e.height&&i.endIndex===e.endIndex}class kQe{constructor(e=[]){this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return ks(this.stickyNodes,e.stickyNodes,SQe)}lastNodePartiallyVisible(){if(this.count===0)return!1;const e=this.stickyNodes[this.count-1];if(this.count===1)return e.position!==0;const t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!ks(this.stickyNodes,e.stickyNodes,wme)||this.count===0)return!1;const t=this.stickyNodes[this.count-1],n=e.stickyNodes[e.count-1];return t.position!==n.position}}class xQe{constrainStickyScrollNodes(e,t,n){for(let s=0;s<e.length;s++){const r=e[s];if(r.position+r.height>n||s>=t)return e.slice(0,s)}return e}}class see extends be{constructor(e,t,n,s,r,o={}){super(),this.tree=e,this.model=t,this.view=n,this.treeDelegate=r,this.maxWidgetViewRatio=.4;const a=this.validateStickySettings(o);this.stickyScrollMaxItemCount=a.stickyScrollMaxItemCount,this.stickyScrollDelegate=o.stickyScrollDelegate??new xQe,this._widget=this._register(new EQe(n.getScrollableElement(),n,e,s,r,o.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(n.onDidScroll(()=>this.update())),this._register(n.onDidChangeContentHeight(()=>this.update())),this._register(e.onDidChangeCollapseState(()=>this.update())),this.update()}get height(){return this._widget.height}getNodeAtHeight(e){let t;if(e===0?t=this.view.firstVisibleIndex:t=this.view.indexAt(e+this.view.scrollTop),!(t<0||t>=this.view.length))return this.view.element(t)}update(){const e=this.getNodeAtHeight(0);if(!e||this.tree.scrollTop===0){this._widget.setState(void 0);return}const t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){const t=[];let n=e,s=0,r=this.getNextStickyNode(n,void 0,s);for(;r&&(t.push(r),s+=r.height,!(t.length<=this.stickyScrollMaxItemCount&&(n=this.getNextVisibleNode(r),!n)));)r=this.getNextStickyNode(n,r.node,s);const o=this.constrainStickyNodes(t);return o.length?new kQe(o):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,n){const s=this.getAncestorUnderPrevious(e,t);if(s&&!(s===e&&(!this.nodeIsUncollapsedParent(e)||this.nodeTopAlignsWithStickyNodesBottom(e,n))))return this.createStickyScrollNode(s,n)}nodeTopAlignsWithStickyNodesBottom(e,t){const n=this.getNodeIndex(e),s=this.view.getElementTop(n),r=t;return this.view.scrollTop===s-r}createStickyScrollNode(e,t){const n=this.treeDelegate.getHeight(e),{startIndex:s,endIndex:r}=this.getNodeRange(e),o=this.calculateStickyNodePosition(r,t,n);return{node:e,position:o,height:n,startIndex:s,endIndex:r}}getAncestorUnderPrevious(e,t=void 0){let n=e,s=this.getParentNode(n);for(;s;){if(s===t)return n;n=s,s=this.getParentNode(n)}if(t===void 0)return n}calculateStickyNodePosition(e,t,n){let s=this.view.getRelativeTop(e);if(s===null&&this.view.firstVisibleIndex===e&&e+1<this.view.length){const c=this.treeDelegate.getHeight(this.view.element(e)),u=this.view.getRelativeTop(e+1);s=u?u-c/this.view.renderHeight:null}if(s===null)return t;const r=this.view.element(e),o=this.treeDelegate.getHeight(r),l=s*this.view.renderHeight+o;return t+n>l&&t<=l?l-n:t}constrainStickyNodes(e){if(e.length===0)return[];const t=this.view.renderHeight*this.maxWidgetViewRatio,n=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&n.position+n.height<=t)return e;const s=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!s.length)return[];const r=s[s.length-1];if(s.length>this.stickyScrollMaxItemCount||r.position+r.height>t)throw new Error("stickyScrollDelegate violates constraints");return s}getParentNode(e){const t=this.model.getNodeLocation(e),n=this.model.getParentNodeLocation(t);return n?this.model.getNode(n):void 0}nodeIsUncollapsedParent(e){const t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){const t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}getNodeRange(e){const t=this.model.getNodeLocation(e),n=this.model.getListIndex(t);if(n<0)throw new Error("Node not found in tree");const s=this.model.getListRenderCount(t),r=n+s-1;return{startIndex:n,endIndex:r}}nodePositionTopBelowWidget(e){const t=[];let n=this.getParentNode(e);for(;n;)t.push(n),n=this.getParentNode(n);let s=0;for(let r=0;r<t.length&&r<this.stickyScrollMaxItemCount;r++)s+=this.treeDelegate.getHeight(t[r]);return s}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(e={}){if(!e.stickyScrollMaxItemCount)return;const t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}validateStickySettings(e){let t=7;return typeof e.stickyScrollMaxItemCount=="number"&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}}class EQe{constructor(e,t,n,s,r,o){this.view=t,this.tree=n,this.treeRenderers=s,this.treeDelegate=r,this.accessibilityProvider=o,this._previousElements=[],this._previousStateDisposables=new Ze,this._rootDomNode=ht(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);const a=ht(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(a),this.stickyScrollFocus=new TQe(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;const e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}setState(e){const t=!!this._previousState&&this._previousState.count>0,n=!!e&&e.count>0;if(!t&&!n||t&&n&&this._previousState.equal(e))return;if(t!==n&&this.setVisible(n),!n){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}const s=e.stickyNodes[e.count-1];if(this._previousState&&e.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${s.position}px`;else{this._previousStateDisposables.clear();const r=Array(e.count);for(let o=e.count-1;o>=0;o--){const a=e.stickyNodes[o],{element:l,disposable:c}=this.createElement(a,o,e.count);r[o]=l,this._rootDomNode.appendChild(l),this._previousStateDisposables.add(c)}this.stickyScrollFocus.updateElements(r,e),this._previousElements=r}this._previousState=e,this._rootDomNode.style.height=`${s.position+s.height}px`}createElement(e,t,n){const s=e.startIndex,r=document.createElement("div");r.style.top=`${e.position}px`,this.tree.options.setRowHeight!==!1&&(r.style.height=`${e.height}px`),this.tree.options.setRowLineHeight!==!1&&(r.style.lineHeight=`${e.height}px`),r.classList.add("monaco-tree-sticky-row"),r.classList.add("monaco-list-row"),r.setAttribute("data-index",`${s}`),r.setAttribute("data-parity",s%2===0?"even":"odd"),r.setAttribute("id",this.view.getElementID(s));const o=this.setAccessibilityAttributes(r,e.node.element,t,n),a=this.treeDelegate.getTemplateId(e.node),l=this.treeRenderers.find(h=>h.templateId===a);if(!l)throw new Error(`No renderer found for template id ${a}`);let c=e.node;c===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(c=new Proxy(e.node,{}));const u=l.renderTemplate(r);l.renderElement(c,e.startIndex,u,e.height);const d=Dt(()=>{o.dispose(),l.disposeElement(c,e.startIndex,u,e.height),l.disposeTemplate(u),r.remove()});return{element:r,disposable:d}}setAccessibilityAttributes(e,t,n,s){if(!this.accessibilityProvider)return be.None;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,n,s))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,n))),this.accessibilityProvider.getRole&&e.setAttribute("role",this.accessibilityProvider.getRole(t)??"treeitem");const r=this.accessibilityProvider.getAriaLabel(t),o=r&&typeof r!="string"?r:xD(r),a=Cn(c=>{const u=c.readObservable(o);u?e.setAttribute("aria-label",u):e.removeAttribute("aria-label")});typeof r=="string"||r&&e.setAttribute("aria-label",r.get());const l=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return typeof l=="number"&&e.setAttribute("aria-level",`${l}`),e.setAttribute("aria-selected",String(!1)),a}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}}class TQe extends be{get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}constructor(e,t){super(),this.container=e,this.view=t,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new se,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new se,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this._register(ge(this.container,"focus",()=>this.onFocus())),this._register(ge(this.container,"blur",()=>this.onBlur())),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(n=>this.onKeyDown(n))),this._register(this.view.onMouseDown(n=>this.onMouseDown(n))),this._register(this.view.onContextMenu(n=>this.handleContextMenu(n)))}handleContextMenu(e){const t=e.browserEvent.target;if(!Mk(t)&&!JC(t)){this.focusedLast()&&this.view.domFocus();return}if(!Eh(e.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const o=this.state.stickyNodes.findIndex(a=>{var l;return a.node.element===((l=e.element)==null?void 0:l.element)});if(o===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(o);return}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const s=this.state.stickyNodes[this.focusedIndex].node.element,r=this.elements[this.focusedIndex];this._onContextMenu.fire({element:s,anchor:r,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state){if(e.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if(e.key==="ArrowDown"||e.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){const t=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([t]),this.scrollNodeUnderWidget(t,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}}onMouseDown(e){const t=e.browserEvent.target;!Mk(t)&&!JC(t)||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&t.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw new Error("Sticky scroll focus received illigel state");const n=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){const s=qo(n,0,t.count-1);this.setFocus(s)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){const t=this.state;if(!t)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){const n=t.stickyNodes[e];this.scrollNodeUnderWidget(n.endIndex+1,t)}}scrollNodeUnderWidget(e,t){const n=t.stickyNodes[t.count-1],s=t.count>1?t.stickyNodes[t.count-2]:void 0,r=this.view.getElementTop(e),o=s?s.position+s.height+n.height:n.height;this.view.scrollTop=r-o}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return this.state?this.view.getHTMLElement().classList.contains("sticky-scroll-focused"):!1}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw new Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){this.toggleElementActiveFocus(e,t&&this.domHasFocus),this.toggleElementPassiveFocus(e,t)}toggleCurrentElementActiveFocus(e){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],e)}toggleElementActiveFocus(e,t){e.classList.toggle("focused",t)}toggleElementPassiveFocus(e,t){e.classList.toggle("passive-focused",t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}onFocus(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function fT(i){let e=l0.Unknown;return PO(i.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=l0.Twistie:PO(i.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=l0.Element:PO(i.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=l0.Filter),{browserEvent:i.browserEvent,element:i.element?i.element.element:null,target:e}}function LQe(i){const e=Mk(i.browserEvent.target);return{element:i.element?i.element.element:null,browserEvent:i.browserEvent,anchor:i.anchor,isStickyScroll:e}}function vL(i,e){e(i),i.children.forEach(t=>vL(t,e))}class C6{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new se,this.onDidChange=this._onDidChange.event}set(e,t){!(t!=null&&t.__forceEvent)&&ks(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const s=this;this._onDidChange.fire({get elements(){return s.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=u=>l.delete(u);t.forEach(u=>vL(u,c)),this.set([...l.values()]);return}const n=new Set,s=l=>n.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>vL(l,s));const r=new Map,o=l=>r.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>vL(l,o));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!n.has(c))a.push(l);else{const d=r.get(c);d&&d.visible&&a.push(d)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class IQe extends Rge{constructor(e,t,n){super(e),this.tree=t,this.stickyScrollProvider=n}onViewPointer(e){if(Lge(e.browserEvent.target)||rm(e.browserEvent.target)||wC(e.browserEvent.target)||e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,s=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,r=JC(e.browserEvent.target);let o=!1;if(r?o=!0:typeof this.tree.expandOnlyOnTwistieClick=="function"?o=this.tree.expandOnlyOnTwistieClick(t.element):o=!!this.tree.expandOnlyOnTwistieClick,r)this.handleStickyScrollMouseEvent(e,t);else{if(o&&!s&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e)}if(t.collapsible&&(!r||s)){const a=this.tree.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),this.tree.toggleCollapsed(a,l),s){e.browserEvent.isHandledByList=!0;return}}r||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if(Sqe(e.browserEvent.target)||kqe(e.browserEvent.target))return;const n=this.stickyScrollProvider();if(!n)throw new Error("Sticky scroll controller not found");const s=this.list.indexOf(t),r=this.list.getElementTop(s),o=n.nodePositionTopBelowWidget(t);this.tree.scrollTop=r-o,this.list.domFocus(),this.list.setFocus([s]),this.list.setSelection([s])}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}onMouseDown(e){const t=e.browserEvent.target;if(!Mk(t)&&!JC(t)){super.onMouseDown(e);return}}onContextMenu(e){const t=e.browserEvent.target;if(!Mk(t)&&!JC(t)){super.onContextMenu(e);return}}}class DQe extends Du{constructor(e,t,n,s,r,o,a,l){super(e,t,n,s,l),this.focusTrait=r,this.selectionTrait=o,this.anchorTrait=a}createMouseController(e){return new IQe(this,e.tree,e.stickyScrollProvider)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;const s=[],r=[];let o;n.forEach((a,l)=>{this.focusTrait.has(a)&&s.push(e+l),this.selectionTrait.has(a)&&r.push(e+l),this.anchorTrait.has(a)&&(o=e+l)}),s.length>0&&super.setFocus(Q0([...super.getFocus(),...s])),r.length>0&&super.setSelection(Q0([...super.getSelection(),...r])),typeof o=="number"&&super.setAnchor(o)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(s=>this.element(s)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(s=>this.element(s)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class Cme{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return Le.filter(Le.map(this.view.onMouseDblClick,fT),e=>e.target!==l0.Filter)}get onMouseOver(){return Le.map(this.view.onMouseOver,fT)}get onMouseOut(){return Le.map(this.view.onMouseOut,fT)}get onContextMenu(){var e;return Le.any(Le.filter(Le.map(this.view.onContextMenu,LQe),t=>!t.isStickyScroll),((e=this.stickyScrollController)==null?void 0:e.onContextMenu)??Le.None)}get onPointer(){return Le.map(this.view.onPointer,fT)}get onKeyDown(){return this.view.onKeyDown}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return Le.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e;return((e=this.findController)==null?void 0:e.mode)??qh.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){var e;return((e=this.findController)==null?void 0:e.matchType)??o1.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,n,s,r={}){this._user=e,this._options=r,this.eventBufferer=new M2,this.onDidChangeFindOpenState=Le.None,this.onDidChangeStickyScrollFocused=Le.None,this.disposables=new Ze,this._onWillRefilter=new se,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new se,this.treeDelegate=new iz(n);const o=new AQ,a=new AQ,l=this.disposables.add(new yQe(a.event)),c=new ife;this.renderers=s.map(p=>new X7(p,()=>this.model,o.event,l,c,r));for(const p of this.renderers)this.disposables.add(p);let u;r.keyboardNavigationLabelProvider&&(u=new wQe(this,r.keyboardNavigationLabelProvider,r.filter),r={...r,filter:u},this.disposables.add(u)),this.focus=new C6(()=>this.view.getFocusedElements()[0],r.identityProvider),this.selection=new C6(()=>this.view.getSelectedElements()[0],r.identityProvider),this.anchor=new C6(()=>this.view.getAnchorElement(),r.identityProvider),this.view=new DQe(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...bQe(()=>this.model,r),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.model=this.createModel(e,this.view,r),o.input=this.model.onDidChangeCollapseState;const d=Le.forEach(this.model.onDidSplice,p=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(p),this.selection.onDidModelSplice(p)})},this.disposables);d(()=>null,null,this.disposables);const h=this.disposables.add(new se),g=this.disposables.add(new B2(0));if(this.disposables.add(Le.any(d,this.focus.onDidChange,this.selection.onDidChange)(()=>{g.trigger(()=>{const p=new Set;for(const _ of this.focus.getNodes())p.add(_);for(const _ of this.selection.getNodes())p.add(_);h.fire([...p.values()])})})),a.input=h.event,r.keyboardSupport!==!1){const p=Le.chain(this.view.onKeyDown,_=>_.filter(v=>!rm(v.target)).map(v=>new hi(v)));Le.chain(p,_=>_.filter(v=>v.keyCode===15))(this.onLeftArrow,this,this.disposables),Le.chain(p,_=>_.filter(v=>v.keyCode===17))(this.onRightArrow,this,this.disposables),Le.chain(p,_=>_.filter(v=>v.keyCode===10))(this.onSpace,this,this.disposables)}if((r.findWidgetEnabled??!0)&&r.keyboardNavigationLabelProvider&&r.contextViewProvider){const p=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new CQe(this,this.model,this.view,u,r.contextViewProvider,p),this.focusNavigationFilter=_=>this.findController.shouldAllowFocus(_),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=Le.None,this.onDidChangeFindMatchType=Le.None;r.enableStickyScroll&&(this.stickyScrollController=new see(this,this.model,this.view,this.renderers,this.treeDelegate,r),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=Hl(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===oy.Always)}updateOptions(e={}){var t;this._options={...this._options,...e};for(const n of this.renderers)n.updateOptions(e);this.view.updateOptions(this._options),(t=this.findController)==null||t.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===oy.Always)}get options(){return this._options}updateStickyScroll(e){var t;!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new see(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=Le.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),(t=this.stickyScrollController)==null||t.updateOptions(e)}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}domFocus(){var e;(e=this.stickyScrollController)!=null&&e.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}layout(e,t){var n;this.view.layout(e,t),Fy(t)&&((n=this.findController)==null||n.layout(t))}style(e){const t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`));const s=e.treeStickyScrollBackground??e.listBackground;s&&(n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${s}; }`),n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${s}; }`)),e.treeStickyScrollBorder&&n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${e.treeStickyScrollBorder}; }`),e.treeStickyScrollShadow&&n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${e.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),e.listFocusForeground&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));const r=ef(e.listFocusAndSelectionOutline,ef(e.listSelectionOutline,e.listFocusOutline??""));r&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${r}; outline-offset: -1px;}`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){this.eventBufferer.bufferEvents(()=>{const n=e.map(r=>this.model.getNode(r));this.selection.set(n,t);const s=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setSelection(s,t,!0)})}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents(()=>{const n=e.map(r=>this.model.getNode(r));this.focus.set(n,t);const s=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setFocus(s,t,!0)})}focusNext(e=1,t=!1,n,s=Eh(n)&&n.altKey?void 0:this.focusNavigationFilter){this.view.focusNext(e,t,n,s)}focusPrevious(e=1,t=!1,n,s=Eh(n)&&n.altKey?void 0:this.focusNavigationFilter){this.view.focusPrevious(e,t,n,s)}focusNextPage(e,t=Eh(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusNextPage(e,t)}focusPreviousPage(e,t=Eh(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusPreviousPage(e,t,()=>{var n;return((n=this.stickyScrollController)==null?void 0:n.height)??0})}focusLast(e,t=Eh(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusLast(e,t)}focusFirst(e,t=Eh(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);if(n!==-1)if(!this.stickyScrollController)this.view.reveal(n,t);else{const s=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(n,t,s)}}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n);if(!this.model.setCollapsed(s,!0)){const o=this.model.getParentNodeLocation(s);if(!o)return;const a=this.model.getListIndex(o);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n);if(!this.model.setCollapsed(s,!1)){if(!n.children.some(l=>l.visible))return;const[o]=this.view.getFocus(),a=o+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n),r=e.browserEvent.altKey;this.model.setCollapsed(s,void 0,r)}dispose(){var e;br(this.disposables),(e=this.stickyScrollController)==null||e.dispose(),this.view.dispose()}}class sz{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new pQe(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare(s,r){return n.sorter.compare(s.element,r.element)}}),this.identityProvider=n.identityProvider}setChildren(e,t=yn.empty(),n={}){const s=this.getElementLocation(e);this._setChildren(s,this.preserveCollapseState(t),n)}_setChildren(e,t=yn.empty(),n){const s=new Set,r=new Set,o=l=>{var u;if(l.element===null)return;const c=l;if(s.add(c.element),this.nodes.set(c.element,c),this.identityProvider){const d=this.identityProvider.getId(c.element).toString();r.add(d),this.nodesByIdentity.set(d,c)}(u=n.onDidCreateNode)==null||u.call(n,c)},a=l=>{var u;if(l.element===null)return;const c=l;if(s.has(c.element)||this.nodes.delete(c.element),this.identityProvider){const d=this.identityProvider.getId(c.element).toString();r.has(d)||this.nodesByIdentity.delete(d)}(u=n.onDidDeleteNode)==null||u.call(n,c)};this.model.splice([...e,0],Number.MAX_VALUE,t,{...n,onDidCreateNode:o,onDidDeleteNode:a})}preserveCollapseState(e=yn.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),yn.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){const o=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(o)}if(!n){let o;return typeof t.collapsed>"u"?o=void 0:t.collapsed===za.Collapsed||t.collapsed===za.PreserveOrCollapsed?o=!0:t.collapsed===za.Expanded||t.collapsed===za.PreserveOrExpanded?o=!1:o=!!t.collapsed,{...t,children:this.preserveCollapseState(t.children),collapsed:o}}const s=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible;let r;return typeof t.collapsed>"u"||t.collapsed===za.PreserveOrCollapsed||t.collapsed===za.PreserveOrExpanded?r=n.collapsed:t.collapsed===za.Collapsed?r=!0:t.collapsed===za.Expanded?r=!1:r=!!t.collapsed,{...t,collapsible:s,collapsed:r,children:this.preserveCollapseState(t.children)}})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const s=this.getElementLocation(e);return this.model.setCollapsed(s,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Ga(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Ga(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Ga(this.user,`Tree element not found: ${e}`);const n=this.model.getNodeLocation(t),s=this.model.getParentNodeLocation(n);return this.model.getNode(s).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Ga(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function bL(i){const e=[i.element],t=i.incompressible||!1;return{element:{elements:e,incompressible:t},children:yn.map(yn.from(i.children),bL),collapsible:i.collapsible,collapsed:i.collapsed}}function yL(i){const e=[i.element],t=i.incompressible||!1;let n,s;for(;[s,n]=yn.consume(yn.from(i.children),2),!(s.length!==1||s[0].incompressible);)i=s[0],e.push(i.element);return{element:{elements:e,incompressible:t},children:yn.map(yn.concat(s,n),yL),collapsible:i.collapsible,collapsed:i.collapsed}}function Z7(i,e=0){let t;return e<i.element.elements.length-1?t=[Z7(i,e+1)]:t=yn.map(yn.from(i.children),n=>Z7(n,0)),e===0&&i.element.incompressible?{element:i.element.elements[e],children:t,incompressible:!0,collapsible:i.collapsible,collapsed:i.collapsed}:{element:i.element.elements[e],children:t,collapsible:i.collapsible,collapsed:i.collapsed}}function ree(i){return Z7(i,0)}function Sme(i,e,t){return i.element===e?{...i,children:t}:{...i,children:yn.map(yn.from(i.children),n=>Sme(n,e,t))}}const NQe=i=>({getId(e){return e.elements.map(t=>i.getId(t).toString()).join("\0")}});class RQe{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new sz(e,t,n),this.enabled=typeof n.compressionEnabled>"u"?!0:n.compressionEnabled,this.identityProvider=n.identityProvider}setChildren(e,t=yn.empty(),n){const s=n.diffIdentityProvider&&NQe(n.diffIdentityProvider);if(e===null){const p=yn.map(t,this.enabled?yL:bL);this._setChildren(null,p,{diffIdentityProvider:s,diffDepth:1/0});return}const r=this.nodes.get(e);if(!r)throw new Ga(this.user,"Unknown compressed tree node");const o=this.model.getNode(r),a=this.model.getParentNodeLocation(r),l=this.model.getNode(a),c=ree(o),u=Sme(c,e,t),d=(this.enabled?yL:bL)(u),h=n.diffIdentityProvider?(p,_)=>n.diffIdentityProvider.getId(p)===n.diffIdentityProvider.getId(_):void 0;if(ks(d.element.elements,o.element.elements,h)){this._setChildren(r,d.children||yn.empty(),{diffIdentityProvider:s,diffDepth:1});return}const g=l.children.map(p=>p===o?d:p);this._setChildren(l.element,g,{diffIdentityProvider:s,diffDepth:o.depth-l.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const n=this.model.getNode().children,s=yn.map(n,ree),r=yn.map(s,e?yL:bL);this._setChildren(null,r,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){const s=new Set,r=a=>{for(const l of a.element.elements)s.add(l),this.nodes.set(l,a.element)},o=a=>{for(const l of a.element.elements)s.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,{...n,onDidCreateNode:r,onDidDeleteNode:o})}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const s=this.getCompressedNode(e);return this.model.setCollapsed(s,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Ga(this.user,`Tree element not found: ${e}`);return t}}const AQe=i=>i[i.length-1];class rz{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new rz(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}}function PQe(i,e){return{splice(t,n,s){e.splice(t,n,s.map(r=>i.map(r)))},updateElementHeight(t,n){e.updateElementHeight(t,n)}}}function MQe(i,e){return{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(i(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(i(t),n)}}}}class OQe{get onDidSplice(){return Le.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidChangeCollapseState(){return Le.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return Le.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e,t,n={}){this.rootRef=null,this.elementMapper=n.elementMapper||AQe;const s=r=>this.elementMapper(r.elements);this.nodeMapper=new tz(r=>new rz(s,r)),this.model=new RQe(e,PQe(this.nodeMapper,t),MQe(s,n))}setChildren(e,t=yn.empty(),n={}){this.model.setChildren(e,t,n)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var FQe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r};class oz extends Cme{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,n,s,r={}){super(e,t,n,s,r),this.user=e}setChildren(e,t=yn.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new sz(e,t,n)}}class kme{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t,n){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=n,this.templateId=n.templateId,n.onDidChangeTwistieState&&(this.onDidChangeTwistieState=n.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){let r=this.stickyScrollDelegate.getCompressedNode(e);r||(r=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),r.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,s)):(n.compressedTreeNode=r,this.renderer.renderCompressedElements(r,t,n.data,s))}disposeElement(e,t,n,s){var r,o,a,l;n.compressedTreeNode?(o=(r=this.renderer).disposeCompressedElements)==null||o.call(r,n.compressedTreeNode,t,n.data,s):(l=(a=this.renderer).disposeElement)==null||l.call(a,e,t,n.data,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}FQe([Fi],kme.prototype,"compressedTreeNodeProvider",null);class BQe{constructor(e){this.modelProvider=e,this.compressedStickyNodes=new Map}getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,n){if(this.compressedStickyNodes.clear(),e.length===0)return[];for(let s=0;s<e.length;s++){const r=e[s],o=r.position+r.height;if(s+1<e.length&&o+e[s+1].height>n||s>=t-1&&t<e.length){const l=e.slice(0,s),c=e.slice(s),u=this.compressStickyNodes(c);return[...l,u]}}return e}compressStickyNodes(e){if(e.length===0)throw new Error("Can't compress empty sticky nodes");const t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];const n=[];for(let c=0;c<e.length;c++){const u=e[c],d=t.getCompressedTreeNode(u.node.element);if(d.element){if(c!==0&&d.element.incompressible)break;n.push(...d.element.elements)}}if(n.length<2)return e[0];const s=e[e.length-1],r={elements:n,incompressible:!1},o={...s.node,children:[],element:r},a=new Proxy(e[0].node,{}),l={node:a,startIndex:e[0].startIndex,endIndex:s.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(a,o),l}}function VQe(i,e){return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=i().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}}}class xme extends oz{constructor(e,t,n,s,r={}){const o=()=>this,a=new BQe(()=>this.model),l=s.map(c=>new kme(o,a,c));super(e,t,n,l,{...VQe(o,r),stickyScrollDelegate:a})}setChildren(e,t=yn.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t,n){return new OQe(e,t,n)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}function S6(i){return{...i,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function J7(i,e){return e.parent?e.parent===i?!0:J7(i,e.parent):!1}function WQe(i,e){return i===e||J7(i,e)||J7(e,i)}class az{get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new az(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class HQe{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...dn.asClassNameArray(Ke.treeItemLoading)),!0):(t.classList.remove(...dn.asClassNameArray(Ke.treeItemLoading)),!1)}disposeElement(e,t,n,s){var r,o;(o=(r=this.renderer).disposeElement)==null||o.call(r,this.nodeMapper.map(e),t,n.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function oee(i){return{browserEvent:i.browserEvent,elements:i.elements.map(e=>e.element)}}function aee(i){return{browserEvent:i.browserEvent,element:i.element&&i.element.element,target:i.target}}class UQe extends X2{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function k6(i){return i instanceof X2?new UQe(i):i}class zQe{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){var n,s;(s=(n=this.dnd).onDragStart)==null||s.call(n,k6(e),t)}onDragOver(e,t,n,s,r,o=!0){return this.dnd.onDragOver(k6(e),t&&t.element,n,s,r)}drop(e,t,n,s,r){this.dnd.drop(k6(e),t&&t.element,n,s,r)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)==null||n.call(t,e)}dispose(){this.dnd.dispose()}}function Eme(i){return i&&{...i,collapseByDefault:!0,identityProvider:i.identityProvider&&{getId(e){return i.identityProvider.getId(e.element)}},dnd:i.dnd&&new zQe(i.dnd),multipleSelectionController:i.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return i.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element})},isSelectionRangeChangeEvent(e){return i.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})}},accessibilityProvider:i.accessibilityProvider&&{...i.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:i.accessibilityProvider.getRole?e=>i.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:i.accessibilityProvider.isChecked?e=>{var t;return!!((t=i.accessibilityProvider)!=null&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return i.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return i.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:i.accessibilityProvider.getWidgetRole?()=>i.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:i.accessibilityProvider.getAriaLevel&&(e=>i.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:i.accessibilityProvider.getActiveDescendantId&&(e=>i.accessibilityProvider.getActiveDescendantId(e.element))},filter:i.filter&&{filter(e,t){return i.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:i.keyboardNavigationLabelProvider&&{...i.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(e){return i.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}},sorter:void 0,expandOnlyOnTwistieClick:typeof i.expandOnlyOnTwistieClick>"u"?void 0:typeof i.expandOnlyOnTwistieClick!="function"?i.expandOnlyOnTwistieClick:e=>i.expandOnlyOnTwistieClick(e.element),defaultFindVisibility:e=>e.hasChildren&&e.stale?1:typeof i.defaultFindVisibility=="number"?i.defaultFindVisibility:typeof i.defaultFindVisibility>"u"?2:i.defaultFindVisibility(e.element)}}function eF(i,e){e(i),i.children.forEach(t=>eF(t,e))}class Tme{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return Le.map(this.tree.onDidChangeFocus,oee)}get onDidChangeSelection(){return Le.map(this.tree.onDidChangeSelection,oee)}get onMouseDblClick(){return Le.map(this.tree.onMouseDblClick,aee)}get onPointer(){return Le.map(this.tree.onPointer,aee)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,n,s,r,o={}){this.user=e,this.dataSource=r,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new se,this._onDidChangeNodeSlowState=new se,this.nodeMapper=new tz(a=>new az(a)),this.disposables=new Ze,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=typeof o.autoExpandSingleChildren>"u"?!1:o.autoExpandSingleChildren,this.sorter=o.sorter,this.getDefaultCollapseState=a=>o.collapseByDefault?o.collapseByDefault(a)?za.PreserveOrCollapsed:za.PreserveOrExpanded:void 0,this.tree=this.createTree(e,t,n,s,o),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=S6({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(e,t,n,s,r){const o=new iz(n),a=s.map(c=>new HQe(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=Eme(r)||{};return new oz(e,t,o,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.refreshPromises.forEach(s=>s.cancel()),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)}async _updateChildren(e=this.root.element,t=!0,n=!1,s,r){if(typeof this.root.element>"u")throw new Ga(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await Le.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(await this.refreshAndRenderNode(o,t,s,r),n)try{this.tree.rerender(o)}catch{}}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e,t=!1){const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}async expand(e,t=!1){if(typeof this.root.element>"u")throw new Ga(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await Le.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(await this.root.refreshPromise,await Le.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;const s=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(await this.root.refreshPromise,await Le.toPromise(this._onDidRender.event)),s}setSelection(e,t){const n=e.map(s=>this.getDataNode(s));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const n=e.map(s=>this.getDataNode(s));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Ga(this.user,`Data tree node not found: ${e}`);return t}async refreshAndRenderNode(e,t,n,s){await this.refreshNode(e,t,n),!this.disposables.isDisposed&&this.render(e,n,s)}async refreshNode(e,t,n){let s;if(this.subTreeRefreshPromises.forEach((r,o)=>{!s&&WQe(o,e)&&(s=r.then(()=>this.refreshNode(e,t,n)))}),s)return s;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,this.setChildren(e,[],t,n);return}return this.doRefreshSubTree(e,t,n)}async doRefreshSubTree(e,t,n){let s;e.refreshPromise=new Promise(r=>s=r),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const r=await this.doRefreshNode(e,t,n);e.stale=!1,await t8.settled(r.map(o=>this.doRefreshSubTree(o,t,n)))}finally{s()}}async doRefreshNode(e,t,n){e.hasChildren=!!this.dataSource.hasChildren(e.element);let s;if(!e.hasChildren)s=Promise.resolve(yn.empty());else{const r=this.doGetChildren(e);if(EQ(r))s=Promise.resolve(r);else{const o=wk(800);o.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),s=r.finally(()=>o.cancel())}}try{const r=await s;return this.setChildren(e,r,t,n)}catch(r){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),A2(r))return[];throw r}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const n=this.dataSource.getChildren(e.element);return EQ(n)?this.processChildren(n):(t=hhe(async()=>this.processChildren(await n)),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(Un))}setChildren(e,t,n,s){const r=[...t];if(e.children.length===0&&r.length===0)return[];const o=new Map,a=new Map;for(const u of e.children)o.set(u.element,u),this.identityProvider&&a.set(u.id,{node:u,collapsed:this.tree.hasElement(u)&&this.tree.isCollapsed(u)});const l=[],c=r.map(u=>{const d=!!this.dataSource.hasChildren(u);if(!this.identityProvider){const _=S6({element:u,parent:e,hasChildren:d,defaultCollapseState:this.getDefaultCollapseState(u)});return d&&_.defaultCollapseState===za.PreserveOrExpanded&&l.push(_),_}const h=this.identityProvider.getId(u).toString(),g=a.get(h);if(g){const _=g.node;return o.delete(_.element),this.nodes.delete(_.element),this.nodes.set(u,_),_.element=u,_.hasChildren=d,n?g.collapsed?(_.children.forEach(v=>eF(v,y=>this.nodes.delete(y.element))),_.children.splice(0,_.children.length),_.stale=!0):l.push(_):d&&!g.collapsed&&l.push(_),_}const p=S6({element:u,parent:e,id:h,hasChildren:d,defaultCollapseState:this.getDefaultCollapseState(u)});return s&&s.viewState.focus&&s.viewState.focus.indexOf(h)>-1&&s.focus.push(p),s&&s.viewState.selection&&s.viewState.selection.indexOf(h)>-1&&s.selection.push(p),(s&&s.viewState.expanded&&s.viewState.expanded.indexOf(h)>-1||d&&p.defaultCollapseState===za.PreserveOrExpanded)&&l.push(p),p});for(const u of o.values())eF(u,d=>this.nodes.delete(d.element));for(const u of c)this.nodes.set(u.element,u);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].forceExpanded=!0,l.push(c[0])),l}render(e,t,n){const s=e.children.map(o=>this.asTreeElement(o,t)),r=n&&{...n,diffIdentityProvider:n.diffIdentityProvider&&{getId(o){return n.diffIdentityProvider.getId(o.element)}}};this.tree.setChildren(e===this.root?null:e,s,r),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:e.forceExpanded?(n=!1,e.forceExpanded=!1):n=e.defaultCollapseState,{element:e,children:e.hasChildren?yn.map(e.children,s=>this.asTreeElement(s,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose(),this.tree.dispose()}}class lz{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new lz(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class jQe{constructor(e,t,n,s){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=s,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,s)}renderCompressedElements(e,t,n,s){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...dn.asClassNameArray(Ke.treeItemLoading)),!0):(t.classList.remove(...dn.asClassNameArray(Ke.treeItemLoading)),!1)}disposeElement(e,t,n,s){var r,o;(o=(r=this.renderer).disposeElement)==null||o.call(r,this.nodeMapper.map(e),t,n.templateData,s)}disposeCompressedElements(e,t,n,s){var r,o;(o=(r=this.renderer).disposeCompressedElements)==null||o.call(r,this.compressibleNodeMapperProvider().map(e),t,n.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=br(this.disposables)}}function $Qe(i){const e=i&&Eme(i);return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(t){return i.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}}}}class qQe extends Tme{constructor(e,t,n,s,r,o,a={}){super(e,t,n,r,o,a),this.compressionDelegate=s,this.compressibleNodeMapper=new tz(l=>new lz(l)),this.filter=a.filter}createTree(e,t,n,s,r){const o=new iz(n),a=s.map(c=>new jQe(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=$Qe(r)||{};return new xme(e,t,o,a,l)}asTreeElement(e,t){return{incompressible:this.compressionDelegate.isIncompressible(e.element),...super.asTreeElement(e,t)}}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t,n){if(!this.identityProvider)return super.render(e,t);const s=g=>this.identityProvider.getId(g).toString(),r=g=>{const p=new Set;for(const _ of g){const v=this.tree.getCompressedTreeNode(_===this.root?null:_);if(v.element)for(const y of v.element.elements)p.add(s(y.element))}return p},o=r(this.tree.getSelection()),a=r(this.tree.getFocus());super.render(e,t,n);const l=this.getSelection();let c=!1;const u=this.getFocus();let d=!1;const h=g=>{const p=g.element;if(p)for(let _=0;_<p.elements.length;_++){const v=s(p.elements[_].element),y=p.elements[p.elements.length-1].element;o.has(v)&&l.indexOf(y)===-1&&(l.push(y),c=!0),a.has(v)&&u.indexOf(y)===-1&&(u.push(y),d=!0)}g.children.forEach(h)};h(this.tree.getCompressedTreeNode(e===this.root?null:e)),c&&this.setSelection(l),d&&this.setFocus(u)}processChildren(e){return this.filter&&(e=yn.filter(e,t=>{const n=this.filter.filter(t,1),s=KQe(n);if(s===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return s===1})),super.processChildren(e)}}function KQe(i){return typeof i=="boolean"?i?1:0:nz(i)?Uk(i.visibility):Uk(i)}class GQe extends Cme{constructor(e,t,n,s,r,o={}){super(e,t,n,s,o),this.user=e,this.dataSource=r,this.identityProvider=o.identityProvider}createModel(e,t,n){return new sz(e,t,n)}}new et("isMac",rn,S("isMac","Whether the operating system is macOS"));new et("isLinux",ia,S("isLinux","Whether the operating system is Linux"));new et("isWindows",Sa,S("isWindows","Whether the operating system is Windows"));new et("isWeb",By,S("isWeb","Whether the platform is a web browser"));new et("isMacNative",rn&&!By,S("isMacNative","Whether the operating system is macOS on a non-browser platform"));new et("isIOS",X0,S("isIOS","Whether the operating system is iOS"));new et("isMobile",Ade,S("isMobile","Whether the platform is a mobile web browser"));new et("isDevelopment",!1,!0);new et("productQualityType","",S("productQualityType","Quality type of VS Code"));const Lme="inputFocus",YQe=new et(Lme,!1,S("inputFocus","Whether keyboard focus is inside an input box"));var Mf=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ii=function(i,e){return function(t,n){e(t,n,i)}};const jd=nn("listService");class QQe{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new Ze,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(e){var t,n;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)==null||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(n=this._lastFocusedWidget)==null||n.getHTMLElement().classList.add("last-focused"))}register(e,t){if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new Age(Hl(),"").style(qy)),this.lists.some(s=>s.widget===e))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),KH(e.getHTMLElement())&&this.setLastFocusedList(e),Cd(e.onDidFocus(()=>this.setLastFocusedList(e)),Dt(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(s=>s!==n),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}const zk=new et("listScrollAtBoundary","none");En.or(zk.isEqualTo("top"),zk.isEqualTo("both"));En.or(zk.isEqualTo("bottom"),zk.isEqualTo("both"));const Ime=new et("listFocus",!0),Dme=new et("treestickyScrollFocused",!1),TA=new et("listSupportsMultiselect",!0);En.and(Ime,En.not(Lme),Dme.negate());const cz=new et("listHasSelectionOrFocus",!1),uz=new et("listDoubleSelection",!1),dz=new et("listMultiSelection",!1),LA=new et("listSelectionNavigation",!1),XQe=new et("listSupportsFind",!0),ZQe=new et("treeElementCanCollapse",!1),JQe=new et("treeElementHasParent",!1),eXe=new et("treeElementCanExpand",!1),tXe=new et("treeElementHasChild",!1),nXe=new et("treeFindOpen",!1),Nme="listTypeNavigationMode",Rme="listAutomaticKeyboardNavigation";function IA(i,e){const t=i.createScoped(e.getHTMLElement());return Ime.bindTo(t),t}function DA(i,e){const t=zk.bindTo(i),n=()=>{const s=e.scrollTop===0,r=e.scrollHeight-e.renderHeight-e.scrollTop<1;s&&r?t.set("both"):s?t.set("top"):r?t.set("bottom"):t.set("none")};return n(),e.onDidScroll(n)}const M1="workbench.list.multiSelectModifier",wL="workbench.list.openMode",Vl="workbench.list.horizontalScrolling",hz="workbench.list.defaultFindMode",fz="workbench.list.typeNavigationMode",WD="workbench.list.keyboardNavigation",_u="workbench.list.scrollByPage",gz="workbench.list.defaultFindMatchType",jk="workbench.tree.indent",HD="workbench.tree.renderIndentGuides",vu="workbench.list.smoothScrolling",Ad="workbench.list.mouseWheelScrollSensitivity",Pd="workbench.list.fastScrollSensitivity",UD="workbench.tree.expandMode",zD="workbench.tree.enableStickyScroll",jD="workbench.tree.stickyScrollMaxItemCount";function Md(i){return i.getValue(M1)==="alt"}class iXe extends be{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=Md(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(M1)&&(this.useAltAsMultipleSelectionModifier=Md(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:Dge(e)}isSelectionRangeChangeEvent(e){return Nge(e)}}function NA(i,e){const t=i.get(Oi),n=i.get(yr),s=new Ze;return[{...e,keyboardNavigationDelegate:{mightProducePrintableCharacter(o){return n.mightProducePrintableCharacter(o)}},smoothScrolling:!!t.getValue(vu),mouseWheelScrollSensitivity:t.getValue(Ad),fastScrollSensitivity:t.getValue(Pd),multipleSelectionController:e.multipleSelectionController??s.add(new iXe(t)),keyboardNavigationEventFilter:oXe(n),scrollByPage:!!t.getValue(_u)},s]}let lee=class extends Du{constructor(e,t,n,s,r,o,a,l,c){const u=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!l.getValue(Vl),[d,h]=c.invokeFunction(NA,r);super(e,t,n,s,{keyboardSupport:!1,...d,horizontalScrolling:u}),this.disposables.add(h),this.contextKeyService=IA(o,this),this.disposables.add(DA(this.contextKeyService,this)),this.listSupportsMultiSelect=TA.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),LA.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this.listHasSelectionOrFocus=cz.bindTo(this.contextKeyService),this.listDoubleSelection=uz.bindTo(this.contextKeyService),this.listMultiSelection=dz.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Md(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const p=this.getSelection(),_=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(p.length>0||_.length>0),this.listMultiSelection.set(p.length>1),this.listDoubleSelection.set(p.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const p=this.getSelection(),_=this.getFocus();this.listHasSelectionOrFocus.set(p.length>0||_.length>0)})),this.disposables.add(l.onDidChangeConfiguration(p=>{p.affectsConfiguration(M1)&&(this._useAltAsMultipleSelectionModifier=Md(l));let _={};if(p.affectsConfiguration(Vl)&&this.horizontalScrolling===void 0){const v=!!l.getValue(Vl);_={..._,horizontalScrolling:v}}if(p.affectsConfiguration(_u)){const v=!!l.getValue(_u);_={..._,scrollByPage:v}}if(p.affectsConfiguration(vu)){const v=!!l.getValue(vu);_={..._,smoothScrolling:v}}if(p.affectsConfiguration(Ad)){const v=l.getValue(Ad);_={..._,mouseWheelScrollSensitivity:v}}if(p.affectsConfiguration(Pd)){const v=l.getValue(Pd);_={..._,fastScrollSensitivity:v}}Object.keys(_).length>0&&this.updateOptions(_)})),this.navigator=new Ame(this,{configurationService:l,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?J2(e):qy)}};lee=Mf([ii(5,Nn),ii(6,jd),ii(7,Oi),ii(8,Pn)],lee);let cee=class extends sQe{constructor(e,t,n,s,r,o,a,l,c){const u=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!l.getValue(Vl),[d,h]=c.invokeFunction(NA,r);super(e,t,n,s,{keyboardSupport:!1,...d,horizontalScrolling:u}),this.disposables=new Ze,this.disposables.add(h),this.contextKeyService=IA(o,this),this.disposables.add(DA(this.contextKeyService,this.widget)),this.horizontalScrolling=r.horizontalScrolling,this.listSupportsMultiSelect=TA.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),LA.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this._useAltAsMultipleSelectionModifier=Md(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(p=>{p.affectsConfiguration(M1)&&(this._useAltAsMultipleSelectionModifier=Md(l));let _={};if(p.affectsConfiguration(Vl)&&this.horizontalScrolling===void 0){const v=!!l.getValue(Vl);_={..._,horizontalScrolling:v}}if(p.affectsConfiguration(_u)){const v=!!l.getValue(_u);_={..._,scrollByPage:v}}if(p.affectsConfiguration(vu)){const v=!!l.getValue(vu);_={..._,smoothScrolling:v}}if(p.affectsConfiguration(Ad)){const v=l.getValue(Ad);_={..._,mouseWheelScrollSensitivity:v}}if(p.affectsConfiguration(Pd)){const v=l.getValue(Pd);_={..._,fastScrollSensitivity:v}}Object.keys(_).length>0&&this.updateOptions(_)})),this.navigator=new Ame(this,{configurationService:l,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?J2(e):qy)}dispose(){this.disposables.dispose(),super.dispose()}};cee=Mf([ii(5,Nn),ii(6,jd),ii(7,Oi),ii(8,Pn)],cee);let uee=class extends Q7{constructor(e,t,n,s,r,o,a,l,c,u){const d=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!c.getValue(Vl),[h,g]=u.invokeFunction(NA,o);super(e,t,n,s,r,{keyboardSupport:!1,...h,horizontalScrolling:d}),this.disposables.add(g),this.contextKeyService=IA(a,this),this.disposables.add(DA(this.contextKeyService,this)),this.listSupportsMultiSelect=TA.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),LA.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=cz.bindTo(this.contextKeyService),this.listDoubleSelection=uz.bindTo(this.contextKeyService),this.listMultiSelection=dz.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Md(c),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const _=this.getSelection(),v=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(_.length>0||v.length>0),this.listMultiSelection.set(_.length>1),this.listDoubleSelection.set(_.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const _=this.getSelection(),v=this.getFocus();this.listHasSelectionOrFocus.set(_.length>0||v.length>0)})),this.disposables.add(c.onDidChangeConfiguration(_=>{_.affectsConfiguration(M1)&&(this._useAltAsMultipleSelectionModifier=Md(c));let v={};if(_.affectsConfiguration(Vl)&&this.horizontalScrolling===void 0){const y=!!c.getValue(Vl);v={...v,horizontalScrolling:y}}if(_.affectsConfiguration(_u)){const y=!!c.getValue(_u);v={...v,scrollByPage:y}}if(_.affectsConfiguration(vu)){const y=!!c.getValue(vu);v={...v,smoothScrolling:y}}if(_.affectsConfiguration(Ad)){const y=c.getValue(Ad);v={...v,mouseWheelScrollSensitivity:y}}if(_.affectsConfiguration(Pd)){const y=c.getValue(Pd);v={...v,fastScrollSensitivity:y}}Object.keys(v).length>0&&this.updateOptions(v)})),this.navigator=new sXe(this,{configurationService:c,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?J2(e):qy)}dispose(){this.disposables.dispose(),super.dispose()}};uee=Mf([ii(6,Nn),ii(7,jd),ii(8,Oi),ii(9,Pn)],uee);class mz extends be{constructor(e,t){super(),this.widget=e,this._onDidOpen=this._register(new se),this.onDidOpen=this._onDidOpen.event,this._register(Le.filter(this.widget.onDidChangeSelection,n=>Eh(n.browserEvent))(n=>this.onSelectionFromKeyboard(n))),this._register(this.widget.onPointer(n=>this.onPointer(n.element,n.browserEvent))),this._register(this.widget.onMouseDblClick(n=>this.onMouseDblClick(n.element,n.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t!=null&&t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(wL))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(n=>{n.affectsConfiguration(wL)&&(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(wL))!=="doubleClick")}))):this.openOnSingleClick=(t==null?void 0:t.openOnSingleClick)??!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,s=typeof t.pinned=="boolean"?t.pinned:!n;this._open(this.getSelectedElement(),n,s,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const s=t.button===1,r=!0,o=s,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const r=!1,o=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}_open(e,t,n,s,r){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:s,element:e,browserEvent:r})}}class Ame extends mz{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class sXe extends mz{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class rXe extends mz{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}}function oXe(i){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;const n=i.softDispatch(t,t.target);return n.kind===1?(e=!0,!1):(e=!1,n.kind===0)}}let tF=class extends oz{constructor(e,t,n,s,r,o,a,l,c){const{options:u,getTypeNavigationMode:d,disposable:h}=o.invokeFunction(ix,r);super(e,t,n,s,u),this.disposables.add(h),this.internals=new a1(this,r,d,r.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};tF=Mf([ii(5,Pn),ii(6,Nn),ii(7,jd),ii(8,Oi)],tF);let dee=class extends xme{constructor(e,t,n,s,r,o,a,l,c){const{options:u,getTypeNavigationMode:d,disposable:h}=o.invokeFunction(ix,r);super(e,t,n,s,u),this.disposables.add(h),this.internals=new a1(this,r,d,r.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};dee=Mf([ii(5,Pn),ii(6,Nn),ii(7,jd),ii(8,Oi)],dee);let hee=class extends GQe{constructor(e,t,n,s,r,o,a,l,c,u){const{options:d,getTypeNavigationMode:h,disposable:g}=a.invokeFunction(ix,o);super(e,t,n,s,r,d),this.disposables.add(g),this.internals=new a1(this,o,h,o.overrideStyles,l,c,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};hee=Mf([ii(6,Pn),ii(7,Nn),ii(8,jd),ii(9,Oi)],hee);let fee=class extends Tme{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,s,r,o,a,l,c,u){const{options:d,getTypeNavigationMode:h,disposable:g}=a.invokeFunction(ix,o);super(e,t,n,s,r,d),this.disposables.add(g),this.internals=new a1(this,o,h,o.overrideStyles,l,c,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};fee=Mf([ii(6,Pn),ii(7,Nn),ii(8,jd),ii(9,Oi)],fee);let gee=class extends qQe{constructor(e,t,n,s,r,o,a,l,c,u,d){const{options:h,getTypeNavigationMode:g,disposable:p}=l.invokeFunction(ix,a);super(e,t,n,s,r,o,h),this.disposables.add(p),this.internals=new a1(this,a,g,a.overrideStyles,c,u,d),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};gee=Mf([ii(7,Pn),ii(8,Nn),ii(9,jd),ii(10,Oi)],gee);function Pme(i){const e=i.getValue(hz);if(e==="highlight")return qh.Highlight;if(e==="filter")return qh.Filter;const t=i.getValue(WD);if(t==="simple"||t==="highlight")return qh.Highlight;if(t==="filter")return qh.Filter}function Mme(i){const e=i.getValue(gz);if(e==="fuzzy")return o1.Fuzzy;if(e==="contiguous")return o1.Contiguous}function ix(i,e){const t=i.get(Oi),n=i.get(G2),s=i.get(Nn),r=i.get(Pn),o=()=>{const h=s.getContextKeyValue(Nme);if(h==="automatic")return hd.Automatic;if(h==="trigger"||s.getContextKeyValue(Rme)===!1)return hd.Trigger;const p=t.getValue(fz);if(p==="automatic")return hd.Automatic;if(p==="trigger")return hd.Trigger},a=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!t.getValue(Vl),[l,c]=r.invokeFunction(NA,e),u=e.paddingBottom,d=e.renderIndentGuides!==void 0?e.renderIndentGuides:t.getValue(HD);return{getTypeNavigationMode:o,disposable:c,options:{keyboardSupport:!1,...l,indent:typeof t.getValue(jk)=="number"?t.getValue(jk):void 0,renderIndentGuides:d,smoothScrolling:!!t.getValue(vu),defaultFindMode:Pme(t),defaultFindMatchType:Mme(t),horizontalScrolling:a,scrollByPage:!!t.getValue(_u),paddingBottom:u,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:e.expandOnlyOnTwistieClick??t.getValue(UD)==="doubleClick",contextViewProvider:n,findWidgetStyles:Yqe,enableStickyScroll:!!t.getValue(zD),stickyScrollMaxItemCount:Number(t.getValue(jD))}}}let a1=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,s,r,o,a){this.tree=e,this.disposables=[],this.contextKeyService=IA(r,e),this.disposables.push(DA(this.contextKeyService,e)),this.listSupportsMultiSelect=TA.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),LA.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=XQe.bindTo(this.contextKeyService),this.listSupportFindWidget.set(t.findWidgetEnabled??!0),this.hasSelectionOrFocus=cz.bindTo(this.contextKeyService),this.hasDoubleSelection=uz.bindTo(this.contextKeyService),this.hasMultiSelection=dz.bindTo(this.contextKeyService),this.treeElementCanCollapse=ZQe.bindTo(this.contextKeyService),this.treeElementHasParent=JQe.bindTo(this.contextKeyService),this.treeElementCanExpand=eXe.bindTo(this.contextKeyService),this.treeElementHasChild=tXe.bindTo(this.contextKeyService),this.treeFindOpen=nXe.bindTo(this.contextKeyService),this.treeStickyScrollFocused=Dme.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=Md(a),this.updateStyleOverrides(s);const c=()=>{const d=e.getFocus()[0];if(!d)return;const h=e.getNode(d);this.treeElementCanCollapse.set(h.collapsible&&!h.collapsed),this.treeElementHasParent.set(!!e.getParentElement(d)),this.treeElementCanExpand.set(h.collapsible&&h.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(d))},u=new Set;u.add(Nme),u.add(Rme),this.disposables.push(this.contextKeyService,o.register(e),e.onDidChangeSelection(()=>{const d=e.getSelection(),h=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(d.length>0||h.length>0),this.hasMultiSelection.set(d.length>1),this.hasDoubleSelection.set(d.length===2)})}),e.onDidChangeFocus(()=>{const d=e.getSelection(),h=e.getFocus();this.hasSelectionOrFocus.set(d.length>0||h.length>0),c()}),e.onDidChangeCollapseState(c),e.onDidChangeModel(c),e.onDidChangeFindOpenState(d=>this.treeFindOpen.set(d)),e.onDidChangeStickyScrollFocused(d=>this.treeStickyScrollFocused.set(d)),a.onDidChangeConfiguration(d=>{let h={};if(d.affectsConfiguration(M1)&&(this._useAltAsMultipleSelectionModifier=Md(a)),d.affectsConfiguration(jk)){const g=a.getValue(jk);h={...h,indent:g}}if(d.affectsConfiguration(HD)&&t.renderIndentGuides===void 0){const g=a.getValue(HD);h={...h,renderIndentGuides:g}}if(d.affectsConfiguration(vu)){const g=!!a.getValue(vu);h={...h,smoothScrolling:g}}if(d.affectsConfiguration(hz)||d.affectsConfiguration(WD)){const g=Pme(a);h={...h,defaultFindMode:g}}if(d.affectsConfiguration(fz)||d.affectsConfiguration(WD)){const g=n();h={...h,typeNavigationMode:g}}if(d.affectsConfiguration(gz)){const g=Mme(a);h={...h,defaultFindMatchType:g}}if(d.affectsConfiguration(Vl)&&t.horizontalScrolling===void 0){const g=!!a.getValue(Vl);h={...h,horizontalScrolling:g}}if(d.affectsConfiguration(_u)){const g=!!a.getValue(_u);h={...h,scrollByPage:g}}if(d.affectsConfiguration(UD)&&t.expandOnlyOnTwistieClick===void 0&&(h={...h,expandOnlyOnTwistieClick:a.getValue(UD)==="doubleClick"}),d.affectsConfiguration(zD)){const g=a.getValue(zD);h={...h,enableStickyScroll:g}}if(d.affectsConfiguration(jD)){const g=Math.max(1,a.getValue(jD));h={...h,stickyScrollMaxItemCount:g}}if(d.affectsConfiguration(Ad)){const g=a.getValue(Ad);h={...h,mouseWheelScrollSensitivity:g}}if(d.affectsConfiguration(Pd)){const g=a.getValue(Pd);h={...h,fastScrollSensitivity:g}}Object.keys(h).length>0&&e.updateOptions(h)}),this.contextKeyService.onDidChangeContext(d=>{d.affectsSome(u)&&e.updateOptions({typeNavigationMode:n()})})),this.navigator=new rXe(e,{configurationService:a,...t}),this.disposables.push(this.navigator)}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?J2(e):qy)}dispose(){this.disposables=br(this.disposables)}};a1=Mf([ii(4,Nn),ii(5,jd),ii(6,Oi)],a1);const aXe=ir.as(R1.Configuration);aXe.registerConfiguration({id:"workbench",order:7,title:S("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[M1]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[S("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),S("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:S({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[wL]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:S({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Vl]:{type:"boolean",default:!1,description:S("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[_u]:{type:"boolean",default:!1,description:S("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[jk]:{type:"number",default:8,minimum:4,maximum:40,description:S("tree indent setting","Controls tree indentation in pixels.")},[HD]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:S("render tree indent guides","Controls whether the tree should render indent guides.")},[vu]:{type:"boolean",default:!1,description:S("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[Ad]:{type:"number",default:1,markdownDescription:S("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[Pd]:{type:"number",default:5,markdownDescription:S("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[hz]:{type:"string",enum:["highlight","filter"],enumDescriptions:[S("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),S("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:S("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[WD]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[S("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),S("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),S("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:S("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:S("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[gz]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[S("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),S("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:S("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[UD]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:S("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[zD]:{type:"boolean",default:!0,description:S("sticky scroll","Controls whether sticky scrolling is enabled in trees.")},[jD]:{type:"number",minimum:1,default:7,markdownDescription:S("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when {0} is enabled.","`#workbench.tree.enableStickyScroll#`")},[fz]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:S("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});class C0 extends be{constructor(e,t){super(),this.options=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(t==null?void 0:t.supportIcons)??!1,this.domNode=Qe(e,ht("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],n="",s){e||(e=""),s&&(e=C0.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&wa(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){var n,s,r;const e=[];let t=0;for(const o of this.highlights){if(o.end===o.start)continue;if(t<o.start){const c=this.text.substring(t,o.start);this.supportIcons?e.push(..._0(c)):e.push(c),t=o.start}const a=this.text.substring(t,o.end),l=ht("span.highlight",void 0,...this.supportIcons?_0(a):[a]);o.extraClasses&&l.classList.add(...o.extraClasses),e.push(l),t=o.end}if(t<this.text.length){const o=this.text.substring(t);this.supportIcons?e.push(..._0(o)):e.push(o)}if(ko(this.domNode,...e),(s=(n=this.options)==null?void 0:n.hoverDelegate)!=null&&s.showNativeHover)this.domNode.title=this.title;else if(!this.customHover&&this.title!==""){const o=((r=this.options)==null?void 0:r.hoverDelegate)??zl("mouse");this.customHover=this._register(zd().setupManagedHover(o,this.domNode,this.title))}else this.customHover&&this.customHover.update(this.title);this.didEverRender=!0}static escapeNewLines(e,t){let n=0,s=0;return e.replace(/\r\n|\r|\n/g,(r,o)=>{s=r===`\r
`?-1:0,o+=n;for(const a of t)a.end<=o||(a.start>=o&&(a.start+=s),a.end>=o&&(a.end+=s));return n+=s,""})}}class Yw{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set classNames(e){this.disposed||wa(e,this._classNames)||(this._classNames=e,this._element.classList.value="",this._element.classList.add(...e))}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class mee extends be{constructor(e,t){super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new Yw(Qe(e,ht(".monaco-icon-label")))),this.labelContainer=Qe(this.domNode.element,ht(".monaco-icon-label-container")),this.nameContainer=Qe(this.labelContainer,ht("span.monaco-icon-name-container")),t!=null&&t.supportHighlights||t!=null&&t.supportIcons?this.nameNode=this._register(new uXe(this.nameContainer,!!t.supportIcons)):this.nameNode=new lXe(this.nameContainer),this.hoverDelegate=(t==null?void 0:t.hoverDelegate)??zl("mouse")}get element(){return this.domNode.element}setLabel(e,t,n){const s=["monaco-icon-label"],r=["monaco-icon-label-container"];let o="";n&&(n.extraClasses&&s.push(...n.extraClasses),n.italic&&s.push("italic"),n.strikethrough&&s.push("strikethrough"),n.disabledCommand&&r.push("disabled"),n.title&&(typeof n.title=="string"?o+=n.title:o+=e));const a=this.domNode.element.querySelector(".monaco-icon-label-iconpath");if(n!=null&&n.iconPath){let l;!a||!Zs(a)?(l=ht(".monaco-icon-label-iconpath"),this.domNode.element.prepend(l)):l=a,l.style.backgroundImage=Cf(n==null?void 0:n.iconPath)}else a&&a.remove();if(this.domNode.classNames=s,this.domNode.element.setAttribute("aria-label",o),this.labelContainer.classList.value="",this.labelContainer.classList.add(...r),this.setupHover(n!=null&&n.descriptionTitle?this.labelContainer:this.element,n==null?void 0:n.title),this.nameNode.setLabel(e,n),t||this.descriptionNode){const l=this.getOrCreateDescriptionNode();l instanceof C0?(l.set(t||"",n?n.descriptionMatches:void 0,void 0,n==null?void 0:n.labelEscapeNewLines),this.setupHover(l.element,n==null?void 0:n.descriptionTitle)):(l.textContent=t&&(n!=null&&n.labelEscapeNewLines)?C0.escapeNewLines(t,[]):t||"",this.setupHover(l.element,(n==null?void 0:n.descriptionTitle)||""),l.empty=!t)}if(n!=null&&n.suffix||this.suffixNode){const l=this.getOrCreateSuffixNode();l.textContent=(n==null?void 0:n.suffix)??""}}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(this.hoverDelegate.showNativeHover){let r=function(o,a){nl(a)?o.title=uge(a):a!=null&&a.markdownNotSupportedFallback?o.title=a.markdownNotSupportedFallback:o.removeAttribute("title")};var s=r;r(e,t)}else{const r=zd().setupManagedHover(this.hoverDelegate,e,t);r&&this.customHovers.set(e,r)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const e=this._register(new Yw(qFe(this.nameContainer,ht("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new Yw(Qe(e.element,ht("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){var e;if(!this.descriptionNode){const t=this._register(new Yw(Qe(this.labelContainer,ht("span.monaco-icon-description-container"))));(e=this.creationOptions)!=null&&e.supportDescriptionHighlights?this.descriptionNode=this._register(new C0(Qe(t.element,ht("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new Yw(Qe(t.element,ht("span.label-description"))))}return this.descriptionNode}}class lXe{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&wa(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=Qe(this.container,ht("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const s=e[n],r=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${n}`;Qe(this.container,ht("a.label-name",{id:r,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},s)),n<e.length-1&&Qe(this.container,ht("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}}function cXe(i,e,t){if(!t)return;let n=0;return i.map(s=>{const r={start:n,end:n+s.length},o=t.map(a=>Lr.intersect(r,a)).filter(a=>!Lr.isEmpty(a)).map(({start:a,end:l})=>({start:a-n,end:l-n}));return n=r.end+e.length,o})}class uXe extends be{constructor(e,t){super(),this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&wa(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new C0(Qe(this.container,ht("a.label-name",{id:t==null?void 0:t.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=(t==null?void 0:t.separator)||"/",s=cXe(e,n,t==null?void 0:t.matches);for(let r=0;r<e.length;r++){const o=e[r],a=s?s[r]:void 0,l=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${r}`,c=ht("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":r,role:"treeitem"});this._register(new C0(Qe(this.container,c),{supportIcons:this.supportIcons})).set(o,a,void 0,t==null?void 0:t.labelEscapeNewLines),r<e.length-1&&Qe(c,ht("span.label-separator",void 0,n))}}}}const gT=ht;class pz extends be{constructor(e,t,n){super(),this.os=t,this.keyElements=new Set,this.options=n||Object.create(null);const s=this.options.keybindingLabelForeground;this.domNode=Qe(e,gT(".monaco-keybinding")),s&&(this.domNode.style.color=s),this.hover=this._register(zd().setupManagedHover(zl("mouse"),this.domNode,"")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&pz.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){const e=this.keybinding.getChords();e[0]&&this.renderChord(this.domNode,e[0],this.matches?this.matches.firstPart:null);for(let n=1;n<e.length;n++)Qe(this.domNode,gT("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,e[n],this.matches?this.matches.chordPart:null);const t=this.options.disableTitle??!1?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(t),this.domNode.setAttribute("aria-label",t||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){gu(this.domNode),this.keyElements.clear()}renderChord(e,t,n){const s=NU.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,s.ctrlKey,!!(n!=null&&n.ctrlKey),s.separator),t.shiftKey&&this.renderKey(e,s.shiftKey,!!(n!=null&&n.shiftKey),s.separator),t.altKey&&this.renderKey(e,s.altKey,!!(n!=null&&n.altKey),s.separator),t.metaKey&&this.renderKey(e,s.metaKey,!!(n!=null&&n.metaKey),s.separator);const r=t.keyLabel;r&&this.renderKey(e,r,!!(n!=null&&n.keyCode),"")}renderKey(e,t,n,s){Qe(e,this.createKeyElement(t,n?".highlight":"")),s&&Qe(e,gT("span.monaco-keybinding-key-separator",void 0,s))}renderUnbound(e){Qe(e,this.createKeyElement(S("unbound","Unbound")))}createKeyElement(e,t=""){const n=gT("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),this.options.keybindingLabelBackground&&(n.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(n.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(n.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(n.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),n}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&wa(e.firstPart,t.firstPart)&&wa(e.chordPart,t.chordPart)}}const pee=new Em(()=>{const i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:i,collatorIsNumeric:i.resolvedOptions().numeric}});function dXe(i,e,t=!1){const n=i||"",s=e||"",r=pee.value.collator.compare(n,s);return pee.value.collatorIsNumeric&&r===0&&n!==s?n<s?-1:1:r}function hXe(i,e,t){const n=i.toLowerCase(),s=e.toLowerCase(),r=fXe(i,e,t);if(r)return r;const o=n.endsWith(t),a=s.endsWith(t);if(o!==a)return o?-1:1;const l=dXe(n,s);return l!==0?l:n.localeCompare(s)}function fXe(i,e,t){const n=i.toLowerCase(),s=e.toLowerCase(),r=n.startsWith(t),o=s.startsWith(t);if(r!==o)return r?-1:1;if(r&&o){if(n.length<s.length)return-1;if(n.length>s.length)return 1}return 0}var RA=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},nF=function(i,e){return function(t,n){e(t,n,i)}},iF;const Hc=ht;class Ome{constructor(e,t,n){this.index=e,this.hasCheckbox=t,this._hidden=!1,this._init=new Em(()=>{const s=n.label??"",r=bC(s).text.trim(),o=n.ariaLabel||[s,this.saneDescription,this.saneDetail].map(a=>oje(a)).filter(a=>!!a).join(", ");return{saneLabel:s,saneSortLabel:r,saneAriaLabel:o}}),this._saneDescription=n.description,this._saneTooltip=n.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get saneDescription(){return this._saneDescription}set saneDescription(e){this._saneDescription=e}get saneDetail(){return this._saneDetail}set saneDetail(e){this._saneDetail=e}get saneTooltip(){return this._saneTooltip}set saneTooltip(e){this._saneTooltip=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}}class cr extends Ome{constructor(e,t,n,s,r,o){var a,l,c;super(e,t,r),this.fireButtonTriggered=n,this._onChecked=s,this.item=r,this._separator=o,this._checked=!1,this.onChecked=t?Le.map(Le.filter(this._onChecked.event,u=>u.element===this),u=>u.checked):Le.None,this._saneDetail=r.detail,this._labelHighlights=(a=r.highlights)==null?void 0:a.label,this._descriptionHighlights=(l=r.highlights)==null?void 0:l.description,this._detailHighlights=(c=r.highlights)==null?void 0:c.detail}get separator(){return this._separator}set separator(e){this._separator=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({element:this,checked:e}))}get checkboxDisabled(){return!!this.item.disabled}}var id;(function(i){i[i.NONE=0]="NONE",i[i.MOUSE_HOVER=1]="MOUSE_HOVER",i[i.ACTIVE_ITEM=2]="ACTIVE_ITEM"})(id||(id={}));class Tp extends Ome{constructor(e,t,n){super(e,!1,n),this.fireSeparatorButtonTriggered=t,this.separator=n,this.children=new Array,this.focusInsideSeparator=id.NONE}}class gXe{getHeight(e){return e instanceof Tp?30:e.saneDetail?44:22}getTemplateId(e){return e instanceof cr?$D.ID:qD.ID}}class mXe{getWidgetAriaLabel(){return S("quickInput","Quick Input")}getAriaLabel(e){var t;return(t=e.separator)!=null&&t.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(!(!e.hasCheckbox||!(e instanceof cr)))return{get value(){return e.checked},onDidChange:t=>e.onChecked(()=>t())}}}class Fme{constructor(e){this.hoverDelegate=e}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=new Ze,t.toDisposeTemplate=new Ze,t.entry=Qe(e,Hc(".quick-input-list-entry"));const n=Qe(t.entry,Hc("label.quick-input-list-label"));t.toDisposeTemplate.add(Vs(n,De.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=Qe(n,Hc("input.quick-input-list-checkbox")),t.checkbox.type="checkbox";const s=Qe(n,Hc(".quick-input-list-rows")),r=Qe(s,Hc(".quick-input-list-row")),o=Qe(s,Hc(".quick-input-list-row"));t.label=new mee(r,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.label),t.icon=QH(t.label.element,Hc(".quick-input-list-icon"));const a=Qe(r,Hc(".quick-input-list-entry-keybinding"));t.keybinding=new pz(a,lc),t.toDisposeTemplate.add(t.keybinding);const l=Qe(o,Hc(".quick-input-list-label-meta"));return t.detail=new mee(l,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.detail),t.separator=Qe(t.entry,Hc(".quick-input-list-separator")),t.actionBar=new rf(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.add(t.actionBar),t}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}disposeElement(e,t,n){n.toDisposeElement.clear(),n.actionBar.clear()}}var L0;let $D=(L0=class extends Fme{constructor(e,t){super(e),this.themeService=t,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return iF.ID}renderTemplate(e){const t=super.renderTemplate(e);return t.toDisposeTemplate.add(Vs(t.checkbox,De.CHANGE,n=>{t.element.checked=t.checkbox.checked})),t}renderElement(e,t,n){var h;const s=e.element;n.element=s,s.element=n.entry??void 0;const r=s.item;n.checkbox.checked=s.checked,n.toDisposeElement.add(s.onChecked(g=>n.checkbox.checked=g)),n.checkbox.disabled=s.checkboxDisabled;const{labelHighlights:o,descriptionHighlights:a,detailHighlights:l}=s;if(r.iconPath){const g=oA(this.themeService.getColorTheme().type)?r.iconPath.dark:r.iconPath.light??r.iconPath.dark,p=Ut.revive(g);n.icon.className="quick-input-list-icon",n.icon.style.backgroundImage=Cf(p)}else n.icon.style.backgroundImage="",n.icon.className=r.iconClass?`quick-input-list-icon ${r.iconClass}`:"";let c;!s.saneTooltip&&s.saneDescription&&(c={markdown:{value:s.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDescription});const u={matches:o||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(u.extraClasses=r.iconClasses,u.italic=r.italic,u.strikethrough=r.strikethrough,n.entry.classList.remove("quick-input-list-separator-as-item"),n.label.setLabel(s.saneLabel,s.saneDescription,u),n.keybinding.set(r.keybinding),s.saneDetail){let g;s.saneTooltip||(g={markdown:{value:s.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDetail}),n.detail.element.style.display="",n.detail.setLabel(s.saneDetail,void 0,{matches:l,title:g,labelEscapeNewLines:!0})}else n.detail.element.style.display="none";(h=s.separator)!=null&&h.label?(n.separator.textContent=s.separator.label,n.separator.style.display="",this.addItemWithSeparator(s)):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!s.separator);const d=r.buttons;d&&d.length?(n.actionBar.push(d.map((g,p)=>oS(g,`id-${p}`,()=>s.fireButtonTriggered({button:g,item:s.item}))),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){this.removeItemWithSeparator(e.element),super.disposeElement(e,t,n)}isItemWithSeparatorVisible(e){return this._itemsWithSeparatorsFrequency.has(e)}addItemWithSeparator(e){this._itemsWithSeparatorsFrequency.set(e,(this._itemsWithSeparatorsFrequency.get(e)||0)+1)}removeItemWithSeparator(e){const t=this._itemsWithSeparatorsFrequency.get(e)||0;t>1?this._itemsWithSeparatorsFrequency.set(e,t-1):this._itemsWithSeparatorsFrequency.delete(e)}},iF=L0,L0.ID="quickpickitem",L0);$D=iF=RA([nF(1,Sc)],$D);const aR=class aR extends Fme{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}get templateId(){return aR.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(e){return this._visibleSeparatorsFrequency.has(e)}renderTemplate(e){const t=super.renderTemplate(e);return t.checkbox.style.display="none",t}renderElement(e,t,n){const s=e.element;n.element=s,s.element=n.entry??void 0,s.element.classList.toggle("focus-inside",!!s.focusInsideSeparator);const r=s.separator,{labelHighlights:o,descriptionHighlights:a,detailHighlights:l}=s;n.icon.style.backgroundImage="",n.icon.className="";let c;!s.saneTooltip&&s.saneDescription&&(c={markdown:{value:s.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDescription});const u={matches:o||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(n.entry.classList.add("quick-input-list-separator-as-item"),n.label.setLabel(s.saneLabel,s.saneDescription,u),s.saneDetail){let h;s.saneTooltip||(h={markdown:{value:s.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDetail}),n.detail.element.style.display="",n.detail.setLabel(s.saneDetail,void 0,{matches:l,title:h,labelEscapeNewLines:!0})}else n.detail.element.style.display="none";n.separator.style.display="none",n.entry.classList.add("quick-input-list-separator-border");const d=r.buttons;d&&d.length?(n.actionBar.push(d.map((h,g)=>oS(h,`id-${g}`,()=>s.fireSeparatorButtonTriggered({button:h,separator:s.separator}))),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions"),this.addSeparator(s)}disposeElement(e,t,n){var s;this.removeSeparator(e.element),this.isSeparatorVisible(e.element)||(s=e.element.element)==null||s.classList.remove("focus-inside"),super.disposeElement(e,t,n)}addSeparator(e){this._visibleSeparatorsFrequency.set(e,(this._visibleSeparatorsFrequency.get(e)||0)+1)}removeSeparator(e){const t=this._visibleSeparatorsFrequency.get(e)||0;t>1?this._visibleSeparatorsFrequency.set(e,t-1):this._visibleSeparatorsFrequency.delete(e)}};aR.ID="quickpickseparator";let qD=aR,$k=class extends be{constructor(e,t,n,s,r,o){super(),this.parent=e,this.hoverDelegate=t,this.linkOpenerDelegate=n,this.accessibilityService=o,this._onKeyDown=new se,this._onLeave=new se,this.onLeave=this._onLeave.event,this._visibleCountObservable=un("VisibleCount",0),this.onChangedVisibleCount=Le.fromObservable(this._visibleCountObservable,this._store),this._allVisibleCheckedObservable=un("AllVisibleChecked",!1),this.onChangedAllVisibleChecked=Le.fromObservable(this._allVisibleCheckedObservable,this._store),this._checkedCountObservable=un("CheckedCount",0),this.onChangedCheckedCount=Le.fromObservable(this._checkedCountObservable,this._store),this._checkedElementsObservable=_7({equalsFn:ks},new Array),this.onChangedCheckedElements=Le.fromObservable(this._checkedElementsObservable,this._store),this._onButtonTriggered=new se,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new se,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._elementChecked=new se,this._elementCheckedEventBufferer=new M2,this._hasCheckboxes=!1,this._inputElements=new Array,this._elementTree=new Array,this._itemElements=new Array,this._elementDisposable=this._register(new Ze),this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._shouldLoop=!0,this._container=Qe(this.parent,Hc(".quick-input-list")),this._separatorRenderer=new qD(t),this._itemRenderer=r.createInstance($D,t),this._tree=this._register(r.createInstance(tF,"QuickInput",this._container,new gXe,[this._itemRenderer,this._separatorRenderer],{filter:{filter(a){return a.hidden?0:a instanceof Tp?2:1}},sorter:{compare:(a,l)=>{if(!this.sortByLabel||!this._lastQueryString)return 0;const c=this._lastQueryString.toLowerCase();return _Xe(a,l,c)}},accessibilityProvider:new mXe,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:oy.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=s,this._registerListeners()}get onDidChangeFocus(){return Le.map(this._tree.onDidChangeFocus,e=>e.elements.filter(t=>t instanceof cr).map(t=>t.item),this._store)}get onDidChangeSelection(){return Le.map(this._tree.onDidChangeSelection,e=>({items:e.elements.filter(t=>t instanceof cr).map(t=>t.item),event:e.browserEvent}),this._store)}get displayed(){return this._container.style.display!=="none"}set displayed(e){this._container.style.display=e?"":"none"}get scrollTop(){return this._tree.scrollTop}set scrollTop(e){this._tree.scrollTop=e}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(e){this._tree.ariaLabel=e??""}set enabled(e){this._tree.getHTMLElement().style.pointerEvents=e?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}get shouldLoop(){return this._shouldLoop}set shouldLoop(e){this._shouldLoop=e}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnTreeModelChanged(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown(e=>{const t=new hi(e);switch(t.keyCode){case 10:this.toggleCheckbox();break}this._onKeyDown.fire(t)}))}_registerOnContainerClick(){this._register(ge(this._container,De.CLICK,e=>{(e.x||e.y)&&this._onLeave.fire()}))}_registerOnMouseMiddleClick(){this._register(ge(this._container,De.AUXCLICK,e=>{e.button===1&&this._onLeave.fire()}))}_registerOnTreeModelChanged(){this._register(this._tree.onDidChangeModel(()=>{const e=this._itemElements.filter(t=>!t.hidden).length;this._visibleCountObservable.set(e,void 0),this._hasCheckboxes&&this._updateCheckedObservables()}))}_registerOnElementChecked(){this._register(this._elementCheckedEventBufferer.wrapEvent(this._elementChecked.event,(e,t)=>t)(e=>this._updateCheckedObservables()))}_registerOnContextMenu(){this._register(this._tree.onContextMenu(e=>{e.element&&(e.browserEvent.preventDefault(),this._tree.setSelection([e.element]))}))}_registerHoverListeners(){const e=this._register(new fhe(this.hoverDelegate.delay));this._register(this._tree.onMouseOver(async t=>{var n;if(dX(t.browserEvent.target)){e.cancel();return}if(!(!dX(t.browserEvent.relatedTarget)&&Fs(t.browserEvent.relatedTarget,(n=t.element)==null?void 0:n.element)))try{await e.trigger(async()=>{t.element instanceof cr&&this.showHover(t.element)})}catch(s){if(!A2(s))throw s}})),this._register(this._tree.onMouseOut(t=>{var n;Fs(t.browserEvent.relatedTarget,(n=t.element)==null?void 0:n.element)||e.cancel()}))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus(e=>{const t=e.elements[0]?this._tree.getParentElement(e.elements[0]):null;for(const n of this._separatorRenderer.visibleSeparators){const s=n===t;!!(n.focusInsideSeparator&id.ACTIVE_ITEM)!==s&&(s?n.focusInsideSeparator|=id.ACTIVE_ITEM:n.focusInsideSeparator&=~id.ACTIVE_ITEM,this._tree.rerender(n))}})),this._register(this._tree.onMouseOver(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const n of this._separatorRenderer.visibleSeparators){if(n!==t)continue;!!(n.focusInsideSeparator&id.MOUSE_HOVER)||(n.focusInsideSeparator|=id.MOUSE_HOVER,this._tree.rerender(n))}})),this._register(this._tree.onMouseOut(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const n of this._separatorRenderer.visibleSeparators){if(n!==t)continue;!!(n.focusInsideSeparator&id.MOUSE_HOVER)&&(n.focusInsideSeparator&=~id.MOUSE_HOVER,this._tree.rerender(n))}}))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection(e=>{const t=e.elements.filter(n=>n instanceof cr);t.length!==e.elements.length&&(e.elements.length===1&&e.elements[0]instanceof Tp&&(this._tree.setFocus([e.elements[0].children[0]]),this._tree.reveal(e.elements[0],0)),this._tree.setSelection(t))}))}setAllVisibleChecked(e){this._elementCheckedEventBufferer.bufferEvents(()=>{this._itemElements.forEach(t=>{!t.hidden&&!t.checkboxDisabled&&(t.checked=e)})})}setElements(e){this._elementDisposable.clear(),this._lastQueryString=void 0,this._inputElements=e,this._hasCheckboxes=this.parent.classList.contains("show-checkboxes");let t;this._itemElements=new Array,this._elementTree=e.reduce((n,s,r)=>{let o;if(s.type==="separator"){if(!s.buttons)return n;t=new Tp(r,a=>this._onSeparatorButtonTriggered.fire(a),s),o=t}else{const a=r>0?e[r-1]:void 0;let l;a&&a.type==="separator"&&!a.buttons&&(t=void 0,l=a);const c=new cr(r,this._hasCheckboxes,u=>this._onButtonTriggered.fire(u),this._elementChecked,s,l);if(this._itemElements.push(c),t)return t.children.push(c),n;o=c}return n.push(o),n},new Array),this._setElementsToTree(this._elementTree),this.accessibilityService.isScreenReaderOptimized()&&setTimeout(()=>{const n=this._tree.getHTMLElement().querySelector(".monaco-list-row.focused"),s=n==null?void 0:n.parentNode;if(n&&s){const r=n.nextSibling;n.remove(),s.insertBefore(n,r)}},0)}setFocusedElements(e){const t=e.map(n=>this._itemElements.find(s=>s.item===n)).filter(n=>!!n).filter(n=>!n.hidden);if(this._tree.setFocus(t),e.length>0){const n=this._tree.getFocus()[0];n&&this._tree.reveal(n)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){const t=e.map(n=>this._itemElements.find(s=>s.item===n)).filter(n=>!!n);this._tree.setSelection(t)}getCheckedElements(){return this._itemElements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){this._elementCheckedEventBufferer.bufferEvents(()=>{const t=new Set;for(const n of e)t.add(n);for(const n of this._itemElements)n.checked=t.has(n.item)})}focus(e){var t;if(this._itemElements.length)switch(e===Jn.Second&&this._itemElements.length<2&&(e=Jn.First),e){case Jn.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,n=>n.element instanceof cr);break;case Jn.Second:{this._tree.scrollTop=0;let n=!1;this._tree.focusFirst(void 0,s=>s.element instanceof cr?n?!0:(n=!n,!1):!1);break}case Jn.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,n=>n.element instanceof cr);break;case Jn.Next:{const n=this._tree.getFocus();this._tree.focusNext(void 0,this._shouldLoop,void 0,r=>r.element instanceof cr?(this._tree.reveal(r.element),!0):!1);const s=this._tree.getFocus();n.length&&n[0]===s[0]&&n[0]===this._itemElements[this._itemElements.length-1]&&this._onLeave.fire();break}case Jn.Previous:{const n=this._tree.getFocus();this._tree.focusPrevious(void 0,this._shouldLoop,void 0,r=>{if(!(r.element instanceof cr))return!1;const o=this._tree.getParentElement(r.element);return o===null||o.children[0]!==r.element?this._tree.reveal(r.element):this._tree.reveal(o),!0});const s=this._tree.getFocus();n.length&&n[0]===s[0]&&n[0]===this._itemElements[0]&&this._onLeave.fire();break}case Jn.NextPage:this._tree.focusNextPage(void 0,n=>n.element instanceof cr?(this._tree.reveal(n.element),!0):!1);break;case Jn.PreviousPage:this._tree.focusPreviousPage(void 0,n=>{if(!(n.element instanceof cr))return!1;const s=this._tree.getParentElement(n.element);return s===null||s.children[0]!==n.element?this._tree.reveal(n.element):this._tree.reveal(s),!0});break;case Jn.NextSeparator:{let n=!1;const s=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,o=>{if(n)return!0;if(o.element instanceof Tp)n=!0,this._separatorRenderer.isSeparatorVisible(o.element)?this._tree.reveal(o.element.children[0]):this._tree.reveal(o.element,0);else if(o.element instanceof cr){if(o.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(o.element)?this._tree.reveal(o.element):this._tree.reveal(o.element,0),!0;if(o.element===this._elementTree[0])return this._tree.reveal(o.element,0),!0}return!1});const r=this._tree.getFocus()[0];s===r&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,o=>o.element instanceof cr));break}case Jn.PreviousSeparator:{let n,s=!!((t=this._tree.getFocus()[0])!=null&&t.separator);this._tree.focusPrevious(void 0,!0,void 0,r=>{if(r.element instanceof Tp)s?n||(this._separatorRenderer.isSeparatorVisible(r.element)?this._tree.reveal(r.element):this._tree.reveal(r.element,0),n=r.element.children[0]):s=!0;else if(r.element instanceof cr&&!n){if(r.element.separator)this._itemRenderer.isItemWithSeparatorVisible(r.element)?this._tree.reveal(r.element):this._tree.reveal(r.element,0),n=r.element;else if(r.element===this._elementTree[0])return this._tree.reveal(r.element,0),!0}return!1}),n&&this._tree.setFocus([n]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(e){this._tree.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:"",this._tree.layout()}filter(e){if(this._lastQueryString=e,!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this._itemElements.forEach(n=>{n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!1;const s=n.index&&this._inputElements[n.index-1];n.item&&(n.separator=s&&s.type==="separator"&&!s.buttons?s:void 0)});else{let n;this._itemElements.forEach(s=>{let r;this.matchOnLabelMode==="fuzzy"?r=this.matchOnLabel?n6(e,bC(s.saneLabel))??void 0:void 0:r=this.matchOnLabel?pXe(t,bC(s.saneLabel))??void 0:void 0;const o=this.matchOnDescription?n6(e,bC(s.saneDescription||""))??void 0:void 0,a=this.matchOnDetail?n6(e,bC(s.saneDetail||""))??void 0:void 0;if(r||o||a?(s.labelHighlights=r,s.descriptionHighlights=o,s.detailHighlights=a,s.hidden=!1):(s.labelHighlights=void 0,s.descriptionHighlights=void 0,s.detailHighlights=void 0,s.hidden=s.item?!s.item.alwaysShow:!0),s.item?s.separator=void 0:s.separator&&(s.hidden=!0),!this.sortByLabel){const l=s.index&&this._inputElements[s.index-1]||void 0;(l==null?void 0:l.type)==="separator"&&!l.buttons&&(n=l),n&&!s.hidden&&(s.separator=n,n=void 0)}})}return this._setElementsToTree(this._sortByLabel&&e?this._itemElements:this._elementTree),this._tree.layout(),!0}toggleCheckbox(){this._elementCheckedEventBufferer.bufferEvents(()=>{const e=this._tree.getFocus().filter(n=>n instanceof cr),t=this._allVisibleChecked(e);for(const n of e)n.checkboxDisabled||(n.checked=!t)})}style(e){this._tree.style(e)}toggleHover(){const e=this._tree.getFocus()[0];if(!(e!=null&&e.saneTooltip)||!(e instanceof cr))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}this.showHover(e);const t=new Ze;t.add(this._tree.onDidChangeFocus(n=>{n.elements[0]instanceof cr&&this.showHover(n.elements[0])})),this._lastHover&&t.add(this._lastHover),this._elementDisposable.add(t)}_setElementsToTree(e){const t=new Array;for(const n of e)n instanceof Tp?t.push({element:n,collapsible:!1,collapsed:!1,children:n.children.map(s=>({element:s,collapsible:!1,collapsed:!1}))}):t.push({element:n,collapsible:!1,collapsed:!1});this._tree.setChildren(null,t)}_allVisibleChecked(e,t=!0){for(let n=0,s=e.length;n<s;n++){const r=e[n];if(!r.hidden)if(r.checked)t=!0;else return!1}return t}_updateCheckedObservables(){Cs(e=>{this._allVisibleCheckedObservable.set(this._allVisibleChecked(this._itemElements,!1),e);const t=this._itemElements.filter(n=>n.checked).length;this._checkedCountObservable.set(t,e),this._checkedElementsObservable.set(this.getCheckedElements(),e)})}showHover(e){var t,n,s;this._lastHover&&!this._lastHover.isDisposed&&((n=(t=this.hoverDelegate).onDidHideHover)==null||n.call(t),(s=this._lastHover)==null||s.dispose()),!(!e.element||!e.saneTooltip)&&(this._lastHover=this.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:r=>{this.linkOpenerDelegate(r)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))}};RA([Fi],$k.prototype,"onDidChangeFocus",null);RA([Fi],$k.prototype,"onDidChangeSelection",null);$k=RA([nF(4,Pn),nF(5,Iu)],$k);function pXe(i,e){const{text:t,iconOffsets:n}=e;if(!n||n.length===0)return _ee(i,t);const s=H4(t," "),r=t.length-s.length,o=_ee(i,s);if(o)for(const a of o){const l=n[a.start+r]+r;a.start+=l,a.end+=l}return o}function _ee(i,e){const t=e.toLowerCase().indexOf(i.toLowerCase());return t!==-1?[{start:t,end:t+i.length}]:null}function _Xe(i,e,t){const n=i.labelHighlights||[],s=e.labelHighlights||[];return n.length&&!s.length?-1:!n.length&&s.length?1:n.length===0&&s.length===0?0:hXe(i.saneSortLabel,e.saneSortLabel,t)}const Bme={weight:200,when:En.and(En.equals(vme,"quickPick"),OYe),metadata:{description:S("quickPick","Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")}};function pa(i,e={}){W2.registerCommandAndKeybindingRule({...Bme,...i,secondary:vXe(i.primary,i.secondary??[],e)})}const KD=rn?256:2048;function vXe(i,e,t={}){return t.withAltMod&&e.push(512+i),t.withCtrlMod&&(e.push(KD+i),t.withAltMod&&e.push(512+KD+i)),t.withCmdMod&&rn&&(e.push(2048+i),t.withCtrlMod&&e.push(2304+i),t.withAltMod&&(e.push(2560+i),t.withCtrlMod&&e.push(2816+i))),e}function ja(i,e){return t=>{const n=t.get(xA).currentQuickInput;if(n)return e&&n.quickNavigate?n.focus(e):n.focus(i)}}pa({id:"quickInput.pageNext",primary:12,handler:ja(Jn.NextPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});pa({id:"quickInput.pagePrevious",primary:11,handler:ja(Jn.PreviousPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});pa({id:"quickInput.first",primary:KD+14,handler:ja(Jn.First)},{withAltMod:!0,withCmdMod:!0});pa({id:"quickInput.last",primary:KD+13,handler:ja(Jn.Last)},{withAltMod:!0,withCmdMod:!0});pa({id:"quickInput.next",primary:18,handler:ja(Jn.Next)},{withCtrlMod:!0});pa({id:"quickInput.previous",primary:16,handler:ja(Jn.Previous)},{withCtrlMod:!0});const vee=S("quickInput.nextSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator."),bee=S("quickInput.previousSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.");rn?(pa({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:2066,handler:ja(Jn.NextSeparator,Jn.Next),metadata:{description:vee}}),pa({id:"quickInput.nextSeparator",primary:2578,secondary:[2322],handler:ja(Jn.NextSeparator)},{withCtrlMod:!0}),pa({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:2064,handler:ja(Jn.PreviousSeparator,Jn.Previous),metadata:{description:bee}}),pa({id:"quickInput.previousSeparator",primary:2576,secondary:[2320],handler:ja(Jn.PreviousSeparator)},{withCtrlMod:!0})):(pa({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:530,handler:ja(Jn.NextSeparator,Jn.Next),metadata:{description:vee}}),pa({id:"quickInput.nextSeparator",primary:2578,handler:ja(Jn.NextSeparator)}),pa({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:528,handler:ja(Jn.PreviousSeparator,Jn.Previous),metadata:{description:bee}}),pa({id:"quickInput.previousSeparator",primary:2576,handler:ja(Jn.PreviousSeparator)}));pa({id:"quickInput.acceptInBackground",when:En.and(Bme.when,En.or(YQe.negate(),VYe)),primary:17,weight:250,handler:i=>{const e=i.get(xA).currentQuickInput;e==null||e.accept(!0)}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});var bXe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},x6=function(i,e){return function(t,n){e(t,n,i)}},sF;const ga=ht;var I0;let rF=(I0=class extends be{get currentQuickInput(){return this.controller??void 0}get container(){return this._container}constructor(e,t,n,s){super(),this.options=e,this.layoutService=t,this.instantiationService=n,this.contextKeyService=s,this.enabled=!0,this.onDidAcceptEmitter=this._register(new se),this.onDidCustomEmitter=this._register(new se),this.onDidTriggerButtonEmitter=this._register(new se),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new se),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new se),this.onHide=this.onHideEmitter.event,this.inQuickInputContext=MYe.bindTo(this.contextKeyService),this.quickInputTypeContext=FYe.bindTo(this.contextKeyService),this.endOfQuickInputBoxContext=BYe.bindTo(this.contextKeyService),this.idPrefix=e.idPrefix,this._container=e.container,this.styles=e.styles,this._register(Le.runAndSubscribe($4,({window:r,disposables:o})=>this.registerKeyModsListeners(r,o),{window:Kn,disposables:this._store})),this._register(DFe(r=>{this.ui&&rt(this.ui.container)===r&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))}))}registerKeyModsListeners(e,t){const n=s=>{this.keyMods.ctrlCmd=s.ctrlKey||s.metaKey,this.keyMods.alt=s.altKey};for(const s of[De.KEY_DOWN,De.KEY_UP,De.MOUSE_DOWN])t.add(ge(e,s,n,!0))}getUI(e){if(this.ui)return e&&rt(this._container)!==rt(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;const t=Qe(this._container,ga(".quick-input-widget.show-file-icons"));t.tabIndex=-1,t.style.display="none";const n=Hl(t),s=Qe(t,ga(".quick-input-titlebar")),r=this._register(new rf(s,{hoverDelegate:this.options.hoverDelegate}));r.domNode.classList.add("quick-input-left-action-bar");const o=Qe(s,ga(".quick-input-title")),a=this._register(new rf(s,{hoverDelegate:this.options.hoverDelegate}));a.domNode.classList.add("quick-input-right-action-bar");const l=Qe(t,ga(".quick-input-header")),c=Qe(l,ga("input.quick-input-check-all"));c.type="checkbox",c.setAttribute("aria-label",S("quickInput.checkAll","Toggle all checkboxes")),this._register(Vs(c,De.CHANGE,G=>{const Z=c.checked;U.setAllVisibleChecked(Z)})),this._register(ge(c,De.CLICK,G=>{(G.x||G.y)&&g.setFocus()}));const u=Qe(l,ga(".quick-input-description")),d=Qe(l,ga(".quick-input-and-message")),h=Qe(d,ga(".quick-input-filter")),g=this._register(new eQe(h,this.styles.inputBox,this.styles.toggle));g.setAttribute("aria-describedby",`${this.idPrefix}message`);const p=Qe(h,ga(".quick-input-visible-count"));p.setAttribute("aria-live","polite"),p.setAttribute("aria-atomic","true");const _=new XJ(p,{countFormat:S({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),v=Qe(h,ga(".quick-input-count"));v.setAttribute("aria-live","polite");const y=new XJ(v,{countFormat:S({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),w=this._register(new rf(l,{hoverDelegate:this.options.hoverDelegate}));w.domNode.classList.add("quick-input-inline-action-bar");const x=Qe(l,ga(".quick-input-action")),k=this._register(new G7(x,this.styles.button));k.label=S("ok","OK"),this._register(k.onDidClick(G=>{this.onDidAcceptEmitter.fire()}));const T=Qe(l,ga(".quick-input-action")),R=this._register(new G7(T,{...this.styles.button,supportIcons:!0}));R.label=S("custom","Custom"),this._register(R.onDidClick(G=>{this.onDidCustomEmitter.fire()}));const L=Qe(d,ga(`#${this.idPrefix}message.quick-input-message`)),I=this._register(new Y7(t,this.styles.progressBar));I.getContainer().classList.add("quick-input-progress");const A=Qe(t,ga(".quick-input-html-widget"));A.tabIndex=-1;const B=Qe(t,ga(".quick-input-description")),V=this.idPrefix+"list",U=this._register(this.instantiationService.createInstance($k,t,this.options.hoverDelegate,this.options.linkOpenerDelegate,V));g.setAttribute("aria-controls",V),this._register(U.onDidChangeFocus(()=>{g.setAttribute("aria-activedescendant",U.getActiveDescendant()??"")})),this._register(U.onChangedAllVisibleChecked(G=>{c.checked=G})),this._register(U.onChangedVisibleCount(G=>{_.setCount(G)})),this._register(U.onChangedCheckedCount(G=>{y.setCount(G)})),this._register(U.onLeave(()=>{setTimeout(()=>{this.controller&&(g.setFocus(),this.controller instanceof FD&&this.controller.canSelectMany&&U.clearFocus())},0)}));const W=Ck(t);return this._register(W),this._register(ge(t,De.FOCUS,G=>{const Z=this.getUI();if(Fs(G.relatedTarget,Z.inputContainer)){const ne=Z.inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==ne&&this.endOfQuickInputBoxContext.set(ne)}Fs(G.relatedTarget,Z.container)||(this.inQuickInputContext.set(!0),this.previousFocusElement=Zs(G.relatedTarget)?G.relatedTarget:void 0)},!0)),this._register(W.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(ry.Blur),this.inQuickInputContext.set(!1),this.endOfQuickInputBoxContext.set(!1),this.previousFocusElement=void 0})),this._register(g.onKeyDown(G=>{const Z=this.getUI().inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==Z&&this.endOfQuickInputBoxContext.set(Z)})),this._register(ge(t,De.FOCUS,G=>{g.setFocus()})),this._register(Vs(t,De.KEY_DOWN,G=>{if(!Fs(G.target,A))switch(G.keyCode){case 3:Xt.stop(G,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:Xt.stop(G,!0),this.hide(ry.Gesture);break;case 2:if(!G.altKey&&!G.ctrlKey&&!G.metaKey){const Z=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(t.classList.contains("show-checkboxes")?Z.push("input"):Z.push("input[type=text]"),this.getUI().list.displayed&&Z.push(".monaco-list"),this.getUI().message&&Z.push(".quick-input-message a"),this.getUI().widget){if(Fs(G.target,this.getUI().widget))break;Z.push(".quick-input-html-widget")}const ne=t.querySelectorAll(Z.join(", "));G.shiftKey&&G.target===ne[0]?(Xt.stop(G,!0),U.clearFocus()):!G.shiftKey&&Fs(G.target,ne[ne.length-1])&&(Xt.stop(G,!0),ne[0].focus())}break;case 10:G.ctrlKey&&(Xt.stop(G,!0),this.getUI().list.toggleHover());break}})),this.ui={container:t,styleSheet:n,leftActionBar:r,titleBar:s,title:o,description1:B,description2:u,widget:A,rightActionBar:a,inlineActionBar:w,checkAll:c,inputContainer:d,filterContainer:h,inputBox:g,visibleCountContainer:p,visibleCount:_,countContainer:v,count:y,okContainer:x,ok:k,message:L,customButtonContainer:T,customButton:R,list:U,progressBar:I,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:G=>this.show(G),hide:()=>this.hide(),setVisibilities:G=>this.setVisibilities(G),setEnabled:G=>this.setEnabled(G),setContextKey:G=>this.options.setContextKey(G),linkOpenerDelegate:G=>this.options.linkOpenerDelegate(G)},this.updateStyles(),this.ui}reparentUI(e){this.ui&&(this._container=e,Qe(this._container,this.ui.container))}pick(e,t={},n=_c.None){return new Promise((s,r)=>{let o=u=>{var d;o=s,(d=t.onKeyMods)==null||d.call(t,a.keyMods),s(u)};if(n.isCancellationRequested){o(void 0);return}const a=this.createQuickPick({useSeparators:!0});let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)o(a.selectedItems.slice()),a.hide();else{const u=a.activeItems[0];u&&(o(u),a.hide())}}),a.onDidChangeActive(u=>{const d=u[0];d&&t.onDidFocus&&t.onDidFocus(d)}),a.onDidChangeSelection(u=>{if(!a.canSelectMany){const d=u[0];d&&(o(d),a.hide())}}),a.onDidTriggerItemButton(u=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton({...u,removeItem:()=>{const d=a.items.indexOf(u.item);if(d!==-1){const h=a.items.slice(),g=h.splice(d,1),p=a.activeItems.filter(v=>v!==g[0]),_=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=h,p&&(a.activeItems=p),a.keepScrollPosition=_}}})),a.onDidTriggerSeparatorButton(u=>{var d;return(d=t.onDidTriggerSeparatorButton)==null?void 0:d.call(t,u)}),a.onDidChangeValue(u=>{l&&!u&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),n.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{br(c),o(void 0)})];a.title=t.title,t.value&&(a.value=t.value),a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([u,d])=>{l=d,a.busy=!1,a.items=u,a.canSelectMany&&(a.selectedItems=u.filter(h=>h.type!=="separator"&&h.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,u=>{r(u),a.hide()})})}createQuickPick(e={useSeparators:!1}){const t=this.getUI(!0);return new FD(t)}createInputBox(){const e=this.getUI(!0);return new WYe(e)}show(e){const t=this.getUI(!0);this.onShowEmitter.fire();const n=this.controller;this.controller=e,n==null||n.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",ko(t.widget),t.rightActionBar.clear(),t.inlineActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(fs.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),ko(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const s=this.options.backKeybindingLabel();q7.tooltip=s?S("quickInput.backWithKeybinding","Back ({0})",s):S("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus(),this.quickInputTypeContext.set(e.type)}isVisible(){return!!this.ui&&this.ui.container.style.display!=="none"}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.displayed=!!e.list,t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.action.enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var r;const t=this.controller;if(!t)return;t.willHide(e);const n=(r=this.ui)==null?void 0:r.container,s=n&&!Dhe(n);if(this.controller=null,this.onHideEmitter.fire(),n&&(n.style.display="none"),!s){let o=this.previousFocusElement;for(;o&&!o.offsetParent;)o=o.parentElement??void 0;o!=null&&o.offsetParent?(o.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}t.didHide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,sF.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,widgetBorder:s,widgetShadow:r}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=n??"",this.ui.container.style.border=s?`1px solid ${s}`:"",this.ui.container.style.boxShadow=r?`0 0 8px 2px ${r}`:"",this.ui.list.style(this.styles.list);const o=[];this.styles.pickerGroup.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const a=o.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}},sF=I0,I0.MAX_WIDTH=600,I0);rF=sF=bXe([x6(1,zm),x6(2,Pn),x6(3,Nn)],rF);var yXe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Qw=function(i,e){return function(t,n){e(t,n,i)}};let oF=class extends YWe{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get currentQuickInput(){return this.controller.currentQuickInput}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance($7))),this._quickAccess}constructor(e,t,n,s,r){super(n),this.instantiationService=e,this.contextKeyService=t,this.layoutService=s,this.configurationService=r,this._onShow=this._register(new se),this._onHide=this._register(new se),this.contexts=new Map}createController(e=this.layoutService,t){const n={idPrefix:"quickInput_",container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:r=>this.setContextKey(r),linkOpenerDelegate:r=>{this.instantiationService.invokeFunction(o=>{o.get(Y2).open(r,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(K7))},s=this._register(this.instantiationService.createInstance(rF,{...n,...t}));return s.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer(r=>{rt(e.activeContainer)===rt(s.container)&&s.layout(r,e.activeContainerOffset.quickPickTop)})),this._register(e.onDidChangeActiveContainer(()=>{s.isVisible()||s.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)})),this._register(s.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(s.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),s}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new et(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t==null||t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t,n=_c.None){return this.controller.pick(e,t,n)}createQuickPick(e={useSeparators:!1}){return this.controller.createQuickPick(e)}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:Re(AZ),quickInputForeground:Re(uze),quickInputTitleBackground:Re(dze),widgetBorder:Re(GHe),widgetShadow:Re(q2)},inputBox:Oge,toggle:Mge,countBadge:Qqe,button:Kqe,progressBar:Gqe,keybindingLabel:qqe,list:J2({listBackground:AZ,listFocusBackground:Y8,listFocusForeground:G8,listInactiveFocusForeground:G8,listInactiveSelectionIconForeground:Zfe,listInactiveFocusBackground:Y8,listFocusOutline:Gi,listInactiveFocusOutline:Gi}),pickerGroup:{pickerGroupBorder:Re(hze),pickerGroupForeground:Re(Xfe)}}}};oF=yXe([Qw(0,Pn),Qw(1,Nn),Qw(2,Sc),Qw(3,zm),Qw(4,Oi)],oF);var Vme=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Up=function(i,e){return function(t,n){e(t,n,i)}};let aF=class extends oF{constructor(e,t,n,s,r,o){super(t,n,s,new A8(e.getContainerDomNode(),r),o),this.host=void 0;const a=qk.get(e);if(a){const l=a.widget;this.host={_serviceBrand:void 0,get mainContainer(){return l.getDomNode()},getContainer(){return l.getDomNode()},whenContainerStylesLoaded(){},get containers(){return[l.getDomNode()]},get activeContainer(){return l.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return Le.map(e.onDidLayoutChange,c=>({container:l.getDomNode(),dimension:c}))},get onDidChangeActiveContainer(){return Le.None},get onDidAddContainer(){return Le.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};aF=Vme([Up(1,Pn),Up(2,Nn),Up(3,Sc),Up(4,Es),Up(5,Oi)],aF);let lF=class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const n=t=this.instantiationService.createInstance(aF,e);this.mapEditorToService.set(e,t),jb(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get currentQuickInput(){return this.activeService.currentQuickInput}get quickAccess(){return this.activeService.quickAccess}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t,n=_c.None){return this.activeService.pick(e,t,n)}createQuickPick(e={useSeparators:!1}){return this.activeService.createQuickPick(e)}createInputBox(){return this.activeService.createInputBox()}};lF=Vme([Up(0,Pn),Up(1,Es)],lF);const lR=class lR{static get(e){return e.getContribution(lR.ID)}constructor(e){this.editor=e,this.widget=new cF(this.editor)}dispose(){this.widget.dispose()}};lR.ID="editor.controller.quickInput";let qk=lR;const cR=class cR{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return cR.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}};cR.ID="editor.contrib.quickInputWidget";let cF=cR;Hhe(qk.ID,qk,4);class wXe{constructor(e,t,n,s,r){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=s,this.background=r}}function CXe(i){if(!i||!Array.isArray(i))return[];const e=[];let t=0;for(let n=0,s=i.length;n<s;n++){const r=i[n];let o=-1;if(typeof r.fontStyle=="string"){o=0;const c=r.fontStyle.split(" ");for(let u=0,d=c.length;u<d;u++)switch(c[u]){case"italic":o=o|1;break;case"bold":o=o|2;break;case"underline":o=o|4;break;case"strikethrough":o=o|8;break}}let a=null;typeof r.foreground=="string"&&(a=r.foreground);let l=null;typeof r.background=="string"&&(l=r.background),e[t++]=new wXe(r.token||"",n,o,a,l)}return e}function SXe(i,e){i.sort((u,d)=>{const h=LXe(u.token,d.token);return h!==0?h:u.index-d.index});let t=0,n="000000",s="ffffff";for(;i.length>=1&&i[0].token==="";){const u=i.shift();u.fontStyle!==-1&&(t=u.fontStyle),u.foreground!==null&&(n=u.foreground),u.background!==null&&(s=u.background)}const r=new xXe;for(const u of e)r.getId(u);const o=r.getId(n),a=r.getId(s),l=new _z(t,o,a),c=new vz(l);for(let u=0,d=i.length;u<d;u++){const h=i[u];c.insert(h.token,h.fontStyle,r.getId(h.foreground),r.getId(h.background))}return new Wme(r,c)}const kXe=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class xXe{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(kXe);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=ke.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}}class Wme{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(CXe(e),t)}static createFromParsedTokenTheme(e,t){return SXe(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(typeof n>"u"){const s=this._match(t),r=TXe(t);n=(s.metadata|r<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}}const EXe=/\b(comment|string|regex|regexp)\b/;function TXe(i){const e=i.match(EXe);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function LXe(i,e){return i<e?-1:i>e?1:0}class _z{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new _z(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),n!==0&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class vz{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let n,s;t===-1?(n=e,s=""):(n=e.substring(0,t),s=e.substring(t+1));const r=this._children.get(n);return typeof r<"u"?r.match(s):this._mainRule}insert(e,t,n,s){if(e===""){this._mainRule.acceptOverwrite(t,n,s);return}const r=e.indexOf(".");let o,a;r===-1?(o=e,a=""):(o=e.substring(0,r),a=e.substring(r+1));let l=this._children.get(o);typeof l>"u"&&(l=new vz(this._mainRule.clone()),this._children.set(o,l)),l.insert(a,t,n,s)}}function IXe(i){const e=[];for(let t=1,n=i.length;t<n;t++){const s=i[t];e[t]=`.mtk${t} { color: ${s}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}const DXe={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[mu]:"#FFFFFE",[$2]:"#000000",[Bfe]:"#E5EBF1",[tx]:"#D3D3D3",[nx]:"#939393",[Vfe]:"#ADD6FF4D"}},NXe={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[mu]:"#1E1E1E",[$2]:"#D4D4D4",[Bfe]:"#3A3D41",[tx]:"#404040",[nx]:"#707070",[Vfe]:"#ADD6FF26"}},RXe={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[mu]:"#000000",[$2]:"#FFFFFF",[tx]:"#FFFFFF",[nx]:"#FFFFFF"}},AXe={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[mu]:"#FFFFFF",[$2]:"#292929",[tx]:"#292929",[nx]:"#292929"}},PXe={IconContribution:"base.contributions.icons"};var yee;(function(i){function e(t,n){let s=t.defaults;for(;dn.isThemeIcon(s);){const r=O1.getIcon(s.id);if(!r)return;s=r.defaults}return s}i.getDefinition=e})(yee||(yee={}));var wee;(function(i){function e(n){return{weight:n.weight,style:n.style,src:n.src.map(s=>({format:s.format,location:s.location.toString()}))}}i.toJSONObject=e;function t(n){const s=r=>nl(r)?r:void 0;if(n&&Array.isArray(n.src)&&n.src.every(r=>nl(r.format)&&nl(r.location)))return{weight:s(n.weight),style:s(n.style),src:n.src.map(r=>({format:r.format,location:Ut.parse(r.location)}))}}i.fromJSONObject=t})(wee||(wee={}));class MXe{constructor(){this._onDidChange=new se,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:S("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:S("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${dn.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,s){const r=this.iconsById[e];if(r){if(n&&!r.description){r.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return r}const o={id:e,description:n,defaults:t,deprecationMessage:s};this.iconsById[e]=o;const a={$ref:"#/definitions/icons"};return s&&(a.deprecationMessage=s),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=(r,o)=>r.id.localeCompare(o.id),t=r=>{for(;dn.isThemeIcon(r.defaults);)r=this.iconsById[r.defaults.id];return`codicon codicon-${r?r.id:""}`},n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const s=Object.keys(this.iconsById).map(r=>this.iconsById[r]);for(const r of s.filter(o=>!!o.description).sort(e))n.push(`|<i class="${t(r)}"></i>|${r.id}|${dn.isThemeIcon(r.defaults)?r.defaults.id:r.id}|${r.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const r of s.filter(o=>!dn.isThemeIcon(o.defaults)).sort(e))n.push(`|<i class="${t(r)}"></i>|${r.id}|`);return n.join(`
`)}}const O1=new MXe;ir.add(PXe.IconContribution,O1);function qm(i,e,t,n){return O1.registerIcon(i,e,t,n)}function Hme(){return O1}function OXe(){const i=Jde();for(const e in i){const t="\\"+i[e].toString(16);O1.registerIcon(e,{fontCharacter:t})}}OXe();const Ume="vscode://schemas/icons",zme=ir.as(rA.JSONContribution);zme.registerSchema(Ume,O1.getIconSchema());const Cee=new so(()=>zme.notifySchemaChanged(Ume),200);O1.onDidChange(()=>{Cee.isScheduled()||Cee.schedule()});qm("widget-close",Ke.close,S("widgetClose","Icon for the close action in widgets."));qm("goto-previous-location",Ke.arrowUp,S("previousChangeIcon","Icon for goto previous editor location."));qm("goto-next-location",Ke.arrowDown,S("nextChangeIcon","Icon for goto next editor location."));dn.modify(Ke.sync,"spin");dn.modify(Ke.loading,"spin");function FXe(i){const e=new Ze,t=e.add(new se),n=Hme();return e.add(n.onDidChange(()=>t.fire())),i&&e.add(i.onDidProductIconThemeChange(()=>t.fire())),{dispose:()=>e.dispose(),onDidChange:t.event,getCSS(){const s=i?i.getProductIconTheme():new jme,r={},o=[],a=[];for(const l of n.getIcons()){const c=s.getIcon(l);if(!c)continue;const u=c.font,d=`--vscode-icon-${l.id}-font-family`,h=`--vscode-icon-${l.id}-content`;u?(r[u.id]=u.definition,a.push(`${d}: ${OO(u.id)};`,`${h}: '${c.fontCharacter}';`),o.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; font-family: ${OO(u.id)}; }`)):(a.push(`${h}: '${c.fontCharacter}'; ${d}: 'codicon';`),o.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; }`))}for(const l in r){const c=r[l],u=c.weight?`font-weight: ${c.weight};`:"",d=c.style?`font-style: ${c.style};`:"",h=c.src.map(g=>`${Cf(g.location)} format('${g.format}')`).join(", ");o.push(`@font-face { src: ${h}; font-family: ${OO(l)};${u}${d} font-display: block; }`)}return o.push(`:root { ${a.join(" ")} }`),o.join(`
`)}}}class jme{getIcon(e){const t=Hme();let n=e.defaults;for(;dn.isThemeIcon(n);){const s=t.getIcon(n.id);if(!s)return;n=s.defaults}return n}}const Ng="vs",aS="vs-dark",ub="hc-black",db="hc-light",$me=ir.as(Nfe.ColorContribution),BXe=ir.as(gfe.ThemingContribution);class qme{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const n=t.base;e.length>0?(CL(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,ke.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=uF(this.themeData.base);for(const n in t.colors)e.has(n)||e.set(n,ke.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){const n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=$me.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case Ng:return Rl.LIGHT;case ub:return Rl.HIGH_CONTRAST_DARK;case db:return Rl.HIGH_CONTRAST_LIGHT;default:return Rl.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const r=uF(this.themeData.base);e=r.rules,r.encodedTokensColors&&(t=r.encodedTokensColors)}const n=this.themeData.colors["editor.foreground"],s=this.themeData.colors["editor.background"];if(n||s){const r={token:""};n&&(r.foreground=n),s&&(r.background=s),e.push(r)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=Wme.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){const r=this.tokenTheme._match([e].concat(t).join(".")).metadata,o=Qc.getForeground(r),a=Qc.getFontStyle(r);return{foreground:o,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4),strikethrough:!!(a&8)}}}function CL(i){return i===Ng||i===aS||i===ub||i===db}function uF(i){switch(i){case Ng:return DXe;case aS:return NXe;case ub:return RXe;case db:return AXe}}function mT(i){const e=uF(i);return new qme(i,e)}class VXe extends be{constructor(){super(),this._onColorThemeChange=this._register(new se),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new se),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new jme,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(Ng,mT(Ng)),this._knownThemes.set(aS,mT(aS)),this._knownThemes.set(ub,mT(ub)),this._knownThemes.set(db,mT(db));const e=this._register(FXe(this));this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(Ng),this._onOSSchemeChanged(),this._register(e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()})),lhe(Kn,"(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return QI(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=Hl(void 0,e=>{e.className="monaco-colors",e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),be.None}_registerShadowDomContainer(e){const t=Hl(e,n=>{n.className="monaco-colors",n.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let n=0;n<this._styleElements.length;n++)if(this._styleElements[n]===t){this._styleElements.splice(n,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!CL(t.base)&&!CL(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new qme(e,t)),CL(e)&&this._knownThemes.forEach(n=>{n.base===e&&n.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(Ng),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=Kn.matchMedia("(forced-colors: active)").matches;if(e!==eb(this._theme.type)){let t;oA(this._theme.type)?t=e?ub:aS:t=e?db:Ng,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},n={addRule:o=>{t[o]||(e.push(o),t[o]=!0)}};BXe.getThemingParticipants().forEach(o=>o(this._theme,n,this._environment));const s=[];for(const o of $me.getColors()){const a=this._theme.getColor(o.id,!0);a&&s.push(`${hU(o.id)}: ${a.toString()};`)}n.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${s.join(`
`)} }`);const r=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(IXe(r)),this._themeCSS=e.join(`
`),this._updateCSS(),es.setColorMap(r),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}const kc=nn("themeService");var WXe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},E6=function(i,e){return function(t,n){e(t,n,i)}};let dF=class extends be{constructor(e,t,n){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=n,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new se,this._onDidChangeReducedMotion=new se,this._onDidChangeLinkUnderline=new se,this._accessibilityModeEnabledContext=qje.bindTo(this._contextKeyService);const s=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("editor.accessibilitySupport")&&(s(),this._onDidChangeScreenReaderOptimized.fire()),o.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),s(),this._register(this.onDidChangeScreenReaderOptimized(()=>s()));const r=Kn.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=r.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._linkUnderlinesEnabled=this._configurationService.getValue("accessibility.underlineLinks"),this.initReducedMotionListeners(r),this.initLinkUnderlineListeners()}initReducedMotionListeners(e){this._register(ge(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=()=>{const n=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",n),this._layoutService.mainContainer.classList.toggle("enable-motion",!n)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}initLinkUnderlineListeners(){this._register(this._configurationService.onDidChangeConfiguration(t=>{if(t.affectsConfiguration("accessibility.underlineLinks")){const n=this._configurationService.getValue("accessibility.underlineLinks");this._linkUnderlinesEnabled=n,this._onDidChangeLinkUnderline.fire()}}));const e=()=>{const t=this._linkUnderlinesEnabled;this._layoutService.mainContainer.classList.toggle("underline-links",t)};e(),this._register(this.onDidChangeLinkUnderlines(()=>e()))}onDidChangeLinkUnderlines(e){return this._onDidChangeLinkUnderline.event(e)}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};dF=WXe([E6(0,Nn),E6(1,zm),E6(2,Oi)],dF);var AA=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},kd=function(i,e){return function(t,n){e(t,n,i)}},q_,kC;let hF=class{constructor(e,t,n){this._commandService=e,this._keybindingService=t,this._hiddenStates=new fF(n)}createMenu(e,t,n){return new GD(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...n},this._commandService,this._keybindingService,t)}getMenuActions(e,t,n){const s=new GD(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...n},this._commandService,this._keybindingService,t),r=s.getActions(n);return s.dispose(),r}resetHiddenStates(e){this._hiddenStates.reset(e)}};hF=AA([kd(0,ll),kd(1,yr),kd(2,CA)],hF);var D0;let fF=(D0=class{constructor(e){this._storageService=e,this._disposables=new Ze,this._onDidChange=new se,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(q_._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,q_._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{const t=e.get(q_._key,0,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){return this._hiddenByDefaultCache.get(`${e.id}/${t}`)??!1}setDefaultState(e,t,n){this._hiddenByDefaultCache.set(`${e.id}/${t}`,n)}isHidden(e,t){var r;const n=this._isHiddenByDefault(e,t),s=((r=this._data[e.id])==null?void 0:r.includes(t))??!1;return n?!s:s}updateHidden(e,t,n){this._isHiddenByDefault(e,t)&&(n=!n);const r=this._data[e.id];if(n)r?r.indexOf(t)<0&&r.push(t):this._data[e.id]=[t];else if(r){const o=r.indexOf(t);o>=0&&p9e(r,o),r.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(q_._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}},q_=D0,D0._key="menu.hiddenCommands",D0);fF=q_=AA([kd(0,CA)],fF);class lS{constructor(e,t){this._id=e,this._collectContextKeysForSubmenus=t,this._menuGroups=[],this._allMenuIds=new Set,this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get allMenuIds(){return this._allMenuIds}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._allMenuIds.clear(),this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=this._sort(Kb.getMenuItems(this._id));let t;for(const n of e){const s=n.group||"";(!t||t[0]!==s)&&(t=[s,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeysAndSubmenuIds(n)}this._allMenuIds.add(this._id)}_sort(e){return e}_collectContextKeysAndSubmenuIds(e){if(lS._fillInKbExprKeys(e.when,this._structureContextKeys),KC(e)){if(e.command.precondition&&lS._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;lS._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&(Kb.getMenuItems(e.submenu).forEach(this._collectContextKeysAndSubmenuIds,this),this._allMenuIds.add(e.submenu))}static _fillInKbExprKeys(e,t){if(e)for(const n of e.keys())t.add(n)}}let gF=kC=class extends lS{constructor(e,t,n,s,r,o){super(e,n),this._hiddenStates=t,this._commandService=s,this._keybindingService=r,this._contextKeyService=o,this.refresh()}createActionGroups(e){const t=[];for(const n of this._menuGroups){const[s,r]=n;let o;for(const a of r)if(this._contextKeyService.contextMatchesRules(a.when)){const l=KC(a);l&&this._hiddenStates.setDefaultState(this._id,a.command.id,!!a.isHiddenByDefault);const c=HXe(this._id,l?a.command:a,this._hiddenStates);if(l){const u=Kme(this._commandService,this._keybindingService,a.command.id,a.when);(o??(o=[])).push(new nf(a.command,a.alt,e,c,u,this._contextKeyService,this._commandService))}else{const u=new kC(a.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(e),d=oo.join(...u.map(h=>h[1]));d.length>0&&(o??(o=[])).push(new GC(a,c,d))}}o&&o.length>0&&t.push([s,o])}return t}_sort(e){return e.sort(kC._compareMenuItems)}static _compareMenuItems(e,t){const n=e.group,s=t.group;if(n!==s){if(n){if(!s)return-1}else return 1;if(n==="navigation")return-1;if(s==="navigation")return 1;const a=n.localeCompare(s);if(a!==0)return a}const r=e.order||0,o=t.order||0;return r<o?-1:r>o?1:kC._compareTitles(KC(e)?e.command.title:e.title,KC(t)?t.command.title:t.title)}static _compareTitles(e,t){const n=typeof e=="string"?e:e.original,s=typeof t=="string"?t:t.original;return n.localeCompare(s)}};gF=kC=AA([kd(3,ll),kd(4,yr),kd(5,Nn)],gF);let GD=class{constructor(e,t,n,s,r,o){this._disposables=new Ze,this._menuInfo=new gF(e,t,n.emitEventsForSubmenuChanges,s,r,o);const a=new so(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},n.eventDebounceDelay);this._disposables.add(a),this._disposables.add(Kb.onDidChangeMenu(d=>{for(const h of this._menuInfo.allMenuIds)if(d.has(h)){a.schedule();break}}));const l=this._disposables.add(new Ze),c=d=>{let h=!1,g=!1,p=!1;for(const _ of d)if(h=h||_.isStructuralChange,g=g||_.isEnablementChange,p=p||_.isToggleChange,h&&g&&p)break;return{menu:this,isStructuralChange:h,isEnablementChange:g,isToggleChange:p}},u=()=>{l.add(o.onDidChangeContext(d=>{const h=d.affectsSome(this._menuInfo.structureContextKeys),g=d.affectsSome(this._menuInfo.preconditionContextKeys),p=d.affectsSome(this._menuInfo.toggledContextKeys);(h||g||p)&&this._onDidChange.fire({menu:this,isStructuralChange:h,isEnablementChange:g,isToggleChange:p})})),l.add(t.onDidChange(d=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new zde({onWillAddFirstListener:u,onDidRemoveLastListener:l.clear.bind(l),delay:n.eventDebounceDelay,merge:c}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};GD=AA([kd(3,ll),kd(4,yr),kd(5,Nn)],GD);function HXe(i,e,t){const n=EBe(e)?e.submenu.id:e.id,s=typeof e.title=="string"?e.title:e.title.value,r=Qv({id:`hide/${i.id}/${n}`,label:S("hide.label","Hide '{0}'",s),run(){t.updateHidden(i,n,!0)}}),o=Qv({id:`toggle/${i.id}/${n}`,label:s,get checked(){return!t.isHidden(i,n)},run(){t.updateHidden(i,n,!!this.checked)}});return{hide:r,toggle:o,get isHidden(){return!o.checked}}}function Kme(i,e,t,n=void 0,s=!0){return Qv({id:`configureKeybinding/${t}`,label:S("configure keybinding","Configure Keybinding"),enabled:s,run(){const o=!!!e.lookupKeybinding(t)&&n?n.serialize():void 0;i.executeCommand("workbench.action.openGlobalKeybindings",`@command:${t}`+(o?` +when:${o}`:""))}})}var UXe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},See=function(i,e){return function(t,n){e(t,n,i)}},mF;const kee="application/vnd.code.resources";var N0;let pF=(N0=class extends be{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,(Lm||che)&&this.installWebKitWriteTextWorkaround(),this._register(Le.runAndSubscribe($4,({window:n,disposables:s})=>{s.add(ge(n.document,"copy",()=>this.clearResourcesState()))},{window:Kn,disposables:this._store}))}installWebKitWriteTextWorkaround(){const e=()=>{const t=new mhe;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,mC().navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(async n=>{(!(n instanceof Error)||n.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(n)})};this._register(Le.runAndSubscribe(this.layoutService.onDidAddContainer,({container:t,disposables:n})=>{n.add(ge(t,"click",e)),n.add(ge(t,"keydown",e))},{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(e,t){if(this.clearResourcesState(),t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return await mC().navigator.clipboard.writeText(e)}catch(n){console.error(n)}this.fallbackWriteText(e)}fallbackWriteText(e){const t=GH(),n=t.activeElement,s=t.body.appendChild(ht("textarea",{"aria-hidden":!0}));s.style.height="1px",s.style.width="1px",s.style.position="absolute",s.value=e,s.focus(),s.select(),t.execCommand("copy"),Zs(n)&&n.focus(),s.remove()}async readText(e){if(e)return this.mapTextToType.get(e)||"";try{return await mC().navigator.clipboard.readText()}catch(t){console.error(t)}return""}async readFindText(){return this.findText}async writeFindText(e){this.findText=e}async readResources(){try{const t=await mC().navigator.clipboard.read();for(const n of t)if(n.types.includes(`web ${kee}`)){const s=await n.getType(`web ${kee}`);return JSON.parse(await s.text()).map(o=>Ut.from(o))}}catch{}const e=await this.computeResourcesStateHash();return this.resourcesStateHash!==e&&this.clearResourcesState(),this.resources}async computeResourcesStateHash(){if(this.resources.length===0)return;const e=await this.readText();return xhe(e.substring(0,mF.MAX_RESOURCE_STATE_SOURCE_LENGTH))}clearInternalState(){this.clearResourcesState()}clearResourcesState(){this.resources=[],this.resourcesStateHash=void 0}},mF=N0,N0.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3,N0);pF=mF=UXe([See(0,zm),See(1,Tu)],pF);const bz=nn("clipboardService");var zXe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},jXe=function(i,e){return function(t,n){e(t,n,i)}};const cS="data-keybinding-context";class yz{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return{...this._value}}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}}const uR=class uR extends yz{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}};uR.INSTANCE=new uR;let ay=uR;const RS=class RS extends yz{constructor(e,t,n){super(e,null),this._configurationService=t,this._values=ZC.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(s=>{if(s.source===7){const r=Array.from(this._values,([o])=>o);this._values.clear(),n.fire(new Eee(r))}else{const r=[];for(const o of s.affectedKeys){const a=`config.${o}`,l=this._values.findSuperstr(a);l!==void 0&&(r.push(...yn.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(r.push(a),this._values.delete(a))}n.fire(new Eee(r))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(RS._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(RS._keyPrefix.length),n=this._configurationService.getValue(t);let s;switch(typeof n){case"number":case"boolean":case"string":s=n;break;default:Array.isArray(n)?s=JSON.stringify(n):s=n}return this._values.set(e,s),s}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}};RS._keyPrefix="config.";let _F=RS;class $Xe{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class xee{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class Eee{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}}class qXe{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}}function KXe(i,e){return i.allKeysContainedIn(new Set(Object.keys(e)))}class Gme extends be{constructor(e){super(),this._onDidChangeContext=this._register(new _k({merge:t=>new qXe(t)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new $Xe(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new GXe(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new xee(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new xee(e))}getContext(e){return this._isDisposed?ay.INSTANCE:this.getContextValuesContainer(YXe(e))}dispose(){super.dispose(),this._isDisposed=!0}}let vF=class extends Gme{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0;const t=this._register(new _F(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t)}getContextValuesContainer(e){return this._isDisposed?ay.INSTANCE:this._contexts.get(e)||ay.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new yz(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};vF=zXe([jXe(0,Oi)],vF);class GXe extends Gme{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new yf),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(cS)){let n="";this._domNode.classList&&(n=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${n?": "+n:""}`)}this._domNode.setAttribute(cS,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const n=this._parent.getContextValuesContainer(this._myContextId).value;KXe(e,n)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(cS),super.dispose())}getContextValuesContainer(e){return this._isDisposed?ay.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function YXe(i){for(;i;){if(i.hasAttribute(cS)){const e=i.getAttribute(cS);return e?parseInt(e,10):NaN}i=i.parentElement}return 0}function QXe(i,e,t){i.get(Nn).createKey(String(e),XXe(t))}function XXe(i){return Ide(i,e=>{if(typeof e=="object"&&e.$mid===1)return Ut.revive(e).toString();if(e instanceof Ut)return e.toString()})}oa.registerCommand("_setContext",QXe);oa.registerCommand({id:"getContextKeyInfo",handler(){return[...et.all()].sort((i,e)=>i.key.localeCompare(e.key))},metadata:{description:S("getContextKeyInfo","A command that returns information about context keys"),args:[]}});oa.registerCommand("_generateContextKeyInfo",function(){const i=[],e=new Set;for(const t of et.all())e.has(t.key)||(e.add(t.key),i.push(t));i.sort((t,n)=>t.key.localeCompare(n.key)),console.log(JSON.stringify(i,void 0,2))});let ZXe=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}};class Tee{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),s=this.lookupOrInsertNode(t);n.outgoing.set(s.key,s),s.incoming.set(n.key,n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new ZXe(t,e),this._nodes.set(t,n)),n}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,n]of this._nodes)e.push(`${t}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const n=new Set([e]),s=this._findCycle(t,n);if(s)return s}}_findCycle(e,t){for(const[n,s]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const r=this._findCycle(s,t);if(r)return r;t.delete(n)}}}class Gy{constructor(...e){this._entries=new Map;for(const[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}get(e){return this._entries.get(e)}}const JXe=!1;class Lee extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class YD{constructor(e=new Gy,t=!1,n,s=JXe){this._services=e,this._strict=t,this._parent=n,this._enableTracing=s,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(Pn,this),this._globalGraph=s?(n==null?void 0:n._globalGraph)??new Tee(r=>r):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,br(this._children),this._children.clear();for(const e of this._servicesToMaybeDispose)Hde(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,t){this._throwIfDisposed();const n=this,s=new class extends YD{dispose(){n._children.delete(s),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(s),t==null||t.add(s),s}invokeFunction(e,...t){this._throwIfDisposed();const n=uS.traceInvocation(this._enableTracing,e);let s=!1;try{return e({get:o=>{if(s)throw TH("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(o,n);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...t)}finally{s=!0,n.stop()}}createInstance(e,...t){this._throwIfDisposed();let n,s;return e instanceof od?(n=uS.traceCreation(this._enableTracing,e.ctor),s=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=uS.traceCreation(this._enableTracing,e),s=this._createInstance(e,t,n)),n.stop(),s}_createInstance(e,t=[],n){const s=su.getServiceDependencies(e).sort((a,l)=>a.index-l.index),r=[];for(const a of s){const l=this._getOrCreateServiceInstance(a.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),r.push(l)}const o=s.length>0?s[0].index:t.length;if(t.length!==o){console.trace(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);const a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return Reflect.construct(e,t.concat(r))}_setCreatedServiceInstance(e,t){if(this._services.get(e)instanceof od)this._services.set(e,t);else if(this._parent)this._parent._setCreatedServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const n=this._getServiceInstanceOrDescriptor(e);return n instanceof od?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){var l;const s=new Tee(c=>c.id.toString());let r=0;const o=[{id:e,desc:t,_trace:n}],a=new Set;for(;o.length;){const c=o.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),s.lookupOrInsertNode(c),r++>1e3)throw new Lee(s);for(const u of su.getServiceDependencies(c.desc.ctor)){const d=this._getServiceInstanceOrDescriptor(u.id);if(d||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),(l=this._globalGraph)==null||l.insertEdge(String(c.id),String(u.id)),d instanceof od){const h={id:u.id,desc:d,_trace:c._trace.branch(u.id,!0)};s.insertEdge(c,h),o.push(h)}}}}for(;;){const c=s.roots();if(c.length===0){if(!s.isEmpty())throw new Lee(s);break}for(const{data:u}of c){if(this._getServiceInstanceOrDescriptor(u.id)instanceof od){const h=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setCreatedServiceInstance(u.id,h)}s.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],s,r){if(this._services.get(e)instanceof od)return this._createServiceInstance(e,t,n,s,r,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,s,r);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,n=[],s,r,o){if(s){const a=new YD(void 0,this._strict,this,this._enableTracing);a._globalGraphImplicitDependency=String(e);const l=new Map,c=new nFe(()=>{const u=a._createInstance(t,n,r);for(const[d,h]of l){const g=u[d];if(typeof g=="function")for(const p of h)p.disposable=g.apply(u,p.listener)}return l.clear(),o.add(u),u});return new Proxy(Object.create(null),{get(u,d){if(!c.isInitialized&&typeof d=="string"&&(d.startsWith("onDid")||d.startsWith("onWill"))){let p=l.get(d);return p||(p=new ba,l.set(d,p)),(v,y,w)=>{if(c.isInitialized)return c.value[d](v,y,w);{const x={listener:[v,y,w],disposable:void 0},k=p.push(x);return Dt(()=>{var R;k(),(R=x.disposable)==null||R.dispose()})}}}if(d in u)return u[d];const h=c.value;let g=h[d];return typeof g!="function"||(g=g.bind(h),u[d]=g),g},set(u,d,h){return c.value[d]=h,!0},getPrototypeOf(u){return t.prototype}})}else{const a=this._createInstance(t,n,r);return o.add(a),a}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}const Wa=class Wa{static traceInvocation(e,t){return e?new Wa(2,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):Wa._None}static traceCreation(e,t){return e?new Wa(1,t.name):Wa._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const n=new Wa(3,e.toString());return this._dep.push([e,t,n]),n}stop(){const e=Date.now()-this._start;Wa._totals+=e;let t=!1;function n(r,o){const a=[],l=new Array(r+1).join("	");for(const[c,u,d]of o._dep)if(u&&d){t=!0,a.push(`${l}CREATES -> ${c}`);const h=n(r+1,d);h&&a.push(h)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}const s=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${Wa._totals.toFixed(2)}ms)`];(e>2||t)&&Wa.all.add(s.join(`
`))}};Wa.all=new Set,Wa._None=new class extends Wa{constructor(){super(0,null)}stop(){}branch(){return this}},Wa._totals=0;let uS=Wa;const eZe=new Set([Wt.inMemory,Wt.vscodeSourceControl,Wt.walkThrough,Wt.walkThroughSnippet,Wt.vscodeChatCodeBlock]);class tZe{constructor(){this._byResource=new sl,this._byOwner=new Map}set(e,t,n){let s=this._byResource.get(e);s||(s=new Map,this._byResource.set(e,s)),s.set(t,n);let r=this._byOwner.get(t);r||(r=new sl,this._byOwner.set(t,r)),r.set(e,n)}get(e,t){const n=this._byResource.get(e);return n==null?void 0:n.get(t)}delete(e,t){let n=!1,s=!1;const r=this._byResource.get(e);r&&(n=r.delete(t));const o=this._byOwner.get(t);if(o&&(s=o.delete(e)),n!==s)throw new Error("illegal state");return n&&s}values(e){var t,n;return typeof e=="string"?((t=this._byOwner.get(e))==null?void 0:t.values())??yn.empty():Ut.isUri(e)?((n=this._byResource.get(e))==null?void 0:n.values())??yn.empty():yn.map(yn.concat(...this._byOwner.values()),s=>s[1])}}class nZe{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new sl,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const n=this._data.get(t);n&&this._substract(n);const s=this._resourceStats(t);this._add(s),this._data.set(t,s)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(eZe.has(e.scheme))return t;for(const{severity:n}of this._service.read({resource:e}))n===Il.Error?t.errors+=1:n===Il.Warning?t.warnings+=1:n===Il.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class Cg{constructor(){this._onMarkerChanged=new zde({delay:0,merge:Cg._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new tZe,this._stats=new nZe(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if(y9e(n))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const s=[];for(const r of n){const o=Cg._toMarker(e,t,r);o&&s.push(o)}this._data.set(t,e,s),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,n){let{code:s,severity:r,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:u,endColumn:d,relatedInformation:h,tags:g}=n;if(o)return l=l>0?l:1,c=c>0?c:1,u=u>=l?u:l,d=d>0?d:c,{resource:t,owner:e,code:s,severity:r,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:u,endColumn:d,relatedInformation:h,tags:g}}changeAll(e,t){const n=[],s=this._data.values(e);if(s)for(const r of s){const o=yn.first(r);o&&(n.push(o.resource),this._data.delete(o.resource,e))}if(O4(t)){const r=new sl;for(const{resource:o,marker:a}of t){const l=Cg._toMarker(e,o,a);if(!l)continue;const c=r.get(o);c?c.push(l):(r.set(o,[l]),n.push(o))}for(const[o,a]of r)this._data.set(o,e,a)}n.length>0&&this._onMarkerChanged.fire(n)}read(e=Object.create(null)){let{owner:t,resource:n,severities:s,take:r}=e;if((!r||r<0)&&(r=-1),t&&n){const o=this._data.get(n,t);if(o){const a=[];for(const l of o)if(Cg._accept(l,s)){const c=a.push(l);if(r>0&&c===r)break}return a}else return[]}else if(!t&&!n){const o=[];for(const a of this._data.values())for(const l of a)if(Cg._accept(l,s)){const c=o.push(l);if(r>0&&c===r)return o}return o}else{const o=this._data.values(n??t),a=[];for(const l of o)for(const c of l)if(Cg._accept(c,s)){const u=a.push(c);if(r>0&&u===r)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new sl;for(const n of e)for(const s of n)t.set(s,!0);return Array.from(t.keys())}}class iZe extends be{get configurationModel(){return this._configurationModel}constructor(e){super(),this.logService=e,this._configurationModel=Qs.createEmptyModel(this.logService)}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=Qs.createEmptyModel(this.logService);const e=ir.as(R1.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const n=this.getConfigurationDefaultOverrides();for(const s of e){const r=n[s],o=t[s];r!==void 0?this._configurationModel.setValue(s,r):o?this._configurationModel.setValue(s,o.default):this._configurationModel.removeValue(s)}}}const PA=nn("accessibilitySignalService"),Jt=class Jt{static register(e){return new Jt(e.fileName)}constructor(e){this.fileName=e}};Jt.error=Jt.register({fileName:"error.mp3"}),Jt.warning=Jt.register({fileName:"warning.mp3"}),Jt.success=Jt.register({fileName:"success.mp3"}),Jt.foldedArea=Jt.register({fileName:"foldedAreas.mp3"}),Jt.break=Jt.register({fileName:"break.mp3"}),Jt.quickFixes=Jt.register({fileName:"quickFixes.mp3"}),Jt.taskCompleted=Jt.register({fileName:"taskCompleted.mp3"}),Jt.taskFailed=Jt.register({fileName:"taskFailed.mp3"}),Jt.terminalBell=Jt.register({fileName:"terminalBell.mp3"}),Jt.diffLineInserted=Jt.register({fileName:"diffLineInserted.mp3"}),Jt.diffLineDeleted=Jt.register({fileName:"diffLineDeleted.mp3"}),Jt.diffLineModified=Jt.register({fileName:"diffLineModified.mp3"}),Jt.chatRequestSent=Jt.register({fileName:"chatRequestSent.mp3"}),Jt.chatResponseReceived1=Jt.register({fileName:"chatResponseReceived1.mp3"}),Jt.chatResponseReceived2=Jt.register({fileName:"chatResponseReceived2.mp3"}),Jt.chatResponseReceived3=Jt.register({fileName:"chatResponseReceived3.mp3"}),Jt.chatResponseReceived4=Jt.register({fileName:"chatResponseReceived4.mp3"}),Jt.clear=Jt.register({fileName:"clear.mp3"}),Jt.save=Jt.register({fileName:"save.mp3"}),Jt.format=Jt.register({fileName:"format.mp3"}),Jt.voiceRecordingStarted=Jt.register({fileName:"voiceRecordingStarted.mp3"}),Jt.voiceRecordingStopped=Jt.register({fileName:"voiceRecordingStopped.mp3"}),Jt.progress=Jt.register({fileName:"progress.mp3"});let mi=Jt;class sZe{constructor(e){this.randomOneOf=e}}const At=class At{constructor(e,t,n,s,r,o){this.sound=e,this.name=t,this.legacySoundSettingsKey=n,this.settingsKey=s,this.legacyAnnouncementSettingsKey=r,this.announcementMessage=o}static register(e){const t=new sZe("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),n=new At(t,e.name,e.legacySoundSettingsKey,e.settingsKey,e.legacyAnnouncementSettingsKey,e.announcementMessage);return At._signals.add(n),n}};At._signals=new Set,At.errorAtPosition=At.register({name:S("accessibilitySignals.positionHasError.name","Error at Position"),sound:mi.error,announcementMessage:S("accessibility.signals.positionHasError","Error"),settingsKey:"accessibility.signals.positionHasError",delaySettingsKey:"accessibility.signalOptions.delays.errorAtPosition"}),At.warningAtPosition=At.register({name:S("accessibilitySignals.positionHasWarning.name","Warning at Position"),sound:mi.warning,announcementMessage:S("accessibility.signals.positionHasWarning","Warning"),settingsKey:"accessibility.signals.positionHasWarning",delaySettingsKey:"accessibility.signalOptions.delays.warningAtPosition"}),At.errorOnLine=At.register({name:S("accessibilitySignals.lineHasError.name","Error on Line"),sound:mi.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:S("accessibility.signals.lineHasError","Error on Line"),settingsKey:"accessibility.signals.lineHasError"}),At.warningOnLine=At.register({name:S("accessibilitySignals.lineHasWarning.name","Warning on Line"),sound:mi.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:S("accessibility.signals.lineHasWarning","Warning on Line"),settingsKey:"accessibility.signals.lineHasWarning"}),At.foldedArea=At.register({name:S("accessibilitySignals.lineHasFoldedArea.name","Folded Area on Line"),sound:mi.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:S("accessibility.signals.lineHasFoldedArea","Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"}),At.break=At.register({name:S("accessibilitySignals.lineHasBreakpoint.name","Breakpoint on Line"),sound:mi.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:S("accessibility.signals.lineHasBreakpoint","Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"}),At.inlineSuggestion=At.register({name:S("accessibilitySignals.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:mi.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"}),At.terminalQuickFix=At.register({name:S("accessibilitySignals.terminalQuickFix.name","Terminal Quick Fix"),sound:mi.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:S("accessibility.signals.terminalQuickFix","Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"}),At.onDebugBreak=At.register({name:S("accessibilitySignals.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:mi.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:S("accessibility.signals.onDebugBreak","Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"}),At.noInlayHints=At.register({name:S("accessibilitySignals.noInlayHints","No Inlay Hints on Line"),sound:mi.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:S("accessibility.signals.noInlayHints","No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"}),At.taskCompleted=At.register({name:S("accessibilitySignals.taskCompleted","Task Completed"),sound:mi.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:S("accessibility.signals.taskCompleted","Task Completed"),settingsKey:"accessibility.signals.taskCompleted"}),At.taskFailed=At.register({name:S("accessibilitySignals.taskFailed","Task Failed"),sound:mi.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:S("accessibility.signals.taskFailed","Task Failed"),settingsKey:"accessibility.signals.taskFailed"}),At.terminalCommandFailed=At.register({name:S("accessibilitySignals.terminalCommandFailed","Terminal Command Failed"),sound:mi.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:S("accessibility.signals.terminalCommandFailed","Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"}),At.terminalCommandSucceeded=At.register({name:S("accessibilitySignals.terminalCommandSucceeded","Terminal Command Succeeded"),sound:mi.success,announcementMessage:S("accessibility.signals.terminalCommandSucceeded","Command Succeeded"),settingsKey:"accessibility.signals.terminalCommandSucceeded"}),At.terminalBell=At.register({name:S("accessibilitySignals.terminalBell","Terminal Bell"),sound:mi.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:S("accessibility.signals.terminalBell","Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"}),At.notebookCellCompleted=At.register({name:S("accessibilitySignals.notebookCellCompleted","Notebook Cell Completed"),sound:mi.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:S("accessibility.signals.notebookCellCompleted","Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"}),At.notebookCellFailed=At.register({name:S("accessibilitySignals.notebookCellFailed","Notebook Cell Failed"),sound:mi.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:S("accessibility.signals.notebookCellFailed","Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"}),At.diffLineInserted=At.register({name:S("accessibilitySignals.diffLineInserted","Diff Line Inserted"),sound:mi.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"}),At.diffLineDeleted=At.register({name:S("accessibilitySignals.diffLineDeleted","Diff Line Deleted"),sound:mi.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"}),At.diffLineModified=At.register({name:S("accessibilitySignals.diffLineModified","Diff Line Modified"),sound:mi.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"}),At.chatRequestSent=At.register({name:S("accessibilitySignals.chatRequestSent","Chat Request Sent"),sound:mi.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:S("accessibility.signals.chatRequestSent","Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"}),At.chatResponseReceived=At.register({name:S("accessibilitySignals.chatResponseReceived","Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[mi.chatResponseReceived1,mi.chatResponseReceived2,mi.chatResponseReceived3,mi.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"}),At.progress=At.register({name:S("accessibilitySignals.progress","Progress"),sound:mi.progress,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.progress",announcementMessage:S("accessibility.signals.progress","Progress"),settingsKey:"accessibility.signals.progress"}),At.clear=At.register({name:S("accessibilitySignals.clear","Clear"),sound:mi.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:S("accessibility.signals.clear","Clear"),settingsKey:"accessibility.signals.clear"}),At.save=At.register({name:S("accessibilitySignals.save","Save"),sound:mi.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:S("accessibility.signals.save","Save"),settingsKey:"accessibility.signals.save"}),At.format=At.register({name:S("accessibilitySignals.format","Format"),sound:mi.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:S("accessibility.signals.format","Format"),settingsKey:"accessibility.signals.format"}),At.voiceRecordingStarted=At.register({name:S("accessibilitySignals.voiceRecordingStarted","Voice Recording Started"),sound:mi.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"}),At.voiceRecordingStopped=At.register({name:S("accessibilitySignals.voiceRecordingStopped","Voice Recording Stopped"),sound:mi.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"});let ad=At;class rZe extends be{constructor(e,t=[]){super(),this.logger=new LBe([e,...t]),this._register(e.onDidChangeLogLevel(n=>this.setLevel(n)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}}const oZe=[];function aZe(){return oZe.slice(0)}class lZe{getParseResult(e){}}var $d=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},qi=function(i,e){return function(t,n){e(t,n,i)}};class cZe{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new se}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let bF=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new W8e(new cZe(t))):Promise.reject(new Error("Model not found"))}};bF=$d([qi(0,Io)],bF);const dR=class dR{show(){return dR.NULL_PROGRESS_RUNNER}async showWhile(e,t){await e}};dR.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};let yF=dR;class uZe{withProgress(e,t,n){return t({report:()=>{}})}}class dZe{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}}class hZe{async confirm(e){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}}doConfirm(e,t){let n=e;return t&&(n=n+`

`+t),Kn.confirm(n)}async prompt(e){var s;let t;if(this.doConfirm(e.message,e.detail)){const r=[...e.buttons??[]];e.cancelButton&&typeof e.cancelButton!="string"&&typeof e.cancelButton!="boolean"&&r.push(e.cancelButton),t=await((s=r[0])==null?void 0:s.run({checkboxChecked:!1}))}return{result:t}}async error(e,t){await this.prompt({type:fs.Error,message:e,detail:t})}}const AS=class AS{info(e){return this.notify({severity:fs.Info,message:e})}warn(e){return this.notify({severity:fs.Warning,message:e})}error(e){return this.notify({severity:fs.Error,message:e})}notify(e){switch(e.severity){case fs.Error:console.error(e.message);break;case fs.Warning:console.warn(e.message);break;default:console.log(e.message);break}return AS.NO_OP}prompt(e,t,n,s){return AS.NO_OP}status(e,t){return be.None}};AS.NO_OP=new eHe;let wF=AS,CF=class{constructor(e){this._onWillExecuteCommand=new se,this._onDidExecuteCommand=new se,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const n=oa.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const s=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(s)}catch(s){return Promise.reject(s)}}};CF=$d([qi(0,Pn)],CF);let ly=class extends v$e{constructor(e,t,n,s,r,o){super(e,t,n,s,r),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=g=>{const p=new Ze;p.add(ge(g,De.KEY_DOWN,_=>{const v=new hi(_);this._dispatch(v,v.target)&&(v.preventDefault(),v.stopPropagation())})),p.add(ge(g,De.KEY_UP,_=>{const v=new hi(_);this._singleModifierDispatch(v,v.target)&&v.preventDefault()})),this._domNodeListeners.push(new fZe(g,p))},l=g=>{for(let p=0;p<this._domNodeListeners.length;p++){const _=this._domNodeListeners[p];_.domNode===g&&(this._domNodeListeners.splice(p,1),_.dispose())}},c=g=>{g.getOption(61)||a(g.getContainerDomNode())},u=g=>{g.getOption(61)||l(g.getContainerDomNode())};this._register(o.onCodeEditorAdd(c)),this._register(o.onCodeEditorRemove(u)),o.listCodeEditors().forEach(c);const d=g=>{a(g.getContainerDomNode())},h=g=>{l(g.getContainerDomNode())};this._register(o.onDiffEditorAdd(d)),this._register(o.onDiffEditorRemove(h)),o.listDiffEditors().forEach(d)}addDynamicKeybinding(e,t,n,s){return Cd(oa.registerCommand(e,n),this.addDynamicKeybindings([{keybinding:t,command:e,when:s}]))}addDynamicKeybindings(e){const t=e.map(n=>({keybinding:Z9(n.keybinding,lc),command:n.command??null,commandArgs:n.commandArgs,when:n.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}));return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),Dt(()=>{for(let n=0;n<this._dynamicKeybindings.length;n++)if(this._dynamicKeybindings[n]===t[0]){this._dynamicKeybindings.splice(n,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(W2.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new XC(e,t,n=>this._log(n))}return this._cachedResolver}_documentHasFocus(){return Kn.document.hasFocus()}_toNormalizedKeybindingItems(e,t){const n=[];let s=0;for(const r of e){const o=r.when||void 0,a=r.keybinding;if(!a)n[s++]=new nJ(void 0,r.command,r.commandArgs,o,t,null,!1);else{const l=Pk.resolveKeybinding(a,lc);for(const c of l)n[s++]=new nJ(c,r.command,r.commandArgs,o,t,null,!1)}}return n}resolveKeyboardEvent(e){const t=new J0(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new Pk([t],lc)}};ly=$d([qi(0,Nn),qi(1,ll),qi(2,D1),qi(3,Lu),qi(4,Tu),qi(5,Es)],ly);class fZe extends be{constructor(e,t){super(),this.domNode=e,this._register(t)}}function Iee(i){return i&&typeof i=="object"&&(!i.overrideIdentifier||typeof i.overrideIdentifier=="string")&&(!i.resource||i.resource instanceof Ut)}let QD=class{constructor(e){this.logService=e,this._onDidChangeConfiguration=new se,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const t=new iZe(e);this._configuration=new gA(t.reload(),Qs.createEmptyModel(e),Qs.createEmptyModel(e),Qs.createEmptyModel(e),Qs.createEmptyModel(e),Qs.createEmptyModel(e),new sl,Qs.createEmptyModel(e),new sl,e),t.dispose()}getValue(e,t){const n=typeof e=="string"?e:void 0,s=Iee(e)?e:Iee(t)?t:{};return this._configuration.getValue(n,s,void 0)}updateValues(e){const t={data:this._configuration.toData()},n=[];for(const s of e){const[r,o]=s;this.getValue(r)!==o&&(this._configuration.updateValue(r,o),n.push(r))}if(n.length>0){const s=new f$e({keys:n,overrides:[]},t,this._configuration,void 0,this.logService);s.source=8,this._onDidChangeConfiguration.fire(s)}return Promise.resolve()}updateValue(e,t,n,s){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}};QD=$d([qi(0,Tu)],QD);let SF=class{constructor(e,t,n){this.configurationService=e,this.modelService=t,this.languageService=n,this._onDidChangeConfiguration=new se,this.configurationService.onDidChangeConfiguration(s=>{this._onDidChangeConfiguration.fire({affectedKeys:s.affectedKeys,affectsConfiguration:(r,o)=>s.affectsConfiguration(o)})})}getValue(e,t,n){const s=ue.isIPosition(t)?t:null,r=s?typeof n=="string"?n:void 0:typeof t=="string"?t:void 0,o=e?this.getLanguage(e,s):void 0;return typeof r>"u"?this.configurationService.getValue({resource:e,overrideIdentifier:o}):this.configurationService.getValue(r,{resource:e,overrideIdentifier:o})}getLanguage(e,t){const n=this.modelService.getModel(e);return n?t?n.getLanguageIdAtPosition(t.lineNumber,t.column):n.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}};SF=$d([qi(0,Oi),qi(1,Io),qi(2,Ws)],SF);let kF=class{constructor(e){this.configurationService=e}getEOL(e,t){const n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&typeof n=="string"&&n!=="auto"?n:ia||rn?`
`:`\r
`}};kF=$d([qi(0,Oi)],kF);class gZe{publicLog2(){}}const PS=class PS{constructor(){const e=Ut.from({scheme:PS.SCHEME,authority:"model",path:"/"});this.workspace={id:A$e,folders:[new N$e({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===PS.SCHEME?this.workspace.folders[0]:null}};PS.SCHEME="inmemory";let xF=PS;function XD(i,e,t){if(!e||!(i instanceof QD))return;const n=[];Object.keys(e).forEach(s=>{a$e(s)&&n.push([`editor.${s}`,e[s]]),t&&l$e(s)&&n.push([`diffEditor.${s}`,e[s]])}),n.length>0&&i.updateValues(n)}let EF=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}async apply(e,t){const n=Array.isArray(e)?e:DU.convert(e),s=new Map;for(const a of n){if(!(a instanceof v0))throw new Error("bad edit - only text edits are supported");const l=this._modelService.getModel(a.resource);if(!l)throw new Error("bad edit - model not found");if(typeof a.versionId=="number"&&l.getVersionId()!==a.versionId)throw new Error("bad state - model changed in the meantime");let c=s.get(l);c||(c=[],s.set(l,c)),c.push(u$e.replaceMove(J.lift(a.textEdit.range),a.textEdit.text))}let r=0,o=0;for(const[a,l]of s)a.pushStackElement(),a.pushEditOperations([],l,()=>[]),a.pushStackElement(),o+=1,r+=l.length;return{ariaSummary:K9(f7.bulkEditServiceSummary,r,o),isApplied:r>0}}};EF=$d([qi(0,Io)],EF);class mZe{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return EU(e)}}let TF=class extends e$e{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,n){if(!t){const s=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();s&&(t=s.getContainerDomNode())}return super.showContextView(e,t,n)}};TF=$d([qi(0,zm),qi(1,Es)],TF);class pZe{constructor(){this._neverEmitter=new se,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class _Ze extends v7{constructor(){super()}}class vZe extends rZe{constructor(){super(new TBe)}}let LF=class extends L7{constructor(e,t,n,s,r,o){super(e,t,n,s,r,o),this.configure({blockMouse:!1})}};LF=$d([qi(0,D1),qi(1,Lu),qi(2,G2),qi(3,yr),qi(4,I1),qi(5,Nn)],LF);const IF={amdModuleId:"vs/editor/common/services/editorSimpleWorker",esmModuleLocation:void 0,label:"editorWorkerService"};let DF=class extends I8{constructor(e,t,n,s,r){super(IF,e,t,n,s,r)}};DF=$d([qi(0,Io),qi(1,lU),qi(2,Tu),qi(3,Ud),qi(4,Yn)],DF);class bZe{async playSignal(e,t){}}_n(Tu,vZe,0);_n(Oi,QD,0);_n(lU,SF,0);_n(ffe,kF,0);_n(D$e,xF,0);_n(k$e,mZe,0);_n(D1,gZe,0);_n(vfe,hZe,0);_n(kfe,dZe,0);_n(Lu,wF,0);_n(P1,Cg,0);_n(Ws,_Ze,0);_n(kc,VXe,0);_n(Io,U7,0);_n(Gge,A7,0);_n(Nn,vF,0);_n(x$e,uZe,0);_n(RU,yF,0);_n(CA,jqe,0);_n(ex,DF,0);_n(s$e,EF,0);_n(P$e,pZe,0);_n(q4,bF,0);_n(Iu,dF,0);_n(jd,QQe,0);_n(ll,CF,0);_n(yr,ly,0);_n(xA,lF,0);_n(G2,TF,0);_n(Y2,R7,0);_n(bz,pF,0);_n(Rf,LF,0);_n(I1,hF,0);_n(PA,bZe,0);_n(hme,lZe,0);var ot;(function(i){const e=new Gy;for(const[l,c]of LX())e.set(l,c);const t=new YD(e,!0);e.set(Pn,t);function n(l){s||o({});const c=e.get(l);if(!c)throw new Error("Missing service "+l);return c instanceof od?t.invokeFunction(u=>u.get(l)):c}i.get=n;let s=!1;const r=new se;function o(l){if(s)return t;s=!0;for(const[u,d]of LX())e.get(u)||e.set(u,d);for(const u in l)if(l.hasOwnProperty(u)){const d=nn(u);e.get(d)instanceof od&&e.set(d,l[u])}const c=aZe();for(const u of c)try{t.createInstance(u)}catch(d){Un(d)}return r.fire(),t}i.initialize=o;function a(l){if(s)return l();const c=new Ze,u=c.add(r.event(()=>{u.dispose(),c.add(l())}));return c}i.withServices=a})(ot||(ot={}));function yZe(i,e){return new wZe(i,e)}class wZe extends lD{constructor(e,t){const n={amdModuleId:IF.amdModuleId,esmModuleLocation:IF.esmModuleLocation,label:t.label};super(n,t.keepIdleModels||!1,e),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(n){return Promise.reject(n)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?H3(this._foreignModuleHost):[];return e.$loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(n=>{this._foreignModuleCreateData=null;const s=(a,l)=>e.$fmr(a,l),r=(a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)},o={};for(const a of n)o[a]=r(a,s);return o})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this.workerWithSyncedResources(e).then(t=>this.getProxy())}}const wz={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};class uc{constructor(e,t,n,s){this.startColumn=e,this.endColumn=t,this.className=n,this.type=s,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length,s=t.length;if(n!==s)return!1;for(let r=0;r<n;r++)if(!uc._equals(e[r],t[r]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;const s=t+1,r=n+1,o=n-t,a=[];let l=0;for(const c of e)c.endColumn<=s||c.startColumn>=r||(a[l++]=new uc(Math.max(1,c.startColumn-s+1),Math.min(o+1,c.endColumn-s+1),c.className,c.type));return a}static filter(e,t,n,s){if(e.length===0)return[];const r=[];let o=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.range;if(u.endLineNumber<t||u.startLineNumber>t||u.isEmpty()&&(c.type===0||c.type===3))continue;const d=u.startLineNumber===t?u.startColumn:n,h=u.endLineNumber===t?u.endColumn:s;r[o++]=new uc(d,h,c.inlineClassName,c.type)}return r}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const n=uc._typeCompare(e.type,t.type);return n!==0?n:e.className!==t.className?e.className<t.className?-1:1:0}}class Dee{constructor(e,t,n,s){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=s}}class ZD{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,s=e.length;n<s;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let s=0;for(;s+1<this.count&&this.stopOffsets[s]===this.stopOffsets[s+1];)s++;n.push(new Dee(t,this.stopOffsets[s],this.classNames.join(" "),ZD._metadata(this.metadata))),t=this.stopOffsets[s]+1,this.stopOffsets.splice(0,s+1),this.classNames.splice(0,s+1),this.metadata.splice(0,s+1),this.count-=s+1}return this.count>0&&t<e&&(n.push(new Dee(t,e-1,this.classNames.join(" "),ZD._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let s=0;s<this.count;s++)if(this.stopOffsets[s]>=e){this.stopOffsets.splice(s,0,e),this.classNames.splice(s,0,t),this.metadata.splice(s,0,n);break}this.count++}}class CZe{static normalize(e,t){if(t.length===0)return[];const n=[],s=new ZD;let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];let c=l.startColumn,u=l.endColumn;const d=l.className,h=l.type===1?2:l.type===2?4:0;if(c>1){const _=e.charCodeAt(c-2);As(_)&&c--}if(u>1){const _=e.charCodeAt(u-2);As(_)&&u--}const g=c-1,p=u-2;r=s.consumeLowerThan(g,r,n),s.count===0&&(r=g),s.insert(p,d,h)}return s.consumeLowerThan(1073741824,r,n),n}}class Ps{constructor(e,t,n,s){this.endIndex=e,this.type=t,this.metadata=n,this.containsRTL=s,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class Yme{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class Yy{constructor(e,t,n,s,r,o,a,l,c,u,d,h,g,p,_,v,y,w,x){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=s,this.isBasicASCII=r,this.containsRTL=o,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(uc.compare),this.tabSize=u,this.startVisibleColumn=d,this.spaceWidth=h,this.stopRenderingLineAfter=_,this.renderWhitespace=v==="all"?4:v==="boundary"?1:v==="selection"?2:v==="trailing"?3:0,this.renderControlCharacters=y,this.fontLigatures=w,this.selectionsOnLine=x&&x.sort((R,L)=>R.startOffset<L.startOffset?-1:1);const k=Math.abs(p-h),T=Math.abs(g-h);k<T?(this.renderSpaceWidth=p,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=g,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&uc.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class Qme{constructor(e,t){this.partIndex=e,this.charIndex=t}}class ld{static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,n,s){const r=(t<<16|n<<0)>>>0;this._data[e-1]=r,this._horizontalOffset[e-1]=s}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=ld.getPartIndex(t),s=ld.getCharIndex(t);return new Qme(n,s)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;const s=(e<<16|n<<0)>>>0;let r=0,o=this.length-1;for(;r+1<o;){const _=r+o>>>1,v=this._data[_];if(v===s)return _;v>s?o=_:r=_}if(r===o)return r;const a=this._data[r],l=this._data[o];if(a===s)return r;if(l===s)return o;const c=ld.getPartIndex(a),u=ld.getCharIndex(a),d=ld.getPartIndex(l);let h;c!==d?h=t:h=ld.getCharIndex(l);const g=n-u,p=h-n;return g<=p?r:o}}class NF{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}}function Cz(i,e){if(i.lineContent.length===0){if(i.lineDecorations.length>0){e.appendString("<span>");let t=0,n=0,s=0;for(const o of i.lineDecorations)(o.type===1||o.type===2)&&(e.appendString('<span class="'),e.appendString(o.className),e.appendString('"></span>'),o.type===1&&(s|=1,t++),o.type===2&&(s|=2,n++));e.appendString("</span>");const r=new ld(1,t+n);return r.setColumnInfo(1,t,0,0),new NF(r,!1,s)}return e.appendString("<span><span></span></span>"),new NF(new ld(0,0),!1,0)}return NZe(xZe(i),e)}class SZe{constructor(e,t,n,s){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=s}}function MA(i){const e=new iA(1e4),t=Cz(i,e);return new SZe(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class kZe{constructor(e,t,n,s,r,o,a,l,c,u,d,h,g,p,_,v){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=s,this.isOverflowing=r,this.overflowingCharCount=o,this.parts=a,this.containsForeignElements=l,this.fauxIndentLength=c,this.tabSize=u,this.startVisibleColumn=d,this.containsRTL=h,this.spaceWidth=g,this.renderSpaceCharCode=p,this.renderWhitespace=_,this.renderControlCharacters=v}}function xZe(i){const e=i.lineContent;let t,n,s;i.stopRenderingLineAfter!==-1&&i.stopRenderingLineAfter<e.length?(t=!0,n=e.length-i.stopRenderingLineAfter,s=i.stopRenderingLineAfter):(t=!1,n=0,s=e.length);let r=EZe(e,i.containsRTL,i.lineTokens,i.fauxIndentLength,s);i.renderControlCharacters&&!i.isBasicASCII&&(r=LZe(e,r)),(i.renderWhitespace===4||i.renderWhitespace===1||i.renderWhitespace===2&&i.selectionsOnLine||i.renderWhitespace===3&&!i.continuesWithWrappedLine)&&(r=IZe(i,e,s,r));let o=0;if(i.lineDecorations.length>0){for(let a=0,l=i.lineDecorations.length;a<l;a++){const c=i.lineDecorations[a];c.type===3||c.type===1?o|=1:c.type===2&&(o|=2)}r=DZe(e,s,r,i.lineDecorations)}return i.containsRTL||(r=TZe(e,r,!i.isBasicASCII||i.fontLigatures)),new kZe(i.useMonospaceOptimizations,i.canUseHalfwidthRightwardsArrow,e,s,t,n,r,o,i.fauxIndentLength,i.tabSize,i.startVisibleColumn,i.containsRTL,i.spaceWidth,i.renderSpaceCharCode,i.renderWhitespace,i.renderControlCharacters)}function EZe(i,e,t,n,s){const r=[];let o=0;n>0&&(r[o++]=new Ps(n,"",0,!1));let a=n;for(let l=0,c=t.getCount();l<c;l++){const u=t.getEndOffset(l);if(u<=n)continue;const d=t.getClassName(l);if(u>=s){const g=e?bk(i.substring(a,s)):!1;r[o++]=new Ps(s,d,0,g);break}const h=e?bk(i.substring(a,u)):!1;r[o++]=new Ps(u,d,0,h),a=u}return r}function TZe(i,e,t){let n=0;const s=[];let r=0;if(t)for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex;if(n+50<c){const u=l.type,d=l.metadata,h=l.containsRTL;let g=-1,p=n;for(let _=n;_<c;_++)i.charCodeAt(_)===32&&(g=_),g!==-1&&_-p>=50&&(s[r++]=new Ps(g+1,u,d,h),p=g+1,g=-1);p!==c&&(s[r++]=new Ps(c,u,d,h))}else s[r++]=l;n=c}else for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.endIndex,u=c-n;if(u>50){const d=l.type,h=l.metadata,g=l.containsRTL,p=Math.ceil(u/50);for(let _=1;_<p;_++){const v=n+_*50;s[r++]=new Ps(v,d,h,g)}s[r++]=new Ps(c,d,h,g)}else s[r++]=l;n=c}return s}function Xme(i){return i<32?i!==9:i===127||i>=8234&&i<=8238||i>=8294&&i<=8297||i>=8206&&i<=8207||i===1564}function LZe(i,e){const t=[];let n=new Ps(0,"",0,!1),s=0;for(const r of e){const o=r.endIndex;for(;s<o;s++){const a=i.charCodeAt(s);Xme(a)&&(s>n.endIndex&&(n=new Ps(s,r.type,r.metadata,r.containsRTL),t.push(n)),n=new Ps(s+1,"mtkcontrol",r.metadata,!1),t.push(n))}s>n.endIndex&&(n=new Ps(o,r.type,r.metadata,r.containsRTL),t.push(n))}return t}function IZe(i,e,t,n){const s=i.continuesWithWrappedLine,r=i.fauxIndentLength,o=i.tabSize,a=i.startVisibleColumn,l=i.useMonospaceOptimizations,c=i.selectionsOnLine,u=i.renderWhitespace===1,d=i.renderWhitespace===3,h=i.renderSpaceWidth!==i.spaceWidth,g=[];let p=0,_=0,v=n[_].type,y=n[_].containsRTL,w=n[_].endIndex;const x=n.length;let k=!1,T=Ca(e),R;T===-1?(k=!0,T=t,R=t):R=k1(e);let L=!1,I=0,A=c&&c[I],B=a%o;for(let U=r;U<t;U++){const W=e.charCodeAt(U);A&&U>=A.endOffset&&(I++,A=c&&c[I]);let G;if(U<T||U>R)G=!0;else if(W===9)G=!0;else if(W===32)if(u)if(L)G=!0;else{const Z=U+1<t?e.charCodeAt(U+1):0;G=Z===32||Z===9}else G=!0;else G=!1;if(G&&c&&(G=!!A&&A.startOffset<=U&&A.endOffset>U),G&&d&&(G=k||U>R),G&&y&&U>=T&&U<=R&&(G=!1),L){if(!G||!l&&B>=o){if(h){const Z=p>0?g[p-1].endIndex:r;for(let ne=Z+1;ne<=U;ne++)g[p++]=new Ps(ne,"mtkw",1,!1)}else g[p++]=new Ps(U,"mtkw",1,!1);B=B%o}}else(U===w||G&&U>r)&&(g[p++]=new Ps(U,v,0,y),B=B%o);for(W===9?B=o:Tm(W)?B+=2:B++,L=G;U===w&&(_++,_<x);)v=n[_].type,y=n[_].containsRTL,w=n[_].endIndex}let V=!1;if(L)if(s&&u){const U=t>0?e.charCodeAt(t-1):0,W=t>1?e.charCodeAt(t-2):0;U===32&&W!==32&&W!==9||(V=!0)}else V=!0;if(V)if(h){const U=p>0?g[p-1].endIndex:r;for(let W=U+1;W<=t;W++)g[p++]=new Ps(W,"mtkw",1,!1)}else g[p++]=new Ps(t,"mtkw",1,!1);else g[p++]=new Ps(t,v,0,y);return g}function DZe(i,e,t,n){n.sort(uc.compare);const s=CZe.normalize(i,n),r=s.length;let o=0;const a=[];let l=0,c=0;for(let d=0,h=t.length;d<h;d++){const g=t[d],p=g.endIndex,_=g.type,v=g.metadata,y=g.containsRTL;for(;o<r&&s[o].startOffset<p;){const w=s[o];if(w.startOffset>c&&(c=w.startOffset,a[l++]=new Ps(c,_,v,y)),w.endOffset+1<=p)c=w.endOffset+1,a[l++]=new Ps(c,_+" "+w.className,v|w.metadata,y),o++;else{c=p,a[l++]=new Ps(c,_+" "+w.className,v|w.metadata,y);break}}p>c&&(c=p,a[l++]=new Ps(c,_,v,y))}const u=t[t.length-1].endIndex;if(o<r&&s[o].startOffset===u)for(;o<r&&s[o].startOffset===u;){const d=s[o];a[l++]=new Ps(c,d.className,d.metadata,!1),o++}return a}function NZe(i,e){const t=i.fontIsMonospace,n=i.canUseHalfwidthRightwardsArrow,s=i.containsForeignElements,r=i.lineContent,o=i.len,a=i.isOverflowing,l=i.overflowingCharCount,c=i.parts,u=i.fauxIndentLength,d=i.tabSize,h=i.startVisibleColumn,g=i.containsRTL,p=i.spaceWidth,_=i.renderSpaceCharCode,v=i.renderWhitespace,y=i.renderControlCharacters,w=new ld(o+1,c.length);let x=!1,k=0,T=h,R=0,L=0,I=0;g?e.appendString('<span dir="ltr">'):e.appendString("<span>");for(let A=0,B=c.length;A<B;A++){const V=c[A],U=V.endIndex,W=V.type,G=V.containsRTL,Z=v!==0&&V.isWhitespace(),ne=Z&&!t&&(W==="mtkw"||!s),fe=k===U&&V.isPseudoAfter();if(R=0,e.appendString("<span "),G&&e.appendString('style="unicode-bidi:isolate" '),e.appendString('class="'),e.appendString(ne?"mtkz":W),e.appendASCIICharCode(34),Z){let te=0;{let ce=k,ve=T;for(;ce<U;ce++){const oe=(r.charCodeAt(ce)===9?d-ve%d:1)|0;te+=oe,ce>=u&&(ve+=oe)}}for(ne&&(e.appendString(' style="width:'),e.appendString(String(p*te)),e.appendString('px"')),e.appendASCIICharCode(62);k<U;k++){w.setColumnInfo(k+1,A-I,R,L),I=0;const ce=r.charCodeAt(k);let ve,X;if(ce===9){ve=d-T%d|0,X=ve,!n||X>1?e.appendCharCode(8594):e.appendCharCode(65515);for(let oe=2;oe<=X;oe++)e.appendCharCode(160)}else ve=2,X=1,e.appendCharCode(_),e.appendCharCode(8204);R+=ve,L+=X,k>=u&&(T+=X)}}else for(e.appendASCIICharCode(62);k<U;k++){w.setColumnInfo(k+1,A-I,R,L),I=0;const te=r.charCodeAt(k);let ce=1,ve=1;switch(te){case 9:ce=d-T%d,ve=ce;for(let X=1;X<=ce;X++)e.appendCharCode(160);break;case 32:e.appendCharCode(160);break;case 60:e.appendString("&lt;");break;case 62:e.appendString("&gt;");break;case 38:e.appendString("&amp;");break;case 0:y?e.appendCharCode(9216):e.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.appendCharCode(65533);break;default:Tm(te)&&ve++,y&&te<32?e.appendCharCode(9216+te):y&&te===127?e.appendCharCode(9249):y&&Xme(te)?(e.appendString("[U+"),e.appendString(RZe(te)),e.appendString("]"),ce=8,ve=ce):e.appendCharCode(te)}R+=ce,L+=ve,k>=u&&(T+=ve)}fe?I++:I=0,k>=o&&!x&&V.isPseudoAfter()&&(x=!0,w.setColumnInfo(k+1,A,R,L)),e.appendString("</span>")}return x||w.setColumnInfo(o+1,c.length-1,R,L),a&&(e.appendString('<span class="mtkoverflow">'),e.appendString(S("showMore","Show more ({0})",AZe(l))),e.appendString("</span>")),e.appendString("</span>"),new NF(w,g,s)}function RZe(i){return i.toString(16).toUpperCase().padStart(4,"0")}function AZe(i){return i<1024?S("overflow.chars","{0} chars",i):i<1024*1024?`${(i/1024).toFixed(1)} KB`:`${(i/1024/1024).toFixed(1)} MB`}class Nee{constructor(e,t,n,s){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=n|0,this.height=s|0}}class PZe{constructor(e,t){this.tabSize=e,this.data=t}}class Sz{constructor(e,t,n,s,r,o,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=s,this.startVisibleColumn=r,this.tokens=o,this.inlineDecorations=a}}class al{constructor(e,t,n,s,r,o,a,l,c,u){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=s,this.isBasicASCII=al.isBasicASCII(n,o),this.containsRTL=al.containsRTL(n,this.isBasicASCII,r),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=u}static isBasicASCII(e,t){return t?BH(e):!0}static containsRTL(e,t,n){return!t&&n?bk(e):!1}}class dS{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}}class MZe{constructor(e,t,n,s){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=s}toInlineDecoration(e){return new dS(new J(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class Zme{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class Kk{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static compareByRenderingProps(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}static equals(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&ks(e.data,t.data)}static equalsArr(e,t){return ks(e,t,Kk.equals)}}function OZe(i){return Array.isArray(i)}function FZe(i){return!OZe(i)}function Jme(i){return typeof i=="string"}function Ree(i){return!Jme(i)}function zp(i){return!i}function of(i,e){return i.ignoreCase&&e?e.toLowerCase():e}function Aee(i){return i.replace(/[&<>'"_]/g,"-")}function BZe(i,e){console.log(`${i.languageId}: ${e}`)}function ui(i,e){return new Error(`${i.languageId}: ${e}`)}function Rg(i,e,t,n,s){const r=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let o=null;return e.replace(r,function(a,l,c,u,d,h,g,p,_){return zp(c)?zp(u)?!zp(d)&&d<n.length?of(i,n[d]):!zp(g)&&i&&typeof i[g]=="string"?i[g]:(o===null&&(o=s.split("."),o.unshift(s)),!zp(h)&&h<o.length?of(i,o[h]):""):of(i,t):"$"})}function VZe(i,e,t){const n=/\$[sS](\d\d?)/g;let s=null;return e.replace(n,function(r,o){return s===null&&(s=t.split("."),s.unshift(t)),!zp(o)&&o<s.length?of(i,s[o]):""})}function pT(i,e){let t=e;for(;t&&t.length>0;){const n=i.tokenizer[t];if(n)return n;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return null}function WZe(i,e){let t=e;for(;t&&t.length>0;){if(i.stateNames[t])return!0;const s=t.lastIndexOf(".");s<0?t=null:t=t.substr(0,s)}return!1}var HZe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},UZe=function(i,e){return function(t,n){e(t,n,i)}},RF;const epe=5,hR=class hR{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new hb(e,t);let n=hb.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let s=this._entries[n];return s||(s=new hb(e,t),this._entries[n]=s,s)}};hR._INSTANCE=new hR(epe);let Gk=hR;class hb{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return hb._equals(this,e)}push(e){return Gk.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return Gk.create(this.parent,e)}}class fv{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new fv(this.languageId,this.state)}}const fR=class fR{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(t!==null)return new hS(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new hS(e,t);const n=hb.getStackElementId(e);let s=this._entries[n];return s||(s=new hS(e,null),this._entries[n]=s,s)}};fR._INSTANCE=new fR(epe);let Ag=fR;class hS{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:Ag.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof hS)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}class zZe{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new vk(e,t,this._languageId)))}nestedLanguageTokenize(e,t,n,s){const r=n.languageId,o=n.state,a=es.get(r);if(!a)return this.enterLanguage(r),this.emit(s,""),o;const l=a.tokenize(e,t,o);if(s!==0)for(const c of l.tokens)this._tokens.push(new vk(c.offset+s,c.type,c.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new RH(this._tokens,e)}}class JD{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const n=this._theme.match(this._currentLanguageId,t)|1024;this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){const s=e!==null?e.length:0,r=t.length,o=n!==null?n.length:0;if(s===0&&r===0&&o===0)return new Uint32Array(0);if(s===0&&r===0)return n;if(r===0&&o===0)return e;const a=new Uint32Array(s+r+o);e!==null&&a.set(e);for(let l=0;l<r;l++)a[s+l]=t[l];return n!==null&&a.set(n,s+r),a}nestedLanguageTokenize(e,t,n,s){const r=n.languageId,o=n.state,a=es.get(r);if(!a)return this.enterLanguage(r),this.emit(s,""),o;const l=a.tokenizeEncoded(e,t,o);if(s!==0)for(let c=0,u=l.tokens.length;c<u;c+=2)l.tokens[c]+=s;return this._prependTokens=JD._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new W4(JD._merge(this._prependTokens,this._tokens,null),e)}}let Yk=RF=class extends be{constructor(e,t,n,s,r){super(),this._configurationService=r,this._languageService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=s,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let o=!1;this._register(es.onDidChange(a=>{if(o)return;let l=!1;for(let c=0,u=a.changedLanguages.length;c<u;c++){const d=a.changedLanguages[c];if(this._embeddedLanguages[d]){l=!0;break}}l&&(o=!0,es.handleChange([this._languageId]),o=!1)})),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))}))}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const n=es.get(t);if(n){if(n instanceof RF){const s=n.getLoadStatus();s.loaded===!1&&e.push(s.promise)}continue}es.isResolved(t)||e.push(es.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=Gk.create(null,this._lexer.start);return Ag.create(e,null)}tokenize(e,t,n){if(e.length>=this._maxTokenizationLineLength)return pge(this._languageId,n);const s=new zZe,r=this._tokenize(e,t,n,s);return s.finalize(r)}tokenizeEncoded(e,t,n){if(e.length>=this._maxTokenizationLineLength)return IU(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),n);const s=new JD(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),r=this._tokenize(e,t,n,s);return s.finalize(r)}_tokenize(e,t,n,s){return n.embeddedLanguageData?this._nestedTokenize(e,t,n,0,s):this._myTokenize(e,t,n,0,s)}_findLeavingNestedLanguageOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=pT(this._lexer,t.stack.state),!n))throw ui(this._lexer,"tokenizer state is not defined: "+t.stack.state);let s=-1,r=!1;for(const o of n){if(!Ree(o.action)||o.action.nextEmbedded!=="@pop")continue;r=!0;let a=o.resolveRegex(t.stack.state);const l=a.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const u=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),u)}const c=e.search(a);c===-1||c!==0&&o.matchOnlyAtLineStart||(s===-1||c<s)&&(s=c)}if(!r)throw ui(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return s}_nestedTokenize(e,t,n,s,r){const o=this._findLeavingNestedLanguageOffset(e,n);if(o===-1){const c=r.nestedLanguageTokenize(e,t,n.embeddedLanguageData,s);return Ag.create(n.stack,new fv(n.embeddedLanguageData.languageId,c))}const a=e.substring(0,o);a.length>0&&r.nestedLanguageTokenize(a,!1,n.embeddedLanguageData,s);const l=e.substring(o);return this._myTokenize(l,t,n,s+o,r)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,s,r){r.enterLanguage(this._languageId);const o=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=n.embeddedLanguageData,u=n.stack,d=0,h=null,g=!0;for(;g||d<l;){const p=d,_=u.depth,v=h?h.groups.length:0,y=u.state;let w=null,x=null,k=null,T=null,R=null;if(h){w=h.matches;const A=h.groups.shift();x=A.matched,k=A.action,T=h.rule,h.groups.length===0&&(h=null)}else{if(!g&&d>=l)break;g=!1;let A=this._lexer.tokenizer[y];if(!A&&(A=pT(this._lexer,y),!A))throw ui(this._lexer,"tokenizer state is not defined: "+y);const B=a.substr(d);for(const V of A)if((d===0||!V.matchOnlyAtLineStart)&&(w=B.match(V.resolveRegex(y)),w)){x=w[0],k=V.action;break}}if(w||(w=[""],x=""),k||(d<l&&(w=[a.charAt(d)],x=w[0]),k=this._lexer.defaultToken),x===null)break;for(d+=x.length;FZe(k)&&Ree(k)&&k.test;)k=k.test(x,w,y,d===l);let L=null;if(typeof k=="string"||Array.isArray(k))L=k;else if(k.group)L=k.group;else if(k.token!==null&&k.token!==void 0){if(k.tokenSubst?L=Rg(this._lexer,k.token,x,w,y):L=k.token,k.nextEmbedded)if(k.nextEmbedded==="@pop"){if(!c)throw ui(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw ui(this._lexer,"cannot enter embedded language from within an embedded language");R=Rg(this._lexer,k.nextEmbedded,x,w,y)}if(k.goBack&&(d=Math.max(0,d-k.goBack)),k.switchTo&&typeof k.switchTo=="string"){let A=Rg(this._lexer,k.switchTo,x,w,y);if(A[0]==="@"&&(A=A.substr(1)),pT(this._lexer,A))u=u.switchTo(A);else throw ui(this._lexer,"trying to switch to a state '"+A+"' that is undefined in rule: "+this._safeRuleName(T))}else{if(k.transform&&typeof k.transform=="function")throw ui(this._lexer,"action.transform not supported");if(k.next)if(k.next==="@push"){if(u.depth>=this._lexer.maxStack)throw ui(this._lexer,"maximum tokenizer stack size reached: ["+u.state+","+u.parent.state+",...]");u=u.push(y)}else if(k.next==="@pop"){if(u.depth<=1)throw ui(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(T));u=u.pop()}else if(k.next==="@popall")u=u.popall();else{let A=Rg(this._lexer,k.next,x,w,y);if(A[0]==="@"&&(A=A.substr(1)),pT(this._lexer,A))u=u.push(A);else throw ui(this._lexer,"trying to set a next state '"+A+"' that is undefined in rule: "+this._safeRuleName(T))}}k.log&&typeof k.log=="string"&&BZe(this._lexer,this._lexer.languageId+": "+Rg(this._lexer,k.log,x,w,y))}if(L===null)throw ui(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(T));const I=A=>{const B=this._languageService.getLanguageIdByLanguageName(A)||this._languageService.getLanguageIdByMimeType(A)||A,V=this._getNestedEmbeddedLanguageData(B);if(d<l){const U=e.substr(d);return this._nestedTokenize(U,t,Ag.create(u,V),s+d,r)}else return Ag.create(u,V)};if(Array.isArray(L)){if(h&&h.groups.length>0)throw ui(this._lexer,"groups cannot be nested: "+this._safeRuleName(T));if(w.length!==L.length+1)throw ui(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(T));let A=0;for(let B=1;B<w.length;B++)A+=w[B].length;if(A!==x.length)throw ui(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(T));h={rule:T,matches:w,groups:[]};for(let B=0;B<L.length;B++)h.groups[B]={action:L[B],matched:w[B+1]};d-=x.length;continue}else{if(L==="@rematch"&&(d-=x.length,x="",w=null,L="",R!==null))return I(R);if(x.length===0){if(l===0||_!==u.depth||y!==u.state||(h?h.groups.length:0)!==v)continue;throw ui(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(T))}let A=null;if(Jme(L)&&L.indexOf("@brackets")===0){const B=L.substr(9),V=jZe(this._lexer,x);if(!V)throw ui(this._lexer,"@brackets token returned but no bracket defined as: "+x);A=Aee(V.token+B)}else{const B=L===""?"":L+this._lexer.tokenPostfix;A=Aee(B)}p<o&&r.emit(p+s,A)}if(R!==null)return I(R)}return Ag.create(u,c)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new fv(e,Rk);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),es.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=es.get(e);return t?new fv(e,t.getInitialState()):new fv(e,Rk)}};Yk=RF=HZe([UZe(4,Oi)],Yk);function jZe(i,e){if(!e)return null;e=of(i,e);const t=i.brackets;for(const n of t){if(n.open===e)return{token:n.token,bracketType:1};if(n.close===e)return{token:n.token,bracketType:-1}}return null}const T6=N1("standaloneColorizer",{createHTML:i=>i});class kz{static colorizeElement(e,t,n,s){s=s||{};const r=s.theme||"vs",o=s.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(o)||o;e.setTheme(r);const l=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+r;const c=u=>{const d=(T6==null?void 0:T6.createHTML(u))??u;n.innerHTML=d};return this.colorize(t,l||"",a,s).then(c,u=>console.error(u))}static async colorize(e,t,n,s){const r=e.languageIdCodec;let o=4;s&&typeof s.tabSize=="number"&&(o=s.tabSize),WH(t)&&(t=t.substr(1));const a=Hy(t);if(!e.isRegisteredLanguageId(n))return Pee(a,o,r);const l=await es.getOrCreate(n);return l?$Ze(a,o,l,r):Pee(a,o,r)}static colorizeLine(e,t,n,s,r=4){const o=al.isBasicASCII(e,t),a=al.containsRTL(e,o,n);return MA(new Yy(!1,!0,e,!1,o,a,0,s,[],r,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,n=4){const s=e.getLineContent(t);e.tokenization.forceTokenization(t);const o=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(s,e.mightContainNonBasicASCII(),e.mightContainRTL(),o,n)}}function $Ze(i,e,t,n){return new Promise((s,r)=>{const o=()=>{const a=qZe(i,e,t,n);if(t instanceof Yk){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(o,r);return}}s(a)};o()})}function Pee(i,e,t){let n=[];const r=new Uint32Array(2);r[0]=0,r[1]=33587200;for(let o=0,a=i.length;o<a;o++){const l=i[o];r[0]=l.length;const c=new tr(r,l,t),u=al.isBasicASCII(l,!0),d=al.containsRTL(l,u,!0),h=MA(new Yy(!1,!0,l,!1,u,d,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(h.html),n.push("<br/>")}return n.join("")}function qZe(i,e,t,n){let s=[],r=t.getInitialState();for(let o=0,a=i.length;o<a;o++){const l=i[o],c=t.tokenizeEncoded(l,!0,r);tr.convertToEndOffset(c.tokens,l.length);const u=new tr(c.tokens,l,n),d=al.isBasicASCII(l,!0),h=al.containsRTL(l,d,!0),g=MA(new Yy(!1,!0,l,!1,d,h,0,u.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));s=s.concat(g.html),s.push("<br/>"),r=c.endState}return s.join("")}var KZe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},GZe=function(i,e){return function(t,n){e(t,n,i)}},Sb;let eN=(Sb=class{constructor(e,t){}dispose(){}},Sb.ID="editor.contrib.markerDecorations",Sb);eN=KZe([GZe(1,Gge)],eN);Hhe(eN.ID,eN,0);class tpe extends be{constructor(e,t){super(),this._onDidChange=this._register(new se),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null;const t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()};let n=!1,s=!1;const r=()=>{if(n&&!s)try{n=!1,s=!0,t()}finally{xa(rt(this._referenceDomElement),()=>{s=!1,r()})}};this._resizeObserver=new ResizeObserver(o=>{o&&o[0]&&o[0].contentRect?e={width:o[0].contentRect.width,height:o[0].contentRect.height}:e=null,n=!0,r()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,s=0;t?(n=t.width,s=t.height):this._referenceDomElement&&(n=this._referenceDomElement.clientWidth,s=this._referenceDomElement.clientHeight),n=Math.max(5,n),s=Math.max(5,s),(this._width!==n||this._height!==s)&&(this._width=n,this._height=s,e&&this._onDidChange.fire())}}const Dv=class Dv{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=Dv._read(e,this.key),n=r=>Dv._read(e,r),s=(r,o)=>Dv._write(e,r,o);this.migrate(t,n,s)}static _read(e,t){if(typeof e>"u")return;const n=t.indexOf(".");if(n>=0){const s=t.substring(0,n);return this._read(e[s],t.substring(n+1))}return e[t]}static _write(e,t,n){const s=t.indexOf(".");if(s>=0){const r=t.substring(0,s);e[r]=e[r]||{},this._write(e[r],t.substring(s+1),n);return}e[t]=n}};Dv.items=[];let Qk=Dv;function Nu(i,e){Qk.items.push(new Qk(i,e))}function Ea(i,e){Nu(i,(t,n,s)=>{if(typeof t<"u"){for(const[r,o]of e)if(t===r){s(i,o);return}}})}function YZe(i){Qk.items.forEach(e=>e.apply(i))}Ea("wordWrap",[[!0,"on"],[!1,"off"]]);Ea("lineNumbers",[[!0,"on"],[!1,"off"]]);Ea("cursorBlinking",[["visible","solid"]]);Ea("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);Ea("renderLineHighlight",[[!0,"line"],[!1,"none"]]);Ea("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);Ea("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);Ea("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Ea("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Ea("autoIndent",[[!1,"advanced"],[!0,"full"]]);Ea("matchBrackets",[[!0,"always"],[!1,"never"]]);Ea("renderFinalNewline",[[!0,"on"],[!1,"off"]]);Ea("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);Ea("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]);Ea("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]);Nu("autoClosingBrackets",(i,e,t)=>{i===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});Nu("renderIndentGuides",(i,e,t)=>{typeof i<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!i))});Nu("highlightActiveIndentGuide",(i,e,t)=>{typeof i<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!i))});const QZe={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};Nu("suggest.filteredTypes",(i,e,t)=>{if(i&&typeof i=="object"){for(const n of Object.entries(QZe))i[n[0]]===!1&&typeof e(`suggest.${n[1]}`)>"u"&&t(`suggest.${n[1]}`,!1);t("suggest.filteredTypes",void 0)}});Nu("quickSuggestions",(i,e,t)=>{if(typeof i=="boolean"){const n=i?"on":"off";t("quickSuggestions",{comments:n,strings:n,other:n})}});Nu("experimental.stickyScroll.enabled",(i,e,t)=>{typeof i=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",i))});Nu("experimental.stickyScroll.maxLineCount",(i,e,t)=>{typeof i=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",i))});Nu("codeActionsOnSave",(i,e,t)=>{if(i&&typeof i=="object"){let n=!1;const s={};for(const r of Object.entries(i))typeof r[1]=="boolean"?(n=!0,s[r[0]]=r[1]?"explicit":"never"):s[r[0]]=r[1];n&&t("codeActionsOnSave",s)}});Nu("codeActionWidget.includeNearbyQuickfixes",(i,e,t)=>{typeof i=="boolean"&&(t("codeActionWidget.includeNearbyQuickfixes",void 0),typeof e("codeActionWidget.includeNearbyQuickFixes")>"u"&&t("codeActionWidget.includeNearbyQuickFixes",i))});Nu("lightbulb.enabled",(i,e,t)=>{typeof i=="boolean"&&t("lightbulb.enabled",i?void 0:"off")});class XZe{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new se,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}}const tN=new XZe;var ZZe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},JZe=function(i,e){return function(t,n){e(t,n,i)}};let AF=class extends be{constructor(e,t,n,s,r){super(),this._accessibilityService=r,this._onDidChange=this._register(new se),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new se),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new Vde,this.isSimpleWidget=e,this.contextMenuId=t,this._containerObserver=this._register(new tpe(s,n.dimension)),this._targetWindowId=rt(s).vscodeWindowId,this._rawOptions=Mee(n),this._validatedOptions=Pg.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(Ig.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(tN.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(d8.onDidChange(()=>this._recomputeOptions())),this._register(ZI.getInstance(rt(s)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=Pg.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=p0.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),n=this._readFontInfo(t),s={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:n,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:tN.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return Pg.computeOptions(this._validatedOptions,s)}_readEnvConfiguration(){return{extraEditorClassName:tJe(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:U4||vc,pixelRatio:ZI.getInstance(uX(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return d8.readFontInfo(uX(this._targetWindowId,!0).window,e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=Mee(e);Pg.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=Pg.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=eJe(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}};AF=ZZe([JZe(4,Iu)],AF);function eJe(i){let e=0;for(;i;)i=Math.floor(i/10),e++;return e||1}function tJe(){let i="";return!Lm&&!che&&(i+="no-user-select "),Lm&&(i+="no-minimap-shadow ",i+="enable-user-select "),rn&&(i+="mac "),i}class nJe{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class iJe{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class Pg{static validateOptions(e){const t=new nJe;for(const n of Z_){const s=n.name==="_never_"?void 0:e[n.name];t._write(n.id,n.validate(s))}return t}static computeOptions(e,t){const n=new iJe;for(const s of Z_)n._write(s.id,s.compute(t,n,e._read(s.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?ks(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Pg._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){const n=[];let s=!1;for(const r of Z_){const o=!Pg._deepEquals(e._read(r.id),t._read(r.id));n[r.id]=o,o&&(s=!0)}return s?new Bde(n):null}static applyUpdate(e,t){let n=!1;for(const s of Z_)if(t.hasOwnProperty(s.name)){const r=s.applyUpdate(e[s.name],t[s.name]);e[s.name]=r.newValue,n=n||r.didChange}return n}}function Mee(i){const e=yg(i);return YZe(e),e}var jg;(function(i){const e={total:0,min:Number.MAX_VALUE,max:0},t={...e},n={...e},s={...e};let r=0;const o={keydown:0,input:0,render:0};function a(){y(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),o.keydown=1,queueMicrotask(l)}i.onKeyDown=a;function l(){o.keydown===1&&(performance.mark("keydown/end"),o.keydown=2)}function c(){performance.mark("input/start"),o.input=1,v()}i.onBeforeInput=c;function u(){o.input===0&&c(),queueMicrotask(d)}i.onInput=u;function d(){o.input===1&&(performance.mark("input/end"),o.input=2)}function h(){y()}i.onKeyUp=h;function g(){y()}i.onSelectionChange=g;function p(){o.keydown===2&&o.input===2&&o.render===0&&(performance.mark("render/start"),o.render=1,queueMicrotask(_),v())}i.onRenderStart=p;function _(){o.render===1&&(performance.mark("render/end"),o.render=2)}function v(){setTimeout(y)}function y(){o.keydown===2&&o.input===2&&o.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),w("keydown",e),w("input",t),w("render",n),w("inputlatency",s),r++,x())}function w(L,I){const A=performance.getEntriesByName(L)[0].duration;I.total+=A,I.min=Math.min(I.min,A),I.max=Math.max(I.max,A)}function x(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),o.keydown=0,o.input=0,o.render=0}function k(){if(r===0)return;const L={keydown:T(e),input:T(t),render:T(n),total:T(s),sampleCount:r};return R(e),R(t),R(n),R(s),r=0,L}i.getAndClearMeasurements=k;function T(L){return{average:L.total/r,max:L.max,min:L.min}}function R(L){L.total=0,L.min=Number.MAX_VALUE,L.max=0}})(jg||(jg={}));class OA{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(e){return new npe(this.x-e.scrollX,this.y-e.scrollY)}}class npe{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(e){return new OA(this.clientX+e.scrollX,this.clientY+e.scrollY)}}class sJe{constructor(e,t,n,s){this.x=e,this.y=t,this.width=n,this.height=s,this._editorPagePositionBrand=void 0}}class rJe{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function xz(i){const e=Nl(i);return new sJe(e.left,e.top,e.width,e.height)}function Ez(i,e,t){const n=e.width/i.offsetWidth,s=e.height/i.offsetHeight,r=(t.x-e.x)/n,o=(t.y-e.y)/s;return new rJe(r,o)}class Pm extends iu{constructor(e,t,n){super(rt(n),e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new OA(this.posx,this.posy),this.editorPos=xz(n),this.relativePos=Ez(n,this.editorPos,this.pos)}}class oJe{constructor(e){this._editorViewDomNode=e}_create(e){return new Pm(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return ge(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return ge(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return ge(e,De.MOUSE_DOWN,n=>{t(this._create(n))})}onPointerDown(e,t){return ge(e,De.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onMouseLeave(e,t){return ge(e,De.MOUSE_LEAVE,n=>{t(this._create(n))})}onMouseMove(e,t){return ge(e,"mousemove",n=>t(this._create(n)))}}class aJe{constructor(e){this._editorViewDomNode=e}_create(e){return new Pm(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return ge(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return ge(e,De.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onPointerLeave(e,t){return ge(e,De.POINTER_LEAVE,n=>{t(this._create(n))})}onPointerMove(e,t){return ge(e,"pointermove",n=>t(this._create(n)))}}class lJe extends be{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new uA),this._keydownListener=null}startMonitoring(e,t,n,s,r){this._keydownListener=Vs(e.ownerDocument,"keydown",o=>{o.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,o.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,n,o=>{s(new Pm(o,!0,this._editorViewDomNode))},o=>{this._keydownListener.dispose(),r(o)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}const gR=class gR{constructor(e){this._editor=e,this._instanceId=++gR._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new so(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let n=this._rules.get(t);if(!n){const s=this._counter++;n=new cJe(t,`dyn-rule-${this._instanceId}-${s}`,QI(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,n)}return n}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}};gR._idPool=0;let Oee=gR;class cJe{constructor(e,t,n,s){this.key=e,this.className=t,this.properties=s,this._referenceCount=0,this._styleElementDisposables=new Ze,this._styleElement=Hl(n,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let n=`.${e} {`;for(const s in t){const r=t[s];let o;typeof r=="object"?o=Re(r.id):o=r;const a=uJe(s);n+=`
	${a}: ${o};`}return n+=`
}`,n}dispose(){this._styleElementDisposables.dispose(),this._styleElement=void 0}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function uJe(i){return i.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}class sx extends be{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,s=e.length;n<s;n++){const r=e[n];switch(r.type){case 0:this.onCompositionStart(r)&&(t=!0);break;case 1:this.onCompositionEnd(r)&&(t=!0);break;case 2:this.onConfigurationChanged(r)&&(t=!0);break;case 3:this.onCursorStateChanged(r)&&(t=!0);break;case 4:this.onDecorationsChanged(r)&&(t=!0);break;case 5:this.onFlushed(r)&&(t=!0);break;case 6:this.onFocusChanged(r)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(r)&&(t=!0);break;case 8:this.onLineMappingChanged(r)&&(t=!0);break;case 9:this.onLinesChanged(r)&&(t=!0);break;case 10:this.onLinesDeleted(r)&&(t=!0);break;case 11:this.onLinesInserted(r)&&(t=!0);break;case 12:this.onRevealRangeRequest(r)&&(t=!0);break;case 13:this.onScrollChanged(r)&&(t=!0);break;case 15:this.onTokensChanged(r)&&(t=!0);break;case 14:this.onThemeChanged(r)&&(t=!0);break;case 16:this.onTokensColorsChanged(r)&&(t=!0);break;case 17:this.onZonesChanged(r)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(r)}}t&&(this._shouldRender=!0)}}class Ta extends sx{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class bu{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const n=[];let s=0;for(;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[s++]=this.read(e)),e=e.parentElement;const r=new Uint8Array(s);for(let o=0;o<s;o++)r[o]=n[s-o-1];return r}}class dJe{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class hJe extends dJe{constructor(e,t,n){super(e,t),this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class fJe{constructor(e,t,n,s){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n,this.continuesOnNextLine=s}}class FA{static from(e){const t=new Array(e.length);for(let n=0,s=e.length;n<s;n++){const r=e[n];t[n]=new FA(r.left,r.width)}return t}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}}class S0{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class gJe{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class Fee{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class SL{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,s,r){const o=this._createRange();try{return o.setStart(e,t),o.setEnd(n,s),o.getClientRects()}catch{return null}finally{this._detachRange(o,r)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(S0.compare);const t=[];let n=0,s=e[0];for(let r=1,o=e.length;r<o;r++){const a=e[r];s.left+s.width+.9>=a.left?s.width=Math.max(s.width,a.left+a.width-s.left):(t[n++]=s,s=a)}return t[n++]=s,t}static _createHorizontalRangesFromClientRects(e,t,n){if(!e||e.length===0)return null;const s=[];for(let r=0,o=e.length;r<o;r++){const a=e[r];s[r]=new S0(Math.max(0,(a.left-t)/n),a.width/n)}return this._mergeAdjacentRanges(s)}static readHorizontalRanges(e,t,n,s,r,o){const l=e.children.length-1;if(0>l)return null;if(t=Math.min(l,Math.max(0,t)),s=Math.min(l,Math.max(0,s)),t===s&&n===r&&n===0&&!e.children[t].firstChild){const h=e.children[t].getClientRects();return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(h,o.clientRectDeltaLeft,o.clientRectScale)}t!==s&&s>0&&r===0&&(s--,r=1073741824);let c=e.children[t].firstChild,u=e.children[s].firstChild;if((!c||!u)&&(!c&&n===0&&t>0&&(c=e.children[t-1].firstChild,n=1073741824),!u&&r===0&&s>0&&(u=e.children[s-1].firstChild,r=1073741824)),!c||!u)return null;n=Math.min(c.textContent.length,Math.max(0,n)),r=Math.min(u.textContent.length,Math.max(0,r));const d=this._readClientRects(c,n,u,r,o.endNode);return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(d,o.clientRectDeltaLeft,o.clientRectScale)}}const mJe=function(){return WI?!0:!(ia||vc||Lm)}();let fb=!0;class Bee{constructor(e,t){this.themeType=t;const n=e.options,s=n.get(50);n.get(38)==="off"?this.renderWhitespace=n.get(100):this.renderWhitespace="none",this.renderControlCharacters=n.get(95),this.spaceWidth=s.spaceWidth,this.middotWidth=s.middotWidth,this.wsmiddotWidth=s.wsmiddotWidth,this.useMonospaceOptimizations=s.isMonospace&&!n.get(33),this.canUseHalfwidthRightwardsArrow=s.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(67),this.stopRenderingLineAfter=n.get(118),this.fontLigatures=n.get(51)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}const mR=class mR{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=pn(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return eb(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,s,r){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const o=s.getViewLineRenderingData(e),a=this._options,l=uc.filter(o.inlineDecorations,e,o.minColumn,o.maxColumn);let c=null;if(eb(a.themeType)||this._options.renderWhitespace==="selection"){const g=s.selections;for(const p of g){if(p.endLineNumber<e||p.startLineNumber>e)continue;const _=p.startLineNumber===e?p.startColumn:o.minColumn,v=p.endLineNumber===e?p.endColumn:o.maxColumn;_<v&&(eb(a.themeType)&&l.push(new uc(_,v,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(c||(c=[]),c.push(new Yme(_-1,v-1))))}}const u=new Yy(a.useMonospaceOptimizations,a.canUseHalfwidthRightwardsArrow,o.content,o.continuesWithWrappedLine,o.isBasicASCII,o.containsRTL,o.minColumn-1,o.tokens,l,o.tabSize,o.startVisibleColumn,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,a.stopRenderingLineAfter,a.renderWhitespace,a.renderControlCharacters,a.fontLigatures!==Z0.OFF,c);if(this._renderedViewLine&&this._renderedViewLine.input.equals(u))return!1;r.appendString('<div style="top:'),r.appendString(String(t)),r.appendString("px;height:"),r.appendString(String(n)),r.appendString('px;" class="'),r.appendString(mR.CLASS_NAME),r.appendString('">');const d=Cz(u,r);r.appendString("</div>");let h=null;return fb&&mJe&&o.isBasicASCII&&a.useMonospaceOptimizations&&d.containsForeignElements===0&&(h=new _T(this._renderedViewLine?this._renderedViewLine.domNode:null,u,d.characterMapping)),h||(h=spe(this._renderedViewLine?this._renderedViewLine.domNode:null,u,d.characterMapping,d.containsRTL,d.containsForeignElements)),this._renderedViewLine=h,!0}layoutLine(e,t,n){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(n))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof _T:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof _T?this._renderedViewLine.monospaceAssumptionsAreValid():fb}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof _T&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,s){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));const r=this._renderedViewLine.input.stopRenderingLineAfter;if(r!==-1&&t>r+1&&n>r+1)return new Fee(!0,[new S0(this.getWidth(s),0)]);r!==-1&&t>r+1&&(t=r+1),r!==-1&&n>r+1&&(n=r+1);const o=this._renderedViewLine.getVisibleRangesForRange(e,t,n,s);return o&&o.length>0?new Fee(!1,o):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}};mR.CLASS_NAME="view-line";let Bh=mR;class _T{constructor(e,t,n){this._cachedWidth=-1,this.domNode=e,this.input=t;const s=Math.floor(t.lineContent.length/300);if(s>0){this._keyColumnPixelOffsetCache=new Float32Array(s);for(let r=0;r<s;r++)this._keyColumnPixelOffsetCache[r]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){const t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return fb;if(this.input.lineContent.length<300){const e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),fb=!1)}return fb}toSlowRenderedLine(){return spe(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,s){const r=this._getColumnPixelOffset(e,t,s),o=this._getColumnPixelOffset(e,n,s);return[new S0(r,o-r)]}_getColumnPixelOffset(e,t,n){if(t<=300){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const s=Math.floor((t-1)/300)-1,r=(s+1)*300+1;let o=-1;if(this._keyColumnPixelOffsetCache&&(o=this._keyColumnPixelOffsetCache[s],o===-1&&(o=this._actualReadPixelOffset(e,r,n),this._keyColumnPixelOffsetCache[s]=o)),o===-1){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const a=this._characterMapping.getHorizontalOffset(r),l=this._characterMapping.getHorizontalOffset(t);return o+this._charWidth*(l-a)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,n){if(!this.domNode)return-1;const s=this._characterMapping.getDomPosition(t),r=SL.readHorizontalRanges(this._getReadingTarget(this.domNode),s.partIndex,s.charIndex,s.partIndex,s.charIndex,n);return!r||r.length===0?-1:r[0].left}getColumnOfNodeOffset(e,t){return rpe(this._characterMapping,e,t)}}class ipe{constructor(e,t,n,s,r){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=r,this._cachedWidth=-1,this._pixelOffsetCache=null,!s||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let o=0,a=this._characterMapping.length;o<=a;o++)this._pixelOffsetCache[o]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,s){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const r=this._readPixelOffset(this.domNode,e,t,s);if(r===-1)return null;const o=this._readPixelOffset(this.domNode,e,n,s);return o===-1?null:[new S0(r,o-r)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,s)}_readVisibleRangesForRange(e,t,n,s,r){if(n===s){const o=this._readPixelOffset(e,t,n,r);return o===-1?null:[new S0(o,0)]}else return this._readRawVisibleRangesForRange(e,n,s,r)}_readPixelOffset(e,t,n,s){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(s);const r=this._getReadingTarget(e);return r.firstChild?(s.markDidDomLayout(),r.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const r=this._pixelOffsetCache[n];if(r!==-1)return r;const o=this._actualReadPixelOffset(e,t,n,s);return this._pixelOffsetCache[n]=o,o}return this._actualReadPixelOffset(e,t,n,s)}_actualReadPixelOffset(e,t,n,s){if(this._characterMapping.length===0){const l=SL.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,s);return!l||l.length===0?-1:l[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(s);const r=this._characterMapping.getDomPosition(n),o=SL.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,r.partIndex,r.charIndex,s);if(!o||o.length===0)return-1;const a=o[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(n),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,n,s){if(t===1&&n===this._characterMapping.length)return[new S0(0,this.getWidth(s))];const r=this._characterMapping.getDomPosition(t),o=this._characterMapping.getDomPosition(n);return SL.readHorizontalRanges(this._getReadingTarget(e),r.partIndex,r.charIndex,o.partIndex,o.charIndex,s)}getColumnOfNodeOffset(e,t){return rpe(this._characterMapping,e,t)}}class pJe extends ipe{_readVisibleRangesForRange(e,t,n,s,r){const o=super._readVisibleRangesForRange(e,t,n,s,r);if(!o||o.length===0||n===s||n===1&&s===this._characterMapping.length)return o;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,s,r);if(a!==-1){const l=o[o.length-1];l.left<a&&(l.width=a-l.left)}}return o}}const spe=function(){return U4?_Je:vJe}();function _Je(i,e,t,n,s){return new pJe(i,e,t,n,s)}function vJe(i,e,t,n,s){return new ipe(i,e,t,n,s)}function rpe(i,e,t){const n=e.textContent.length;let s=-1;for(;e;)e=e.previousSibling,s++;return i.getColumn(new Qme(s,t),n)}class Xk{static whitespaceVisibleColumn(e,t,n){const s=e.length;let r=0,o=-1,a=-1;for(let l=0;l<s;l++){if(l===t)return[o,a,r];switch(r%n===0&&(o=l,a=r),e.charCodeAt(l)){case 32:r+=1;break;case 9:r=ws.nextRenderTabStop(r,n);break;default:return[-1,-1,-1]}}return t===s?[o,a,r]:[-1,-1,-1]}static atomicPosition(e,t,n,s){const r=e.length,[o,a,l]=Xk.whitespaceVisibleColumn(e,t,n);if(l===-1)return-1;let c;switch(s){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%n===0)return t;c=l%n<=n/2;break}if(c){if(o===-1)return-1;let h=a;for(let g=o;g<r;++g){if(h===a+n)return o;switch(e.charCodeAt(g)){case 32:h+=1;break;case 9:h=ws.nextRenderTabStop(h,n);break;default:return-1}}return h===a+n?o:-1}const u=ws.nextRenderTabStop(l,n);let d=l;for(let h=t;h<r;h++){if(d===u)return h;switch(e.charCodeAt(h)){case 32:d+=1;break;case 9:d=ws.nextRenderTabStop(d,n);break;default:return-1}}return d===u?r:-1}}class pg{constructor(e=null){this.hitTarget=e,this.type=0}}class ope{get hitTarget(){return this.spanNode}constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n,this.type=1}}var jp;(function(i){function e(t,n,s){const r=t.getPositionFromDOMInfo(n,s);return r?new ope(r,n,null):new pg(n)}i.createFromDOMInfo=e})(jp||(jp={}));class bJe{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class Zr{static _deduceRage(e,t=null){return!t&&e?new J(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,n){return{type:0,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,n,s,r,o){return{type:e,element:t,mouseColumn:n,position:s,range:r,detail:o}}static createViewZone(e,t,n,s,r){return{type:e,element:t,mouseColumn:n,position:s,range:this._deduceRage(s),detail:r}}static createContentText(e,t,n,s,r){return{type:6,element:e,mouseColumn:t,position:n,range:this._deduceRage(n,s),detail:r}}static createContentEmpty(e,t,n,s){return{type:7,element:e,mouseColumn:t,position:n,range:this._deduceRage(n),detail:s}}static createContentWidget(e,t,n){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createScrollbar(e,t,n){return{type:11,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createOverlayWidget(e,t,n){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createOutsideEditor(e,t,n,s){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:n,outsideDistance:s}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class go{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===7}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===8}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===8}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===6}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===9}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowGuard(e){return e.length>=1&&e[0]===3}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}static isChildOfOverflowingOverlayWidgets(e){return e.length>=1&&e[0]===5}}class cy{constructor(e,t,n){this.viewModel=e.viewModel;const s=e.configuration.options;this.layoutInfo=s.get(146),this.viewDomNode=t.viewDomNode,this.lineHeight=s.get(67),this.stickyTabStops=s.get(117),this.typicalHalfwidthCharacterWidth=s.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return cy.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){const s=n.verticalOffset+n.height/2,r=e.viewModel.getLineCount();let o=null,a,l=null;return n.afterLineNumber!==r&&(l=new ue(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(o=new ue(n.afterLineNumber,e.viewModel.getLineMaxColumn(n.afterLineNumber))),l===null?a=o:o===null?a=l:t<s?a=o:a=l,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:o,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const s=this._context.viewModel.getLineCount(),r=this._context.viewModel.getLineMaxColumn(s);return{range:new J(s,r,s,r),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.viewModel.getLineMaxColumn(t);return{range:new J(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return cy._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class yJe{constructor(e,t,n,s){this.editorPos=t,this.pos=n,this.relativePos=s,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,Yr._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class wJe extends yJe{get target(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget}get targetPath(){return this._targetPathCacheElement!==this.target&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=bu.collect(this.target,this._ctx.viewDomNode)),this._targetPathCacheValue}constructor(e,t,n,s,r){super(e,t,n,s),this.hitTestResult=new Em(()=>Yr.doHitTest(this._ctx,this)),this._targetPathCacheElement=null,this._targetPathCacheValue=new Uint8Array(0),this._ctx=e,this._eventTarget=r;const o=!!this._eventTarget;this._useHitTestTarget=!o}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}get wouldBenefitFromHitTestTargetSwitch(){return!this._useHitTestTarget&&this.hitTestResult.value.hitTarget!==null&&this.target!==this.hitTestResult.value.hitTarget}switchToHitTestTarget(){this._useHitTestTarget=!0}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?ws.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return Zr.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return Zr.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,n,s){return Zr.createMargin(e,this.target,this._getMouseColumn(t),t,n,s)}fulfillViewZone(e,t,n){return Zr.createViewZone(e,this.target,this._getMouseColumn(t),t,n)}fulfillContentText(e,t,n){return Zr.createContentText(this.target,this._getMouseColumn(e),e,t,n)}fulfillContentEmpty(e,t){return Zr.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return Zr.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return Zr.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return Zr.createOverlayWidget(this.target,this._getMouseColumn(),e)}}const Vee={isAfterLines:!0};function L6(i){return{isAfterLines:!1,horizontalDistanceToText:i}}class Yr{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,n=bu.collect(t,this._viewHelper.viewDomNode);return!!(go.isChildOfContentWidgets(n)||go.isChildOfOverflowingContentWidgets(n)||go.isChildOfOverlayWidgets(n)||go.isChildOfOverflowingOverlayWidgets(n))}createMouseTarget(e,t,n,s,r){const o=new cy(this._context,this._viewHelper,e),a=new wJe(o,t,n,s,r);try{const l=Yr._createMouseTarget(o,a);if(l.type===6&&o.stickyTabStops&&l.position!==null){const c=Yr._snapToSoftTabBoundary(l.position,o.viewModel),u=J.fromPositions(c,c).plusRange(l.range);return a.fulfillContentText(c,u,l.detail)}return l}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t){if(t.target===null)return t.fulfillUnknown();const n=t;let s=null;return!go.isChildOfOverflowGuard(t.targetPath)&&!go.isChildOfOverflowingContentWidgets(t.targetPath)&&!go.isChildOfOverflowingOverlayWidgets(t.targetPath)&&(s=s||t.fulfillUnknown()),s=s||Yr._hitTestContentWidget(e,n),s=s||Yr._hitTestOverlayWidget(e,n),s=s||Yr._hitTestMinimap(e,n),s=s||Yr._hitTestScrollbarSlider(e,n),s=s||Yr._hitTestViewZone(e,n),s=s||Yr._hitTestMargin(e,n),s=s||Yr._hitTestViewCursor(e,n),s=s||Yr._hitTestTextArea(e,n),s=s||Yr._hitTestViewLines(e,n),s=s||Yr._hitTestScrollbar(e,n),s||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(go.isChildOfContentWidgets(t.targetPath)||go.isChildOfOverflowingContentWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillContentWidget(n):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(go.isChildOfOverlayWidgets(t.targetPath)||go.isChildOfOverflowingOverlayWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillOverlayWidget(n):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const n=e.lastRenderData.lastViewCursorsRenderData;for(const s of n)if(t.target===s.domNode)return t.fulfillContentText(s.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const n=e.lastRenderData.lastViewCursorsRenderData,s=t.mouseContentHorizontalOffset,r=t.mouseVerticalOffset;for(const o of n){if(s<o.contentLeft||s>o.contentLeft+o.width)continue;const a=e.getVerticalOffsetForLineNumber(o.position.lineNumber);if(a<=r&&r<=a+o.height)return t.fulfillContentText(o.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){const s=t.isInContentArea?8:5;return t.fulfillViewZone(s,n.position,n)}return null}static _hitTestTextArea(e,t){return go.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),s=n.range.getStartPosition();let r=Math.abs(t.relativePos.x);const o={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:r};if(r-=e.layoutInfo.glyphMarginLeft,r<=e.layoutInfo.glyphMarginWidth){const a=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(n.range.getStartPosition()),l=e.viewModel.glyphLanes.getLanesAtLine(a.lineNumber);return o.glyphMarginLane=l[Math.floor(r/e.lineHeight)],t.fulfillMargin(2,s,n.range,o)}return r-=e.layoutInfo.glyphMarginWidth,r<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,s,n.range,o):(r-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,s,n.range,o))}return null}static _hitTestViewLines(e,t){if(!go.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new ue(1,1),Vee);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const s=e.viewModel.getLineCount(),r=e.viewModel.getLineMaxColumn(s);return t.fulfillContentEmpty(new ue(s,r),Vee)}if(go.isStrictChildOfViewLines(t.targetPath)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(s)===0){const o=e.getLineWidth(s),a=L6(t.mouseContentHorizontalOffset-o);return t.fulfillContentEmpty(new ue(s,1),a)}const r=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>=r){const o=L6(t.mouseContentHorizontalOffset-r),a=new ue(s,e.viewModel.getLineMaxColumn(s));return t.fulfillContentEmpty(a,o)}}const n=t.hitTestResult.value;return n.type===1?Yr.createMouseTargetFromHitTestPosition(e,t,n.spanNode,n.position,n.injectedText):t.wouldBenefitFromHitTestTargetSwitch?(t.switchToHitTestTarget(),this._createMouseTarget(e,t)):t.fulfillUnknown()}static _hitTestMinimap(e,t){if(go.isChildOfMinimap(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new ue(n,s))}return null}static _hitTestScrollbarSlider(e,t){if(go.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const s=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),r=e.viewModel.getLineMaxColumn(s);return t.fulfillScrollbar(new ue(s,r))}}return null}static _hitTestScrollbar(e,t){if(go.isChildOfScrollableElement(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new ue(n,s))}return null}getMouseColumn(e){const t=this._context.configuration.options,n=t.get(146),s=this._context.viewLayout.getCurrentScrollLeft()+e.x-n.contentLeft;return Yr._getMouseColumn(s,t.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,s,r){const o=s.lineNumber,a=s.column,l=e.getLineWidth(o);if(t.mouseContentHorizontalOffset>l){const y=L6(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(s,y)}const c=e.visibleRangeForPosition(o,a);if(!c)return t.fulfillUnknown(s);const u=c.left;if(Math.abs(t.mouseContentHorizontalOffset-u)<1)return t.fulfillContentText(s,null,{mightBeForeignElement:!!r,injectedText:r});const d=[];if(d.push({offset:c.left,column:a}),a>1){const y=e.visibleRangeForPosition(o,a-1);y&&d.push({offset:y.left,column:a-1})}const h=e.viewModel.getLineMaxColumn(o);if(a<h){const y=e.visibleRangeForPosition(o,a+1);y&&d.push({offset:y.left,column:a+1})}d.sort((y,w)=>y.offset-w.offset);const g=t.pos.toClientCoordinates(rt(e.viewDomNode)),p=n.getBoundingClientRect(),_=p.left<=g.clientX&&g.clientX<=p.right;let v=null;for(let y=1;y<d.length;y++){const w=d[y-1],x=d[y];if(w.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=x.offset){v=new J(o,w.column,o,x.column);const k=Math.abs(w.offset-t.mouseContentHorizontalOffset),T=Math.abs(x.offset-t.mouseContentHorizontalOffset);s=k<T?new ue(o,w.column):new ue(o,x.column);break}}return t.fulfillContentText(s,v,{mightBeForeignElement:!_||!!r,injectedText:r})}static _doHitTestWithCaretRangeFromPoint(e,t){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),s=e.getVerticalOffsetForLineNumber(n),r=s+e.lineHeight;if(!(n===e.viewModel.getLineCount()&&t.mouseVerticalOffset>r)){const a=Math.floor((s+r)/2);let l=t.pos.y+(a-t.mouseVerticalOffset);l<=t.editorPos.y&&(l=t.editorPos.y+1),l>=t.editorPos.y+t.editorPos.height&&(l=t.editorPos.y+t.editorPos.height-1);const c=new OA(t.pos.x,l),u=this._actualDoHitTestWithCaretRangeFromPoint(e,c.toClientCoordinates(rt(e.viewDomNode)));if(u.type===1)return u}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates(rt(e.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const n=qb(e.viewDomNode);let s;if(n?typeof n.caretRangeFromPoint>"u"?s=CJe(n,t.clientX,t.clientY):s=n.caretRangeFromPoint(t.clientX,t.clientY):s=e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY),!s||!s.startContainer)return new pg;const r=s.startContainer;if(r.nodeType===r.TEXT_NODE){const o=r.parentNode,a=o?o.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===Bh.CLASS_NAME?jp.createFromDOMInfo(e,o,s.startOffset):new pg(r.parentNode)}else if(r.nodeType===r.ELEMENT_NODE){const o=r.parentNode,a=o?o.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===Bh.CLASS_NAME?jp.createFromDOMInfo(e,r,r.textContent.length):new pg(r)}return new pg}static _doHitTestWithCaretPositionFromPoint(e,t){const n=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const s=n.offsetNode.parentNode,r=s?s.parentNode:null,o=r?r.parentNode:null;return(o&&o.nodeType===o.ELEMENT_NODE?o.className:null)===Bh.CLASS_NAME?jp.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new pg(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const s=n.offsetNode.parentNode,r=s&&s.nodeType===s.ELEMENT_NODE?s.className:null,o=s?s.parentNode:null,a=o&&o.nodeType===o.ELEMENT_NODE?o.className:null;if(r===Bh.CLASS_NAME){const l=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(l)return jp.createFromDOMInfo(e,l,0)}else if(a===Bh.CLASS_NAME)return jp.createFromDOMInfo(e,n.offsetNode,0)}return new pg(n.offsetNode)}static _snapToSoftTabBoundary(e,t){const n=t.getLineContent(e.lineNumber),{tabSize:s}=t.model.getOptions(),r=Xk.atomicPosition(n,e.column-1,s,2);return r!==-1?new ue(e.lineNumber,r+1):e}static doHitTest(e,t){let n=new pg;if(typeof e.viewDomNode.ownerDocument.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates(rt(e.viewDomNode)))),n.type===1){const s=e.viewModel.getInjectedTextAt(n.position),r=e.viewModel.normalizePosition(n.position,2);(s||!r.equals(n.position))&&(n=new ope(r,n.spanNode,s))}return n}}function CJe(i,e,t){const n=document.createRange();let s=i.elementFromPoint(e,t);if(s!==null){for(;s&&s.firstChild&&s.firstChild.nodeType!==s.firstChild.TEXT_NODE&&s.lastChild&&s.lastChild.firstChild;)s=s.lastChild;const r=s.getBoundingClientRect(),o=rt(s),a=o.getComputedStyle(s,null).getPropertyValue("font-style"),l=o.getComputedStyle(s,null).getPropertyValue("font-variant"),c=o.getComputedStyle(s,null).getPropertyValue("font-weight"),u=o.getComputedStyle(s,null).getPropertyValue("font-size"),d=o.getComputedStyle(s,null).getPropertyValue("line-height"),h=o.getComputedStyle(s,null).getPropertyValue("font-family"),g=`${a} ${l} ${c} ${u}/${d} ${h}`,p=s.innerText;let _=r.left,v=0,y;if(e>r.left+r.width)v=p.length;else{const w=PF.getInstance();for(let x=0;x<p.length+1;x++){if(y=w.getCharWidth(p.charAt(x),g)/2,_+=y,e<_){v=x;break}_+=y}}n.setStart(s.firstChild,v),n.setEnd(s.firstChild,v)}return n}const Xp=class Xp{static getInstance(){return Xp._INSTANCE||(Xp._INSTANCE=new Xp),Xp._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const n=e+t;if(this._cache[n])return this._cache[n];const s=this._canvas.getContext("2d");s.font=t;const o=s.measureText(e).width;return this._cache[n]=o,o}};Xp._INSTANCE=null;let PF=Xp;class Tz extends sx{constructor(e,t,n){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new Yr(this._context,n),this._mouseDownOperation=this._register(new SJe(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(o,a)=>this._createMouseTarget(o,a),o=>this._getMouseColumn(o))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(146).height;const s=new oJe(this.viewHelper.viewDomNode);this._register(s.onContextMenu(this.viewHelper.viewDomNode,o=>this._onContextMenu(o,!0))),this._register(s.onMouseMove(this.viewHelper.viewDomNode,o=>{this._onMouseMove(o),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=ge(this.viewHelper.viewDomNode.ownerDocument,"mousemove",a=>{this.viewHelper.viewDomNode.contains(a.target)||this._onMouseLeave(new Pm(a,!1,this.viewHelper.viewDomNode))}))})),this._register(s.onMouseUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(s.onMouseLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o)));let r=0;this._register(s.onPointerDown(this.viewHelper.viewDomNode,(o,a)=>{r=a})),this._register(ge(this.viewHelper.viewDomNode,De.POINTER_UP,o=>{this._mouseDownOperation.onPointerUp()})),this._register(s.onMouseDown(this.viewHelper.viewDomNode,o=>this._onMouseDown(o,r))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=mD.INSTANCE;let t=0,n=Ig.getZoomLevel(),s=!1,r=0;const o=l=>{if(this.viewController.emitMouseWheel(l),!this._context.configuration.options.get(76))return;const c=new e1(l);if(e.acceptStandardWheelEvent(c),e.isPhysicalMouseWheel()){if(a(l)){const u=Ig.getZoomLevel(),d=c.deltaY>0?1:-1;Ig.setZoomLevel(u+d),c.preventDefault(),c.stopPropagation()}}else Date.now()-t>50&&(n=Ig.getZoomLevel(),s=a(l),r=0),t=Date.now(),r+=c.deltaY,s&&(Ig.setZoomLevel(n+r/5),c.preventDefault(),c.stopPropagation())};this._register(ge(this.viewHelper.viewDomNode,De.MOUSE_WHEEL,o,{capture:!0,passive:!1}));function a(l){return rn?(l.metaKey||l.ctrlKey)&&!l.shiftKey&&!l.altKey:l.ctrlKey&&!l.metaKey&&!l.shiftKey&&!l.altKey}}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(146)){const t=this._context.configuration.options.get(146).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const s=new npe(e,t).toPageCoordinates(rt(this.viewHelper.viewDomNode)),r=xz(this.viewHelper.viewDomNode);if(s.y<r.y||s.y>r.y+r.height||s.x<r.x||s.x>r.x+r.width)return null;const o=Ez(this.viewHelper.viewDomNode,r,s);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),r,s,o,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){const s=qb(this.viewHelper.viewDomNode);s&&(n=s.elementsFromPoint(e.posx,e.posy).find(r=>this.viewHelper.viewDomNode.contains(r)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const n=this._createMouseTarget(e,!0),s=n.type===6||n.type===7,r=n.type===2||n.type===3||n.type===4,o=n.type===3,a=this._context.configuration.options.get(110),l=n.type===8||n.type===5,c=n.type===9;let u=e.leftButton||e.middleButton;rn&&e.leftButton&&e.ctrlKey&&(u=!1);const d=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(u&&(s||o&&a))d(),this._mouseDownOperation.start(n.type,e,t);else if(r)e.preventDefault();else if(l){const h=n.detail;u&&this.viewHelper.shouldSuppressMouseDownOnViewZone(h.viewZoneId)&&(d(),this._mouseDownOperation.start(n.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(n.detail)&&(d(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:n})}}class SJe extends be{constructor(e,t,n,s,r,o){super(),this._context=e,this._viewController=t,this._viewHelper=n,this._mouseTargetFactory=s,this._createMouseTarget=r,this._getMouseColumn=o,this._mouseMoveMonitor=this._register(new lJe(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new kJe(this._context,this._viewHelper,this._mouseTargetFactory,(a,l,c)=>this._dispatchMouse(a,l,c))),this._mouseState=new MF,this._currentSelection=new Gn(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):t.type===13&&(t.outsidePosition==="above"||t.outsidePosition==="below")?this._topBottomDragScrolling.start(t,e):(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)))}start(e,t,n){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const s=this._findMousePosition(t,!0);if(!s||!s.position)return;this._mouseState.trySetCount(t.detail,s.position),t.detail=this._mouseState.count;const r=this._context.configuration.options;if(!r.get(92)&&r.get(35)&&!r.get(22)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&s.type===6&&s.position&&this._currentSelection.containsPosition(s.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,o=>this._onMouseDownThenMove(o),o=>{const a=this._findMousePosition(this._lastMouseEvent,!1);Eh(o)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(s,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,o=>this._onMouseDownThenMove(o),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,n=this._context.viewModel,s=this._context.viewLayout,r=this._getMouseColumn(e);if(e.posy<t.y){const a=t.y-e.posy,l=Math.max(s.getCurrentScrollTop()-a,0),c=cy.getZoneAtCoord(this._context,l);if(c){const d=this._helpPositionJumpOverViewZone(c);if(d)return Zr.createOutsideEditor(r,d,"above",a)}const u=s.getLineNumberAtVerticalOffset(l);return Zr.createOutsideEditor(r,new ue(u,1),"above",a)}if(e.posy>t.y+t.height){const a=e.posy-t.y-t.height,l=s.getCurrentScrollTop()+e.relativePos.y,c=cy.getZoneAtCoord(this._context,l);if(c){const d=this._helpPositionJumpOverViewZone(c);if(d)return Zr.createOutsideEditor(r,d,"below",a)}const u=s.getLineNumberAtVerticalOffset(l);return Zr.createOutsideEditor(r,new ue(u,n.getLineMaxColumn(u)),"below",a)}const o=s.getLineNumberAtVerticalOffset(s.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){const a=t.x-e.posx;return Zr.createOutsideEditor(r,new ue(o,1),"left",a)}if(e.posx>t.x+t.width){const a=e.posx-t.x-t.width;return Zr.createOutsideEditor(r,new ue(o,n.getLineMaxColumn(o)),"right",a)}return null}_findMousePosition(e,t){const n=this._getPositionOutsideEditor(e);if(n)return n;const s=this._createMouseTarget(e,t);if(!s.position)return null;if(s.type===8||s.type===5){const o=this._helpPositionJumpOverViewZone(s.detail);if(o)return Zr.createViewZone(s.type,s.element,s.mouseColumn,o,s.detail)}return s}_helpPositionJumpOverViewZone(e){const t=new ue(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,s=e.positionAfter;return n&&s?n.isBefore(t)?n:s:null}_dispatchMouse(e,t,n){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:n,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}class kJe extends be{constructor(e,t,n,s){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=n,this._dispatchMouse=s,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new xJe(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class xJe extends be{constructor(e,t,n,s,r,o){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=n,this._dispatchMouse=s,this._position=r,this._mouseEvent=o,this._lastTime=Date.now(),this._animationFrameDisposable=xa(rt(o.browserEvent),()=>this._execute())}dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){const e=this._context.configuration.options.get(67),t=this._context.configuration.options.get(146).height/e,n=this._position.outsideDistance/e;return n<=1.5?Math.max(30,t*(1+n)):n<=3?Math.max(60,t*(2+n)):Math.max(200,t*(7+n))}_execute(){const e=this._context.configuration.options.get(67),t=this._getScrollSpeed(),n=this._tick(),s=t*(n/1e3)*e,r=this._position.outsidePosition==="above"?-s:s;this._context.viewModel.viewLayout.deltaScrollNow(0,r),this._viewHelper.renderNow();const o=this._context.viewLayout.getLinesViewportData(),a=this._position.outsidePosition==="above"?o.startLineNumber:o.endLineNumber;let l;{const c=xz(this._viewHelper.viewDomNode),u=this._context.configuration.options.get(146).horizontalScrollbarHeight,d=new OA(this._mouseEvent.pos.x,c.y+c.height-u-.1),h=Ez(this._viewHelper.viewDomNode,c,d);l=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),c,d,h,null)}(!l.position||l.position.lineNumber!==a)&&(this._position.outsidePosition==="above"?l=Zr.createOutsideEditor(this._position.mouseColumn,new ue(a,1),"above",this._position.outsideDistance):l=Zr.createOutsideEditor(this._position.mouseColumn,new ue(a,this._context.viewModel.getLineMaxColumn(a)),"below",this._position.outsideDistance)),this._dispatchMouse(l,!0,2),this._animationFrameDisposable=xa(rt(l.element),()=>this._execute())}}const pR=class pR{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const n=new Date().getTime();n-this._lastSetMouseDownCountTime>pR.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};pR.CLEAR_MOUSE_DOWN_COUNT_TIME=400;let MF=pR;const Nv=class Nv{constructor(e,t,n,s,r){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selection=s,this.newlineCountBeforeSelection=r}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const n=e.getValue(),s=e.getSelectionStart(),r=e.getSelectionEnd();let o;if(t){const a=n.substring(0,s),l=t.value.substring(0,t.selectionStart);a===l&&(o=t.newlineCountBeforeSelection)}return new Nv(n,s,r,null,o)}collapseSelection(){return this.selectionStart===this.value.length?this:new Nv(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){var s,r,o,a;if(e<=this.selectionStart){const l=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(((s=this.selection)==null?void 0:s.getStartPosition())??null,l,-1)}if(e>=this.selectionEnd){const l=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(((r=this.selection)==null?void 0:r.getEndPosition())??null,l,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf("")===-1)return this._finishDeduceEditorPosition(((o=this.selection)==null?void 0:o.getStartPosition())??null,t,1);const n=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(((a=this.selection)==null?void 0:a.getEndPosition())??null,n,-1)}_finishDeduceEditorPosition(e,t,n){let s=0,r=-1;for(;(r=t.indexOf(`
`,r+1))!==-1;)s++;return[e,n*t.length,s]}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const s=Math.min(Y9(e.value,t.value),e.selectionStart,t.selectionStart),r=Math.min(Q9(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(s,e.value.length-r);const o=t.value.substring(s,t.value.length-r),a=e.selectionStart-s,l=e.selectionEnd-s,c=t.selectionStart-s,u=t.selectionEnd-s;if(c===u){const h=e.selectionStart-s;return{text:o,replacePrevCharCnt:h,replaceNextCharCnt:0,positionDelta:0}}const d=l-a;return{text:o,replacePrevCharCnt:d,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const n=Math.min(Y9(e.value,t.value),e.selectionEnd),s=Math.min(Q9(e.value,t.value),e.value.length-e.selectionEnd),r=e.value.substring(n,e.value.length-s),o=t.value.substring(n,t.value.length-s);e.selectionStart-n;const a=e.selectionEnd-n;t.selectionStart-n;const l=t.selectionEnd-n;return{text:o,replacePrevCharCnt:a,replaceNextCharCnt:r.length-a,positionDelta:l-o.length}}};Nv.EMPTY=new Nv("",0,0,null,void 0);let Jr=Nv;class gv{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const n=e*t,s=n+1,r=n+t;return new J(s,1,r+1,1)}static fromEditorSelection(e,t,n,s){const o=gv._getPageOfLine(t.startLineNumber,n),a=gv._getRangeForPage(o,n),l=gv._getPageOfLine(t.endLineNumber,n),c=gv._getRangeForPage(l,n);let u=a.intersectRanges(new J(1,1,t.startLineNumber,t.startColumn));if(s&&e.getValueLengthInRange(u,1)>500){const y=e.modifyPosition(u.getEndPosition(),-500);u=J.fromPositions(y,u.getEndPosition())}const d=e.getValueInRange(u,1),h=e.getLineCount(),g=e.getLineMaxColumn(h);let p=c.intersectRanges(new J(t.endLineNumber,t.endColumn,h,g));if(s&&e.getValueLengthInRange(p,1)>500){const y=e.modifyPosition(p.getStartPosition(),500);p=J.fromPositions(p.getStartPosition(),y)}const _=e.getValueInRange(p,1);let v;if(o===l||o+1===l)v=e.getValueInRange(t,1);else{const y=a.intersectRanges(t),w=c.intersectRanges(t);v=e.getValueInRange(y,1)+""+e.getValueInRange(w,1)}return s&&v.length>2*500&&(v=v.substring(0,500)+""+v.substring(v.length-500,v.length)),new Jr(d+v+_,d.length,d.length+v.length,t,u.endLineNumber-u.startLineNumber)}}var EJe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Wee=function(i,e){return function(t,n){e(t,n,i)}},nN;(function(i){i.Tap="-monaco-textarea-synthetic-tap"})(nN||(nN={}));const _R=class _R{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}};_R.INSTANCE=new _R;let iN=_R;class TJe{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}let OF=class extends be{get textAreaState(){return this._textAreaState}constructor(e,t,n,s,r,o){super(),this._host=e,this._textArea=t,this._OS=n,this._browser=s,this._accessibilityService=r,this._logService=o,this._onFocus=this._register(new se),this.onFocus=this._onFocus.event,this._onBlur=this._register(new se),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new se),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new se),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new se),this.onCut=this._onCut.event,this._onPaste=this._register(new se),this.onPaste=this._onPaste.event,this._onType=this._register(new se),this.onType=this._onType.event,this._onCompositionStart=this._register(new se),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new se),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new se),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new se),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new yf),this._asyncTriggerCut=this._register(new so(()=>this._onCut.fire(),0)),this._textAreaState=Jr.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(Le.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new so(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)):this._asyncFocusGainWriteScreenReaderContent.clear()})),this._hasFocus=!1,this._currentComposition=null;let a=null;this._register(this._textArea.onKeyDown(l=>{const c=new hi(l);(c.keyCode===114||this._currentComposition&&c.keyCode===1)&&c.stopPropagation(),c.equals(9)&&c.preventDefault(),a=c,this._onKeyDown.fire(c)})),this._register(this._textArea.onKeyUp(l=>{const c=new hi(l);this._onKeyUp.fire(c)})),this._register(this._textArea.onCompositionStart(l=>{const c=new TJe;if(this._currentComposition){this._currentComposition=c;return}if(this._currentComposition=c,this._OS===2&&a&&a.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===l.data&&(a.code==="ArrowRight"||a.code==="ArrowLeft")){c.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:l.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:l.data});return}this._onCompositionStart.fire({data:l.data})})),this._register(this._textArea.onCompositionUpdate(l=>{const c=this._currentComposition;if(!c)return;if(this._browser.isAndroid){const d=Jr.readFromTextArea(this._textArea,this._textAreaState),h=Jr.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(h),this._onCompositionUpdate.fire(l);return}const u=c.handleCompositionUpdate(l.data);this._textAreaState=Jr.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(u),this._onCompositionUpdate.fire(l)})),this._register(this._textArea.onCompositionEnd(l=>{const c=this._currentComposition;if(!c)return;if(this._currentComposition=null,this._browser.isAndroid){const d=Jr.readFromTextArea(this._textArea,this._textAreaState),h=Jr.deduceAndroidCompositionInput(this._textAreaState,d);this._textAreaState=d,this._onType.fire(h),this._onCompositionEnd.fire();return}const u=c.handleCompositionUpdate(l.data);this._textAreaState=Jr.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(u),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const c=Jr.readFromTextArea(this._textArea,this._textAreaState),u=Jr.deduceInput(this._textAreaState,c,this._OS===2);u.replacePrevCharCnt===0&&u.text.length===1&&(As(u.text.charCodeAt(0))||u.text.charCodeAt(0)===127)||(this._textAreaState=c,(u.text!==""||u.replacePrevCharCnt!==0||u.replaceNextCharCnt!==0||u.positionDelta!==0)&&this._onType.fire(u))})),this._register(this._textArea.onCut(l=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(l),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(l=>{this._ensureClipboardGetsEditorSelection(l)})),this._register(this._textArea.onPaste(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),l.preventDefault(),!l.clipboardData)return;let[c,u]=Hee.getTextData(l.clipboardData);c&&(u=u||iN.INSTANCE.get(c),this._onPaste.fire({text:c,metadata:u}))})),this._register(this._textArea.onFocus(()=>{const l=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!l&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new so(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return ge(this._textArea.ownerDocument,"selectionchange",t=>{if(jg.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const n=Date.now(),s=n-e;if(e=n,s<5)return;const r=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),r<100||!this._textAreaState.selection)return;const o=this._textArea.getValue();if(this._textAreaState.value!==o)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),u=this._host.deduceModelPosition(c[0],c[1],c[2]),d=this._textAreaState.deduceEditorPosition(l),h=this._host.deduceModelPosition(d[0],d[1],d[2]),g=new Gn(u.lineNumber,u.column,h.lineNumber,h.column);this._onSelectionChangeRequest.fire(g)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeNativeTextAreaContent(e){!this._accessibilityService.isScreenReaderOptimized()&&e==="render"||this._currentComposition||(this._logService.trace(`writeTextAreaState(reason: ${e})`),this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};iN.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,n),e.preventDefault(),e.clipboardData&&Hee.setTextData(e.clipboardData,t.text,t.html,n)}};OF=EJe([Wee(4,Iu),Wee(5,Tu)],OF);const Hee={getTextData(i){const e=i.getData(Mh.text);let t=null;const n=i.getData("vscode-editor-data");if(typeof n=="string")try{t=JSON.parse(n),t.version!==1&&(t=null)}catch{}return e.length===0&&t===null&&i.files.length>0?[Array.prototype.slice.call(i.files,0).map(r=>r.name).join(`
`),null]:[e,t]},setTextData(i,e,t,n){i.setData(Mh.text,e),typeof t=="string"&&i.setData("text/html",t),i.setData("vscode-editor-data",JSON.stringify(n))}};class LJe extends be{get ownerDocument(){return this._actual.ownerDocument}constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new qt(this._actual,"keydown")).event,this.onKeyUp=this._register(new qt(this._actual,"keyup")).event,this.onCompositionStart=this._register(new qt(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new qt(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new qt(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new qt(this._actual,"beforeinput")).event,this.onInput=this._register(new qt(this._actual,"input")).event,this.onCut=this._register(new qt(this._actual,"cut")).event,this.onCopy=this._register(new qt(this._actual,"copy")).event,this.onPaste=this._register(new qt(this._actual,"paste")).event,this.onFocus=this._register(new qt(this._actual,"focus")).event,this.onBlur=this._register(new qt(this._actual,"blur")).event,this._onSyntheticTap=this._register(new se),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>jg.onKeyDown())),this._register(this.onBeforeInput(()=>jg.onBeforeInput())),this._register(this.onInput(()=>jg.onInput())),this._register(this.onKeyUp(()=>jg.onKeyUp())),this._register(ge(this._actual,nN.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=qb(this._actual);return e?e.activeElement===this._actual:this._actual.isConnected?ro()===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const n=this._actual;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,n){const s=this._actual;let r=null;const o=qb(s);o?r=o.activeElement:r=ro();const a=rt(r),l=r===s,c=s.selectionStart,u=s.selectionEnd;if(l&&c===t&&u===n){vc&&a.parent!==a&&s.focus();return}if(l){this.setIgnoreSelectionChangeTime("setSelectionRange"),s.setSelectionRange(t,n),vc&&a.parent!==a&&s.focus();return}try{const d=jFe(s);this.setIgnoreSelectionChangeTime("setSelectionRange"),s.focus(),s.setSelectionRange(t,n),$Fe(s,d)}catch{}}}class IJe extends Tz{constructor(e,t,n){super(e,t,n),this._register(To.addTarget(this.viewHelper.linesContentDomNode)),this._register(ge(this.viewHelper.linesContentDomNode,ei.Tap,r=>this.onTap(r))),this._register(ge(this.viewHelper.linesContentDomNode,ei.Change,r=>this.onChange(r))),this._register(ge(this.viewHelper.linesContentDomNode,ei.Contextmenu,r=>this._onContextMenu(new Pm(r,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(ge(this.viewHelper.linesContentDomNode,"pointerdown",r=>{const o=r.pointerType;if(o==="mouse"){this._lastPointerType="mouse";return}else o==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const s=new aJe(this.viewHelper.viewDomNode);this._register(s.onPointerMove(this.viewHelper.viewDomNode,r=>this._onMouseMove(r))),this._register(s.onPointerUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(s.onPointerLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r))),this._register(s.onPointerDown(this.viewHelper.viewDomNode,(r,o)=>this._onMouseDown(r,o)))}onTap(e){!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget)||(e.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(e,!1))}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY),this._lastPointerType==="pen"&&this._dispatchGesture(e,!0)}_dispatchGesture(e,t){const n=this._createMouseTarget(new Pm(e,!1,this.viewHelper.viewDomNode),!1);n.position&&this.viewController.dispatchMouse({position:n.position,mouseColumn:n.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:t,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:n.type===6&&n.detail.injectedText!==null})}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}}class DJe extends Tz{constructor(e,t,n){super(e,t,n),this._register(To.addTarget(this.viewHelper.linesContentDomNode)),this._register(ge(this.viewHelper.linesContentDomNode,ei.Tap,s=>this.onTap(s))),this._register(ge(this.viewHelper.linesContentDomNode,ei.Change,s=>this.onChange(s))),this._register(ge(this.viewHelper.linesContentDomNode,ei.Contextmenu,s=>this._onContextMenu(new Pm(s,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new Pm(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const n=document.createEvent("CustomEvent");n.initEvent(nN.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class NJe extends be{constructor(e,t,n){super(),(X0||z9e&&Ade)&&uhe.pointerEvents?this.handler=this._register(new IJe(e,t,n)):Kn.TouchEvent?this.handler=this._register(new DJe(e,t,n)):this.handler=this._register(new Tz(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class F1 extends sx{}const vR=class vR extends F1{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new ue(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(67);const t=e.get(68);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(96);const n=e.get(146);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onDecorationsChanged(e){return e.affectsLineNumber}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new ue(e,1));if(t.column!==1)return"";const n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(this._renderLineNumbers===2){const s=Math.abs(this._lastCursorModelPosition.lineNumber-n);return s===0?'<span class="relative-current-line-number">'+n+"</span>":String(s)}if(this._renderLineNumbers===3){if(this._lastCursorModelPosition.lineNumber===n||n%10===0)return String(n);const s=this._context.viewModel.getLineCount();return n===s?String(n):""}return String(n)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=ia?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,r=this._context.viewModel.getDecorationsInViewport(e.visibleRange).filter(c=>!!c.options.lineNumberClassName);r.sort((c,u)=>J.compareRangesUsingEnds(c.range,u.range));let o=0;const a=this._context.viewModel.getLineCount(),l=[];for(let c=n;c<=s;c++){const u=c-n;let d=this._getLineRenderLineNumber(c),h="";for(;o<r.length&&r[o].range.endLineNumber<c;)o++;for(let g=o;g<r.length;g++){const{range:p,options:_}=r[g];p.startLineNumber<=c&&(h+=" "+_.lineNumberClassName)}if(!d&&!h){l[u]="";continue}c===a&&this._context.viewModel.getLineLength(c)===0&&(this._renderFinalNewline==="off"&&(d=""),this._renderFinalNewline==="dimmed"&&(h+=" dimmed-line-number")),c===this._activeLineNumber&&(h+=" active-line-number"),l[u]=`<div class="${vR.CLASS_NAME}${t}${h}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${d}</div>`}this._renderResult=l}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}};vR.CLASS_NAME="line-numbers";let sN=vR;Nf((i,e)=>{const t=i.getColor(lKe),n=i.getColor(CKe);n?e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${n}; }`):t&&e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${t.transparent(.4)}; }`)});const Rv=class Rv extends Ta{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(146);this._canUseLayerHinting=!t.get(32),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=pn(document.createElement("div")),this._domNode.setClassName(Rv.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=pn(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(Rv.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(146);return this._canUseLayerHinting=!t.get(32),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}};Rv.CLASS_NAME="glyph-margin",Rv.OUTER_CLASS_NAME="margin";let rN=Rv;const gb="monaco-mouse-cursor-text";var RJe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Uee=function(i,e){return function(t,n){e(t,n,i)}};class AJe{constructor(e,t,n,s,r){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=n,this.widthOfHiddenLineTextBefore=s,this.distanceToModelLineEnd=r,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new ue(this.modelLineNumber,this.distanceToModelLineStart+1),n=new ue(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const I6=vc;let FF=class extends Ta{constructor(e,t,n,s,r){super(e),this._keybindingService=s,this._instantiationService=r,this._primaryCursorPosition=new ue(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=n,this._scrollLeft=0,this._scrollTop=0;const o=this._context.configuration.options,a=o.get(146);this._setAccessibilityOptions(o),this._contentLeft=a.contentLeft,this._contentWidth=a.contentWidth,this._contentHeight=a.height,this._fontInfo=o.get(50),this._lineHeight=o.get(67),this._emptySelectionClipboard=o.get(37),this._copyWithSyntaxHighlighting=o.get(25),this._visibleTextArea=null,this._selections=[new Gn(1,1,1,1)],this._modelSelections=[new Gn(1,1,1,1)],this._lastRenderPosition=null,this.textArea=pn(document.createElement("textarea")),bu.write(this.textArea,7),this.textArea.setClassName(`inputarea ${gb}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:l}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${l*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(o)),this.textArea.setAttribute("aria-required",o.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(o.get(125))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",S("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",o.get(92)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=pn(document.createElement("div")),this.textAreaCover.setPosition("absolute");const c={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:h=>this._context.viewModel.getLineMaxColumn(h),getValueInRange:(h,g)=>this._context.viewModel.getValueInRange(h,g),getValueLengthInRange:(h,g)=>this._context.viewModel.getValueLengthInRange(h,g),modifyPosition:(h,g)=>this._context.viewModel.modifyPosition(h,g)},u={getDataToCopy:()=>{const h=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,Sa),g=this._context.viewModel.model.getEOL(),p=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),_=Array.isArray(h)?h:null,v=Array.isArray(h)?h.join(g):h;let y,w=null;if(this._copyWithSyntaxHighlighting&&v.length<65536){const x=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);x&&(y=x.html,w=x.mode)}return{isFromEmptySelection:p,multicursorText:_,text:v,html:y,mode:w}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){const h=this._selections[0];if(rn&&h.isEmpty()){const p=h.getStartPosition();let _=this._getWordBeforePosition(p);if(_.length===0&&(_=this._getCharacterBeforePosition(p)),_.length>0)return new Jr(_,_.length,_.length,J.fromPositions(p),0)}if(rn&&!h.isEmpty()&&c.getValueLengthInRange(h,0)<500){const p=c.getValueInRange(h,0);return new Jr(p,0,p.length,h,0)}if(Lm&&!h.isEmpty()){const p="vscode-placeholder";return new Jr(p,0,p.length,null,void 0)}return Jr.EMPTY}if(XQ){const h=this._selections[0];if(h.isEmpty()){const g=h.getStartPosition(),[p,_]=this._getAndroidWordAtPosition(g);if(p.length>0)return new Jr(p,_,_,J.fromPositions(g),0)}return Jr.EMPTY}return gv.fromEditorSelection(c,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(h,g,p)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(h,g,p)},d=this._register(new LJe(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(OF,u,d,lc,{isAndroid:XQ,isChrome:F2,isFirefox:vc,isSafari:Lm})),this._register(this._textAreaInput.onKeyDown(h=>{this._viewController.emitKeyDown(h)})),this._register(this._textAreaInput.onKeyUp(h=>{this._viewController.emitKeyUp(h)})),this._register(this._textAreaInput.onPaste(h=>{let g=!1,p=null,_=null;h.metadata&&(g=this._emptySelectionClipboard&&!!h.metadata.isFromEmptySelection,p=typeof h.metadata.multicursorText<"u"?h.metadata.multicursorText:null,_=h.metadata.mode),this._viewController.paste(h.text,g,p,_)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(h=>{h.replacePrevCharCnt||h.replaceNextCharCnt||h.positionDelta?this._viewController.compositionType(h.text,h.replacePrevCharCnt,h.replaceNextCharCnt,h.positionDelta):this._viewController.type(h.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(h=>{this._viewController.setSelection(h)})),this._register(this._textAreaInput.onCompositionStart(h=>{const g=this.textArea.domNode,p=this._modelSelections[0],{distanceToModelLineStart:_,widthOfHiddenTextBefore:v}=(()=>{const w=g.value.substring(0,Math.min(g.selectionStart,g.selectionEnd)),x=w.lastIndexOf(`
`),k=w.substring(x+1),T=k.lastIndexOf("	"),R=k.length-T-1,L=p.getStartPosition(),I=Math.min(L.column-1,R),A=L.column-1-I,B=k.substring(0,k.length-I),{tabSize:V}=this._context.viewModel.model.getOptions(),U=PJe(this.textArea.domNode.ownerDocument,B,this._fontInfo,V);return{distanceToModelLineStart:A,widthOfHiddenTextBefore:U}})(),{distanceToModelLineEnd:y}=(()=>{const w=g.value.substring(Math.max(g.selectionStart,g.selectionEnd)),x=w.indexOf(`
`),k=x===-1?w:w.substring(0,x),T=k.indexOf("	"),R=T===-1?k.length:k.length-T-1,L=p.getEndPosition(),I=Math.min(this._context.viewModel.model.getLineMaxColumn(L.lineNumber)-L.column,R);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(L.lineNumber)-L.column-I}})();this._context.viewModel.revealRange("keyboard",!0,J.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new AJe(this._context,p.startLineNumber,_,v,y),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${gb} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(h=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${gb}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(QC.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent(e){this._textAreaInput.writeNativeTextAreaContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',n=this._context.viewModel.getLineContent(e.lineNumber),s=Yb(t,[]);let r=!0,o=e.column,a=!0,l=e.column,c=0;for(;c<50&&(r||a);){if(r&&o<=1&&(r=!1),r){const u=n.charCodeAt(o-2);s.get(u)!==0?r=!1:o--}if(a&&l>n.length&&(a=!1),a){const u=n.charCodeAt(l-1);s.get(u)!==0?a=!1:l++}c++}return[n.substring(o-1,l-1),e.column-o]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),n=Yb(this._context.configuration.options.get(132),[]);let s=e.column,r=0;for(;s>1;){const o=t.charCodeAt(s-2);if(n.get(o)!==0||r>50)return t.substring(s-1,e.column-1);r++,s--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const n=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!As(n.charCodeAt(0)))return n}return""}_getAriaLabel(e){var n,s,r;if(e.get(2)===1){const o=(n=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode"))==null?void 0:n.getAriaLabel(),a=(s=this._keybindingService.lookupKeybinding("workbench.action.showCommands"))==null?void 0:s.getAriaLabel(),l=(r=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings"))==null?void 0:r.getAriaLabel(),c=S("accessibilityModeOff","The editor is not accessible at this time.");return o?S("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",c,o):a?S("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",c,a):l?S("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",c,l):c}return e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===C1.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const s=e.get(146).wrappingColumn;if(s!==-1&&this._accessibilitySupport!==1){const r=e.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(s*r.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=I6?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(146);this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(50),this._lineHeight=t.get(67),this._emptySelectionClipboard=t.get(37),this._copyWithSyntaxHighlighting=t.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:s}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${s*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(125))),(e.hasChanged(34)||e.hasChanged(92))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!QC.enabled||e.get(34)&&e.get(92)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){var t;this._primaryCursorPosition=new ue(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),(t=this._visibleTextArea)==null||t.prepareRender(e)}render(e){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){if(this._visibleTextArea){const n=this._visibleTextArea.visibleTextareaStart,s=this._visibleTextArea.visibleTextareaEnd,r=this._visibleTextArea.startPosition,o=this._visibleTextArea.endPosition;if(r&&o&&n&&s&&s.left>=this._scrollLeft&&n.left<=this._scrollLeft+this._contentWidth){const a=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,l=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let c=this._visibleTextArea.widthOfHiddenLineTextBefore,u=this._contentLeft+n.left-this._scrollLeft,d=s.left-n.left+1;if(u<this._contentLeft){const y=this._contentLeft-u;u+=y,c+=y,d-=y}d>this._contentWidth&&(d=this._contentWidth);const h=this._context.viewModel.getViewLineData(r.lineNumber),g=h.tokens.findTokenIndexAtOffset(r.column-1),p=h.tokens.findTokenIndexAtOffset(o.column-1),_=g===p,v=this._visibleTextArea.definePresentation(_?h.tokens.getPresentation(g):null);this.textArea.domNode.scrollTop=l*this._lineHeight,this.textArea.domNode.scrollLeft=c,this._doRender({lastRenderPosition:null,top:a,left:u,width:d,height:this._lineHeight,useCover:!1,color:(es.getColorMap()||[])[v.foreground],italic:v.italic,bold:v.bold,underline:v.underline,strikethrough:v.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(rn||this._accessibilitySupport===2){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const n=this._textAreaInput.textAreaState.newlineCountBeforeSelection??this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=n*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:I6?0:1,useCover:!1})}_newlinecount(e){let t=0,n=-1;do{if(n=e.indexOf(`
`,n+1),n===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:I6?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,n=this.textAreaCover;Nr(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?ke.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),n.setTop(e.useCover?e.top:0),n.setLeft(e.useCover?e.left:0),n.setWidth(e.useCover?e.width:0),n.setHeight(e.useCover?e.height:0);const s=this._context.configuration.options;s.get(57)?n.setClassName("monaco-editor-background textAreaCover "+rN.OUTER_CLASS_NAME):s.get(68).renderType!==0?n.setClassName("monaco-editor-background textAreaCover "+sN.CLASS_NAME):n.setClassName("monaco-editor-background textAreaCover")}};FF=RJe([Uee(3,yr),Uee(4,Pn)],FF);function PJe(i,e,t,n){if(e.length===0)return 0;const s=i.createElement("div");s.style.position="absolute",s.style.top="-50000px",s.style.width="50000px";const r=i.createElement("span");Nr(r,t),r.style.whiteSpace="pre",r.style.tabSize=`${n*t.spaceWidth}px`,r.append(e),s.appendChild(r),i.body.appendChild(s);const o=r.offsetWidth;return s.remove(),o}const MJe=()=>!0,OJe=()=>!1,FJe=i=>i===" "||i==="	";class P_{static shouldRecreate(e){return e.hasChanged(146)||e.hasChanged(132)||e.hasChanged(37)||e.hasChanged(77)||e.hasChanged(79)||e.hasChanged(80)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(9)||e.hasChanged(10)||e.hasChanged(14)||e.hasChanged(129)||e.hasChanged(50)||e.hasChanged(92)||e.hasChanged(131)}constructor(e,t,n,s){this.languageConfigurationService=s,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const r=n.options,o=r.get(146),a=r.get(50);this.readOnly=r.get(92),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=r.get(117),this.lineHeight=a.lineHeight,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(o.height/this.lineHeight)-2),this.useTabStops=r.get(129),this.wordSeparators=r.get(132),this.emptySelectionClipboard=r.get(37),this.copyWithSyntaxHighlighting=r.get(25),this.multiCursorMergeOverlapping=r.get(77),this.multiCursorPaste=r.get(79),this.multiCursorLimit=r.get(80),this.autoClosingBrackets=r.get(6),this.autoClosingComments=r.get(7),this.autoClosingQuotes=r.get(11),this.autoClosingDelete=r.get(9),this.autoClosingOvertype=r.get(10),this.autoSurround=r.get(14),this.autoIndent=r.get(12),this.wordSegmenterLocales=r.get(131),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const l=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(l)for(const u of l)this.surroundingPairs[u.open]=u.close;const c=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=(c==null?void 0:c.blockCommentStartToken)??null}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)==null?void 0:e.getElectricCharacters();if(t)for(const n of t)this._electricChars[n]=!0}return this._electricChars}onElectricCharacter(e,t,n){const s=r0(t,n-1),r=this.languageConfigurationService.getLanguageConfiguration(s.languageId).electricCharacter;return r?r.onElectricCharacter(e,s,n-s.firstCharOffset):null}normalizeIndentation(e){return Yge(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,n){switch(t){case"beforeWhitespace":return FJe;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,n);case"always":return MJe;case"never":return OJe}}_getLanguageDefinedShouldAutoClose(e,t){const n=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return s=>n.indexOf(s)!==-1}visibleColumnFromColumn(e,t){return ws.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,n){const s=ws.columnFromVisibleColumn(e.getLineContent(t),n,this.tabSize),r=e.getLineMinColumn(t);if(s<r)return r;const o=e.getLineMaxColumn(t);return s>o?o:s}}class Yt{static fromModelState(e){return new BJe(e)}static fromViewState(e){return new VJe(e)}static fromModelSelection(e){const t=Gn.liftSelection(e),n=new Gs(J.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return Yt.fromModelState(n)}static fromModelSelections(e){const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=this.fromModelSelection(e[n]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class BJe{constructor(e){this.modelState=e,this.viewState=null}}class VJe{constructor(e){this.modelState=null,this.viewState=e}}class Gs{constructor(e,t,n,s,r){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=n,this.position=s,this.leftoverVisibleColumns=r,this._singleCursorStateBrand=void 0,this.selection=Gs._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,s){return e?new Gs(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new ue(t,n),s):new Gs(new J(t,n,t,n),0,s,new ue(t,n),s)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?Gn.fromPositions(e.getStartPosition(),t):Gn.fromPositions(e.getEndPosition(),t)}}class ra{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}function Mm(i){return i==="'"||i==='"'||i==="`"}class $p{static columnSelect(e,t,n,s,r,o){const a=Math.abs(r-n)+1,l=n>r,c=s>o,u=s<o,d=[];for(let h=0;h<a;h++){const g=n+(l?-h:h),p=e.columnFromVisibleColumn(t,g,s),_=e.columnFromVisibleColumn(t,g,o),v=e.visibleColumnFromColumn(t,new ue(g,p)),y=e.visibleColumnFromColumn(t,new ue(g,_));u&&(v>o||y<s)||c&&(y>s||v<o)||d.push(new Gs(new J(g,p,g,p),0,0,new ue(g,_),0))}if(d.length===0)for(let h=0;h<a;h++){const g=n+(l?-h:h),p=t.getLineMaxColumn(g);d.push(new Gs(new J(g,p,g,p),0,0,new ue(g,p),0))}return{viewStates:d,reversed:l,fromLineNumber:n,fromVisualColumn:s,toLineNumber:r,toVisualColumn:o}}static columnSelectLeft(e,t,n){let s=n.toViewVisualColumn;return s>0&&s--,$p.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,s)}static columnSelectRight(e,t,n){let s=0;const r=Math.min(n.fromViewLineNumber,n.toViewLineNumber),o=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let l=r;l<=o;l++){const c=t.getLineMaxColumn(l),u=e.visibleColumnFromColumn(t,new ue(l,c));s=Math.max(s,u)}let a=n.toViewVisualColumn;return a<s&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,s){const r=s?e.pageSize:1,o=Math.max(1,n.toViewLineNumber-r);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}static columnSelectDown(e,t,n,s){const r=s?e.pageSize:1,o=Math.min(t.getLineCount(),n.toViewLineNumber+r);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,o,n.toViewVisualColumn)}}class va{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return Gn.fromPositions(s.getEndPosition())}}class kL{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return Gn.fromPositions(s.getStartPosition())}}class oN{constructor(e,t,n,s,r=!1){this._range=e,this._text=t,this._columnDeltaOffset=s,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=r}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return Gn.fromPositions(s.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class WJe{constructor(e,t,n,s=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=s,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class D6{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}class Rn{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-she(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new ue(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const s=e.getLineMinColumn(t.lineNumber),r=e.getLineContent(t.lineNumber),o=Xk.atomicPosition(r,t.column-1,n,0);if(o!==-1&&o+1>=s)return new ue(t.lineNumber,o+1)}return this.leftPosition(e,t)}static left(e,t,n){const s=e.stickyTabStops?Rn.leftPositionAtomicSoftTabs(t,n,e.tabSize):Rn.leftPosition(t,n);return new D6(s.lineNumber,s.column,0)}static moveLeft(e,t,n,s,r){let o,a;if(n.hasSelection()&&!s)o=n.selection.startLineNumber,a=n.selection.startColumn;else{const l=n.position.delta(void 0,-(r-1)),c=t.normalizePosition(Rn.clipPositionColumn(l,t),0),u=Rn.left(e,t,c);o=u.lineNumber,a=u.column}return n.move(s,o,a,0)}static clipPositionColumn(e,t){return new ue(e.lineNumber,Rn.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+FH(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new ue(t,n)}static rightPositionAtomicSoftTabs(e,t,n,s,r){if(n<e.getLineIndentColumn(t)){const o=e.getLineContent(t),a=Xk.atomicPosition(o,n-1,s,1);if(a!==-1)return new ue(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const s=e.stickyTabStops?Rn.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):Rn.rightPosition(t,n.lineNumber,n.column);return new D6(s.lineNumber,s.column,0)}static moveRight(e,t,n,s,r){let o,a;if(n.hasSelection()&&!s)o=n.selection.endLineNumber,a=n.selection.endColumn;else{const l=n.position.delta(void 0,r-1),c=t.normalizePosition(Rn.clipPositionColumn(l,t),1),u=Rn.right(e,t,c);o=u.lineNumber,a=u.column}return n.move(s,o,a,0)}static vertical(e,t,n,s,r,o,a,l){const c=ws.visibleColumnFromColumn(t.getLineContent(n),s,e.tabSize)+r,u=t.getLineCount(),d=n===1&&s===1,h=n===u&&s===t.getLineMaxColumn(n),g=o<n?d:h;if(n=o,n<1?(n=1,a?s=t.getLineMinColumn(n):s=Math.min(t.getLineMaxColumn(n),s)):n>u?(n=u,a?s=t.getLineMaxColumn(n):s=Math.min(t.getLineMaxColumn(n),s)):s=e.columnFromVisibleColumn(t,n,c),g?r=0:r=c-ws.visibleColumnFromColumn(t.getLineContent(n),s,e.tabSize),l!==void 0){const p=new ue(n,s),_=t.normalizePosition(p,l);r=r+(s-_.column),n=_.lineNumber,s=_.column}return new D6(n,s,r)}static down(e,t,n,s,r,o,a){return this.vertical(e,t,n,s,r,n+o,a,4)}static moveDown(e,t,n,s,r){let o,a;n.hasSelection()&&!s?(o=n.selection.endLineNumber,a=n.selection.endColumn):(o=n.position.lineNumber,a=n.position.column);let l=0,c;do if(c=Rn.down(e,t,o+l,a,n.leftoverVisibleColumns,r,!0),t.normalizePosition(new ue(c.lineNumber,c.column),2).lineNumber>o)break;while(l++<10&&o+l<t.getLineCount());return n.move(s,c.lineNumber,c.column,c.leftoverVisibleColumns)}static translateDown(e,t,n){const s=n.selection,r=Rn.down(e,t,s.selectionStartLineNumber,s.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),o=Rn.down(e,t,s.positionLineNumber,s.positionColumn,n.leftoverVisibleColumns,1,!1);return new Gs(new J(r.lineNumber,r.column,r.lineNumber,r.column),0,r.leftoverVisibleColumns,new ue(o.lineNumber,o.column),o.leftoverVisibleColumns)}static up(e,t,n,s,r,o,a){return this.vertical(e,t,n,s,r,n-o,a,3)}static moveUp(e,t,n,s,r){let o,a;n.hasSelection()&&!s?(o=n.selection.startLineNumber,a=n.selection.startColumn):(o=n.position.lineNumber,a=n.position.column);const l=Rn.up(e,t,o,a,n.leftoverVisibleColumns,r,!0);return n.move(s,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,n){const s=n.selection,r=Rn.up(e,t,s.selectionStartLineNumber,s.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),o=Rn.up(e,t,s.positionLineNumber,s.positionColumn,n.leftoverVisibleColumns,1,!1);return new Gs(new J(r.lineNumber,r.column,r.lineNumber,r.column),0,r.leftoverVisibleColumns,new ue(o.lineNumber,o.column),o.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,s){let r=n.position.lineNumber;for(;r>1&&this._isBlankLine(t,r);)r--;for(;r>1&&!this._isBlankLine(t,r);)r--;return n.move(s,r,t.getLineMinColumn(r),0)}static moveToNextBlankLine(e,t,n,s){const r=t.getLineCount();let o=n.position.lineNumber;for(;o<r&&this._isBlankLine(t,o);)o++;for(;o<r&&!this._isBlankLine(t,o);)o++;return n.move(s,o,t.getLineMinColumn(o),0)}static moveToBeginningOfLine(e,t,n,s){const r=n.position.lineNumber,o=t.getLineMinColumn(r),a=t.getLineFirstNonWhitespaceColumn(r)||o;let l;return n.position.column===a?l=o:l=a,n.move(s,r,l,0)}static moveToEndOfLine(e,t,n,s,r){const o=n.position.lineNumber,a=t.getLineMaxColumn(o);return n.move(s,o,a,r?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,s){return n.move(s,1,1,0)}static moveToEndOfBuffer(e,t,n,s){const r=t.getLineCount(),o=t.getLineMaxColumn(r);return n.move(s,r,o,0)}}class l1{static deleteRight(e,t,n,s){const r=[];let o=e!==3;for(let a=0,l=s.length;a<l;a++){const c=s[a];let u=c;if(u.isEmpty()){const d=c.getPosition(),h=Rn.right(t,n,d);u=new J(h.lineNumber,h.column,d.lineNumber,d.column)}if(u.isEmpty()){r[a]=null;continue}u.startLineNumber!==u.endLineNumber&&(o=!0),r[a]=new va(u,"")}return[o,r]}static isAutoClosingPairDelete(e,t,n,s,r,o,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let l=0,c=o.length;l<c;l++){const u=o[l],d=u.getPosition();if(!u.isEmpty())return!1;const h=r.getLineContent(d.lineNumber);if(d.column<2||d.column>=h.length+1)return!1;const g=h.charAt(d.column-2),p=s.get(g);if(!p)return!1;if(Mm(g)){if(n==="never")return!1}else if(t==="never")return!1;const _=h.charAt(d.column-1);let v=!1;for(const y of p)y.open===g&&y.close===_&&(v=!0);if(!v)return!1;if(e==="auto"){let y=!1;for(let w=0,x=a.length;w<x;w++){const k=a[w];if(d.lineNumber===k.startLineNumber&&d.column===k.startColumn){y=!0;break}}if(!y)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){const s=[];for(let r=0,o=n.length;r<o;r++){const a=n[r].getPosition(),l=new J(a.lineNumber,a.column-1,a.lineNumber,a.column+1);s[r]=new va(l,"")}return[!0,s]}static deleteLeft(e,t,n,s,r){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,s,r))return this._runAutoClosingPairDelete(t,n,s);const o=[];let a=e!==2;for(let l=0,c=s.length;l<c;l++){const u=l1.getDeleteRange(s[l],n,t);if(u.isEmpty()){o[l]=null;continue}u.startLineNumber!==u.endLineNumber&&(a=!0),o[l]=new va(u,"")}return[a,o]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const s=e.getPosition();if(n.useTabStops&&s.column>1){const r=t.getLineContent(s.lineNumber),o=Ca(r),a=o===-1?r.length+1:o+1;if(s.column<=a){const l=n.visibleColumnFromColumn(t,s),c=ws.prevIndentTabStop(l,n.indentSize),u=n.columnFromVisibleColumn(t,s.lineNumber,c);return new J(s.lineNumber,u,s.lineNumber,s.column)}}return J.fromPositions(l1.getPositionAfterDeleteLeft(s,t),s)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=V7e(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){const n=e.lineNumber-1;return new ue(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){const s=[];let r=null;n.sort((o,a)=>ue.compare(o.getStartPosition(),a.getEndPosition()));for(let o=0,a=n.length;o<a;o++){const l=n[o];if(l.isEmpty())if(e.emptySelectionClipboard){const c=l.getPosition();let u,d,h,g;c.lineNumber<t.getLineCount()?(u=c.lineNumber,d=1,h=c.lineNumber+1,g=1):c.lineNumber>1&&(r==null?void 0:r.endLineNumber)!==c.lineNumber?(u=c.lineNumber-1,d=t.getLineMaxColumn(c.lineNumber-1),h=c.lineNumber,g=t.getLineMaxColumn(c.lineNumber)):(u=c.lineNumber,d=1,h=c.lineNumber,g=t.getLineMaxColumn(c.lineNumber));const p=new J(u,d,h,g);r=p,p.isEmpty()?s[o]=null:s[o]=new va(p,"")}else s[o]=null;else s[o]=new va(l,"")}return new ra(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class Ui{static _createWord(e,t,n,s,r){return{start:s,end:r,wordType:t,nextCharClass:n}}static _createIntlWord(e,t){return{start:e.index,end:e.index+e.segment.length,wordType:1,nextCharClass:t}}static _findPreviousWordOnLine(e,t,n){const s=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(s,e,n)}static _doFindPreviousWordOnLine(e,t,n){let s=0;const r=t.findPrevIntlWordBeforeOrAtOffset(e,n.column-2);for(let o=n.column-2;o>=0;o--){const a=e.charCodeAt(o),l=t.get(a);if(r&&o===r.index)return this._createIntlWord(r,l);if(l===0){if(s===2)return this._createWord(e,s,l,o+1,this._findEndOfWord(e,t,s,o+1));s=1}else if(l===2){if(s===1)return this._createWord(e,s,l,o+1,this._findEndOfWord(e,t,s,o+1));s=2}else if(l===1&&s!==0)return this._createWord(e,s,l,o+1,this._findEndOfWord(e,t,s,o+1))}return s!==0?this._createWord(e,s,1,0,this._findEndOfWord(e,t,s,0)):null}static _findEndOfWord(e,t,n,s){const r=t.findNextIntlWordAtOrAfterOffset(e,s),o=e.length;for(let a=s;a<o;a++){const l=e.charCodeAt(a),c=t.get(l);if(r&&a===r.index+r.segment.length||c===1||n===1&&c===2||n===2&&c===0)return a}return o}static _findNextWordOnLine(e,t,n){const s=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(s,e,n)}static _doFindNextWordOnLine(e,t,n){let s=0;const r=e.length,o=t.findNextIntlWordAtOrAfterOffset(e,n.column-1);for(let a=n.column-1;a<r;a++){const l=e.charCodeAt(a),c=t.get(l);if(o&&a===o.index)return this._createIntlWord(o,c);if(c===0){if(s===2)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a);s=1}else if(c===2){if(s===1)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a);s=2}else if(c===1&&s!==0)return this._createWord(e,s,c,this._findStartOfWord(e,t,s,a-1),a)}return s!==0?this._createWord(e,s,1,this._findStartOfWord(e,t,s,r-1),r):null}static _findStartOfWord(e,t,n,s){const r=t.findPrevIntlWordBeforeOrAtOffset(e,s);for(let o=s;o>=0;o--){const a=e.charCodeAt(o),l=t.get(a);if(r&&o===r.index)return o;if(l===1||n===1&&l===2||n===2&&l===0)return o+1}return 0}static moveWordLeft(e,t,n,s,r){let o=n.lineNumber,a=n.column;a===1&&o>1&&(o=o-1,a=t.getLineMaxColumn(o));let l=Ui._findPreviousWordOnLine(e,t,new ue(o,a));if(s===0)return new ue(o,l?l.start+1:1);if(s===1)return!r&&l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=Ui._findPreviousWordOnLine(e,t,new ue(o,l.start+1))),new ue(o,l?l.start+1:1);if(s===3){for(;l&&l.wordType===2;)l=Ui._findPreviousWordOnLine(e,t,new ue(o,l.start+1));return new ue(o,l?l.start+1:1)}return l&&a<=l.end+1&&(l=Ui._findPreviousWordOnLine(e,t,new ue(o,l.start+1))),new ue(o,l?l.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,s=e.getLineMaxColumn(n);if(t.column===1)return n>1?new ue(n-1,e.getLineMaxColumn(n-1)):t;const r=e.getLineContent(n);for(let o=t.column-1;o>1;o--){const a=r.charCodeAt(o-2),l=r.charCodeAt(o-1);if(a===95&&l!==95)return new ue(n,o);if(a===45&&l!==45)return new ue(n,o);if((J_(a)||FE(a))&&wg(l))return new ue(n,o);if(wg(a)&&wg(l)&&o+1<s){const c=r.charCodeAt(o);if(J_(c)||FE(c))return new ue(n,o)}}return new ue(n,1)}static moveWordRight(e,t,n,s){let r=n.lineNumber,o=n.column,a=!1;o===t.getLineMaxColumn(r)&&r<t.getLineCount()&&(a=!0,r=r+1,o=1);let l=Ui._findNextWordOnLine(e,t,new ue(r,o));if(s===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=Ui._findNextWordOnLine(e,t,new ue(r,l.end+1))),l?o=l.end+1:o=t.getLineMaxColumn(r);else if(s===3){for(a&&(o=0);l&&(l.wordType===2||l.start+1<=o);)l=Ui._findNextWordOnLine(e,t,new ue(r,l.end+1));l?o=l.start+1:o=t.getLineMaxColumn(r)}else l&&!a&&o>=l.start+1&&(l=Ui._findNextWordOnLine(e,t,new ue(r,l.end+1))),l?o=l.start+1:o=t.getLineMaxColumn(r);return new ue(r,o)}static _moveWordPartRight(e,t){const n=t.lineNumber,s=e.getLineMaxColumn(n);if(t.column===s)return n<e.getLineCount()?new ue(n+1,1):t;const r=e.getLineContent(n);for(let o=t.column+1;o<s;o++){const a=r.charCodeAt(o-2),l=r.charCodeAt(o-1);if(a!==95&&l===95)return new ue(n,o);if(a!==45&&l===45)return new ue(n,o);if((J_(a)||FE(a))&&wg(l))return new ue(n,o);if(wg(a)&&wg(l)&&o+1<s){const c=r.charCodeAt(o);if(J_(c)||FE(c))return new ue(n,o)}}return new ue(n,s)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),s=t.column-2,r=k1(n,s);return r+1<s?new J(t.lineNumber,r+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,s=e.model,r=e.selection,o=e.whitespaceHeuristics;if(!r.isEmpty())return r;if(l1.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const d=e.selection.getPosition();return new J(d.lineNumber,d.column-1,d.lineNumber,d.column+1)}const a=new ue(r.positionLineNumber,r.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(o){const d=this._deleteWordLeftWhitespace(s,a);if(d)return d}let u=Ui._findPreviousWordOnLine(n,s,a);return t===0?u?c=u.start+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l)):(u&&c<=u.end+1&&(u=Ui._findPreviousWordOnLine(n,s,new ue(l,u.start+1))),u?c=u.end+1:c>1?c=1:(l--,c=s.getLineMaxColumn(l))),new J(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const s=new ue(n.positionLineNumber,n.positionColumn),r=this._deleteInsideWordWhitespace(t,s);return r||this._deleteInsideWordDetermineDeleteRange(e,t,s)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),s=n.length;if(s===0)return null;let r=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,r))return null;let o=Math.min(t.column-1,s-1);if(!this._charAtIsWhitespace(n,o))return null;for(;r>0&&this._charAtIsWhitespace(n,r-1);)r--;for(;o+1<s&&this._charAtIsWhitespace(n,o+1);)o++;return new J(t.lineNumber,r+1,t.lineNumber,o+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const s=t.getLineContent(n.lineNumber),r=s.length;if(r===0)return n.lineNumber>1?new J(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new J(n.lineNumber,1,n.lineNumber+1,1):new J(n.lineNumber,1,n.lineNumber,1);const o=d=>d.start+1<=n.column&&n.column<=d.end+1,a=(d,h)=>(d=Math.min(d,n.column),h=Math.max(h,n.column),new J(n.lineNumber,d,n.lineNumber,h)),l=d=>{let h=d.start+1,g=d.end+1,p=!1;for(;g-1<r&&this._charAtIsWhitespace(s,g-1);)p=!0,g++;if(!p)for(;h>1&&this._charAtIsWhitespace(s,h-2);)h--;return a(h,g)},c=Ui._findPreviousWordOnLine(e,t,n);if(c&&o(c))return l(c);const u=Ui._findNextWordOnLine(e,t,n);return u&&o(u)?l(u):c&&u?a(c.end+1,u.start+1):c?a(c.start+1,c.end+1):u?a(u.start+1,u.end+1):a(1,r+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),s=Ui._moveWordPartLeft(e,n);return new J(n.lineNumber,n.column,s.lineNumber,s.column)}static _findFirstNonWhitespaceChar(e,t){const n=e.length;for(let s=t;s<n;s++){const r=e.charAt(s);if(r!==" "&&r!=="	")return s}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),s=t.column-1,r=this._findFirstNonWhitespaceChar(n,s);return s+1<r?new J(t.lineNumber,t.column,t.lineNumber,r+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,s=e.model,r=e.selection,o=e.whitespaceHeuristics;if(!r.isEmpty())return r;const a=new ue(r.positionLineNumber,r.positionColumn);let l=a.lineNumber,c=a.column;const u=s.getLineCount(),d=s.getLineMaxColumn(l);if(l===u&&c===d)return null;if(o){const g=this._deleteWordRightWhitespace(s,a);if(g)return g}let h=Ui._findNextWordOnLine(n,s,a);return t===2?h?c=h.end+1:c<d||l===u?c=d:(l++,h=Ui._findNextWordOnLine(n,s,new ue(l,1)),h?c=h.start+1:c=s.getLineMaxColumn(l)):(h&&c>=h.start+1&&(h=Ui._findNextWordOnLine(n,s,new ue(l,h.end+1))),h?c=h.start+1:c<d||l===u?c=d:(l++,h=Ui._findNextWordOnLine(n,s,new ue(l,1)),h?c=h.start+1:c=s.getLineMaxColumn(l))),new J(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),s=Ui._moveWordPartRight(e,n);return new J(n.lineNumber,n.column,s.lineNumber,s.column)}static _createWordAtPosition(e,t,n){const s=new J(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(s),startColumn:s.startColumn,endColumn:s.endColumn}}static getWordAtPosition(e,t,n,s){const r=Yb(t,n),o=Ui._findPreviousWordOnLine(r,e,s);if(o&&o.wordType===1&&o.start<=s.column-1&&s.column-1<=o.end)return Ui._createWordAtPosition(e,s.lineNumber,o);const a=Ui._findNextWordOnLine(r,e,s);return a&&a.wordType===1&&a.start<=s.column-1&&s.column-1<=a.end?Ui._createWordAtPosition(e,s.lineNumber,a):null}static word(e,t,n,s,r){const o=Yb(e.wordSeparators,e.wordSegmenterLocales),a=Ui._findPreviousWordOnLine(o,t,r),l=Ui._findNextWordOnLine(o,t,r);if(!s){let g,p;return a&&a.wordType===1&&a.start<=r.column-1&&r.column-1<=a.end?(g=a.start+1,p=a.end+1):l&&l.wordType===1&&l.start<=r.column-1&&r.column-1<=l.end?(g=l.start+1,p=l.end+1):(a?g=a.end+1:g=1,l?p=l.start+1:p=t.getLineMaxColumn(r.lineNumber)),new Gs(new J(r.lineNumber,g,r.lineNumber,p),1,0,new ue(r.lineNumber,p),0)}let c,u;a&&a.wordType===1&&a.start<r.column-1&&r.column-1<a.end?(c=a.start+1,u=a.end+1):l&&l.wordType===1&&l.start<r.column-1&&r.column-1<l.end?(c=l.start+1,u=l.end+1):(c=r.column,u=r.column);const d=r.lineNumber;let h;if(n.selectionStart.containsPosition(r))h=n.selectionStart.endColumn;else if(r.isBeforeOrEqual(n.selectionStart.getStartPosition())){h=c;const g=new ue(d,h);n.selectionStart.containsPosition(g)&&(h=n.selectionStart.endColumn)}else{h=u;const g=new ue(d,h);n.selectionStart.containsPosition(g)&&(h=n.selectionStart.startColumn)}return n.move(!0,d,h,0)}}class qr{static addCursorDown(e,t,n){const s=[];let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];s[r++]=new Yt(l.modelState,l.viewState),n?s[r++]=Yt.fromModelState(Rn.translateDown(e.cursorConfig,e.model,l.modelState)):s[r++]=Yt.fromViewState(Rn.translateDown(e.cursorConfig,e,l.viewState))}return s}static addCursorUp(e,t,n){const s=[];let r=0;for(let o=0,a=t.length;o<a;o++){const l=t[o];s[r++]=new Yt(l.modelState,l.viewState),n?s[r++]=Yt.fromModelState(Rn.translateUp(e.cursorConfig,e.model,l.modelState)):s[r++]=Yt.fromViewState(Rn.translateUp(e.cursorConfig,e,l.viewState))}return s}static moveToBeginningOfLine(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=this._moveToLineStart(e,a,n)}return s}static _moveToLineStart(e,t,n){const s=t.viewState.position.column,r=t.modelState.position.column,o=s===r,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!o&&!(s===l)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return Yt.fromViewState(Rn.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return Yt.fromModelState(Rn.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,s){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=this._moveToLineEnd(e,l,n,s)}return r}static _moveToLineEnd(e,t,n,s){const r=t.viewState.position,o=e.getLineMaxColumn(r.lineNumber),a=r.column===o,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),u=o-r.column===c-l.column;return a||u?this._moveToLineEndByModel(e,t,n,s):this._moveToLineEndByView(e,t,n,s)}static _moveToLineEndByView(e,t,n,s){return Yt.fromViewState(Rn.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,s))}static _moveToLineEndByModel(e,t,n,s){return Yt.fromModelState(Rn.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,s))}static expandLineSelection(e,t){const n=[];for(let s=0,r=t.length;s<r;s++){const o=t[s],a=o.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=o.modelState.selection.endLineNumber,u;c===l?u=e.model.getLineMaxColumn(l):(c++,u=1),n[s]=Yt.fromModelState(new Gs(new J(a,1,a,1),0,0,new ue(c,u),0))}return n}static moveToBeginningOfBuffer(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=Yt.fromModelState(Rn.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return s}static moveToEndOfBuffer(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r];s[r]=Yt.fromModelState(Rn.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return s}static selectAll(e,t){const n=e.model.getLineCount(),s=e.model.getLineMaxColumn(n);return Yt.fromModelState(new Gs(new J(1,1,1,1),0,0,new ue(n,s),0))}static line(e,t,n,s,r){const o=e.model.validatePosition(s),a=r?e.coordinatesConverter.validateViewPosition(new ue(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);if(!n){const c=e.model.getLineCount();let u=o.lineNumber+1,d=1;return u>c&&(u=c,d=e.model.getLineMaxColumn(u)),Yt.fromModelState(new Gs(new J(o.lineNumber,1,u,d),2,0,new ue(u,d),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(o.lineNumber<l)return Yt.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(o.lineNumber>l){const c=e.getLineCount();let u=a.lineNumber+1,d=1;return u>c&&(u=c,d=e.getLineMaxColumn(u)),Yt.fromViewState(t.viewState.move(!0,u,d,0))}else{const c=t.modelState.selectionStart.getEndPosition();return Yt.fromModelState(t.modelState.move(!0,c.lineNumber,c.column,0))}}static word(e,t,n,s){const r=e.model.validatePosition(s);return Yt.fromModelState(Ui.word(e.cursorConfig,e.model,t.modelState,n,r))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new Yt(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,s=t.viewState.position.column;return Yt.fromViewState(new Gs(new J(n,s,n,s),0,0,new ue(n,s),0))}static moveTo(e,t,n,s,r){if(n){if(t.modelState.selectionStartKind===1)return this.word(e,t,n,s);if(t.modelState.selectionStartKind===2)return this.line(e,t,n,s,r)}const o=e.model.validatePosition(s),a=r?e.coordinatesConverter.validateViewPosition(new ue(r.lineNumber,r.column),o):e.coordinatesConverter.convertModelPositionToViewPosition(o);return Yt.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,s,r,o){switch(n){case 0:return o===4?this._moveHalfLineLeft(e,t,s):this._moveLeft(e,t,s,r);case 1:return o===4?this._moveHalfLineRight(e,t,s):this._moveRight(e,t,s,r);case 2:return o===2?this._moveUpByViewLines(e,t,s,r):this._moveUpByModelLines(e,t,s,r);case 3:return o===2?this._moveDownByViewLines(e,t,s,r):this._moveDownByModelLines(e,t,s,r);case 4:return o===2?t.map(a=>Yt.fromViewState(Rn.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>Yt.fromModelState(Rn.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 5:return o===2?t.map(a=>Yt.fromViewState(Rn.moveToNextBlankLine(e.cursorConfig,e,a.viewState,s))):t.map(a=>Yt.fromModelState(Rn.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,s)));case 6:return this._moveToViewMinColumn(e,t,s);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,s);case 8:return this._moveToViewCenterColumn(e,t,s);case 9:return this._moveToViewMaxColumn(e,t,s);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,s);default:return null}}static viewportMove(e,t,n,s,r){const o=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(o);switch(n){case 11:{const l=this._firstLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,r),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],s,l,c)]}case 14:{const l=[];for(let c=0,u=t.length;c<u;c++){const d=t[c];l[c]=this.findPositionInViewportIfOutside(e,d,o,s)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,n,s){const r=t.viewState.position.lineNumber;if(n.startLineNumber<=r&&r<=n.endLineNumber-1)return new Yt(t.modelState,t.viewState);{let o;r>n.endLineNumber-1?o=n.endLineNumber-1:r<n.startLineNumber?o=n.startLineNumber:o=r;const a=Rn.vertical(e.cursorConfig,e,r,t.viewState.position.column,t.viewState.leftoverVisibleColumns,o,!1);return Yt.fromViewState(t.viewState.move(s,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.min(t.endLineNumber,s+n-1)}static _lastLineNumberInRange(e,t,n){let s=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(s)&&s++,Math.max(s,t.endLineNumber-n+1)}static _moveLeft(e,t,n,s){return t.map(r=>Yt.fromViewState(Rn.moveLeft(e.cursorConfig,e,r.viewState,n,s)))}static _moveHalfLineLeft(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);s[r]=Yt.fromViewState(Rn.moveLeft(e.cursorConfig,e,a.viewState,n,c))}return s}static _moveRight(e,t,n,s){return t.map(r=>Yt.fromViewState(Rn.moveRight(e.cursorConfig,e,r.viewState,n,s)))}static _moveHalfLineRight(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);s[r]=Yt.fromViewState(Rn.moveRight(e.cursorConfig,e,a.viewState,n,c))}return s}static _moveDownByViewLines(e,t,n,s){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Yt.fromViewState(Rn.moveDown(e.cursorConfig,e,l.viewState,n,s))}return r}static _moveDownByModelLines(e,t,n,s){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Yt.fromModelState(Rn.moveDown(e.cursorConfig,e.model,l.modelState,n,s))}return r}static _moveUpByViewLines(e,t,n,s){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Yt.fromViewState(Rn.moveUp(e.cursorConfig,e,l.viewState,n,s))}return r}static _moveUpByModelLines(e,t,n,s){const r=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];r[o]=Yt.fromModelState(Rn.moveUp(e.cursorConfig,e.model,l.modelState,n,s))}return r}static _moveToViewPosition(e,t,n,s,r){return Yt.fromViewState(t.viewState.move(n,s,r,0))}static _moveToModelPosition(e,t,n,s,r){return Yt.fromModelState(t.modelState.move(n,s,r,0))}static _moveToViewMinColumn(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);s[r]=this._moveToViewPosition(e,a,n,l,c)}return s}static _moveToViewFirstNonWhitespaceColumn(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);s[r]=this._moveToViewPosition(e,a,n,l,c)}return s}static _moveToViewCenterColumn(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);s[r]=this._moveToViewPosition(e,a,n,l,c)}return s}static _moveToViewMaxColumn(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);s[r]=this._moveToViewPosition(e,a,n,l,c)}return s}static _moveToViewLastNonWhitespaceColumn(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);s[r]=this._moveToViewPosition(e,a,n,l,c)}return s}}var aN;(function(i){const e=function(n){if(!Xo(n))return!1;const s=n;return!(!nl(s.to)||!Dl(s.select)&&!Ede(s.select)||!Dl(s.by)&&!nl(s.by)||!Dl(s.value)&&!Fy(s.value))};i.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},i.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(n){if(!n.to)return null;let s;switch(n.to){case i.RawDirection.Left:s=0;break;case i.RawDirection.Right:s=1;break;case i.RawDirection.Up:s=2;break;case i.RawDirection.Down:s=3;break;case i.RawDirection.PrevBlankLine:s=4;break;case i.RawDirection.NextBlankLine:s=5;break;case i.RawDirection.WrappedLineStart:s=6;break;case i.RawDirection.WrappedLineFirstNonWhitespaceCharacter:s=7;break;case i.RawDirection.WrappedLineColumnCenter:s=8;break;case i.RawDirection.WrappedLineEnd:s=9;break;case i.RawDirection.WrappedLineLastNonWhitespaceCharacter:s=10;break;case i.RawDirection.ViewPortTop:s=11;break;case i.RawDirection.ViewPortBottom:s=13;break;case i.RawDirection.ViewPortCenter:s=12;break;case i.RawDirection.ViewPortIfOutside:s=14;break;default:return null}let r=0;switch(n.by){case i.RawUnit.Line:r=1;break;case i.RawUnit.WrappedLine:r=2;break;case i.RawUnit.Character:r=3;break;case i.RawUnit.HalfLine:r=4;break}return{direction:s,unit:r,select:!!n.select,value:n.value||1}}i.parse=t})(aN||(aN={}));class HJe{constructor(e,t,n){this._indentRulesSupport=t,this._indentationLineProcessor=new ape(e,n)}shouldIncrease(e,t){const n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIncrease(n)}shouldDecrease(e,t){const n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldDecrease(n)}shouldIgnore(e,t){const n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIgnore(n)}shouldIndentNextLine(e,t){const n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIndentNextLine(n)}}class Lz{constructor(e,t){this.model=e,this.indentationLineProcessor=new ape(e,t)}getProcessedTokenContextAroundRange(e){const t=this._getProcessedTokensBeforeRange(e),n=this._getProcessedTokensAfterRange(e),s=this._getProcessedPreviousLineTokens(e);return{beforeRangeProcessedTokens:t,afterRangeProcessedTokens:n,previousLineProcessedTokens:s}}_getProcessedTokensBeforeRange(e){this.model.tokenization.forceTokenization(e.startLineNumber);const t=this.model.tokenization.getLineTokens(e.startLineNumber),n=r0(t,e.startColumn-1);let s;if(Iz(this.model,e.getStartPosition())){const o=e.startColumn-1-n.firstCharOffset,a=n.firstCharOffset,l=a+o;s=t.sliceAndInflate(a,l,0)}else{const o=e.startColumn-1;s=t.sliceAndInflate(0,o,0)}return this.indentationLineProcessor.getProcessedTokens(s)}_getProcessedTokensAfterRange(e){const t=e.isEmpty()?e.getStartPosition():e.getEndPosition();this.model.tokenization.forceTokenization(t.lineNumber);const n=this.model.tokenization.getLineTokens(t.lineNumber),s=r0(n,t.column-1),r=t.column-1-s.firstCharOffset,o=s.firstCharOffset+r,a=s.firstCharOffset+s.getLineLength(),l=n.sliceAndInflate(o,a,0);return this.indentationLineProcessor.getProcessedTokens(l)}_getProcessedPreviousLineTokens(e){const t=g=>{this.model.tokenization.forceTokenization(g);const p=this.model.tokenization.getLineTokens(g),_=this.model.getLineMaxColumn(g)-1;return r0(p,_)};this.model.tokenization.forceTokenization(e.startLineNumber);const n=this.model.tokenization.getLineTokens(e.startLineNumber),s=r0(n,e.startColumn-1),r=tr.createEmpty("",s.languageIdCodec),o=e.startLineNumber-1;if(o===0||!(s.firstCharOffset===0))return r;const c=t(o);if(!(s.languageId===c.languageId))return r;const d=c.toIViewLineTokens();return this.indentationLineProcessor.getProcessedTokens(d)}}class ape{constructor(e,t){this.model=e,this.languageConfigurationService=t}getProcessedLine(e,t){var o,a;const n=(l,c)=>{const u=po(l);return c+l.substring(u.length)};(a=(o=this.model.tokenization).forceTokenization)==null||a.call(o,e);const s=this.model.tokenization.getLineTokens(e);let r=this.getProcessedTokens(s).getLineContent();return t!==void 0&&(r=n(r,t)),r}getProcessedTokens(e){const t=l=>l===2||l===3||l===1,n=e.getLanguageId(0),r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew.getBracketRegExp({global:!0}),o=[];return e.forEach(l=>{const c=e.getStandardTokenType(l);let u=e.getTokenText(l);t(c)&&(u=u.replace(r,""));const d=e.getMetadata(l);o.push({text:u,metadata:d})}),tr.createFromTextAndMetadata(o,e.languageIdCodec)}}function Iz(i,e){i.tokenization.forceTokenization(e.lineNumber);const t=i.tokenization.getLineTokens(e.lineNumber),n=r0(t,e.column-1),s=n.firstCharOffset===0,r=t.getLanguageId(0)===n.languageId;return!s&&!r}function Dz(i,e,t,n){e.tokenization.forceTokenization(t.startLineNumber);const s=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),r=n.getLanguageConfiguration(s);if(!r)return null;const a=new Lz(e,n).getProcessedTokenContextAroundRange(t),l=a.previousLineProcessedTokens.getLineContent(),c=a.beforeRangeProcessedTokens.getLineContent(),u=a.afterRangeProcessedTokens.getLineContent(),d=r.onEnter(i,l,c,u);if(!d)return null;const h=d.indentAction;let g=d.appendText;const p=d.removeText||0;g?h===wo.Indent&&(g="	"+g):h===wo.Indent||h===wo.IndentOutdent?g="	":g="";let _=tfe(e,t.startLineNumber,t.startColumn);return p&&(_=_.substring(0,_.length-p)),{indentAction:h,appendText:g,removeText:p,indentation:_}}var UJe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},zJe=function(i,e){return function(t,n){e(t,n,i)}},xL;const N6=Object.create(null);function vp(i,e){if(e<=0)return"";N6[i]||(N6[i]=["",i]);const t=N6[i];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+i;return t[e]}let c1=xL=class{static unshiftIndent(e,t,n,s,r){const o=ws.visibleColumnFromColumn(e,t,n);if(r){const a=vp(" ",s),c=ws.prevIndentTabStop(o,s)/s;return vp(a,c)}else{const a="	",c=ws.prevRenderTabStop(o,n)/n;return vp(a,c)}}static shiftIndent(e,t,n,s,r){const o=ws.visibleColumnFromColumn(e,t,n);if(r){const a=vp(" ",s),c=ws.nextIndentTabStop(o,s)/s;return vp(a,c)}else{const a="	",c=ws.nextRenderTabStop(o,n)/n;return vp(a,c)}}constructor(e,t,n){this._languageConfigurationService=n,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){const n=this._selection.startLineNumber;let s=this._selection.endLineNumber;this._selection.endColumn===1&&n!==s&&(s=s-1);const{tabSize:r,indentSize:o,insertSpaces:a}=this._opts,l=n===s;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,u=0;for(let d=n;d<=s;d++,c=u){u=0;const h=e.getLineContent(d);let g=Ca(h);if(this._opts.isUnshift&&(h.length===0||g===0)||!l&&!this._opts.isUnshift&&h.length===0)continue;if(g===-1&&(g=h.length),d>1&&ws.visibleColumnFromColumn(h,g+1,r)%o!==0&&e.tokenization.isCheapToTokenize(d-1)){const v=Dz(this._opts.autoIndent,e,new J(d-1,e.getLineMaxColumn(d-1),d-1,e.getLineMaxColumn(d-1)),this._languageConfigurationService);if(v){if(u=c,v.appendText)for(let y=0,w=v.appendText.length;y<w&&u<o&&v.appendText.charCodeAt(y)===32;y++)u++;v.removeText&&(u=Math.max(0,u-v.removeText));for(let y=0;y<u&&!(g===0||h.charCodeAt(g-1)!==32);y++)g--}}if(this._opts.isUnshift&&g===0)continue;let p;this._opts.isUnshift?p=xL.unshiftIndent(h,g+1,r,o,a):p=xL.shiftIndent(h,g+1,r,o,a),this._addEditOperation(t,new J(d,1,d,g+1),p),d===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=g+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?vp(" ",o):"	";for(let u=n;u<=s;u++){const d=e.getLineContent(u);let h=Ca(d);if(!(this._opts.isUnshift&&(d.length===0||h===0))&&!(!l&&!this._opts.isUnshift&&d.length===0)&&(h===-1&&(h=d.length),!(this._opts.isUnshift&&h===0)))if(this._opts.isUnshift){h=Math.min(h,o);for(let g=0;g<h;g++)if(d.charCodeAt(g)===9){h=g+1;break}this._addEditOperation(t,new J(u,1,u,h+1),"")}else this._addEditOperation(t,new J(u,1,u,1),c),u===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const s=t.getInverseEditOperations()[0];return new Gn(s.range.endLineNumber,s.range.endColumn,s.range.endLineNumber,s.range.endColumn)}const n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const s=this._selection.startColumn;return n.startColumn<=s?n:n.getDirection()===0?new Gn(n.startLineNumber,s,n.endLineNumber,n.endColumn):new Gn(n.endLineNumber,n.endColumn,n.startLineNumber,s)}return n}};c1=xL=UJe([zJe(2,Ud)],c1);class jJe{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new J(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new J(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const n=t.getInverseEditOperations(),s=n[0].range,r=n[1].range;return new Gn(s.endLineNumber,s.endColumn,r.endLineNumber,r.endColumn-this._charAfterSelection.length)}}class $Je{constructor(e,t,n){this._position=e,this._text=t,this._charAfter=n}getEditOperations(e,t){t.addTrackedEditOperation(new J(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return new Gn(s.endLineNumber,s.startColumn,s.endLineNumber,s.endColumn-this._charAfter.length)}}function qJe(i,e,t){const n=i.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let s,r=-1;for(s=e-1;s>=1;s--){if(i.tokenization.getLanguageIdAtPosition(s,0)!==n)return r;const o=i.getLineContent(s);if(t.shouldIgnore(s)||/^\s+$/.test(o)||o===""){r=s;continue}return s}}return-1}function lN(i,e,t,n=!0,s){if(i<4)return null;const r=s.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!r)return null;const o=new HJe(e,r,s);if(t<=1)return{indentation:"",action:null};for(let l=t-1;l>0&&e.getLineContent(l)==="";l--)if(l===1)return{indentation:"",action:null};const a=qJe(e,t,o);if(a<0)return null;if(a<1)return{indentation:"",action:null};if(o.shouldIncrease(a)||o.shouldIndentNextLine(a)){const l=e.getLineContent(a);return{indentation:po(l),action:wo.Indent,line:a}}else if(o.shouldDecrease(a)){const l=e.getLineContent(a);return{indentation:po(l),action:null,line:a}}else{if(a===1)return{indentation:po(e.getLineContent(a)),action:null,line:a};const l=a-1,c=r.getIndentMetadata(e.getLineContent(l));if(!(c&3)&&c&4){let u=0;for(let d=l-1;d>0;d--)if(!o.shouldIndentNextLine(d)){u=d;break}return{indentation:po(e.getLineContent(u+1)),action:null,line:u+1}}if(n)return{indentation:po(e.getLineContent(a)),action:null,line:a};for(let u=a;u>0;u--){if(o.shouldIncrease(u))return{indentation:po(e.getLineContent(u)),action:wo.Indent,line:u};if(o.shouldIndentNextLine(u)){let d=0;for(let h=u-1;h>0;h--)if(!o.shouldIndentNextLine(u)){d=h;break}return{indentation:po(e.getLineContent(d+1)),action:null,line:d+1}}else if(o.shouldDecrease(u))return{indentation:po(e.getLineContent(u)),action:null,line:u}}return{indentation:po(e.getLineContent(1)),action:null,line:1}}}function KJe(i,e,t,n,s){if(i<4)return null;const r=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),o=s.getLanguageConfiguration(r).indentRulesSupport;if(!o)return null;e.tokenization.forceTokenization(t.startLineNumber);const l=new Lz(e,s).getProcessedTokenContextAroundRange(t),c=l.afterRangeProcessedTokens,u=l.beforeRangeProcessedTokens,d=po(u.getLineContent()),h=YJe(e,t.startLineNumber,u),g=Iz(e,t.getStartPosition()),p=e.getLineContent(t.startLineNumber),_=po(p),v=lN(i,h,t.startLineNumber+1,void 0,s);if(!v){const w=g?_:d;return{beforeEnter:w,afterEnter:w}}let y=g?_:v.indentation;return v.action===wo.Indent&&(y=n.shiftIndent(y)),o.shouldDecrease(c.getLineContent())&&(y=n.unshiftIndent(y)),{beforeEnter:g?_:d,afterEnter:y}}function GJe(i,e,t,n,s,r){const o=i.autoIndent;if(o<4||Iz(e,t.getStartPosition()))return null;const l=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),c=r.getLanguageConfiguration(l).indentRulesSupport;if(!c)return null;const d=new Lz(e,r).getProcessedTokenContextAroundRange(t),h=d.beforeRangeProcessedTokens.getLineContent(),g=d.afterRangeProcessedTokens.getLineContent(),p=h+g,_=h+n+g;if(!c.shouldDecrease(p)&&c.shouldDecrease(_)){const y=lN(o,e,t.startLineNumber,!1,r);if(!y)return null;let w=y.indentation;return y.action!==wo.Indent&&(w=s.unshiftIndent(w)),w}const v=t.startLineNumber-1;if(v>0){const y=e.getLineContent(v);if(c.shouldIndentNextLine(y)&&c.shouldIncrease(_)){const w=lN(o,e,t.startLineNumber,!1,r),x=w==null?void 0:w.indentation;if(x!==void 0){const k=e.getLineContent(t.startLineNumber),T=po(k),L=s.shiftIndent(x)===T,I=/^\s*$/.test(p),A=i.autoClosingPairs.autoClosingPairsOpenByEnd.get(n),V=A&&A.length>0&&I;if(L&&V)return x}}}return null}function YJe(i,e,t){return{tokenization:{getLineTokens:s=>s===e?t:i.tokenization.getLineTokens(s),getLanguageId:()=>i.getLanguageId(),getLanguageIdAtPosition:(s,r)=>i.getLanguageIdAtPosition(s,r)},getLineContent:s=>s===e?t.getLineContent():i.getLineContent(s)}}class QJe{static getEdits(e,t,n,s,r){if(!r&&this._isAutoIndentType(e,t,n)){const o=[];for(const l of n){const c=this._findActualIndentationForSelection(e,t,l,s);if(c===null)return;o.push({selection:l,indentation:c})}const a=BF.getAutoClosingPairClose(e,t,n,s,!1);return this._getIndentationAndAutoClosingPairEdits(e,t,o,s,a)}}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let s=0,r=n.length;s<r;s++)if(!t.tokenization.isCheapToTokenize(n[s].getEndPosition().lineNumber))return!1;return!0}static _findActualIndentationForSelection(e,t,n,s){const r=GJe(e,t,n,s,{shiftIndent:a=>Az(e,a),unshiftIndent:a=>cN(e,a)},e.languageConfigurationService);if(r===null)return null;const o=tfe(t,n.startLineNumber,n.startColumn);return r===e.normalizeIndentation(o)?null:r}static _getIndentationAndAutoClosingPairEdits(e,t,n,s,r){const o=n.map(({selection:l,indentation:c})=>{if(r!==null){const u=this._getEditFromIndentationAndSelection(e,t,c,l,s,!1);return new aet(u,l,s,r)}else{const u=this._getEditFromIndentationAndSelection(e,t,c,l,s,!0);return Lp(u.range,u.text,!1)}}),a={shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1};return new ra(4,o,a)}static _getEditFromIndentationAndSelection(e,t,n,s,r,o=!0){const a=s.startLineNumber,l=t.getLineFirstNonWhitespaceColumn(a);let c=e.normalizeIndentation(n);if(l!==0){const d=t.getLineContent(a);c+=d.substring(l-1,s.startColumn-1)}return c+=o?r:"",{range:new J(a,1,s.endLineNumber,s.endColumn),text:c}}}class XJe{static getEdits(e,t,n,s,r,o){if(cpe(t,n,s,r,o))return this._runAutoClosingOvertype(e,s,o)}static _runAutoClosingOvertype(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const l=t[r].getPosition(),c=new J(l.lineNumber,l.column,l.lineNumber,l.column+1);s[r]=new va(c,n)}return new ra(4,s,{shouldPushStackElementBefore:BA(e,4),shouldPushStackElementAfter:!1})}}class ZJe{static getEdits(e,t,n,s,r){if(cpe(e,t,n,s,r)){const o=n.map(a=>new va(new J(a.positionLineNumber,a.positionColumn,a.positionLineNumber,a.positionColumn+1),"",!1));return new ra(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}}class BF{static getEdits(e,t,n,s,r,o){if(!o){const a=this.getAutoClosingPairClose(e,t,n,s,r);if(a!==null)return this._runAutoClosingOpenCharType(n,s,r,a)}}static _runAutoClosingOpenCharType(e,t,n,s){const r=[];for(let o=0,a=e.length;o<a;o++){const l=e[o];r[o]=new oet(l,t,!n,s)}return new ra(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static getAutoClosingPairClose(e,t,n,s,r){for(const p of n)if(!p.isEmpty())return null;const o=n.map(p=>{const _=p.getPosition();return r?{lineNumber:_.lineNumber,beforeColumn:_.column-s.length,afterColumn:_.column}:{lineNumber:_.lineNumber,beforeColumn:_.column,afterColumn:_.column}}),a=this._findAutoClosingPairOpen(e,t,o.map(p=>new ue(p.lineNumber,p.beforeColumn)),s);if(!a)return null;let l,c;if(Mm(s)?(l=e.autoClosingQuotes,c=e.shouldAutoCloseBefore.quote):(e.blockCommentStartToken?a.open.includes(e.blockCommentStartToken):!1)?(l=e.autoClosingComments,c=e.shouldAutoCloseBefore.comment):(l=e.autoClosingBrackets,c=e.shouldAutoCloseBefore.bracket),l==="never")return null;const d=this._findContainedAutoClosingPair(e,a),h=d?d.close:"";let g=!0;for(const p of o){const{lineNumber:_,beforeColumn:v,afterColumn:y}=p,w=t.getLineContent(_),x=w.substring(0,v-1),k=w.substring(y-1);if(k.startsWith(h)||(g=!1),k.length>0){const I=k.charAt(0);if(!this._isBeforeClosingBrace(e,k)&&!c(I))return null}if(a.open.length===1&&(s==="'"||s==='"')&&l!=="always"){const I=Yb(e.wordSeparators,[]);if(x.length>0){const A=x.charCodeAt(x.length-1);if(I.get(A)===0)return null}}if(!t.tokenization.isCheapToTokenize(_))return null;t.tokenization.forceTokenization(_);const T=t.tokenization.getLineTokens(_),R=r0(T,v-1);if(!a.shouldAutoClose(R,v-R.firstCharOffset))return null;const L=a.findNeutralCharacter();if(L){const I=t.tokenization.getTokenTypeIfInsertingCharacter(_,v,L);if(!a.isOK(I))return null}}return g?a.close.substring(0,a.close.length-h.length):a.close}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const n=t.close.charAt(t.close.length-1),s=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let r=null;for(const o of s)o.open!==t.open&&t.open.includes(o.open)&&t.close.endsWith(o.close)&&(!r||o.open.length>r.open.length)&&(r=o);return r}static _findAutoClosingPairOpen(e,t,n,s){const r=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(s);if(!r)return null;let o=null;for(const a of r)if(o===null||a.open.length>o.open.length){let l=!0;for(const c of n)if(t.getValueInRange(new J(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+s!==a.open){l=!1;break}l&&(o=a)}return o}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),s=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],r=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],o=s.some(l=>t.startsWith(l.open)),a=r.some(l=>t.startsWith(l.close));return!o&&a}}class JJe{static getEdits(e,t,n,s,r){if(!r&&this._isSurroundSelectionType(e,t,n,s))return this._runSurroundSelectionType(e,n,s)}static _runSurroundSelectionType(e,t,n){const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=e.surroundingPairs[n];s[r]=new jJe(a,n,l)}return new ra(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isSurroundSelectionType(e,t,n,s){if(!upe(e,s)||!e.surroundingPairs.hasOwnProperty(s))return!1;const r=Mm(s);for(const o of n){if(o.isEmpty())return!1;let a=!0;for(let l=o.startLineNumber;l<=o.endLineNumber;l++){const c=t.getLineContent(l),u=l===o.startLineNumber?o.startColumn-1:0,d=l===o.endLineNumber?o.endColumn-1:c.length,h=c.substring(u,d);if(/[^ \t]/.test(h)){a=!1;break}}if(a)return!1;if(r&&o.startLineNumber===o.endLineNumber&&o.startColumn+1===o.endColumn){const l=t.getValueInRange(o);if(Mm(l))return!1}}return!0}}class eet{static getEdits(e,t,n,s,r,o){if(!o&&this._isTypeInterceptorElectricChar(t,n,s)){const a=this._typeInterceptorElectricChar(e,t,n,s[0],r);if(a)return a}}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.tokenization.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,s,r){if(!t.electricChars.hasOwnProperty(r)||!s.isEmpty())return null;const o=s.getPosition();n.tokenization.forceTokenization(o.lineNumber);const a=n.tokenization.getLineTokens(o.lineNumber);let l;try{l=t.onElectricCharacter(r,a,o.column)}catch(c){return Un(c),null}if(!l)return null;if(l.matchOpenBracket){const c=(a.getLineContent()+r).lastIndexOf(l.matchOpenBracket)+1,u=n.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:o.lineNumber,column:c},500);if(u){if(u.startLineNumber===o.lineNumber)return null;const d=n.getLineContent(u.startLineNumber),h=po(d),g=t.normalizeIndentation(h),p=n.getLineContent(o.lineNumber),_=n.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,v=p.substring(_-1,o.column-1),y=g+v+r,w=new J(o.lineNumber,1,o.lineNumber,o.column),x=new va(w,y);return new ra(Rz(y,e),[x],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}}class tet{static getEdits(e,t,n){const s=[];for(let o=0,a=t.length;o<a;o++)s[o]=new va(t[o],n);const r=Rz(n,e);return new ra(r,s,{shouldPushStackElementBefore:BA(e,r),shouldPushStackElementAfter:!1})}}class lpe{static getEdits(e,t,n,s,r){if(!r&&s===`
`){const o=[];for(let a=0,l=n.length;a<l;a++)o[a]=this._enter(e,t,!1,n[a]);return new ra(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}static _enter(e,t,n,s){if(e.autoIndent===0)return Lp(s,`
`,n);if(!t.tokenization.isCheapToTokenize(s.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(s.startLineNumber),c=po(l).substring(0,s.startColumn-1);return Lp(s,`
`+e.normalizeIndentation(c),n)}const r=Dz(e.autoIndent,t,s,e.languageConfigurationService);if(r){if(r.indentAction===wo.None)return Lp(s,`
`+e.normalizeIndentation(r.indentation+r.appendText),n);if(r.indentAction===wo.Indent)return Lp(s,`
`+e.normalizeIndentation(r.indentation+r.appendText),n);if(r.indentAction===wo.IndentOutdent){const l=e.normalizeIndentation(r.indentation),c=e.normalizeIndentation(r.indentation+r.appendText),u=`
`+c+`
`+l;return n?new kL(s,u,!0):new oN(s,u,-1,c.length-l.length,!0)}else if(r.indentAction===wo.Outdent){const l=cN(e,r.indentation);return Lp(s,`
`+e.normalizeIndentation(l+r.appendText),n)}}const o=t.getLineContent(s.startLineNumber),a=po(o).substring(0,s.startColumn-1);if(e.autoIndent>=4){const l=KJe(e.autoIndent,t,s,{unshiftIndent:c=>cN(e,c),shiftIndent:c=>Az(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,s.getEndPosition());const u=s.endColumn,d=t.getLineContent(s.endLineNumber),h=Ca(d);if(h>=0?s=s.setEndPosition(s.endLineNumber,Math.max(s.endColumn,h+1)):s=s.setEndPosition(s.endLineNumber,t.getLineMaxColumn(s.endLineNumber)),n)return new kL(s,`
`+e.normalizeIndentation(l.afterEnter),!0);{let g=0;return u<=h+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),g=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new oN(s,`
`+e.normalizeIndentation(l.afterEnter),0,g,!0)}}}return Lp(s,`
`+e.normalizeIndentation(a),n)}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];const s=[];for(let r=0,o=n.length;r<o;r++){let a=n[r].positionLineNumber;if(a===1)s[r]=new kL(new J(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);s[r]=this._enter(e,t,!1,new J(a,l,a,l))}}return s}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];const s=[];for(let r=0,o=n.length;r<o;r++){const a=n[r].positionLineNumber,l=t.getLineMaxColumn(a);s[r]=this._enter(e,t,!1,new J(a,l,a,l))}return s}static lineBreakInsert(e,t,n){const s=[];for(let r=0,o=n.length;r<o;r++)s[r]=this._enter(e,t,!0,n[r]);return s}}class net{static getEdits(e,t,n,s,r,o){const a=this._distributePasteToCursors(e,n,s,r,o);return a?(n=n.sort(J.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,s,r)}static _distributePasteToCursors(e,t,n,s,r){if(s||t.length===1)return null;if(r&&r.length===t.length)return r;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substring(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substring(0,n.length-1));const o=Hy(n);if(o.length===t.length)return o}return null}static _distributedPaste(e,t,n,s){const r=[];for(let o=0,a=n.length;o<a;o++)r[o]=new va(n[o],s[o]);return new ra(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,s,r){const o=[];for(let a=0,l=n.length;a<l;a++){const c=n[a],u=c.getPosition();if(r&&!c.isEmpty()&&(r=!1),r&&s.indexOf(`
`)!==s.length-1&&(r=!1),r){const d=new J(u.lineNumber,1,u.lineNumber,1);o[a]=new WJe(d,s,c,!0)}else o[a]=new va(c,s)}return new ra(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class iet{static getEdits(e,t,n,s,r,o,a,l){const c=s.map(u=>this._compositionType(n,u,r,o,a,l));return new ra(4,c,{shouldPushStackElementBefore:BA(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,s,r,o){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-s),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+r),u=new J(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(u)===n&&o===0?null:new oN(u,n,0,o)}}class set{static getEdits(e,t,n){const s=[];for(let o=0,a=t.length;o<a;o++)s[o]=new va(t[o],n);const r=Rz(n,e);return new ra(r,s,{shouldPushStackElementBefore:BA(e,r),shouldPushStackElementAfter:!1})}}class ret{static getCommands(e,t,n){const s=[];for(let r=0,o=n.length;r<o;r++){const a=n[r];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";const u=e.normalizeIndentation(c);if(!l.startsWith(u)){s[r]=new va(new J(a.startLineNumber,1,a.startLineNumber,l.length+1),u,!0);continue}}s[r]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){s[r]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}s[r]=new c1(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return s}static _goodIndentForLine(e,t,n){let s=null,r="";const o=lN(e.autoIndent,t,n,!1,e.languageConfigurationService);if(o)s=o.action,r=o.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){const u=t.getLineContent(a);if(k1(u)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=Dz(e.autoIndent,t,new J(a,l,a,l),e.languageConfigurationService);c&&(r=c.indentation+c.appendText)}return s&&(s===wo.Indent&&(r=Az(e,r)),s===wo.Outdent&&(r=cN(e,r)),r=e.normalizeIndentation(r)),r||null}static _replaceJumpToNextIndent(e,t,n,s){let r="";const o=n.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,o),l=e.indentSize,c=l-a%l;for(let u=0;u<c;u++)r+=" "}else r="	";return new va(n,r,s)}}class Nz extends oN{constructor(e,t,n,s,r,o){super(e,t,n,s),this._openCharacter=r,this._closeCharacter=o,this.closeCharacterRange=null,this.enclosingRange=null}_computeCursorStateWithRange(e,t,n){return this.closeCharacterRange=new J(t.startLineNumber,t.endColumn-this._closeCharacter.length,t.endLineNumber,t.endColumn),this.enclosingRange=new J(t.startLineNumber,t.endColumn-this._openCharacter.length-this._closeCharacter.length,t.endLineNumber,t.endColumn),super.computeCursorState(e,n)}}class oet extends Nz{constructor(e,t,n,s){const r=(n?t:"")+s,o=0,a=-s.length;super(e,r,o,a,t,s)}computeCursorState(e,t){const s=t.getInverseEditOperations()[0].range;return this._computeCursorStateWithRange(e,s,t)}}class aet extends Nz{constructor(e,t,n,s){const r=n+s,o=0,a=n.length;super(t,r,o,a,n,s),this._autoIndentationEdit=e,this._autoClosingEdit={range:t,text:r}}getEditOperations(e,t){t.addTrackedEditOperation(this._autoIndentationEdit.range,this._autoIndentationEdit.text),t.addTrackedEditOperation(this._autoClosingEdit.range,this._autoClosingEdit.text)}computeCursorState(e,t){const n=t.getInverseEditOperations();if(n.length!==2)throw new Error("There should be two inverse edit operations!");const s=n[0].range,r=n[1].range,o=s.plusRange(r);return this._computeCursorStateWithRange(e,o,t)}}function Rz(i,e){return i===" "?e===5||e===6?6:5:4}function BA(i,e){return jee(i)&&!jee(e)?!0:i===5?!1:zee(i)!==zee(e)}function zee(i){return i===6||i===5?"space":i}function jee(i){return i===4||i===5||i===6}function cpe(i,e,t,n,s){if(i.autoClosingOvertype==="never"||!i.autoClosingPairs.autoClosingPairsCloseSingleChar.has(s))return!1;for(let r=0,o=t.length;r<o;r++){const a=t[r];if(!a.isEmpty())return!1;const l=a.getPosition(),c=e.getLineContent(l.lineNumber);if(c.charAt(l.column-1)!==s)return!1;const d=Mm(s);if((l.column>2?c.charCodeAt(l.column-2):0)===92&&d)return!1;if(i.autoClosingOvertype==="auto"){let g=!1;for(let p=0,_=n.length;p<_;p++){const v=n[p];if(l.lineNumber===v.startLineNumber&&l.column===v.startColumn){g=!0;break}}if(!g)return!1}}return!0}function Lp(i,e,t){return t?new kL(i,e,!0):new va(i,e,!0)}function Az(i,e,t){return t=t||1,c1.shiftIndent(e,e.length+t,i.tabSize,i.indentSize,i.insertSpaces)}function cN(i,e,t){return t=t||1,c1.unshiftIndent(e,e.length+t,i.tabSize,i.indentSize,i.insertSpaces)}function upe(i,e){return Mm(e)?i.autoSurround==="quotes"||i.autoSurround==="languageDefined":i.autoSurround==="brackets"||i.autoSurround==="languageDefined"}class qp{static indent(e,t,n){if(t===null||n===null)return[];const s=[];for(let r=0,o=n.length;r<o;r++)s[r]=new c1(n[r],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return s}static outdent(e,t,n){const s=[];for(let r=0,o=n.length;r<o;r++)s[r]=new c1(n[r],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return s}static paste(e,t,n,s,r,o){return net.getEdits(e,t,n,s,r,o)}static tab(e,t,n){return ret.getCommands(e,t,n)}static compositionType(e,t,n,s,r,o,a,l){return iet.getEdits(e,t,n,s,r,o,a,l)}static compositionEndWithInterceptors(e,t,n,s,r,o){if(!s)return null;let a=null;for(const h of s)if(a===null)a=h.insertedText;else if(a!==h.insertedText)return null;if(!a||a.length!==1)return null;const l=a;let c=!1;for(const h of s)if(h.deletedText.length!==0){c=!0;break}if(c){if(!upe(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const h=Mm(l);for(const _ of s)if(_.deletedSelectionStart!==0||_.deletedSelectionEnd!==_.deletedText.length||/^[ \t]+$/.test(_.deletedText)||h&&Mm(_.deletedText))return null;const g=[];for(const _ of r){if(!_.isEmpty())return null;g.push(_.getPosition())}if(g.length!==s.length)return null;const p=[];for(let _=0,v=g.length;_<v;_++)p.push(new $Je(g[_],s[_].deletedText,t.surroundingPairs[l]));return new ra(4,p,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const u=ZJe.getEdits(t,n,r,o,l);if(u!==void 0)return u;const d=BF.getEdits(t,n,r,l,!0,!1);return d!==void 0?d:null}static typeWithInterceptors(e,t,n,s,r,o,a){const l=lpe.getEdits(n,s,r,a,e);if(l!==void 0)return l;const c=QJe.getEdits(n,s,r,a,e);if(c!==void 0)return c;const u=XJe.getEdits(t,n,s,r,o,a);if(u!==void 0)return u;const d=BF.getEdits(n,s,r,a,!1,e);if(d!==void 0)return d;const h=JJe.getEdits(n,s,r,a,e);if(h!==void 0)return h;const g=eet.getEdits(t,n,s,r,a,e);return g!==void 0?g:tet.getEdits(t,r,a)}static typeWithoutInterceptors(e,t,n,s,r){return set.getEdits(e,s,r)}}class cet{constructor(e,t,n,s,r,o){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=n,this.insertedText=s,this.insertedSelectionStart=r,this.insertedSelectionEnd=o}}var Ue;(function(i){i.editorSimpleInput=new et("editorSimpleInput",!1,!0),i.editorTextFocus=new et("editorTextFocus",!1,S("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),i.focus=new et("editorFocus",!1,S("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),i.textInputFocus=new et("textInputFocus",!1,S("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),i.readOnly=new et("editorReadonly",!1,S("editorReadonly","Whether the editor is read-only")),i.inDiffEditor=new et("inDiffEditor",!1,S("inDiffEditor","Whether the context is a diff editor")),i.isEmbeddedDiffEditor=new et("isEmbeddedDiffEditor",!1,S("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),i.inMultiDiffEditor=new et("inMultiDiffEditor",!1,S("inMultiDiffEditor","Whether the context is a multi diff editor")),i.multiDiffEditorAllCollapsed=new et("multiDiffEditorAllCollapsed",void 0,S("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),i.hasChanges=new et("diffEditorHasChanges",!1,S("diffEditorHasChanges","Whether the diff editor has changes")),i.comparingMovedCode=new et("comparingMovedCode",!1,S("comparingMovedCode","Whether a moved code block is selected for comparison")),i.accessibleDiffViewerVisible=new et("accessibleDiffViewerVisible",!1,S("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),i.diffEditorRenderSideBySideInlineBreakpointReached=new et("diffEditorRenderSideBySideInlineBreakpointReached",!1,S("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),i.diffEditorInlineMode=new et("diffEditorInlineMode",!1,S("diffEditorInlineMode","Whether inline mode is active")),i.diffEditorOriginalWritable=new et("diffEditorOriginalWritable",!1,S("diffEditorOriginalWritable","Whether modified is writable in the diff editor")),i.diffEditorModifiedWritable=new et("diffEditorModifiedWritable",!1,S("diffEditorModifiedWritable","Whether modified is writable in the diff editor")),i.diffEditorOriginalUri=new et("diffEditorOriginalUri","",S("diffEditorOriginalUri","The uri of the original document")),i.diffEditorModifiedUri=new et("diffEditorModifiedUri","",S("diffEditorModifiedUri","The uri of the modified document")),i.columnSelection=new et("editorColumnSelection",!1,S("editorColumnSelection","Whether `editor.columnSelection` is enabled")),i.writable=i.readOnly.toNegated(),i.hasNonEmptySelection=new et("editorHasSelection",!1,S("editorHasSelection","Whether the editor has text selected")),i.hasOnlyEmptySelection=i.hasNonEmptySelection.toNegated(),i.hasMultipleSelections=new et("editorHasMultipleSelections",!1,S("editorHasMultipleSelections","Whether the editor has multiple selections")),i.hasSingleSelection=i.hasMultipleSelections.toNegated(),i.tabMovesFocus=new et("editorTabMovesFocus",!1,S("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),i.tabDoesNotMoveFocus=i.tabMovesFocus.toNegated(),i.isInEmbeddedEditor=new et("isInEmbeddedEditor",!1,!0),i.canUndo=new et("canUndo",!1,!0),i.canRedo=new et("canRedo",!1,!0),i.hoverVisible=new et("editorHoverVisible",!1,S("editorHoverVisible","Whether the editor hover is visible")),i.hoverFocused=new et("editorHoverFocused",!1,S("editorHoverFocused","Whether the editor hover is focused")),i.stickyScrollFocused=new et("stickyScrollFocused",!1,S("stickyScrollFocused","Whether the sticky scroll is focused")),i.stickyScrollVisible=new et("stickyScrollVisible",!1,S("stickyScrollVisible","Whether the sticky scroll is visible")),i.standaloneColorPickerVisible=new et("standaloneColorPickerVisible",!1,S("standaloneColorPickerVisible","Whether the standalone color picker is visible")),i.standaloneColorPickerFocused=new et("standaloneColorPickerFocused",!1,S("standaloneColorPickerFocused","Whether the standalone color picker is focused")),i.inCompositeEditor=new et("inCompositeEditor",void 0,S("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),i.notInCompositeEditor=i.inCompositeEditor.toNegated(),i.languageId=new et("editorLangId","",S("editorLangId","The language identifier of the editor")),i.hasCompletionItemProvider=new et("editorHasCompletionItemProvider",!1,S("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),i.hasCodeActionsProvider=new et("editorHasCodeActionsProvider",!1,S("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),i.hasCodeLensProvider=new et("editorHasCodeLensProvider",!1,S("editorHasCodeLensProvider","Whether the editor has a code lens provider")),i.hasDefinitionProvider=new et("editorHasDefinitionProvider",!1,S("editorHasDefinitionProvider","Whether the editor has a definition provider")),i.hasDeclarationProvider=new et("editorHasDeclarationProvider",!1,S("editorHasDeclarationProvider","Whether the editor has a declaration provider")),i.hasImplementationProvider=new et("editorHasImplementationProvider",!1,S("editorHasImplementationProvider","Whether the editor has an implementation provider")),i.hasTypeDefinitionProvider=new et("editorHasTypeDefinitionProvider",!1,S("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),i.hasHoverProvider=new et("editorHasHoverProvider",!1,S("editorHasHoverProvider","Whether the editor has a hover provider")),i.hasDocumentHighlightProvider=new et("editorHasDocumentHighlightProvider",!1,S("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),i.hasDocumentSymbolProvider=new et("editorHasDocumentSymbolProvider",!1,S("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),i.hasReferenceProvider=new et("editorHasReferenceProvider",!1,S("editorHasReferenceProvider","Whether the editor has a reference provider")),i.hasRenameProvider=new et("editorHasRenameProvider",!1,S("editorHasRenameProvider","Whether the editor has a rename provider")),i.hasSignatureHelpProvider=new et("editorHasSignatureHelpProvider",!1,S("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),i.hasInlayHintsProvider=new et("editorHasInlayHintsProvider",!1,S("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),i.hasDocumentFormattingProvider=new et("editorHasDocumentFormattingProvider",!1,S("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),i.hasDocumentSelectionFormattingProvider=new et("editorHasDocumentSelectionFormattingProvider",!1,S("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),i.hasMultipleDocumentFormattingProvider=new et("editorHasMultipleDocumentFormattingProvider",!1,S("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),i.hasMultipleDocumentSelectionFormattingProvider=new et("editorHasMultipleDocumentSelectionFormattingProvider",!1,S("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(Ue||(Ue={}));const ln=0;class Ii extends i1{runEditorCommand(e,t,n){const s=t._getViewModel();s&&this.runCoreEditorCommand(s,n||{})}}var ur;(function(i){const e=function(n){if(!Xo(n))return!1;const s=n;return!(!nl(s.to)||!Dl(s.by)&&!nl(s.by)||!Dl(s.value)&&!Fy(s.value)||!Dl(s.revealCursor)&&!Ede(s.revealCursor))};i.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},i.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},i.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function t(n){let s;switch(n.to){case i.RawDirection.Up:s=1;break;case i.RawDirection.Right:s=2;break;case i.RawDirection.Down:s=3;break;case i.RawDirection.Left:s=4;break;default:return null}let r;switch(n.by){case i.RawUnit.Line:r=1;break;case i.RawUnit.WrappedLine:r=2;break;case i.RawUnit.Page:r=3;break;case i.RawUnit.HalfPage:r=4;break;case i.RawUnit.Editor:r=5;break;case i.RawUnit.Column:r=6;break;default:r=2}const o=Math.floor(n.value||1),a=!!n.revealCursor;return{direction:s,unit:r,value:o,revealCursor:a,select:!!n.select}}i.parse=t})(ur||(ur={}));var mv;(function(i){const e=function(t){if(!Xo(t))return!1;const n=t;return!(!Fy(n.lineNumber)&&!nl(n.lineNumber)||!Dl(n.at)&&!nl(n.at))};i.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},i.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(mv||(mv={}));class VF{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{const s=t.get(Es).getFocusedCodeEditor();return s&&s.hasTextFocus()?this._runEditorCommand(t,s,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{const s=ro();return s&&["input","textarea"].indexOf(s.tagName.toLowerCase())>=0?(this.runDOMCommand(s),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{const s=t.get(Es).getActiveCodeEditor();return s?(s.focus(),this._runEditorCommand(t,s,n)):!1})}_runEditorCommand(e,t,n){const s=this.runEditorCommand(e,t,n);return s||!0}}var Is;(function(i){class e extends Ii{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,x){if(!x.position)return;w.model.pushStackElement(),w.setCursorStates(x.source,3,[qr.moveTo(w,w.getPrimaryCursorState(),this._inSelectionMode,x.position,x.viewPosition)])&&x.revealType!==2&&w.revealAllCursors(x.source,!0,!0)}}i.MoveTo=Lt(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),i.MoveToSelect=Lt(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends Ii{runCoreEditorCommand(w,x){w.model.pushStackElement();const k=this._getColumnSelectResult(w,w.getPrimaryCursorState(),w.getCursorColumnSelectData(),x);k!==null&&(w.setCursorStates(x.source,3,k.viewStates.map(T=>Yt.fromViewState(T))),w.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:k.fromLineNumber,fromViewVisualColumn:k.fromVisualColumn,toViewLineNumber:k.toLineNumber,toViewVisualColumn:k.toVisualColumn}),k.reversed?w.revealTopMostCursor(x.source):w.revealBottomMostCursor(x.source))}}i.ColumnSelect=Lt(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(y,w,x,k){if(typeof k.position>"u"||typeof k.viewPosition>"u"||typeof k.mouseColumn>"u")return null;const T=y.model.validatePosition(k.position),R=y.coordinatesConverter.validateViewPosition(new ue(k.viewPosition.lineNumber,k.viewPosition.column),T),L=k.doColumnSelect?x.fromViewLineNumber:R.lineNumber,I=k.doColumnSelect?x.fromViewVisualColumn:k.mouseColumn-1;return $p.columnSelect(y.cursorConfig,y,L,I,R.lineNumber,k.mouseColumn-1)}}),i.CursorColumnSelectLeft=Lt(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(y,w,x,k){return $p.columnSelectLeft(y.cursorConfig,y,x)}}),i.CursorColumnSelectRight=Lt(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(y,w,x,k){return $p.columnSelectRight(y.cursorConfig,y,x)}});class n extends t{constructor(w){super(w),this._isPaged=w.isPaged}_getColumnSelectResult(w,x,k,T){return $p.columnSelectUp(w.cursorConfig,w,k,this._isPaged)}}i.CursorColumnSelectUp=Lt(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:3600,linux:{primary:0}}})),i.CursorColumnSelectPageUp=Lt(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:3595,linux:{primary:0}}}));class s extends t{constructor(w){super(w),this._isPaged=w.isPaged}_getColumnSelectResult(w,x,k,T){return $p.columnSelectDown(w.cursorConfig,w,k,this._isPaged)}}i.CursorColumnSelectDown=Lt(new s({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:3602,linux:{primary:0}}})),i.CursorColumnSelectPageDown=Lt(new s({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:3596,linux:{primary:0}}}));class r extends Ii{constructor(){super({id:"cursorMove",precondition:void 0,metadata:aN.metadata})}runCoreEditorCommand(w,x){const k=aN.parse(x);k&&this._runCursorMove(w,x.source,k)}_runCursorMove(w,x,k){w.model.pushStackElement(),w.setCursorStates(x,3,r._move(w,w.getCursorStates(),k)),w.revealAllCursors(x,!0)}static _move(w,x,k){const T=k.select,R=k.value;switch(k.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return qr.simpleMove(w,x,k.direction,T,R,k.unit);case 11:case 13:case 12:case 14:return qr.viewportMove(w,x,k.direction,T,R);default:return null}}}i.CursorMoveImpl=r,i.CursorMove=Lt(new r);class o extends Ii{constructor(w){super(w),this._staticArgs=w.args}runCoreEditorCommand(w,x){let k=this._staticArgs;this._staticArgs.value===-1&&(k={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:x.pageSize||w.cursorConfig.pageSize}),w.model.pushStackElement(),w.setCursorStates(x.source,3,qr.simpleMove(w,w.getCursorStates(),k.direction,k.select,k.value,k.unit)),w.revealAllCursors(x.source,!0)}}i.CursorLeft=Lt(new o({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),i.CursorLeftSelect=Lt(new o({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:1039}})),i.CursorRight=Lt(new o({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),i.CursorRightSelect=Lt(new o({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:1041}})),i.CursorUp=Lt(new o({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),i.CursorUpSelect=Lt(new o({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),i.CursorPageUp=Lt(new o({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:11}})),i.CursorPageUpSelect=Lt(new o({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:1035}})),i.CursorDown=Lt(new o({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),i.CursorDownSelect=Lt(new o({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),i.CursorPageDown=Lt(new o({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:12}})),i.CursorPageDownSelect=Lt(new o({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:1036}})),i.CreateCursor=Lt(new class extends Ii{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(y,w){if(!w.position)return;let x;w.wholeLine?x=qr.line(y,y.getPrimaryCursorState(),!1,w.position,w.viewPosition):x=qr.moveTo(y,y.getPrimaryCursorState(),!1,w.position,w.viewPosition);const k=y.getCursorStates();if(k.length>1){const T=x.modelState?x.modelState.position:null,R=x.viewState?x.viewState.position:null;for(let L=0,I=k.length;L<I;L++){const A=k[L];if(!(T&&!A.modelState.selection.containsPosition(T))&&!(R&&!A.viewState.selection.containsPosition(R))){k.splice(L,1),y.model.pushStackElement(),y.setCursorStates(w.source,3,k);return}}}k.push(x),y.model.pushStackElement(),y.setCursorStates(w.source,3,k)}}),i.LastCursorMoveToSelect=Lt(new class extends Ii{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(y,w){if(!w.position)return;const x=y.getLastAddedCursorIndex(),k=y.getCursorStates(),T=k.slice(0);T[x]=qr.moveTo(y,k[x],!0,w.position,w.viewPosition),y.model.pushStackElement(),y.setCursorStates(w.source,3,T)}});class a extends Ii{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,x){w.model.pushStackElement(),w.setCursorStates(x.source,3,qr.moveToBeginningOfLine(w,w.getCursorStates(),this._inSelectionMode)),w.revealAllCursors(x.source,!0)}}i.CursorHome=Lt(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),i.CursorHomeSelect=Lt(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends Ii{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,x){w.model.pushStackElement(),w.setCursorStates(x.source,3,this._exec(w.getCursorStates())),w.revealAllCursors(x.source,!0)}_exec(w){const x=[];for(let k=0,T=w.length;k<T;k++){const R=w[k],L=R.modelState.position.lineNumber;x[k]=Yt.fromModelState(R.modelState.move(this._inSelectionMode,L,1,0))}return x}}i.CursorLineStart=Lt(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:0,mac:{primary:287}}})),i.CursorLineStartSelect=Lt(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends Ii{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,x){w.model.pushStackElement(),w.setCursorStates(x.source,3,qr.moveToEndOfLine(w,w.getCursorStates(),this._inSelectionMode,x.sticky||!1)),w.revealAllCursors(x.source,!0)}}i.CursorEnd=Lt(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:ln,kbExpr:Ue.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:S("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),i.CursorEndSelect=Lt(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:ln,kbExpr:Ue.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:S("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class u extends Ii{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,x){w.model.pushStackElement(),w.setCursorStates(x.source,3,this._exec(w,w.getCursorStates())),w.revealAllCursors(x.source,!0)}_exec(w,x){const k=[];for(let T=0,R=x.length;T<R;T++){const L=x[T],I=L.modelState.position.lineNumber,A=w.model.getLineMaxColumn(I);k[T]=Yt.fromModelState(L.modelState.move(this._inSelectionMode,I,A,0))}return k}}i.CursorLineEnd=Lt(new u({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:0,mac:{primary:291}}})),i.CursorLineEndSelect=Lt(new u({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:0,mac:{primary:1315}}}));class d extends Ii{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,x){w.model.pushStackElement(),w.setCursorStates(x.source,3,qr.moveToBeginningOfBuffer(w,w.getCursorStates(),this._inSelectionMode)),w.revealAllCursors(x.source,!0)}}i.CursorTop=Lt(new d({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:2062,mac:{primary:2064}}})),i.CursorTopSelect=Lt(new d({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:3086,mac:{primary:3088}}}));class h extends Ii{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,x){w.model.pushStackElement(),w.setCursorStates(x.source,3,qr.moveToEndOfBuffer(w,w.getCursorStates(),this._inSelectionMode)),w.revealAllCursors(x.source,!0)}}i.CursorBottom=Lt(new h({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:2061,mac:{primary:2066}}})),i.CursorBottomSelect=Lt(new h({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:3085,mac:{primary:3090}}}));class g extends Ii{constructor(){super({id:"editorScroll",precondition:void 0,metadata:ur.metadata})}determineScrollMethod(w){const x=[6],k=[1,2,3,4,5,6],T=[4,2],R=[1,3];return x.includes(w.unit)&&T.includes(w.direction)?this._runHorizontalEditorScroll.bind(this):k.includes(w.unit)&&R.includes(w.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(w,x){const k=ur.parse(x);if(!k)return;const T=this.determineScrollMethod(k);T&&T(w,x.source,k)}_runVerticalEditorScroll(w,x,k){const T=this._computeDesiredScrollTop(w,k);if(k.revealCursor){const R=w.getCompletelyVisibleViewRangeAtScrollTop(T);w.setCursorStates(x,3,[qr.findPositionInViewportIfOutside(w,w.getPrimaryCursorState(),R,k.select)])}w.viewLayout.setScrollPosition({scrollTop:T},0)}_computeDesiredScrollTop(w,x){if(x.unit===1){const R=w.viewLayout.getFutureViewport(),L=w.getCompletelyVisibleViewRangeAtScrollTop(R.top),I=w.coordinatesConverter.convertViewRangeToModelRange(L);let A;x.direction===1?A=Math.max(1,I.startLineNumber-x.value):A=Math.min(w.model.getLineCount(),I.startLineNumber+x.value);const B=w.coordinatesConverter.convertModelPositionToViewPosition(new ue(A,1));return w.viewLayout.getVerticalOffsetForLineNumber(B.lineNumber)}if(x.unit===5){let R=0;return x.direction===3&&(R=w.model.getLineCount()-w.cursorConfig.pageSize),w.viewLayout.getVerticalOffsetForLineNumber(R)}let k;x.unit===3?k=w.cursorConfig.pageSize*x.value:x.unit===4?k=Math.round(w.cursorConfig.pageSize/2)*x.value:k=x.value;const T=(x.direction===1?-1:1)*k;return w.viewLayout.getCurrentScrollTop()+T*w.cursorConfig.lineHeight}_runHorizontalEditorScroll(w,x,k){const T=this._computeDesiredScrollLeft(w,k);w.viewLayout.setScrollPosition({scrollLeft:T},0)}_computeDesiredScrollLeft(w,x){const k=(x.direction===4?-1:1)*x.value;return w.viewLayout.getCurrentScrollLeft()+k*w.cursorConfig.typicalHalfwidthCharacterWidth}}i.EditorScrollImpl=g,i.EditorScroll=Lt(new g),i.ScrollLineUp=Lt(new class extends Ii{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(y,w){i.EditorScroll.runCoreEditorCommand(y,{to:ur.RawDirection.Up,by:ur.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:w.source})}}),i.ScrollPageUp=Lt(new class extends Ii{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(y,w){i.EditorScroll.runCoreEditorCommand(y,{to:ur.RawDirection.Up,by:ur.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:w.source})}}),i.ScrollEditorTop=Lt(new class extends Ii{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus}})}runCoreEditorCommand(y,w){i.EditorScroll.runCoreEditorCommand(y,{to:ur.RawDirection.Up,by:ur.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:w.source})}}),i.ScrollLineDown=Lt(new class extends Ii{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(y,w){i.EditorScroll.runCoreEditorCommand(y,{to:ur.RawDirection.Down,by:ur.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:w.source})}}),i.ScrollPageDown=Lt(new class extends Ii{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(y,w){i.EditorScroll.runCoreEditorCommand(y,{to:ur.RawDirection.Down,by:ur.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:w.source})}}),i.ScrollEditorBottom=Lt(new class extends Ii{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus}})}runCoreEditorCommand(y,w){i.EditorScroll.runCoreEditorCommand(y,{to:ur.RawDirection.Down,by:ur.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:w.source})}}),i.ScrollLeft=Lt(new class extends Ii{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus}})}runCoreEditorCommand(y,w){i.EditorScroll.runCoreEditorCommand(y,{to:ur.RawDirection.Left,by:ur.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:w.source})}}),i.ScrollRight=Lt(new class extends Ii{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus}})}runCoreEditorCommand(y,w){i.EditorScroll.runCoreEditorCommand(y,{to:ur.RawDirection.Right,by:ur.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:w.source})}});class p extends Ii{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,x){x.position&&(w.model.pushStackElement(),w.setCursorStates(x.source,3,[qr.word(w,w.getPrimaryCursorState(),this._inSelectionMode,x.position)]),x.revealType!==2&&w.revealAllCursors(x.source,!0,!0))}}i.WordSelect=Lt(new p({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),i.WordSelectDrag=Lt(new p({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),i.LastCursorWordSelect=Lt(new class extends Ii{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(y,w){if(!w.position)return;const x=y.getLastAddedCursorIndex(),k=y.getCursorStates(),T=k.slice(0),R=k[x];T[x]=qr.word(y,R,R.modelState.hasSelection(),w.position),y.model.pushStackElement(),y.setCursorStates(w.source,3,T)}});class _ extends Ii{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,x){x.position&&(w.model.pushStackElement(),w.setCursorStates(x.source,3,[qr.line(w,w.getPrimaryCursorState(),this._inSelectionMode,x.position,x.viewPosition)]),x.revealType!==2&&w.revealAllCursors(x.source,!1,!0))}}i.LineSelect=Lt(new _({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),i.LineSelectDrag=Lt(new _({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class v extends Ii{constructor(w){super(w),this._inSelectionMode=w.inSelectionMode}runCoreEditorCommand(w,x){if(!x.position)return;const k=w.getLastAddedCursorIndex(),T=w.getCursorStates(),R=T.slice(0);R[k]=qr.line(w,T[k],this._inSelectionMode,x.position,x.viewPosition),w.model.pushStackElement(),w.setCursorStates(x.source,3,R)}}i.LastCursorLineSelect=Lt(new v({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),i.LastCursorLineSelectDrag=Lt(new v({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),i.CancelSelection=Lt(new class extends Ii{constructor(){super({id:"cancelSelection",precondition:Ue.hasNonEmptySelection,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(y,w){y.model.pushStackElement(),y.setCursorStates(w.source,3,[qr.cancelSelection(y,y.getPrimaryCursorState())]),y.revealAllCursors(w.source,!0)}}),i.RemoveSecondaryCursors=Lt(new class extends Ii{constructor(){super({id:"removeSecondaryCursors",precondition:Ue.hasMultipleSelections,kbOpts:{weight:ln+1,kbExpr:Ue.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(y,w){y.model.pushStackElement(),y.setCursorStates(w.source,3,[y.getPrimaryCursorState()]),y.revealAllCursors(w.source,!0),yD(S("removedCursor","Removed secondary cursors"))}}),i.RevealLine=Lt(new class extends Ii{constructor(){super({id:"revealLine",precondition:void 0,metadata:mv.metadata})}runCoreEditorCommand(y,w){const x=w,k=x.lineNumber||0;let T=typeof k=="number"?k+1:parseInt(k)+1;T<1&&(T=1);const R=y.model.getLineCount();T>R&&(T=R);const L=new J(T,1,T,y.model.getLineMaxColumn(T));let I=0;if(x.at)switch(x.at){case mv.RawAtArgument.Top:I=3;break;case mv.RawAtArgument.Center:I=1;break;case mv.RawAtArgument.Bottom:I=4;break}const A=y.coordinatesConverter.convertModelRangeToViewRange(L);y.revealRange(w.source,!1,A,I,0)}}),i.SelectAll=new class extends VF{constructor(){super(NBe)}runDOMCommand(y){vc&&(y.focus(),y.select()),y.ownerDocument.execCommand("selectAll")}runEditorCommand(y,w,x){const k=w._getViewModel();k&&this.runCoreEditorCommand(k,x)}runCoreEditorCommand(y,w){y.model.pushStackElement(),y.setCursorStates("keyboard",3,[qr.selectAll(y,y.getPrimaryCursorState())])}},i.SetSelection=Lt(new class extends Ii{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(y,w){w.selection&&(y.model.pushStackElement(),y.setCursorStates(w.source,3,[Yt.fromModelSelection(w.selection)]))}})})(Is||(Is={}));const uet=En.and(Ue.textInputFocus,Ue.columnSelection);function Qy(i,e){W2.registerKeybindingRule({id:i,primary:e,when:uet,weight:ln+1})}Qy(Is.CursorColumnSelectLeft.id,1039);Qy(Is.CursorColumnSelectRight.id,1041);Qy(Is.CursorColumnSelectUp.id,1040);Qy(Is.CursorColumnSelectPageUp.id,1035);Qy(Is.CursorColumnSelectDown.id,1042);Qy(Is.CursorColumnSelectPageDown.id,1036);function $ee(i){return i.register(),i}var qee;(function(i){class e extends i1{runEditorCommand(n,s,r){const o=s._getViewModel();o&&this.runCoreEditingCommand(s,o,r||{})}}i.CoreEditingCommand=e,i.LineBreakInsert=Lt(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:Ue.writable,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,n,s){t.pushUndoStop(),t.executeCommands(this.id,lpe.lineBreakInsert(n.cursorConfig,n.model,n.getCursorStates().map(r=>r.modelState.selection)))}}),i.Outdent=Lt(new class extends e{constructor(){super({id:"outdent",precondition:Ue.writable,kbOpts:{weight:ln,kbExpr:En.and(Ue.editorTextFocus,Ue.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,n,s){t.pushUndoStop(),t.executeCommands(this.id,qp.outdent(n.cursorConfig,n.model,n.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),i.Tab=Lt(new class extends e{constructor(){super({id:"tab",precondition:Ue.writable,kbOpts:{weight:ln,kbExpr:En.and(Ue.editorTextFocus,Ue.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,n,s){t.pushUndoStop(),t.executeCommands(this.id,qp.tab(n.cursorConfig,n.model,n.getCursorStates().map(r=>r.modelState.selection))),t.pushUndoStop()}}),i.DeleteLeft=Lt(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,n,s){const[r,o]=l1.deleteLeft(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection),n.getCursorAutoClosedCharacters());r&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(2)}}),i.DeleteRight=Lt(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:ln,kbExpr:Ue.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,n,s){const[r,o]=l1.deleteRight(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection));r&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(3)}}),i.Undo=new class extends VF{constructor(){super(Uhe)}runDOMCommand(t){t.ownerDocument.execCommand("undo")}runEditorCommand(t,n,s){if(!(!n.hasModel()||n.getOption(92)===!0))return n.getModel().undo()}},i.Redo=new class extends VF{constructor(){super(zhe)}runDOMCommand(t){t.ownerDocument.execCommand("redo")}runEditorCommand(t,n,s){if(!(!n.hasModel()||n.getOption(92)===!0))return n.getModel().redo()}}})(qee||(qee={}));class Kee extends nA{constructor(e,t,n){super({id:e,precondition:void 0,metadata:n}),this._handlerId=t}runCommand(e,t){const n=e.get(Es).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}}function B1(i,e){$ee(new Kee("default:"+i,i)),$ee(new Kee(i,i,e))}B1("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});B1("replacePreviousChar");B1("compositionType");B1("compositionStart");B1("compositionEnd");B1("paste");B1("cut");class det{constructor(e,t,n,s){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=s}paste(e,t,n,s){this.commandDelegate.paste(e,t,n,s)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,s){this.commandDelegate.compositionType(e,t,n,s)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Is.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new ue(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,n=ia&&t.get(108),s=t.get(22);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):s?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){Is.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){Is.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,n){e=this._validateViewColumn(e),Is.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),Is.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){Is.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){Is.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){Is.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){Is.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){Is.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){Is.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){Is.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){Is.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){Is.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class dpe{constructor(e){this._lineFactory=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Dn("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const n=this.getStartLineNumber(),s=this.getEndLineNumber();if(t<n){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>s)return null;let r=0,o=0;for(let l=n;l<=s;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(o===0?(r=c,o=1):o++)}if(e<n){let l=0;t<n?l=t-e+1:l=n-e,this._rendLineNumberStart-=l}return this._lines.splice(r,o)}onLinesChanged(e,t){const n=e+t-1;if(this.getCount()===0)return!1;const s=this.getStartLineNumber(),r=this.getEndLineNumber();let o=!1;for(let a=e;a<=n;a++)a>=s&&a<=r&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),o=!0);return o}onLinesInserted(e,t){if(this.getCount()===0)return null;const n=t-e+1,s=this.getStartLineNumber(),r=this.getEndLineNumber();if(e<=s)return this._rendLineNumberStart+=n,null;if(e>r)return null;if(n+e>r)return this._lines.splice(e-this._rendLineNumberStart,r-e+1);const o=[];for(let d=0;d<n;d++)o[d]=this._lineFactory.createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-n),u=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=l.concat(o).concat(c),u}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),n=this.getEndLineNumber();let s=!1;for(let r=0,o=e.length;r<o;r++){const a=e[r];if(a.toLineNumber<t||a.fromLineNumber>n)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(n,a.toLineNumber);for(let u=l;u<=c;u++){const d=u-this._rendLineNumberStart;this._lines[d].onTokensChanged(),s=!0}}return s}}class hpe{constructor(e){this._lineFactory=e,this.domNode=this._createDomNode(),this._linesCollection=new dpe(this._lineFactory)}_createDomNode(){const e=pn(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(146)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,s=t.length;n<s;n++){const r=t[n].getDomNode();r==null||r.remove()}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,s=t.length;n<s;n++){const r=t[n].getDomNode();r==null||r.remove()}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),n=new WF(this.domNode.domNode,this._lineFactory,e),s={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},r=n.render(s,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(r.rendLineNumberStart,r.lines)}}const xh=class xh{constructor(e,t,n){this._domNode=e,this._lineFactory=t,this._viewportData=n}render(e,t,n,s){const r={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(r.rendLineNumberStart+r.linesLength-1<t||n<r.rendLineNumberStart){r.rendLineNumberStart=t,r.linesLength=n-t+1,r.lines=[];for(let o=t;o<=n;o++)r.lines[o-t]=this._lineFactory.createLine();return this._finishRendering(r,!0,s),r}if(this._renderUntouchedLines(r,Math.max(t-r.rendLineNumberStart,0),Math.min(n-r.rendLineNumberStart,r.linesLength-1),s,t),r.rendLineNumberStart>t){const o=t,a=Math.min(n,r.rendLineNumberStart-1);o<=a&&(this._insertLinesBefore(r,o,a,s,t),r.linesLength+=a-o+1)}else if(r.rendLineNumberStart<t){const o=Math.min(r.linesLength,t-r.rendLineNumberStart);o>0&&(this._removeLinesBefore(r,o),r.linesLength-=o)}if(r.rendLineNumberStart=t,r.rendLineNumberStart+r.linesLength-1<n){const o=r.rendLineNumberStart+r.linesLength,a=n;o<=a&&(this._insertLinesAfter(r,o,a,s,t),r.linesLength+=a-o+1)}else if(r.rendLineNumberStart+r.linesLength-1>n){const o=Math.max(0,n-r.rendLineNumberStart+1),l=r.linesLength-1-o+1;l>0&&(this._removeLinesAfter(r,l),r.linesLength-=l)}return this._finishRendering(r,!1,s),r}_renderUntouchedLines(e,t,n,s,r){const o=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=n;l++){const c=o+l;a[l].layoutLine(c,s[c-r],this._viewportData.lineHeight)}}_insertLinesBefore(e,t,n,s,r){const o=[];let a=0;for(let l=t;l<=n;l++)o[a++]=this._lineFactory.createLine();e.lines=o.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){const s=e.lines[n].getDomNode();s==null||s.remove()}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,s,r){const o=[];let a=0;for(let l=t;l<=n;l++)o[a++]=this._lineFactory.createLine();e.lines=e.lines.concat(o)}_removeLinesAfter(e,t){const n=e.linesLength-t;for(let s=0;s<t;s++){const r=e.lines[n+s].getDomNode();r==null||r.remove()}e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,s){xh._ttPolicy&&(n=xh._ttPolicy.createHTML(n));const r=this._domNode.lastChild;t||!r?this._domNode.innerHTML=n:r.insertAdjacentHTML("afterend",n);let o=this._domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];s[a]&&(l.setDomNode(o),o=o.previousSibling)}}_finishRenderingInvalidLines(e,t,n){const s=document.createElement("div");xh._ttPolicy&&(t=xh._ttPolicy.createHTML(t)),s.innerHTML=t;for(let r=0;r<e.linesLength;r++){const o=e.lines[r];if(n[r]){const a=s.firstChild,l=o.getDomNode();l.parentNode.replaceChild(a,l),o.setDomNode(a)}}}_finishRendering(e,t,n){const s=xh._sb,r=e.linesLength,o=e.lines,a=e.rendLineNumberStart,l=[];{s.reset();let c=!1;for(let u=0;u<r;u++){const d=o[u];l[u]=!1,!(d.getDomNode()||!d.renderLine(u+a,n[u],this._viewportData.lineHeight,this._viewportData,s))&&(l[u]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,s.build(),l)}{s.reset();let c=!1;const u=[];for(let d=0;d<r;d++){const h=o[d];u[d]=!1,!(l[d]||!h.renderLine(d+a,n[d],this._viewportData.lineHeight,this._viewportData,s))&&(u[d]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,s.build(),u)}}};xh._ttPolicy=N1("editorViewLayer",{createHTML:e=>e}),xh._sb=new iA(1e5);let WF=xh;class fpe extends Ta{constructor(e){super(e),this._dynamicOverlays=[],this._isFocused=!1,this._visibleLines=new hpe({createLine:()=>new het(this._dynamicOverlays)}),this.domNode=this._visibleLines.domNode;const n=this._context.configuration.options.get(50);Nr(this.domNode,n),this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const n=this._context.configuration.options.get(50);return Nr(this.domNode,n),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,s=t.length;n<s;n++){const r=t[n];r.prepareRender(e),r.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class het{constructor(e){this._dynamicOverlays=e,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=pn(e)}onContentChanged(){}onTokensChanged(){}renderLine(e,t,n,s,r){let o="";for(let a=0,l=this._dynamicOverlays.length;a<l;a++){const c=this._dynamicOverlays[a];o+=c.render(s.startLineNumber,e)}return this._renderedContent===o?!1:(this._renderedContent=o,r.appendString('<div style="top:'),r.appendString(String(t)),r.appendString("px;height:"),r.appendString(String(n)),r.appendString('px;">'),r.appendString(o),r.appendString("</div>"),!0)}layoutLine(e,t,n){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(n))}}class fet extends fpe{constructor(e){super(e);const n=this._context.configuration.options.get(146);this._contentWidth=n.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const n=this._context.configuration.options.get(146);return this._contentWidth=n.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class get extends fpe{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(146);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),Nr(this.domNode,t.get(50))}onConfigurationChanged(e){const t=this._context.configuration.options;Nr(this.domNode,t.get(50));const n=t.get(146);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class VA{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var t;(t=this.onKeyDown)==null||t.call(this,e)}emitKeyUp(e){var t;(t=this.onKeyUp)==null||t.call(this,e)}emitContextMenu(e){var t;(t=this.onContextMenu)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;(t=this.onMouseMove)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;(t=this.onMouseLeave)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;(t=this.onMouseDown)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;(t=this.onMouseUp)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;(t=this.onMouseDrag)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;(t=this.onMouseDrop)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;(e=this.onMouseDropCanceled)==null||e.call(this)}emitMouseWheel(e){var t;(t=this.onMouseWheel)==null||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return VA.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const n={...e};return n.position&&(n.position=t.convertViewPositionToModelPosition(n.position)),n.range&&(n.range=t.convertViewRangeToModelRange(n.range)),(n.type===5||n.type===8)&&(n.detail=this.convertViewToModelViewZoneData(n.detail,t)),n}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new ue(e.afterLineNumber,1)).lineNumber}}}class met extends Ta{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=pn(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const n=this._context.configuration.options.get(146),s=n.contentWidth-n.verticalScrollbarWidth;this.contentWidth!==s&&(this.contentWidth=s,e=!0);const r=n.contentLeft;return this.contentLeft!==r&&(this.contentLeft=r,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){let t=0;const n=e.getDecorationsInViewport();for(const s of n){if(!s.options.blockClassName)continue;let r=this.blocks[t];r||(r=this.blocks[t]=pn(document.createElement("div")),this.domNode.appendChild(r));let o,a;s.options.blockIsAfterEnd?(o=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!1),a=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0)):(o=e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!0),a=s.range.isEmpty()&&!s.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0));const[l,c,u,d]=s.options.blockPadding??[0,0,0,0];r.setClassName("blockDecorations-block "+s.options.blockClassName),r.setLeft(this.contentLeft-d),r.setWidth(this.contentWidth+d+c),r.setTop(o-e.scrollTop-l),r.setHeight(a-o+l+u),t++}for(let s=t;s<this.blocks.length;s++)this.blocks[s].domNode.remove();this.blocks.length=t}}class pet extends Ta{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=pn(document.createElement("div")),bu.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=pn(document.createElement("div")),bu.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){const e=Object.keys(this._widgets);for(const t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){const t=new _et(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n,s,r){this._widgets[e.getId()].setPosition(t,n,s,r),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t];delete this._widgets[t];const s=n.domNode.domNode;s.remove(),s.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].render(e)}}class _et{constructor(e,t,n){this._primaryAnchor=new Xw(null,null),this._secondaryAnchor=new Xw(null,null),this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=pn(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const s=this._context.configuration.options,r=s.get(146);this._fixedOverflowWidgets=s.get(42),this._contentWidth=r.contentWidth,this._contentLeft=r.contentLeft,this._lineHeight=s.get(67),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(67),e.hasChanged(146)){const n=t.get(146);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,n){this._affinity=e,this._primaryAnchor=s(t,this._context.viewModel,this._affinity),this._secondaryAnchor=s(n,this._context.viewModel,this._affinity);function s(r,o,a){if(!r)return new Xw(null,null);const l=o.model.validatePosition(r);if(o.coordinatesConverter.modelPositionIsVisible(l)){const c=o.coordinatesConverter.convertModelPositionToViewPosition(l,a??void 0);return new Xw(r,c)}return new Xw(r,null)}}_getMaxWidth(){const e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?(t==null?void 0:t.innerWidth)||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}setPosition(e,t,n,s){this._setPosition(s,e,t),this._preference=n,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,n,s){const r=e.top,o=r,a=e.top+e.height,l=s.viewportHeight-a,c=r-n,u=o>=n,d=a,h=l>=n;let g=e.left;return g+t>s.scrollLeft+s.viewportWidth&&(g=s.scrollLeft+s.viewportWidth-t),g<s.scrollLeft&&(g=s.scrollLeft),{fitsAbove:u,aboveTop:c,fitsBelow:h,belowTop:d,left:g}}_layoutHorizontalSegmentInPage(e,t,n,s){const a=Math.max(15,t.left-s),l=Math.min(t.left+t.width+s,e.width-15),u=this._viewDomNode.domNode.ownerDocument.defaultView;let d=t.left+n-((u==null?void 0:u.scrollX)??0);if(d+s>l){const h=d-(l-s);d-=h,n-=h}if(d<a){const h=d-a;d-=h,n-=h}return[n,d]}_layoutBoxInPage(e,t,n,s){const r=e.top-n,o=e.top+e.height,a=Nl(this._viewDomNode.domNode),l=this._viewDomNode.domNode.ownerDocument,c=l.defaultView,u=a.top+r-((c==null?void 0:c.scrollY)??0),d=a.top+o-((c==null?void 0:c.scrollY)??0),h=a8(l.body),[g,p]=this._layoutHorizontalSegmentInPage(h,a,e.left-s.scrollLeft+this._contentLeft,t),_=22,v=22,y=u>=_,w=d+n<=h.height-v;return this._fixedOverflowWidgets?{fitsAbove:y,aboveTop:Math.max(u,_),fitsBelow:w,belowTop:d,left:p}:{fitsAbove:y,aboveTop:r,fitsBelow:w,belowTop:o,left:g}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new Zw(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){var o,a;const t=r(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),n=((o=this._secondaryAnchor.viewPosition)==null?void 0:o.lineNumber)===((a=this._primaryAnchor.viewPosition)==null?void 0:a.lineNumber)?this._secondaryAnchor.viewPosition:null,s=r(n,this._affinity,this._lineHeight);return{primary:t,secondary:s};function r(l,c,u){if(!l)return null;const d=e.visibleRangeForPosition(l);if(!d)return null;const h=l.column===1&&c===3?0:d.left,g=e.getVerticalOffsetForLineNumber(l.lineNumber)-e.scrollTop;return new Gee(g,h,u)}}_reduceAnchorCoordinates(e,t,n){if(!t)return e;const s=this._context.configuration.options.get(50);let r=t.left;return r<e.left?r=Math.max(r,e.left-n+s.typicalFullwidthCharacterWidth):r=Math.min(r,e.left+n-s.typicalFullwidthCharacterWidth),new Gee(e.top,r,e.height)}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const{primary:t,secondary:n}=this._getAnchorsCoordinates(e);if(!t)return{kind:"offViewport",preserveFocus:this.domNode.domNode.contains(this.domNode.domNode.ownerDocument.activeElement)};if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let o=null;if(typeof this._actual.beforeRender=="function"&&(o=R6(this._actual.beforeRender,this._actual)),o)this._cachedDomNodeOffsetWidth=o.width,this._cachedDomNodeOffsetHeight=o.height;else{const l=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(l.width),this._cachedDomNodeOffsetHeight=Math.round(l.height)}}const s=this._reduceAnchorCoordinates(t,n,this._cachedDomNodeOffsetWidth);let r;this.allowEditorOverflow?r=this._layoutBoxInPage(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):r=this._layoutBoxInViewport(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let o=1;o<=2;o++)for(const a of this._preference)if(a===1){if(!r)return null;if(o===2||r.fitsAbove)return{kind:"inViewport",coordinate:new Zw(r.aboveTop,r.left),position:1}}else if(a===2){if(!r)return null;if(o===2||r.fitsBelow)return{kind:"inViewport",coordinate:new Zw(r.belowTop,r.left),position:2}}else return this.allowEditorOverflow?{kind:"inViewport",coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new Zw(s.top,s.left)),position:0}:{kind:"inViewport",coordinate:new Zw(s.top,s.left),position:0};return null}onBeforeRender(e){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){var t;if(!this._renderData||this._renderData.kind==="offViewport"){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,((t=this._renderData)==null?void 0:t.kind)==="offViewport"&&this._renderData.preserveFocus?this.domNode.setTop(-1e3):this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&R6(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&R6(this._actual.afterRender,this._actual,this._renderData.position)}}class Xw{constructor(e,t){this.modelPosition=e,this.viewPosition=t}}class Zw{constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}}class Gee{constructor(e,t,n){this.top=e,this.left=t,this.height=n,this._anchorCoordinateBrand=void 0}}function R6(i,e,...t){try{return i.call(e,...t)}catch{return null}}class gpe extends F1{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(146);this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=n.isViewportWrapping,this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new Gn(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=new Set;for(const r of this._selections)t.add(r.positionLineNumber);const n=Array.from(t);n.sort((r,o)=>r-o),ks(this._cursorLineNumbers,n)||(this._cursorLineNumbers=n,e=!0);const s=this._selections.every(r=>r.isEmpty());return this._selectionIsEmpty!==s&&(this._selectionIsEmpty=s,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(146);return this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=n.isViewportWrapping,this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=[];for(let o=t;o<=n;o++){const a=o-t;s[a]=""}if(this._wordWrap){const o=this._renderOne(e,!1);for(const a of this._cursorLineNumbers){const l=this._context.viewModel.coordinatesConverter,c=l.convertViewPositionToModelPosition(new ue(a,1)).lineNumber,u=l.convertModelPositionToViewPosition(new ue(c,1)).lineNumber,d=l.convertModelPositionToViewPosition(new ue(c,this._context.viewModel.model.getLineMaxColumn(c))).lineNumber,h=Math.max(u,t),g=Math.min(d,n);for(let p=h;p<=g;p++){const _=p-t;s[_]=o}}}const r=this._renderOne(e,!0);for(const o of this._cursorLineNumbers){if(o<t||o>n)continue;const a=o-t;s[a]=r}this._renderData=s}render(e,t){if(!this._renderData)return"";const n=t-e;return n>=this._renderData.length?"":this._renderData[n]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class vet extends gpe{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(t?" current-line-exact":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class bet extends gpe{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&t?" current-line-exact-margin":"")}" style="width:${this._contentLeft}px"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}Nf((i,e)=>{const t=i.getColor(Vge);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||i.defines(EJ)){const n=i.getColor(EJ);n&&(e.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${n}; }`),eb(i.type)&&(e.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}});class yet extends F1{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let n=[],s=0;for(let l=0,c=t.length;l<c;l++){const u=t[l];u.options.className&&(n[s++]=u)}n=n.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const u=l.options.className,d=c.options.className;return u<d?-1:u>d?1:J.compareRangesUsingStarts(l.range,c.range)});const r=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=[];for(let l=r;l<=o;l++){const c=l-r;a[c]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){const s=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let o=0,a=t.length;o<a;o++){const l=t[o];if(!l.options.isWholeLine)continue;const c='<div class="cdr '+l.options.className+'" style="left:0;width:100%;"></div>',u=Math.max(l.range.startLineNumber,s),d=Math.min(l.range.endLineNumber,r);for(let h=u;h<=d;h++){const g=h-s;n[g]+=c}}}_renderNormalDecorations(e,t,n){const s=e.visibleRange.startLineNumber;let r=null,o=!1,a=null,l=!1;for(let c=0,u=t.length;c<u;c++){const d=t[c];if(d.options.isWholeLine)continue;const h=d.options.className,g=!!d.options.showIfCollapsed;let p=d.range;if(g&&p.endColumn===1&&p.endLineNumber!==p.startLineNumber&&(p=new J(p.startLineNumber,p.startColumn,p.endLineNumber-1,this._context.viewModel.getLineMaxColumn(p.endLineNumber-1))),r===h&&o===g&&J.areIntersectingOrTouching(a,p)){a=J.plusRange(a,p);continue}r!==null&&this._renderNormalDecoration(e,a,r,l,o,s,n),r=h,o=g,a=p,l=d.options.shouldFillLineOnLineBreak??!1}r!==null&&this._renderNormalDecoration(e,a,r,l,o,s,n)}_renderNormalDecoration(e,t,n,s,r,o,a){const l=e.linesVisibleRangesForRange(t,n==="findMatch");if(l)for(let c=0,u=l.length;c<u;c++){const d=l[c];if(d.outsideRenderedLine)continue;const h=d.lineNumber-o;if(r&&d.ranges.length===1){const g=d.ranges[0];if(g.width<this._typicalHalfwidthCharacterWidth){const p=Math.round(g.left+g.width/2),_=Math.max(0,Math.round(p-this._typicalHalfwidthCharacterWidth/2));d.ranges[0]=new FA(_,this._typicalHalfwidthCharacterWidth)}}for(let g=0,p=d.ranges.length;g<p;g++){const _=s&&d.continuesOnNextLine&&p===1,v=d.ranges[g],y='<div class="cdr '+n+'" style="left:'+String(v.left)+"px;width:"+(_?"100%;":String(v.width)+"px;")+'"></div>';a[h]+=y}}}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class wet extends Ta{constructor(e,t,n,s){super(e);const r=this._context.configuration.options,o=r.get(104),a=r.get(75),l=r.get(40),c=r.get(107),u={listenOnDomNode:n.domNode,className:"editor-scrollable "+N8(e.theme.type),useShadows:!1,lazyRender:!0,vertical:o.vertical,horizontal:o.horizontal,verticalHasArrows:o.verticalHasArrows,horizontalHasArrows:o.horizontalHasArrows,verticalScrollbarSize:o.verticalScrollbarSize,verticalSliderSize:o.verticalSliderSize,horizontalScrollbarSize:o.horizontalScrollbarSize,horizontalSliderSize:o.horizontalSliderSize,handleMouseWheel:o.handleMouseWheel,alwaysConsumeMouseWheel:o.alwaysConsumeMouseWheel,arrowSize:o.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:o.scrollByPage};this.scrollbar=this._register(new dA(t.domNode,u,this._context.viewLayout.getScrollable())),bu.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=pn(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const d=(h,g,p)=>{const _={};{const v=h.scrollTop;v&&(_.scrollTop=this._context.viewLayout.getCurrentScrollTop()+v,h.scrollTop=0)}if(p){const v=h.scrollLeft;v&&(_.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+v,h.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(_,1)};this._register(ge(n.domNode,"scroll",h=>d(n.domNode,!0,!0))),this._register(ge(t.domNode,"scroll",h=>d(t.domNode,!0,!1))),this._register(ge(s.domNode,"scroll",h=>d(s.domNode,!0,!1))),this._register(ge(this.scrollbarDomNode.domNode,"scroll",h=>d(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(146);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(73).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(104)||e.hasChanged(75)||e.hasChanged(40)){const t=this._context.configuration.options,n=t.get(104),s=t.get(75),r=t.get(40),o=t.get(107),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:s,fastScrollSensitivity:r,scrollPredominantAxis:o};this.scrollbar.updateOptions(a)}return e.hasChanged(146)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+N8(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}class HF{constructor(e,t,n,s,r){this.startLineNumber=e,this.endLineNumber=t,this.className=n,this.tooltip=s,this._decorationToRenderBrand=void 0,this.zIndex=r??0}}class Cet{constructor(e,t,n){this.className=e,this.zIndex=t,this.tooltip=n}}class ket{constructor(){this.decorations=[]}add(e){this.decorations.push(e)}getDecorations(){return this.decorations}}class mpe extends F1{_render(e,t,n){const s=[];for(let a=e;a<=t;a++){const l=a-e;s[l]=new ket}if(n.length===0)return s;n.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let r=null,o=0;for(let a=0,l=n.length;a<l;a++){const c=n[a],u=c.className,d=c.zIndex;let h=Math.max(c.startLineNumber,e)-e;const g=Math.min(c.endLineNumber,t)-e;r===u?(h=Math.max(o+1,h),o=Math.max(o,g)):(r=u,o=g);for(let p=h;p<=o;p++)s[p].add(new Cet(u,d,c.tooltip))}return s}}class xet extends Ta{constructor(e){super(e),this._widgets={},this._context=e;const t=this._context.configuration.options,n=t.get(146);this.domNode=pn(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._glyphMarginDecorationLaneCount=n.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(146);return this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._glyphMarginDecorationLaneCount=n.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){const t=pn(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference.lane===t.lane&&n.preference.zIndex===t.zIndex&&J.equalsRange(n.preference.range,t.range)?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets[t]){const s=this._widgets[t].domNode.domNode;delete this._widgets[t],s.remove(),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){var o;const n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,r=e.getDecorationsInViewport();for(const a of r){const l=a.options.glyphMarginClassName;if(!l)continue;const c=Math.max(a.range.startLineNumber,n),u=Math.min(a.range.endLineNumber,s),d=((o=a.options.glyphMargin)==null?void 0:o.position)??Dm.Center,h=a.options.zIndex??0;for(let g=c;g<=u;g++){const p=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new ue(g,0)),_=this._context.viewModel.glyphLanes.getLanesAtLine(p.lineNumber).indexOf(d);t.push(new Eet(g,_,h,l))}}}_collectWidgetBasedGlyphRenderRequest(e,t){const n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(const r of Object.values(this._widgets)){const o=r.preference.range,{startLineNumber:a,endLineNumber:l}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(J.lift(o));if(!a||!l||l<n||a>s)continue;const c=Math.max(a,n),u=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new ue(c,0)),d=this._context.viewModel.glyphLanes.getLanesAtLine(u.lineNumber).indexOf(r.preference.lane);t.push(new Tet(c,d,r.preference.zIndex,r))}}_collectSortedGlyphRenderRequests(e){const t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((n,s)=>n.lineNumber===s.lineNumber?n.laneIndex===s.laneIndex?n.zIndex===s.zIndex?s.type===n.type?n.type===0&&s.type===0?n.className<s.className?-1:1:0:s.type-n.type:s.zIndex-n.zIndex:n.laneIndex-s.laneIndex:n.lineNumber-s.lineNumber),t}prepareRender(e){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(const s of Object.values(this._widgets))s.renderInfo=null;const t=new bf(this._collectSortedGlyphRenderRequests(e)),n=[];for(;t.length>0;){const s=t.peek();if(!s)break;const r=t.takeWhile(a=>a.lineNumber===s.lineNumber&&a.laneIndex===s.laneIndex);if(!r||r.length===0)break;const o=r[0];if(o.type===0){const a=[];for(const l of r){if(l.zIndex!==o.zIndex||l.type!==o.type)break;(a.length===0||a[a.length-1]!==l.className)&&a.push(l.className)}n.push(o.accept(a.join(" ")))}else o.widget.renderInfo={lineNumber:o.lineNumber,laneIndex:o.laneIndex}}this._decorationGlyphsToRender=n}render(e){if(!this._glyphMargin){for(const n of Object.values(this._widgets))n.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;){const n=this._managedDomNodes.pop();n==null||n.domNode.remove()}return}const t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const n of Object.values(this._widgets))if(!n.renderInfo)n.domNode.setDisplay("none");else{const s=e.viewportData.relativeVerticalOffset[n.renderInfo.lineNumber-e.viewportData.startLineNumber],r=this._glyphMarginLeft+n.renderInfo.laneIndex*this._lineHeight;n.domNode.setDisplay("block"),n.domNode.setTop(s),n.domNode.setLeft(r),n.domNode.setWidth(t),n.domNode.setHeight(this._lineHeight)}for(let n=0;n<this._decorationGlyphsToRender.length;n++){const s=this._decorationGlyphsToRender[n],r=e.viewportData.relativeVerticalOffset[s.lineNumber-e.viewportData.startLineNumber],o=this._glyphMarginLeft+s.laneIndex*this._lineHeight;let a;n<this._managedDomNodes.length?a=this._managedDomNodes[n]:(a=pn(document.createElement("div")),this._managedDomNodes.push(a),this.domNode.appendChild(a)),a.setClassName("cgmr codicon "+s.combinedClassName),a.setPosition("absolute"),a.setTop(r),a.setLeft(o),a.setWidth(t),a.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;){const n=this._managedDomNodes.pop();n==null||n.domNode.remove()}}}class Eet{constructor(e,t,n,s){this.lineNumber=e,this.laneIndex=t,this.zIndex=n,this.className=s,this.type=0}accept(e){return new Let(this.lineNumber,this.laneIndex,e)}}class Tet{constructor(e,t,n,s){this.lineNumber=e,this.laneIndex=t,this.zIndex=n,this.widget=s,this.type=1}}class Let{constructor(e,t,n){this.lineNumber=e,this.laneIndex=t,this.combinedClassName=n}}class Iet extends F1{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,n=t.get(147),s=t.get(50);this._spaceWidth=s.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(147),s=t.get(50);return this._spaceWidth=s.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*s.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),!0}onCursorStateChanged(e){var s;const n=e.selections[0].getPosition();return(s=this._primaryPosition)!=null&&s.equals(n)?!1:(this._primaryPosition=n,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var l,c;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=e.scrollWidth,r=this._primaryPosition,o=this.getGuidesByLine(t,Math.min(n+1,this._context.viewModel.getLineCount()),r),a=[];for(let u=t;u<=n;u++){const d=u-t,h=o[d];let g="";const p=((l=e.visibleRangeForPosition(new ue(u,1)))==null?void 0:l.left)??0;for(const _ of h){const v=_.column===-1?p+(_.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new ue(u,_.column)).left;if(v>s||this._maxIndentLeft>0&&v>this._maxIndentLeft)break;const y=_.horizontalLine?_.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",w=_.horizontalLine?(((c=e.visibleRangeForPosition(new ue(u,_.horizontalLine.endColumn)))==null?void 0:c.left)??v+this._spaceWidth)-v:this._spaceWidth;g+=`<div class="core-guide ${_.className} ${y}" style="left:${v}px;width:${w}px"></div>`}a[d]=g}this._renderResult=a}getGuidesByLine(e,t,n){const s=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?y0.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?y0.EnabledForActive:y0.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,r=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let o=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&n){const d=this._context.viewModel.getActiveIndentGuide(n.lineNumber,e,t);o=d.startLineNumber,a=d.endLineNumber,l=d.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),u=[];for(let d=e;d<=t;d++){const h=new Array;u.push(h);const g=s?s[d-e]:[],p=new bf(g),_=r?r[d-e]:0;for(let v=1;v<=_;v++){const y=(v-1)*c+1,w=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||g.length===0)&&o<=d&&d<=a&&v===l;h.push(...p.takeWhile(k=>k.visibleColumn<y)||[]);const x=p.peek();(!x||x.visibleColumn!==y||x.horizontalLine)&&h.push(new a0(y,-1,`core-guide-indent lvl-${(v-1)%30}`+(w?" indent-active":""),null,-1,-1))}h.push(...p.takeWhile(v=>!0)||[])}return u}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}function M_(i){if(!(i&&i.isTransparent()))return i}Nf((i,e)=>{const t=[{bracketColor:Uge,guideColor:NKe,guideColorActive:FKe},{bracketColor:zge,guideColor:RKe,guideColorActive:BKe},{bracketColor:jge,guideColor:AKe,guideColorActive:VKe},{bracketColor:$ge,guideColor:PKe,guideColorActive:WKe},{bracketColor:qge,guideColor:MKe,guideColorActive:HKe},{bracketColor:Kge,guideColor:OKe,guideColorActive:UKe}],n=new ime,s=[{indentColor:tx,indentColorActive:nx},{indentColor:dKe,indentColorActive:pKe},{indentColor:hKe,indentColorActive:_Ke},{indentColor:fKe,indentColorActive:vKe},{indentColor:gKe,indentColorActive:bKe},{indentColor:mKe,indentColorActive:yKe}],r=t.map(a=>{const l=i.getColor(a.bracketColor),c=i.getColor(a.guideColor),u=i.getColor(a.guideColorActive),d=M_(M_(c)??(l==null?void 0:l.transparent(.3))),h=M_(M_(u)??l);if(!(!d||!h))return{guideColor:d,guideColorActive:h}}).filter(Ub),o=s.map(a=>{const l=i.getColor(a.indentColor),c=i.getColor(a.indentColorActive),u=M_(l),d=M_(c);if(!(!u||!d))return{indentColor:u,indentColorActive:d}}).filter(Ub);if(r.length>0){for(let a=0;a<30;a++){const l=r[a%r.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${n.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${n.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${n.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(o.length>0){for(let a=0;a<30;a++){const l=o[a%o.length];e.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${a} { --indent-color: ${l.indentColor}; --indent-color-active: ${l.indentColorActive}; }`)}e.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),e.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});class A6{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class Det{constructor(){this._currentVisibleRange=new J(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class Net{constructor(e,t,n,s,r,o,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=n,this.endColumn=s,this.startScrollTop=r,this.stopScrollTop=o,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}class Ret{constructor(e,t,n,s,r){this.minimalReveal=e,this.selections=t,this.startScrollTop=n,this.stopScrollTop=s,this.scrollType=r,this.type="selections";let o=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){const u=t[l];o=Math.min(o,u.startLineNumber),a=Math.max(a,u.endLineNumber)}this.minLineNumber=o,this.maxLineNumber=a}}const bR=class bR extends Ta{constructor(e,t){super(e);const n=this._context.configuration,s=this._context.configuration.options,r=s.get(50),o=s.get(147);this._lineHeight=s.get(67),this._typicalHalfwidthCharacterWidth=r.typicalHalfwidthCharacterWidth,this._isViewportWrapping=o.isViewportWrapping,this._revealHorizontalRightPadding=s.get(101),this._cursorSurroundingLines=s.get(29),this._cursorSurroundingLinesStyle=s.get(30),this._canUseLayerHinting=!s.get(32),this._viewLineOptions=new Bee(n,this._context.theme.type),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new hpe({createLine:()=>new Bh(this._viewLineOptions)}),this.domNode=this._visibleLines.domNode,bu.write(this.domNode,8),this.domNode.setClassName(`view-lines ${gb}`),Nr(this.domNode,r),this._maxLineWidth=0,this._asyncUpdateLineWidths=new so(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new so(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new Det,this._horizontalRevealRequest=null,this._stickyScrollEnabled=s.get(116).enabled,this._maxNumberStickyLines=s.get(116).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(147)&&(this._maxLineWidth=0);const t=this._context.configuration.options,n=t.get(50),s=t.get(147);return this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=t.get(101),this._cursorSurroundingLines=t.get(29),this._cursorSurroundingLinesStyle=t.get(30),this._canUseLayerHinting=!t.get(32),this._stickyScrollEnabled=t.get(116).enabled,this._maxNumberStickyLines=t.get(116).maxLineCount,Nr(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(146)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new Bee(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const n=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=n;r<=s;r++)this._visibleLines.getVisibleLine(r).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let s=!1;for(let r=t;r<=n;r++)s=this._visibleLines.getVisibleLine(r).onSelectionChanged()||s;return s}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=t;s<=n;s++)this._visibleLines.getVisibleLine(s).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new Net(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new Ret(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const r=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(n,r),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const n=this._getViewLineDomNode(e);if(n===null)return null;const s=this._getLineNumberFor(n);if(s===-1||s<1||s>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(s)===1)return new ue(s,1);const r=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();if(s<r||s>o)return null;let a=this._visibleLines.getVisibleLine(s).getColumnOfNodeOffset(e,t);const l=this._context.viewModel.getLineMinColumn(s);return a<l&&(a=l),new ue(s,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===Bh.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=t;s<=n;s++){const r=this._visibleLines.getVisibleLine(s);if(e===r.getDomNode())return s}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();if(e<t||e>n)return-1;const s=new A6(this.domNode.domNode,this._textRangeRestingSpot),r=this._visibleLines.getVisibleLine(e).getWidth(s);return this._updateLineWidthsSlowIfDomDidLayout(s),r}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const n=e.endLineNumber,s=J.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!s)return null;const r=[];let o=0;const a=new A6(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new ue(s.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),u=this._visibleLines.getEndLineNumber();for(let d=s.startLineNumber;d<=s.endLineNumber;d++){if(d<c||d>u)continue;const h=d===s.startLineNumber?s.startColumn:1,g=d!==s.endLineNumber,p=g?this._context.viewModel.getLineMaxColumn(d):s.endColumn,_=this._visibleLines.getVisibleLine(d).getVisibleRangesForRange(d,h,p,a);if(_){if(t&&d<n){const v=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new ue(d+1,1)).lineNumber,v!==l&&(_.ranges[_.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}r[o++]=new fJe(_.outsideRenderedLine,d,FA.from(_.ranges),g)}}return this._updateLineWidthsSlowIfDomDidLayout(a),o===0?null:r}_visibleRangesForLineRange(e,t,n){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;const s=new A6(this.domNode.domNode,this._textRangeRestingSpot),r=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,s);return this._updateLineWidthsSlowIfDomDidLayout(s),r}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new gJe(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let s=1,r=!0;for(let o=t;o<=n;o++){const a=this._visibleLines.getVisibleLine(o);if(e&&!a.getWidthIsFast()){r=!1;continue}s=Math.max(s,a.getWidth(null))}return r&&t===1&&n===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(s),r}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const n=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=n;r<=s;r++){const o=this._visibleLines.getVisibleLine(r);if(o.needsMonospaceFontCheck()){const a=o.getWidth(null);a>t&&(t=a,e=r)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let r=n;r<=s;r++)this._visibleLines.getVisibleLine(r).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const s=this._computeScrollLeftToReveal(n);s&&(this._isViewportWrapping||this._ensureMaxLineWidth(s.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:s.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),ia&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const n=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();for(let r=n;r<=s;r++)if(this._visibleLines.getVisibleLine(r).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,s,r,o){const a=e.top,l=e.height,c=a+l;let u,d,h;if(r&&r.length>0){let y=r[0].startLineNumber,w=r[0].endLineNumber;for(let x=1,k=r.length;x<k;x++){const T=r[x];y=Math.min(y,T.startLineNumber),w=Math.max(w,T.endLineNumber)}u=!1,d=this._context.viewLayout.getVerticalOffsetForLineNumber(y),h=this._context.viewLayout.getVerticalOffsetForLineNumber(w)+this._lineHeight}else if(s)u=!0,d=this._context.viewLayout.getVerticalOffsetForLineNumber(s.startLineNumber),h=this._context.viewLayout.getVerticalOffsetForLineNumber(s.endLineNumber)+this._lineHeight;else return-1;const g=(t==="mouse"||n)&&this._cursorSurroundingLinesStyle==="default";let p=0,_=0;if(g)n||(p=this._lineHeight);else{const y=l/this._lineHeight,w=Math.max(this._cursorSurroundingLines,this._stickyScrollEnabled?this._maxNumberStickyLines:0),x=Math.min(y/2,w);p=x*this._lineHeight,_=Math.max(0,x-1)*this._lineHeight}n||(o===0||o===4)&&(_+=this._lineHeight),d-=p,h+=_;let v;if(h-d>l){if(!u)return-1;v=d}else if(o===5||o===6)if(o===6&&a<=d&&h<=c)v=a;else{const y=Math.max(5*this._lineHeight,l*.2),w=d-y,x=h-l;v=Math.max(x,w)}else if(o===1||o===2)if(o===2&&a<=d&&h<=c)v=a;else{const y=(d+h)/2;v=Math.max(0,y-l/2)}else v=this._computeMinimumScrolling(a,c,d,h,o===3,o===4);return v}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),n=this._context.configuration.options.get(146),s=t.left,r=s+t.width-n.verticalScrollbarWidth;let o=1073741824,a=0;if(e.type==="range"){const c=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!c)return null;for(const u of c.ranges)o=Math.min(o,Math.round(u.left)),a=Math.max(a,Math.round(u.left+u.width))}else for(const c of e.selections){if(c.startLineNumber!==c.endLineNumber)return null;const u=this._visibleRangesForLineRange(c.startLineNumber,c.startColumn,c.endColumn);if(!u)return null;for(const d of u.ranges)o=Math.min(o,Math.round(d.left)),a=Math.max(a,Math.round(d.left+d.width))}return e.minimalReveal||(o=Math.max(0,o-bR.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),e.type==="selections"&&a-o>t.width?null:{scrollLeft:this._computeMinimumScrolling(s,r,o,a),maxHorizontalOffset:a}}_computeMinimumScrolling(e,t,n,s,r,o){e=e|0,t=t|0,n=n|0,s=s|0,r=!!r,o=!!o;const a=t-e;if(s-n<a){if(r)return n;if(o)return Math.max(0,s-a);if(n<e)return n;if(s>t)return Math.max(0,s-a)}else return n;return e}};bR.HORIZONTAL_EXTRA_PX=30;let UF=bR;class Aet extends mpe{constructor(e){super(),this._context=e;const n=this._context.configuration.options.get(146);this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const n=this._context.configuration.options.get(146);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let s=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.linesDecorationsClassName,c=a.options.zIndex;l&&(n[s++]=new HF(a.range.startLineNumber,a.range.endLineNumber,l,a.options.linesDecorationsTooltip??null,c));const u=a.options.firstLineDecorationClassName;u&&(n[s++]=new HF(a.range.startLineNumber,a.range.startLineNumber,u,a.options.linesDecorationsTooltip??null,c))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=this._render(t,n,this._getDecorations(e)),r=this._decorationsLeft.toString(),o=this._decorationsWidth.toString(),a='" style="left:'+r+"px;width:"+o+'px;"></div>',l=[];for(let c=t;c<=n;c++){const u=c-t,d=s[u].getDecorations();let h="";for(const g of d){let p='<div class="cldr '+g.className;g.tooltip!==null&&(p+='" title="'+g.tooltip),p+=a,h+=p}l[u]=h}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class Pet extends mpe{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let s=0;for(let r=0,o=t.length;r<o;r++){const a=t[r],l=a.options.marginClassName,c=a.options.zIndex;l&&(n[s++]=new HF(a.range.startLineNumber,a.range.endLineNumber,l,null,c))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,s=this._render(t,n,this._getDecorations(e)),r=[];for(let o=t;o<=n;o++){const a=o-t,l=s[a].getDecorations();let c="";for(const u of l)c+='<div class="cmdr '+u.className+'" style=""></div>';r[a]=c}this._renderResult=r}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}const kg=class kg{constructor(e,t,n,s){this._rgba8Brand=void 0,this.r=kg._clamp(e),this.g=kg._clamp(t),this.b=kg._clamp(n),this.a=kg._clamp(s)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}};kg.Empty=new kg(0,0,0,0);let af=kg;const yR=class yR extends be{static getInstance(){return this._INSTANCE||(this._INSTANCE=new yR),this._INSTANCE}constructor(){super(),this._onDidChange=new se,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(es.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){const e=es.getColorMap();if(!e){this._colors=[af.Empty],this._backgroundIsLight=!0;return}this._colors=[af.Empty];for(let n=1;n<e.length;n++){const s=e[n].rgba;this._colors[n]=new af(s.r,s.g,s.b,Math.round(s.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}};yR._INSTANCE=null;let uN=yR;const Met=(()=>{const i=[];for(let e=32;e<=126;e++)i.push(e);return i.push(65533),i})(),Oet=(i,e)=>(i-=32,i<0||i>96?e<=2?(i+96)%96:95:i);class Zk{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=Zk.soften(e,12/15),this.charDataLight=Zk.soften(e,50/60)}static soften(e,t){const n=new Uint8ClampedArray(e.length);for(let s=0,r=e.length;s<r;s++)n[s]=tD(e[s]*t);return n}renderChar(e,t,n,s,r,o,a,l,c,u,d){const h=1*this.scale,g=2*this.scale,p=d?1:g;if(t+h>e.width||n+p>e.height){console.warn("bad render request outside image data");return}const _=u?this.charDataLight:this.charDataNormal,v=Oet(s,c),y=e.width*4,w=a.r,x=a.g,k=a.b,T=r.r-w,R=r.g-x,L=r.b-k,I=Math.max(o,l),A=e.data;let B=v*h*g,V=n*y+t*4;for(let U=0;U<p;U++){let W=V;for(let G=0;G<h;G++){const Z=_[B++]/255*(o/255);A[W++]=w+T*Z,A[W++]=x+R*Z,A[W++]=k+L*Z,A[W++]=I}V+=y}}blockRenderChar(e,t,n,s,r,o,a,l){const c=1*this.scale,u=2*this.scale,d=l?1:u;if(t+c>e.width||n+d>e.height){console.warn("bad render request outside image data");return}const h=e.width*4,g=.5*(r/255),p=o.r,_=o.g,v=o.b,y=s.r-p,w=s.g-_,x=s.b-v,k=p+y*g,T=_+w*g,R=v+x*g,L=Math.max(r,a),I=e.data;let A=n*h+t*4;for(let B=0;B<d;B++){let V=A;for(let U=0;U<c;U++)I[V++]=k,I[V++]=T,I[V++]=R,I[V++]=L;A+=h}}}const Yee={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},Qee=i=>{const e=new Uint8ClampedArray(i.length/2);for(let t=0;t<i.length;t+=2)e[t>>1]=Yee[i[t]]<<4|Yee[i[t+1]]&15;return e},Xee={1:jb(()=>Qee("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:jb(()=>Qee("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class fS{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return Xee[e]?n=new Zk(Xee[e](),e):n=fS.createFromSampleData(fS.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",n.fillStyle="#ffffff",n.font=`bold 16px ${e}`,n.textBaseline="middle";let s=0;for(const r of Met)n.fillText(String.fromCharCode(r),s,16/2),s+=10;return n.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const s=fS._downsample(e,t);return new Zk(s,t)}static _downsampleChar(e,t,n,s,r){const o=1*r,a=2*r;let l=s,c=0;for(let u=0;u<a;u++){const d=u/a*16,h=(u+1)/a*16;for(let g=0;g<o;g++){const p=g/o*10,_=(g+1)/o*10;let v=0,y=0;for(let x=d;x<h;x++){const k=t+Math.floor(x)*3840,T=1-(x-Math.floor(x));for(let R=p;R<_;R++){const L=1-(R-Math.floor(R)),I=k+Math.floor(R)*4,A=L*T;y+=A,v+=e[I]*e[I+3]/255*A}}const w=v/y;c=Math.max(c,w),n[l++]=tD(w)}}return c}static _downsample(e,t){const n=2*t*1*t,s=n*96,r=new Uint8ClampedArray(s);let o=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,r,o,t)),o+=n,a+=10*4;if(l>0){const c=255/l;for(let u=0;u<s;u++)r[u]*=c}return r}}const Fet=Sa?'"Segoe WPC", "Segoe UI", sans-serif':rn?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif',Bet=140,Vet=2;class mb{constructor(e,t,n){const s=e.options,r=s.get(144),o=s.get(146),a=o.minimap,l=s.get(50),c=s.get(73);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=s.get(106),this.paddingTop=s.get(84).top,this.paddingBottom=s.get(84).bottom,this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=r,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=s.get(67),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=o.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.sectionHeaderFontFamily=Fet,this.sectionHeaderFontSize=c.sectionHeaderFontSize*r,this.sectionHeaderLetterSpacing=c.sectionHeaderLetterSpacing,this.sectionHeaderFontColor=mb._getSectionHeaderColor(t,n.getColor(1)),this.charRenderer=jb(()=>fS.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=mb._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=mb._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const n=e.getColor(rUe);return n?new af(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(oUe);return t?af._clamp(Math.round(255*t.rgba.a)):255}static _getSectionHeaderColor(e,t){const n=e.getColor($2);return n?new af(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.sectionHeaderFontSize===e.sectionHeaderFontSize&&this.sectionHeaderLetterSpacing===e.sectionHeaderLetterSpacing&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class gS{constructor(e,t,n,s,r,o,a,l,c){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=s,this.sliderTop=r,this.sliderHeight=o,this.topPaddingLineCount=a,this.startLineNumber=l,this.endLineNumber=c}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){const t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumber,e.endLineNumber);return t>n?null:[t,n]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,n,s,r,o,a,l,c,u,d){const h=e.pixelRatio,g=e.minimapLineHeight,p=Math.floor(e.canvasInnerHeight/g),_=e.lineHeight;if(e.minimapHeightIsEditorHeight){let R=l*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(R+=Math.max(0,r-e.lineHeight-e.paddingBottom));const L=Math.max(1,Math.floor(r*r/R)),I=Math.max(0,e.minimapHeight-L),A=I/(u-r),B=c*A,V=I>0,U=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),W=Math.floor(e.paddingTop/e.lineHeight);return new gS(c,u,V,A,B,L,W,1,Math.min(a,U))}let v;if(o&&n!==a){const R=n-t+1;v=Math.floor(R*g/h)}else{const R=r/_;v=Math.floor(R*g/h)}const y=Math.floor(e.paddingTop/_);let w=Math.floor(e.paddingBottom/_);if(e.scrollBeyondLastLine){const R=r/_;w=Math.max(w,R-1)}let x;if(w>0){const R=r/_;x=(y+a+w-R-1)*g/h}else x=Math.max(0,(y+a)*g/h-v);x=Math.min(e.minimapHeight-v,x);const k=x/(u-r),T=c*k;if(p>=y+a+w){const R=x>0;return new gS(c,u,R,k,T,v,y,1,a)}else{let R;t>1?R=t+y:R=Math.max(1,c/_);let L,I=Math.max(1,Math.floor(R-T*h/g));I<y?(L=y-I+1,I=1):(L=0,I=Math.max(1,I-y)),d&&d.scrollHeight===u&&(d.scrollTop>c&&(I=Math.min(I,d.startLineNumber),L=Math.max(L,d.topPaddingLineCount)),d.scrollTop<c&&(I=Math.max(I,d.startLineNumber),L=Math.min(L,d.topPaddingLineCount)));const A=Math.min(a,I-L+p-1),B=(c-s)/_;let V;return c>=e.paddingTop?V=(t-I+L+B)*g/h:V=c/e.paddingTop*(L+B)*g/h,new gS(c,u,!0,k,V,v,L,I,A)}}}const wR=class wR{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}};wR.INVALID=new wR(-1);let dN=wR;class Zee{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new dpe({createLine:()=>dN.INVALID}),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;const n=this._renderedLines._get().lines;for(let s=0,r=n.length;s<r;s++)if(n[s].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class Pz{constructor(e,t,n,s){this._backgroundFillData=Pz._createBackgroundFillData(t,n,s),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){const s=n.r,r=n.g,o=n.b,a=n.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let u=0;u<t;u++)for(let d=0;d<e;d++)l[c]=s,l[c+1]=r,l[c+2]=o,l[c+3]=a,c+=4;return l}}class Jk{static compute(e,t,n){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const{minimapLineCount:s}=Kv.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),r=t/s,o=r/2;if(!n||n.minimapLines.length===0){const v=[];if(v[0]=1,s>1){for(let y=0,w=s-1;y<w;y++)v[y]=Math.round(y*r+o);v[s-1]=t}return[new Jk(r,v),[]]}const a=n.minimapLines,l=a.length,c=[];let u=0,d=0,h=1;const g=10;let p=[],_=null;for(let v=0;v<s;v++){const y=Math.max(h,Math.round(v*r)),w=Math.max(y,Math.round((v+1)*r));for(;u<l&&a[u]<y;){if(p.length<g){const k=u+1+d;_&&_.type==="deleted"&&_._oldIndex===u-1?_.deleteToLineNumber++:(_={type:"deleted",_oldIndex:u,deleteFromLineNumber:k,deleteToLineNumber:k},p.push(_)),d--}u++}let x;if(u<l&&a[u]<=w)x=a[u],u++;else if(v===0?x=1:v+1===s?x=t:x=Math.round(v*r+o),p.length<g){const k=u+1+d;_&&_.type==="inserted"&&_._i===v-1?_.insertToLineNumber++:(_={type:"inserted",_i:v,insertFromLineNumber:k,insertToLineNumber:k},p.push(_)),d++}c[v]=x,h=x}if(p.length<g)for(;u<l;){const v=u+1+d;_&&_.type==="deleted"&&_._oldIndex===u-1?_.deleteToLineNumber++:(_={type:"deleted",_oldIndex:u,deleteFromLineNumber:v,deleteToLineNumber:v},p.push(_)),d--,u++}else p=[{type:"flush"}];return[new Jk(r,c),p]}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let s=this.modelLineToMinimapLine(t)-1;for(;s+1<this.minimapLines.length&&this.minimapLines[s+1]<=t;)s++;if(n===s){const r=this.minimapLines[n];if(r<e||r>t)return null}return[n+1,s+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),s=this.modelLineToMinimapLine(t);return e!==t&&s===n&&(s===this.minimapLines.length?n>1&&n--:s++),[n,s]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let n=this.minimapLines.length,s=0;for(let r=this.minimapLines.length-1;r>=0&&!(this.minimapLines[r]<e.fromLineNumber);r--)this.minimapLines[r]<=e.toLineNumber?(this.minimapLines[r]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,r),s=Math.max(s,r)):this.minimapLines[r]-=t;return[n,s]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}class Wet extends Ta{constructor(e){super(e),this._sectionHeaderCache=new j2(10,1.5),this.tokensColorTracker=uN.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new mb(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=Jk.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new pv(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new mb(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const n of e.ranges){const s=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);s&&t.push({fromLineNumber:s[0],toLineNumber:s[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));const s={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(s)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,n]=Jk.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const s of n)switch(s.type){case"deleted":this._actual.onLinesDeleted(s.deleteFromLineNumber,s.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(s.insertFromLineNumber,s.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){const s=[];for(let r=0,o=t-e+1;r<o;r++)n[r]?s[r]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+r-1]):s[r]=null;return s}return this._context.viewModel.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new Gn(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){const n=this._getMinimapDecorationsInViewport(e,t).filter(s=>{var r;return!((r=s.options.minimap)!=null&&r.sectionHeaderStyle)});if(this._samplingState){const s=[];for(const r of n){if(!r.options.minimap)continue;const o=r.range,a=this._samplingState.modelLineToMinimapLine(o.startLineNumber),l=this._samplingState.modelLineToMinimapLine(o.endLineNumber);s.push(new Zme(new J(a,o.startColumn,l,o.endColumn),r.options))}return s}return n}getSectionHeaderDecorationsInViewport(e,t){const n=this.options.minimapLineHeight,r=this.options.sectionHeaderFontSize/n;return e=Math.floor(Math.max(1,e-r)),this._getMinimapDecorationsInViewport(e,t).filter(o=>{var a;return!!((a=o.options.minimap)!=null&&a.sectionHeaderStyle)})}_getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){const s=this._samplingState.minimapLines[e-1],r=this._samplingState.minimapLines[t-1];n=new J(s,1,r,this._context.viewModel.getLineMaxColumn(r))}else n=new J(e,1,t,this._context.viewModel.getLineMaxColumn(t));return this._context.viewModel.getMinimapDecorationsInRange(n)}getSectionHeaderText(e,t){var o;const n=(o=e.options.minimap)==null?void 0:o.sectionHeaderText;if(!n)return null;const s=this._sectionHeaderCache.get(n);if(s)return s;const r=t(n);return this._sectionHeaderCache.set(n,r),r}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new J(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class pv extends be{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(RZ),this._domNode=pn(document.createElement("div")),bu.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=pn(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=pn(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=pn(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=pn(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=pn(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=Vs(this._domNode.domNode,De.POINTER_DOWN,n=>{if(n.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.button===0&&this._lastRenderData){const c=Nl(this._slider.domNode),u=c.top+c.height/2;this._startSliderDragging(n,u,this._lastRenderData.renderedLayout)}return}const r=this._model.options.minimapLineHeight,o=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.offsetY;let l=Math.floor(o/r)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new uA,this._sliderPointerDownListener=Vs(this._slider.domNode,De.POINTER_DOWN,n=>{n.preventDefault(),n.stopPropagation(),n.button===0&&this._lastRenderData&&this._startSliderDragging(n,n.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=To.addTarget(this._domNode.domNode),this._sliderTouchStartListener=ge(this._domNode.domNode,ei.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=ge(this._domNode.domNode,ei.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=Vs(this._domNode.domNode,ei.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n){if(!e.target||!(e.target instanceof Element))return;const s=e.pageX;this._slider.toggleClassName("active",!0);const r=(o,a)=>{const l=Nl(this._domNode.domNode),c=Math.min(Math.abs(a-s),Math.abs(a-l.left),Math.abs(a-l.left-l.width));if(Sa&&c>Bet){this._model.setScrollTop(n.scrollTop);return}const u=o-t;this._model.setScrollTop(n.getDesiredScrollTopFromDelta(u))};e.pageY!==t&&r(e.pageY,s),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>r(o.pageY,o.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new Pz(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){var n;return(n=this._lastRenderData)==null||n.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var n;return(n=this._lastRenderData)==null||n.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(RZ),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const n=gS.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(J.compareRangesUsingStarts);const n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((h,g)=>(h.options.zIndex||0)-(g.options.zIndex||0));const{canvasInnerWidth:s,canvasInnerHeight:r}=this._model.options,o=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,s,r);const u=new Jee(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,u,e,o),this._renderDecorationsLineHighlights(c,n,u,e,o);const d=new Jee(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,d,e,o,l,a,s),this._renderDecorationsHighlights(c,n,d,e,o,l,a,s),this._renderSectionHeaders(e)}}_renderSelectionLineHighlights(e,t,n,s,r){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let o=0,a=0;for(const l of t){const c=s.intersectWithViewport(l);if(!c)continue;const[u,d]=c;for(let p=u;p<=d;p++)n.set(p,!0);const h=s.getYForLineNumber(u,r),g=s.getYForLineNumber(d,r);a>=h||(a>o&&e.fillRect(qu,o,e.canvas.width,a-o),o=h),a=g}a>o&&e.fillRect(qu,o,e.canvas.width,a-o)}_renderDecorationsLineHighlights(e,t,n,s,r){const o=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==1)continue;const u=s.intersectWithViewport(l.range);if(!u)continue;const[d,h]=u,g=c.getColor(this._theme.value);if(!g||g.isTransparent())continue;let p=o.get(g.toString());p||(p=g.transparent(.5).toString(),o.set(g.toString(),p)),e.fillStyle=p;for(let _=d;_<=h;_++){if(n.has(_))continue;n.set(_,!0);const v=s.getYForLineNumber(d,r);e.fillRect(qu,v,e.canvas.width,r)}}}_renderSelectionsHighlights(e,t,n,s,r,o,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const u=s.intersectWithViewport(c);if(!u)continue;const[d,h]=u;for(let g=d;g<=h;g++)this.renderDecorationOnLine(e,n,c,this._selectionColor,s,g,r,r,o,a,l)}}_renderDecorationsHighlights(e,t,n,s,r,o,a,l){for(const c of t){const u=c.options.minimap;if(!u)continue;const d=s.intersectWithViewport(c.range);if(!d)continue;const[h,g]=d,p=u.getColor(this._theme.value);if(!(!p||p.isTransparent()))for(let _=h;_<=g;_++)switch(u.position){case 1:this.renderDecorationOnLine(e,n,c.range,p,s,_,r,r,o,a,l);continue;case 2:{const v=s.getYForLineNumber(_,r);this.renderDecoration(e,p,2,v,Vet,r);continue}}}}renderDecorationOnLine(e,t,n,s,r,o,a,l,c,u,d){const h=r.getYForLineNumber(o,l);if(h+a<0||h>this._model.options.canvasInnerHeight)return;const{startLineNumber:g,endLineNumber:p}=n,_=g===o?n.startColumn:1,v=p===o?n.endColumn:this._model.getLineMaxColumn(o),y=this.getXOffsetForPosition(t,o,_,c,u,d),w=this.getXOffsetForPosition(t,o,v,c,u,d);this.renderDecoration(e,s,y,h,w-y,a)}getXOffsetForPosition(e,t,n,s,r,o){if(n===1)return qu;if((n-1)*r>=o)return o;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[qu];let u=qu;for(let d=1;d<c.length+1;d++){const h=c.charCodeAt(d-1),g=h===9?s*r:Tm(h)?2*r:r,p=u+g;if(p>=o){l[d]=o;break}l[d]=p,u=p}e.set(t,l)}return n-1<l.length?l[n-1]:o}renderDecoration(e,t,n,s,r,o){e.fillStyle=t&&t.toString()||"",e.fillRect(n,s,r,o)}_renderSectionHeaders(e){var _;const t=this._model.options.minimapLineHeight,n=this._model.options.sectionHeaderFontSize,s=this._model.options.sectionHeaderLetterSpacing,r=n*1.5,{canvasInnerWidth:o}=this._model.options,a=this._model.options.backgroundColor,l=`rgb(${a.r} ${a.g} ${a.b} / .7)`,c=this._model.options.sectionHeaderFontColor,u=`rgb(${c.r} ${c.g} ${c.b})`,d=u,h=this._decorationsCanvas.domNode.getContext("2d");h.letterSpacing=s+"px",h.font="500 "+n+"px "+this._model.options.sectionHeaderFontFamily,h.strokeStyle=d,h.lineWidth=.2;const g=this._model.getSectionHeaderDecorationsInViewport(e.startLineNumber,e.endLineNumber);g.sort((v,y)=>v.range.startLineNumber-y.range.startLineNumber);const p=pv._fitSectionHeader.bind(null,h,o-qu);for(const v of g){const y=e.getYForLineNumber(v.range.startLineNumber,t)+n,w=y-n,x=w+2,k=this._model.getSectionHeaderText(v,p);pv._renderSectionLabel(h,k,((_=v.options.minimap)==null?void 0:_.sectionHeaderStyle)===2,l,u,o,w,r,y,x)}}static _fitSectionHeader(e,t,n){if(!n)return n;const s="",r=e.measureText(n).width,o=e.measureText(s).width;if(r<=t||r<=o)return n;const a=n.length,l=r/n.length,c=Math.floor((t-o)/l)-1;let u=Math.ceil(c/2);for(;u>0&&/\s/.test(n[u-1]);)--u;return n.substring(0,u)+s+n.substring(a-(c-u))}static _renderSectionLabel(e,t,n,s,r,o,a,l,c,u){t&&(e.fillStyle=s,e.fillRect(0,a,o,l),e.fillStyle=r,e.fillText(t,qu,c)),n&&(e.beginPath(),e.moveTo(0,u),e.lineTo(o,u),e.closePath(),e.stroke())}renderLines(e){const t=e.startLineNumber,n=e.endLineNumber,s=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const Z=this._lastRenderData._get();return new Zee(e,Z.imageData,Z.lines)}const r=this._getBuffer();if(!r)return null;const[o,a,l]=pv._renderUntouchedLines(r,e.topPaddingLineCount,t,n,s,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,n,l),u=this._model.getOptions().tabSize,d=this._model.options.defaultBackgroundColor,h=this._model.options.backgroundColor,g=this._model.options.foregroundAlpha,p=this._model.tokensColorTracker,_=p.backgroundIsLight(),v=this._model.options.renderMinimap,y=this._model.options.charRenderer(),w=this._model.options.fontScale,x=this._model.options.minimapCharWidth,T=(v===1?2:3)*w,R=s>T?Math.floor((s-T)/2):0,L=h.a/255,I=new af(Math.round((h.r-d.r)*L+d.r),Math.round((h.g-d.g)*L+d.g),Math.round((h.b-d.b)*L+d.b),255);let A=e.topPaddingLineCount*s;const B=[];for(let Z=0,ne=n-t+1;Z<ne;Z++)l[Z]&&pv._renderLine(r,I,h.a,_,v,x,p,g,y,A,R,u,c[Z],w,s),B[Z]=new dN(A),A+=s;const V=o===-1?0:o,W=(a===-1?r.height:a)-V;return this._canvas.domNode.getContext("2d").putImageData(r,0,0,0,V,r.width,W),new Zee(e,r,B)}static _renderUntouchedLines(e,t,n,s,r,o){const a=[];if(!o){for(let A=0,B=s-n+1;A<B;A++)a[A]=!0;return[-1,-1,a]}const l=o._get(),c=l.imageData.data,u=l.rendLineNumberStart,d=l.lines,h=d.length,g=e.width,p=e.data,_=(s-n+1)*r*g*4;let v=-1,y=-1,w=-1,x=-1,k=-1,T=-1,R=t*r;for(let A=n;A<=s;A++){const B=A-n,V=A-u,U=V>=0&&V<h?d[V].dy:-1;if(U===-1){a[B]=!0,R+=r;continue}const W=U*g*4,G=(U+r)*g*4,Z=R*g*4,ne=(R+r)*g*4;x===W&&T===Z?(x=G,T=ne):(w!==-1&&(p.set(c.subarray(w,x),k),v===-1&&w===0&&w===k&&(v=x),y===-1&&x===_&&w===k&&(y=w)),w=W,x=G,k=Z,T=ne),a[B]=!1,R+=r}w!==-1&&(p.set(c.subarray(w,x),k),v===-1&&w===0&&w===k&&(v=x),y===-1&&x===_&&w===k&&(y=w));const L=v===-1?-1:v/(g*4),I=y===-1?-1:y/(g*4);return[L,I,a]}static _renderLine(e,t,n,s,r,o,a,l,c,u,d,h,g,p,_){const v=g.content,y=g.tokens,w=e.width-o,x=_===1;let k=qu,T=0,R=0;for(let L=0,I=y.getCount();L<I;L++){const A=y.getEndOffset(L),B=y.getForeground(L),V=a.getColor(B);for(;T<A;T++){if(k>w)return;const U=v.charCodeAt(T);if(U===9){const W=h-(T+R)%h;R+=W-1,k+=W*o}else if(U===32)k+=o;else{const W=Tm(U)?2:1;for(let G=0;G<W;G++)if(r===2?c.blockRenderChar(e,k,u+d,V,l,t,n,x):c.renderChar(e,k,u+d,U,V,l,t,n,p,s,x),k+=o,k>w)return}}}}}class Jee{constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let s=0,r=this._endLineNumber-this._startLineNumber+1;s<r;s++)this._values[s]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}class Het extends Ta{constructor(e,t){super(e),this._viewDomNode=t;const s=this._context.configuration.options.get(146);this._widgets={},this._verticalScrollbarWidth=s.verticalScrollbarWidth,this._minimapWidth=s.minimap.minimapWidth,this._horizontalScrollbarHeight=s.horizontalScrollbarHeight,this._editorHeight=s.height,this._editorWidth=s.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=pn(document.createElement("div")),bu.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=pn(document.createElement("div")),bu.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const n=this._context.configuration.options.get(146);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0}addWidget(e){const t=pn(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),e.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){const n=this._widgets[e.getId()],s=t?t.preference:null,r=t==null?void 0:t.stackOridinal;return n.preference===s&&n.stack===r?(this._updateMaxMinWidth(),!1):(n.preference=s,n.stack=r,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const s=this._widgets[t].domNode.domNode;delete this._widgets[t],s.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){var n,s;let e=0;const t=Object.keys(this._widgets);for(let r=0,o=t.length;r<o;r++){const a=t[r],c=(s=(n=this._widgets[a].widget).getMinContentWidthInPx)==null?void 0:s.call(n);typeof c<"u"&&(e=Math.max(e,c))}this._context.viewLayout.setOverlayWidgetsMinWidth(e)}_renderWidget(e,t){const n=e.domNode;if(e.preference===null){n.setTop("");return}const s=2*this._verticalScrollbarWidth+this._minimapWidth;if(e.preference===0||e.preference===1){if(e.preference===1){const r=n.domNode.clientHeight;n.setTop(this._editorHeight-r-2*this._horizontalScrollbarHeight)}else n.setTop(0);e.stack!==void 0?(n.setTop(t[e.preference]),t[e.preference]+=n.domNode.clientWidth):n.setRight(s)}else if(e.preference===2)n.domNode.style.right="50%",e.stack!==void 0?(n.setTop(t[2]),t[2]+=n.domNode.clientHeight):n.setTop(0);else{const{top:r,left:o}=e.preference;if(this._context.configuration.options.get(42)&&e.widget.allowEditorOverflow){const l=this._viewDomNodeRect;n.setTop(r+l.top),n.setLeft(o+l.left),n.setPosition("fixed")}else n.setTop(r),n.setLeft(o),n.setPosition("absolute")}}prepareRender(e){this._viewDomNodeRect=Nl(this._viewDomNode.domNode)}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets),n=Array.from({length:3},()=>0);t.sort((s,r)=>(this._widgets[s].stack||0)-(this._widgets[r].stack||0));for(let s=0,r=t.length;s<r;s++){const o=t[s];this._renderWidget(this._widgets[o],n)}}}class Uet{constructor(e,t){const n=e.options;this.lineHeight=n.get(67),this.pixelRatio=n.get(144),this.overviewRulerLanes=n.get(83),this.renderBorder=n.get(82);const s=t.getColor(SKe);this.borderColor=s?s.toString():null,this.hideCursor=n.get(59);const r=t.getColor(kA);this.cursorColorSingle=r?r.transparent(.7).toString():null;const o=t.getColor(Wge);this.cursorColorPrimary=o?o.transparent(.7).toString():null;const a=t.getColor(Hge);this.cursorColorSecondary=a?a.transparent(.7).toString():null,this.themeType=t.type;const l=n.get(73),c=l.enabled,u=l.side,d=t.getColor(kKe),h=es.getDefaultBackground();d?this.backgroundColor=d:c&&u==="right"?this.backgroundColor=h:this.backgroundColor=null;const p=n.get(146).overviewRuler;this.top=p.top,this.right=p.right,this.domWidth=p.width,this.domHeight=p.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[_,v]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=_,this.w=v}_initLanes(e,t,n){const s=t-e;if(n>=3){const r=Math.floor(s/3),o=Math.floor(s/3),a=s-r-o,l=e,c=l+r,u=l+r+a;return[[0,l,c,l,u,l,c,l],[0,r,a,r+a,o,r+a+o,a+o,r+a+o]]}else if(n===2){const r=Math.floor(s/2),o=s-r,a=e,l=a+r;return[[0,a,a,a,l,a,a,a],[0,r,r,r,o,r+o,r+o,r+o]]}else{const r=e,o=s;return[[0,r,r,r,r,r,r,r],[0,o,o,o,o,o,o,o]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColorSingle===e.cursorColorSingle&&this.cursorColorPrimary===e.cursorColorPrimary&&this.cursorColorSecondary===e.cursorColorSecondary&&this.themeType===e.themeType&&ke.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class zet extends Ta{constructor(e){super(e),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=pn(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=es.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[{position:new ue(1,1),color:this._settings.cursorColorSingle}]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new Uet(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++){let s=this._settings.cursorColorSingle;n>1&&(s=t===0?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:e.selections[t].getPosition(),color:s})}return this._cursorPositions.sort((t,n)=>ue.compare(t.position,n.position)),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return e.affectsOverviewRuler?this._markRenderingIsMaybeNeeded():!1}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return e.scrollHeightChanged?this._markRenderingIsNeeded():!1}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){const e=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(e?ke.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}const t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(Kk.compareByRenderingProps),this._actualShouldRender===1&&!Kk.equalsArr(this._renderedDecorations,t)&&(this._actualShouldRender=2),this._actualShouldRender===1&&!ks(this._renderedCursorPositions,this._cursorPositions,(p,_)=>p.position.lineNumber===_.position.lineNumber&&p.color===_.color)&&(this._actualShouldRender=2),this._actualShouldRender===1)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const n=this._settings.canvasWidth,s=this._settings.canvasHeight,r=this._settings.lineHeight,o=this._context.viewLayout,a=this._context.viewLayout.getScrollHeight(),l=s/a,c=6*this._settings.pixelRatio|0,u=c/2|0,d=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(d.fillStyle=ke.Format.CSS.formatHexA(e),d.fillRect(0,0,n,s)):(d.clearRect(0,0,n,s),d.fillStyle=ke.Format.CSS.formatHexA(e),d.fillRect(0,0,n,s)):d.clearRect(0,0,n,s);const h=this._settings.x,g=this._settings.w;for(const p of t){const _=p.color,v=p.data;d.fillStyle=_;let y=0,w=0,x=0;for(let k=0,T=v.length/3;k<T;k++){const R=v[3*k],L=v[3*k+1],I=v[3*k+2];let A=o.getVerticalOffsetForLineNumber(L)*l|0,B=(o.getVerticalOffsetForLineNumber(I)+r)*l|0;if(B-A<c){let U=(A+B)/2|0;U<u?U=u:U+u>s&&(U=s-u),A=U-u,B=U+u}A>x+1||R!==y?(k!==0&&d.fillRect(h[y],w,g[y],x-w),y=R,w=A,x=B):B>x&&(x=B)}d.fillRect(h[y],w,g[y],x-w)}if(!this._settings.hideCursor){const p=2*this._settings.pixelRatio|0,_=p/2|0,v=this._settings.x[7],y=this._settings.w[7];let w=-100,x=-100,k=null;for(let T=0,R=this._cursorPositions.length;T<R;T++){const L=this._cursorPositions[T].color;if(!L)continue;const I=this._cursorPositions[T].position;let A=o.getVerticalOffsetForLineNumber(I.lineNumber)*l|0;A<_?A=_:A+_>s&&(A=s-_);const B=A-_,V=B+p;B>x+1||L!==k?(T!==0&&k&&d.fillRect(v,w,y,x-w),w=B,x=V):V>x&&(x=V),k=L,d.fillStyle=L}k&&d.fillRect(v,w,y,x-w)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(d.beginPath(),d.lineWidth=1,d.strokeStyle=this._settings.borderColor,d.moveTo(0,0),d.lineTo(0,s),d.moveTo(1,0),d.lineTo(n,0),d.stroke())}}class ete{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class ppe{constructor(e,t,n,s){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=n,this.color=s,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class jet{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(ppe.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),s=Math.floor(this._outerHeight),r=n/s,o=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){const u=this._zones[l];if(!e){const k=u.getColorZones();if(k){a.push(k);continue}}const d=this._getVerticalOffsetForLine(u.startLineNumber),h=u.heightInLines===0?this._getVerticalOffsetForLine(u.endLineNumber)+t:d+u.heightInLines*t,g=Math.floor(r*d),p=Math.floor(r*h);let _=Math.floor((g+p)/2),v=p-_;v<o&&(v=o),_-v<0&&(_=v),_+v>n&&(_=n-v);const y=u.color;let w=this._color2Id[y];w||(w=++this._lastAssignedId,this._color2Id[y]=w,this._id2Color[w]=y);const x=new ete(_-v,_+v,w);u.setColorZone(x),a.push(x)}return this._colorZonesInvalid=!1,a.sort(ete.compare),a}}class $et extends sx{constructor(e,t){super(),this._context=e;const n=this._context.configuration.options;this._domNode=pn(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new jet(s=>this._context.viewLayout.getVerticalOffsetForLineNumber(s)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(67)),this._zoneManager.setPixelRatio(n.get(144)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(67)&&(this._zoneManager.setLineHeight(t.get(67)),this._render()),e.hasChanged(144)&&(this._zoneManager.setPixelRatio(t.get(144)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),s=this._zoneManager.getId2Color(),r=this._domNode.domNode.getContext("2d");return r.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(r,n,s,e),!0}_renderOneLane(e,t,n,s){let r=0,o=0,a=0;for(const l of t){const c=l.colorId,u=l.from,d=l.to;c!==r?(e.fillRect(0,o,s,a-o),r=c,e.fillStyle=n[r],o=u,a=d):a>=u?a=Math.max(a,d):(e.fillRect(0,o,s,a-o),o=u,a=d)}e.fillRect(0,o,s,a-o)}}class qet extends Ta{constructor(e){super(e),this.domNode=pn(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:s}=this._context.viewModel.model.getOptions(),r=s;let o=t-e;for(;o>0;){const a=pn(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(r),this.domNode.appendChild(a),this._renderedRulers.push(a),o--}return}let n=e-t;for(;n>0;){const s=this._renderedRulers.pop();this.domNode.removeChild(s),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){const s=this._renderedRulers[t],r=this._rulers[t];s.setBoxShadow(r.color?`1px 0 0 0 ${r.color} inset`:""),s.setHeight(Math.min(e.scrollHeight,1e6)),s.setLeft(r.column*this._typicalHalfwidthCharacterWidth)}}}class Ket extends Ta{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const n=this._context.configuration.options.get(104);this._useShadows=n.useShadows,this._domNode=pn(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(146);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const n=this._context.configuration.options.get(104);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}class Get{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class Yet{constructor(e,t){this.lineNumber=e,this.ranges=t}}function Qet(i){return new Get(i)}function Xet(i){return new Yet(i.lineNumber,i.ranges.map(Qet))}const Ri=class Ri extends F1{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){const s=this._typicalHalfwidthCharacterWidth/4;let r=null,o=null;if(n&&n.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!r&&c<n.length;c++)n[c].lineNumber===a&&(r=n[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=n.length-1;!o&&c>=0;c--)n[c].lineNumber===l&&(o=n[c].ranges[0]);r&&!r.startStyle&&(r=null),o&&!o.startStyle&&(o=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],u=c.left,d=c.left+c.width,h={top:0,bottom:0},g={top:0,bottom:0};if(a>0){const p=t[a-1].ranges[0].left,_=t[a-1].ranges[0].left+t[a-1].ranges[0].width;vT(u-p)<s?h.top=2:u>p&&(h.top=1),vT(d-_)<s?g.top=2:p<d&&d<_&&(g.top=1)}else r&&(h.top=r.startStyle.top,g.top=r.endStyle.top);if(a+1<l){const p=t[a+1].ranges[0].left,_=t[a+1].ranges[0].left+t[a+1].ranges[0].width;vT(u-p)<s?h.bottom=2:p<u&&u<_&&(h.bottom=1),vT(d-_)<s?g.bottom=2:d<_&&(g.bottom=1)}else o&&(h.bottom=o.startStyle.bottom,g.bottom=o.endStyle.bottom);c.startStyle=h,c.endStyle=g}}_getVisibleRangesWithStyle(e,t,n){const r=(t.linesVisibleRangesForRange(e,!0)||[]).map(Xet);return!this._visibleRangesHaveGaps(r)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,r,n),r}_createSelectionPiece(e,t,n,s,r){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;bottom:"+t.toString()+"px;left:"+s.toString()+"px;width:"+r.toString()+'px;"></div>'}_actualRenderOneSelection(e,t,n,s){if(s.length===0)return;const r=!!s[0].ranges[0].startStyle,o=s[0].lineNumber,a=s[s.length-1].lineNumber;for(let l=0,c=s.length;l<c;l++){const u=s[l],d=u.lineNumber,h=d-t,g=n&&d===o?1:0,p=n&&d!==o&&d===a?1:0;let _="",v="";for(let y=0,w=u.ranges.length;y<w;y++){const x=u.ranges[y];if(r){const T=x.startStyle,R=x.endStyle;if(T.top===1||T.bottom===1){_+=this._createSelectionPiece(g,p,Ri.SELECTION_CLASS_NAME,x.left-Ri.ROUNDED_PIECE_WIDTH,Ri.ROUNDED_PIECE_WIDTH);let L=Ri.EDITOR_BACKGROUND_CLASS_NAME;T.top===1&&(L+=" "+Ri.SELECTION_TOP_RIGHT),T.bottom===1&&(L+=" "+Ri.SELECTION_BOTTOM_RIGHT),_+=this._createSelectionPiece(g,p,L,x.left-Ri.ROUNDED_PIECE_WIDTH,Ri.ROUNDED_PIECE_WIDTH)}if(R.top===1||R.bottom===1){_+=this._createSelectionPiece(g,p,Ri.SELECTION_CLASS_NAME,x.left+x.width,Ri.ROUNDED_PIECE_WIDTH);let L=Ri.EDITOR_BACKGROUND_CLASS_NAME;R.top===1&&(L+=" "+Ri.SELECTION_TOP_LEFT),R.bottom===1&&(L+=" "+Ri.SELECTION_BOTTOM_LEFT),_+=this._createSelectionPiece(g,p,L,x.left+x.width,Ri.ROUNDED_PIECE_WIDTH)}}let k=Ri.SELECTION_CLASS_NAME;if(r){const T=x.startStyle,R=x.endStyle;T.top===0&&(k+=" "+Ri.SELECTION_TOP_LEFT),T.bottom===0&&(k+=" "+Ri.SELECTION_BOTTOM_LEFT),R.top===0&&(k+=" "+Ri.SELECTION_TOP_RIGHT),R.bottom===0&&(k+=" "+Ri.SELECTION_BOTTOM_RIGHT)}v+=this._createSelectionPiece(g,p,k,x.left,x.width)}e[h][0]+=_,e[h][1]+=v}}prepareRender(e){const t=[],n=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber;for(let o=n;o<=s;o++){const a=o-n;t[a]=["",""]}const r=[];for(let o=0,a=this._selections.length;o<a;o++){const l=this._selections[o];if(l.isEmpty()){r[o]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[o]);r[o]=c,this._actualRenderOneSelection(t,n,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=r,this._renderResult=t.map(([o,a])=>o+a)}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}};Ri.SELECTION_CLASS_NAME="selected-text",Ri.SELECTION_TOP_LEFT="top-left-radius",Ri.SELECTION_BOTTOM_LEFT="bottom-left-radius",Ri.SELECTION_TOP_RIGHT="top-right-radius",Ri.SELECTION_BOTTOM_RIGHT="bottom-right-radius",Ri.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",Ri.ROUNDED_PIECE_WIDTH=10;let zF=Ri;Nf((i,e)=>{const t=i.getColor(HHe);t&&!t.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${t}; }`)});function vT(i){return i<0?-i:i}class tte{constructor(e,t,n,s,r,o,a){this.top=e,this.left=t,this.paddingLeft=n,this.width=s,this.height=r,this.textContent=o,this.textContentClassName=a}}var Kh;(function(i){i[i.Single=0]="Single",i[i.MultiPrimary=1]="MultiPrimary",i[i.MultiSecondary=2]="MultiSecondary"})(Kh||(Kh={}));class nte{constructor(e,t){this._context=e;const n=this._context.configuration.options,s=n.get(50);this._cursorStyle=n.get(28),this._lineHeight=n.get(67),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(n.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=pn(document.createElement("div")),this._domNode.setClassName(`cursor ${gb}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Nr(this._domNode,s),this._domNode.setDisplay("none"),this._position=new ue(1,1),this._pluralityClass="",this.setPlurality(t),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}setPlurality(e){switch(e){default:case Kh.Single:this._pluralityClass="";break;case Kh.MultiPrimary:this._pluralityClass="cursor-primary";break;case Kh.MultiSecondary:this._pluralityClass="cursor-secondary";break}}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(50);return this._cursorStyle=t.get(28),this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),Nr(this._domNode,n),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,n=this._context.viewModel.getLineContent(e),[s,r]=P7e(n,t-1);return[new ue(e,s+1),n.substring(s,r)]}_prepareRender(e){let t="",n="";const[s,r]=this._getGraphemeAwarePosition();if(this._cursorStyle===Ys.Line||this._cursorStyle===Ys.LineThin){const h=e.visibleRangeForPosition(s);if(!h||h.outsideRenderedLine)return null;const g=rt(this._domNode.domNode);let p;this._cursorStyle===Ys.Line?(p=fX(g,this._lineCursorWidth>0?this._lineCursorWidth:2),p>2&&(t=r,n=this._getTokenClassName(s))):p=fX(g,1);let _=h.left,v=0;p>=2&&_>=1&&(v=1,_-=v);const y=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.bigNumbersDelta;return new tte(y,_,v,p,this._lineHeight,t,n)}const o=e.linesVisibleRangesForRange(new J(s.lineNumber,s.column,s.lineNumber,s.column+r.length),!1);if(!o||o.length===0)return null;const a=o[0];if(a.outsideRenderedLine||a.ranges.length===0)return null;const l=a.ranges[0],c=r==="	"?this._typicalHalfwidthCharacterWidth:l.width<1?this._typicalHalfwidthCharacterWidth:l.width;this._cursorStyle===Ys.Block&&(t=r,n=this._getTokenClassName(s));let u=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.bigNumbersDelta,d=this._lineHeight;return(this._cursorStyle===Ys.Underline||this._cursorStyle===Ys.UnderlineThin)&&(u+=this._lineHeight-2,d=2),new tte(u,l.left,0,c,d,t,n)}_getTokenClassName(e){const t=this._context.viewModel.getViewLineData(e.lineNumber),n=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(n)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${this._pluralityClass} ${gb} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}const MS=class MS extends Ta{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new nte(this._context,Kh.Single),this._secondaryCursors=[],this._renderData=[],this._domNode=pn(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new x1,this._cursorFlatBlinkInterval=new jH,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,s=this._secondaryCursors.length;n<s;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,n){const s=this._secondaryCursors.length!==t.length||this._cursorSmoothCaretAnimation==="explicit"&&n!==3;if(this._primaryCursor.setPlurality(t.length?Kh.MultiPrimary:Kh.Single),this._primaryCursor.onCursorPositionChanged(e,s),this._updateBlinking(),this._secondaryCursors.length<t.length){const r=t.length-this._secondaryCursors.length;for(let o=0;o<r;o++){const a=new nte(this._context,Kh.MultiSecondary);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}}else if(this._secondaryCursors.length>t.length){const r=this._secondaryCursors.length-t.length;for(let o=0;o<r;o++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let r=0;r<t.length;r++)this._secondaryCursors[r].onCursorPositionChanged(t[r],s)}onCursorStateChanged(e){const t=[];for(let s=0,r=e.selections.length;s<r;s++)t[s]=e.selections[s].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);const n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=n=>{for(let s=0,r=e.ranges.length;s<r;s++)if(e.ranges[s].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[s].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,n=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},MS.BLINK_INTERVAL,rt(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},MS.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case Ys.Line:e+=" cursor-line-style";break;case Ys.Block:e+=" cursor-block-style";break;case Ys.Underline:e+=" cursor-underline-style";break;case Ys.LineThin:e+=" cursor-line-thin-style";break;case Ys.BlockOutline:e+=" cursor-block-outline-style";break;case Ys.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let n=0;const s=this._primaryCursor.render(e);s&&(t[n++]=s);for(let r=0,o=this._secondaryCursors.length;r<o;r++){const a=this._secondaryCursors[r].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}};MS.BLINK_INTERVAL=500;let jF=MS;Nf((i,e)=>{const t=[{class:".cursor",foreground:kA,background:UU},{class:".cursor-primary",foreground:Wge,background:oKe},{class:".cursor-secondary",foreground:Hge,background:aKe}];for(const n of t){const s=i.getColor(n.foreground);if(s){let r=i.getColor(n.background);r||(r=s.opposite()),e.addRule(`.monaco-editor .cursors-layer ${n.class} { background-color: ${s}; border-color: ${s}; color: ${r}; }`),eb(i.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection ${n.class} { border-left: 1px solid ${r}; border-right: 1px solid ${r}; }`)}}});const P6=()=>{throw new Error("Invalid change accessor")};class Zet extends Ta{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(146);this._lineHeight=t.get(67),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=pn(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=pn(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const s of e)t.set(s.id,s);let n=!1;return this._context.viewModel.changeWhitespace(s=>{const r=Object.keys(this._zones);for(let o=0,a=r.length;o<a;o++){const l=r[o],c=this._zones[l],u=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=u.isInHiddenArea;const d=t.get(l);d&&(d.afterLineNumber!==u.afterViewLineNumber||d.height!==u.heightInPx)&&(s.changeOneWhitespace(l,u.afterViewLineNumber,u.heightInPx),this._safeCallOnComputedHeight(c.delegate,u.heightInPx),n=!0)}}),n}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(146);return this._lineHeight=t.get(67),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(67)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return e.ordinal??e.afterColumn??1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const o=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new ue(o,this._context.viewModel.model.getLineMaxColumn(o))}let n;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const s=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),r=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!r,afterViewLineNumber:s.lineNumber,heightInPx:r?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(n=>{const s={addZone:r=>(t=!0,this._addZone(n,r)),removeZone:r=>{r&&(t=this._removeZone(n,r)||t)},layoutZone:r=>{r&&(t=this._layoutZone(n,r)||t)}};Jet(e,s),s.addZone=P6,s.removeZone=P6,s.layoutZone=P6}),t}_addZone(e,t){const n=this._computeWhitespaceProps(t),r={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:pn(t.domNode),marginDomNode:t.marginDomNode?pn(t.marginDomNode):null};return this._safeCallOnComputedHeight(r.delegate,n.heightInPx),r.domNode.setPosition("absolute"),r.domNode.domNode.style.width="100%",r.domNode.setDisplay("none"),r.domNode.setAttribute("monaco-view-zone",r.whitespaceId),this.domNode.appendChild(r.domNode),r.marginDomNode&&(r.marginDomNode.setPosition("absolute"),r.marginDomNode.domNode.style.width="100%",r.marginDomNode.setDisplay("none"),r.marginDomNode.setAttribute("monaco-view-zone",r.whitespaceId),this.marginDomNode.appendChild(r.marginDomNode)),this._zones[r.whitespaceId]=r,this.setShouldRender(),r.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.remove(),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.remove()),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t],s=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=s.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,s.afterViewLineNumber,s.heightInPx),this._safeCallOnComputedHeight(n.delegate,s.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){Un(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){Un(n)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,n={};let s=!1;for(const o of t)this._zones[o.id].isInHiddenArea||(n[o.id]=o,s=!0);const r=Object.keys(this._zones);for(let o=0,a=r.length;o<a;o++){const l=r[o],c=this._zones[l];let u=0,d=0,h="none";n.hasOwnProperty(l)?(u=n[l].verticalOffset-e.bigNumbersDelta,d=n[l].height,h="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(n[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(u),c.domNode.setHeight(d),c.domNode.setDisplay(h),c.marginDomNode&&(c.marginDomNode.setTop(u),c.marginDomNode.setHeight(d),c.marginDomNode.setDisplay(h))}s&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function Jet(i,e){try{return i(e)}catch(t){Un(t)}}class ett extends F1{constructor(e){super(),this._context=e,this._options=new ite(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new ite(this._context.configuration);return this._options.equals(t)?e.hasChanged(146):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber-t+1,r=new Array(s);for(let a=0;a<s;a++)r[a]=!0;const o=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,r);this._renderResult=[];for(let a=e.viewportData.startLineNumber;a<=e.viewportData.endLineNumber;a++){const l=a-e.viewportData.startLineNumber,c=o.data[l];let u=null;if(this._options.renderWhitespace==="selection"){const d=this._selection;for(const h of d){if(h.endLineNumber<a||h.startLineNumber>a)continue;const g=h.startLineNumber===a?h.startColumn:c.minColumn,p=h.endLineNumber===a?h.endColumn:c.maxColumn;g<p&&(u||(u=[]),u.push(new Yme(g-1,p-1)))}}this._renderResult[l]=this._applyRenderWhitespace(e,a,u,c)}}_applyRenderWhitespace(e,t,n,s){if(this._options.renderWhitespace==="selection"&&!n||this._options.renderWhitespace==="trailing"&&s.continuesWithWrappedLine)return"";const r=this._context.theme.getColor(zU),o=this._options.renderWithSVG,a=s.content,l=this._options.stopRenderingLineAfter===-1?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),c=s.continuesWithWrappedLine,u=s.minColumn-1,d=this._options.renderWhitespace==="boundary",h=this._options.renderWhitespace==="trailing",g=this._options.lineHeight,p=this._options.middotWidth,_=this._options.wsmiddotWidth,v=this._options.spaceWidth,y=Math.abs(_-v),w=Math.abs(p-v),x=y<w?11825:183,k=this._options.canUseHalfwidthRightwardsArrow;let T="",R=!1,L=Ca(a),I;L===-1?(R=!0,L=l,I=l):I=k1(a);let A=0,B=n&&n[A],V=0;for(let U=u;U<l;U++){const W=a.charCodeAt(U);if(B&&U>=B.endOffset&&(A++,B=n&&n[A]),W!==9&&W!==32||h&&!R&&U<=I)continue;if(d&&U>=L&&U<=I&&W===32){const Z=U-1>=0?a.charCodeAt(U-1):0,ne=U+1<l?a.charCodeAt(U+1):0;if(Z!==32&&ne!==32)continue}if(d&&c&&U===l-1){const Z=U-1>=0?a.charCodeAt(U-1):0;if(W===32&&Z!==32&&Z!==9)continue}if(n&&(!B||B.startOffset>U||B.endOffset<=U))continue;const G=e.visibleRangeForPosition(new ue(t,U+1));G&&(o?(V=Math.max(V,G.left),W===9?T+=this._renderArrow(g,v,G.left):T+=`<circle cx="${(G.left+v/2).toFixed(2)}" cy="${(g/2).toFixed(2)}" r="${(v/7).toFixed(2)}" />`):W===9?T+=`<div class="mwh" style="left:${G.left}px;height:${g}px;">${k?"":""}</div>`:T+=`<div class="mwh" style="left:${G.left}px;height:${g}px;">${String.fromCharCode(x)}</div>`)}return o?(V=Math.round(V+v),`<svg style="bottom:0;position:absolute;width:${V}px;height:${g}px" viewBox="0 0 ${V} ${g}" xmlns="http://www.w3.org/2000/svg" fill="${r}">`+T+"</svg>"):T}_renderArrow(e,t,n){const s=t/7,r=t,o=e/2,a=n,l={x:0,y:s/2},c={x:100/125*r,y:l.y},u={x:c.x-.2*c.x,y:c.y+.2*c.x},d={x:u.x+.1*c.x,y:u.y+.1*c.x},h={x:d.x+.35*c.x,y:d.y-.35*c.x},g={x:h.x,y:-h.y},p={x:d.x,y:-d.y},_={x:u.x,y:-u.y},v={x:c.x,y:-c.y},y={x:l.x,y:-l.y};return`<path d="M ${[l,c,u,d,h,g,p,_,v,y].map(k=>`${(a+k.x).toFixed(2)} ${(o+k.y).toFixed(2)}`).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class ite{constructor(e){const t=e.options,n=t.get(50),s=t.get(38);s==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):s==="svg"?(this.renderWhitespace=t.get(100),this.renderWithSVG=!0):(this.renderWhitespace=t.get(100),this.renderWithSVG=!1),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(67),this.stopRenderingLineAfter=t.get(118)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}class ttt{constructor(e,t,n,s){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.lineHeight=t.lineHeight|0,this.whitespaceViewportData=n,this._model=s,this.visibleRange=new J(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class ntt{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class itt{constructor(e,t,n){this.configuration=e,this.theme=new ntt(t),this.viewModel=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}var stt=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},rtt=function(i,e){return function(t,n){e(t,n,i)}};let $F=class extends sx{constructor(e,t,n,s,r,o,a){super(),this._instantiationService=a,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new Gn(1,1,1,1)],this._renderAnimationFrame=null;const l=new det(t,s,r,e);this._context=new itt(t,n,s),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(FF,this._context,l,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=pn(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=pn(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=pn(document.createElement("div")),bu.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new wet(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new UF(this._context,this._linesContent),this._viewZones=new Zet(this._context),this._viewParts.push(this._viewZones);const c=new zet(this._context);this._viewParts.push(c);const u=new Ket(this._context);this._viewParts.push(u);const d=new fet(this._context);this._viewParts.push(d),d.addDynamicOverlay(new vet(this._context)),d.addDynamicOverlay(new zF(this._context)),d.addDynamicOverlay(new Iet(this._context)),d.addDynamicOverlay(new yet(this._context)),d.addDynamicOverlay(new ett(this._context));const h=new get(this._context);this._viewParts.push(h),h.addDynamicOverlay(new bet(this._context)),h.addDynamicOverlay(new Pet(this._context)),h.addDynamicOverlay(new Aet(this._context)),h.addDynamicOverlay(new sN(this._context)),this._glyphMarginWidgets=new xet(this._context),this._viewParts.push(this._glyphMarginWidgets);const g=new rN(this._context);g.getDomNode().appendChild(this._viewZones.marginDomNode),g.getDomNode().appendChild(h.getDomNode()),g.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(g),this._contentWidgets=new pet(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new jF(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new Het(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);const p=new qet(this._context);this._viewParts.push(p);const _=new met(this._context);this._viewParts.push(_);const v=new Wet(this._context);if(this._viewParts.push(v),c){const y=this._scrollbar.getOverviewRulerLayoutInfo();y.parent.insertBefore(c.getDomNode(),y.insertBefore)}this._linesContent.appendChild(d.getDomNode()),this._linesContent.appendChild(p.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(g.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(u.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(v.getDomNode()),this._overflowGuardContainer.appendChild(_.domNode),this.domNode.appendChild(this._overflowGuardContainer),o?(o.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),o.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new NJe(this._context,l,this._createPointerHandlerHelper()))}_computeGlyphMarginLanes(){const e=this._context.viewModel.model,t=this._context.viewModel.glyphLanes;let n=[],s=0;n=n.concat(e.getAllMarginDecorations().map(r=>{var a,l;const o=((a=r.options.glyphMargin)==null?void 0:a.position)??Dm.Center;return s=Math.max(s,r.range.endLineNumber),{range:r.range,lane:o,persist:(l=r.options.glyphMargin)==null?void 0:l.persistLane}})),n=n.concat(this._glyphMarginWidgets.getWidgets().map(r=>{const o=e.validateRange(r.preference.range);return s=Math.max(s,o.endLineNumber),{range:o,lane:r.preference.lane}})),n.sort((r,o)=>J.compareRangesUsingStarts(r.range,o.range)),t.reset(s);for(const r of n)t.push(r.lane,r.range,r.persist);return t}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new bJe(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new ue(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const t=this._context.configuration.options.get(146);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(16777216),this._linesContent.setHeight(16777216)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(143)+" "+N8(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){var e;if(this._store.isDisposed)throw new Dn;if(this._renderAnimationFrame===null){const t=this._createCoordinatedRendering();this._renderAnimationFrame=qF.INSTANCE.scheduleCoordinatedRendering({window:rt((e=this.domNode)==null?void 0:e.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new Dn;try{return t.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new Dn;return t.renderText()},prepareRender:(n,s)=>{if(this._store.isDisposed)throw new Dn;return t.prepareRender(n,s)},render:(n,s)=>{if(this._store.isDisposed)throw new Dn;return t.render(n,s)}})}}_flushAccumulatedAndRenderNow(){const e=this._createCoordinatedRendering();$g(()=>e.prepareRenderText());const t=$g(()=>e.renderText());if(t){const[n,s]=t;$g(()=>e.prepareRender(n,s)),$g(()=>e.render(n,s))}}_getViewPartsToRender(){const e=[];let t=0;for(const n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;const e=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(e.requiredLanes)}jg.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return null;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const n=new ttt(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender()),[e,new hJe(this._context.viewLayout,n,this._viewLines)]},prepareRender:(e,t)=>{for(const n of e)n.prepareRender(t)},render:(e,t)=>{for(const n of e)n.render(t),n.onDidRender()}}}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){const n=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),s=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();const r=this._viewLines.visibleRangeForPosition(new ue(s.lineNumber,s.column));return r?r.left:-1}getTargetAtClientPoint(e,t){const n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?VA.convertViewToModelMouseTarget(n,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new $et(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const n of this._viewParts)n.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,n,s,r;this._contentWidgets.setWidgetPosition(e.widget,((t=e.position)==null?void 0:t.position)??null,((n=e.position)==null?void 0:n.secondaryPosition)??null,((s=e.position)==null?void 0:s.preference)??null,((r=e.position)==null?void 0:r.positionAffinity)??null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){this._overlayWidgets.setWidgetPosition(e.widget,e.position)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){const t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};$F=stt([rtt(6,Pn)],$F);function $g(i){try{return i()}catch(e){return Un(e),null}}const CR=class CR{constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}scheduleCoordinatedRendering(e){return this._coordinatedRenderings.push(e),this._scheduleRender(e.window),{dispose:()=>{const t=this._coordinatedRenderings.indexOf(e);if(t!==-1&&(this._coordinatedRenderings.splice(t,1),this._coordinatedRenderings.length===0)){for(const[n,s]of this._animationFrameRunners)s.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(e){if(!this._animationFrameRunners.has(e)){const t=()=>{this._animationFrameRunners.delete(e),this._onRenderScheduled()};this._animationFrameRunners.set(e,The(e,t,100))}}_onRenderScheduled(){const e=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(const n of e)$g(()=>n.prepareRenderText());const t=[];for(let n=0,s=e.length;n<s;n++){const r=e[n];t[n]=$g(()=>r.renderText())}for(let n=0,s=e.length;n<s;n++){const r=e[n],o=t[n];if(!o)continue;const[a,l]=o;$g(()=>r.prepareRender(a,l))}for(let n=0,s=e.length;n<s;n++){const r=e[n],o=t[n];if(!o)continue;const[a,l]=o;$g(()=>r.render(a,l))}}};CR.INSTANCE=new CR;let qF=CR;class mS{constructor(e,t,n,s,r){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=n,this.breakOffsetsVisibleColumn=s,this.wrappedTextIndentLength=r}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let s=this.breakOffsets[e]-t;return e>0&&(s+=this.wrappedTextIndentLength),s}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let s=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let r=0;r<this.injectionOffsets.length&&s>this.injectionOffsets[r];r++)s<this.injectionOffsets[r]+this.injectionOptions[r].content.length?s=this.injectionOffsets[r]:s-=this.injectionOptions[r].content.length;return s}translateToOutputPosition(e,t=2){let n=e;if(this.injectionOffsets!==null)for(let s=0;s<this.injectionOffsets.length&&!(e<this.injectionOffsets[s]||t!==1&&e===this.injectionOffsets[s]);s++)n+=this.injectionOptions[s].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let n=0,s=this.breakOffsets.length-1,r=0,o=0;for(;n<=s;){r=n+(s-n)/2|0;const l=this.breakOffsets[r];if(o=r>0?this.breakOffsets[r-1]:0,t===0)if(e<=o)s=r-1;else if(e>l)n=r+1;else break;else if(e<o)s=r-1;else if(e>=l)n=r+1;else break}let a=e-o;return r>0&&(a+=this.wrappedTextIndentLength),new bT(r,a)}normalizeOutputPosition(e,t,n){if(this.injectionOffsets!==null){const s=this.outputPositionToOffsetInInputWithInjections(e,t),r=this.normalizeOffsetInInputWithInjectionsAroundInjections(s,n);if(r!==s)return this.offsetInInputWithInjectionsToOutputPosition(r,n)}if(n===0){if(e>0&&t===this.getMinOutputOffset(e))return new bT(e-1,this.getMaxOutputOffset(e-1))}else if(n===1){const s=this.getOutputLineCount()-1;if(e<s&&t===this.getMaxOutputOffset(e))return new bT(e+1,this.getMinOutputOffset(e+1))}return new bT(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===2){if(e===n.offsetInInputWithInjections+n.length&&ste(this.injectionOptions[n.injectedTextIndex].cursorStops))return n.offsetInInputWithInjections+n.length;{let s=n.offsetInInputWithInjections;if(rte(this.injectionOptions[n.injectedTextIndex].cursorStops))return s;let r=n.injectedTextIndex-1;for(;r>=0&&this.injectionOffsets[r]===this.injectionOffsets[n.injectedTextIndex]&&!(ste(this.injectionOptions[r].cursorStops)||(s-=this.injectionOptions[r].content.length,rte(this.injectionOptions[r].cursorStops)));)r--;return s}}else if(t===1||t===4){let s=n.offsetInInputWithInjections+n.length,r=n.injectedTextIndex;for(;r+1<this.injectionOffsets.length&&this.injectionOffsets[r+1]===this.injectionOffsets[r];)s+=this.injectionOptions[r+1].content.length,r++;return s}else if(t===0||t===3){let s=n.offsetInInputWithInjections,r=n.injectedTextIndex;for(;r-1>=0&&this.injectionOffsets[r-1]===this.injectionOffsets[r];)s-=this.injectionOptions[r-1].content.length,r--;return s}JH()}getInjectedText(e,t){const n=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.getInjectedTextAtOffset(n);return s?{options:this.injectionOptions[s.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let s=0;for(let r=0;r<t.length;r++){const o=n[r].content.length,a=t[r]+s,l=t[r]+s+o;if(a>e)break;if(e<=l)return{injectedTextIndex:r,offsetInInputWithInjections:a,length:o};s+=o}}}}function ste(i){return i==null?!0:i===Qb.Right||i===Qb.Both}function rte(i){return i==null?!0:i===Qb.Left||i===Qb.Both}class bT{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new ue(e+this.outputLineIndex,this.outputOffset+1)}}const M6=N1("domLineBreaksComputer",{createHTML:i=>i});class Mz{static create(e){return new Mz(new WeakRef(e))}constructor(e){this.targetWindow=e}createLineBreaksComputer(e,t,n,s,r){const o=[],a=[];return{addRequest:(l,c,u)=>{o.push(l),a.push(c)},finalize:()=>ott(Tde(this.targetWindow.deref()),o,e,t,n,s,r,a)}}}function ott(i,e,t,n,s,r,o,a){function l(A){const B=a[A];if(B){const V=pu.applyInjectedText(e[A],B),U=B.map(G=>G.options),W=B.map(G=>G.column-1);return new mS(W,U,[V.length],[],0)}else return null}if(s===-1){const A=[];for(let B=0,V=e.length;B<V;B++)A[B]=l(B);return A}const c=Math.round(s*t.typicalHalfwidthCharacterWidth),d=Math.round(n*(r===3?2:r===2?1:0)),h=Math.ceil(t.spaceWidth*d),g=document.createElement("div");Nr(g,t);const p=new iA(1e4),_=[],v=[],y=[],w=[],x=[];for(let A=0;A<e.length;A++){const B=pu.applyInjectedText(e[A],a[A]);let V=0,U=0,W=c;if(r!==0)if(V=Ca(B),V===-1)V=0;else{for(let fe=0;fe<V;fe++){const te=B.charCodeAt(fe)===9?n-U%n:1;U+=te}const ne=Math.ceil(t.spaceWidth*U);ne+t.typicalFullwidthCharacterWidth>c?(V=0,U=0):W=c-ne}const G=B.substr(V),Z=att(G,U,n,W,p,h);_[A]=V,v[A]=U,y[A]=G,w[A]=Z[0],x[A]=Z[1]}const k=p.build(),T=(M6==null?void 0:M6.createHTML(k))??k;g.innerHTML=T,g.style.position="absolute",g.style.top="10000",o==="keepAll"?(g.style.wordBreak="keep-all",g.style.overflowWrap="anywhere"):(g.style.wordBreak="inherit",g.style.overflowWrap="break-word"),i.document.body.appendChild(g);const R=document.createRange(),L=Array.prototype.slice.call(g.children,0),I=[];for(let A=0;A<e.length;A++){const B=L[A],V=ltt(R,B,y[A],w[A]);if(V===null){I[A]=l(A);continue}const U=_[A],W=v[A]+d,G=x[A],Z=[];for(let ce=0,ve=V.length;ce<ve;ce++)Z[ce]=G[V[ce]];if(U!==0)for(let ce=0,ve=V.length;ce<ve;ce++)V[ce]+=U;let ne,fe;const te=a[A];te?(ne=te.map(ce=>ce.options),fe=te.map(ce=>ce.column-1)):(ne=null,fe=null),I[A]=new mS(fe,ne,V,Z,W)}return g.remove(),I}function att(i,e,t,n,s,r){if(r!==0){const h=String(r);s.appendString('<div style="text-indent: -'),s.appendString(h),s.appendString("px; padding-left: "),s.appendString(h),s.appendString("px; box-sizing: border-box; width:")}else s.appendString('<div style="width:');s.appendString(String(n)),s.appendString('px;">');const o=i.length;let a=e,l=0;const c=[],u=[];let d=0<o?i.charCodeAt(0):0;s.appendString("<span>");for(let h=0;h<o;h++){h!==0&&h%16384===0&&s.appendString("</span><span>"),c[h]=l,u[h]=a;const g=d;d=h+1<o?i.charCodeAt(h+1):0;let p=1,_=1;switch(g){case 9:p=t-a%t,_=p;for(let v=1;v<=p;v++)v<p?s.appendCharCode(160):s.appendASCIICharCode(32);break;case 32:d===32?s.appendCharCode(160):s.appendASCIICharCode(32);break;case 60:s.appendString("&lt;");break;case 62:s.appendString("&gt;");break;case 38:s.appendString("&amp;");break;case 0:s.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:s.appendCharCode(65533);break;default:Tm(g)&&_++,g<32?s.appendCharCode(9216+g):s.appendCharCode(g)}l+=p,a+=_}return s.appendString("</span>"),c[i.length]=l,u[i.length]=a,s.appendString("</div>"),[c,u]}function ltt(i,e,t,n){if(t.length<=1)return null;const s=Array.prototype.slice.call(e.children,0),r=[];try{KF(i,s,n,0,null,t.length-1,null,r)}catch(o){return console.log(o),null}return r.length===0?null:(r.push(t.length),r)}function KF(i,e,t,n,s,r,o,a){if(n===r||(s=s||O6(i,e,t[n],t[n+1]),o=o||O6(i,e,t[r],t[r+1]),Math.abs(s[0].top-o[0].top)<=.1))return;if(n+1===r){a.push(r);return}const l=n+(r-n)/2|0,c=O6(i,e,t[l],t[l+1]);KF(i,e,t,n,s,l,c,a),KF(i,e,t,l,c,r,o,a)}function O6(i,e,t,n){return i.setStart(e[t/16384|0].firstChild,t%16384),i.setEnd(e[n/16384|0].firstChild,n%16384),i.getClientRects()}class ctt extends be{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new LH),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,n){this._editor=e,this._instantiationService=n;for(const s of t){if(this._pending.has(s.id)){Un(new Error(`Cannot have two contributions with the same id ${s.id}`));continue}this._pending.set(s.id,s)}this._instantiateSome(0),this._register(HE(rt(this._editor.getDomNode()),()=>{this._instantiateSome(1)})),this._register(HE(rt(this._editor.getDomNode()),()=>{this._instantiateSome(2)})),this._register(HE(rt(this._editor.getDomNode()),()=>{this._instantiateSome(3)},5e3))}saveViewState(){const e={};for(const[t,n]of this._instances)typeof n.saveViewState=="function"&&(e[t]=n.saveViewState());return e}restoreViewState(e){for(const[t,n]of this._instances)typeof n.restoreViewState=="function"&&n.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){var e;return HE(rt((e=this._editor)==null?void 0:e.getDomNode()),()=>{this._instantiateSome(1)},50)}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const t=this._findPendingContributionsByInstantiation(e);for(const n of t)this._instantiateById(n.id)}_findPendingContributionsByInstantiation(e){const t=[];for(const[,n]of this._pending)n.instantiation===e&&t.push(n);return t}_instantiateById(e){const t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const n=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,n),typeof n.restoreViewState=="function"&&t.instantiation!==0&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(n){Un(n)}}}}class _pe{constructor(e,t,n,s,r,o,a){this.id=e,this.label=t,this.alias=n,this.metadata=s,this._precondition=r,this._run=o,this._contextKeyService=a}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}class Oz{static create(e){return new Oz(e.get(135),e.get(134))}constructor(e,t){this.classifier=new utt(e,t)}createLineBreaksComputer(e,t,n,s,r){const o=[],a=[],l=[];return{addRequest:(c,u,d)=>{o.push(c),a.push(u),l.push(d)},finalize:()=>{const c=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,u=[];for(let d=0,h=o.length;d<h;d++){const g=a[d],p=l[d];p&&!p.injectionOptions&&!g?u[d]=dtt(this.classifier,p,o[d],t,n,c,s,r):u[d]=htt(this.classifier,o[d],g,t,n,c,s,r)}return GF.length=0,YF.length=0,u}}}}class utt extends z2{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let GF=[],YF=[];function dtt(i,e,t,n,s,r,o,a){if(s===-1)return null;const l=t.length;if(l<=1)return null;const c=a==="keepAll",u=e.breakOffsets,d=e.breakOffsetsVisibleColumn,h=vpe(t,n,s,r,o),g=s-h,p=GF,_=YF;let v=0,y=0,w=0,x=s;const k=u.length;let T=0;if(T>=0){let R=Math.abs(d[T]-x);for(;T+1<k;){const L=Math.abs(d[T+1]-x);if(L>=R)break;R=L,T++}}for(;T<k;){let R=T<0?0:u[T],L=T<0?0:d[T];y>R&&(R=y,L=w);let I=0,A=0,B=0,V=0;if(L<=x){let W=L,G=R===0?0:t.charCodeAt(R-1),Z=R===0?0:i.get(G),ne=!0;for(let fe=R;fe<l;fe++){const te=fe,ce=t.charCodeAt(fe);let ve,X;if(As(ce)?(fe++,ve=0,X=2):(ve=i.get(ce),X=pS(ce,W,n,r)),te>y&&QF(G,Z,ce,ve,c)&&(I=te,A=W),W+=X,W>x){te>y?(B=te,V=W-X):(B=fe+1,V=W),W-A>g&&(I=0),ne=!1;break}G=ce,Z=ve}if(ne){v>0&&(p[v]=u[u.length-1],_[v]=d[u.length-1],v++);break}}if(I===0){let W=L,G=t.charCodeAt(R),Z=i.get(G),ne=!1;for(let fe=R-1;fe>=y;fe--){const te=fe+1,ce=t.charCodeAt(fe);if(ce===9){ne=!0;break}let ve,X;if($b(ce)?(fe--,ve=0,X=2):(ve=i.get(ce),X=Tm(ce)?r:1),W<=x){if(B===0&&(B=te,V=W),W<=x-g)break;if(QF(ce,ve,G,Z,c)){I=te,A=W;break}}W-=X,G=ce,Z=ve}if(I!==0){const fe=g-(V-A);if(fe<=n){const te=t.charCodeAt(B);let ce;As(te)?ce=2:ce=pS(te,V,n,r),fe-ce<0&&(I=0)}}if(ne){T--;continue}}if(I===0&&(I=B,A=V),I<=y){const W=t.charCodeAt(y);As(W)?(I=y+2,A=w+2):(I=y+1,A=w+pS(W,w,n,r))}for(y=I,p[v]=I,w=A,_[v]=A,v++,x=A+g;T<0||T<k&&d[T]<A;)T++;let U=Math.abs(d[T]-x);for(;T+1<k;){const W=Math.abs(d[T+1]-x);if(W>=U)break;U=W,T++}}return v===0?null:(p.length=v,_.length=v,GF=e.breakOffsets,YF=e.breakOffsetsVisibleColumn,e.breakOffsets=p,e.breakOffsetsVisibleColumn=_,e.wrappedTextIndentLength=h,e)}function htt(i,e,t,n,s,r,o,a){const l=pu.applyInjectedText(e,t);let c,u;if(t&&t.length>0?(c=t.map(A=>A.options),u=t.map(A=>A.column-1)):(c=null,u=null),s===-1)return c?new mS(u,c,[l.length],[],0):null;const d=l.length;if(d<=1)return c?new mS(u,c,[l.length],[],0):null;const h=a==="keepAll",g=vpe(l,n,s,r,o),p=s-g,_=[],v=[];let y=0,w=0,x=0,k=s,T=l.charCodeAt(0),R=i.get(T),L=pS(T,0,n,r),I=1;As(T)&&(L+=1,T=l.charCodeAt(1),R=i.get(T),I++);for(let A=I;A<d;A++){const B=A,V=l.charCodeAt(A);let U,W;As(V)?(A++,U=0,W=2):(U=i.get(V),W=pS(V,L,n,r)),QF(T,R,V,U,h)&&(w=B,x=L),L+=W,L>k&&((w===0||L-x>p)&&(w=B,x=L-W),_[y]=w,v[y]=x,y++,k=x+p,w=0),T=V,R=U}return y===0&&(!t||t.length===0)?null:(_[y]=d,v[y]=L,new mS(u,c,_,v,g))}function pS(i,e,t,n){return i===9?t-e%t:Tm(i)||i<32?n:1}function ote(i,e){return e-i%e}function QF(i,e,t,n,s){return t!==32&&(e===2&&n!==2||e!==1&&n===1||!s&&e===3&&n!==2||!s&&n===3&&e!==1)}function vpe(i,e,t,n,s){let r=0;if(s!==0){const o=Ca(i);if(o!==-1){for(let l=0;l<o;l++){const c=i.charCodeAt(l)===9?ote(r,e):1;r+=c}const a=s===3?2:s===2?1:0;for(let l=0;l<a;l++){const c=ote(r,e);r+=c}r+n>t&&(r=0)}}return r}class hN{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new Gs(new J(1,1,1,1),0,0,new ue(1,1),0),new Gs(new J(1,1,1,1),0,0,new ue(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new Yt(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?Gn.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):Gn.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,s){return t.equals(n)?s:e.normalizePosition(t,2)}static _validateViewState(e,t){const n=t.position,s=t.selectionStart.getStartPosition(),r=t.selectionStart.getEndPosition(),o=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,s,n,o),l=this._validatePositionWithCache(e,r,s,a);return n.equals(o)&&s.equals(a)&&r.equals(l)?t:new Gs(J.fromPositions(a,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+s.column-a.column,o,t.leftoverVisibleColumns+n.column-o.column)}_setState(e,t,n){if(n&&(n=hN._validateViewState(e.viewModel,n)),t){const s=e.model.validateRange(t.selectionStart),r=t.selectionStart.equalsRange(s)?t.selectionStartLeftoverVisibleColumns:0,o=e.model.validatePosition(t.position),a=t.position.equals(o)?t.leftoverVisibleColumns:0;t=new Gs(s,t.selectionStartKind,r,o,a)}else{if(!n)return;const s=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),r=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new Gs(s,n.selectionStartKind,n.selectionStartLeftoverVisibleColumns,r,n.leftoverVisibleColumns)}if(n){const s=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),r=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new Gs(s,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,r,t.leftoverVisibleColumns)}else{const s=e.coordinatesConverter.convertModelPositionToViewPosition(new ue(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),r=e.coordinatesConverter.convertModelPositionToViewPosition(new ue(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),o=new J(s.lineNumber,s.column,r.lineNumber,r.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new Gs(o,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}class ate{constructor(e){this.context=e,this.cursors=[new hN(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return nWe(this.cursors,fc(e=>e.viewState.position,ue.compare)).viewState.position}getBottomMostViewPosition(){return tWe(this.cursors,fc(e=>e.viewState.position,ue.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(Yt.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,n=e.length;if(t<n){const s=n-t;for(let r=0;r<s;r++)this._addSecondaryCursor()}else if(t>n){const s=t-n;for(let r=0;r<s;r++)this._removeSecondaryCursor(this.cursors.length-2)}for(let s=0;s<n;s++)this.cursors[s+1].setState(this.context,e[s].modelState,e[s].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new hN(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let n=0,s=e.length;n<s;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort(fc(n=>n.selection,J.compareRangesUsingStarts));for(let n=0;n<t.length-1;n++){const s=t[n],r=t[n+1],o=s.selection,a=r.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||o.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(o.getEndPosition()):l=a.getStartPosition().isBefore(o.getEndPosition()),l){const c=s.index<r.index?n:n+1,u=s.index<r.index?n+1:n,d=t[u].index,h=t[c].index,g=t[u].selection,p=t[c].selection;if(!g.equalsSelection(p)){const _=g.plusRange(p),v=g.selectionStartLineNumber===g.startLineNumber&&g.selectionStartColumn===g.startColumn,y=p.selectionStartLineNumber===p.startLineNumber&&p.selectionStartColumn===p.startColumn;let w;d===this.lastAddedCursorIndex?(w=v,this.lastAddedCursorIndex=h):w=y;let x;w?x=new Gn(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn):x=new Gn(_.endLineNumber,_.endColumn,_.startLineNumber,_.startColumn),t[c].selection=x;const k=Yt.fromModelSelection(x);e[h].setState(this.context,k.modelState,k.viewState)}for(const _ of t)_.index>d&&_.index--;e.splice(d,1),t.splice(u,1),this._removeSecondaryCursor(d-1),n--}}}}class lte{constructor(e,t,n,s){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=s}}class ftt{constructor(){this.type=0}}class gtt{constructor(){this.type=1}}class mtt{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class ptt{constructor(e,t,n){this.selections=e,this.modelSelections=t,this.reason=n,this.type=3}}class bp{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin,this.affectsLineNumber=e.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}}class yT{constructor(){this.type=5}}class _tt{constructor(e){this.type=6,this.isFocused=e}}class vtt{constructor(){this.type=7}}class wT{constructor(){this.type=8}}class bpe{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}class XF{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class ZF{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class _S{constructor(e,t,n,s,r,o,a){this.source=e,this.minimalReveal=t,this.range=n,this.selections=s,this.verticalType=r,this.revealHorizontal=o,this.scrollType=a,this.type=12}}class btt{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class ytt{constructor(e){this.theme=e,this.type=14}}class wtt{constructor(e){this.type=15,this.ranges=e}}class Ctt{constructor(){this.type=16}}let Stt=class{constructor(){this.type=17}};class ktt extends be{constructor(){super(),this._onEvent=this._register(new se),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++){const s=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(s){this._outgoingEvents[t]=s;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new xtt),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}}class xtt{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class Fz{constructor(e,t,n,s){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=s,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new Fz(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class Bz{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new Bz(this.oldHasFocus,e.hasFocus)}}class Vz{constructor(e,t,n,s,r,o,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=s,this.scrollWidth=r,this.scrollLeft=o,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new Vz(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class Ett{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class Ttt{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class fN{constructor(e,t,n,s,r,o,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=s,this.source=r,this.reason=o,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length,s=t.length;if(n!==s)return!1;for(let r=0;r<n;r++)if(!e[r].equalsSelection(t[r]))return!1;return!0}isNoOp(){return fN._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new fN(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class Ltt{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class Itt{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class Dtt{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class Ntt{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class Rtt{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class Att{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class Ptt{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class Mtt extends be{constructor(e,t,n,s){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new lte(this._model,this._viewModel,this._coordinatesConverter,s),this._cursors=new ate(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=br(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new lte(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,s){let r=!1;const o=this.context.cursorConfig.multiCursorLimit;s!==null&&s.length>o&&(s=s.slice(0,o),r=!0);const a=vS.from(this._model,this);return this._cursors.setStates(s),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,a,r)}setCursorColumnSelectData(e){this._columnSelectData=e}revealAll(e,t,n,s,r,o){const a=this._cursors.getViewPositions();let l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=J.fromPositions(a[0],a[0]),e.emitViewEvent(new _S(t,n,l,c,s,r,o))}revealPrimary(e,t,n,s,r,o){const l=[this._cursors.getPrimaryCursor().viewState.selection];e.emitViewEvent(new _S(t,n,null,l,s,r,o))}saveState(){const e=[],t=this._cursors.getSelections();for(let n=0,s=t.length;n<s;n++){const r=t[n];e.push({inSelectionMode:!r.isEmpty(),selectionStart:{lineNumber:r.selectionStartLineNumber,column:r.selectionStartColumn},position:{lineNumber:r.positionLineNumber,column:r.positionColumn}})}return e}restoreState(e,t){const n=[];for(let s=0,r=t.length;s<r;s++){const o=t[s];let a=1,l=1;o.position&&o.position.lineNumber&&(a=o.position.lineNumber),o.position&&o.position.column&&(l=o.position.column);let c=a,u=l;o.selectionStart&&o.selectionStart.lineNumber&&(c=o.selectionStart.lineNumber),o.selectionStart&&o.selectionStart.column&&(u=o.selectionStart.column),n.push({selectionStartLineNumber:c,selectionStartColumn:u,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,Yt.fromModelSelections(n)),this.revealAll(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof fme){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const n=t.rawContentChangedEvent;if(this._knownModelVersionId=n.versionId,this._isHandling)return;const s=n.containsEvent(1);if(this._prevEditOperationType=0,s)this._cursors.dispose(),this._cursors=new ate(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&n.resultingSelection&&n.resultingSelection.length>0){const r=Yt.fromModelSelections(n.resultingSelection);this.setStates(e,"modelChange",n.isUndoing?5:n.isRedoing?6:2,r)&&this.revealAll(e,"modelChange",!1,0,!0,0)}else{const r=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,Yt.fromModelSelections(r))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,s){this.setStates(e,t,s,Yt.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const n=[],s=[];for(let a=0,l=e.length;a<l;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),s.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const r=this._model.deltaDecorations([],n),o=this._model.deltaDecorations([],s);this._autoClosedActions.push(new cte(this._model,r,o))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=Ott.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const n=[],s=[];for(let r=0;r<e.commands.length;r++){const o=e.commands[r];o instanceof Nz&&o.enclosingRange&&o.closeCharacterRange&&(n.push(o.closeCharacterRange),s.push(o.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,s),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,s,r){const o=vS.from(this._model,this);if(o.equals(s))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new ptt(l,a,n)),!s||s.cursorState.length!==o.cursorState.length||o.cursorState.some((c,u)=>!c.modelState.equals(s.cursorState[u].modelState))){const c=s?s.cursorState.map(d=>d.modelState.selection):null,u=s?s.modelVersionId:0;e.emitOutgoingEvent(new fN(c,a,u,o.modelVersionId,t||"keyboard",n,r))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let n=0,s=e.length;n<s;n++){const r=e[n];if(!r.text||r.text.indexOf(`
`)>=0)return null;const o=r.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;const a=o[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,u=r.text.length-o[2].length-1,d=r.text.lastIndexOf(c,u-1);if(d===-1)return null;t.push([d,u])}return t}executeEdits(e,t,n,s){let r=null;t==="snippet"&&(r=this._findAutoClosingPairs(n)),r&&(n[0]._isTracked=!0);const o=[],a=[],l=this._model.pushEditOperations(this.getSelections(),n,c=>{if(r)for(let d=0,h=r.length;d<h;d++){const[g,p]=r[d],_=c[d],v=_.range.startLineNumber,y=_.range.startColumn-1+g,w=_.range.startColumn-1+p;o.push(new J(v,w+1,v,w+2)),a.push(new J(v,y+1,v,w+2))}const u=s(c);return u&&(this._isHandling=!0),u});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),o.length>0&&this._pushAutoClosedAction(o,a)}_executeEdit(e,t,n,s=0){if(this.context.cursorConfig.readOnly)return;const r=vS.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(o){Un(o)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,s,r,!1)&&this.revealAll(t,n,!1,0,!0,0)}getAutoClosedCharacters(){return cte.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new bS(this._model,this.getSelections())}endComposition(e,t){const n=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(qp.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,n,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){const s=t.length;let r=0;for(;r<s;){const o=FH(t,r),a=t.substr(r,o);this._executeEditOperation(qp.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),r+=o}}else this._executeEditOperation(qp.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,s,r,o){if(t.length===0&&n===0&&s===0){if(r!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new Gn(c.lineNumber,c.column+r,c.lineNumber,c.column+r)});this.setSelections(e,o,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(qp.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,s,r))},e,o)}paste(e,t,n,s,r){this._executeEdit(()=>{this._executeEditOperation(qp.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,s||[]))},e,r,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(l1.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new ra(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new ra(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}}class vS{static from(e,t){return new vS(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class cte{static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){const t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const s=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(s&&(t.push(s),s.startLineNumber!==s.endLineNumber))return!1}t.sort(J.compareRangesUsingStarts),e.sort(J.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}}class Ott{static executeCommands(e,t,n){const s={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},r=this._innerExecuteCommands(s,n);for(let o=0,a=s.trackedRanges.length;o<a;o++)s.model._setTrackedRange(s.trackedRanges[o],null,0);return r}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(n.operations.length===0)return null;const s=n.operations,r=this._getLoserCursorMap(s);if(r.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const o=[];for(let c=0,u=s.length;c<u;c++)r.hasOwnProperty(s[c].identifier.major.toString())||o.push(s[c]);n.hadTrackedEditOperation&&o.length>0&&(o[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,o,c=>{const u=[];for(let g=0;g<e.selectionsBefore.length;g++)u[g]=[];for(const g of c)g.identifier&&u[g.identifier.major].push(g);const d=(g,p)=>g.identifier.minor-p.identifier.minor,h=[];for(let g=0;g<e.selectionsBefore.length;g++)u[g].length>0?(u[g].sort(d),h[g]=t[g].computeCursorState(e.model,{getInverseEditOperations:()=>u[g],getTrackedSelection:p=>{const _=parseInt(p,10),v=e.model._getTrackedRange(e.trackedRanges[_]);return e.trackedRangesDirection[_]===0?new Gn(v.startLineNumber,v.startColumn,v.endLineNumber,v.endColumn):new Gn(v.endLineNumber,v.endColumn,v.startLineNumber,v.startColumn)}})):h[g]=e.selectionsBefore[g];return h});a||(a=e.selectionsBefore);const l=[];for(const c in r)r.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,u)=>u-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],s=!1;for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a){const l=this._getEditOperationsFromCommand(e,r,a);n=n.concat(l.operations),s=s||l.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:s}}static _getEditOperationsFromCommand(e,t,n){const s=[];let r=0;const o=(d,h,g=!1)=>{J.isEmpty(d)&&h===""||s.push({identifier:{major:t,minor:r++},range:d,text:h,forceMoveMarkers:g,isAutoWhitespaceEdit:n.insertsAutoWhitespace})};let a=!1;const u={addEditOperation:o,addTrackedEditOperation:(d,h,g)=>{a=!0,o(d,h,g)},trackSelection:(d,h)=>{const g=Gn.liftSelection(d);let p;if(g.isEmpty())if(typeof h=="boolean")h?p=2:p=3;else{const y=e.model.getLineMaxColumn(g.startLineNumber);g.startColumn===y?p=2:p=3}else p=1;const _=e.trackedRanges.length,v=e.model._setTrackedRange(null,g,p);return e.trackedRanges[_]=v,e.trackedRangesDirection[_]=g.getDirection(),_.toString()}};try{n.getEditOperations(e.model,u)}catch(d){return Un(d),{operations:[],hadTrackedEditOperation:!1}}return{operations:s,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,s)=>-J.compareRangesUsingEnds(n.range,s.range));const t={};for(let n=1;n<e.length;n++){const s=e[n-1],r=e[n];if(J.getStartPosition(s.range).isBefore(J.getEndPosition(r.range))){let o;s.identifier.major>r.identifier.major?o=s.identifier.major:o=r.identifier.major,t[o.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===o&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}}class Ftt{constructor(e,t,n){this.text=e,this.startSelection=t,this.endSelection=n}}class bS{static _capture(e,t){const n=[];for(const s of t){if(s.startLineNumber!==s.endLineNumber)return null;n.push(new Ftt(e.getLineContent(s.startLineNumber),s.startColumn-1,s.endColumn-1))}return n}constructor(e,t){this._original=bS._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const n=bS._capture(e,t);if(!n||this._original.length!==n.length)return null;const s=[];for(let r=0,o=this._original.length;r<o;r++)s.push(bS._deduceOutcome(this._original[r],n[r]));return s}static _deduceOutcome(e,t){const n=Math.min(e.startSelection,t.startSelection,Y9(e.text,t.text)),s=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,Q9(e.text,t.text)),r=e.text.substring(n,e.text.length-s),o=t.text.substring(n,t.text.length-s);return new cet(r,e.startSelection-n,e.endSelection-n,o,t.startSelection-n,t.endSelection-n)}}class Btt{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,s=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,s)}}class Vtt{constructor(e,t,n,s,r){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=s,this.minWidth=r,this.prefixSum=0}}var lm;let Wtt=(lm=class{constructor(e,t,n,s){this._instanceId=ahe(++lm.INSTANCE_COUNT),this._pendingChanges=new Btt,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=s}static findInsertionIndex(e,t,n){let s=0,r=e.length;for(;s<r;){const o=s+r>>>1;t===e[o].afterLineNumber?n<e[o].ordinal?r=o:s=o+1:t<e[o].afterLineNumber?r=o:s=o+1}return s}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(s,r,o,a)=>{t=!0,s=s|0,r=r|0,o=o|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new Vtt(l,s,r,o,a)),l},changeOneWhitespace:(s,r,o)=>{t=!0,r=r|0,o=o|0,this._pendingChanges.change({id:s,newAfterLineNumber:r,newHeight:o})},removeWhitespace:s=>{t=!0,this._pendingChanges.remove({id:s})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of n){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const s=new Set;for(const l of n)s.add(l.id);const r=new Map;for(const l of t)r.set(l.id,l);const o=l=>{const c=[];for(const u of l)if(!s.has(u.id)){if(r.has(u.id)){const d=r.get(u.id);u.afterLineNumber=d.newAfterLineNumber,u.height=d.newHeight}c.push(u)}return c},a=o(this._arr).concat(o(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=lm.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,s=t.length;n<s;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const s=this._findWhitespaceIndex(e);if(s!==-1&&(this._arr[s].height!==n&&(this._arr[s].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,s-1)),this._arr[s].afterLineNumber!==t)){const r=this._arr[s];this._removeWhitespace(s),r.afterLineNumber=t,this._insertWhitespace(r)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,s=this._arr.length;n<s;n++){const r=this._arr[n].afterLineNumber;e<=r&&r<=t?this._arr[n].afterLineNumber=e-1:r>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,s=this._arr.length;n<s;n++){const r=this._arr[n].afterLineNumber;e<=r&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let n=0,s=t.length-1;for(;n<=s;){const o=(s-n|0)/2|0,a=n+o|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else s=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const n=this._findLastWhitespaceBeforeLineNumber(e)+1;return n<this._arr.length?n:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let n;e>1?n=this._lineHeight*(e-1):n=0;const s=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return n+s+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;const n=this._lineHeight*e,s=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return n+s+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,n=this._lineHeight;let s=1,r=t;for(;s<r;){const o=(s+r)/2|0,a=this.getVerticalOffsetForLineNumber(o)|0;if(e>=a+n)s=o+1;else{if(e>=a)return o;r=o}}return s>t?t:s}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this._lineHeight,s=this.getLineNumberAtOrAfterVerticalOffset(e)|0,r=this.getVerticalOffsetForLineNumber(s)|0;let o=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(s)|0;const l=this.getWhitespacesCount()|0;let c,u;a===-1?(a=l,u=o+1,c=0):(u=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let d=r,h=d;const g=5e5;let p=0;r>=g&&(p=Math.floor(r/g)*g,p=Math.floor(p/n)*n,h-=p);const _=[],v=e+(t-e)/2;let y=-1;for(let T=s;T<=o;T++){if(y===-1){const R=d,L=d+n;(R<=v&&v<L||R>v)&&(y=T)}for(d+=n,_[T-s]=h,h+=n;u===T;)h+=c,d+=c,a++,a>=l?u=o+1:(u=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(d>=t){o=T;break}}y===-1&&(y=o);const w=this.getVerticalOffsetForLineNumber(o)|0;let x=s,k=o;return x<k&&r<e&&x++,x<k&&w+n>t&&k--,{bigNumbersDelta:p,startLineNumber:s,endLineNumber:o,relativeVerticalOffset:_,centeredLineNumber:y,completelyVisibleStartLineNumber:x,completelyVisibleEndLineNumber:k,lineHeight:this._lineHeight}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n;t>=1?n=this._lineHeight*t:n=0;let s;return e>0?s=this.getWhitespacesAccumulatedHeight(e-1):s=0,n+s+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;const s=this.getVerticalOffsetForWhitespaceIndex(n),r=this.getHeightForWhitespaceIndex(n);if(e>=s+r)return-1;for(;t<n;){const o=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(e>=a+l)t=o+1;else{if(e>=a)return o;n=o}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const s=this.getHeightForWhitespaceIndex(t),r=this.getIdForWhitespaceIndex(t),o=this.getAfterLineNumberForWhitespaceIndex(t);return{id:r,afterLineNumber:o,verticalOffset:n,height:s}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),s=this.getWhitespacesCount()-1;if(n<0)return[];const r=[];for(let o=n;o<=s;o++){const a=this.getVerticalOffsetForWhitespaceIndex(o),l=this.getHeightForWhitespaceIndex(o);if(a>=t)break;r.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:a,height:l})}return r}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}},lm.INSTANCE_COUNT=0,lm);const Htt=125;class xC{constructor(e,t,n,s){e=e|0,t=t|0,n=n|0,s=s|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),s<0&&(s=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=s,this.scrollHeight=Math.max(n,s)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class Utt extends be{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new se),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new xC(0,0,0,0),this._scrollable=this._register(new zy({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,s=t.contentHeight!==e.contentHeight;(n||s)&&this._onDidContentSizeChange.fire(new Fz(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class ztt extends be{constructor(e,t,n){super(),this._configuration=e;const s=this._configuration.options,r=s.get(146),o=s.get(84);this._linesLayout=new Wtt(t,s.get(67),o.top,o.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new Utt(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new xC(r.contentWidth,0,r.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(115)?Htt:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(67)&&this._linesLayout.setLineHeight(t.get(67)),e.hasChanged(84)){const n=t.get(84);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(146)){const n=t.get(146),s=n.contentWidth,r=n.height,o=this._scrollable.getScrollDimensions(),a=o.contentWidth;this._scrollable.setScrollDimensions(new xC(s,o.contentWidth,r,this._getContentHeight(s,r,a)))}else this._updateHeight();e.hasChanged(115)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const s=this._configuration.options.get(104);return s.horizontal===2||e>=t?0:s.horizontalScrollbarSize}_getContentHeight(e,t,n){const s=this._configuration.options;let r=this._linesLayout.getLinesTotalHeight();return s.get(106)?r+=Math.max(0,t-s.get(67)-s.get(84).bottom):s.get(104).ignoreHorizontalScrollbarInContentHeight||(r+=this._getHorizontalScrollbarHeight(e,n)),r}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,s=e.contentWidth;this._scrollable.setScrollDimensions(new xC(t,e.contentWidth,n,this._getContentHeight(t,n,s)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new Nee(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new Nee(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){const e=this._configuration.options,t=this._maxLineWidth,n=e.get(147),s=e.get(50),r=e.get(146);if(n.isViewportWrapping){const o=e.get(73);return t>r.contentWidth+s.typicalHalfwidthCharacterWidth&&o.enabled&&o.side==="right"?t+r.verticalScrollbarWidth:t}else{const o=e.get(105)*s.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+o+r.verticalScrollbarWidth,a,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){const e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new xC(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),s=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-s,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}class jtt{constructor(e,t,n,s,r){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=s,this._coordinatesConverter=r,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const s=e.range,r=e.options;let o;if(r.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new ue(s.startLineNumber,1),0,!1,!0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new ue(s.endLineNumber,this.model.getLineMaxColumn(s.endLineNumber)),1);o=new J(a.lineNumber,a.column,l.lineNumber,l.column)}else o=this._coordinatesConverter.convertModelRangeToViewRange(s,1);n=new Zme(o,r),this._decorationsCache[t]=n}return n}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e,t=!1,n=!1){const s=new J(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(s,t,n).inlineDecorations[0]}_getDecorationsInRange(e,t,n){const s=this._linesCollection.getDecorationsInRange(e,this.editorId,HI(this.configuration.options),t,n),r=e.startLineNumber,o=e.endLineNumber,a=[];let l=0;const c=[];for(let u=r;u<=o;u++)c[u-r]=[];for(let u=0,d=s.length;u<d;u++){const h=s[u],g=h.options;if(!$tt(this.model,h))continue;const p=this._getOrCreateViewModelDecoration(h),_=p.range;if(a[l++]=p,g.inlineClassName){const v=new dS(_,g.inlineClassName,g.inlineClassNameAffectsLetterSpacing?3:0),y=Math.max(r,_.startLineNumber),w=Math.min(o,_.endLineNumber);for(let x=y;x<=w;x++)c[x-r].push(v)}if(g.beforeContentClassName&&r<=_.startLineNumber&&_.startLineNumber<=o){const v=new dS(new J(_.startLineNumber,_.startColumn,_.startLineNumber,_.startColumn),g.beforeContentClassName,1);c[_.startLineNumber-r].push(v)}if(g.afterContentClassName&&r<=_.endLineNumber&&_.endLineNumber<=o){const v=new dS(new J(_.endLineNumber,_.endColumn,_.endLineNumber,_.endColumn),g.afterContentClassName,2);c[_.endLineNumber-r].push(v)}}return{decorations:a,inlineDecorations:c}}}function $tt(i,e){return!(e.options.hideInCommentTokens&&qtt(i,e)||e.options.hideInStringTokens&&Ktt(i,e))}function qtt(i,e){return ype(i,e.range,t=>t===1)}function Ktt(i,e){return ype(i,e.range,t=>t===2)}function ype(i,e,t){for(let n=e.startLineNumber;n<=e.endLineNumber;n++){const s=i.tokenization.getLineTokens(n),r=n===e.startLineNumber,o=n===e.endLineNumber;let a=r?s.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<s.getCount()&&!(o&&s.getStartOffset(a)>e.endColumn-1);){if(!t(s.getStandardTokenType(a)))return!1;a++}}return!0}function F6(i,e){return i===null?e?gN.INSTANCE:mN.INSTANCE:new Gtt(i,e)}class Gtt{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,n){this._assertVisible();const s=n>0?this._projectionData.breakOffsets[n-1]:0,r=this._projectionData.breakOffsets[n];let o;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((c,u)=>new pu(0,0,c+1,this._projectionData.injectionOptions[u],0));o=pu.applyInjectedText(e.getLineContent(t),a).substring(s,r)}else o=e.getValueInRange({startLineNumber:t,startColumn:s+1,endLineNumber:t,endColumn:r+1});return n>0&&(o=ute(this._projectionData.wrappedTextIndentLength)+o),o}getViewLineLength(e,t,n){return this._assertVisible(),this._projectionData.getLineLength(n)}getViewLineMinColumn(e,t,n){return this._assertVisible(),this._projectionData.getMinOutputOffset(n)+1}getViewLineMaxColumn(e,t,n){return this._assertVisible(),this._projectionData.getMaxOutputOffset(n)+1}getViewLineData(e,t,n){const s=new Array;return this.getViewLinesData(e,t,n,1,0,[!0],s),s[0]}getViewLinesData(e,t,n,s,r,o,a){this._assertVisible();const l=this._projectionData,c=l.injectionOffsets,u=l.injectionOptions;let d=null;if(c){d=[];let g=0,p=0;for(let _=0;_<l.getOutputLineCount();_++){const v=new Array;d[_]=v;const y=_>0?l.breakOffsets[_-1]:0,w=l.breakOffsets[_];for(;p<c.length;){const x=u[p].content.length,k=c[p]+g,T=k+x;if(k>w)break;if(y<T){const R=u[p];if(R.inlineClassName){const L=_>0?l.wrappedTextIndentLength:0,I=L+Math.max(k-y,0),A=L+Math.min(T-y,w-y);I!==A&&v.push(new MZe(I,A,R.inlineClassName,R.inlineClassNameAffectsLetterSpacing))}}if(T<=w)g+=x,p++;else break}}}let h;c?h=e.tokenization.getLineTokens(t).withInserted(c.map((g,p)=>({offset:g,text:u[p].content,tokenMetadata:tr.defaultTokenMetadata}))):h=e.tokenization.getLineTokens(t);for(let g=n;g<n+s;g++){const p=r+g-n;if(!o[p]){a[p]=null;continue}a[p]=this._getViewLineData(h,d?d[g]:null,g)}}_getViewLineData(e,t,n){this._assertVisible();const s=this._projectionData,r=n>0?s.wrappedTextIndentLength:0,o=n>0?s.breakOffsets[n-1]:0,a=s.breakOffsets[n],l=e.sliceAndInflate(o,a,r);let c=l.getLineContent();n>0&&(c=ute(s.wrappedTextIndentLength)+c);const u=this._projectionData.getMinOutputOffset(n)+1,d=c.length+1,h=n+1<this.getViewLineCount(),g=n===0?0:s.breakOffsetsVisibleColumn[n-1];return new Sz(c,h,u,d,g,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,n=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,n).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const n=this._projectionData.translateToOutputPosition(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n){const s=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,n).toPosition(s)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}const SR=class SR{constructor(){}isVisible(){return!0}setVisible(e){return e?this:mN.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){const s=e.tokenization.getLineTokens(t),r=s.getLineContent();return new Sz(r,!1,1,r.length+1,0,s.inflate(),null)}getViewLinesData(e,t,n,s,r,o,a){if(!o[r]){a[r]=null;return}a[r]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new ue(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n){return t}getInjectedTextAt(e,t){return null}};SR.INSTANCE=new SR;let gN=SR;const kR=class kR{constructor(){}isVisible(){return!1}setVisible(e){return e?gN.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,s,r,o,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}};kR.INSTANCE=new kR;let mN=kR;const B6=[""];function ute(i){if(i>=B6.length)for(let e=1;e<=i;e++)B6[e]=Ytt(e);return B6[i]}function Ytt(i){return new Array(i+1).join(" ")}class Qtt{constructor(e,t,n,s,r,o,a,l,c,u){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=s,this.fontInfo=r,this.tabSize=o,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this.wordBreak=u,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new Ztt(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const n=this.model.getLinesContent(),s=this.model.getInjectedTextDecorations(this._editorId),r=n.length,o=this.createLineBreaksComputer(),a=new bf(pu.fromDecorations(s));for(let _=0;_<r;_++){const v=a.takeWhile(y=>y.lineNumber===_+1);o.addRequest(n[_],v,t?t[_]:null)}const l=o.finalize(),c=[],u=this.hiddenAreasDecorationIds.map(_=>this.model.getDecorationRange(_)).sort(J.compareRangesUsingStarts);let d=1,h=0,g=-1,p=g+1<u.length?h+1:r+2;for(let _=0;_<r;_++){const v=_+1;v===p&&(g++,d=u[g].startLineNumber,h=u[g].endLineNumber,p=g+1<u.length?h+1:r+2);const y=v>=d&&v<=h,w=F6(l[_],!y);c[_]=w.getViewLineCount(),this.modelLineProjections[_]=w}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new HWe(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(h=>this.model.validateRange(h)),n=Xtt(t),s=this.hiddenAreasDecorationIds.map(h=>this.model.getDecorationRange(h)).sort(J.compareRangesUsingStarts);if(n.length===s.length){let h=!1;for(let g=0;g<n.length;g++)if(!n[g].equalsRange(s[g])){h=!0;break}if(!h)return!1}const r=n.map(h=>({range:h,options:Ss.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,r);const o=n;let a=1,l=0,c=-1,u=c+1<o.length?l+1:this.modelLineProjections.length+2,d=!1;for(let h=0;h<this.modelLineProjections.length;h++){const g=h+1;g===u&&(c++,a=o[c].startLineNumber,l=o[c].endLineNumber,u=c+1<o.length?l+1:this.modelLineProjections.length+2);let p=!1;if(g>=a&&g<=l?this.modelLineProjections[h].isVisible()&&(this.modelLineProjections[h]=this.modelLineProjections[h].setVisible(!1),p=!0):(d=!0,this.modelLineProjections[h].isVisible()||(this.modelLineProjections[h]=this.modelLineProjections[h].setVisible(!0),p=!0)),p){const _=this.modelLineProjections[h].getViewLineCount();this.projectedModelLineLineCounts.setValue(h,_)}}return d||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,s,r){const o=this.fontInfo.equals(e),a=this.wrappingStrategy===t,l=this.wrappingColumn===n,c=this.wrappingIndent===s,u=this.wordBreak===r;if(o&&a&&l&&c&&u)return!1;const d=o&&a&&!l&&c&&u;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=s,this.wordBreak=r;let h=null;if(d){h=[];for(let g=0,p=this.modelLineProjections.length;g<p;g++)h[g]=this.modelLineProjections[g].getProjectionData()}return this._constructLines(!1,h),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;const s=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,r=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new XF(s,r)}onModelLinesInserted(e,t,n,s){if(!e||e<=this._validModelVersionId)return null;const r=t>2&&!this.modelLineProjections[t-2].isVisible(),o=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],c=[];for(let u=0,d=s.length;u<d;u++){const h=F6(s[u],!r);l.push(h);const g=h.getViewLineCount();a+=g,c[u]=g}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new ZF(o,o+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const s=t-1,r=this.modelLineProjections[s].getViewLineCount(),o=this.modelLineProjections[s].isVisible(),a=F6(n,o);this.modelLineProjections[s]=a;const l=this.modelLineProjections[s].getViewLineCount();let c=!1,u=0,d=-1,h=0,g=-1,p=0,_=-1;r>l?(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,d=u+l-1,p=d+1,_=p+(r-l)-1,c=!0):r<l?(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,d=u+r-1,h=d+1,g=h+(l-r)-1,c=!0):(u=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,d=u+l-1),this.projectedModelLineLineCounts.setValue(s,l);const v=u<=d?new bpe(u,d-u+1):null,y=h<=g?new ZF(h,g):null,w=p<=_?new XF(p,_):null;return[c,v,y,w]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const s=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),r=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),o=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.guides.getActiveIndentGuide(s.lineNumber,r.lineNumber,o.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,s=t.remainder;return new dte(n+1,s)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new ue(e.modelLineNumber,s)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),s=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new ue(e.modelLineNumber,s)}getViewLineInfosGroupedByModelRanges(e,t){const n=this.getViewLineInfo(e),s=this.getViewLineInfo(t),r=new Array;let o=this.getModelStartPositionOfViewLine(n),a=new Array;for(let l=n.modelLineNumber;l<=s.modelLineNumber;l++){const c=this.modelLineProjections[l-1];if(c.isVisible()){const u=l===n.modelLineNumber?n.modelLineWrappedLineIdx:0,d=l===s.modelLineNumber?s.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let h=u;h<d;h++)a.push(new dte(l,h))}if(!c.isVisible()&&o){const u=new ue(l-1,this.model.getLineMaxColumn(l-1)+1),d=J.fromPositions(o,u);r.push(new hte(d,a)),a=[],o=null}else c.isVisible()&&!o&&(o=new ue(l,1))}if(o){const l=J.fromPositions(o,this.getModelEndPositionOfViewLine(s));r.push(new hte(l,a))}return r}getViewLinesBracketGuides(e,t,n,s){const r=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,o=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,r,s);for(const u of a.viewLines){const h=c[u.modelLineNumber-l].map(g=>{if(g.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,g.forWrappedLinesAfterColumn).lineNumber>=u.modelLineWrappedLineIdx||g.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,g.forWrappedLinesBeforeOrAtColumn).lineNumber<u.modelLineWrappedLineIdx)return;if(!g.horizontalLine)return g;let p=-1;if(g.column!==-1){const y=this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,g.column);if(y.lineNumber===u.modelLineWrappedLineIdx)p=y.column;else if(y.lineNumber<u.modelLineWrappedLineIdx)p=this.getMinColumnOfViewLine(u);else if(y.lineNumber>u.modelLineWrappedLineIdx)return}const _=this.convertModelPositionToViewPosition(u.modelLineNumber,g.horizontalLine.endColumn),v=this.modelLineProjections[u.modelLineNumber-1].getViewPositionOfModelPosition(0,g.horizontalLine.endColumn);return v.lineNumber===u.modelLineWrappedLineIdx?new a0(g.visibleColumn,p,g.className,new tS(g.horizontalLine.top,_.column),-1,-1):v.lineNumber<u.modelLineWrappedLineIdx||g.visibleColumn!==-1?void 0:new a0(g.visibleColumn,p,g.className,new tS(g.horizontalLine.top,this.getMaxColumnOfViewLine(u)),-1,-1)});o.push(h.filter(g=>!!g))}}return o}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let r=[];const o=[],a=[],l=n.lineNumber-1,c=s.lineNumber-1;let u=null;for(let p=l;p<=c;p++){const _=this.modelLineProjections[p];if(_.isVisible()){const v=_.getViewLineNumberOfModelPosition(0,p===l?n.column:1),y=_.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(p+1)),w=y-v+1;let x=0;w>1&&_.getViewLineMinColumn(this.model,p+1,y)===1&&(x=v===0?1:2),o.push(w),a.push(x),u===null&&(u=new ue(p+1,0))}else u!==null&&(r=r.concat(this.model.guides.getLinesIndentGuides(u.lineNumber,p)),u=null)}u!==null&&(r=r.concat(this.model.guides.getLinesIndentGuides(u.lineNumber,s.lineNumber)),u=null);const d=t-e+1,h=new Array(d);let g=0;for(let p=0,_=r.length;p<_;p++){let v=r[p];const y=Math.min(d-g,o[p]),w=a[p];let x;w===2?x=0:w===1?x=1:x=y;for(let k=0;k<y;k++)k===x&&(v=0),h[g++]=v}return h}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const s=this.projectedModelLineLineCounts.getIndexOf(e-1);let r=e;const o=s.index,a=s.remainder,l=[];for(let c=o,u=this.model.getLineCount();c<u;c++){const d=this.modelLineProjections[c];if(!d.isVisible())continue;const h=c===o?a:0;let g=d.getViewLineCount()-h,p=!1;if(r+g>t&&(p=!0,g=t-r+1),d.getViewLinesData(this.model,c+1,h,g,r-e,n,l),r+=g,p)break}return l}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);const s=this.projectedModelLineLineCounts.getIndexOf(e-1),r=s.index,o=s.remainder,a=this.modelLineProjections[r],l=a.getViewLineMinColumn(this.model,r+1,o),c=a.getViewLineMaxColumn(this.model,r+1,o);t<l&&(t=l),t>c&&(t=c);const u=a.getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new ue(r+1,u)).equals(n)?new ue(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),s=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new J(n.lineNumber,n.column,s.lineNumber,s.column)}convertViewPositionToModelPosition(e,t){const n=this.getViewLineInfo(e),s=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new ue(n.modelLineNumber,s))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new J(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=2,s=!1,r=!1){const o=this.model.validatePosition(new ue(e,t)),a=o.lineNumber,l=o.column;let c=a-1,u=!1;if(r)for(;c<this.modelLineProjections.length&&!this.modelLineProjections[c].isVisible();)c++,u=!0;else for(;c>0&&!this.modelLineProjections[c].isVisible();)c--,u=!0;if(c===0&&!this.modelLineProjections[c].isVisible())return new ue(s?0:1,1);const d=1+this.projectedModelLineLineCounts.getPrefixSum(c);let h;return u?r?h=this.modelLineProjections[c].getViewPositionOfModelPosition(d,1,n):h=this.modelLineProjections[c].getViewPositionOfModelPosition(d,this.model.getLineMaxColumn(c+1),n):h=this.modelLineProjections[a-1].getViewPositionOfModelPosition(d,l,n),h}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return J.fromPositions(n)}else{const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),s=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new J(n.lineNumber,n.column,s.lineNumber,s.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.modelLineProjections[n].isVisible()){const r=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(r,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(n===0&&!this.modelLineProjections[n].isVisible())return 1;const s=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(s,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n,s,r){const o=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),a=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(a.lineNumber-o.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new J(o.lineNumber,1,a.lineNumber,a.column),t,n,s,r);let l=[];const c=o.lineNumber-1,u=a.lineNumber-1;let d=null;for(let _=c;_<=u;_++)if(this.modelLineProjections[_].isVisible())d===null&&(d=new ue(_+1,_===c?o.column:1));else if(d!==null){const y=this.model.getLineMaxColumn(_);l=l.concat(this.model.getDecorationsInRange(new J(d.lineNumber,d.column,_,y),t,n,s)),d=null}d!==null&&(l=l.concat(this.model.getDecorationsInRange(new J(d.lineNumber,d.column,a.lineNumber,a.column),t,n,s)),d=null),l.sort((_,v)=>{const y=J.compareRangesUsingStarts(_.range,v.range);return y===0?_.id<v.id?-1:_.id>v.id?1:0:y});const h=[];let g=0,p=null;for(const _ of l){const v=_.id;p!==v&&(p=v,h[g++]=_)}return h}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function Xtt(i){if(i.length===0)return[];const e=i.slice();e.sort(J.compareRangesUsingStarts);const t=[];let n=e[0].startLineNumber,s=e[0].endLineNumber;for(let r=1,o=e.length;r<o;r++){const a=e[r];a.startLineNumber>s+1?(t.push(new J(n,1,s,1)),n=a.startLineNumber,s=a.endLineNumber):a.endLineNumber>s&&(s=a.endLineNumber)}return t.push(new J(n,1,s,1)),t}class dte{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}class hte{constructor(e,t){this.modelRange=e,this.viewLines=t}}class Ztt{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,n,s){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,n,s)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class Jtt{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new ent(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,s){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,n,s)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new XF(t,n)}onModelLinesInserted(e,t,n,s){return new ZF(t,n)}onModelLineChanged(e,t,n){return[!1,new bpe(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const n=t-e+1,s=new Array(n);for(let r=0;r<n;r++)s[r]=0;return s}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),n=t.getLineContent();return new Sz(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){const s=this.model.getLineCount();e=Math.min(Math.max(1,e),s),t=Math.min(Math.max(1,t),s);const r=[];for(let o=e;o<=t;o++){const a=o-e;r[a]=n[a]?this.getViewLineData(o):null}return r}getDecorationsInRange(e,t,n,s,r){return this.model.getDecorationsInRange(e,t,n,s,r)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class ent{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}const yp=Dm.Right;class tnt{constructor(e){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((e+1)*yp/8))}reset(e){const t=Math.ceil((e+1)*yp/8);this.lanes.length<t?this.lanes=new Uint8Array(t):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(e,t,n){n&&(this.persist|=1<<e-1);for(let s=t.startLineNumber;s<=t.endLineNumber;s++){const r=yp*s+(e-1);this.lanes[r>>>3]|=1<<r%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(s))}}getLanesAtLine(e){const t=[];let n=yp*e;for(let s=0;s<yp;s++)(this.persist&1<<s||this.lanes[n>>>3]&1<<n%8)&&t.push(s+1),n++;return t.length?t:[Dm.Center]}countAtLine(e){let t=yp*e,n=0;for(let s=0;s<yp;s++)(this.persist&1<<s||this.lanes[t>>>3]&1<<t%8)&&n++,t++;return n}}let nnt=class extends be{constructor(e,t,n,s,r,o,a,l,c,u){if(super(),this.languageConfigurationService=a,this._themeService=l,this._attachedView=c,this._transactionalTarget=u,this.hiddenAreasModel=new snt,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new ktt,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new P_(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new so(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=Wz.create(this.model),this.glyphLanes=new tnt(0),this.model.isTooLargeForTokenization())this._lines=new Jtt(this.model);else{const d=this._configuration.options,h=d.get(50),g=d.get(140),p=d.get(147),_=d.get(139),v=d.get(130);this._lines=new Qtt(this._editorId,this.model,s,r,h,this.model.getOptions().tabSize,g,p.wrappingColumn,_,v)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new Mtt(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new ztt(this._configuration,this.getLineCount(),o)),this._register(this.viewLayout.onDidScroll(d=>{d.scrollTopChanged&&this._handleVisibleLinesChanged(),d.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new btt(d)),this._eventDispatcher.emitOutgoingEvent(new Vz(d.oldScrollWidth,d.oldScrollLeft,d.oldScrollHeight,d.oldScrollTop,d.scrollWidth,d.scrollLeft,d.scrollHeight,d.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(d=>{this._eventDispatcher.emitOutgoingEvent(d)})),this._decorations=new jtt(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(d=>{try{const h=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(h,d)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(uN.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new Ctt)})),this._register(this._themeService.onDidColorThemeChange(d=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new ytt(d))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new J(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new _tt(e)),this._eventDispatcher.emitOutgoingEvent(new Bz(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new ftt)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new gtt)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new ue(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new gte(t,this._viewportStart.startLineDelta)}return new gte(null,0)}_onConfigurationChanged(e,t){const n=this._captureStableViewport(),s=this._configuration.options,r=s.get(50),o=s.get(140),a=s.get(147),l=s.get(139),c=s.get(130);this._lines.setWrappingSettings(r,o,a.wrappingColumn,l,c)&&(e.emitViewEvent(new yT),e.emitViewEvent(new wT),e.emitViewEvent(new bp(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(92)&&(this._decorations.reset(),e.emitViewEvent(new bp(null))),t.hasChanged(99)&&(this._decorations.reset(),e.emitViewEvent(new bp(null))),e.emitViewEvent(new mtt(t)),this.viewLayout.onConfigurationChanged(t),n.recoverViewportStart(this.coordinatesConverter,this.viewLayout),P_.shouldRecreate(t)&&(this.cursorConfig=new P_(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const n=this._eventDispatcher.beginEmitViewEvents();let s=!1,r=!1;const o=e instanceof w0?e.rawContentChangedEvent.changes:e.changes,a=e instanceof w0?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(const d of o)switch(d.changeType){case 4:{for(let h=0;h<d.detail.length;h++){const g=d.detail[h];let p=d.injectedTexts[h];p&&(p=p.filter(_=>!_.ownerId||_.ownerId===this._editorId)),l.addRequest(g,p,null)}break}case 2:{let h=null;d.injectedText&&(h=d.injectedText.filter(g=>!g.ownerId||g.ownerId===this._editorId)),l.addRequest(d.detail,h,null);break}}const c=l.finalize(),u=new bf(c);for(const d of o)switch(d.changeType){case 1:{this._lines.onModelFlushed(),n.emitViewEvent(new yT),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),s=!0;break}case 3:{const h=this._lines.onModelLinesDeleted(a,d.fromLineNumber,d.toLineNumber);h!==null&&(n.emitViewEvent(h),this.viewLayout.onLinesDeleted(h.fromLineNumber,h.toLineNumber)),s=!0;break}case 4:{const h=u.takeCount(d.detail.length),g=this._lines.onModelLinesInserted(a,d.fromLineNumber,d.toLineNumber,h);g!==null&&(n.emitViewEvent(g),this.viewLayout.onLinesInserted(g.fromLineNumber,g.toLineNumber)),s=!0;break}case 2:{const h=u.dequeue(),[g,p,_,v]=this._lines.onModelLineChanged(a,d.lineNumber,h);r=g,p&&n.emitViewEvent(p),_&&(n.emitViewEvent(_),this.viewLayout.onLinesInserted(_.fromLineNumber,_.toLineNumber)),v&&(n.emitViewEvent(v),this.viewLayout.onLinesDeleted(v.fromLineNumber,v.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!s&&r&&(n.emitViewEvent(new wT),n.emitViewEvent(new bp(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const n=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(n){const s=this.coordinatesConverter.convertModelPositionToViewPosition(n.getStartPosition()),r=this.viewLayout.getVerticalOffsetForLineNumber(s.lineNumber);this.viewLayout.setScrollPosition({scrollTop:r+this._viewportStart.startLineDelta},1)}}try{const n=this._eventDispatcher.beginEmitViewEvents();e instanceof w0&&n.emitOutgoingEvent(new Rtt(e.contentChangedEvent)),this._cursor.onModelContentChanged(n,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let n=0,s=e.ranges.length;n<s;n++){const r=e.ranges[n],o=this.coordinatesConverter.convertModelPositionToViewPosition(new ue(r.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new ue(r.toLineNumber,this.model.getLineMaxColumn(r.toLineNumber))).lineNumber;t[n]={fromLineNumber:o,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new wtt(t)),this._eventDispatcher.emitOutgoingEvent(new Ptt(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new vtt),this.cursorConfig=new P_(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new Ntt(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new P_(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new Dtt(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new yT),t.emitViewEvent(new wT),t.emitViewEvent(new bp(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new P_(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new Att(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new bp(e)),this._eventDispatcher.emitOutgoingEvent(new Itt(e))}))}setHiddenAreas(e,t){var o;this.hiddenAreasModel.setHiddenAreas(t,e);const n=this.hiddenAreasModel.getMergedRanges();if(n===this.previousHiddenAreas)return;this.previousHiddenAreas=n;const s=this._captureStableViewport();let r=!1;try{const a=this._eventDispatcher.beginEmitViewEvents();r=this._lines.setHiddenAreas(n),r&&(a.emitViewEvent(new yT),a.emitViewEvent(new wT),a.emitViewEvent(new bp(null)),this._cursor.onLineMappingChanged(a),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());const l=(o=s.viewportStartModelPosition)==null?void 0:o.lineNumber;l&&n.some(u=>u.startLineNumber<=l&&l<=u.endLineNumber)||s.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),r&&this._eventDispatcher.emitOutgoingEvent(new Ttt)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(146),t=this._configuration.options.get(67),n=Math.max(20,Math.round(e.height/t)),s=this.viewLayout.getLinesViewportData(),r=Math.max(1,s.completelyVisibleStartLineNumber-n),o=Math.min(this.getLineCount(),s.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new J(r,this.getLineMinColumn(r),o,this.getLineMaxColumn(o)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];const s=[];let r=0,o=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,c=t.endColumn;for(let u=0,d=n.length;u<d;u++){const h=n[u].startLineNumber,g=n[u].endLineNumber;g<o||h>l||(o<h&&(s[r++]=new J(o,a,h-1,this.model.getLineMaxColumn(h-1))),o=g+1,a=1)}return(o<l||o===l&&a<c)&&(s[r++]=new J(o,a,l,c)),s}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new J(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,s=t.completelyVisibleEndLineNumber;return new J(n,this.getLineMinColumn(n),s,this.getLineMaxColumn(s))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),s=this.coordinatesConverter.convertViewPositionToModelPosition(new ue(n,this.getLineMinColumn(n))),r=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:s,firstPositionDeltaTop:r}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),s=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:s}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,s){return this._lines.getViewLinesBracketGuides(e,t,n,s)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=Ca(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=k1(this.getLineContent(e));return t===-1?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const s=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,s)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const n=this.model.mightContainRTL(),s=this.model.mightContainNonBasicASCII(),r=this.getTabSize(),o=this._lines.getViewLineData(e);return o.inlineDecorations&&(t=[...t,...o.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new al(o.minColumn,o.maxColumn,o.content,o.continuesWithWrappedLine,n,s,o.tokens,t,r,o.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){const s=this._lines.getViewLinesData(e,t,n);return new PZe(this.getTabSize(),s)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,HI(this._configuration.options)),n=new int;for(const s of t){const r=s.options,o=r.overviewRuler;if(!o)continue;const a=o.position;if(a===0)continue;const l=o.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.startLineNumber,s.range.startColumn),u=this.coordinatesConverter.getViewLineNumberOfModelPosition(s.range.endLineNumber,s.range.endColumn);n.accept(l,r.zIndex,c,u,a)}return n.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const n=t.options.overviewRuler;n==null||n.invalidateCachedColor();const s=t.options.minimap;s==null||s.invalidateCachedColor()}}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}getValueLengthInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(n,t)}modifyPosition(e,t){const n=this.coordinatesConverter.convertViewPositionToModelPosition(e),s=this.model.modifyPosition(n,t);return this.coordinatesConverter.convertModelPositionToViewPosition(s)}deduceModelPositionRelativeToViewPosition(e,t,n){const s=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);const o=this.model.getOffsetAt(s)+t;return this.model.getPositionAt(o)}getPlainTextToCopy(e,t,n){const s=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(J.compareRangesUsingStarts);let r=!1,o=!1;for(const l of e)l.isEmpty()?r=!0:o=!0;if(!o){if(!t)return"";const l=e.map(u=>u.startLineNumber);let c="";for(let u=0;u<l.length;u++)u>0&&l[u-1]===l[u]||(c+=this.model.getLineContent(l[u])+s);return c}if(r&&t){const l=[];let c=0;for(const u of e){const d=u.startLineNumber;u.isEmpty()?d!==c&&l.push(this.model.getLineContent(d)):l.push(this.model.getValueInRange(u,n?2:0)),c=d}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,n?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const n=this.model.getLanguageId();if(n===gc||e.length!==1)return null;let s=e[0];if(s.isEmpty()){if(!t)return null;const u=s.startLineNumber;s=new J(u,this.model.getLineMinColumn(u),u,this.model.getLineMaxColumn(u))}const r=this._configuration.options.get(50),o=this._getColorMap(),l=/[:;\\\/<>]/.test(r.fontFamily)||r.fontFamily===il.fontFamily;let c;return l?c=il.fontFamily:(c=r.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${il.fontFamily}`),{mode:n,html:`<div style="color: ${o[1]};background-color: ${o[2]};font-family: ${c};font-weight: ${r.fontWeight};font-size: ${r.fontSize}px;line-height: ${r.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(s,o)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn,a=this.getTabSize();let l="";for(let c=n;c<=r;c++){const u=this.model.tokenization.getLineTokens(c),d=u.getLineContent(),h=c===n?s-1:0,g=c===r?o-1:d.length;d===""?l+="<br>":l+=zje(d,u.inflate(),t,h,g,a,Sa)}return l}_getColorMap(){const e=es.getColorMap(),t=["#000000"];if(e)for(let n=1,s=e.length;n<s;n++)t[n]=ke.Format.CSS.formatHex(e[n]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){return this._withViewEventsCollector(s=>this._cursor.setStates(s,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=0){this._withViewEventsCollector(s=>this._cursor.setSelections(s,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new Ltt);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(s=>this._cursor.executeEdits(s,e,t,n))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,s,r){this._executeCursorEdit(o=>this._cursor.compositionType(o,e,t,n,s,r))}paste(e,t,n,s){this._executeCursorEdit(r=>this._cursor.paste(r,e,t,n,s))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealAllCursors(e,t,n=!1){this._withViewEventsCollector(s=>this._cursor.revealAll(s,e,n,0,t,0))}revealPrimaryCursor(e,t,n=!1){this._withViewEventsCollector(s=>this._cursor.revealPrimary(s,e,n,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new J(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new _S(e,!1,n,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new J(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(s=>s.emitViewEvent(new _S(e,!1,n,null,0,!0,0)))}revealRange(e,t,n,s,r){this._withViewEventsCollector(o=>o.emitViewEvent(new _S(e,!1,n,null,s,t,r)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new Stt),this._eventDispatcher.emitOutgoingEvent(new Ett))}_withViewEventsCollector(e){return this._transactionalTarget.batchChanges(()=>{try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}})}batchEvents(e){this._withViewEventsCollector(()=>{e()})}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}};class Wz{static create(e){const t=e._setTrackedRange(null,new J(1,1,1,1),1);return new Wz(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,n,s,r){this._model=e,this._viewLineNumber=t,this._isValid=n,this._modelTrackedRange=s,this._startLineDelta=r}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const n=e.coordinatesConverter.convertViewPositionToModelPosition(new ue(t,e.getLineMinColumn(t))),s=e.model._setTrackedRange(this._modelTrackedRange,new J(n.lineNumber,n.column,n.lineNumber,n.column),1),r=e.viewLayout.getVerticalOffsetForLineNumber(t),o=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=s,this._startLineDelta=o-r}invalidate(){this._isValid=!1}}class int{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,s,r){const o=this._asMap[e];if(o){const a=o.data,l=a[a.length-3],c=a[a.length-1];if(l===r&&c+1>=n){s>c&&(a[a.length-1]=s);return}a.push(r,n,s)}else{const a=new Kk(e,t,[r,n,s]);this._asMap[e]=a,this.asArray.push(a)}}}class snt{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){const n=this.hiddenAreas.get(e);n&&fte(n,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce((t,n)=>rnt(t,n),[]);return fte(this.ranges,e)?this.ranges:(this.ranges=e,this.ranges)}}function rnt(i,e){const t=[];let n=0,s=0;for(;n<i.length&&s<e.length;){const r=i[n],o=e[s];if(r.endLineNumber<o.startLineNumber-1)t.push(i[n++]);else if(o.endLineNumber<r.startLineNumber-1)t.push(e[s++]);else{const a=Math.min(r.startLineNumber,o.startLineNumber),l=Math.max(r.endLineNumber,o.endLineNumber);t.push(new J(a,1,l,1)),n++,s++}}for(;n<i.length;)t.push(i[n++]);for(;s<e.length;)t.push(e[s++]);return t}function fte(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(!i[t].equalsRange(e[t]))return!1;return!0}class gte{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const n=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),s=t.getVerticalOffsetForLineNumber(n.lineNumber);t.setScrollPosition({scrollTop:s+this.startLineDelta},1)}}var ont=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},fh=function(i,e){return function(t,n){e(t,n,i)}},Ip,R0;let pN=(R0=class extends be{get isSimpleWidget(){return this._configuration.isSimpleWidget}get contextMenuId(){return this._configuration.contextMenuId}constructor(e,t,n,s,r,o,a,l,c,u,d,h){super(),this.languageConfigurationService=d,this._deliveryQueue=q8e(),this._contributions=this._register(new ctt),this._onDidDispose=this._register(new se),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new se({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new se({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new se({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new se({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new se({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new se({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new se({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new se({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new se({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new se({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new se({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new Kr(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new se({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new mte({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new mte({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new Kr(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new Kr(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new Kr(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new Kr(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new Kr(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new Kr(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new Kr(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new Kr(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new Kr(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new Kr(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new Kr(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new Kr(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new Kr(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new Kr(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new Kr(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new Kr(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new Kr(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new se({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new se({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new se({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new se({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._updateCounter=0,this._onBeginUpdate=this._register(new se),this.onBeginUpdate=this._onBeginUpdate.event,this._onEndUpdate=this._register(new se),this.onEndUpdate=this._onEndUpdate.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),r.willCreateCodeEditor();const g={...t};this._domElement=e,this._overflowWidgetsDomNode=g.overflowWidgetsDomNode,delete g.overflowWidgetsDomNode,this._id=++ant,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(n.isSimpleWidget||!1,n.contextMenuId??(n.isSimpleWidget?_r.SimpleEditorContext:_r.EditorContext),g,u)),this._register(this._configuration.onDidChange(v=>{this._onDidChangeConfiguration.fire(v);const y=this._configuration.options;if(v.hasChanged(146)){const w=y.get(146);this._onDidLayoutChange.fire(w)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=r,this._commandService=o,this._themeService=l,this._register(new cnt(this,this._contextKeyService)),this._register(new unt(this,this._contextKeyService,h)),this._instantiationService=this._register(s.createChild(new Gy([Nn,this._contextKeyService]))),this._modelData=null,this._focusTracker=new dnt(e,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let p;Array.isArray(n.contributions)?p=n.contributions:p=Xv.getEditorContributions(),this._contributions.initialize(this,p,this._instantiationService);for(const v of Xv.getEditorActions()){if(this._actions.has(v.id)){Un(new Error(`Cannot have two actions with the same id ${v.id}`));continue}const y=new _pe(v.id,v.label,v.alias,v.metadata,v.precondition??void 0,w=>this._instantiationService.invokeFunction(x=>Promise.resolve(v.runEditorCommand(x,this,w))),this._contextKeyService);this._actions.set(y.id,y)}const _=()=>!this._configuration.options.get(92)&&this._configuration.options.get(36).enabled;this._register(new XFe(this._domElement,{onDragOver:v=>{if(!_())return;const y=this.getTargetAtClientPoint(v.clientX,v.clientY);y!=null&&y.position&&this.showDropIndicatorAt(y.position)},onDrop:async v=>{if(!_()||(this.removeDropIndicator(),!v.dataTransfer))return;const y=this.getTargetAtClientPoint(v.clientX,v.clientY);y!=null&&y.position&&this._onDropIntoEditor.fire({position:y.position,event:v})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){var t;(t=this._modelData)==null||t.view.writeScreenReaderContent(e)}_createConfiguration(e,t,n,s){return new AF(e,t,n,this._domElement,s)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return wz.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?Ui.getWordAtPosition(this._modelData.model,this._configuration.options.get(132),this._configuration.options.get(131),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let n=0;return e&&e.lineEnding&&e.lineEnding===`
`?n=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){try{if(this._beginUpdate(),!this._modelData)return;this._modelData.model.setValue(e)}finally{this._endUpdate()}}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){var t;try{this._beginUpdate();const n=e;if(this._modelData===null&&n===null||this._modelData&&this._modelData.model===n)return;const s={oldModelUrl:((t=this._modelData)==null?void 0:t.model.uri)||null,newModelUrl:(n==null?void 0:n.uri)||null};this._onWillChangeModel.fire(s);const r=this.hasTextFocus(),o=this._detachModel();this._attachModel(n),r&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(s),this._postDetachModelCleanup(o),this._contributionsDisposable=this._contributions.onAfterModelAttached()}finally{this._endUpdate()}}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,n,s){const r=e.model.validatePosition({lineNumber:t,column:n}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(r);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(o.lineNumber,s)}getTopForLineNumber(e,t=!1){return this._modelData?Ip._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?Ip._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,n,s=!1){const r=e.model.validatePosition({lineNumber:t,column:n}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(r);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber,s)}getBottomForLineNumber(e,t=!1){if(!this._modelData)return-1;const n=this._modelData.model.getLineMaxColumn(e);return Ip._getVerticalOffsetAfterPosition(this._modelData,e,n,t)}setHiddenAreas(e,t){var n;(n=this._modelData)==null||n.viewModel.setHiddenAreas(e.map(s=>J.lift(s)),t)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return ws.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!ue.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,s){if(!this._modelData)return;if(!J.isIRange(e))throw new Error("Invalid arguments");const r=this._modelData.model.validateRange(e),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(r);this._modelData.viewModel.revealRange("api",n,o,t,s)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,n){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new J(e,1,e,1),t,!1,n)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,s){if(!ue.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new J(e.lineNumber,e.column,e.lineNumber,e.column),t,n,s)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const n=Gn.isISelection(e),s=J.isIRange(e);if(!n&&!s)throw new Error("Invalid arguments");if(n)this._setSelectionImpl(e,t);else if(s){const r={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(r,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const n=new Gn(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[n])}revealLines(e,t,n=0){this._revealLines(e,t,0,n)}revealLinesInCenter(e,t,n=0){this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._revealLines(e,t,2,n)}revealLinesNearTop(e,t,n=0){this._revealLines(e,t,5,n)}_revealLines(e,t,n,s){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new J(e,1,t,1),n,!1,s)}revealRange(e,t=0,n=!1,s=!0){this._revealRange(e,n?1:0,s,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,n,s){if(!J.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(J.lift(e),t,n,s)}setSelections(e,t="api",n=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let s=0,r=e.length;s<r;s++)if(!Gn.isISelection(e[s]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}hasPendingScrollAnimation(){return this._modelData?this._modelData.viewModel.viewLayout.hasPendingScrollAnimation():!1}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState(),t=this._modelData.viewModel.saveCursorState(),n=this._modelData.viewModel.saveState();return{cursorState:t,viewState:n,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const n=t.cursorState;Array.isArray(n)?n.length>0&&this._modelData.viewModel.restoreCursorState(n):this._modelData.viewModel.restoreCursorState([n]),this._contributions.restoreViewState(t.contributionsState||{});const s=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(s)}}handleInitialized(){var e;(e=this._getViewModel())==null||e.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions.get(e)||null}trigger(e,t,n){n=n||{};try{switch(this._beginUpdate(),t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const r=n;this._type(e,r.text||"");return}case"replacePreviousChar":{const r=n;this._compositionType(e,r.text||"",r.replaceCharCnt||0,0,0);return}case"compositionType":{const r=n;this._compositionType(e,r.text||"",r.replacePrevCharCnt||0,r.replaceNextCharCnt||0,r.positionDelta||0);return}case"paste":{const r=n;this._paste(e,r.text||"",r.pasteOnNewLine||!1,r.multicursorText||null,r.mode||null,r.clipboardEvent);return}case"cut":this._cut(e);return}const s=this.getAction(t);if(s){Promise.resolve(s.run(n)).then(void 0,Un);return}if(!this._modelData||this._triggerEditorCommand(e,t,n))return;this._triggerCommand(t,n)}finally{this._endUpdate()}}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,n,s,r){this._modelData&&this._modelData.viewModel.compositionType(t,n,s,r,e)}_paste(e,t,n,s,r,o){if(!this._modelData)return;const a=this._modelData.viewModel,l=a.getSelection().getStartPosition();a.paste(t,n,s,e);const c=a.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({clipboardEvent:o,range:new J(l.lineNumber,l.column,c.lineNumber,c.column),languageId:r})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){const s=Xv.getEditorCommand(t);return s?(n=n||{},n.source=e,this._instantiationService.invokeFunction(r=>{Promise.resolve(s.runEditorCommand(r,this,n)).then(void 0,Un)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,n){if(!this._modelData||this._configuration.options.get(92))return!1;let s;return n?Array.isArray(n)?s=()=>n:s=n:s=()=>null,this._modelData.viewModel.executeEdits(e,t,s),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new hnt(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,HI(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,HI(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.changeDecorations(n=>n.deltaDecorations(t,[])),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(146)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e,t=!1){this._configuration.observeContainer(e),t||this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id:"+e.getId()),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(n)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(n)}}addGlyphMarginWidget(e){const t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}layoutGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const n=this._glyphMarginWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(n)}}removeGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const n=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(n)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),n=this._configuration.options,s=n.get(146),r=Ip._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),o=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+s.glyphMarginWidth+s.lineNumbersWidth+s.decorationsWidth-this.getScrollLeft();return{top:r,left:o,height:n.get(67)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.viewModel.batchEvents(()=>{this._modelData.view.render(!0,e)})}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){Nr(e,this._configuration.options.get(50))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const n=e.onBeforeAttached(),s=new nnt(this._id,this._configuration,e,Mz.create(rt(this._domElement)),Oz.create(this._configuration.options),a=>xa(rt(this._domElement),a),this.languageConfigurationService,this._themeService,n,{batchChanges:a=>{try{return this._beginUpdate(),a()}finally{this._endUpdate()}}});t.push(e.onWillDispose(()=>this.setModel(null))),t.push(s.onEvent(a=>{switch(a.kind){case 0:this._onDidContentSizeChange.fire(a);break;case 1:this._editorTextFocus.setValue(a.hasFocus);break;case 2:this._onDidScrollChange.fire(a);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(a.reachedMaxCursorCount){const d=this.getOption(80),h=S("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",d);this._notificationService.prompt(JWe.Warning,h,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:S("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const l=[];for(let d=0,h=a.selections.length;d<h;d++)l[d]=a.selections[d].getPosition();const c={position:l[0],secondaryPositions:l.slice(1),reason:a.reason,source:a.source};this._onDidChangeCursorPosition.fire(c);const u={selection:a.selections[0],secondarySelections:a.selections.slice(1),modelVersionId:a.modelVersionId,oldSelections:a.oldSelections,oldModelVersionId:a.oldModelVersionId,source:a.source,reason:a.reason};this._onDidChangeCursorSelection.fire(u);break}case 7:this._onDidChangeModelDecorations.fire(a.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(a.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(a.event);break;case 10:this._onDidChangeModelContent.fire(a.event);break;case 11:this._onDidChangeModelOptions.fire(a.event);break;case 12:this._onDidChangeModelTokens.fire(a.event);break}}));const[r,o]=this._createView(s);if(o){this._domElement.appendChild(r.domNode.domNode);let a=Object.keys(this._contentWidgets);for(let l=0,c=a.length;l<c;l++){const u=a[l];r.addContentWidget(this._contentWidgets[u])}a=Object.keys(this._overlayWidgets);for(let l=0,c=a.length;l<c;l++){const u=a[l];r.addOverlayWidget(this._overlayWidgets[u])}a=Object.keys(this._glyphMarginWidgets);for(let l=0,c=a.length;l<c;l++){const u=a[l];r.addGlyphMarginWidget(this._glyphMarginWidgets[u])}r.render(!1,!0),r.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new lnt(e,s,r,o,t,n)}_createView(e){let t;this.isSimpleWidget?t={paste:(r,o,a,l)=>{this._paste("keyboard",r,o,a,l)},type:r=>{this._type("keyboard",r)},compositionType:(r,o,a,l)=>{this._compositionType("keyboard",r,o,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(r,o,a,l)=>{const c={text:r,pasteOnNewLine:o,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:r=>{const o={text:r};this._commandService.executeCommand("type",o)},compositionType:(r,o,a,l)=>{if(a||l){const c={text:r,replacePrevCharCnt:o,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:r,replaceCharCnt:o};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const n=new VA(e.coordinatesConverter);return n.onKeyDown=r=>this._onKeyDown.fire(r),n.onKeyUp=r=>this._onKeyUp.fire(r),n.onContextMenu=r=>this._onContextMenu.fire(r),n.onMouseMove=r=>this._onMouseMove.fire(r),n.onMouseLeave=r=>this._onMouseLeave.fire(r),n.onMouseDown=r=>this._onMouseDown.fire(r),n.onMouseUp=r=>this._onMouseUp.fire(r),n.onMouseDrag=r=>this._onMouseDrag.fire(r),n.onMouseDrop=r=>this._onMouseDrop.fire(r),n.onMouseDropCanceled=r=>this._onMouseDropCanceled.fire(r),n.onMouseWheel=r=>this._onMouseWheel.fire(r),[new $F(t,this._configuration,this._themeService.getColorTheme(),e,n,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){e==null||e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){var n;if((n=this._contributionsDisposable)==null||n.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&t.remove(),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const t=[{range:new J(e.lineNumber,e.column,e.lineNumber,e.column),options:Ip.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,t){this._contextKeyService.createKey(e,t)}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&this._onBeginUpdate.fire()}_endUpdate(){this._updateCounter--,this._updateCounter===0&&this._onEndUpdate.fire()}},Ip=R0,R0.dropIntoEditorDecorationOptions=Ss.register({description:"workbench-dnd-target",className:"dnd-target"}),R0);pN=Ip=ont([fh(3,Pn),fh(4,Es),fh(5,ll),fh(6,Nn),fh(7,Sc),fh(8,Lu),fh(9,Iu),fh(10,Ud),fh(11,Yn)],pN);let ant=0;class lnt{constructor(e,t,n,s,r,o){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=s,this.listenersToRemove=r,this.attachedView=o}dispose(){br(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}class mte extends be{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new se(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new se(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class Kr extends se{constructor(e,t){super({deliveryQueue:t}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class cnt extends be{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=Ue.editorSimpleInput.bindTo(t),this._editorFocus=Ue.focus.bindTo(t),this._textInputFocus=Ue.textInputFocus.bindTo(t),this._editorTextFocus=Ue.editorTextFocus.bindTo(t),this._tabMovesFocus=Ue.tabMovesFocus.bindTo(t),this._editorReadonly=Ue.readOnly.bindTo(t),this._inDiffEditor=Ue.inDiffEditor.bindTo(t),this._editorColumnSelection=Ue.columnSelection.bindTo(t),this._hasMultipleSelections=Ue.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=Ue.hasNonEmptySelection.bindTo(t),this._canUndo=Ue.canUndo.bindTo(t),this._canRedo=Ue.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(tN.onDidChangeTabFocus(n=>this._tabMovesFocus.set(n))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._tabMovesFocus.set(tN.getTabFocusMode()),this._editorReadonly.set(e.get(92)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class unt extends be{constructor(e,t,n){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=n,this._langId=Ue.languageId.bindTo(t),this._hasCompletionItemProvider=Ue.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=Ue.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=Ue.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=Ue.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=Ue.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=Ue.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=Ue.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=Ue.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=Ue.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=Ue.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=Ue.hasReferenceProvider.bindTo(t),this._hasRenameProvider=Ue.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=Ue.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=Ue.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=Ue.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=Ue.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=Ue.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=Ue.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInEmbeddedEditor=Ue.isInEmbeddedEditor.bindTo(t);const s=()=>this._update();this._register(e.onDidChangeModel(s)),this._register(e.onDidChangeModelLanguage(s)),this._register(n.completionProvider.onDidChange(s)),this._register(n.codeActionProvider.onDidChange(s)),this._register(n.codeLensProvider.onDidChange(s)),this._register(n.definitionProvider.onDidChange(s)),this._register(n.declarationProvider.onDidChange(s)),this._register(n.implementationProvider.onDidChange(s)),this._register(n.typeDefinitionProvider.onDidChange(s)),this._register(n.hoverProvider.onDidChange(s)),this._register(n.documentHighlightProvider.onDidChange(s)),this._register(n.documentSymbolProvider.onDidChange(s)),this._register(n.referenceProvider.onDidChange(s)),this._register(n.renameProvider.onDidChange(s)),this._register(n.documentFormattingEditProvider.onDidChange(s)),this._register(n.documentRangeFormattingEditProvider.onDidChange(s)),this._register(n.signatureHelpProvider.onDidChange(s)),this._register(n.inlayHintsProvider.onDidChange(s)),s()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInEmbeddedEditor.set(e.uri.scheme===Wt.walkThroughSnippet||e.uri.scheme===Wt.vscodeChatCodeBlock)})}}class dnt extends be{constructor(e,t){super(),this._onChange=this._register(new se),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(Ck(e)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus(()=>{this._hasDomElementFocus=!0,this._update()})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasDomElementFocus=!1,this._update()})),t&&(this._overflowWidgetsDomNode=this._register(Ck(t)),this._register(this._overflowWidgetsDomNode.onDidFocus(()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()})),this._register(this._overflowWidgetsDomNode.onDidBlur(()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()})))}_update(){const e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}hasFocus(){return this._hadFocus??!1}}class hnt{get length(){return this._decorationIds.length}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}onDidChange(e,t,n){return this._editor.onDidChangeModelDecorations(s=>{this._isChangingDecorations||e.call(t,s)},n)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const n of this._decorationIds){const s=e.getDecorationRange(n);s&&t.push(s)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}append(e){let t=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations(n=>{t=n.deltaDecorations([],e),this._decorationIds=this._decorationIds.concat(t)})}finally{this._isChangingDecorations=!1}return t}}const fnt=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),gnt=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function V6(i){return fnt+encodeURIComponent(i.toString())+gnt}const mnt=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),pnt=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function _nt(i){return mnt+encodeURIComponent(i.toString())+pnt}Nf((i,e)=>{const t=i.getColor(gU);t&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${V6(t)}") repeat-x bottom left; }`);const n=i.getColor(Rm);n&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${V6(n)}") repeat-x bottom left; }`);const s=i.getColor(s1);s&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${V6(s)}") repeat-x bottom left; }`);const r=i.getColor(WHe);r&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${_nt(r)}") no-repeat bottom left; }`);const o=i.getColor(xKe);o&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${o.rgba.a}; }`)});class _N{static capture(e){if(e.getScrollTop()===0||e.hasPendingScrollAnimation())return new _N(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,n=0;const s=e.getVisibleRanges();if(s.length>0){t=s[0].getStartPosition();const r=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-r}return new _N(e.getScrollTop(),e.getContentHeight(),t,n,e.getPosition())}constructor(e,t,n,s,r){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=n,this._visiblePositionScrollDelta=s,this._cursorPosition=r}restore(e){if(!(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())&&this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;const t=e.getPosition();if(!this._cursorPosition||!t)return;const n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n,1)}}function vnt(i,e,t,n){if(i.length===0)return e;if(e.length===0)return i;const s=[];let r=0,o=0;for(;r<i.length&&o<e.length;){const a=i[r],l=e[o],c=t(a),u=t(l);c<u?(s.push(a),r++):c>u?(s.push(l),o++):(s.push(n(a,l)),r++,o++)}for(;r<i.length;)s.push(i[r]),r++;for(;o<e.length;)s.push(e[o]),o++;return s}function vN(i,e){const t=new Ze,n=i.createDecorationsCollection();return t.add(_A({debugName:()=>`Apply decorations from ${e.debugName}`},s=>{const r=e.read(s);n.set(r)})),t.add({dispose:()=>{n.clear()}}),t}function EC(i,e){return i.appendChild(e),Dt(()=>{e.remove()})}function bnt(i,e){return i.prepend(e),Dt(()=>{e.remove()})}class wpe extends be{get width(){return this._width}get height(){return this._height}get automaticLayout(){return this._automaticLayout}constructor(e,t){super(),this._automaticLayout=!1,this.elementSizeObserver=this._register(new tpe(e,t)),this._width=un(this,this.elementSizeObserver.getWidth()),this._height=un(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(n=>Cs(s=>{this._width.set(this.elementSizeObserver.getWidth(),s),this._height.set(this.elementSizeObserver.getHeight(),s)})))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){this._automaticLayout=e,e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function pte(i,e,t){let n=e.get(),s=n,r=n;const o=un("animatedValue",n);let a=-1;const l=300;let c;t.add(vA({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(d,h)=>(d.didChange(e)&&(h.animate=h.animate||d.change),!0)},(d,h)=>{c!==void 0&&(i.cancelAnimationFrame(c),c=void 0),s=r,n=e.read(d),a=Date.now()-(h.animate?0:l),u()}));function u(){const d=Date.now()-a;r=Math.floor(ynt(d,s,n-s,l)),d<l?c=i.requestAnimationFrame(u):r=n,o.set(r,void 0)}return o}function ynt(i,e,t,n){return i===n?e+t:t*(-Math.pow(2,-10*i/n)+1)+e}class Hz extends be{constructor(e,t,n){super(),this._register(new JF(e,n)),this._register(Om(n,{height:t.actualHeight,top:t.actualTop}))}}class _v{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,t){this._afterLineNumber=e,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=un(this,void 0),this._actualHeight=un(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=n=>{this._actualTop.set(n,void 0)},this.onComputedHeight=n=>{this._actualHeight.set(n,void 0)}}}const xR=class xR{constructor(e,t){this._editor=e,this._domElement=t,this._overlayWidgetId=`managedOverlayWidget-${xR._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}};xR._counter=0;let JF=xR;function Om(i,e){return Cn(t=>{for(let[n,s]of Object.entries(e))s&&typeof s=="object"&&"read"in s&&(s=s.read(t)),typeof s=="number"&&(s=`${s}px`),n=n.replace(/[A-Z]/g,r=>"-"+r.toLowerCase()),i.style[n]=s})}function bN(i,e,t,n){const s=new Ze,r=[];return s.add(lu((o,a)=>{const l=e.read(o),c=new Map,u=new Map;t&&t(!0),i.changeViewZones(d=>{for(const h of r)d.removeZone(h),n==null||n.delete(h);r.length=0;for(const h of l){const g=d.addZone(h);h.setZoneId&&h.setZoneId(g),r.push(g),n==null||n.add(g),c.set(h,g)}}),t&&t(!1),a.add(vA({createEmptyChangeSummary(){return{zoneIds:[]}},handleChange(d,h){const g=u.get(d.changedObservable);return g!==void 0&&h.zoneIds.push(g),!0}},(d,h)=>{for(const g of l)g.onChange&&(u.set(g.onChange,c.get(g)),g.onChange.read(d));t&&t(!0),i.changeViewZones(g=>{for(const p of h.zoneIds)g.layoutZone(p)}),t&&t(!1)}))})),s.add({dispose(){t&&t(!0),i.changeViewZones(o=>{for(const a of r)o.removeZone(a)}),n==null||n.clear(),t&&t(!1)}}),s}function _te(i,e){const t=sD(e,s=>s.original.startLineNumber<=i.lineNumber);if(!t)return J.fromPositions(i);if(t.original.endLineNumberExclusive<=i.lineNumber){const s=i.lineNumber-t.original.endLineNumberExclusive+t.modified.endLineNumberExclusive;return J.fromPositions(new ue(s,i.column))}if(!t.innerChanges)return J.fromPositions(new ue(t.modified.startLineNumber,1));const n=sD(t.innerChanges,s=>s.originalRange.getStartPosition().isBeforeOrEqual(i));if(!n){const s=i.lineNumber-t.original.startLineNumber+t.modified.startLineNumber;return J.fromPositions(new ue(s,i.column))}if(n.originalRange.containsPosition(i))return n.modifiedRange;{const s=wnt(n.originalRange.getEndPosition(),i);return J.fromPositions(s.addToPosition(n.modifiedRange.getEndPosition()))}}function wnt(i,e){return i.lineNumber===e.lineNumber?new Nm(0,e.column-i.column):new Nm(e.lineNumber-i.lineNumber,e.column-1)}function Cnt(i,e){let t;return i.filter(n=>{const s=e(n,t);return t=n,s})}class yN{static create(e,t=void 0){return new vte(e,e,t)}static createWithDisposable(e,t,n=void 0){const s=new Ze;return s.add(t),s.add(e),new vte(e,s,n)}}class vte extends yN{constructor(e,t,n){super(),this.object=e,this._disposable=t,this._debugOwner=n,this._refCount=1,this._isDisposed=!1,this._owners=[],n&&this._addOwner(n)}_addOwner(e){e&&this._owners.push(e)}createNewRef(e){return this._refCount++,e&&this._addOwner(e),new Snt(this,e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._decreaseRefCount(this._debugOwner))}_decreaseRefCount(e){if(this._refCount--,this._refCount===0&&this._disposable.dispose(),e){const t=this._owners.indexOf(e);t!==-1&&this._owners.splice(t,1)}}}class Snt extends yN{constructor(e,t){super(),this._base=e,this._debugOwner=t,this._isDisposed=!1}get object(){return this._base.object}createNewRef(e){return this._base.createNewRef(e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._base._decreaseRefCount(this._debugOwner))}}var Uz=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},zz=function(i,e){return function(t,n){e(t,n,i)}};const knt=qm("diff-review-insert",Ke.add,S("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),xnt=qm("diff-review-remove",Ke.remove,S("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),Ent=qm("diff-review-close",Ke.close,S("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));var kb;let c0=(kb=class extends be{constructor(e,t,n,s,r,o,a,l,c){super(),this._parentNode=e,this._visible=t,this._setVisible=n,this._canClose=s,this._width=r,this._height=o,this._diffs=a,this._models=l,this._instantiationService=c,this._state=$y(this,(u,d)=>{const h=this._visible.read(u);if(this._parentNode.style.visibility=h?"visible":"hidden",!h)return null;const g=d.add(this._instantiationService.createInstance(eB,this._diffs,this._models,this._setVisible,this._canClose)),p=d.add(this._instantiationService.createInstance(tB,this._parentNode,g,this._width,this._height,this._models));return{model:g,view:p}}).recomputeInitiallyAndOnChange(this._store)}next(){Cs(e=>{const t=this._visible.get();this._setVisible(!0,e),t&&this._state.get().model.nextGroup(e)})}prev(){Cs(e=>{this._setVisible(!0,e),this._state.get().model.previousGroup(e)})}close(){Cs(e=>{this._setVisible(!1,e)})}},kb._ttPolicy=N1("diffReview",{createHTML:e=>e}),kb);c0=Uz([zz(8,Pn)],c0);let eB=class extends be{constructor(e,t,n,s,r){super(),this._diffs=e,this._models=t,this._setVisible=n,this.canClose=s,this._accessibilitySignalService=r,this._groups=un(this,[]),this._currentGroupIdx=un(this,0),this._currentElementIdx=un(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((o,a)=>this._groups.read(a)[o]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((o,a)=>{var l;return(l=this.currentGroup.read(a))==null?void 0:l.lines[o]}),this._register(Cn(o=>{const a=this._diffs.read(o);if(!a){this._groups.set([],void 0);return}const l=Tnt(a,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());Cs(c=>{const u=this._models.getModifiedPosition();if(u){const d=l.findIndex(h=>(u==null?void 0:u.lineNumber)<h.range.modified.endLineNumberExclusive);d!==-1&&this._currentGroupIdx.set(d,c)}this._groups.set(l,c)})})),this._register(Cn(o=>{const a=this.currentElement.read(o);(a==null?void 0:a.type)===bo.Deleted?this._accessibilitySignalService.playSignal(ad.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(a==null?void 0:a.type)===bo.Added&&this._accessibilitySignalService.playSignal(ad.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register(Cn(o=>{const a=this.currentElement.read(o);if(a&&a.type!==bo.Header){const l=a.modifiedLineNumber??a.diff.modified.startLineNumber;this._models.modifiedSetSelection(J.fromPositions(new ue(l,1)))}}))}_goToGroupDelta(e,t){const n=this.groups.get();!n||n.length<=1||MU(t,s=>{this._currentGroupIdx.set(Mt.ofLength(n.length).clipCyclic(this._currentGroupIdx.get()+e),s),this._currentElementIdx.set(0,s)})}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const t=this.currentGroup.get();!t||t.lines.length<=1||Cs(n=>{this._currentElementIdx.set(Mt.ofLength(t.lines.length).clip(this._currentElementIdx.get()+e),n)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const t=this.currentGroup.get();if(!t)return;const n=t.lines.indexOf(e);n!==-1&&Cs(s=>{this._currentElementIdx.set(n,s)})}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===bo.Deleted?this._models.originalReveal(J.fromPositions(new ue(e.originalLineNumber,1))):this._models.modifiedReveal(e.type!==bo.Header?J.fromPositions(new ue(e.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};eB=Uz([zz(4,PA)],eB);const Jw=3;function Tnt(i,e,t){const n=[];for(const s of vH(i,(r,o)=>o.modified.startLineNumber-r.modified.endLineNumberExclusive<2*Jw)){const r=[];r.push(new Int);const o=new wt(Math.max(1,s[0].original.startLineNumber-Jw),Math.min(s[s.length-1].original.endLineNumberExclusive+Jw,e+1)),a=new wt(Math.max(1,s[0].modified.startLineNumber-Jw),Math.min(s[s.length-1].modified.endLineNumberExclusive+Jw,t+1));kde(s,(u,d)=>{const h=new wt(u?u.original.endLineNumberExclusive:o.startLineNumber,d?d.original.startLineNumber:o.endLineNumberExclusive),g=new wt(u?u.modified.endLineNumberExclusive:a.startLineNumber,d?d.modified.startLineNumber:a.endLineNumberExclusive);h.forEach(p=>{r.push(new Rnt(p,g.startLineNumber+(p-h.startLineNumber)))}),d&&(d.original.forEach(p=>{r.push(new Dnt(d,p))}),d.modified.forEach(p=>{r.push(new Nnt(d,p))}))});const l=s[0].modified.join(s[s.length-1].modified),c=s[0].original.join(s[s.length-1].original);n.push(new Lnt(new io(l,c),r))}return n}var bo;(function(i){i[i.Header=0]="Header",i[i.Unchanged=1]="Unchanged",i[i.Deleted=2]="Deleted",i[i.Added=3]="Added"})(bo||(bo={}));class Lnt{constructor(e,t){this.range=e,this.lines=t}}class Int{constructor(){this.type=bo.Header}}class Dnt{constructor(e,t){this.diff=e,this.originalLineNumber=t,this.type=bo.Deleted,this.modifiedLineNumber=void 0}}class Nnt{constructor(e,t){this.diff=e,this.modifiedLineNumber=t,this.type=bo.Added,this.originalLineNumber=void 0}}class Rnt{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t,this.type=bo.Unchanged}}let tB=class extends be{constructor(e,t,n,s,r,o){super(),this._element=e,this._model=t,this._width=n,this._height=s,this._models=r,this._languageService=o,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";const a=document.createElement("div");a.className="diff-review-actions",this._actionBar=this._register(new rf(a)),this._register(Cn(l=>{this._actionBar.clear(),this._model.canClose.read(l)&&this._actionBar.push(new tf("diffreview.close",S("label.close","Close"),"close-diff-review "+dn.asClassName(Ent),!0,async()=>t.close()),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new bU(this._content,{})),ko(this.domNode,this._scrollbar.getDomNode(),a),this._register(Cn(l=>{this._height.read(l),this._width.read(l),this._scrollbar.scanDomNode()})),this._register(Dt(()=>{ko(this.domNode)})),this._register(Om(this.domNode,{width:this._width,height:this._height})),this._register(Om(this._content,{width:this._width,height:this._height})),this._register(lu((l,c)=>{this._model.currentGroup.read(l),this._render(c)})),this._register(Vs(this.domNode,"keydown",l=>{(l.equals(18)||l.equals(2066)||l.equals(530))&&(l.preventDefault(),this._model.goToNextLine()),(l.equals(16)||l.equals(2064)||l.equals(528))&&(l.preventDefault(),this._model.goToPreviousLine()),(l.equals(9)||l.equals(2057)||l.equals(521)||l.equals(1033))&&(l.preventDefault(),this._model.close()),(l.equals(10)||l.equals(3))&&(l.preventDefault(),this._model.revealCurrentElementInEditor())}))}_render(e){const t=this._models.getOriginalOptions(),n=this._models.getModifiedOptions(),s=document.createElement("div");s.className="diff-review-table",s.setAttribute("role","list"),s.setAttribute("aria-label",S("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),Nr(s,n.get(50)),ko(this._content,s);const r=this._models.getOriginalModel(),o=this._models.getModifiedModel();if(!r||!o)return;const a=r.getOptions(),l=o.getOptions(),c=n.get(67),u=this._model.currentGroup.get();for(const d of(u==null?void 0:u.lines)||[]){if(!u)break;let h;if(d.type===bo.Header){const p=document.createElement("div");p.className="diff-review-row",p.setAttribute("role","listitem");const _=u.range,v=this._model.currentGroupIndex.get(),y=this._model.groups.get().length,w=R=>R===0?S("no_lines_changed","no lines changed"):R===1?S("one_line_changed","1 line changed"):S("more_lines_changed","{0} lines changed",R),x=w(_.original.length),k=w(_.modified.length);p.setAttribute("aria-label",S({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",v+1,y,_.original.startLineNumber,x,_.modified.startLineNumber,k));const T=document.createElement("div");T.className="diff-review-cell diff-review-summary",T.appendChild(document.createTextNode(`${v+1}/${y}: @@ -${_.original.startLineNumber},${_.original.length} +${_.modified.startLineNumber},${_.modified.length} @@`)),p.appendChild(T),h=p}else h=this._createRow(d,c,this._width.get(),t,r,a,n,o,l);s.appendChild(h);const g=It(p=>this._model.currentElement.read(p)===d);e.add(Cn(p=>{const _=g.read(p);h.tabIndex=_?0:-1,_&&h.focus()})),e.add(ge(h,"focus",()=>{this._model.goToLine(d)}))}this._scrollbar.scanDomNode()}_createRow(e,t,n,s,r,o,a,l,c){const u=s.get(146),d=u.glyphMarginWidth+u.lineNumbersWidth,h=a.get(146),g=10+h.glyphMarginWidth+h.lineNumbersWidth;let p="diff-review-row",_="";const v="diff-review-spacer";let y=null;switch(e.type){case bo.Added:p="diff-review-row line-insert",_=" char-insert",y=knt;break;case bo.Deleted:p="diff-review-row line-delete",_=" char-delete",y=xnt;break}const w=document.createElement("div");w.style.minWidth=n+"px",w.className=p,w.setAttribute("role","listitem"),w.ariaLevel="";const x=document.createElement("div");x.className="diff-review-cell",x.style.height=`${t}px`,w.appendChild(x);const k=document.createElement("span");k.style.width=d+"px",k.style.minWidth=d+"px",k.className="diff-review-line-number"+_,e.originalLineNumber!==void 0?k.appendChild(document.createTextNode(String(e.originalLineNumber))):k.innerText="",x.appendChild(k);const T=document.createElement("span");T.style.width=g+"px",T.style.minWidth=g+"px",T.style.paddingRight="10px",T.className="diff-review-line-number"+_,e.modifiedLineNumber!==void 0?T.appendChild(document.createTextNode(String(e.modifiedLineNumber))):T.innerText="",x.appendChild(T);const R=document.createElement("span");if(R.className=v,y){const A=document.createElement("span");A.className=dn.asClassName(y),A.innerText="",R.appendChild(A)}else R.innerText="";x.appendChild(R);let L;if(e.modifiedLineNumber!==void 0){let A=this._getLineHtml(l,a,c.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);c0._ttPolicy&&(A=c0._ttPolicy.createHTML(A)),x.insertAdjacentHTML("beforeend",A),L=l.getLineContent(e.modifiedLineNumber)}else{let A=this._getLineHtml(r,s,o.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);c0._ttPolicy&&(A=c0._ttPolicy.createHTML(A)),x.insertAdjacentHTML("beforeend",A),L=r.getLineContent(e.originalLineNumber)}L.length===0&&(L=S("blankLine","blank"));let I="";switch(e.type){case bo.Unchanged:e.originalLineNumber===e.modifiedLineNumber?I=S({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",L,e.originalLineNumber):I=S("equalLine","{0} original line {1} modified line {2}",L,e.originalLineNumber,e.modifiedLineNumber);break;case bo.Added:I=S("insertLine","+ {0} modified line {1}",L,e.modifiedLineNumber);break;case bo.Deleted:I=S("deleteLine","- {0} original line {1}",L,e.originalLineNumber);break}return w.setAttribute("aria-label",I),w}_getLineHtml(e,t,n,s,r){const o=e.getLineContent(s),a=t.get(50),l=tr.createEmpty(o,r),c=al.isBasicASCII(o,e.mightContainNonBasicASCII()),u=al.containsRTL(o,c,e.mightContainRTL());return MA(new Yy(a.isMonospace&&!t.get(33),a.canUseHalfwidthRightwardsArrow,o,!1,c,u,0,l,[],n,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(118),t.get(100),t.get(95),t.get(51)!==Z0.OFF,null)).html}};tB=Uz([zz(5,Ws)],tB);class Ant{constructor(e){this.editors=e}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(e){this.editors.original.revealRange(e),this.editors.original.setSelection(e),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(e){e&&(this.editors.modified.revealRange(e),this.editors.modified.setSelection(e)),this.editors.modified.focus()}modifiedSetSelection(e){this.editors.modified.setSelection(e)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){return this.editors.modified.getPosition()??void 0}}Y("diffEditor.move.border","#8b8b8b9c",S("diffEditor.move.border","The border color for text that got moved in the diff editor."));Y("diffEditor.moveActive.border","#FFA500",S("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor."));Y("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},S("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets."));const Pnt=qm("diff-insert",Ke.add,S("diffInsertIcon","Line decoration for inserts in the diff editor.")),Cpe=qm("diff-remove",Ke.remove,S("diffRemoveIcon","Line decoration for removals in the diff editor.")),bte=Ss.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+dn.asClassName(Pnt),marginClassName:"gutter-insert"}),yte=Ss.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+dn.asClassName(Cpe),marginClassName:"gutter-delete"}),wte=Ss.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),Cte=Ss.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),Ste=Ss.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),Mnt=Ss.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),Ont=Ss.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),nB=Ss.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),Fnt=Ss.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),Bnt=Ss.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"});var Spe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},iB=function(i,e){return function(t,n){e(t,n,i)}},Dp;const kpe=nn("diffProviderFactoryService");let sB=class{constructor(e){this.instantiationService=e}createDiffProvider(e){return this.instantiationService.createInstance(rB,e)}};sB=Spe([iB(0,Pn)],sB);_n(kpe,sB,1);var A0;let rB=(A0=class{constructor(e,t,n){this.editorWorkerService=t,this.telemetryService=n,this.onDidChangeEventEmitter=new se,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){var e;(e=this.diffAlgorithmOnDidChangeSubscription)==null||e.dispose()}async computeDiff(e,t,n,s){if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(e,t,n,s);if(e.isDisposed()||t.isDisposed())return{changes:[],identical:!0,quitEarly:!1,moves:[]};if(e.getLineCount()===1&&e.getLineMaxColumn(1)===1)return t.getLineCount()===1&&t.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new rl(new wt(1,2),new wt(1,t.getLineCount()+1),[new $a(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const r=JSON.stringify([e.uri.toString(),t.uri.toString()]),o=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(n)]),a=Dp.diffCache.get(r);if(a&&a.context===o)return a.result;const l=S1.create(),c=await this.editorWorkerService.computeDiff(e.uri,t.uri,n,this.diffAlgorithm),u=l.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:u,timedOut:(c==null?void 0:c.quitEarly)??!0,detectedMoves:n.computeMoves?(c==null?void 0:c.moves.length)??0:-1}),s.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!c)throw new Error("no diff result available");return Dp.diffCache.size>10&&Dp.diffCache.delete(Dp.diffCache.keys().next().value),Dp.diffCache.set(r,{result:c,context:o}),c}setOptions(e){var n;let t=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&((n=this.diffAlgorithmOnDidChangeSubscription)==null||n.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,typeof e.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),t=!0),t&&this.onDidChangeEventEmitter.fire()}},Dp=A0,A0.diffCache=new Map,A0);rB=Dp=Spe([iB(1,ex),iB(2,D1)],rB);function jz(){return K3&&!!K3.VSCODE_DEV}function xpe(i){if(jz()){const e=Vnt();return e.add(i),{dispose(){e.delete(i)}}}else return{dispose(){}}}function Vnt(){CT||(CT=new Set);const i=globalThis;return i.$hotReload_applyNewExports||(i.$hotReload_applyNewExports=e=>{const t={config:{mode:void 0},...e},n=[];for(const s of CT){const r=s(t);r&&n.push(r)}if(n.length>0)return s=>{let r=!1;for(const o of n)o(s)&&(r=!0);return r}}),CT}let CT;jz()&&xpe(({oldExports:i,newSrc:e,config:t})=>{if(t.mode==="patch-prototype")return n=>{var s,r;for(const o in n){const a=n[o];if(console.log(`[hot-reload] Patching prototype methods of '${o}'`,{exportedItem:a}),typeof a=="function"&&a.prototype){const l=i[o];if(l){for(const c of Object.getOwnPropertyNames(a.prototype)){const u=Object.getOwnPropertyDescriptor(a.prototype,c),d=Object.getOwnPropertyDescriptor(l.prototype,c);((s=u==null?void 0:u.value)==null?void 0:s.toString())!==((r=d==null?void 0:d.value)==null?void 0:r.toString())&&console.log(`[hot-reload] Patching prototype method '${o}.${c}'`),Object.defineProperty(l.prototype,c,u)}n[o]=l}}}return!0}});function nc(i,e){return Wnt([i],e),i}function Wnt(i,e){jz()&&Ll("reload",n=>xpe(({oldExports:s})=>{if([...Object.values(s)].some(r=>i.includes(r)))return r=>(n(void 0),!0)})).read(e)}var Hnt=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Unt=function(i,e){return function(t,n){e(t,n,i)}};let oB=class extends be{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,t,n){super(),this.model=e,this._options=t,this._diffProviderFactoryService=n,this._isDiffUpToDate=un(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=un(this,void 0),this.diff=this._diff,this._unchangedRegions=un(this,void 0),this.unchangedRegions=It(this,a=>{var l;return this._options.hideUnchangedRegions.read(a)?((l=this._unchangedRegions.read(a))==null?void 0:l.regions)??[]:(Cs(c=>{var u;for(const d of((u=this._unchangedRegions.get())==null?void 0:u.regions)||[])d.collapseAll(c)}),[])}),this.movedTextToCompare=un(this,void 0),this._activeMovedText=un(this,void 0),this._hoveredMovedText=un(this,void 0),this.activeMovedText=It(this,a=>this.movedTextToCompare.read(a)??this._hoveredMovedText.read(a)??this._activeMovedText.read(a)),this._cancellationTokenSource=new Wy,this._diffProvider=It(this,a=>{const l=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(a)}),c=Ll("onDidChange",l.onDidChange);return{diffProvider:l,onChangeSignal:c}}),this._register(Dt(()=>this._cancellationTokenSource.cancel()));const s=BU("contentChangedSignal"),r=this._register(new so(()=>s.trigger(void 0),200));this._register(Cn(a=>{const l=this._unchangedRegions.read(a);if(!l||l.regions.some(p=>p.isDragged.read(a)))return;const c=l.originalDecorationIds.map(p=>e.original.getDecorationRange(p)).map(p=>p?wt.fromRangeInclusive(p):void 0),u=l.modifiedDecorationIds.map(p=>e.modified.getDecorationRange(p)).map(p=>p?wt.fromRangeInclusive(p):void 0),d=l.regions.map((p,_)=>!c[_]||!u[_]?void 0:new qg(c[_].startLineNumber,u[_].startLineNumber,c[_].length,p.visibleLineCountTop.read(a),p.visibleLineCountBottom.read(a))).filter(Ub),h=[];let g=!1;for(const p of vH(d,(_,v)=>_.getHiddenModifiedRange(a).endLineNumberExclusive===v.getHiddenModifiedRange(a).startLineNumber))if(p.length>1){g=!0;const _=p.reduce((y,w)=>y+w.lineCount,0),v=new qg(p[0].originalLineNumber,p[0].modifiedLineNumber,_,p[0].visibleLineCountTop.get(),p[p.length-1].visibleLineCountBottom.get());h.push(v)}else h.push(p[0]);if(g){const p=e.original.deltaDecorations(l.originalDecorationIds,h.map(v=>({range:v.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),_=e.modified.deltaDecorations(l.modifiedDecorationIds,h.map(v=>({range:v.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));Cs(v=>{this._unchangedRegions.set({regions:h,originalDecorationIds:p,modifiedDecorationIds:_},v)})}}));const o=(a,l,c)=>{const u=qg.fromDiffs(a.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(c),this._options.hideUnchangedRegionsContextLineCount.read(c));let d;const h=this._unchangedRegions.get();if(h){const v=h.originalDecorationIds.map(k=>e.original.getDecorationRange(k)).map(k=>k?wt.fromRangeInclusive(k):void 0),y=h.modifiedDecorationIds.map(k=>e.modified.getDecorationRange(k)).map(k=>k?wt.fromRangeInclusive(k):void 0);let x=Cnt(h.regions.map((k,T)=>{if(!v[T]||!y[T])return;const R=v[T].length;return new qg(v[T].startLineNumber,y[T].startLineNumber,R,Math.min(k.visibleLineCountTop.get(),R),Math.min(k.visibleLineCountBottom.get(),R-k.visibleLineCountTop.get()))}).filter(Ub),(k,T)=>!T||k.modifiedLineNumber>=T.modifiedLineNumber+T.lineCount&&k.originalLineNumber>=T.originalLineNumber+T.lineCount).map(k=>new io(k.getHiddenOriginalRange(c),k.getHiddenModifiedRange(c)));x=io.clip(x,wt.ofLength(1,e.original.getLineCount()),wt.ofLength(1,e.modified.getLineCount())),d=io.inverse(x,e.original.getLineCount(),e.modified.getLineCount())}const g=[];if(d)for(const v of u){const y=d.filter(w=>w.original.intersectsStrict(v.originalUnchangedRange)&&w.modified.intersectsStrict(v.modifiedUnchangedRange));g.push(...v.setVisibleRanges(y,l))}else g.push(...u);const p=e.original.deltaDecorations((h==null?void 0:h.originalDecorationIds)||[],g.map(v=>({range:v.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),_=e.modified.deltaDecorations((h==null?void 0:h.modifiedDecorationIds)||[],g.map(v=>({range:v.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));this._unchangedRegions.set({regions:g,originalDecorationIds:p,modifiedDecorationIds:_},l)};this._register(e.modified.onDidChangeContent(a=>{if(this._diff.get()){const c=$h.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),r.schedule()})),this._register(e.original.onDidChangeContent(a=>{if(this._diff.get()){const c=$h.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),r.schedule()})),this._register(lu(async(a,l)=>{this._options.hideUnchangedRegionsMinimumLineCount.read(a),this._options.hideUnchangedRegionsContextLineCount.read(a),r.cancel(),s.read(a);const c=this._diffProvider.read(a);c.onChangeSignal.read(a),nc(cfe,a),nc(T8,a),this._isDiffUpToDate.set(!1,void 0);let u=[];l.add(e.original.onDidChangeContent(g=>{const p=$h.fromModelContentChanges(g.changes);u=PD(u,p)}));let d=[];l.add(e.modified.onDidChangeContent(g=>{const p=$h.fromModelContentChanges(g.changes);d=PD(d,p)}));let h=await c.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(a),maxComputationTimeMs:this._options.maxComputationTimeMs.read(a),computeMoves:this._options.showMoves.read(a)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||e.original.isDisposed()||e.modified.isDisposed()||(h=znt(h,e.original,e.modified),h=(e.original,e.modified,void 0)??h,h=(e.original,e.modified,void 0)??h,Cs(g=>{o(h,g),this._lastDiff=h;const p=$z.fromDiffResult(h);this._diff.set(p,g),this._isDiffUpToDate.set(!0,g);const _=this.movedTextToCompare.get();this.movedTextToCompare.set(_?this._lastDiff.moves.find(v=>v.lineRangeMapping.modified.intersect(_.lineRangeMapping.modified)):void 0,g)}))}))}ensureModifiedLineIsVisible(e,t,n){var r,o;if(((r=this.diff.get())==null?void 0:r.mappings.length)===0)return;const s=((o=this._unchangedRegions.get())==null?void 0:o.regions)||[];for(const a of s)if(a.getHiddenModifiedRange(void 0).contains(e)){a.showModifiedLine(e,t,n);return}}ensureOriginalLineIsVisible(e,t,n){var r,o;if(((r=this.diff.get())==null?void 0:r.mappings.length)===0)return;const s=((o=this._unchangedRegions.get())==null?void 0:o.regions)||[];for(const a of s)if(a.getHiddenOriginalRange(void 0).contains(e)){a.showOriginalLine(e,t,n);return}}async waitForDiff(){await rqe(this.isDiffUpToDate,e=>e)}serializeState(){const e=this._unchangedRegions.get();return{collapsedRegions:e==null?void 0:e.regions.map(t=>({range:t.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(e){var s;const t=(s=e.collapsedRegions)==null?void 0:s.map(r=>wt.deserialize(r.range)),n=this._unchangedRegions.get();!n||!t||Cs(r=>{for(const o of n.regions)for(const a of t)if(o.modifiedUnchangedRange.intersect(a)){o.setHiddenModifiedRange(a,r);break}})}};oB=Hnt([Unt(2,kpe)],oB);function znt(i,e,t){return{changes:i.changes.map(n=>new rl(n.original,n.modified,n.innerChanges?n.innerChanges.map(s=>jnt(s,e,t)):void 0)),moves:i.moves,identical:i.identical,quitEarly:i.quitEarly}}function jnt(i,e,t){let n=i.originalRange,s=i.modifiedRange;return n.startColumn===1&&s.startColumn===1&&(n.endColumn!==1||s.endColumn!==1)&&n.endColumn===e.getLineMaxColumn(n.endLineNumber)&&s.endColumn===t.getLineMaxColumn(s.endLineNumber)&&n.endLineNumber<e.getLineCount()&&s.endLineNumber<t.getLineCount()&&(n=n.setEndPosition(n.endLineNumber+1,1),s=s.setEndPosition(s.endLineNumber+1,1)),new $a(n,s)}class $z{static fromDiffResult(e){return new $z(e.changes.map(t=>new Epe(t)),e.moves||[],e.identical,e.quitEarly)}constructor(e,t,n,s){this.mappings=e,this.movedTexts=t,this.identical=n,this.quitEarly=s}}class Epe{constructor(e){this.lineRangeMapping=e}}class qg{static fromDiffs(e,t,n,s,r){const o=rl.inverse(e,t,n),a=[];for(const l of o){let c=l.original.startLineNumber,u=l.modified.startLineNumber,d=l.original.length;const h=c===1&&u===1,g=c+d===t+1&&u+d===n+1;(h||g)&&d>=r+s?(h&&!g&&(d-=r),g&&!h&&(c+=r,u+=r,d-=r),a.push(new qg(c,u,d,0,0))):d>=r*2+s&&(c+=r,u+=r,d-=r*2,a.push(new qg(c,u,d,0,0)))}return a}get originalUnchangedRange(){return wt.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return wt.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,t,n,s,r){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=n,this._visibleLineCountTop=un(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=un(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=It(this,l=>this.visibleLineCountTop.read(l)+this.visibleLineCountBottom.read(l)===this.lineCount&&!this.isDragged.read(l)),this.isDragged=un(this,void 0);const o=Math.max(Math.min(s,this.lineCount),0),a=Math.max(Math.min(r,this.lineCount-s),0);vX(s===o),vX(r===a),this._visibleLineCountTop.set(o,void 0),this._visibleLineCountBottom.set(a,void 0)}setVisibleRanges(e,t){const n=[],s=new Tl(e.map(l=>l.modified)).subtractFrom(this.modifiedUnchangedRange);let r=this.originalLineNumber,o=this.modifiedLineNumber;const a=this.modifiedLineNumber+this.lineCount;if(s.ranges.length===0)this.showAll(t),n.push(this);else{let l=0;for(const c of s.ranges){const u=l===s.ranges.length-1;l++;const d=(u?a:c.endLineNumberExclusive)-o,h=new qg(r,o,d,0,0);h.setHiddenModifiedRange(c,t),n.push(h),r=h.originalUnchangedRange.endLineNumberExclusive,o=h.modifiedUnchangedRange.endLineNumberExclusive}}return n}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return wt.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return wt.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){const n=e.startLineNumber-this.modifiedLineNumber,s=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(n,s,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(e=10,t){const n=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,n),t)}showMoreBelow(e=10,t){const n=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,n),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t,n){const s=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),r=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;t===0&&s<r||t===1?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+s,n):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+r,n)}showOriginalLine(e,t,n){const s=e-this.originalLineNumber,r=this.originalLineNumber+this.lineCount-e;t===0&&s<r||t===1?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+r-s,this.getMaxVisibleLineCountTop()),n):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+s-r,this.getMaxVisibleLineCountBottom()),n)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,n){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,n),this._visibleLineCountBottom.set(t,n)}}class $nt extends be{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,t,n,s,r,o,a,l,c){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=n,this._diff=s,this._editor=r,this._viewLineCounts=o,this._originalTextModel=a,this._contextMenuService=l,this._clipboardService=c,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=dn.asClassName(Ke.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const u=this._modifiedEditor.getOption(67);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${u}px`,this._diffActions.style.lineHeight=`${u}px`,this._marginDomNode.appendChild(this._diffActions);let d=0;const h=n.getOption(128)&&!X0,g=(p,_)=>{this._contextMenuService.showContextMenu({domForShadowRoot:h?n.getDomNode()??void 0:void 0,getAnchor:()=>({x:p,y:_}),getActions:()=>{const v=[],y=s.modified.isEmpty;return v.push(new tf("diff.clipboard.copyDeletedContent",y?s.original.length>1?S("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):S("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):s.original.length>1?S("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):S("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,async()=>{const x=this._originalTextModel.getValueInRange(s.original.toExclusiveRange());await this._clipboardService.writeText(x)})),s.original.length>1&&v.push(new tf("diff.clipboard.copyDeletedLineContent",y?S("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",s.original.startLineNumber+d):S("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",s.original.startLineNumber+d),void 0,!0,async()=>{let x=this._originalTextModel.getLineContent(s.original.startLineNumber+d);x===""&&(x=this._originalTextModel.getEndOfLineSequence()===0?`
`:`\r
`),await this._clipboardService.writeText(x)})),n.getOption(92)||v.push(new tf("diff.inline.revertChange",S("diff.inline.revertChange.label","Revert this change"),void 0,!0,async()=>{this._editor.revert(this._diff)})),v},autoSelectFirstItem:!0})};this._register(Vs(this._diffActions,"mousedown",p=>{if(!p.leftButton)return;const{top:_,height:v}=Nl(this._diffActions),y=Math.floor(u/3);p.preventDefault(),g(p.posx,_+v+y)})),this._register(n.onMouseMove(p=>{(p.target.type===8||p.target.type===5)&&p.target.detail.viewZoneId===this._getViewZoneId()?(d=this._updateLightBulbPosition(this._marginDomNode,p.event.browserEvent.y,u),this.visibility=!0):this.visibility=!1})),this._register(n.onMouseDown(p=>{p.event.leftButton&&(p.target.type===8||p.target.type===5)&&p.target.detail.viewZoneId===this._getViewZoneId()&&(p.event.preventDefault(),d=this._updateLightBulbPosition(this._marginDomNode,p.event.browserEvent.y,u),g(p.event.posx,p.event.posy+u))}))}_updateLightBulbPosition(e,t,n){const{top:s}=Nl(e),r=t-s,o=Math.floor(r/n),a=o*n;if(this._diffActions.style.top=`${a}px`,this._viewLineCounts){let l=0;for(let c=0;c<this._viewLineCounts.length;c++)if(l+=this._viewLineCounts[c],o<l)return c}return o}}const kte=N1("diffEditorWidget",{createHTML:i=>i});function qnt(i,e,t,n){Nr(n,e.fontInfo);const s=t.length>0,r=new iA(1e4);let o=0,a=0;const l=[];for(let h=0;h<i.lineTokens.length;h++){const g=h+1,p=i.lineTokens[h],_=i.lineBreakData[h],v=uc.filter(t,g,1,Number.MAX_SAFE_INTEGER);if(_){let y=0;for(const w of _.breakOffsets){const x=p.sliceAndInflate(y,w,0);o=Math.max(o,xte(a,x,uc.extractWrapped(v,y,w),s,i.mightContainNonBasicASCII,i.mightContainRTL,e,r)),a++,y=w}l.push(_.breakOffsets.length)}else l.push(1),o=Math.max(o,xte(a,p,v,s,i.mightContainNonBasicASCII,i.mightContainRTL,e,r)),a++}o+=e.scrollBeyondLastColumn;const c=r.build(),u=kte?kte.createHTML(c):c;n.innerHTML=u;const d=o*e.typicalHalfwidthCharacterWidth;return{heightInLines:a,minWidthInPx:d,viewLineCounts:l}}class Knt{constructor(e,t,n,s){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=n,this.mightContainRTL=s}}class qz{static fromEditor(e){var r;const t=e.getOptions(),n=t.get(50),s=t.get(146);return new qz(((r=e.getModel())==null?void 0:r.getOptions().tabSize)||0,n,t.get(33),n.typicalHalfwidthCharacterWidth,t.get(105),t.get(67),s.decorationsWidth,t.get(118),t.get(100),t.get(95),t.get(51))}constructor(e,t,n,s,r,o,a,l,c,u,d){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=n,this.typicalHalfwidthCharacterWidth=s,this.scrollBeyondLastColumn=r,this.lineHeight=o,this.lineDecorationsWidth=a,this.stopRenderingLineAfter=l,this.renderWhitespace=c,this.renderControlCharacters=u,this.fontLigatures=d}}function xte(i,e,t,n,s,r,o,a){a.appendString('<div class="view-line'),n||a.appendString(" char-delete"),a.appendString('" style="top:'),a.appendString(String(i*o.lineHeight)),a.appendString('px;width:1000000px;">');const l=e.getLineContent(),c=al.isBasicASCII(l,s),u=al.containsRTL(l,c,r),d=Cz(new Yy(o.fontInfo.isMonospace&&!o.disableMonospaceOptimizations,o.fontInfo.canUseHalfwidthRightwardsArrow,l,!1,c,u,0,e,t,o.tabSize,0,o.fontInfo.spaceWidth,o.fontInfo.middotWidth,o.fontInfo.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==Z0.OFF,null),a);return a.appendString("</div>"),d.characterMapping.getHorizontalOffset(d.characterMapping.length)}var Gnt=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Ete=function(i,e){return function(t,n){e(t,n,i)}};let aB=class extends be{constructor(e,t,n,s,r,o,a,l,c,u){super(),this._targetWindow=e,this._editors=t,this._diffModel=n,this._options=s,this._diffEditorWidget=r,this._canIgnoreViewZoneUpdateEvent=o,this._origViewZonesToIgnore=a,this._modViewZonesToIgnore=l,this._clipboardService=c,this._contextMenuService=u,this._originalTopPadding=un(this,0),this._originalScrollOffset=un(this,0),this._originalScrollOffsetAnimated=pte(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=un(this,0),this._modifiedScrollOffset=un(this,0),this._modifiedScrollOffsetAnimated=pte(this._targetWindow,this._modifiedScrollOffset,this._store);const d=un("invalidateAlignmentsState",0),h=this._register(new so(()=>{d.set(d.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(x=>{this._canIgnoreViewZoneUpdateEvent()||h.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(x=>{this._canIgnoreViewZoneUpdateEvent()||h.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(x=>{(x.hasChanged(147)||x.hasChanged(67))&&h.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(x=>{(x.hasChanged(147)||x.hasChanged(67))&&h.schedule()}));const g=this._diffModel.map(x=>x?Mi(this,x.model.original.onDidChangeTokens,()=>x.model.original.tokenization.backgroundTokenizationState===2):void 0).map((x,k)=>x==null?void 0:x.read(k)),p=It(x=>{const k=this._diffModel.read(x),T=k==null?void 0:k.diff.read(x);if(!k||!T)return null;d.read(x);const L=this._options.renderSideBySide.read(x);return Tte(this._editors.original,this._editors.modified,T.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,L)}),_=It(x=>{var R;const k=(R=this._diffModel.read(x))==null?void 0:R.movedTextToCompare.read(x);if(!k)return null;d.read(x);const T=k.changes.map(L=>new Epe(L));return Tte(this._editors.original,this._editors.modified,T,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)});function v(){const x=document.createElement("div");return x.className="diagonal-fill",x}const y=this._register(new Ze);this.viewZones=$y(this,(x,k)=>{var ve,X,oe,Ne;y.clear();const T=p.read(x)||[],R=[],L=[],I=this._modifiedTopPadding.read(x);I>0&&L.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:I,showInHiddenAreas:!0,suppressMouseDown:!0});const A=this._originalTopPadding.read(x);A>0&&R.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:A,showInHiddenAreas:!0,suppressMouseDown:!0});const B=this._options.renderSideBySide.read(x),V=B||(ve=this._editors.modified._getViewModel())==null?void 0:ve.createLineBreaksComputer();if(V){const Ie=this._editors.original.getModel();for(const Oe of T)if(Oe.diff)for(let it=Oe.originalRange.startLineNumber;it<Oe.originalRange.endLineNumberExclusive;it++){if(it>Ie.getLineCount())return{orig:R,mod:L};V==null||V.addRequest(Ie.getLineContent(it),null,null)}}const U=(V==null?void 0:V.finalize())??[];let W=0;const G=this._editors.modified.getOption(67),Z=(X=this._diffModel.read(x))==null?void 0:X.movedTextToCompare.read(x),ne=((oe=this._editors.original.getModel())==null?void 0:oe.mightContainNonBasicASCII())??!1,fe=((Ne=this._editors.original.getModel())==null?void 0:Ne.mightContainRTL())??!1,te=qz.fromEditor(this._editors.modified);for(const Ie of T)if(Ie.diff&&!B&&(!this._options.useTrueInlineDiffRendering.read(x)||!Kz(Ie.diff))){if(!Ie.originalRange.isEmpty){g.read(x);const it=document.createElement("div");it.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const We=this._editors.original.getModel();if(Ie.originalRange.endLineNumberExclusive-1>We.getLineCount())return{orig:R,mod:L};const at=new Knt(Ie.originalRange.mapToLineArray(on=>We.tokenization.getLineTokens(on)),Ie.originalRange.mapToLineArray(on=>U[W++]),ne,fe),Ft=[];for(const on of Ie.diff.innerChanges||[])Ft.push(new dS(on.originalRange.delta(-(Ie.diff.original.startLineNumber-1)),nB.className,0));const _t=qnt(at,te,Ft,it),Nt=document.createElement("div");if(Nt.className="inline-deleted-margin-view-zone",Nr(Nt,te.fontInfo),this._options.renderIndicators.read(x))for(let on=0;on<_t.heightInLines;on++){const zn=document.createElement("div");zn.className=`delete-sign ${dn.asClassName(Cpe)}`,zn.setAttribute("style",`position:absolute;top:${on*G}px;width:${te.lineDecorationsWidth}px;height:${G}px;right:0;`),Nt.appendChild(zn)}let Zt;y.add(new $nt(()=>Tde(Zt),Nt,this._editors.modified,Ie.diff,this._diffEditorWidget,_t.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let on=0;on<_t.viewLineCounts.length;on++){const zn=_t.viewLineCounts[on];zn>1&&R.push({afterLineNumber:Ie.originalRange.startLineNumber+on,domNode:v(),heightInPx:(zn-1)*G,showInHiddenAreas:!0,suppressMouseDown:!0})}L.push({afterLineNumber:Ie.modifiedRange.startLineNumber-1,domNode:it,heightInPx:_t.heightInLines*G,minWidthInPx:_t.minWidthInPx,marginDomNode:Nt,setZoneId(on){Zt=on},showInHiddenAreas:!0,suppressMouseDown:!0})}const Oe=document.createElement("div");Oe.className="gutter-delete",R.push({afterLineNumber:Ie.originalRange.endLineNumberExclusive-1,domNode:v(),heightInPx:Ie.modifiedHeightInPx,marginDomNode:Oe,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const Oe=Ie.modifiedHeightInPx-Ie.originalHeightInPx;if(Oe>0){if(Z!=null&&Z.lineRangeMapping.original.delta(-1).deltaLength(2).contains(Ie.originalRange.endLineNumberExclusive-1))continue;R.push({afterLineNumber:Ie.originalRange.endLineNumberExclusive-1,domNode:v(),heightInPx:Oe,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let it=function(){const at=document.createElement("div");return at.className="arrow-revert-change "+dn.asClassName(Ke.arrowRight),k.add(ge(at,"mousedown",Ft=>Ft.stopPropagation())),k.add(ge(at,"click",Ft=>{Ft.stopPropagation(),r.revert(Ie.diff)})),ht("div",{},at)};var ce=it;if(Z!=null&&Z.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(Ie.modifiedRange.endLineNumberExclusive-1))continue;let We;Ie.diff&&Ie.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(x)&&(We=it()),L.push({afterLineNumber:Ie.modifiedRange.endLineNumberExclusive-1,domNode:v(),heightInPx:-Oe,marginDomNode:We,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const Ie of _.read(x)??[]){if(!(Z!=null&&Z.lineRangeMapping.original.intersect(Ie.originalRange))||!(Z!=null&&Z.lineRangeMapping.modified.intersect(Ie.modifiedRange)))continue;const Oe=Ie.modifiedHeightInPx-Ie.originalHeightInPx;Oe>0?R.push({afterLineNumber:Ie.originalRange.endLineNumberExclusive-1,domNode:v(),heightInPx:Oe,showInHiddenAreas:!0,suppressMouseDown:!0}):L.push({afterLineNumber:Ie.modifiedRange.endLineNumberExclusive-1,domNode:v(),heightInPx:-Oe,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:R,mod:L}});let w=!1;this._register(this._editors.original.onDidScrollChange(x=>{x.scrollLeftChanged&&!w&&(w=!0,this._editors.modified.setScrollLeft(x.scrollLeft),w=!1)})),this._register(this._editors.modified.onDidScrollChange(x=>{x.scrollLeftChanged&&!w&&(w=!0,this._editors.original.setScrollLeft(x.scrollLeft),w=!1)})),this._originalScrollTop=Mi(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=Mi(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register(Cn(x=>{const k=this._originalScrollTop.read(x)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(x))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(x));k!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(k,1)})),this._register(Cn(x=>{const k=this._modifiedScrollTop.read(x)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(x))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(x));k!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(k,1)})),this._register(Cn(x=>{var R;const k=(R=this._diffModel.read(x))==null?void 0:R.movedTextToCompare.read(x);let T=0;if(k){const L=this._editors.original.getTopForLineNumber(k.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();T=this._editors.modified.getTopForLineNumber(k.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-L}T>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(T,void 0)):T<0?(this._modifiedTopPadding.set(-T,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-T,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+T,void 0,!0)}))}};aB=Gnt([Ete(8,bz),Ete(9,Rf)],aB);function Tte(i,e,t,n,s,r){const o=new bf(Lte(i,n)),a=new bf(Lte(e,s)),l=i.getOption(67),c=e.getOption(67),u=[];let d=0,h=0;function g(_,v){for(;;){let y=o.peek(),w=a.peek();if(y&&y.lineNumber>=_&&(y=void 0),w&&w.lineNumber>=v&&(w=void 0),!y&&!w)break;const x=y?y.lineNumber-d:Number.MAX_VALUE,k=w?w.lineNumber-h:Number.MAX_VALUE;x<k?(o.dequeue(),w={lineNumber:y.lineNumber-d+h,heightInPx:0}):x>k?(a.dequeue(),y={lineNumber:w.lineNumber-h+d,heightInPx:0}):(o.dequeue(),a.dequeue()),u.push({originalRange:wt.ofLength(y.lineNumber,1),modifiedRange:wt.ofLength(w.lineNumber,1),originalHeightInPx:l+y.heightInPx,modifiedHeightInPx:c+w.heightInPx,diff:void 0})}}for(const _ of t){let k=function(T,R,L=!1){var U,W;if(T<x||R<w)return;if(y)y=!1;else if(!L&&(T===x||R===w))return;const I=new wt(x,T),A=new wt(w,R);if(I.isEmpty&&A.isEmpty)return;const B=((U=o.takeWhile(G=>G.lineNumber<T))==null?void 0:U.reduce((G,Z)=>G+Z.heightInPx,0))??0,V=((W=a.takeWhile(G=>G.lineNumber<R))==null?void 0:W.reduce((G,Z)=>G+Z.heightInPx,0))??0;u.push({originalRange:I,modifiedRange:A,originalHeightInPx:I.length*l+B,modifiedHeightInPx:A.length*c+V,diff:_.lineRangeMapping}),x=T,w=R};var p=k;const v=_.lineRangeMapping;g(v.original.startLineNumber,v.modified.startLineNumber);let y=!0,w=v.modified.startLineNumber,x=v.original.startLineNumber;if(r)for(const T of v.innerChanges||[]){T.originalRange.startColumn>1&&T.modifiedRange.startColumn>1&&k(T.originalRange.startLineNumber,T.modifiedRange.startLineNumber);const R=i.getModel(),L=T.originalRange.endLineNumber<=R.getLineCount()?R.getLineMaxColumn(T.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;T.originalRange.endColumn<L&&k(T.originalRange.endLineNumber,T.modifiedRange.endLineNumber)}k(v.original.endLineNumberExclusive,v.modified.endLineNumberExclusive,!0),d=v.original.endLineNumberExclusive,h=v.modified.endLineNumberExclusive}return g(Number.MAX_VALUE,Number.MAX_VALUE),u}function Lte(i,e){const t=[],n=[],s=i.getOption(147).wrappingColumn!==-1,r=i._getViewModel().coordinatesConverter,o=i.getOption(67);if(s)for(let l=1;l<=i.getModel().getLineCount();l++){const c=r.getModelLineViewLineCount(l);c>1&&n.push({lineNumber:l,heightInPx:o*(c-1)})}for(const l of i.getWhitespaces()){if(e.has(l.id))continue;const c=l.afterLineNumber===0?0:r.convertViewPositionToModelPosition(new ue(l.afterLineNumber,1)).lineNumber;t.push({lineNumber:c,heightInPx:l.height})}return vnt(t,n,l=>l.lineNumber,(l,c)=>({lineNumber:l.lineNumber,heightInPx:l.heightInPx+c.heightInPx}))}function Kz(i){return i.innerChanges?i.innerChanges.every(e=>Ite(e.modifiedRange)&&Ite(e.originalRange)||e.originalRange.equalsRange(new J(1,1,1,1))):!1}function Ite(i){return i.startLineNumber===i.endLineNumber}const OS=class OS extends be{constructor(e,t,n,s,r){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=n,this._modifiedEditorLayoutInfo=s,this._editors=r,this._originalScrollTop=Mi(this,this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=Mi(this,this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=Ll("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=un(this,0),this._modifiedViewZonesChangedSignal=Ll("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=Ll("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=$y(this,(u,d)=>{var L;this._element.replaceChildren();const h=this._diffModel.read(u),g=(L=h==null?void 0:h.diff.read(u))==null?void 0:L.movedTexts;if(!g||g.length===0){this.width.set(0,void 0);return}this._viewZonesChanged.read(u);const p=this._originalEditorLayoutInfo.read(u),_=this._modifiedEditorLayoutInfo.read(u);if(!p||!_){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(u),this._originalViewZonesChangedSignal.read(u);const v=g.map(I=>{function A(te,ce){const ve=ce.getTopForLineNumber(te.startLineNumber,!0),X=ce.getTopForLineNumber(te.endLineNumberExclusive,!0);return(ve+X)/2}const B=A(I.lineRangeMapping.original,this._editors.original),V=this._originalScrollTop.read(u),U=A(I.lineRangeMapping.modified,this._editors.modified),W=this._modifiedScrollTop.read(u),G=B-V,Z=U-W,ne=Math.min(B,U),fe=Math.max(B,U);return{range:new Mt(ne,fe),from:G,to:Z,fromWithoutScroll:B,toWithoutScroll:U,move:I}});v.sort(C9e(fc(I=>I.fromWithoutScroll>I.toWithoutScroll,S9e),fc(I=>I.fromWithoutScroll>I.toWithoutScroll?I.fromWithoutScroll:-I.toWithoutScroll,em)));const y=Gz.compute(v.map(I=>I.range)),w=10,x=p.verticalScrollbarWidth,k=(y.getTrackCount()-1)*10+w*2,T=x+k+(_.contentLeft-OS.movedCodeBlockPadding);let R=0;for(const I of v){const A=y.getTrack(R),B=x+w+A*10,V=15,U=15,W=T,G=_.glyphMarginWidth+_.lineNumbersWidth,Z=18,ne=document.createElementNS("http://www.w3.org/2000/svg","rect");ne.classList.add("arrow-rectangle"),ne.setAttribute("x",`${W-G}`),ne.setAttribute("y",`${I.to-Z/2}`),ne.setAttribute("width",`${G}`),ne.setAttribute("height",`${Z}`),this._element.appendChild(ne);const fe=document.createElementNS("http://www.w3.org/2000/svg","g"),te=document.createElementNS("http://www.w3.org/2000/svg","path");te.setAttribute("d",`M 0 ${I.from} L ${B} ${I.from} L ${B} ${I.to} L ${W-U} ${I.to}`),te.setAttribute("fill","none"),fe.appendChild(te);const ce=document.createElementNS("http://www.w3.org/2000/svg","polygon");ce.classList.add("arrow"),d.add(Cn(ve=>{te.classList.toggle("currentMove",I.move===h.activeMovedText.read(ve)),ce.classList.toggle("currentMove",I.move===h.activeMovedText.read(ve))})),ce.setAttribute("points",`${W-U},${I.to-V/2} ${W},${I.to} ${W-U},${I.to+V/2}`),fe.appendChild(ce),this._element.appendChild(fe),R++}this.width.set(k,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register(Dt(()=>this._element.remove())),this._register(Cn(u=>{const d=this._originalEditorLayoutInfo.read(u),h=this._modifiedEditorLayoutInfo.read(u);!d||!h||(this._element.style.left=`${d.width-d.verticalScrollbarWidth}px`,this._element.style.height=`${d.height}px`,this._element.style.width=`${d.verticalScrollbarWidth+d.contentLeft-OS.movedCodeBlockPadding+this.width.read(u)}px`)})),this._register(yA(this._state));const o=It(u=>{const d=this._diffModel.read(u),h=d==null?void 0:d.diff.read(u);return h?h.movedTexts.map(g=>({move:g,original:new _v(xD(g.lineRangeMapping.original.startLineNumber-1),18),modified:new _v(xD(g.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register(bN(this._editors.original,o.map(u=>u.map(d=>d.original)))),this._register(bN(this._editors.modified,o.map(u=>u.map(d=>d.modified)))),this._register(lu((u,d)=>{const h=o.read(u);for(const g of h)d.add(new Dte(this._editors.original,g.original,g.move,"original",this._diffModel.get())),d.add(new Dte(this._editors.modified,g.modified,g.move,"modified",this._diffModel.get()))}));const a=Ll("original.onDidFocusEditorWidget",u=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>u(void 0),0))),l=Ll("modified.onDidFocusEditorWidget",u=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>u(void 0),0)));let c="modified";this._register(vA({createEmptyChangeSummary:()=>{},handleChange:(u,d)=>(u.didChange(a)&&(c="original"),u.didChange(l)&&(c="modified"),!0)},u=>{a.read(u),l.read(u);const d=this._diffModel.read(u);if(!d)return;const h=d.diff.read(u);let g;if(h&&c==="original"){const p=this._editors.originalCursor.read(u);p&&(g=h.movedTexts.find(_=>_.lineRangeMapping.original.contains(p.lineNumber)))}if(h&&c==="modified"){const p=this._editors.modifiedCursor.read(u);p&&(g=h.movedTexts.find(_=>_.lineRangeMapping.modified.contains(p.lineNumber)))}g!==d.movedTextToCompare.get()&&d.movedTextToCompare.set(void 0,void 0),d.setActiveMovedText(g)}))}};OS.movedCodeBlockPadding=4;let pb=OS;class Gz{static compute(e){const t=[],n=[];for(const s of e){let r=t.findIndex(o=>!o.intersectsStrict(s));r===-1&&(t.length>=6?r=iWe(t,fc(a=>a.intersectWithRangeLength(s),em)):(r=t.length,t.push(new oU))),t[r].addRange(s),n.push(r)}return new Gz(t.length,n)}constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class Dte extends Hz{constructor(e,t,n,s,r){const o=cn("div.diff-hidden-lines-widget");super(e,t,o.root),this._editor=e,this._move=n,this._kind=s,this._diffModel=r,this._nodes=cn("div.diff-moved-code-block",{style:{marginRight:"4px"}},[cn("div.text-content@textContent"),cn("div.action-bar@actionBar")]),o.root.appendChild(this._nodes.root);const a=Mi(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register(Om(this._nodes.root,{paddingRight:a.map(h=>h.verticalScrollbarWidth)}));let l;n.changes.length>0?l=this._kind==="original"?S("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):S("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):l=this._kind==="original"?S("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):S("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const c=this._register(new rf(this._nodes.actionBar,{highlightToggledItems:!0})),u=new tf("",l,"",!1);c.push(u,{icon:!1,label:!0});const d=new tf("","Compare",dn.asClassName(Ke.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===n?void 0:this._move,void 0)});this._register(Cn(h=>{const g=this._diffModel.movedTextToCompare.read(h)===n;d.checked=g})),c.push(d,{icon:!1,label:!0})}}class Ynt extends be{constructor(e,t,n,s){super(),this._editors=e,this._diffModel=t,this._options=n,this._decorations=It(this,r=>{const o=this._diffModel.read(r),a=o==null?void 0:o.diff.read(r);if(!a)return null;const l=this._diffModel.read(r).movedTextToCompare.read(r),c=this._options.renderIndicators.read(r),u=this._options.showEmptyDecorations.read(r),d=[],h=[];if(!l)for(const p of a.mappings)if(p.lineRangeMapping.original.isEmpty||d.push({range:p.lineRangeMapping.original.toInclusiveRange(),options:c?yte:Cte}),p.lineRangeMapping.modified.isEmpty||h.push({range:p.lineRangeMapping.modified.toInclusiveRange(),options:c?bte:wte}),p.lineRangeMapping.modified.isEmpty||p.lineRangeMapping.original.isEmpty)p.lineRangeMapping.original.isEmpty||d.push({range:p.lineRangeMapping.original.toInclusiveRange(),options:Fnt}),p.lineRangeMapping.modified.isEmpty||h.push({range:p.lineRangeMapping.modified.toInclusiveRange(),options:Mnt});else{const _=this._options.useTrueInlineDiffRendering.read(r)&&Kz(p.lineRangeMapping);for(const v of p.lineRangeMapping.innerChanges||[])if(p.lineRangeMapping.original.contains(v.originalRange.startLineNumber)&&d.push({range:v.originalRange,options:v.originalRange.isEmpty()&&u?Bnt:nB}),p.lineRangeMapping.modified.contains(v.modifiedRange.startLineNumber)&&h.push({range:v.modifiedRange,options:v.modifiedRange.isEmpty()&&u&&!_?Ont:Ste}),_){const y=o.model.original.getValueInRange(v.originalRange);h.push({range:v.modifiedRange,options:{description:"deleted-text",before:{content:y,inlineClassName:"inline-deleted-text"},zIndex:1e5,showIfCollapsed:!0}})}}if(l)for(const p of l.changes){const _=p.original.toInclusiveRange();_&&d.push({range:_,options:c?yte:Cte});const v=p.modified.toInclusiveRange();v&&h.push({range:v,options:c?bte:wte});for(const y of p.innerChanges||[])d.push({range:y.originalRange,options:nB}),h.push({range:y.modifiedRange,options:Ste})}const g=this._diffModel.read(r).activeMovedText.read(r);for(const p of a.movedTexts)d.push({range:p.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(p===g?" currentMove":""),blockPadding:[pb.movedCodeBlockPadding,0,pb.movedCodeBlockPadding,pb.movedCodeBlockPadding]}}),h.push({range:p.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(p===g?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:d,modifiedDecorations:h}}),this._register(vN(this._editors.original,this._decorations.map(r=>(r==null?void 0:r.originalDecorations)||[]))),this._register(vN(this._editors.modified,this._decorations.map(r=>(r==null?void 0:r.modifiedDecorations)||[])))}}class Qnt{resetSash(){this._sashRatio.set(void 0,void 0)}constructor(e,t){this._options=e,this.dimensions=t,this.sashLeft=FU(this,n=>{const s=this._sashRatio.read(n)??this._options.splitViewDefaultRatio.read(n);return this._computeSashLeft(s,n)},(n,s)=>{const r=this.dimensions.width.get();this._sashRatio.set(n/r,s)}),this._sashRatio=un(this,void 0)}_computeSashLeft(e,t){const n=this.dimensions.width.read(t),s=Math.floor(this._options.splitViewDefaultRatio.read(t)*n),r=this._options.enableSplitViewResizing.read(t)?Math.floor(e*n):s,o=100;return n<=o*2?s:r<o?o:r>n-o?n-o:r}}class Tpe extends be{constructor(e,t,n,s,r,o){super(),this._domNode=e,this._dimensions=t,this._enabled=n,this._boundarySashes=s,this.sashLeft=r,this._resetSash=o,this._sash=this._register(new Cl(this._domNode,{getVerticalSashTop:a=>0,getVerticalSashLeft:a=>this.sashLeft.get(),getVerticalSashHeight:a=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(a=>{this.sashLeft.set(this._startSashPosition+(a.currentX-a.startX),void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._resetSash())),this._register(Cn(a=>{const l=this._boundarySashes.read(a);l&&(this._sash.orthogonalEndSash=l.bottom)})),this._register(Cn(a=>{const l=this._enabled.read(a);this._sash.state=l?3:0,this.sashLeft.read(a),this._dimensions.height.read(a),this._sash.layout()}))}}class Xnt extends be{constructor(e,t,n){super(),this._editor=e,this._domNode=t,this.itemProvider=n,this.scrollTop=Mi(this,this._editor.onDidScrollChange,o=>this._editor.getScrollTop()),this.isScrollTopZero=this.scrollTop.map(o=>o===0),this.modelAttached=Mi(this,this._editor.onDidChangeModel,o=>this._editor.hasModel()),this.editorOnDidChangeViewZones=Ll("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=Ll("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=BU("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const s=this._domNode.appendChild(cn("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),r=new ResizeObserver(()=>{Cs(o=>{this.domNodeSizeChanged.trigger(o)})});r.observe(this._domNode),this._register(Dt(()=>r.disconnect())),this._register(Cn(o=>{s.className=this.isScrollTopZero.read(o)?"":"scroll-decoration"})),this._register(Cn(o=>this.render(o)))}dispose(){super.dispose(),ko(this._domNode)}render(e){if(!this.modelAttached.read(e))return;this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);const t=this.scrollTop.read(e),n=this._editor.getVisibleRanges(),s=new Set(this.views.keys()),r=Mt.ofStartAndLength(0,this._domNode.clientHeight);if(!r.isEmpty)for(const o of n){const a=new wt(o.startLineNumber,o.endLineNumber+1),l=this.itemProvider.getIntersectingGutterItems(a,e);Cs(c=>{for(const u of l){if(!u.range.intersect(a))continue;s.delete(u.id);let d=this.views.get(u.id);if(d)d.item.set(u,c);else{const _=document.createElement("div");this._domNode.appendChild(_);const v=un("item",u),y=this.itemProvider.createView(v,_);d=new Znt(v,y,_),this.views.set(u.id,d)}const h=u.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(u.range.startLineNumber,!0)-t:this._editor.getBottomForLineNumber(u.range.startLineNumber-1,!1)-t,p=(u.range.endLineNumberExclusive===1?Math.max(h,this._editor.getTopForLineNumber(u.range.startLineNumber,!1)-t):Math.max(h,this._editor.getBottomForLineNumber(u.range.endLineNumberExclusive-1,!0)-t))-h;d.domNode.style.top=`${h}px`,d.domNode.style.height=`${p}px`,d.gutterItemView.layout(Mt.ofStartAndLength(h,p),r)}})}for(const o of s){const a=this.views.get(o);a.gutterItemView.dispose(),a.domNode.remove(),this.views.delete(o)}}}class Znt{constructor(e,t,n){this.item=e,this.gutterItemView=t,this.domNode=n}}class Lpe extends t1{constructor(e){super(),this._getContext=e}runAction(e,t){const n=this._getContext();return super.runAction(e,n)}}class Nte extends ofe{constructor(e){super(),this._textModel=e}getValueOfRange(e){return this._textModel.getValueInRange(e)}get length(){const e=this._textModel.getLineCount(),t=this._textModel.getLineLength(e);return new Nm(e-1,t)}}class Jnt extends be{constructor(e,t,n={orientation:0}){super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new G8e),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new Ze),n.hoverDelegate=n.hoverDelegate??this._register(VU()),this.options=n,this.toggleMenuAction=this._register(new e2(()=>{var s;return(s=this.toggleMenuActionViewItem)==null?void 0:s.show()},n.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new rf(this.element,{orientation:n.orientation,ariaLabel:n.ariaLabel,actionRunner:n.actionRunner,allowContextMenu:n.allowContextMenu,highlightToggledItems:n.highlightToggledItems,hoverDelegate:n.hoverDelegate,actionViewItemProvider:(s,r)=>{if(s.id===e2.ID)return this.toggleMenuActionViewItem=new TD(s,s.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:dn.asClassNameArray(n.moreIcon??Ke.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(n.actionViewItemProvider){const o=n.actionViewItemProvider(s,r);if(o)return o}if(s instanceof K4){const o=new TD(s,s.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:s.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return o.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(o),this.disposables.add(this._onDidChangeDropdownVisibility.add(o.onDidChangeVisibility)),o}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(e){return this.actionBar.getAction(e)}setActions(e,t){this.clear();const n=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),n.push(this.toggleMenuAction)),n.forEach(s=>{this.actionBar.push(s,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(s)})})}getKeybindingLabel(e){var n,s;const t=(s=(n=this.options).getKeyBinding)==null?void 0:s.call(n,e);return(t==null?void 0:t.getLabel())??void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}}const ER=class ER extends tf{constructor(e,t){t=t||S("moreActions","More Actions..."),super(ER.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}};ER.ID="toolbar.toggle.more";let e2=ER;var Ipe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},sc=function(i,e){return function(t,n){e(t,n,i)}};let lB=class extends Jnt{constructor(e,t,n,s,r,o,a,l){super(e,r,{getKeyBinding:u=>o.lookupKeybinding(u.id)??void 0,...t,allowContextMenu:!0,skipTelemetry:typeof(t==null?void 0:t.telemetrySource)=="string"}),this._options=t,this._menuService=n,this._contextKeyService=s,this._contextMenuService=r,this._keybindingService=o,this._commandService=a,this._sessionDisposables=this._store.add(new Ze);const c=t==null?void 0:t.telemetrySource;c&&this._store.add(this.actionBar.onDidRun(u=>l.publicLog2("workbenchActionExecuted",{id:u.action.id,from:c})))}setActions(e,t=[],n){var u,d,h;this._sessionDisposables.clear();const s=e.slice(),r=t.slice(),o=[];let a=0;const l=[];let c=!1;if(((u=this._options)==null?void 0:u.hiddenItemStrategy)!==-1)for(let g=0;g<s.length;g++){const p=s[g];!(p instanceof nf)&&!(p instanceof GC)||p.hideActions&&(o.push(p.hideActions.toggle),p.hideActions.toggle.checked&&a++,p.hideActions.isHidden&&(c=!0,s[g]=void 0,((d=this._options)==null?void 0:d.hiddenItemStrategy)!==0&&(l[g]=p)))}if(((h=this._options)==null?void 0:h.overflowBehavior)!==void 0){const g=jKe(new Set(this._options.overflowBehavior.exempted),yn.map(s,v=>v==null?void 0:v.id)),p=this._options.overflowBehavior.maxItems-g.size;let _=0;for(let v=0;v<s.length;v++){const y=s[v];y&&(_++,!g.has(y.id)&&_>=p&&(s[v]=void 0,l[v]=y))}}kQ(s),kQ(l),super.setActions(s,oo.join(l,r)),(o.length>0||s.length>0)&&this._sessionDisposables.add(ge(this.getElement(),"contextmenu",g=>{var w,x,k,T,R;const p=new iu(rt(this.getElement()),g),_=this.getItemAction(p.target);if(!_)return;p.preventDefault(),p.stopPropagation();const v=[];if(_ instanceof nf&&_.menuKeybinding)v.push(_.menuKeybinding);else if(!(_ instanceof GC||_ instanceof e2)){const L=!!this._keybindingService.lookupKeybinding(_.id);v.push(Kme(this._commandService,this._keybindingService,_.id,void 0,L))}if(o.length>0){let L=!1;if(a===1&&((w=this._options)==null?void 0:w.hiddenItemStrategy)===0){L=!0;for(let I=0;I<o.length;I++)if(o[I].checked){o[I]=Qv({id:_.id,label:_.label,checked:!0,enabled:!1,run(){}});break}}if(!L&&(_ instanceof nf||_ instanceof GC)){if(!_.hideActions)return;v.push(_.hideActions.hide)}else v.push(Qv({id:"label",label:S("hide","Hide"),enabled:!1,run(){}}))}const y=oo.join(v,o);(x=this._options)!=null&&x.resetMenu&&!n&&(n=[this._options.resetMenu]),c&&n&&(y.push(new oo),y.push(Qv({id:"resetThisMenu",label:S("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(n)}))),y.length!==0&&this._contextMenuService.showContextMenu({getAnchor:()=>p,getActions:()=>y,menuId:(k=this._options)==null?void 0:k.contextMenu,menuActionOptions:{renderShortTitle:!0,...(T=this._options)==null?void 0:T.menuOptions},skipTelemetry:typeof((R=this._options)==null?void 0:R.telemetrySource)=="string",contextKeyService:this._contextKeyService})}))}};lB=Ipe([sc(2,I1),sc(3,Nn),sc(4,Rf),sc(5,yr),sc(6,ll),sc(7,D1)],lB);let wN=class extends lB{constructor(e,t,n,s,r,o,a,l,c){super(e,{resetMenu:t,...n},s,r,o,a,l,c),this._onDidChangeMenuItems=this._store.add(new se),this.onDidChangeMenuItems=this._onDidChangeMenuItems.event;const u=this._store.add(s.createMenu(t,r,{emitEventsForSubmenuChanges:!0})),d=()=>{var p,_,v;const h=[],g=[];eKe(u,n==null?void 0:n.menuOptions,{primary:h,secondary:g},(p=n==null?void 0:n.toolbarOptions)==null?void 0:p.primaryGroup,(_=n==null?void 0:n.toolbarOptions)==null?void 0:_.shouldInlineSubmenu,(v=n==null?void 0:n.toolbarOptions)==null?void 0:v.useSeparatorsInPrimaryActions),e.classList.toggle("has-no-actions",h.length===0&&g.length===0),super.setActions(h,g)};this._store.add(u.onDidChange(()=>{d(),this._onDidChangeMenuItems.fire(this)})),d()}setActions(){throw new Dn("This toolbar is populated from a menu.")}};wN=Ipe([sc(3,I1),sc(4,Nn),sc(5,Rf),sc(6,yr),sc(7,ll),sc(8,D1)],wN);var Dpe=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},EL=function(i,e){return function(t,n){e(t,n,i)}};const W6=[],ST=35;let cB=class extends be{constructor(e,t,n,s,r,o,a,l,c){super(),this._diffModel=t,this._editors=n,this._options=s,this._sashLayout=r,this._boundarySashes=o,this._instantiationService=a,this._contextKeyService=l,this._menuService=c,this._menu=this._register(this._menuService.createMenu(_r.DiffEditorHunkToolbar,this._contextKeyService)),this._actions=Mi(this,this._menu.onDidChange,()=>this._menu.getActions()),this._hasActions=this._actions.map(u=>u.length>0),this._showSash=It(this,u=>this._options.renderSideBySide.read(u)&&this._hasActions.read(u)),this.width=It(this,u=>this._hasActions.read(u)?ST:0),this.elements=cn("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:ST+"px"}},[]),this._currentDiff=It(this,u=>{var p;const d=this._diffModel.read(u);if(!d)return;const h=(p=d.diff.read(u))==null?void 0:p.mappings,g=this._editors.modifiedCursor.read(u);if(g)return h==null?void 0:h.find(_=>_.lineRangeMapping.modified.contains(g.lineNumber))}),this._selectedDiffs=It(this,u=>{const d=this._diffModel.read(u),h=d==null?void 0:d.diff.read(u);if(!h)return W6;const g=this._editors.modifiedSelections.read(u);if(g.every(y=>y.isEmpty()))return W6;const p=new Tl(g.map(y=>wt.fromRangeInclusive(y))),v=h.mappings.filter(y=>y.lineRangeMapping.innerChanges&&p.intersects(y.lineRangeMapping.modified)).map(y=>({mapping:y,rangeMappings:y.lineRangeMapping.innerChanges.filter(w=>g.some(x=>J.areIntersecting(w.modifiedRange,x)))}));return v.length===0||v.every(y=>y.rangeMappings.length===0)?W6:v}),this._register(bnt(e,this.elements.root)),this._register(ge(this.elements.root,"click",()=>{this._editors.modified.focus()})),this._register(Om(this.elements.root,{display:this._hasActions.map(u=>u?"block":"none")})),Yu(this,u=>this._showSash.read(u)?new Tpe(e,this._sashLayout.dimensions,this._options.enableSplitViewResizing,this._boundarySashes,FU(this,h=>this._sashLayout.sashLeft.read(h)-ST,(h,g)=>this._sashLayout.sashLeft.set(h+ST,g)),()=>this._sashLayout.resetSash()):void 0).recomputeInitiallyAndOnChange(this._store),this._register(new Xnt(this._editors.modified,this.elements.root,{getIntersectingGutterItems:(u,d)=>{const h=this._diffModel.read(d);if(!h)return[];const g=h.diff.read(d);if(!g)return[];const p=this._selectedDiffs.read(d);if(p.length>0){const v=rl.fromRangeMappings(p.flatMap(y=>y.rangeMappings));return[new Rte(v,!0,_r.DiffEditorSelectionToolbar,void 0,h.model.original.uri,h.model.modified.uri)]}const _=this._currentDiff.read(d);return g.mappings.map(v=>new Rte(v.lineRangeMapping.withInnerChangesFromLineRanges(),v.lineRangeMapping===(_==null?void 0:_.lineRangeMapping),_r.DiffEditorHunkToolbar,void 0,h.model.original.uri,h.model.modified.uri))},createView:(u,d)=>this._instantiationService.createInstance(uB,u,d,this)})),this._register(ge(this.elements.gutter,De.MOUSE_WHEEL,u=>{this._editors.modified.getOption(104).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(u)},{passive:!1}))}computeStagedValue(e){const t=e.innerChanges??[],n=new Nte(this._editors.modifiedModel.get()),s=new Nte(this._editors.original.getModel());return new rWe(t.map(a=>a.toTextEdit(n))).apply(s)}layout(e){this.elements.gutter.style.left=e+"px"}};cB=Dpe([EL(6,Pn),EL(7,Nn),EL(8,I1)],cB);class Rte{constructor(e,t,n,s,r,o){this.mapping=e,this.showAlways=t,this.menuId=n,this.rangeOverride=s,this.originalUri=r,this.modifiedUri=o}get id(){return this.mapping.modified.toString()}get range(){return this.rangeOverride??this.mapping.modified}}let uB=class extends be{constructor(e,t,n,s){super(),this._item=e,this._elements=cn("div.gutterItem",{style:{height:"20px",width:"34px"}},[cn("div.background@background",{},[]),cn("div.buttons@buttons",{},[])]),this._showAlways=this._item.map(this,o=>o.showAlways),this._menuId=this._item.map(this,o=>o.menuId),this._isSmall=un(this,!1),this._lastItemRange=void 0,this._lastViewRange=void 0;const r=this._register(s.createInstance(Dk,"element",!0,{position:{hoverPosition:1}}));this._register(EC(t,this._elements.root)),this._register(Cn(o=>{const a=this._showAlways.read(o);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",a),setTimeout(()=>{this._elements.root.classList.toggle("noTransition",!1)},0)})),this._register(lu((o,a)=>{this._elements.buttons.replaceChildren();const l=a.add(s.createInstance(wN,this._elements.buttons,this._menuId.read(o),{orientation:1,hoverDelegate:r,toolbarOptions:{primaryGroup:c=>c.startsWith("primary")},overflowBehavior:{maxItems:this._isSmall.read(o)?1:3},hiddenItemStrategy:0,actionRunner:new Lpe(()=>{const c=this._item.get(),u=c.mapping;return{mapping:u,originalWithModifiedChanges:n.computeStagedValue(u),originalUri:c.originalUri,modifiedUri:c.modifiedUri}}),menuOptions:{shouldForwardArgs:!0}}));a.add(l.onDidChangeMenuItems(()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)}))}))}layout(e,t){this._lastItemRange=e,this._lastViewRange=t;let n=this._elements.buttons.clientHeight;this._isSmall.set(this._item.get().mapping.original.startLineNumber===1&&e.length<30,void 0),n=this._elements.buttons.clientHeight;const s=e.length/2-n/2,r=n;let o=e.start+s;const a=Mt.tryCreate(r,t.endExclusive-r-n),l=Mt.tryCreate(e.start+r,e.endExclusive-n-r);l&&a&&l.start<l.endExclusive&&(o=a.clip(o),o=l.clip(o)),this._elements.buttons.style.top=`${o-e.start}px`}};uB=Dpe([EL(3,Pn)],uB);function t2(i){return dB.get(i)}const xg=class xg extends be{static get(e){let t=xg._map.get(e);if(!t){t=new xg(e),xg._map.set(e,t);const n=e.onDidDispose(()=>{const s=xg._map.get(e);s&&(xg._map.delete(e),s.dispose(),n.dispose())})}return t}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&(this._currentTransaction=new Q2(()=>{}))}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){const e=this._currentTransaction;this._currentTransaction=void 0,e.finish()}}constructor(e){var t;super(),this.editor=e,this._updateCounter=0,this._currentTransaction=void 0,this._model=un(this,this.editor.getModel()),this.model=this._model,this.isReadonly=Mi(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(92)),this._versionId=_7({owner:this,lazy:!0},((t=this.editor.getModel())==null?void 0:t.getVersionId())??null),this.versionId=this._versionId,this._selections=_7({owner:this,equalsFn:hJ(U$e(Gn.selectionsEqual)),lazy:!0},this.editor.getSelections()??null),this.selections=this._selections,this.isFocused=Mi(this,n=>{const s=this.editor.onDidFocusEditorWidget(n),r=this.editor.onDidBlurEditorWidget(n);return{dispose(){s.dispose(),r.dispose()}}},()=>this.editor.hasWidgetFocus()),this.value=FU(this,n=>{var s;return this.versionId.read(n),((s=this.model.read(n))==null?void 0:s.getValue())??""},(n,s)=>{const r=this.model.get();r!==null&&n!==r.getValue()&&r.setValue(n)}),this.valueIsEmpty=It(this,n=>{var s;return this.versionId.read(n),((s=this.editor.getModel())==null?void 0:s.getValueLength())===0}),this.cursorSelection=pA({owner:this,equalsFn:hJ(Gn.selectionsEqual)},n=>{var s;return((s=this.selections.read(n))==null?void 0:s[0])??null}),this.onDidType=BU(this),this.scrollTop=Mi(this.editor.onDidScrollChange,()=>this.editor.getScrollTop()),this.scrollLeft=Mi(this.editor.onDidScrollChange,()=>this.editor.getScrollLeft()),this.layoutInfo=Mi(this.editor.onDidLayoutChange,()=>this.editor.getLayoutInfo()),this.layoutInfoContentLeft=this.layoutInfo.map(n=>n.contentLeft),this.layoutInfoDecorationsLeft=this.layoutInfo.map(n=>n.decorationsLeft),this.contentWidth=Mi(this.editor.onDidContentSizeChange,()=>this.editor.getContentWidth()),this._overlayWidgetCounter=0,this._register(this.editor.onBeginUpdate(()=>this._beginUpdate())),this._register(this.editor.onEndUpdate(()=>this._endUpdate())),this._register(this.editor.onDidChangeModel(()=>{this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidType(n=>{this._beginUpdate();try{this._forceUpdate(),this.onDidType.trigger(this._currentTransaction,n)}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeModelContent(n=>{var s;this._beginUpdate();try{this._versionId.set(((s=this.editor.getModel())==null?void 0:s.getVersionId())??null,this._currentTransaction,n),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeCursorSelection(n=>{this._beginUpdate();try{this._selections.set(this.editor.getSelections(),this._currentTransaction,n),this._forceUpdate()}finally{this._endUpdate()}}))}forceUpdate(e){this._beginUpdate();try{return this._forceUpdate(),e?e(this._currentTransaction):void 0}finally{this._endUpdate()}}_forceUpdate(){var e;this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._versionId.set(((e=this.editor.getModel())==null?void 0:e.getVersionId())??null,this._currentTransaction,void 0),this._selections.set(this.editor.getSelections(),this._currentTransaction,void 0)}finally{this._endUpdate()}}getOption(e){return Mi(this,t=>this.editor.onDidChangeConfiguration(n=>{n.hasChanged(e)&&t(void 0)}),()=>this.editor.getOption(e))}setDecorations(e){const t=new Ze,n=this.editor.createDecorationsCollection();return t.add(_A({owner:this,debugName:()=>`Apply decorations from ${e.debugName}`},s=>{const r=e.read(s);n.set(r)})),t.add({dispose:()=>{n.clear()}}),t}createOverlayWidget(e){const t="observableOverlayWidget"+this._overlayWidgetCounter++,n={getDomNode:()=>e.domNode,getPosition:()=>e.position.get(),getId:()=>t,allowEditorOverflow:e.allowEditorOverflow,getMinContentWidthInPx:()=>e.minContentWidthInPx.get()};this.editor.addOverlayWidget(n);const s=Cn(r=>{e.position.read(r),e.minContentWidthInPx.read(r),this.editor.layoutOverlayWidget(n)});return Dt(()=>{s.dispose(),this.editor.removeOverlayWidget(n)})}};xg._map=new Map;let dB=xg;var eit=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},tit=function(i,e){return function(t,n){e(t,n,i)}},TL,P0;let hB=(P0=class extends be{static setBreadcrumbsSourceFactory(e){this._breadcrumbsSourceFactory.set(e,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(e,t,n,s){super(),this._editors=e,this._diffModel=t,this._options=n,this._instantiationService=s,this._modifiedOutlineSource=Yu(this,l=>{const c=this._editors.modifiedModel.read(l),u=TL._breadcrumbsSourceFactory.read(l);return!c||!u?void 0:u(c,this._instantiationService)}),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();Cs(u=>{for(const d of this._editors.original.getSelections()||[])c==null||c.ensureOriginalLineIsVisible(d.getStartPosition().lineNumber,0,u),c==null||c.ensureOriginalLineIsVisible(d.getEndPosition().lineNumber,0,u)})})),this._register(this._editors.modified.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();Cs(u=>{for(const d of this._editors.modified.getSelections()||[])c==null||c.ensureModifiedLineIsVisible(d.getStartPosition().lineNumber,0,u),c==null||c.ensureModifiedLineIsVisible(d.getEndPosition().lineNumber,0,u)})}));const r=this._diffModel.map((l,c)=>{var d;const u=(l==null?void 0:l.unchangedRegions.read(c))??[];return u.length===1&&u[0].modifiedLineNumber===1&&u[0].lineCount===((d=this._editors.modifiedModel.read(c))==null?void 0:d.getLineCount())?[]:u});this.viewZones=$y(this,(l,c)=>{const u=this._modifiedOutlineSource.read(l);if(!u)return{origViewZones:[],modViewZones:[]};const d=[],h=[],g=this._options.renderSideBySide.read(l),p=this._options.compactMode.read(l),_=r.read(l);for(let v=0;v<_.length;v++){const y=_[v];if(!y.shouldHideControls(l)&&!(p&&(v===0||v===_.length-1)))if(p){{const w=It(this,k=>y.getHiddenOriginalRange(k).startLineNumber-1),x=new _v(w,12);d.push(x),c.add(new Ate(this._editors.original,x,y,!g))}{const w=It(this,k=>y.getHiddenModifiedRange(k).startLineNumber-1),x=new _v(w,12);h.push(x),c.add(new Ate(this._editors.modified,x,y))}}else{{const w=It(this,k=>y.getHiddenOriginalRange(k).startLineNumber-1),x=new _v(w,24);d.push(x),c.add(new Pte(this._editors.original,x,y,y.originalUnchangedRange,!g,u,k=>this._diffModel.get().ensureModifiedLineIsVisible(k,2,void 0),this._options))}{const w=It(this,k=>y.getHiddenModifiedRange(k).startLineNumber-1),x=new _v(w,24);h.push(x),c.add(new Pte(this._editors.modified,x,y,y.modifiedUnchangedRange,!1,u,k=>this._diffModel.get().ensureModifiedLineIsVisible(k,2,void 0),this._options))}}}return{origViewZones:d,modViewZones:h}});const o={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},a={description:"Fold Unchanged",glyphMarginHoverMessage:new dge(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(S("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+dn.asClassName(Ke.fold),zIndex:10001};this._register(vN(this._editors.original,It(this,l=>{const c=r.read(l),u=c.map(d=>({range:d.originalUnchangedRange.toInclusiveRange(),options:o}));for(const d of c)d.shouldHideControls(l)&&u.push({range:J.fromPositions(new ue(d.originalLineNumber,1)),options:a});return u}))),this._register(vN(this._editors.modified,It(this,l=>{const c=r.read(l),u=c.map(d=>({range:d.modifiedUnchangedRange.toInclusiveRange(),options:o}));for(const d of c)d.shouldHideControls(l)&&u.push({range:wt.ofLength(d.modifiedLineNumber,1).toInclusiveRange(),options:a});return u}))),this._register(Cn(l=>{const c=r.read(l);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(c.map(u=>u.getHiddenOriginalRange(l).toInclusiveRange()).filter(Ub)),this._editors.modified.setHiddenAreas(c.map(u=>u.getHiddenModifiedRange(l).toInclusiveRange()).filter(Ub))}finally{this._isUpdatingHiddenAreas=!1}})),this._register(this._editors.modified.onMouseUp(l=>{var c;if(!l.event.rightButton&&l.target.position&&((c=l.target.element)!=null&&c.className.includes("fold-unchanged"))){const u=l.target.position.lineNumber,d=this._diffModel.get();if(!d)return;const h=d.unchangedRegions.get().find(g=>g.modifiedUnchangedRange.includes(u));if(!h)return;h.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(l=>{var c;if(!l.event.rightButton&&l.target.position&&((c=l.target.element)!=null&&c.className.includes("fold-unchanged"))){const u=l.target.position.lineNumber,d=this._diffModel.get();if(!d)return;const h=d.unchangedRegions.get().find(g=>g.originalUnchangedRange.includes(u));if(!h)return;h.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}}))}},TL=P0,P0._breadcrumbsSourceFactory=un(TL,()=>({dispose(){},getBreadcrumbItems(e,t){return[]}})),P0);hB=TL=eit([tit(3,Pn)],hB);class Ate extends Hz{constructor(e,t,n,s=!1){const r=cn("div.diff-hidden-lines-widget");super(e,t,r.root),this._unchangedRegion=n,this._hide=s,this._nodes=cn("div.diff-hidden-lines-compact",[cn("div.line-left",[]),cn("div.text@text",[]),cn("div.line-right",[])]),r.root.appendChild(this._nodes.root),this._hide&&this._nodes.root.replaceChildren(),this._register(Cn(o=>{if(!this._hide){const a=this._unchangedRegion.getHiddenModifiedRange(o).length,l=S("hiddenLines","{0} hidden lines",a);this._nodes.text.innerText=l}}))}}class Pte extends Hz{constructor(e,t,n,s,r,o,a,l){const c=cn("div.diff-hidden-lines-widget");super(e,t,c.root),this._editor=e,this._unchangedRegion=n,this._unchangedRegionRange=s,this._hide=r,this._modifiedOutlineSource=o,this._revealModifiedHiddenLine=a,this._options=l,this._nodes=cn("div.diff-hidden-lines",[cn("div.top@top",{title:S("diff.hiddenLines.top","Click or drag to show more above")}),cn("div.center@content",{style:{display:"flex"}},[cn("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[ht("a",{title:S("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},..._0("$(unfold)"))]),cn("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),cn("div.bottom@bottom",{title:S("diff.bottom","Click or drag to show more below"),role:"button"})]),c.root.appendChild(this._nodes.root),this._hide?ko(this._nodes.first):this._register(Om(this._nodes.first,{width:t2(this._editor).layoutInfoContentLeft})),this._register(Cn(d=>{const h=this._unchangedRegion.visibleLineCountTop.read(d)+this._unchangedRegion.visibleLineCountBottom.read(d)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!h),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(d)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(d)>0),this._nodes.top.classList.toggle("canMoveBottom",!h);const g=this._unchangedRegion.isDragged.read(d),p=this._editor.getDomNode();p&&(p.classList.toggle("draggingUnchangedRegion",!!g),g==="top"?(p.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(d)>0),p.classList.toggle("canMoveBottom",!h)):g==="bottom"?(p.classList.toggle("canMoveTop",!h),p.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(d)>0)):(p.classList.toggle("canMoveTop",!1),p.classList.toggle("canMoveBottom",!1)))}));const u=this._editor;this._register(ge(this._nodes.top,"mousedown",d=>{if(d.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),d.preventDefault();const h=d.clientY;let g=!1;const p=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const _=rt(this._nodes.top),v=ge(_,"mousemove",w=>{const k=w.clientY-h;g=g||Math.abs(k)>2;const T=Math.round(k/u.getOption(67)),R=Math.max(0,Math.min(p+T,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(R,void 0)}),y=ge(_,"mouseup",w=>{g||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),v.dispose(),y.dispose()})})),this._register(ge(this._nodes.bottom,"mousedown",d=>{if(d.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),d.preventDefault();const h=d.clientY;let g=!1;const p=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const _=rt(this._nodes.bottom),v=ge(_,"mousemove",w=>{const k=w.clientY-h;g=g||Math.abs(k)>2;const T=Math.round(k/u.getOption(67)),R=Math.max(0,Math.min(p-T,this._unchangedRegion.getMaxVisibleLineCountBottom())),L=this._unchangedRegionRange.endLineNumberExclusive>u.getModel().getLineCount()?u.getContentHeight():u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(R,void 0);const I=this._unchangedRegionRange.endLineNumberExclusive>u.getModel().getLineCount()?u.getContentHeight():u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);u.setScrollTop(u.getScrollTop()+(I-L))}),y=ge(_,"mouseup",w=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!g){const x=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const k=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);u.setScrollTop(u.getScrollTop()+(k-x))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),v.dispose(),y.dispose()})})),this._register(Cn(d=>{const h=[];if(!this._hide){const g=n.getHiddenModifiedRange(d).length,p=S("hiddenLines","{0} hidden lines",g),_=ht("span",{title:S("diff.hiddenLines.expandAll","Double click to unfold")},p);_.addEventListener("dblclick",w=>{w.button===0&&(w.preventDefault(),this._unchangedRegion.showAll(void 0))}),h.push(_);const v=this._unchangedRegion.getHiddenModifiedRange(d),y=this._modifiedOutlineSource.getBreadcrumbItems(v,d);if(y.length>0){h.push(ht("span",void 0,"|"));for(let w=0;w<y.length;w++){const x=y[w],k=X3.toIcon(x.kind),T=cn("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[pD(k),"",x.name,...w===y.length-1?[]:[pD(Ke.chevronRight)]]).root;h.push(T),T.onclick=()=>{this._revealModifiedHiddenLine(x.startLineNumber)}}}}ko(this._nodes.others,...h)}))}}var nit=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},iit=function(i,e){return function(t,n){e(t,n,i)}},Uc,Yh;let n2=(Yh=class extends be{constructor(e,t,n,s,r,o,a){super(),this._editors=e,this._rootElement=t,this._diffModel=n,this._rootWidth=s,this._rootHeight=r,this._modifiedEditorLayoutInfo=o,this._themeService=a,this.width=Uc.ENTIRE_DIFF_OVERVIEW_WIDTH;const l=Mi(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),c=It(h=>{const g=l.read(h),p=g.getColor(qHe)||(g.getColor(jHe)||U8).transparent(2),_=g.getColor(KHe)||(g.getColor($He)||z8).transparent(2);return{insertColor:p,removeColor:_}}),u=pn(document.createElement("div"));u.setClassName("diffViewport"),u.setPosition("absolute");const d=cn("div.diffOverview",{style:{position:"absolute",top:"0px",width:Uc.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register(EC(d,u.domNode)),this._register(Vs(d,De.POINTER_DOWN,h=>{this._editors.modified.delegateVerticalScrollbarPointerDown(h)})),this._register(ge(d,De.MOUSE_WHEEL,h=>{this._editors.modified.delegateScrollFromMouseWheelEvent(h)},{passive:!1})),this._register(EC(this._rootElement,d)),this._register(lu((h,g)=>{const p=this._diffModel.read(h),_=this._editors.original.createOverviewRuler("original diffOverviewRuler");_&&(g.add(_),g.add(EC(d,_.getDomNode())));const v=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(v&&(g.add(v),g.add(EC(d,v.getDomNode()))),!_||!v)return;const y=Ll("viewZoneChanged",this._editors.original.onDidChangeViewZones),w=Ll("viewZoneChanged",this._editors.modified.onDidChangeViewZones),x=Ll("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),k=Ll("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);g.add(Cn(T=>{var V;y.read(T),w.read(T),x.read(T),k.read(T);const R=c.read(T),L=(V=p==null?void 0:p.diff.read(T))==null?void 0:V.mappings;function I(U,W,G){const Z=G._getViewModel();return Z?U.filter(ne=>ne.length>0).map(ne=>{const fe=Z.coordinatesConverter.convertModelPositionToViewPosition(new ue(ne.startLineNumber,1)),te=Z.coordinatesConverter.convertModelPositionToViewPosition(new ue(ne.endLineNumberExclusive,1)),ce=te.lineNumber-fe.lineNumber;return new ppe(fe.lineNumber,te.lineNumber,ce,W.toString())}):[]}const A=I((L||[]).map(U=>U.lineRangeMapping.original),R.removeColor,this._editors.original),B=I((L||[]).map(U=>U.lineRangeMapping.modified),R.insertColor,this._editors.modified);_==null||_.setZones(A),v==null||v.setZones(B)})),g.add(Cn(T=>{const R=this._rootHeight.read(T),L=this._rootWidth.read(T),I=this._modifiedEditorLayoutInfo.read(T);if(I){const A=Uc.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Uc.ONE_OVERVIEW_WIDTH;_.setLayout({top:0,height:R,right:A+Uc.ONE_OVERVIEW_WIDTH,width:Uc.ONE_OVERVIEW_WIDTH}),v.setLayout({top:0,height:R,right:0,width:Uc.ONE_OVERVIEW_WIDTH});const B=this._editors.modifiedScrollTop.read(T),V=this._editors.modifiedScrollHeight.read(T),U=this._editors.modified.getOption(104),W=new ny(U.verticalHasArrows?U.arrowSize:0,U.verticalScrollbarSize,0,I.height,V,B);u.setTop(W.getSliderPosition()),u.setHeight(W.getSliderSize())}else u.setTop(0),u.setHeight(0);d.style.height=R+"px",d.style.left=L-Uc.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",u.setWidth(Uc.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}},Uc=Yh,Yh.ONE_OVERVIEW_WIDTH=15,Yh.ENTIRE_DIFF_OVERVIEW_WIDTH=Yh.ONE_OVERVIEW_WIDTH*2,Yh);n2=Uc=nit([iit(6,Sc)],n2);const H6=[];class sit extends be{constructor(e,t,n,s){super(),this._editors=e,this._diffModel=t,this._options=n,this._widget=s,this._selectedDiffs=It(this,r=>{const o=this._diffModel.read(r),a=o==null?void 0:o.diff.read(r);if(!a)return H6;const l=this._editors.modifiedSelections.read(r);if(l.every(h=>h.isEmpty()))return H6;const c=new Tl(l.map(h=>wt.fromRangeInclusive(h))),d=a.mappings.filter(h=>h.lineRangeMapping.innerChanges&&c.intersects(h.lineRangeMapping.modified)).map(h=>({mapping:h,rangeMappings:h.lineRangeMapping.innerChanges.filter(g=>l.some(p=>J.areIntersecting(g.modifiedRange,p)))}));return d.length===0||d.every(h=>h.rangeMappings.length===0)?H6:d}),this._register(lu((r,o)=>{if(!this._options.shouldRenderOldRevertArrows.read(r))return;const a=this._diffModel.read(r),l=a==null?void 0:a.diff.read(r);if(!a||!l||a.movedTextToCompare.read(r))return;const c=[],u=this._selectedDiffs.read(r),d=new Set(u.map(h=>h.mapping));if(u.length>0){const h=this._editors.modifiedSelections.read(r),g=o.add(new CN(h[h.length-1].positionLineNumber,this._widget,u.flatMap(p=>p.rangeMappings),!0));this._editors.modified.addGlyphMarginWidget(g),c.push(g)}for(const h of l.mappings)if(!d.has(h)&&!h.lineRangeMapping.modified.isEmpty&&h.lineRangeMapping.innerChanges){const g=o.add(new CN(h.lineRangeMapping.modified.startLineNumber,this._widget,h.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(g),c.push(g)}o.add(Dt(()=>{for(const h of c)this._editors.modified.removeGlyphMarginWidget(h)}))}))}}const TR=class TR extends be{getId(){return this._id}constructor(e,t,n,s){super(),this._lineNumber=e,this._widget=t,this._diffs=n,this._revertSelection=s,this._id=`revertButton${TR.counter++}`,this._domNode=cn("div.revertButton",{title:this._revertSelection?S("revertSelectedChanges","Revert Selected Changes"):S("revertChange","Revert Change")},[pD(Ke.arrowRight)]).root,this._register(ge(this._domNode,De.MOUSE_DOWN,r=>{r.button!==2&&(r.stopPropagation(),r.preventDefault())})),this._register(ge(this._domNode,De.MOUSE_UP,r=>{r.stopPropagation(),r.preventDefault()})),this._register(ge(this._domNode,De.CLICK,r=>{this._diffs instanceof io?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),r.stopPropagation(),r.preventDefault()}))}getDomNode(){return this._domNode}getPosition(){return{lane:Dm.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}};TR.counter=0;let CN=TR;function gh(i,e,t){const n=i.bindTo(e);return _A({debugName:()=>`Set Context Key "${i.key}"`},s=>{n.set(t(s))})}var rit=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Mte=function(i,e){return function(t,n){e(t,n,i)}};let fB=class extends be{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(e,t,n,s,r,o,a){super(),this.originalEditorElement=e,this.modifiedEditorElement=t,this._options=n,this._argCodeEditorWidgetOptions=s,this._createInnerEditor=r,this._instantiationService=o,this._keybindingService=a,this.original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{})),this._onDidContentSizeChange=this._register(new se),this.modifiedScrollTop=Mi(this,this.modified.onDidScrollChange,()=>this.modified.getScrollTop()),this.modifiedScrollHeight=Mi(this,this.modified.onDidScrollChange,()=>this.modified.getScrollHeight()),this.modifiedObs=t2(this.modified),this.originalObs=t2(this.original),this.modifiedModel=this.modifiedObs.model,this.modifiedSelections=Mi(this,this.modified.onDidChangeCursorSelection,()=>this.modified.getSelections()??[]),this.modifiedCursor=pA({owner:this,equalsFn:ue.equals},l=>{var c;return((c=this.modifiedSelections.read(l)[0])==null?void 0:c.getPosition())??new ue(1,1)}),this.originalCursor=Mi(this,this.original.onDidChangeCursorPosition,()=>this.original.getPosition()??new ue(1,1)),this._argCodeEditorWidgetOptions=null,this._register(vA({createEmptyChangeSummary:()=>({}),handleChange:(l,c)=>(l.didChange(n.editorOptions)&&Object.assign(c,l.change.changedOptions),!0)},(l,c)=>{n.editorOptions.read(l),this._options.renderSideBySide.read(l),this.modified.updateOptions(this._adjustOptionsForRightHandSide(l,c)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(l,c))}))}_createLeftHandSideEditor(e,t){const n=this._adjustOptionsForLeftHandSide(void 0,e),s=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,n,t);return s.setContextValue("isInDiffLeftEditor",!0),s}_createRightHandSideEditor(e,t){const n=this._adjustOptionsForRightHandSide(void 0,e),s=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,n,t);return s.setContextValue("isInDiffRightEditor",!0),s}_constructInnerEditor(e,t,n,s){const r=this._createInnerEditor(e,t,n,s);return this._register(r.onDidContentSizeChange(o=>{const a=this.original.getContentWidth()+this.modified.getContentWidth()+n2.ENTIRE_DIFF_OVERVIEW_WIDTH,l=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:l,contentWidth:a,contentHeightChanged:o.contentHeightChanged,contentWidthChanged:o.contentWidthChanged})})),r}_adjustOptionsForLeftHandSide(e,t){const n=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(n.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},n.wordWrapOverride1=this._options.diffWordWrap.get()):(n.wordWrapOverride1="off",n.wordWrapOverride2="off",n.stickyScroll={enabled:!1},n.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),n.glyphMargin=this._options.renderSideBySide.get(),t.originalAriaLabel&&(n.ariaLabel=t.originalAriaLabel),n.ariaLabel=this._updateAriaLabel(n.ariaLabel),n.readOnly=!this._options.originalEditable.get(),n.dropIntoEditor={enabled:!n.readOnly},n.extraEditorClassName="original-in-monaco-diff-editor",n}_adjustOptionsForRightHandSide(e,t){const n=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(n.ariaLabel=t.modifiedAriaLabel),n.ariaLabel=this._updateAriaLabel(n.ariaLabel),n.wordWrapOverride1=this._options.diffWordWrap.get(),n.revealHorizontalRightPadding=C1.revealHorizontalRightPadding.defaultValue+n2.ENTIRE_DIFF_OVERVIEW_WIDTH,n.scrollbar.verticalHasArrows=!1,n.extraEditorClassName="modified-in-monaco-diff-editor",n}_adjustOptionsForSubEditor(e){const t={...e,dimension:{height:0,width:0}};return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar={...t.scrollbar||{}},t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap={...t.minimap||{}},t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}_updateAriaLabel(e){var n;e||(e="");const t=S("diff-aria-navigation-tip"," use {0} to open the accessibility help.",(n=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))==null?void 0:n.getAriaLabel());return this._options.accessibilityVerbose.get()?e+t:e?e.replaceAll(t,""):""}};fB=rit([Mte(5,Pn),Mte(6,yr)],fB);const LR=class LR extends be{constructor(){super(...arguments),this._id=++LR.idCounter,this._onDidDispose=this._register(new se),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e,t="api"){this._targetEditor.setPosition(e,t)}revealLine(e,t=0){this._targetEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._targetEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e,t="api"){this._targetEditor.setSelection(e,t)}setSelections(e,t="api"){this._targetEditor.setSelections(e,t)}revealLines(e,t,n=0){this._targetEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._targetEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._targetEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,s=!0){this._targetEditor.revealRange(e,t,n,s)}revealRangeInCenter(e,t=0){this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,n){this._targetEditor.trigger(e,t,n)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}};LR.idCounter=0;let gB=LR;var oit=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ait=function(i,e){return function(t,n){e(t,n,i)}};let mB=class{get editorOptions(){return this._options}constructor(e,t){this._accessibilityService=t,this._diffEditorWidth=un(this,0),this._screenReaderMode=Mi(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this.couldShowInlineViewBecauseOfSize=It(this,s=>this._options.read(s).renderSideBySide&&this._diffEditorWidth.read(s)<=this._options.read(s).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=It(this,s=>this._options.read(s).renderOverviewRuler),this.renderSideBySide=It(this,s=>this.compactMode.read(s)&&this.shouldRenderInlineViewInSmartMode.read(s)?!1:this._options.read(s).renderSideBySide&&!(this._options.read(s).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(s)&&!this._screenReaderMode.read(s))),this.readOnly=It(this,s=>this._options.read(s).readOnly),this.shouldRenderOldRevertArrows=It(this,s=>!(!this._options.read(s).renderMarginRevertIcon||!this.renderSideBySide.read(s)||this.readOnly.read(s)||this.shouldRenderGutterMenu.read(s))),this.shouldRenderGutterMenu=It(this,s=>this._options.read(s).renderGutterMenu),this.renderIndicators=It(this,s=>this._options.read(s).renderIndicators),this.enableSplitViewResizing=It(this,s=>this._options.read(s).enableSplitViewResizing),this.splitViewDefaultRatio=It(this,s=>this._options.read(s).splitViewDefaultRatio),this.ignoreTrimWhitespace=It(this,s=>this._options.read(s).ignoreTrimWhitespace),this.maxComputationTimeMs=It(this,s=>this._options.read(s).maxComputationTime),this.showMoves=It(this,s=>this._options.read(s).experimental.showMoves&&this.renderSideBySide.read(s)),this.isInEmbeddedEditor=It(this,s=>this._options.read(s).isInEmbeddedEditor),this.diffWordWrap=It(this,s=>this._options.read(s).diffWordWrap),this.originalEditable=It(this,s=>this._options.read(s).originalEditable),this.diffCodeLens=It(this,s=>this._options.read(s).diffCodeLens),this.accessibilityVerbose=It(this,s=>this._options.read(s).accessibilityVerbose),this.diffAlgorithm=It(this,s=>this._options.read(s).diffAlgorithm),this.showEmptyDecorations=It(this,s=>this._options.read(s).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=It(this,s=>this._options.read(s).onlyShowAccessibleDiffViewer),this.compactMode=It(this,s=>this._options.read(s).compactMode),this.trueInlineDiffRenderingEnabled=It(this,s=>this._options.read(s).experimental.useTrueInlineView),this.useTrueInlineDiffRendering=It(this,s=>!this.renderSideBySide.read(s)&&this.trueInlineDiffRenderingEnabled.read(s)),this.hideUnchangedRegions=It(this,s=>this._options.read(s).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=It(this,s=>this._options.read(s).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=It(this,s=>this._options.read(s).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsMinimumLineCount=It(this,s=>this._options.read(s).hideUnchangedRegions.minimumLineCount),this._model=un(this,void 0),this.shouldRenderInlineViewInSmartMode=this._model.map(this,s=>sqe(this,r=>{const o=s==null?void 0:s.diff.read(r);return o?lit(o,this.trueInlineDiffRenderingEnabled.read(r)):void 0})).flatten().map(this,s=>!!s),this.inlineViewHideOriginalLineNumbers=this.compactMode;const n={...e,...Ote(e,lr)};this._options=un(this,n)}updateOptions(e){const t=Ote(e,this._options.get()),n={...this._options.get(),...e,...t};this._options.set(n,void 0,{changedOptions:e})}setWidth(e){this._diffEditorWidth.set(e,void 0)}setModel(e){this._model.set(e,void 0)}};mB=oit([ait(1,Iu)],mB);function lit(i,e){return i.mappings.every(t=>cit(t.lineRangeMapping)||uit(t.lineRangeMapping)||e&&Kz(t.lineRangeMapping))}function cit(i){return i.original.length===0}function uit(i){return i.modified.length===0}function Ote(i,e){var t,n,s,r,o,a,l,c;return{enableSplitViewResizing:$e(i.enableSplitViewResizing,e.enableSplitViewResizing),splitViewDefaultRatio:q9e(i.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:$e(i.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:$e(i.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:kp(i.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:kp(i.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:$e(i.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:$e(i.renderIndicators,e.renderIndicators),originalEditable:$e(i.originalEditable,e.originalEditable),diffCodeLens:$e(i.diffCodeLens,e.diffCodeLens),renderOverviewRuler:$e(i.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:xi(i.diffWordWrap,e.diffWordWrap,["off","on","inherit"]),diffAlgorithm:xi(i.diffAlgorithm,e.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:$e(i.accessibilityVerbose,e.accessibilityVerbose),experimental:{showMoves:$e((t=i.experimental)==null?void 0:t.showMoves,e.experimental.showMoves),showEmptyDecorations:$e((n=i.experimental)==null?void 0:n.showEmptyDecorations,e.experimental.showEmptyDecorations),useTrueInlineView:$e((s=i.experimental)==null?void 0:s.useTrueInlineView,e.experimental.useTrueInlineView)},hideUnchangedRegions:{enabled:$e(((r=i.hideUnchangedRegions)==null?void 0:r.enabled)??((o=i.experimental)==null?void 0:o.collapseUnchangedRegions),e.hideUnchangedRegions.enabled),contextLineCount:kp((a=i.hideUnchangedRegions)==null?void 0:a.contextLineCount,e.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:kp((l=i.hideUnchangedRegions)==null?void 0:l.minimumLineCount,e.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:kp((c=i.hideUnchangedRegions)==null?void 0:c.revealLineCount,e.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:$e(i.isInEmbeddedEditor,e.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:$e(i.onlyShowAccessibleDiffViewer,e.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:kp(i.renderSideBySideInlineBreakpoint,e.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:$e(i.useInlineViewWhenSpaceIsLimited,e.useInlineViewWhenSpaceIsLimited),renderGutterMenu:$e(i.renderGutterMenu,e.renderGutterMenu),compactMode:$e(i.compactMode,e.compactMode)}}var dit=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},eC=function(i,e){return function(t,n){e(t,n,i)}};let SN=class extends gB{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(e,t,n,s,r,o,a,l){super(),this._domElement=e,this._parentContextKeyService=s,this._parentInstantiationService=r,this._accessibilitySignalService=a,this._editorProgressService=l,this.elements=cn("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[cn("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),cn("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),cn("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModelSrc=this._register(kge(this,void 0)),this._diffModel=It(this,k=>{var T;return(T=this._diffModelSrc.read(k))==null?void 0:T.object}),this.onDidChangeModel=Le.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new Gy([Nn,this._contextKeyService]))),this._boundarySashes=un(this,void 0),this._accessibleDiffViewerShouldBeVisible=un(this,!1),this._accessibleDiffViewerVisible=It(this,k=>this._options.onlyShowAccessibleDiffViewer.read(k)?!0:this._accessibleDiffViewerShouldBeVisible.read(k)),this._movedBlocksLinesPart=un(this,void 0),this._layoutInfo=It(this,k=>{var fe,te;const T=this._rootSizeObserver.width.read(k),R=this._rootSizeObserver.height.read(k);this._rootSizeObserver.automaticLayout?this.elements.root.style.height="100%":this.elements.root.style.height=R+"px";const L=this._sash.read(k),I=this._gutter.read(k),A=(I==null?void 0:I.width.read(k))??0,B=((fe=this._overviewRulerPart.read(k))==null?void 0:fe.width)??0;let V,U,W,G,Z;if(!!L){const ce=L.sashLeft.read(k),ve=((te=this._movedBlocksLinesPart.read(k))==null?void 0:te.width.read(k))??0;V=0,U=ce-A-ve,Z=ce-A,W=ce,G=T-W-B}else{Z=0;const ce=this._options.inlineViewHideOriginalLineNumbers.read(k);V=A,ce?U=0:U=Math.max(5,this._editors.originalObs.layoutInfoDecorationsLeft.read(k)),W=A+U,G=T-W-B}return this.elements.original.style.left=V+"px",this.elements.original.style.width=U+"px",this._editors.original.layout({width:U,height:R},!0),I==null||I.layout(Z),this.elements.modified.style.left=W+"px",this.elements.modified.style.width=G+"px",this._editors.modified.layout({width:G,height:R},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map((k,T)=>k==null?void 0:k.diff.read(T)),this.onDidUpdateDiff=Le.fromObservableLight(this._diffValue),o.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register(Dt(()=>this.elements.root.remove())),this._rootSizeObserver=this._register(new wpe(this.elements.root,t.dimension)),this._rootSizeObserver.setAutomaticLayout(t.automaticLayout??!1),this._options=this._instantiationService.createInstance(mB,t),this._register(Cn(k=>{this._options.setWidth(this._rootSizeObserver.width.read(k))})),this._contextKeyService.createKey(Ue.isEmbeddedDiffEditor.key,!1),this._register(gh(Ue.isEmbeddedDiffEditor,this._contextKeyService,k=>this._options.isInEmbeddedEditor.read(k))),this._register(gh(Ue.comparingMovedCode,this._contextKeyService,k=>{var T;return!!((T=this._diffModel.read(k))!=null&&T.movedTextToCompare.read(k))})),this._register(gh(Ue.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,k=>this._options.couldShowInlineViewBecauseOfSize.read(k))),this._register(gh(Ue.diffEditorInlineMode,this._contextKeyService,k=>!this._options.renderSideBySide.read(k))),this._register(gh(Ue.hasChanges,this._contextKeyService,k=>{var T,R;return(((R=(T=this._diffModel.read(k))==null?void 0:T.diff.read(k))==null?void 0:R.mappings.length)??0)>0})),this._editors=this._register(this._instantiationService.createInstance(fB,this.elements.original,this.elements.modified,this._options,n,(k,T,R,L)=>this._createInnerEditor(k,T,R,L))),this._register(gh(Ue.diffEditorOriginalWritable,this._contextKeyService,k=>this._options.originalEditable.read(k))),this._register(gh(Ue.diffEditorModifiedWritable,this._contextKeyService,k=>!this._options.readOnly.read(k))),this._register(gh(Ue.diffEditorOriginalUri,this._contextKeyService,k=>{var T;return((T=this._diffModel.read(k))==null?void 0:T.model.original.uri.toString())??""})),this._register(gh(Ue.diffEditorModifiedUri,this._contextKeyService,k=>{var T;return((T=this._diffModel.read(k))==null?void 0:T.model.modified.uri.toString())??""})),this._overviewRulerPart=Yu(this,k=>this._options.renderOverviewRuler.read(k)?this._instantiationService.createInstance(nc(n2,k),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map(T=>T.modifiedEditor)):void 0).recomputeInitiallyAndOnChange(this._store);const c={height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((k,T)=>{var R;return k-(((R=this._overviewRulerPart.read(T))==null?void 0:R.width)??0)})};this._sashLayout=new Qnt(this._options,c),this._sash=Yu(this,k=>{const T=this._options.renderSideBySide.read(k);return this.elements.root.classList.toggle("side-by-side",T),T?new Tpe(this.elements.root,c,this._options.enableSplitViewResizing,this._boundarySashes,this._sashLayout.sashLeft,()=>this._sashLayout.resetSash()):void 0}).recomputeInitiallyAndOnChange(this._store);const u=Yu(this,k=>this._instantiationService.createInstance(nc(hB,k),this._editors,this._diffModel,this._options)).recomputeInitiallyAndOnChange(this._store);Yu(this,k=>this._instantiationService.createInstance(nc(Ynt,k),this._editors,this._diffModel,this._options,this)).recomputeInitiallyAndOnChange(this._store);const d=new Set,h=new Set;let g=!1;const p=Yu(this,k=>this._instantiationService.createInstance(nc(aB,k),rt(this._domElement),this._editors,this._diffModel,this._options,this,()=>g||u.get().isUpdatingHiddenAreas,d,h)).recomputeInitiallyAndOnChange(this._store),_=It(this,k=>{const T=p.read(k).viewZones.read(k).orig,R=u.read(k).viewZones.read(k).origViewZones;return T.concat(R)}),v=It(this,k=>{const T=p.read(k).viewZones.read(k).mod,R=u.read(k).viewZones.read(k).modViewZones;return T.concat(R)});this._register(bN(this._editors.original,_,k=>{g=k},d));let y;this._register(bN(this._editors.modified,v,k=>{g=k,g?y=_N.capture(this._editors.modified):(y==null||y.restore(this._editors.modified),y=void 0)},h)),this._accessibleDiffViewer=Yu(this,k=>this._instantiationService.createInstance(nc(c0,k),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(T,R)=>this._accessibleDiffViewerShouldBeVisible.set(T,R),this._options.onlyShowAccessibleDiffViewer.map(T=>!T),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((T,R)=>{var L;return(L=T==null?void 0:T.diff.read(R))==null?void 0:L.mappings.map(I=>I.lineRangeMapping)}),new Ant(this._editors))).recomputeInitiallyAndOnChange(this._store);const w=this._accessibleDiffViewerVisible.map(k=>k?"hidden":"visible");this._register(Om(this.elements.modified,{visibility:w})),this._register(Om(this.elements.original,{visibility:w})),this._createDiffEditorContributions(),o.addDiffEditor(this),this._gutter=Yu(this,k=>this._options.shouldRenderGutterMenu.read(k)?this._instantiationService.createInstance(nc(cB,k),this.elements.root,this._diffModel,this._editors,this._options,this._sashLayout,this._boundarySashes):void 0),this._register(yA(this._layoutInfo)),Yu(this,k=>new(nc(pb,k))(this.elements.root,this._diffModel,this._layoutInfo.map(T=>T.originalEditor),this._layoutInfo.map(T=>T.modifiedEditor),this._editors)).recomputeInitiallyAndOnChange(this._store,k=>{this._movedBlocksLinesPart.set(k,void 0)}),this._register(Le.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,k=>this._handleCursorPositionChange(k,!0))),this._register(Le.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,k=>this._handleCursorPositionChange(k,!1)));const x=this._diffModel.map(this,(k,T)=>{if(k)return k.diff.read(T)===void 0&&!k.isDiffUpToDate.read(T)});this._register(lu((k,T)=>{if(x.read(k)===!0){const R=this._editorProgressService.show(!0,1e3);T.add(Dt(()=>R.done()))}})),this._register(lu((k,T)=>{T.add(new(nc(sit,k))(this._editors,this._diffModel,this._options,this))})),this._register(lu((k,T)=>{const R=this._diffModel.read(k);if(R)for(const L of[R.model.original,R.model.modified])T.add(L.onWillDispose(I=>{Un(new Dn("TextModel got disposed before DiffEditorWidget model got reset")),this.setModel(null)}))})),this._register(Cn(k=>{this._options.setModel(this._diffModel.read(k))}))}_createInnerEditor(e,t,n,s){return e.createInstance(pN,t,n,s)}_createDiffEditorContributions(){const e=Xv.getDiffEditorContributions();for(const t of e)try{this._register(this._instantiationService.createInstance(t.ctor,this))}catch(n){Un(n)}}get _targetEditor(){return this._editors.modified}getEditorType(){return wz.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var n;const e=this._editors.original.saveViewState(),t=this._editors.modified.saveViewState();return{original:e,modified:t,modelState:(n=this._diffModel.get())==null?void 0:n.serializeState()}}restoreViewState(e){var t;if(e&&e.original&&e.modified){const n=e;this._editors.original.restoreViewState(n.original),this._editors.modified.restoreViewState(n.modified),n.modelState&&((t=this._diffModel.get())==null||t.restoreSerializedState(n.modelState))}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(e){return this._instantiationService.createInstance(oB,e,this._options)}getModel(){var e;return((e=this._diffModel.get())==null?void 0:e.model)??null}setModel(e){const t=e?"model"in e?yN.create(e).createNewRef(this):yN.create(this.createViewModel(e),this):null;this.setDiffModel(t)}setDiffModel(e,t){const n=this._diffModel.get();!e&&n&&this._accessibleDiffViewer.get().close(),this._diffModel.get()!==(e==null?void 0:e.object)&&MU(t,s=>{var a;const r=e==null?void 0:e.object;Mi.batchEventsGlobally(s,()=>{this._editors.original.setModel(r?r.model.original:null),this._editors.modified.setModel(r?r.model.modified:null)});const o=(a=this._diffModelSrc.get())==null?void 0:a.createNewRef(this);this._diffModelSrc.set(e==null?void 0:e.createNewRef(this),s),setTimeout(()=>{o==null||o.dispose()},0)})}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var t;const e=(t=this._diffModel.get())==null?void 0:t.diff.get();return e?hit(e):null}revert(e){const t=this._diffModel.get();!t||!t.isDiffUpToDate.get()||this._editors.modified.executeEdits("diffEditor",[{range:e.modified.toExclusiveRange(),text:t.model.original.getValueInRange(e.original.toExclusiveRange())}])}revertRangeMappings(e){const t=this._diffModel.get();if(!t||!t.isDiffUpToDate.get())return;const n=e.map(s=>({range:s.modifiedRange,text:t.model.original.getValueInRange(s.originalRange)}));this._editors.modified.executeEdits("diffEditor",n)}_goTo(e){this._editors.modified.setPosition(new ue(e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(e.lineRangeMapping.modified.toExclusiveRange())}goToDiff(e){var r,o;const t=(o=(r=this._diffModel.get())==null?void 0:r.diff.get())==null?void 0:o.mappings;if(!t||t.length===0)return;const n=this._editors.modified.getPosition().lineNumber;let s;e==="next"?s=t.find(a=>a.lineRangeMapping.modified.startLineNumber>n)??t[0]:s=sD(t,a=>a.lineRangeMapping.modified.startLineNumber<n)??t[t.length-1],this._goTo(s),s.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(ad.diffLineDeleted,{source:"diffEditor.goToDiff"}):s.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(ad.diffLineInserted,{source:"diffEditor.goToDiff"}):s&&this._accessibilitySignalService.playSignal(ad.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const e=this._diffModel.get();e&&this.waitForDiff().then(()=>{var n;const t=(n=e.diff.get())==null?void 0:n.mappings;!t||t.length===0||this._goTo(t[0])})}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const e=this._diffModel.get();e&&await e.waitForDiff()}mapToOtherSide(){var o,a;const e=this._editors.modified.hasWidgetFocus(),t=e?this._editors.modified:this._editors.original,n=e?this._editors.original:this._editors.modified;let s;const r=t.getSelection();if(r){const l=(a=(o=this._diffModel.get())==null?void 0:o.diff.get())==null?void 0:a.mappings.map(c=>e?c.lineRangeMapping.flip():c.lineRangeMapping);if(l){const c=_te(r.getStartPosition(),l),u=_te(r.getEndPosition(),l);s=J.plusRange(c,u)}}return{destination:n,destinationSelection:s}}switchSide(){const{destination:e,destinationSelection:t}=this.mapToOtherSide();e.focus(),t&&e.setSelection(t)}exitCompareMove(){const e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){var t;const e=(t=this._diffModel.get())==null?void 0:t.unchangedRegions.get();e&&Cs(n=>{for(const s of e)s.collapseAll(n)})}showAllUnchangedRegions(){var t;const e=(t=this._diffModel.get())==null?void 0:t.unchangedRegions.get();e&&Cs(n=>{for(const s of e)s.showAll(n)})}_handleCursorPositionChange(e,t){var n,s;if((e==null?void 0:e.reason)===3){const r=(s=(n=this._diffModel.get())==null?void 0:n.diff.get())==null?void 0:s.mappings.find(o=>t?o.lineRangeMapping.modified.contains(e.position.lineNumber):o.lineRangeMapping.original.contains(e.position.lineNumber));r!=null&&r.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(ad.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):r!=null&&r.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(ad.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):r&&this._accessibilitySignalService.playSignal(ad.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}};SN=dit([eC(3,Nn),eC(4,Pn),eC(5,Es),eC(6,PA),eC(7,RU)],SN);function hit(i){return i.mappings.map(e=>{const t=e.lineRangeMapping;let n,s,r,o,a=t.innerChanges;return t.original.isEmpty?(n=t.original.startLineNumber-1,s=0,a=void 0):(n=t.original.startLineNumber,s=t.original.endLineNumberExclusive-1),t.modified.isEmpty?(r=t.modified.startLineNumber-1,o=0,a=void 0):(r=t.modified.startLineNumber,o=t.modified.endLineNumberExclusive-1),{originalStartLineNumber:n,originalEndLineNumber:s,modifiedStartLineNumber:r,modifiedEndLineNumber:o,charChanges:a==null?void 0:a.map(l=>({originalStartLineNumber:l.originalRange.startLineNumber,originalStartColumn:l.originalRange.startColumn,originalEndLineNumber:l.originalRange.endLineNumber,originalEndColumn:l.originalRange.endColumn,modifiedStartLineNumber:l.modifiedRange.startLineNumber,modifiedStartColumn:l.modifiedRange.startColumn,modifiedEndLineNumber:l.modifiedRange.endLineNumber,modifiedEndColumn:l.modifiedRange.endColumn}))}})}var Yz=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Zn=function(i,e){return function(t,n){e(t,n,i)}};let fit=0,Fte=!1;function git(i){if(!i){if(Fte)return;Fte=!0}Kje(i||Kn.document.body)}let kN=class extends pN{constructor(e,t,n,s,r,o,a,l,c,u,d,h,g){const p={...t};p.ariaLabel=p.ariaLabel||h7.editorViewAccessibleLabel,super(e,p,{},n,s,r,o,c,u,d,h,g),l instanceof ly?this._standaloneKeybindingService=l:this._standaloneKeybindingService=null,git(p.ariaContainerElement),uqe((_,v)=>n.createInstance(Dk,_,v,{})),dqe(a)}addCommand(e,t,n){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const s="DYNAMIC_"+ ++fit,r=En.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(s,e,t,r),s}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),be.None;const t=e.id,n=e.label,s=En.and(En.equals("editorId",this.getId()),En.deserialize(e.precondition)),r=e.keybindings,o=En.and(s,En.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(g,...p)=>Promise.resolve(e.run(this,...p)),u=new Ze,d=this.getId()+":"+t;if(u.add(oa.registerCommand(d,c)),a){const g={command:{id:d,title:n},when:s,group:a,order:l};u.add(Kb.appendMenuItem(_r.EditorContext,g))}if(Array.isArray(r))for(const g of r)u.add(this._standaloneKeybindingService.addDynamicKeybinding(d,g,c,o));const h=new _pe(d,n,n,void 0,s,(...g)=>Promise.resolve(e.run(this,...g)),this._contextKeyService);return this._actions.set(t,h),u.add(Dt(()=>{this._actions.delete(t)})),u}_triggerCommand(e,t){if(this._codeEditorService instanceof cD)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};kN=Yz([Zn(2,Pn),Zn(3,Es),Zn(4,ll),Zn(5,Nn),Zn(6,K2),Zn(7,yr),Zn(8,Sc),Zn(9,Lu),Zn(10,Iu),Zn(11,Ud),Zn(12,Yn)],kN);let pB=class extends kN{constructor(e,t,n,s,r,o,a,l,c,u,d,h,g,p,_,v){const y={...t};XD(d,y,!1);const w=c.registerEditorContainer(e);typeof y.theme=="string"&&c.setTheme(y.theme),typeof y.autoDetectHighContrast<"u"&&c.setAutoDetectHighContrast(!!y.autoDetectHighContrast);const x=y.model;delete y.model,super(e,y,n,s,r,o,a,l,c,u,h,_,v),this._configurationService=d,this._standaloneThemeService=c,this._register(w);let k;if(typeof x>"u"){const T=p.getLanguageIdByMimeType(y.language)||y.language||gc;k=Npe(g,p,y.value||"",T,void 0),this._ownsModel=!0}else k=x,this._ownsModel=!1;if(this._attachModel(k),k){const T={oldModelUrl:null,newModelUrl:k.uri};this._onDidChangeModel.fire(T)}}dispose(){super.dispose()}updateOptions(e){XD(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};pB=Yz([Zn(2,Pn),Zn(3,Es),Zn(4,ll),Zn(5,Nn),Zn(6,K2),Zn(7,yr),Zn(8,kc),Zn(9,Lu),Zn(10,Oi),Zn(11,Iu),Zn(12,Io),Zn(13,Ws),Zn(14,Ud),Zn(15,Yn)],pB);let _B=class extends SN{constructor(e,t,n,s,r,o,a,l,c,u,d,h){const g={...t};XD(l,g,!0);const p=o.registerEditorContainer(e);typeof g.theme=="string"&&o.setTheme(g.theme),typeof g.autoDetectHighContrast<"u"&&o.setAutoDetectHighContrast(!!g.autoDetectHighContrast),super(e,g,{},s,n,r,h,u),this._configurationService=l,this._standaloneThemeService=o,this._register(p)}dispose(){super.dispose()}updateOptions(e){XD(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(kN,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};_B=Yz([Zn(2,Pn),Zn(3,Nn),Zn(4,Es),Zn(5,kc),Zn(6,Lu),Zn(7,Oi),Zn(8,Rf),Zn(9,RU),Zn(10,bz),Zn(11,PA)],_B);function Npe(i,e,t,n,s){if(t=t||"",!n){const r=t.indexOf(`
`);let o=t;return r!==-1&&(o=t.substring(0,r)),Bte(i,t,e.createByFilepathOrFirstLine(s||null,o),s)}return Bte(i,t,e.createById(n),s)}function Bte(i,e,t,n){return i.createModel(e,t,n)}var mit=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Vte=function(i,e){return function(t,n){e(t,n,i)}};class pit{constructor(e,t){this.viewModel=e,this.deltaScrollVertical=t}getId(){return this.viewModel}}let xN=class extends be{constructor(e,t,n,s,r){super(),this._container=e,this._overflowWidgetsDomNode=t,this._workbenchUIElementFactory=n,this._instantiationService=s,this._viewModel=un(this,void 0),this._collapsed=It(this,l=>{var c;return(c=this._viewModel.read(l))==null?void 0:c.collapsed.read(l)}),this._editorContentHeight=un(this,500),this.contentHeight=It(this,l=>(this._collapsed.read(l)?0:this._editorContentHeight.read(l))+this._outerEditorHeight),this._modifiedContentWidth=un(this,0),this._modifiedWidth=un(this,0),this._originalContentWidth=un(this,0),this._originalWidth=un(this,0),this.maxScroll=It(this,l=>{const c=this._modifiedContentWidth.read(l)-this._modifiedWidth.read(l),u=this._originalContentWidth.read(l)-this._originalWidth.read(l);return c>u?{maxScroll:c,width:this._modifiedWidth.read(l)}:{maxScroll:u,width:this._originalWidth.read(l)}}),this._elements=cn("div.multiDiffEntry",[cn("div.header@header",[cn("div.header-content",[cn("div.collapse-button@collapseButton"),cn("div.file-path",[cn("div.title.modified.show-file-icons@primaryPath",[]),cn("div.status.deleted@status",["R"]),cn("div.title.original.show-file-icons@secondaryPath",[])]),cn("div.actions@actions")])]),cn("div.editorParent",[cn("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(SN,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=t2(this.editor.getModifiedEditor()).isFocused,this.isOriginalFocused=t2(this.editor.getOriginalEditor()).isFocused,this.isFocused=It(this,l=>this.isModifedFocused.read(l)||this.isOriginalFocused.read(l)),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=this._register(new Ze),this._headerHeight=40,this._lastScrollTop=-1,this._isSettingScrollTop=!1;const o=new G7(this._elements.collapseButton,{});this._register(Cn(l=>{o.element.className="",o.icon=this._collapsed.read(l)?Ke.chevronRight:Ke.chevronDown})),this._register(o.onDidClick(()=>{var l;(l=this._viewModel.get())==null||l.collapsed.set(!this._collapsed.get(),void 0)})),this._register(Cn(l=>{this._elements.editor.style.display=this._collapsed.read(l)?"none":"block"})),this._register(this.editor.getModifiedEditor().onDidLayoutChange(l=>{const c=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(c,void 0)})),this._register(this.editor.getOriginalEditor().onDidLayoutChange(l=>{const c=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(c,void 0)})),this._register(this.editor.onDidContentSizeChange(l=>{yC(c=>{this._editorContentHeight.set(l.contentHeight,c),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),c),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),c)})})),this._register(this.editor.getOriginalEditor().onDidScrollChange(l=>{if(this._isSettingScrollTop||!l.scrollTopChanged||!this._data)return;const c=l.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(c)})),this._register(Cn(l=>{var u;const c=(u=this._viewModel.read(l))==null?void 0:u.isActive.read(l);this._elements.root.classList.toggle("active",c)})),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._contextKeyService=this._register(r.createScoped(this._elements.actions));const a=this._register(this._instantiationService.createChild(new Gy([Nn,this._contextKeyService])));this._register(a.createInstance(wN,this._elements.actions,_r.MultiDiffEditorFileToolbar,{actionRunner:this._register(new Lpe(()=>{var l;return(l=this._viewModel.get())==null?void 0:l.modifiedUri})),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:l=>l.startsWith("navigation")},actionViewItemProvider:(l,c)=>tKe(a,l,c)}))}setScrollLeft(e){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(e):this.editor.getOriginalEditor().setScrollLeft(e)}setData(e){this._data=e;function t(s){return{...s,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}if(!e){yC(s=>{this._viewModel.set(void 0,s),this.editor.setDiffModel(null,s),this._dataStore.clear()});return}const n=e.viewModel.documentDiffItem;if(yC(s=>{var c,u;(c=this._resourceLabel)==null||c.setUri(e.viewModel.modifiedUri??e.viewModel.originalUri,{strikethrough:e.viewModel.modifiedUri===void 0});let r=!1,o=!1,a=!1,l="";e.viewModel.modifiedUri&&e.viewModel.originalUri&&e.viewModel.modifiedUri.path!==e.viewModel.originalUri.path?(l="R",r=!0):e.viewModel.modifiedUri?e.viewModel.originalUri||(l="A",a=!0):(l="D",o=!0),this._elements.status.classList.toggle("renamed",r),this._elements.status.classList.toggle("deleted",o),this._elements.status.classList.toggle("added",a),this._elements.status.innerText=l,(u=this._resourceLabel2)==null||u.setUri(r?e.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(e.viewModel,s),this.editor.setDiffModel(e.viewModel.diffEditorViewModelRef,s),this.editor.updateOptions(t(n.options??{}))}),n.onOptionsDidChange&&this._dataStore.add(n.onOptionsDidChange(()=>{this.editor.updateOptions(t(n.options??{}))})),e.viewModel.isAlive.recomputeInitiallyAndOnChange(this._dataStore,s=>{s||this.setData(void 0)}),e.viewModel.documentDiffItem.contextKeys)for(const[s,r]of Object.entries(e.viewModel.documentDiffItem.contextKeys))this._contextKeyService.createKey(s,r)}render(e,t,n,s){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${e.start}px`,this._elements.root.style.height=`${e.length}px`,this._elements.root.style.width=`${t}px`,this._elements.root.style.position="absolute";const r=e.length-this._headerHeight,o=Math.max(0,Math.min(s.start-e.start,r));this._elements.header.style.transform=`translateY(${o}px)`,yC(a=>{this.editor.layout({width:t-2*8-2*1,height:e.length-this._outerEditorHeight})});try{this._isSettingScrollTop=!0,this._lastScrollTop=n,this.editor.getOriginalEditor().setScrollTop(n)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",o>0||n>0),this._elements.header.classList.toggle("collapsed",o===r)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};xN=mit([Vte(3,Pn),Vte(4,Nn)],xN);class _it{constructor(e){this._create=e,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(e){let t;if(this._unused.size===0)t=this._create(e),this._itemData.set(t,e);else{const n=[...this._unused.values()];t=n.find(s=>this._itemData.get(s).getId()===e.getId())??n[0],this._unused.delete(t),this._itemData.set(t,e),t.setData(e)}return this._used.add(t),{object:t,dispose:()=>{this._used.delete(t),this._unused.size>5?t.dispose():this._unused.add(t)}}}dispose(){for(const e of this._used)e.dispose();for(const e of this._unused)e.dispose();this._used.clear(),this._unused.clear()}}var vit=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Wte=function(i,e){return function(t,n){e(t,n,i)}};let vB=class extends be{constructor(e,t,n,s,r,o){super(),this._element=e,this._dimension=t,this._viewModel=n,this._workbenchUIElementFactory=s,this._parentContextKeyService=r,this._parentInstantiationService=o,this._scrollableElements=cn("div.scrollContent",[cn("div@content",{style:{overflow:"hidden"}}),cn("div.monaco-editor@overflowWidgetsDomNode",{})]),this._scrollable=this._register(new zy({forceIntegerValues:!1,scheduleAtNextAnimationFrame:l=>xa(rt(this._element),l),smoothScrollDuration:100})),this._scrollableElement=this._register(new dA(this._scrollableElements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this._elements=cn("div.monaco-component.multiDiffEditor",{},[cn("div",{},[this._scrollableElement.getDomNode()]),cn("div.placeholder@placeholder",{},[cn("div",[S("noChangedFiles","No Changed Files")])])]),this._sizeObserver=this._register(new wpe(this._element,void 0)),this._objectPool=this._register(new _it(l=>{const c=this._instantiationService.createInstance(xN,this._scrollableElements.content,this._scrollableElements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return c.setData(l),c})),this.scrollTop=Mi(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollTop),this.scrollLeft=Mi(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollLeft),this._viewItemsInfo=$y(this,(l,c)=>{const u=this._viewModel.read(l);if(!u)return{items:[],getItem:p=>{throw new Dn}};const d=u.items.read(l),h=new Map;return{items:d.map(p=>{var y;const _=c.add(new bit(p,this._objectPool,this.scrollLeft,w=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+w})})),v=(y=this._lastDocStates)==null?void 0:y[_.getKey()];return v&&Cs(w=>{_.setViewState(v,w)}),h.set(p,_),_}),getItem:p=>h.get(p)}}),this._viewItems=this._viewItemsInfo.map(this,l=>l.items),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,(l,c)=>l.reduce((u,d)=>u+d.contentHeight.read(c)+this._spaceBetweenPx,0)),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new Gy([Nn,this._contextKeyService]))),this._lastDocStates={},this._contextKeyService.createKey(Ue.inMultiDiffEditor.key,!0),this._register(lu((l,c)=>{const u=this._viewModel.read(l);if(u&&u.contextKeys)for(const[d,h]of Object.entries(u.contextKeys)){const g=this._contextKeyService.createKey(d,void 0);g.set(h),c.add(Dt(()=>g.reset()))}}));const a=this._parentContextKeyService.createKey(Ue.multiDiffEditorAllCollapsed.key,!1);this._register(Cn(l=>{const c=this._viewModel.read(l);if(c){const u=c.items.read(l).every(d=>d.collapsed.read(l));a.set(u)}})),this._register(Cn(l=>{const c=this._dimension.read(l);this._sizeObserver.observe(c)})),this._register(Cn(l=>{const c=this._viewItems.read(l);this._elements.placeholder.classList.toggle("visible",c.length===0)})),this._scrollableElements.content.style.position="relative",this._register(Cn(l=>{const c=this._sizeObserver.height.read(l);this._scrollableElements.root.style.height=`${c}px`;const u=this._totalHeight.read(l);this._scrollableElements.content.style.height=`${u}px`;const d=this._sizeObserver.width.read(l);let h=d;const g=this._viewItems.read(l),p=rfe(g,fc(_=>_.maxScroll.read(l).maxScroll,em));if(p){const _=p.maxScroll.read(l);h=d+_.maxScroll}this._scrollableElement.setScrollDimensions({width:d,height:c,scrollHeight:u,scrollWidth:h})})),e.replaceChildren(this._elements.root),this._register(Dt(()=>{e.replaceChildren()})),this._register(this._register(Cn(l=>{yC(c=>{this.render(l)})})))}render(e){const t=this.scrollTop.read(e);let n=0,s=0,r=0;const o=this._sizeObserver.height.read(e),a=Mt.ofStartAndLength(t,o),l=this._sizeObserver.width.read(e);for(const c of this._viewItems.read(e)){const u=c.contentHeight.read(e),d=Math.min(u,o),h=Mt.ofStartAndLength(s,d),g=Mt.ofStartAndLength(r,u);if(g.isBefore(a))n-=u-d,c.hide();else if(g.isAfter(a))c.hide();else{const p=Math.max(0,Math.min(a.start-g.start,u-d));n-=p;const _=Mt.ofStartAndLength(t+n,o);c.render(h,p,l,_)}s+=d+this._spaceBetweenPx,r+=u+this._spaceBetweenPx}this._scrollableElements.content.style.transform=`translateY(${-(t+n)}px)`}};vB=vit([Wte(4,Nn),Wte(5,Pn)],vB);class bit extends be{constructor(e,t,n,s){super(),this.viewModel=e,this._objectPool=t,this._scrollLeft=n,this._deltaScrollVertical=s,this._templateRef=this._register(kge(this,void 0)),this.contentHeight=It(this,r=>{var o,a;return((a=(o=this._templateRef.read(r))==null?void 0:o.object.contentHeight)==null?void 0:a.read(r))??this.viewModel.lastTemplateData.read(r).contentHeight}),this.maxScroll=It(this,r=>{var o;return((o=this._templateRef.read(r))==null?void 0:o.object.maxScroll.read(r))??{maxScroll:0,scrollWidth:0}}),this.template=It(this,r=>{var o;return(o=this._templateRef.read(r))==null?void 0:o.object}),this._isHidden=un(this,!1),this._isFocused=It(this,r=>{var o;return((o=this.template.read(r))==null?void 0:o.isFocused.read(r))??!1}),this.viewModel.setIsFocused(this._isFocused,void 0),this._register(Cn(r=>{var a;const o=this._scrollLeft.read(r);(a=this._templateRef.read(r))==null||a.object.setScrollLeft(o)})),this._register(Cn(r=>{const o=this._templateRef.read(r);!o||!this._isHidden.read(r)||o.object.isFocused.read(r)||this._clear()}))}dispose(){this._clear(),super.dispose()}toString(){var e;return`VirtualViewItem(${(e=this.viewModel.documentDiffItem.modified)==null?void 0:e.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(e,t){var o;this.viewModel.collapsed.set(e.collapsed,t),this._updateTemplateData(t);const n=this.viewModel.lastTemplateData.get(),s=(o=e.selections)==null?void 0:o.map(Gn.liftSelection);this.viewModel.lastTemplateData.set({...n,selections:s},t);const r=this._templateRef.get();r&&s&&r.object.editor.setSelections(s)}_updateTemplateData(e){const t=this._templateRef.get();t&&this.viewModel.lastTemplateData.set({contentHeight:t.object.contentHeight.get(),selections:t.object.editor.getSelections()??void 0},e)}_clear(){const e=this._templateRef.get();e&&Cs(t=>{this._updateTemplateData(t),e.object.hide(),this._templateRef.set(void 0,t)})}hide(){this._isHidden.set(!0,void 0)}render(e,t,n,s){this._isHidden.set(!1,void 0);let r=this._templateRef.get();if(!r){r=this._objectPool.getUnusedObj(new pit(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(r,void 0);const o=this.viewModel.lastTemplateData.get().selections;o&&r.object.editor.setSelections(o)}r.object.render(e,n,t,s)}}Y("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},S("multiDiffEditor.headerBackground","The background color of the diff editor's header"));Y("multiDiffEditor.background",mu,S("multiDiffEditor.background","The background color of the multi file diff editor"));Y("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},S("multiDiffEditor.border","The border color of the multi file diff editor"));var yit=function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},wit=function(i,e){return function(t,n){e(t,n,i)}};let bB=class extends be{constructor(e,t,n){super(),this._element=e,this._workbenchUIElementFactory=t,this._instantiationService=n,this._dimension=un(this,void 0),this._viewModel=un(this,void 0),this._widgetImpl=$y(this,(s,r)=>(nc(xN,s),r.add(this._instantiationService.createInstance(nc(vB,s),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory)))),this._register(yA(this._widgetImpl))}};bB=yit([wit(2,Pn)],bB);function Cit(i,e,t){return ot.initialize(t||{}).createInstance(pB,i,e)}function Sit(i){return ot.get(Es).onCodeEditorAdd(t=>{i(t)})}function kit(i){return ot.get(Es).onDiffEditorAdd(t=>{i(t)})}function xit(){return ot.get(Es).listCodeEditors()}function Eit(){return ot.get(Es).listDiffEditors()}function Tit(i,e,t){return ot.initialize(t||{}).createInstance(_B,i,e)}function Lit(i,e){const t=ot.initialize(e||{});return new bB(i,{},t)}function Iit(i){if(typeof i.id!="string"||typeof i.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return oa.registerCommand(i.id,i.run)}function Dit(i){if(typeof i.id!="string"||typeof i.label!="string"||typeof i.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=En.deserialize(i.precondition),t=(s,...r)=>i1.runEditorCommand(s,r,e,(o,a,l)=>Promise.resolve(i.run(a,...l))),n=new Ze;if(n.add(oa.registerCommand(i.id,t)),i.contextMenuGroupId){const s={command:{id:i.id,title:i.label},when:e,group:i.contextMenuGroupId,order:i.contextMenuOrder||0};n.add(Kb.appendMenuItem(_r.EditorContext,s))}if(Array.isArray(i.keybindings)){const s=ot.get(yr);if(!(s instanceof ly))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const r=En.and(e,En.deserialize(i.keybindingContext));n.add(s.addDynamicKeybindings(i.keybindings.map(o=>({keybinding:o,command:i.id,when:r}))))}}return n}function Nit(i){return Rpe([i])}function Rpe(i){const e=ot.get(yr);return e instanceof ly?e.addDynamicKeybindings(i.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:En.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),be.None)}function Rit(i,e,t){const n=ot.get(Ws),s=n.getLanguageIdByMimeType(e)||e;return Npe(ot.get(Io),n,i,s,t)}function Ait(i,e){const t=ot.get(Ws),n=t.getLanguageIdByMimeType(e)||e||gc;i.setLanguage(t.createById(n))}function Pit(i,e,t){i&&ot.get(P1).changeOne(e,i.uri,t)}function Mit(i){ot.get(P1).changeAll(i,[])}function Oit(i){return ot.get(P1).read(i)}function Fit(i){return ot.get(P1).onMarkerChanged(i)}function Bit(i){return ot.get(Io).getModel(i)}function Vit(){return ot.get(Io).getModels()}function Wit(i){return ot.get(Io).onModelAdded(i)}function Hit(i){return ot.get(Io).onModelRemoved(i)}function Uit(i){return ot.get(Io).onModelLanguageChanged(t=>{i({model:t.model,oldLanguage:t.oldLanguageId})})}function zit(i){return yZe(ot.get(Io),i)}function jit(i,e){const t=ot.get(Ws),n=ot.get(kc);return kz.colorizeElement(n,t,i,e).then(()=>{n.registerEditorContainer(i)})}function $it(i,e,t){const n=ot.get(Ws);return ot.get(kc).registerEditorContainer(Kn.document.body),kz.colorize(n,i,e,t)}function qit(i,e,t=4){return ot.get(kc).registerEditorContainer(Kn.document.body),kz.colorizeModelLine(i,e,t)}function Kit(i){const e=es.get(i);return e||{getInitialState:()=>Rk,tokenize:(t,n,s)=>pge(i,s)}}function Git(i,e){es.getOrCreate(e);const t=Kit(e),n=Hy(i),s=[];let r=t.getInitialState();for(let o=0,a=n.length;o<a;o++){const l=n[o],c=t.tokenize(l,!0,r);s[o]=c.tokens,r=c.endState}return s}function Yit(i,e){ot.get(kc).defineTheme(i,e)}function Qit(i){ot.get(kc).setTheme(i)}function Xit(){d8.clearAllFontInfos()}function Zit(i,e){return oa.registerCommand({id:i,handler:e})}function Jit(i){return ot.get(Y2).registerOpener({async open(t){return typeof t=="string"&&(t=Ut.parse(t)),i.open(t)}})}function est(i){return ot.get(Es).registerCodeEditorOpenHandler(async(t,n,s)=>{var a;if(!n)return null;const r=(a=t.options)==null?void 0:a.selection;let o;return r&&typeof r.endLineNumber=="number"&&typeof r.endColumn=="number"?o=r:r&&(o={lineNumber:r.startLineNumber,column:r.startColumn}),await i.openCodeEditor(n,t.resource,o)?n:null})}function tst(){return{create:Cit,getEditors:xit,getDiffEditors:Eit,onDidCreateEditor:Sit,onDidCreateDiffEditor:kit,createDiffEditor:Tit,addCommand:Iit,addEditorAction:Dit,addKeybindingRule:Nit,addKeybindingRules:Rpe,createModel:Rit,setModelLanguage:Ait,setModelMarkers:Pit,getModelMarkers:Oit,removeAllMarkers:Mit,onDidChangeMarkers:Fit,getModels:Vit,getModel:Bit,onDidCreateModel:Wit,onWillDisposeModel:Hit,onDidChangeModelLanguage:Uit,createWebWorker:zit,colorizeElement:jit,colorize:$it,colorizeModelLine:qit,tokenize:Git,defineTheme:Yit,setTheme:Qit,remeasureFonts:Xit,registerCommand:Zit,registerLinkOpener:Jit,registerEditorOpener:est,AccessibilitySupport:e9,ContentWidgetPositionPreference:o9,CursorChangeReason:a9,DefaultEndOfLine:l9,EditorAutoIndentStrategy:u9,EditorOption:d9,EndOfLinePreference:h9,EndOfLineSequence:f9,MinimapPosition:k9,MinimapSectionHeaderStyle:x9,MouseTargetType:E9,OverlayWidgetPositionPreference:I9,OverviewRulerLane:D9,GlyphMarginLane:g9,RenderLineNumbersType:A9,RenderMinimap:P9,ScrollbarVisibility:O9,ScrollType:M9,TextEditorCursorBlinkingStyle:U9,TextEditorCursorStyle:z9,TrackedRangeStickiness:j9,WrappingIndent:$9,InjectedTextCursorStops:_9,PositionAffinity:R9,ShowLightbulbIconMode:B9,ConfigurationChangedEvent:Bde,BareFontInfo:p0,FontInfo:u8,TextModelResolvedOptions:oL,FindMatch:xk,ApplyUpdateResult:UC,EditorZoom:Ig,createMultiFileDiffEditor:Lit,EditorType:wz,EditorOptions:C1}}function nst(i,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!i(t))return!1;return!0}function kT(i,e){return typeof i=="boolean"?i:e}function Hte(i,e){return typeof i=="string"?i:e}function ist(i){const e={};for(const t of i)e[t]=!0;return e}function Ute(i,e=!1){e&&(i=i.map(function(n){return n.toLowerCase()}));const t=ist(i);return e?function(n){return t[n.toLowerCase()]!==void 0&&t.hasOwnProperty(n.toLowerCase())}:function(n){return t[n]!==void 0&&t.hasOwnProperty(n)}}function yB(i,e,t){e=e.replace(/@@/g,"");let n=0,s;do s=!1,e=e.replace(/@(\w+)/g,function(o,a){s=!0;let l="";if(typeof i[a]=="string")l=i[a];else if(i[a]&&i[a]instanceof RegExp)l=i[a].source;else throw i[a]===void 0?ui(i,"language definition does not contain attribute '"+a+"', used at: "+e):ui(i,"attribute reference '"+a+"' must be a string, used at: "+e);return zp(l)?"":"(?:"+l+")"}),n++;while(s&&n<5);e=e.replace(/\x01/g,"@");const r=(i.ignoreCase?"i":"")+(i.unicode?"u":"");if(t&&e.match(/\$[sS](\d\d?)/g)){let a=null,l=null;return c=>(l&&a===c||(a=c,l=new RegExp(VZe(i,e,c),r)),l)}return new RegExp(e,r)}function sst(i,e,t,n){if(n<0)return i;if(n<e.length)return e[n];if(n>=100){n=n-100;const s=t.split(".");if(s.unshift(t),n<s.length)return s[n]}return null}function rst(i,e,t,n){let s=-1,r=t,o=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(s=parseInt(o[3]),o[2]&&(s=s+100)),r=o[4]);let a="~",l=r;!r||r.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(o=r.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(a=o[1],l=o[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const u=Ute(l.split("|"),i.ignoreCase);c=function(d){return a==="~"?u(d):!u(d)}}else if(a==="@"||a==="!@"){const u=i[l];if(!u)throw ui(i,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!nst(function(h){return typeof h=="string"},u))throw ui(i,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const d=Ute(u,i.ignoreCase);c=function(h){return a==="@"?d(h):!d(h)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const u=yB(i,"^"+l+"$",!1);c=function(d){return a==="~"?u.test(d):!u.test(d)}}else c=function(u,d,h,g){return yB(i,"^"+Rg(i,l,d,h,g)+"$",!1).test(u)};else if(l.indexOf("$")<0){const u=of(i,l);c=function(d){return a==="=="?d===u:d!==u}}else{const u=of(i,l);c=function(d,h,g,p,_){const v=Rg(i,u,h,g,p);return a==="=="?d===v:d!==v}}return s===-1?{name:t,value:n,test:function(u,d,h,g){return c(u,u,d,h,g)}}:{name:t,value:n,test:function(u,d,h,g){const p=sst(u,d,h,s);return c(p||"",u,d,h,g)}}}function wB(i,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw ui(i,"a 'token' attribute must be of type string, in rule: "+e);{const n={token:t.token};if(t.token.indexOf("$")>=0&&(n.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")n.bracket=1;else if(t.bracket==="@close")n.bracket=-1;else throw ui(i,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw ui(i,"the next state must be a string value in rule: "+e);{let s=t.next;if(!/^(@pop|@push|@popall)$/.test(s)&&(s[0]==="@"&&(s=s.substr(1)),s.indexOf("$")<0&&!WZe(i,Rg(i,s,"",[],""))))throw ui(i,"the next state '"+t.next+"' is not defined in rule: "+e);n.next=s}}return typeof t.goBack=="number"&&(n.goBack=t.goBack),typeof t.switchTo=="string"&&(n.switchTo=t.switchTo),typeof t.log=="string"&&(n.log=t.log),typeof t.nextEmbedded=="string"&&(n.nextEmbedded=t.nextEmbedded,i.usesEmbedded=!0),n}}else if(Array.isArray(t)){const n=[];for(let s=0,r=t.length;s<r;s++)n[s]=wB(i,e,t[s]);return{group:n}}else if(t.cases){const n=[];for(const r in t.cases)if(t.cases.hasOwnProperty(r)){const o=wB(i,e,t.cases[r]);r==="@default"||r==="@"||r===""?n.push({test:void 0,value:o,name:r}):r==="@eos"?n.push({test:function(a,l,c,u){return u},value:o,name:r}):n.push(rst(i,e,r,o))}const s=i.defaultToken;return{test:function(r,o,a,l){for(const c of n)if(!c.test||c.test(r,o,a,l))return c.value;return s}}}else throw ui(i,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class ost{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let n;if(typeof t=="string")n=t;else if(t instanceof RegExp)n=t.source;else throw ui(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=n.length>0&&n[0]==="^",this.name=this.name+": "+n,this.regex=yB(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")",!0)}setAction(e,t){this.action=wB(e,this.name,t)}resolveRegex(e){return this.regex instanceof RegExp?this.regex:this.regex(e)}}function Ape(i,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={languageId:i,includeLF:kT(e.includeLF,!1),noThrow:!1,maxStack:100,start:typeof e.start=="string"?e.start:null,ignoreCase:kT(e.ignoreCase,!1),unicode:kT(e.unicode,!1),tokenPostfix:Hte(e.tokenPostfix,"."+i),defaultToken:Hte(e.defaultToken,"source"),usesEmbedded:!1,stateNames:{},tokenizer:{},brackets:[]},n=e;n.languageId=i,n.includeLF=t.includeLF,n.ignoreCase=t.ignoreCase,n.unicode=t.unicode,n.noThrow=t.noThrow,n.usesEmbedded=t.usesEmbedded,n.stateNames=e.tokenizer,n.defaultToken=t.defaultToken;function s(o,a,l){for(const c of l){let u=c.include;if(u){if(typeof u!="string")throw ui(t,"an 'include' attribute must be a string at: "+o);if(u[0]==="@"&&(u=u.substr(1)),!e.tokenizer[u])throw ui(t,"include target '"+u+"' is not defined at: "+o);s(o+"."+u,a,e.tokenizer[u])}else{const d=new ost(o);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(d.setRegex(n,c[0]),c.length>=3)if(typeof c[1]=="string")d.setAction(n,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const h=c[1];h.next=c[2],d.setAction(n,h)}else throw ui(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+o);else d.setAction(n,c[1]);else{if(!c.regex)throw ui(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+o);c.name&&typeof c.name=="string"&&(d.name=c.name),c.matchOnlyAtStart&&(d.matchOnlyAtLineStart=kT(c.matchOnlyAtLineStart,!1)),d.setRegex(n,c.regex),d.setAction(n,c.action)}a.push(d)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw ui(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const o in e.tokenizer)if(e.tokenizer.hasOwnProperty(o)){t.start||(t.start=o);const a=e.tokenizer[o];t.tokenizer[o]=new Array,s("tokenizer."+o,t.tokenizer[o],a)}if(t.usesEmbedded=n.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw ui(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const r=[];for(const o of e.brackets){let a=o;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw ui(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")r.push({token:a.token+t.tokenPostfix,open:of(t,a.open),close:of(t,a.close)});else throw ui(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=r,t.noThrow=!0,t}function ast(i){Gb.registerLanguage(i)}function lst(){let i=[];return i=i.concat(Gb.getLanguages()),i}function cst(i){return ot.get(Ws).languageIdCodec.encodeLanguageId(i)}function ust(i,e){return ot.withServices(()=>{const n=ot.get(Ws).onDidRequestRichLanguageFeatures(s=>{s===i&&(n.dispose(),e())});return n})}function dst(i,e){return ot.withServices(()=>{const n=ot.get(Ws).onDidRequestBasicLanguageFeatures(s=>{s===i&&(n.dispose(),e())});return n})}function hst(i,e){if(!ot.get(Ws).isRegisteredLanguageId(i))throw new Error(`Cannot set configuration for unknown language ${i}`);return ot.get(Ud).register(i,e,100)}class fst{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n){if(typeof this._actual.tokenize=="function")return i2.adaptTokenize(this._languageId,this._actual,e,n);throw new Error("Not supported!")}tokenizeEncoded(e,t,n){const s=this._actual.tokenizeEncoded(e,n);return new W4(s.tokens,s.endState)}}class i2{constructor(e,t,n,s){this._languageId=e,this._actual=t,this._languageService=n,this._standaloneThemeService=s}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const n=[];let s=0;for(let r=0,o=e.length;r<o;r++){const a=e[r];let l=a.startIndex;r===0?l=0:l<s&&(l=s),n[r]=new vk(l,a.scopes,t),s=l}return n}static adaptTokenize(e,t,n,s){const r=t.tokenize(n,s),o=i2._toClassicTokens(r.tokens,e);let a;return r.endState.equals(s)?a=s:a=r.endState,new RH(o,a)}tokenize(e,t,n){return i2.adaptTokenize(this._languageId,this._actual,e,n)}_toBinaryTokens(e,t){const n=e.encodeLanguageId(this._languageId),s=this._standaloneThemeService.getColorTheme().tokenTheme,r=[];let o=0,a=0;for(let c=0,u=t.length;c<u;c++){const d=t[c],h=s.match(n,d.scopes)|1024;if(o>0&&r[o-1]===h)continue;let g=d.startIndex;c===0?g=0:g<a&&(g=a),r[o++]=g,r[o++]=h,a=g}const l=new Uint32Array(o);for(let c=0;c<o;c++)l[c]=r[c];return l}tokenizeEncoded(e,t,n){const s=this._actual.tokenize(e,n),r=this._toBinaryTokens(this._languageService.languageIdCodec,s.tokens);let o;return s.endState.equals(n)?o=n:o=s.endState,new W4(r,o)}}function gst(i){return typeof i.getInitialState=="function"}function mst(i){return"tokenizeEncoded"in i}function Ppe(i){return i&&typeof i.then=="function"}function pst(i){const e=ot.get(kc);if(i){const t=[null];for(let n=1,s=i.length;n<s;n++)t[n]=ke.fromHex(i[n]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}function Mpe(i,e){return mst(e)?new fst(i,e):new i2(i,e,ot.get(Ws),ot.get(kc))}function Qz(i,e){const t=new k7e(async()=>{const n=await Promise.resolve(e.create());return n?gst(n)?Mpe(i,n):new Yk(ot.get(Ws),ot.get(kc),i,Ape(i,n),ot.get(Oi)):null});return es.registerFactory(i,t)}function _st(i,e){if(!ot.get(Ws).isRegisteredLanguageId(i))throw new Error(`Cannot set tokens provider for unknown language ${i}`);return Ppe(e)?Qz(i,{create:()=>e}):es.register(i,Mpe(i,e))}function vst(i,e){const t=n=>new Yk(ot.get(Ws),ot.get(kc),i,Ape(i,n),ot.get(Oi));return Ppe(e)?Qz(i,{create:()=>e}):es.register(i,t(e))}function bst(i,e){return ot.get(Yn).referenceProvider.register(i,e)}function yst(i,e){return ot.get(Yn).renameProvider.register(i,e)}function wst(i,e){return ot.get(Yn).newSymbolNamesProvider.register(i,e)}function Cst(i,e){return ot.get(Yn).signatureHelpProvider.register(i,e)}function Sst(i,e){return ot.get(Yn).hoverProvider.register(i,{provideHover:async(n,s,r,o)=>{const a=n.getWordAtPosition(s);return Promise.resolve(e.provideHover(n,s,r,o)).then(l=>{if(l)return!l.range&&a&&(l.range=new J(s.lineNumber,a.startColumn,s.lineNumber,a.endColumn)),l.range||(l.range=new J(s.lineNumber,s.column,s.lineNumber,s.column)),l})}})}function kst(i,e){return ot.get(Yn).documentSymbolProvider.register(i,e)}function xst(i,e){return ot.get(Yn).documentHighlightProvider.register(i,e)}function Est(i,e){return ot.get(Yn).linkedEditingRangeProvider.register(i,e)}function Tst(i,e){return ot.get(Yn).definitionProvider.register(i,e)}function Lst(i,e){return ot.get(Yn).implementationProvider.register(i,e)}function Ist(i,e){return ot.get(Yn).typeDefinitionProvider.register(i,e)}function Dst(i,e){return ot.get(Yn).codeLensProvider.register(i,e)}function Nst(i,e,t){return ot.get(Yn).codeActionProvider.register(i,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,documentation:t==null?void 0:t.documentation,provideCodeActions:(s,r,o,a)=>{const c=ot.get(P1).read({resource:s.uri}).filter(u=>J.areIntersectingOrTouching(u,r));return e.provideCodeActions(s,r,{markers:c,only:o.only,trigger:o.trigger},a)},resolveCodeAction:e.resolveCodeAction})}function Rst(i,e){return ot.get(Yn).documentFormattingEditProvider.register(i,e)}function Ast(i,e){return ot.get(Yn).documentRangeFormattingEditProvider.register(i,e)}function Pst(i,e){return ot.get(Yn).onTypeFormattingEditProvider.register(i,e)}function Mst(i,e){return ot.get(Yn).linkProvider.register(i,e)}function Ost(i,e){return ot.get(Yn).completionProvider.register(i,e)}function Fst(i,e){return ot.get(Yn).colorProvider.register(i,e)}function Bst(i,e){return ot.get(Yn).foldingRangeProvider.register(i,e)}function Vst(i,e){return ot.get(Yn).declarationProvider.register(i,e)}function Wst(i,e){return ot.get(Yn).selectionRangeProvider.register(i,e)}function Hst(i,e){return ot.get(Yn).documentSemanticTokensProvider.register(i,e)}function Ust(i,e){return ot.get(Yn).documentRangeSemanticTokensProvider.register(i,e)}function zst(i,e){return ot.get(Yn).inlineCompletionsProvider.register(i,e)}function jst(i,e){return ot.get(Yn).inlineEditProvider.register(i,e)}function $st(i,e){return ot.get(Yn).inlayHintsProvider.register(i,e)}function qst(){return{register:ast,getLanguages:lst,onLanguage:ust,onLanguageEncountered:dst,getEncodedLanguageId:cst,setLanguageConfiguration:hst,setColorMap:pst,registerTokensProviderFactory:Qz,setTokensProvider:_st,setMonarchTokensProvider:vst,registerReferenceProvider:bst,registerRenameProvider:yst,registerNewSymbolNameProvider:wst,registerCompletionItemProvider:Ost,registerSignatureHelpProvider:Cst,registerHoverProvider:Sst,registerDocumentSymbolProvider:kst,registerDocumentHighlightProvider:xst,registerLinkedEditingRangeProvider:Est,registerDefinitionProvider:Tst,registerImplementationProvider:Lst,registerTypeDefinitionProvider:Ist,registerCodeLensProvider:Dst,registerCodeActionProvider:Nst,registerDocumentFormattingEditProvider:Rst,registerDocumentRangeFormattingEditProvider:Ast,registerOnTypeFormattingEditProvider:Pst,registerLinkProvider:Mst,registerColorProvider:Fst,registerFoldingRangeProvider:Bst,registerDeclarationProvider:Vst,registerSelectionRangeProvider:Wst,registerDocumentSemanticTokensProvider:Hst,registerDocumentRangeSemanticTokensProvider:Ust,registerInlineCompletionsProvider:zst,registerInlineEditProvider:jst,registerInlayHintsProvider:$st,DocumentHighlightKind:c9,CompletionItemKind:i9,CompletionItemTag:s9,CompletionItemInsertTextRule:n9,SymbolKind:W9,SymbolTag:H9,IndentAction:p9,CompletionTriggerKind:r9,SignatureHelpTriggerKind:V9,InlayHintKind:v9,InlineCompletionTriggerKind:b9,InlineEditTriggerKind:y9,CodeActionTriggerType:t9,NewSymbolNameTag:T9,NewSymbolNameTriggerKind:L9,PartialAcceptTriggerKind:N9,HoverVerbosityAction:m9,FoldingRangeKind:Z3,SelectedSuggestionInfo:S7e}}const Ope=nn("IEditorCancelService"),Fpe=new et("cancellableOperation",!1,S("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));_n(Ope,class{constructor(){this._tokens=new WeakMap}add(i,e){let t=this._tokens.get(i);t||(t=i.invokeWithinContext(s=>{const r=Fpe.bindTo(s.get(Nn)),o=new ba;return{key:r,tokens:o}}),this._tokens.set(i,t));let n;return t.key.set(!0),n=t.tokens.push(e),()=>{n&&(n(),t.key.set(!t.tokens.isEmpty()),n=void 0)}}cancel(i){const e=this._tokens.get(i);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},1);Lt(new class extends i1{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:Fpe})}runEditorCommand(i,e){i.get(Ope).cancel(e)}});class zte{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}class Kst{constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(zte.toKey(e))}has(e){return this._set.has(zte.toKey(e))}}function Gst(i,e,t){const n=[],s=new Kst,r=i.ordered(t);for(const a of r)n.push(a),a.extensionId&&s.add(a.extensionId);const o=e.ordered(t);for(const a of o){if(a.extensionId){if(s.has(a.extensionId))continue;s.add(a.extensionId)}n.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,c,u){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),c,u)}})}return n}const FS=class FS{static setFormatterSelector(e){return{dispose:FS._selectors.unshift(e)}}static async select(e,t,n,s){if(e.length===0)return;const r=yn.first(FS._selectors);if(r)return await r(e,t,n,s)}};FS._selectors=new ba;let CB=FS;async function Yst(i,e,t,n,s,r){const o=e.documentRangeFormattingEditProvider.ordered(t);for(const a of o){const l=await Promise.resolve(a.provideDocumentRangeFormattingEdits(t,n,s,r)).catch(EH);if(O4(l))return await i.computeMoreMinimalEdits(t.uri,l)}}async function Qst(i,e,t,n,s){const r=Gst(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const o of r){const a=await Promise.resolve(o.provideDocumentFormattingEdits(t,n,s)).catch(EH);if(O4(a))return await i.computeMoreMinimalEdits(t.uri,a)}}function Xst(i,e,t,n,s,r,o){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(s)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,n,s,r,o)).catch(EH).then(l=>i.computeMoreMinimalEdits(t.uri,l))}oa.registerCommand("_executeFormatRangeProvider",async function(i,...e){const[t,n,s]=e;tm(Ut.isUri(t)),tm(J.isIRange(n));const r=i.get(q4),o=i.get(ex),a=i.get(Yn),l=await r.createModelReference(t);try{return Yst(o,a,l.object.textEditorModel,J.lift(n),s,_c.None)}finally{l.dispose()}});oa.registerCommand("_executeFormatDocumentProvider",async function(i,...e){const[t,n]=e;tm(Ut.isUri(t));const s=i.get(q4),r=i.get(ex),o=i.get(Yn),a=await s.createModelReference(t);try{return Qst(r,o,a.object.textEditorModel,n,_c.None)}finally{a.dispose()}});oa.registerCommand("_executeFormatOnTypeProvider",async function(i,...e){const[t,n,s,r]=e;tm(Ut.isUri(t)),tm(ue.isIPosition(n)),tm(typeof s=="string");const o=i.get(q4),a=i.get(ex),l=i.get(Yn),c=await o.createModelReference(t);try{return Xst(a,l,c.object.textEditorModel,ue.lift(n),s,r,_c.None)}finally{c.dispose()}});C1.wrappingIndent.defaultValue=0;C1.glyphMargin.defaultValue=!1;C1.autoIndent.defaultValue=3;C1.overviewRulerLanes.defaultValue=2;CB.setFormatterSelector((i,e,t)=>Promise.resolve(i[0]));const Do=the();Do.editor=tst();Do.languages=qst();Do.CancellationTokenSource;Do.Emitter;Do.KeyCode;Do.KeyMod;Do.Position;const Zst=Do.Range,SB=Do.Selection,Jst=Do.SelectionDirection;Do.MarkerSeverity;Do.MarkerTag;Do.Uri;Do.Token;Do.editor;Do.languages;const U6=globalThis.MonacoEnvironment;(U6!=null&&U6.globalAPI||typeof define=="function"&&define.amd)&&(globalThis.monaco=Do);typeof globalThis.require<"u"&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const ert=()=>{let i=!0;return(e,t)=>{if(i){i=!1;try{e()}finally{i=!0}}else t!==void 0&&t()}};class trt{constructor(e,t,n){this.start=e,this.end=t,this.direction=n}}const nrt=(i,e,t)=>{const n=i.getSelection();if(n!==null){const s=n.getStartPosition(),r=n.getEndPosition(),o=LI(t,e.getOffsetAt(s)),a=LI(t,e.getOffsetAt(r));return new trt(o,a,n.getDirection())}return null},irt=(i,e,t,n)=>{const s=II(t.start,n),r=II(t.end,n);if(s!==null&&r!==null&&s.type===e&&r.type===e){const o=i.getModel(),a=o.getPositionAt(s.index),l=o.getPositionAt(r.index);return SB.createWithDirection(a.lineNumber,a.column,l.lineNumber,l.column,t.direction)}return null};class srt{constructor(e,t,n=new Set,s=null){this.doc=e.doc,this.ytext=e,this.monacoModel=t,this.editors=n,this.mux=ert(),this._savedSelections=new Map,this._beforeTransaction=()=>{this.mux(()=>{this._savedSelections=new Map,n.forEach(r=>{if(r.getModel()===t){const o=nrt(r,t,e);o!==null&&this._savedSelections.set(r,o)}})})},this.doc.on("beforeAllTransactions",this._beforeTransaction),this._decorations=new Map,this._rerenderDecorations=()=>{n.forEach(r=>{if(s&&r.getModel()===t){const o=this._decorations.get(r)||[],a=[];s.getStates().forEach((l,c)=>{if(c!==this.doc.clientID&&l.selection!=null&&l.selection.anchor!=null&&l.selection.head!=null){const u=II(l.selection.anchor,this.doc),d=II(l.selection.head,this.doc);if(u!==null&&d!==null&&u.type===e&&d.type===e){let h,g,p,_;u.index<d.index?(h=t.getPositionAt(u.index),g=t.getPositionAt(d.index),p="yRemoteSelectionHead yRemoteSelectionHead-"+c,_=null):(h=t.getPositionAt(d.index),g=t.getPositionAt(u.index),p=null,_="yRemoteSelectionHead yRemoteSelectionHead-"+c),a.push({range:new Zst(h.lineNumber,h.column,g.lineNumber,g.column),options:{className:"yRemoteSelection yRemoteSelection-"+c,afterContentClassName:p,beforeContentClassName:_}})}}}),this._decorations.set(r,r.deltaDecorations(o,a))}else this._decorations.delete(r)})},this._ytextObserver=r=>{this.mux(()=>{let o=0;r.delta.forEach(a=>{if(a.retain!==void 0)o+=a.retain;else if(a.insert!==void 0){const l=t.getPositionAt(o),c=new SB(l.lineNumber,l.column,l.lineNumber,l.column),u=a.insert;t.applyEdits([{range:c,text:u}]),o+=u.length}else if(a.delete!==void 0){const l=t.getPositionAt(o),c=t.getPositionAt(o+a.delete),u=new SB(l.lineNumber,l.column,c.lineNumber,c.column);t.applyEdits([{range:u,text:""}])}else throw pc()}),this._savedSelections.forEach((a,l)=>{const c=irt(l,e,a,this.doc);c!==null&&l.setSelection(c)})}),this._rerenderDecorations()},e.observe(this._ytextObserver);{const r=e.toString();t.getValue()!==r&&t.setValue(r)}this._monacoChangeHandler=t.onDidChangeContent(r=>{this.mux(()=>{this.doc.transact(()=>{r.changes.sort((o,a)=>a.rangeOffset-o.rangeOffset).forEach(o=>{e.delete(o.rangeOffset,o.rangeLength),e.insert(o.rangeOffset,o.text)})},this)})}),this._monacoDisposeHandler=t.onWillDispose(()=>{this.destroy()}),s&&(n.forEach(r=>{r.onDidChangeCursorSelection(()=>{if(r.getModel()===t){const o=r.getSelection();if(o===null)return;let a=t.getOffsetAt(o.getStartPosition()),l=t.getOffsetAt(o.getEndPosition());if(o.getDirection()===Jst.RTL){const c=a;a=l,l=c}s.setLocalStateField("selection",{anchor:LI(e,a),head:LI(e,l)})}}),s.on("change",this._rerenderDecorations)}),this.awareness=s)}destroy(){this._monacoChangeHandler.dispose(),this._monacoDisposeHandler.dispose(),this.ytext.unobserve(this._ytextObserver),this.doc.off("beforeAllTransactions",this._beforeTransaction),this.awareness&&this.awareness.off("change",this._rerenderDecorations)}}var jte={};function rrt(i,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(n){if(n!=="default"&&!(n in i)){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(i,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}})}),Object.freeze(i)}var ort=Object.defineProperty,art=(i,e,t)=>e in i?ort(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,$te=(i,e,t)=>art(i,typeof e!="symbol"?e+"":e,t);class Al{constructor(){$te(this,"_locking"),$te(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const t=new Promise(s=>e=()=>{this._locks-=1,s()}),n=this._locking.then(()=>e);return this._locking=this._locking.then(()=>t),n}}function Ms(i,e){if(!i)throw new Error(e)}const lrt=34028234663852886e22,crt=-34028234663852886e22,urt=4294967295,drt=2147483647,hrt=-2147483648;function LL(i){if(typeof i!="number")throw new Error("invalid int 32: "+typeof i);if(!Number.isInteger(i)||i>drt||i<hrt)throw new Error("invalid int 32: "+i)}function kB(i){if(typeof i!="number")throw new Error("invalid uint 32: "+typeof i);if(!Number.isInteger(i)||i>urt||i<0)throw new Error("invalid uint 32: "+i)}function Bpe(i){if(typeof i!="number")throw new Error("invalid float 32: "+typeof i);if(Number.isFinite(i)&&(i>lrt||i<crt))throw new Error("invalid float 32: "+i)}const Vpe=Symbol("@bufbuild/protobuf/enum-type");function frt(i){const e=i[Vpe];return Ms(e,"missing enum type on enum object"),e}function Wpe(i,e,t,n){i[Vpe]=Hpe(e,t.map(s=>({no:s.no,name:s.name,localName:i[s.no]})))}function Hpe(i,e,t){const n=Object.create(null),s=Object.create(null),r=[];for(const o of e){const a=Upe(o);r.push(a),n[o.name]=a,s[o.no]=a}return{typeName:i,values:r,findName(o){return n[o]},findNumber(o){return s[o]}}}function grt(i,e,t){const n={};for(const s of e){const r=Upe(s);n[r.localName]=r.no,n[r.no]=r.localName}return Wpe(n,i,e),n}function Upe(i){return"localName"in i?i:Object.assign(Object.assign({},i),{localName:i.name})}class Xz{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const n=this.getType(),s=n.runtime.bin,r=s.makeReadOptions(t);return s.readMessage(this,r.readerFactory(e),e.byteLength,r),this}fromJson(e,t){const n=this.getType(),s=n.runtime.json,r=s.makeReadOptions(t);return s.readMessage(n,e,r,this),this}fromJsonString(e,t){let n;try{n=JSON.parse(e)}catch(s){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(s instanceof Error?s.message:String(s)))}return this.fromJson(n,t)}toBinary(e){const t=this.getType(),n=t.runtime.bin,s=n.makeWriteOptions(e),r=s.writerFactory();return n.writeMessage(this,r,s),r.finish()}toJson(e){const t=this.getType(),n=t.runtime.json,s=n.makeWriteOptions(e);return n.writeMessage(this,s)}toJsonString(e){var t;const n=this.toJson(e);return JSON.stringify(n,null,(t=e==null?void 0:e.prettySpaces)!==null&&t!==void 0?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function mrt(i,e,t,n){var s;const r=(s=n==null?void 0:n.localName)!==null&&s!==void 0?s:e.substring(e.lastIndexOf(".")+1),o={[r]:function(a){i.util.initFields(this),i.util.initPartial(a,this)}}[r];return Object.setPrototypeOf(o.prototype,new Xz),Object.assign(o,{runtime:i,typeName:e,fields:i.util.newFieldList(t),fromBinary(a,l){return new o().fromBinary(a,l)},fromJson(a,l){return new o().fromJson(a,l)},fromJsonString(a,l){return new o().fromJsonString(a,l)},equals(a,l){return i.util.equals(o,a,l)}}),o}function prt(){let i=0,e=0;for(let n=0;n<28;n+=7){let s=this.buf[this.pos++];if(i|=(s&127)<<n,(s&128)==0)return this.assertBounds(),[i,e]}let t=this.buf[this.pos++];if(i|=(t&15)<<28,e=(t&112)>>4,(t&128)==0)return this.assertBounds(),[i,e];for(let n=3;n<=31;n+=7){let s=this.buf[this.pos++];if(e|=(s&127)<<n,(s&128)==0)return this.assertBounds(),[i,e]}throw new Error("invalid varint")}function z6(i,e,t){for(let r=0;r<28;r=r+7){const o=i>>>r,a=!(!(o>>>7)&&e==0),l=(a?o|128:o)&255;if(t.push(l),!a)return}const n=i>>>28&15|(e&7)<<4,s=e>>3!=0;if(t.push((s?n|128:n)&255),!!s){for(let r=3;r<31;r=r+7){const o=e>>>r,a=!!(o>>>7),l=(a?o|128:o)&255;if(t.push(l),!a)return}t.push(e>>>31&1)}}const IL=4294967296;function qte(i){const e=i[0]==="-";e&&(i=i.slice(1));const t=1e6;let n=0,s=0;function r(o,a){const l=Number(i.slice(o,a));s*=t,n=n*t+l,n>=IL&&(s=s+(n/IL|0),n=n%IL)}return r(-24,-18),r(-18,-12),r(-12,-6),r(-6),e?jpe(n,s):Zz(n,s)}function _rt(i,e){let t=Zz(i,e);const n=t.hi&2147483648;n&&(t=jpe(t.lo,t.hi));const s=zpe(t.lo,t.hi);return n?"-"+s:s}function zpe(i,e){if({lo:i,hi:e}=vrt(i,e),e<=2097151)return String(IL*e+i);const t=i&16777215,n=(i>>>24|e<<8)&16777215,s=e>>16&65535;let r=t+n*6777216+s*6710656,o=n+s*8147497,a=s*2;const l=1e7;return r>=l&&(o+=Math.floor(r/l),r%=l),o>=l&&(a+=Math.floor(o/l),o%=l),a.toString()+Kte(o)+Kte(r)}function vrt(i,e){return{lo:i>>>0,hi:e>>>0}}function Zz(i,e){return{lo:i|0,hi:e|0}}function jpe(i,e){return e=~e,i?i=~i+1:e+=1,Zz(i,e)}const Kte=i=>{const e=String(i);return"0000000".slice(e.length)+e};function Gte(i,e){if(i>=0){for(;i>127;)e.push(i&127|128),i=i>>>7;e.push(i)}else{for(let t=0;t<9;t++)e.push(i&127|128),i=i>>7;e.push(1)}}function brt(){let i=this.buf[this.pos++],e=i&127;if((i&128)==0)return this.assertBounds(),e;if(i=this.buf[this.pos++],e|=(i&127)<<7,(i&128)==0)return this.assertBounds(),e;if(i=this.buf[this.pos++],e|=(i&127)<<14,(i&128)==0)return this.assertBounds(),e;if(i=this.buf[this.pos++],e|=(i&127)<<21,(i&128)==0)return this.assertBounds(),e;i=this.buf[this.pos++],e|=(i&15)<<28;for(let t=5;(i&128)!==0&&t<10;t++)i=this.buf[this.pos++];if((i&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function yrt(){const i=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof i.getBigInt64=="function"&&typeof i.getBigUint64=="function"&&typeof i.setBigInt64=="function"&&typeof i.setBigUint64=="function"&&(typeof process!="object"||typeof jte!="object"||jte.BUF_BIGINT_DISABLE!=="1")){const s=BigInt("-9223372036854775808"),r=BigInt("9223372036854775807"),o=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(l){const c=typeof l=="bigint"?l:BigInt(l);if(c>r||c<s)throw new Error("int64 invalid: ".concat(l));return c},uParse(l){const c=typeof l=="bigint"?l:BigInt(l);if(c>a||c<o)throw new Error("uint64 invalid: ".concat(l));return c},enc(l){return i.setBigInt64(0,this.parse(l),!0),{lo:i.getInt32(0,!0),hi:i.getInt32(4,!0)}},uEnc(l){return i.setBigInt64(0,this.uParse(l),!0),{lo:i.getInt32(0,!0),hi:i.getInt32(4,!0)}},dec(l,c){return i.setInt32(0,l,!0),i.setInt32(4,c,!0),i.getBigInt64(0,!0)},uDec(l,c){return i.setInt32(0,l,!0),i.setInt32(4,c,!0),i.getBigUint64(0,!0)}}}const t=s=>Ms(/^-?[0-9]+$/.test(s),"int64 invalid: ".concat(s)),n=s=>Ms(/^[0-9]+$/.test(s),"uint64 invalid: ".concat(s));return{zero:"0",supported:!1,parse(s){return typeof s!="string"&&(s=s.toString()),t(s),s},uParse(s){return typeof s!="string"&&(s=s.toString()),n(s),s},enc(s){return typeof s!="string"&&(s=s.toString()),t(s),qte(s)},uEnc(s){return typeof s!="string"&&(s=s.toString()),n(s),qte(s)},dec(s,r){return _rt(s,r)},uDec(s,r){return zpe(s,r)}}}const gs=yrt();var Me;(function(i){i[i.DOUBLE=1]="DOUBLE",i[i.FLOAT=2]="FLOAT",i[i.INT64=3]="INT64",i[i.UINT64=4]="UINT64",i[i.INT32=5]="INT32",i[i.FIXED64=6]="FIXED64",i[i.FIXED32=7]="FIXED32",i[i.BOOL=8]="BOOL",i[i.STRING=9]="STRING",i[i.BYTES=12]="BYTES",i[i.UINT32=13]="UINT32",i[i.SFIXED32=15]="SFIXED32",i[i.SFIXED64=16]="SFIXED64",i[i.SINT32=17]="SINT32",i[i.SINT64=18]="SINT64"})(Me||(Me={}));var Fm;(function(i){i[i.BIGINT=0]="BIGINT",i[i.STRING=1]="STRING"})(Fm||(Fm={}));function dg(i,e,t){if(e===t)return!0;if(i==Me.BYTES){if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}switch(i){case Me.UINT64:case Me.FIXED64:case Me.INT64:case Me.SFIXED64:case Me.SINT64:return e==t}return!1}function uy(i,e){switch(i){case Me.BOOL:return!1;case Me.UINT64:case Me.FIXED64:case Me.INT64:case Me.SFIXED64:case Me.SINT64:return e==0?gs.zero:"0";case Me.DOUBLE:case Me.FLOAT:return 0;case Me.BYTES:return new Uint8Array(0);case Me.STRING:return"";default:return 0}}function $pe(i,e){switch(i){case Me.BOOL:return e===!1;case Me.STRING:return e==="";case Me.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var Xs;(function(i){i[i.Varint=0]="Varint",i[i.Bit64=1]="Bit64",i[i.LengthDelimited=2]="LengthDelimited",i[i.StartGroup=3]="StartGroup",i[i.EndGroup=4]="EndGroup",i[i.Bit32=5]="Bit32"})(Xs||(Xs={}));class wrt{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let s=0;s<this.chunks.length;s++)e+=this.chunks[s].length;let t=new Uint8Array(e),n=0;for(let s=0;s<this.chunks.length;s++)t.set(this.chunks[s],n),n+=this.chunks[s].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(kB(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return LL(e),Gte(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){Bpe(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){kB(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){LL(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return LL(e),e=(e<<1^e>>31)>>>0,Gte(e,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),s=gs.enc(e);return n.setInt32(0,s.lo,!0),n.setInt32(4,s.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),s=gs.uEnc(e);return n.setInt32(0,s.lo,!0),n.setInt32(4,s.hi,!0),this.raw(t)}int64(e){let t=gs.enc(e);return z6(t.lo,t.hi,this.buf),this}sint64(e){let t=gs.enc(e),n=t.hi>>31,s=t.lo<<1^n,r=(t.hi<<1|t.lo>>>31)^n;return z6(s,r,this.buf),this}uint64(e){let t=gs.uEnc(e);return z6(t.lo,t.hi,this.buf),this}}class Crt{constructor(e,t){this.varint64=prt,this.uint32=brt,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=t??new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,n=e&7;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e,t){let n=this.pos;switch(e){case Xs.Varint:for(;this.buf[this.pos++]&128;);break;case Xs.Bit64:this.pos+=4;case Xs.Bit32:this.pos+=4;break;case Xs.LengthDelimited:let s=this.uint32();this.pos+=s;break;case Xs.StartGroup:for(;;){const[r,o]=this.tag();if(o===Xs.EndGroup){if(t!==void 0&&r!==t)throw new Error("invalid end group tag");break}this.skip(o,r)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return gs.dec(...this.varint64())}uint64(){return gs.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(e&1);return e=(e>>>1|(t&1)<<31)^n,t=t>>>1^n,gs.dec(e,t)}bool(){let[e,t]=this.varint64();return e!==0||t!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return gs.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return gs.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function Srt(i,e,t,n){let s;return{typeName:e,extendee:t,get field(){if(!s){const r=typeof n=="function"?n():n;r.name=e.split(".").pop(),r.jsonName="[".concat(e,"]"),s=i.util.newFieldList([r]).list()[0]}return s},runtime:i}}function qpe(i){const e=i.field.localName,t=Object.create(null);return t[e]=krt(i),[t,()=>t[e]]}function krt(i){const e=i.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return uy(e.T,e.L);case"message":const t=e.T,n=new t;return t.fieldWrapper?t.fieldWrapper.unwrapField(n):n;case"map":throw"map fields are not allowed to be extensions"}}function xrt(i,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let t=i.length-1;t>=0;--t)if(i[t].no==e.no)return[i[t]];return[]}return i.filter(t=>t.no===e.no)}let Vh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),WA=[];for(let i=0;i<Vh.length;i++)WA[Vh[i].charCodeAt(0)]=i;WA[45]=Vh.indexOf("+");WA[95]=Vh.indexOf("/");const Kpe={dec(i){let e=i.length*3/4;i[i.length-2]=="="?e-=2:i[i.length-1]=="="&&(e-=1);let t=new Uint8Array(e),n=0,s=0,r,o=0;for(let a=0;a<i.length;a++){if(r=WA[i.charCodeAt(a)],r===void 0)switch(i[a]){case"=":s=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(s){case 0:o=r,s=1;break;case 1:t[n++]=o<<2|(r&48)>>4,o=r,s=2;break;case 2:t[n++]=(o&15)<<4|(r&60)>>2,o=r,s=3;break;case 3:t[n++]=(o&3)<<6|r,s=0;break}}if(s==1)throw Error("invalid base64 string.");return t.subarray(0,n)},enc(i){let e="",t=0,n,s=0;for(let r=0;r<i.length;r++)switch(n=i[r],t){case 0:e+=Vh[n>>2],s=(n&3)<<4,t=1;break;case 1:e+=Vh[s|n>>4],s=(n&15)<<2,t=2;break;case 2:e+=Vh[s|n>>6],e+=Vh[n&63],t=0;break}return t&&(e+=Vh[s],e+="=",t==1&&(e+="=")),e}};function Ert(i,e,t){Ype(e,i);const n=e.runtime.bin.makeReadOptions(t),s=xrt(i.getType().runtime.bin.listUnknownFields(i),e.field),[r,o]=qpe(e);for(const a of s)e.runtime.bin.readField(r,n.readerFactory(a.data),e.field,a.wireType,n);return o()}function Trt(i,e,t,n){Ype(e,i);const s=e.runtime.bin.makeReadOptions(n),r=e.runtime.bin.makeWriteOptions(n);if(Gpe(i,e)){const c=i.getType().runtime.bin.listUnknownFields(i).filter(u=>u.no!=e.field.no);i.getType().runtime.bin.discardUnknownFields(i);for(const u of c)i.getType().runtime.bin.onUnknownField(i,u.no,u.wireType,u.data)}const o=r.writerFactory();let a=e.field;!a.opt&&!a.repeated&&(a.kind=="enum"||a.kind=="scalar")&&(a=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(a,t,o,r);const l=s.readerFactory(o.finish());for(;l.pos<l.len;){const[c,u]=l.tag(),d=l.skip(u,c);i.getType().runtime.bin.onUnknownField(i,c,u,d)}}function Gpe(i,e){const t=i.getType();return e.extendee.typeName===t.typeName&&!!t.runtime.bin.listUnknownFields(i).find(n=>n.no==e.field.no)}function Ype(i,e){Ms(i.extendee.typeName==e.getType().typeName,"extension ".concat(i.typeName," can only be applied to message ").concat(i.extendee.typeName))}function Qpe(i,e){const t=i.localName;if(i.repeated)return e[t].length>0;if(i.oneof)return e[i.oneof.localName].case===t;switch(i.kind){case"enum":case"scalar":return i.opt||i.req?e[t]!==void 0:i.kind=="enum"?e[t]!==i.T.values[0].no:!$pe(i.T,e[t]);case"message":return e[t]!==void 0;case"map":return Object.keys(e[t]).length>0}}function Yte(i,e){const t=i.localName,n=!i.opt&&!i.req;if(i.repeated)e[t]=[];else if(i.oneof)e[i.oneof.localName]={case:void 0};else switch(i.kind){case"map":e[t]={};break;case"enum":e[t]=n?i.T.values[0].no:void 0;break;case"scalar":e[t]=n?uy(i.T,i.L):void 0;break;case"message":e[t]=void 0;break}}function k0(i,e){if(i===null||typeof i!="object"||!Object.getOwnPropertyNames(Xz.prototype).every(n=>n in i&&typeof i[n]=="function"))return!1;const t=i.getType();return t===null||typeof t!="function"||!("typeName"in t)||typeof t.typeName!="string"?!1:e===void 0?!0:t.typeName==e.typeName}function Xpe(i,e){return k0(e)||!i.fieldWrapper?e:i.fieldWrapper.wrapField(e)}Me.DOUBLE,Me.FLOAT,Me.INT64,Me.UINT64,Me.INT32,Me.UINT32,Me.BOOL,Me.STRING,Me.BYTES;const Qte={ignoreUnknownFields:!1},Xte={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function Lrt(i){return i?Object.assign(Object.assign({},Qte),i):Qte}function Irt(i){return i?Object.assign(Object.assign({},Xte),i):Xte}const EN=Symbol(),DL=Symbol();function Drt(){return{makeReadOptions:Lrt,makeWriteOptions:Irt,readMessage(i,e,t,n){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error("cannot decode message ".concat(i.typeName," from JSON: ").concat(sd(e)));n=n??new i;const s=new Map,r=t.typeRegistry;for(const[o,a]of Object.entries(e)){const l=i.fields.findJsonName(o);if(l){if(l.oneof){if(a===null&&l.kind=="scalar")continue;const c=s.get(l.oneof);if(c!==void 0)throw new Error("cannot decode message ".concat(i.typeName,' from JSON: multiple keys for oneof "').concat(l.oneof.name,'" present: "').concat(c,'", "').concat(o,'"'));s.set(l.oneof,o)}Zte(n,a,l,t,i)}else{let c=!1;if(r!=null&&r.findExtension&&o.startsWith("[")&&o.endsWith("]")){const u=r.findExtension(o.substring(1,o.length-1));if(u&&u.extendee.typeName==i.typeName){c=!0;const[d,h]=qpe(u);Zte(d,a,u.field,t,u),Trt(n,u,h(),t)}}if(!c&&!t.ignoreUnknownFields)throw new Error("cannot decode message ".concat(i.typeName,' from JSON: key "').concat(o,'" is unknown'))}}return n},writeMessage(i,e){const t=i.getType(),n={};let s;try{for(s of t.fields.byNumber()){if(!Qpe(s,i)){if(s.req)throw"required field not set";if(!e.emitDefaultValues||!Rrt(s))continue}const o=s.oneof?i[s.oneof.localName].value:i[s.localName],a=Jte(s,o,e);a!==void 0&&(n[e.useProtoFieldName?s.name:s.jsonName]=a)}const r=e.typeRegistry;if(r!=null&&r.findExtensionFor)for(const o of t.runtime.bin.listUnknownFields(i)){const a=r.findExtensionFor(t.typeName,o.no);if(a&&Gpe(i,a)){const l=Ert(i,a,e),c=Jte(a.field,l,e);c!==void 0&&(n[a.field.jsonName]=c)}}}catch(r){const o=s?"cannot encode field ".concat(t.typeName,".").concat(s.name," to JSON"):"cannot encode message ".concat(t.typeName," to JSON"),a=r instanceof Error?r.message:String(r);throw new Error(o+(a.length>0?": ".concat(a):""))}return n},readScalar(i,e,t){return yS(i,e,t??Fm.BIGINT,!0)},writeScalar(i,e,t){if(e!==void 0&&(t||$pe(i,e)))return NL(i,e)},debug:sd}}function sd(i){if(i===null)return"null";switch(typeof i){case"object":return Array.isArray(i)?"array":"object";case"string":return i.length>100?"string":'"'.concat(i.split('"').join('\\"'),'"');default:return String(i)}}function Zte(i,e,t,n,s){let r=t.localName;if(t.repeated){if(Ms(t.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error("cannot decode field ".concat(s.typeName,".").concat(t.name," from JSON: ").concat(sd(e)));const o=i[r];for(const a of e){if(a===null)throw new Error("cannot decode field ".concat(s.typeName,".").concat(t.name," from JSON: ").concat(sd(a)));switch(t.kind){case"message":o.push(t.T.fromJson(a,n));break;case"enum":const l=j6(t.T,a,n.ignoreUnknownFields,!0);l!==DL&&o.push(l);break;case"scalar":try{o.push(yS(t.T,a,t.L,!0))}catch(c){let u="cannot decode field ".concat(s.typeName,".").concat(t.name," from JSON: ").concat(sd(a));throw c instanceof Error&&c.message.length>0&&(u+=": ".concat(c.message)),new Error(u)}break}}}else if(t.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error("cannot decode field ".concat(s.typeName,".").concat(t.name," from JSON: ").concat(sd(e)));const o=i[r];for(const[a,l]of Object.entries(e)){if(l===null)throw new Error("cannot decode field ".concat(s.typeName,".").concat(t.name," from JSON: map value null"));let c;try{c=Nrt(t.K,a)}catch(u){let d="cannot decode map key for field ".concat(s.typeName,".").concat(t.name," from JSON: ").concat(sd(e));throw u instanceof Error&&u.message.length>0&&(d+=": ".concat(u.message)),new Error(d)}switch(t.V.kind){case"message":o[c]=t.V.T.fromJson(l,n);break;case"enum":const u=j6(t.V.T,l,n.ignoreUnknownFields,!0);u!==DL&&(o[c]=u);break;case"scalar":try{o[c]=yS(t.V.T,l,Fm.BIGINT,!0)}catch(d){let h="cannot decode map value for field ".concat(s.typeName,".").concat(t.name," from JSON: ").concat(sd(e));throw d instanceof Error&&d.message.length>0&&(h+=": ".concat(d.message)),new Error(h)}break}}}else switch(t.oneof&&(i=i[t.oneof.localName]={case:r},r="value"),t.kind){case"message":const o=t.T;if(e===null&&o.typeName!="google.protobuf.Value")return;let a=i[r];k0(a)?a.fromJson(e,n):(i[r]=a=o.fromJson(e,n),o.fieldWrapper&&!t.oneof&&(i[r]=o.fieldWrapper.unwrapField(a)));break;case"enum":const l=j6(t.T,e,n.ignoreUnknownFields,!1);switch(l){case EN:Yte(t,i);break;case DL:break;default:i[r]=l;break}break;case"scalar":try{const c=yS(t.T,e,t.L,!1);switch(c){case EN:Yte(t,i);break;default:i[r]=c;break}}catch(c){let u="cannot decode field ".concat(s.typeName,".").concat(t.name," from JSON: ").concat(sd(e));throw c instanceof Error&&c.message.length>0&&(u+=": ".concat(c.message)),new Error(u)}break}}function Nrt(i,e){if(i===Me.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return yS(i,e,Fm.BIGINT,!0).toString()}function yS(i,e,t,n){if(e===null)return n?uy(i,t):EN;switch(i){case Me.DOUBLE:case Me.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const s=Number(e);if(Number.isNaN(s)||!Number.isFinite(s))break;return i==Me.FLOAT&&Bpe(s),s;case Me.INT32:case Me.FIXED32:case Me.SFIXED32:case Me.SINT32:case Me.UINT32:let r;if(typeof e=="number"?r=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(r=Number(e)),r===void 0)break;return i==Me.UINT32||i==Me.FIXED32?kB(r):LL(r),r;case Me.INT64:case Me.SFIXED64:case Me.SINT64:if(typeof e!="number"&&typeof e!="string")break;const o=gs.parse(e);return t?o.toString():o;case Me.FIXED64:case Me.UINT64:if(typeof e!="number"&&typeof e!="string")break;const a=gs.uParse(e);return t?a.toString():a;case Me.BOOL:if(typeof e!="boolean")break;return e;case Me.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case Me.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return Kpe.dec(e)}throw new Error}function j6(i,e,t,n){if(e===null)return i.typeName=="google.protobuf.NullValue"?0:n?i.values[0].no:EN;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const s=i.findName(e);if(s!==void 0)return s.no;if(t)return DL;break}throw new Error("cannot decode enum ".concat(i.typeName," from JSON: ").concat(sd(e)))}function Rrt(i){return i.repeated||i.kind=="map"?!0:!(i.oneof||i.kind=="message"||i.opt||i.req)}function Jte(i,e,t){if(i.kind=="map"){Ms(typeof e=="object"&&e!=null);const n={},s=Object.entries(e);switch(i.V.kind){case"scalar":for(const[o,a]of s)n[o.toString()]=NL(i.V.T,a);break;case"message":for(const[o,a]of s)n[o.toString()]=a.toJson(t);break;case"enum":const r=i.V.T;for(const[o,a]of s)n[o.toString()]=$6(r,a,t.enumAsInteger);break}return t.emitDefaultValues||s.length>0?n:void 0}if(i.repeated){Ms(Array.isArray(e));const n=[];switch(i.kind){case"scalar":for(let s=0;s<e.length;s++)n.push(NL(i.T,e[s]));break;case"enum":for(let s=0;s<e.length;s++)n.push($6(i.T,e[s],t.enumAsInteger));break;case"message":for(let s=0;s<e.length;s++)n.push(e[s].toJson(t));break}return t.emitDefaultValues||n.length>0?n:void 0}switch(i.kind){case"scalar":return NL(i.T,e);case"enum":return $6(i.T,e,t.enumAsInteger);case"message":return Xpe(i.T,e).toJson(t)}}function $6(i,e,t){var n;if(Ms(typeof e=="number"),i.typeName=="google.protobuf.NullValue")return null;if(t)return e;const s=i.findNumber(e);return(n=s==null?void 0:s.name)!==null&&n!==void 0?n:e}function NL(i,e){switch(i){case Me.INT32:case Me.SFIXED32:case Me.SINT32:case Me.FIXED32:case Me.UINT32:return Ms(typeof e=="number"),e;case Me.FLOAT:case Me.DOUBLE:return Ms(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case Me.STRING:return Ms(typeof e=="string"),e;case Me.BOOL:return Ms(typeof e=="boolean"),e;case Me.UINT64:case Me.FIXED64:case Me.INT64:case Me.SFIXED64:case Me.SINT64:return Ms(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case Me.BYTES:return Ms(e instanceof Uint8Array),Kpe.enc(e)}}const O_=Symbol("@bufbuild/protobuf/unknown-fields"),ene={readUnknownFields:!0,readerFactory:i=>new Crt(i)},tne={writeUnknownFields:!0,writerFactory:()=>new wrt};function Art(i){return i?Object.assign(Object.assign({},ene),i):ene}function Prt(i){return i?Object.assign(Object.assign({},tne),i):tne}function Mrt(){return{makeReadOptions:Art,makeWriteOptions:Prt,listUnknownFields(i){var e;return(e=i[O_])!==null&&e!==void 0?e:[]},discardUnknownFields(i){delete i[O_]},writeUnknownFields(i,e){const n=i[O_];if(n)for(const s of n)e.tag(s.no,s.wireType).raw(s.data)},onUnknownField(i,e,t,n){const s=i;Array.isArray(s[O_])||(s[O_]=[]),s[O_].push({no:e,wireType:t,data:n})},readMessage(i,e,t,n,s){const r=i.getType(),o=s?e.len:e.pos+t;let a,l;for(;e.pos<o&&([a,l]=e.tag(),!(s===!0&&l==Xs.EndGroup));){const c=r.fields.find(a);if(!c){const u=e.skip(l,a);n.readUnknownFields&&this.onUnknownField(i,a,l,u);continue}nne(i,e,c,l,n)}if(s&&(l!=Xs.EndGroup||a!==t))throw new Error("invalid end group tag")},readField:nne,writeMessage(i,e,t){const n=i.getType();for(const s of n.fields.byNumber()){if(!Qpe(s,i)){if(s.req)throw new Error("cannot encode field ".concat(n.typeName,".").concat(s.name," to binary: required field not set"));continue}const r=s.oneof?i[s.oneof.localName].value:i[s.localName];ine(s,r,e,t)}return t.writeUnknownFields&&this.writeUnknownFields(i,e),e},writeField(i,e,t,n){e!==void 0&&ine(i,e,t,n)}}}function nne(i,e,t,n,s){let{repeated:r,localName:o}=t;switch(t.oneof&&(i=i[t.oneof.localName],i.case!=o&&delete i.value,i.case=o,o="value"),t.kind){case"scalar":case"enum":const a=t.kind=="enum"?Me.INT32:t.T;let l=TN;if(t.kind=="scalar"&&t.L>0&&(l=Frt),r){let h=i[o];if(n==Xs.LengthDelimited&&a!=Me.STRING&&a!=Me.BYTES){let p=e.uint32()+e.pos;for(;e.pos<p;)h.push(l(e,a))}else h.push(l(e,a))}else i[o]=l(e,a);break;case"message":const c=t.T;r?i[o].push(RL(e,new c,s,t)):k0(i[o])?RL(e,i[o],s,t):(i[o]=RL(e,new c,s,t),c.fieldWrapper&&!t.oneof&&!t.repeated&&(i[o]=c.fieldWrapper.unwrapField(i[o])));break;case"map":let[u,d]=Ort(t,e,s);i[o][u]=d;break}}function RL(i,e,t,n){const s=e.getType().runtime.bin,r=n==null?void 0:n.delimited;return s.readMessage(e,i,r?n.no:i.uint32(),t,r),e}function Ort(i,e,t){const n=e.uint32(),s=e.pos+n;let r,o;for(;e.pos<s;){const[a]=e.tag();switch(a){case 1:r=TN(e,i.K);break;case 2:switch(i.V.kind){case"scalar":o=TN(e,i.V.T);break;case"enum":o=e.int32();break;case"message":o=RL(e,new i.V.T,t,void 0);break}break}}if(r===void 0&&(r=uy(i.K,Fm.BIGINT)),typeof r!="string"&&typeof r!="number"&&(r=r.toString()),o===void 0)switch(i.V.kind){case"scalar":o=uy(i.V.T,Fm.BIGINT);break;case"enum":o=i.V.T.values[0].no;break;case"message":o=new i.V.T;break}return[r,o]}function Frt(i,e){const t=TN(i,e);return typeof t=="bigint"?t.toString():t}function TN(i,e){switch(e){case Me.STRING:return i.string();case Me.BOOL:return i.bool();case Me.DOUBLE:return i.double();case Me.FLOAT:return i.float();case Me.INT32:return i.int32();case Me.INT64:return i.int64();case Me.UINT64:return i.uint64();case Me.FIXED64:return i.fixed64();case Me.BYTES:return i.bytes();case Me.FIXED32:return i.fixed32();case Me.SFIXED32:return i.sfixed32();case Me.SFIXED64:return i.sfixed64();case Me.SINT64:return i.sint64();case Me.UINT32:return i.uint32();case Me.SINT32:return i.sint32()}}function ine(i,e,t,n){Ms(e!==void 0);const s=i.repeated;switch(i.kind){case"scalar":case"enum":let r=i.kind=="enum"?Me.INT32:i.T;if(s)if(Ms(Array.isArray(e)),i.packed)Vrt(t,r,i.no,e);else for(const o of e)wS(t,r,i.no,o);else wS(t,r,i.no,e);break;case"message":if(s){Ms(Array.isArray(e));for(const o of e)sne(t,n,i,o)}else sne(t,n,i,e);break;case"map":Ms(typeof e=="object"&&e!=null);for(const[o,a]of Object.entries(e))Brt(t,n,i,o,a);break}}function Brt(i,e,t,n,s){i.tag(t.no,Xs.LengthDelimited),i.fork();let r=n;switch(t.K){case Me.INT32:case Me.FIXED32:case Me.UINT32:case Me.SFIXED32:case Me.SINT32:r=Number.parseInt(n);break;case Me.BOOL:Ms(n=="true"||n=="false"),r=n=="true";break}switch(wS(i,t.K,1,r),t.V.kind){case"scalar":wS(i,t.V.T,2,s);break;case"enum":wS(i,Me.INT32,2,s);break;case"message":Ms(s!==void 0),i.tag(2,Xs.LengthDelimited).bytes(s.toBinary(e));break}i.join()}function sne(i,e,t,n){const s=Xpe(t.T,n);t.delimited?i.tag(t.no,Xs.StartGroup).raw(s.toBinary(e)).tag(t.no,Xs.EndGroup):i.tag(t.no,Xs.LengthDelimited).bytes(s.toBinary(e))}function wS(i,e,t,n){Ms(n!==void 0);let[s,r]=Zpe(e);i.tag(t,s)[r](n)}function Vrt(i,e,t,n){if(!n.length)return;i.tag(t,Xs.LengthDelimited).fork();let[,s]=Zpe(e);for(let r=0;r<n.length;r++)i[s](n[r]);i.join()}function Zpe(i){let e=Xs.Varint;switch(i){case Me.BYTES:case Me.STRING:e=Xs.LengthDelimited;break;case Me.DOUBLE:case Me.FIXED64:case Me.SFIXED64:e=Xs.Bit64;break;case Me.FIXED32:case Me.SFIXED32:case Me.FLOAT:e=Xs.Bit32;break}const t=Me[i].toLowerCase();return[e,t]}function Wrt(){return{setEnumType:Wpe,initPartial(i,e){if(i===void 0)return;const t=e.getType();for(const n of t.fields.byMember()){const s=n.localName,r=e,o=i;if(o[s]!=null)switch(n.kind){case"oneof":const a=o[s].case;if(a===void 0)continue;const l=n.findField(a);let c=o[s].value;l&&l.kind=="message"&&!k0(c,l.T)?c=new l.T(c):l&&l.kind==="scalar"&&l.T===Me.BYTES&&(c=tC(c)),r[s]={case:a,value:c};break;case"scalar":case"enum":let u=o[s];n.T===Me.BYTES&&(u=n.repeated?u.map(tC):tC(u)),r[s]=u;break;case"map":switch(n.V.kind){case"scalar":case"enum":if(n.V.T===Me.BYTES)for(const[g,p]of Object.entries(o[s]))r[s][g]=tC(p);else Object.assign(r[s],o[s]);break;case"message":const h=n.V.T;for(const g of Object.keys(o[s])){let p=o[s][g];h.fieldWrapper||(p=new h(p)),r[s][g]=p}break}break;case"message":const d=n.T;if(n.repeated)r[s]=o[s].map(h=>k0(h,d)?h:new d(h));else{const h=o[s];d.fieldWrapper?d.typeName==="google.protobuf.BytesValue"?r[s]=tC(h):r[s]=h:r[s]=k0(h,d)?h:new d(h)}break}}},equals(i,e,t){return e===t?!0:!e||!t?!1:i.fields.byMember().every(n=>{const s=e[n.localName],r=t[n.localName];if(n.repeated){if(s.length!==r.length)return!1;switch(n.kind){case"message":return s.every((o,a)=>n.T.equals(o,r[a]));case"scalar":return s.every((o,a)=>dg(n.T,o,r[a]));case"enum":return s.every((o,a)=>dg(Me.INT32,o,r[a]))}throw new Error("repeated cannot contain ".concat(n.kind))}switch(n.kind){case"message":return n.T.equals(s,r);case"enum":return dg(Me.INT32,s,r);case"scalar":return dg(n.T,s,r);case"oneof":if(s.case!==r.case)return!1;const o=n.findField(s.case);if(o===void 0)return!0;switch(o.kind){case"message":return o.T.equals(s.value,r.value);case"enum":return dg(Me.INT32,s.value,r.value);case"scalar":return dg(o.T,s.value,r.value)}throw new Error("oneof cannot contain ".concat(o.kind));case"map":const a=Object.keys(s).concat(Object.keys(r));switch(n.V.kind){case"message":const l=n.V.T;return a.every(u=>l.equals(s[u],r[u]));case"enum":return a.every(u=>dg(Me.INT32,s[u],r[u]));case"scalar":const c=n.V.T;return a.every(u=>dg(c,s[u],r[u]))}break}})},clone(i){const e=i.getType(),t=new e,n=t;for(const s of e.fields.byMember()){const r=i[s.localName];let o;if(s.repeated)o=r.map(xT);else if(s.kind=="map"){o=n[s.localName];for(const[a,l]of Object.entries(r))o[a]=xT(l)}else s.kind=="oneof"?o=s.findField(r.case)?{case:r.case,value:xT(r.value)}:{case:void 0}:o=xT(r);n[s.localName]=o}for(const s of e.runtime.bin.listUnknownFields(i))e.runtime.bin.onUnknownField(n,s.no,s.wireType,s.data);return t}}}function xT(i){if(i===void 0)return i;if(k0(i))return i.clone();if(i instanceof Uint8Array){const e=new Uint8Array(i.byteLength);return e.set(i),e}return i}function tC(i){return i instanceof Uint8Array?i:new Uint8Array(i)}function Hrt(i,e,t){return{syntax:i,json:Drt(),bin:Mrt(),util:Object.assign(Object.assign({},Wrt()),{newFieldList:e,initFields:t}),makeMessageType(n,s,r){return mrt(this,n,s,r)},makeEnum:grt,makeEnumType:Hpe,getEnumType:frt,makeExtension(n,s,r){return Srt(this,n,s,r)}}}class Urt{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const t={};for(const n of this.list())t[n.jsonName]=t[n.name]=n;this.jsonNames=t}return this.jsonNames[e]}find(e){if(!this.numbers){const t={};for(const n of this.list())t[n.no]=n;this.numbers=t}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,t)=>e.no-t.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const n of this.list())n.oneof?n.oneof!==t&&(t=n.oneof,e.push(t)):e.push(n)}return this.members}}function Jpe(i,e){const t=e0e(i);return e?t:Grt(Krt(t))}function zrt(i){return Jpe(i,!1)}const jrt=e0e;function e0e(i){let e=!1;const t=[];for(let n=0;n<i.length;n++){let s=i.charAt(n);switch(s){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(s),e=!1;break;default:e&&(e=!1,s=s.toUpperCase()),t.push(s);break}}return t.join("")}const $rt=new Set(["constructor","toString","toJSON","valueOf"]),qrt=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),t0e=i=>"".concat(i,"$"),Krt=i=>qrt.has(i)?t0e(i):i,Grt=i=>$rt.has(i)?t0e(i):i;class Yrt{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=zrt(e)}addField(e){Ms(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let t=0;t<this.fields.length;t++)this._lookup[this.fields[t].localName]=this.fields[t]}return this._lookup[e]}}function Qrt(i,e){var t,n,s,r,o,a;const l=[];let c;for(const u of typeof i=="function"?i():i){const d=u;if(d.localName=Jpe(u.name,u.oneof!==void 0),d.jsonName=(t=u.jsonName)!==null&&t!==void 0?t:jrt(u.name),d.repeated=(n=u.repeated)!==null&&n!==void 0?n:!1,u.kind=="scalar"&&(d.L=(s=u.L)!==null&&s!==void 0?s:Fm.BIGINT),d.delimited=(r=u.delimited)!==null&&r!==void 0?r:!1,d.req=(o=u.req)!==null&&o!==void 0?o:!1,d.opt=(a=u.opt)!==null&&a!==void 0?a:!1,u.packed===void 0&&(d.packed=u.kind=="enum"||u.kind=="scalar"&&u.T!=Me.BYTES&&u.T!=Me.STRING),u.oneof!==void 0){const h=typeof u.oneof=="string"?u.oneof:u.oneof.name;(!c||c.name!=h)&&(c=new Yrt(h)),d.oneof=c,c.addField(d)}l.push(d)}return l}const xe=Hrt("proto3",i=>new Urt(i,e=>Qrt(e)),i=>{for(const e of i.getType().fields.byMember()){if(e.opt)continue;const t=e.localName,n=i;if(e.repeated){n[t]=[];continue}switch(e.kind){case"oneof":n[t]={case:void 0};break;case"enum":n[t]=0;break;case"map":n[t]={};break;case"scalar":n[t]=uy(e.T,e.L);break}}});class qa extends Xz{constructor(e){super(),this.seconds=gs.zero,this.nanos=0,xe.util.initPartial(e,this)}fromJson(e,t){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(xe.json.debug(e)));const n=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const s=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(s))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(s<Date.parse("0001-01-01T00:00:00Z")||s>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=gs.parse(s/1e3),this.nanos=0,n[7]&&(this.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9),this}toJson(e){const t=Number(this.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let n="Z";if(this.nanos>0){const s=(this.nanos+1e9).toString().substring(1);s.substring(3)==="000000"?n="."+s.substring(0,3)+"Z":s.substring(6)==="000"?n="."+s.substring(0,6)+"Z":n="."+s+"Z"}return new Date(t).toISOString().replace(".000Z",n)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return qa.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new qa({seconds:gs.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return new qa().fromBinary(e,t)}static fromJson(e,t){return new qa().fromJson(e,t)}static fromJsonString(e,t){return new qa().fromJsonString(e,t)}static equals(e,t){return xe.util.equals(qa,e,t)}}qa.runtime=xe;qa.typeName="google.protobuf.Timestamp";qa.fields=xe.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const Xrt=xe.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:qa},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:Zrt,repeated:!0},{no:5,name:"events",kind:"message",T:eot,repeated:!0}]),Zrt=xe.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:Jrt,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),Jrt=xe.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:qa},{no:3,name:"value",kind:"scalar",T:2}]),eot=xe.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:qa},{no:7,name:"normalized_end_timestamp",kind:"message",T:qa,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),n0e=xe.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),Jc=xe.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),gr=xe.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),_b=xe.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),TC=xe.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),s2=xe.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),ru=xe.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"}]),F_=xe.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),tot=xe.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),cd=xe.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"}]),Jz=xe.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:LN,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:g0e}]),LN=xe.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),not=xe.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:xe.getEnumType(gr),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),r2=xe.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:xe.getEnumType(xB)},{no:4,name:"tracks",kind:"message",T:vv,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:not},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:xe.getEnumType(IN)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:xe.getEnumType(ru)},{no:18,name:"kind_details",kind:"enum",T:xe.getEnumType(iot),repeated:!0}]),xB=xe.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),IN=xe.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),iot=xe.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),xl=xe.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),sot=xe.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:x0,repeated:!0}]),vv=xe.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:xe.getEnumType(Jc)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:xe.getEnumType(gr)},{no:10,name:"layers",kind:"message",T:x0,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:sot,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:xe.getEnumType(xl)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:g0e},{no:19,name:"audio_features",kind:"enum",T:xe.getEnumType(cd),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:xe.getEnumType(n0e)}]),x0=xe.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:xe.getEnumType(_b)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}]),Ha=xe.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:xe.getEnumType(pi)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:s0e,oneof:"value"},{no:3,name:"speaker",kind:"message",T:rot,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:r0e,oneof:"value"},{no:7,name:"transcription",kind:"message",T:oot,oneof:"value"},{no:8,name:"metrics",kind:"message",T:Xrt,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:EB,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:o0e,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:a0e,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:l0e,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:LB,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:IB,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:DB,oneof:"value"}]),pi=xe.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),rot=xe.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:i0e,repeated:!0}]),i0e=xe.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),s0e=xe.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),r0e=xe.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),oot=xe.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:aot,repeated:!0}]),aot=xe.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),EB=xe.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),o0e=xe.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),a0e=xe.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),l0e=xe.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:c0e,oneof:"value"}]),c0e=xe.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),u0e=xe.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),lot=xe.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:xe.getEnumType(d0e)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),d0e=xe.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),cot=xe.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:xe.getEnumType(h0e)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),h0e=xe.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"}]),f0e=xe.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:rne},{no:2,name:"screen",kind:"message",T:rne},{no:3,name:"resume_connection",kind:"enum",T:xe.getEnumType(s2)},{no:4,name:"disabled_codecs",kind:"message",T:uot},{no:5,name:"force_relay",kind:"enum",T:xe.getEnumType(s2)}]),rne=xe.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:xe.getEnumType(s2)}]),uot=xe.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:LN,repeated:!0},{no:2,name:"publish",kind:"message",T:LN,repeated:!0}]),g0e=xe.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),TB=xe.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),m0e=xe.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:xe.getEnumType(TB)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),p0e=xe.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),LB=xe.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:xe.getEnumType(xl)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:m0e,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:p0e,oneof:"content_header"}],{localName:"DataStream_Header"}),IB=xe.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),DB=xe.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),eu=xe.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),NB=xe.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),dot=xe.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),hot=xe.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:u1,oneof:"message"},{no:2,name:"answer",kind:"message",T:u1,oneof:"message"},{no:3,name:"trickle",kind:"message",T:ej,oneof:"message"},{no:4,name:"add_track",kind:"message",T:AB,oneof:"message"},{no:5,name:"mute",kind:"message",T:tj,oneof:"message"},{no:6,name:"subscription",kind:"message",T:HA,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:_0e,oneof:"message"},{no:8,name:"leave",kind:"message",T:UA,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:b0e,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:S0e,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:k0e,oneof:"message"},{no:13,name:"simulate",kind:"message",T:Gu,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:y0e,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:E0e,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:v0e,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:_ot,oneof:"message"}]),one=xe.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:fot,oneof:"message"},{no:2,name:"answer",kind:"message",T:u1,oneof:"message"},{no:3,name:"offer",kind:"message",T:u1,oneof:"message"},{no:4,name:"trickle",kind:"message",T:ej,oneof:"message"},{no:5,name:"update",kind:"message",T:pot,oneof:"message"},{no:6,name:"track_published",kind:"message",T:nj,oneof:"message"},{no:8,name:"leave",kind:"message",T:UA,oneof:"message"},{no:9,name:"mute",kind:"message",T:tj,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:vot,oneof:"message"},{no:11,name:"room_update",kind:"message",T:bot,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:wot,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:Sot,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:xot,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:Eot,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:mot,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:got,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:Tot,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:Dot,oneof:"message"},{no:22,name:"request_response",kind:"message",T:Not,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:Rot,oneof:"message"}]),RB=xe.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]),AB=xe.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:xe.getEnumType(Jc)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:xe.getEnumType(gr)},{no:9,name:"layers",kind:"message",T:x0,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:RB,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:xe.getEnumType(xl)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:xe.getEnumType(n0e)}]),ej=xe.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:xe.getEnumType(eu)},{no:3,name:"final",kind:"scalar",T:8}]),tj=xe.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),fot=xe.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:Jz},{no:2,name:"participant",kind:"message",T:r2},{no:3,name:"other_participants",kind:"message",T:r2,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:w0e,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:f0e},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:lot},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:LN,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),got=xe.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:w0e,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:f0e}]),nj=xe.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:vv}]),mot=xe.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),u1=xe.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9}]),pot=xe.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:r2,repeated:!0}]),HA=xe.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:u0e,repeated:!0}]),_0e=xe.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:xe.getEnumType(_b)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),v0e=xe.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:xe.getEnumType(cd),repeated:!0}]),_ot=xe.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),UA=xe.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:xe.getEnumType(ru)},{no:3,name:"action",kind:"enum",T:xe.getEnumType(vb)},{no:4,name:"regions",kind:"message",T:Lot}]),vb=xe.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),b0e=xe.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:x0,repeated:!0}]),y0e=xe.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),w0e=xe.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),vot=xe.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:i0e,repeated:!0}]),bot=xe.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:Jz}]),yot=xe.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:xe.getEnumType(TC)},{no:3,name:"score",kind:"scalar",T:2}]),wot=xe.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:yot,repeated:!0}]),Cot=xe.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:xe.getEnumType(NB)}]),Sot=xe.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:Cot,repeated:!0}]),ij=xe.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:xe.getEnumType(_b)},{no:2,name:"enabled",kind:"scalar",T:8}]),kot=xe.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:ij,repeated:!0}]),xot=xe.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:ij,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:kot,repeated:!0}]),C0e=xe.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),S0e=xe.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:C0e,repeated:!0}]),Eot=xe.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),k0e=xe.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:u1},{no:2,name:"subscription",kind:"message",T:HA},{no:3,name:"publish_tracks",kind:"message",T:nj,repeated:!0},{no:4,name:"data_channels",kind:"message",T:x0e,repeated:!0},{no:5,name:"offer",kind:"message",T:u1},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0}]),x0e=xe.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:xe.getEnumType(eu)}]),Gu=xe.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:xe.getEnumType(dot),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),E0e=xe.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),Tot=xe.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),Lot=xe.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:Iot,repeated:!0}]),Iot=xe.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),Dot=xe.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:xe.getEnumType(tot)}]),Not=xe.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:xe.getEnumType(sj)},{no:3,name:"message",kind:"scalar",T:9}]),sj=xe.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"}]),Rot=xe.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);function Aot(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var AL={exports:{}},Pot=AL.exports,ane;function Mot(){return ane||(ane=1,function(i){(function(e,t){i.exports?i.exports=t():e.log=t()})(Pot,function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),s=["trace","debug","info","warn","error"],r={},o=null;function a(_,v){var y=_[v];if(typeof y.bind=="function")return y.bind(_);try{return Function.prototype.bind.call(y,_)}catch{return function(){return Function.prototype.apply.apply(y,[_,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(_){return _==="debug"&&(_="log"),typeof console===t?!1:_==="trace"&&n?l:console[_]!==void 0?a(console,_):console.log!==void 0?a(console,"log"):e}function u(){for(var _=this.getLevel(),v=0;v<s.length;v++){var y=s[v];this[y]=v<_?e:this.methodFactory(y,_,this.name)}if(this.log=this.debug,typeof console===t&&_<this.levels.SILENT)return"No console available for logging"}function d(_){return function(){typeof console!==t&&(u.call(this),this[_].apply(this,arguments))}}function h(_,v,y){return c(_)||d.apply(this,arguments)}function g(_,v){var y=this,w,x,k,T="loglevel";typeof _=="string"?T+=":"+_:typeof _=="symbol"&&(T=void 0);function R(V){var U=(s[V]||"silent").toUpperCase();if(!(typeof window===t||!T)){try{window.localStorage[T]=U;return}catch{}try{window.document.cookie=encodeURIComponent(T)+"="+U+";"}catch{}}}function L(){var V;if(!(typeof window===t||!T)){try{V=window.localStorage[T]}catch{}if(typeof V===t)try{var U=window.document.cookie,W=encodeURIComponent(T),G=U.indexOf(W+"=");G!==-1&&(V=/^([^;]+)/.exec(U.slice(G+W.length+1))[1])}catch{}return y.levels[V]===void 0&&(V=void 0),V}}function I(){if(!(typeof window===t||!T)){try{window.localStorage.removeItem(T)}catch{}try{window.document.cookie=encodeURIComponent(T)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function A(V){var U=V;if(typeof U=="string"&&y.levels[U.toUpperCase()]!==void 0&&(U=y.levels[U.toUpperCase()]),typeof U=="number"&&U>=0&&U<=y.levels.SILENT)return U;throw new TypeError("log.setLevel() called with invalid level: "+V)}y.name=_,y.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},y.methodFactory=v||h,y.getLevel=function(){return k??x??w},y.setLevel=function(V,U){return k=A(V),U!==!1&&R(k),u.call(y)},y.setDefaultLevel=function(V){x=A(V),L()||y.setLevel(V,!1)},y.resetLevel=function(){k=null,I(),u.call(y)},y.enableAll=function(V){y.setLevel(y.levels.TRACE,V)},y.disableAll=function(V){y.setLevel(y.levels.SILENT,V)},y.rebuild=function(){if(o!==y&&(w=A(o.getLevel())),u.call(y),o===y)for(var V in r)r[V].rebuild()},w=A(o?o.getLevel():"WARN");var B=L();B!=null&&(k=A(B)),u.call(y)}o=new g,o.getLogger=function(v){if(typeof v!="symbol"&&typeof v!="string"||v==="")throw new TypeError("You must supply a name when creating a logger.");var y=r[v];return y||(y=r[v]=new g(v,o.methodFactory)),y};var p=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=p),o},o.getLoggers=function(){return r},o.default=o,o})}(AL)),AL.exports}var zA=Mot(),PB;(function(i){i[i.trace=0]="trace",i[i.debug=1]="debug",i[i.info=2]="info",i[i.warn=3]="warn",i[i.error=4]="error",i[i.silent=5]="silent"})(PB||(PB={}));var yu;(function(i){i.Default="livekit",i.Room="livekit-room",i.Participant="livekit-participant",i.Track="livekit-track",i.Publication="livekit-track-publication",i.Engine="livekit-engine",i.Signal="livekit-signal",i.PCManager="livekit-pc-manager",i.PCTransport="livekit-pc-transport",i.E2EE="lk-e2ee"})(yu||(yu={}));let ti=zA.getLogger("livekit");Object.values(yu).map(i=>zA.getLogger(i));ti.setDefaultLevel(PB.info);function Sf(i){const e=zA.getLogger(i);return e.setDefaultLevel(ti.getLevel()),e}const Oot=zA.getLogger("lk-e2ee"),nC=7e3,Fot=[0,300,2*2*300,3*3*300,4*4*300,nC,nC,nC,nC,nC];class Bot{constructor(e){this._retryDelays=e!==void 0?[...e]:Fot}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const t=this._retryDelays[e.retryCount];return e.retryCount<=1?t:t+Math.random()*1e3}}function Vot(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t}function re(i,e,t,n){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?r(u.value):s(u.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}function lne(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Mg(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof lne=="function"?lne(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=i[r]&&function(o){return new Promise(function(a,l){o=i[r](o),s(a,l,o.done,o.value)})}}function s(r,o,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},o)}}var ET={exports:{}},cne;function Wot(){if(cne)return ET.exports;cne=1;var i=typeof Reflect=="object"?Reflect:null,e=i&&typeof i.apply=="function"?i.apply:function(T,R,L){return Function.prototype.apply.call(T,R,L)},t;i&&typeof i.ownKeys=="function"?t=i.ownKeys:Object.getOwnPropertySymbols?t=function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:t=function(T){return Object.getOwnPropertyNames(T)};function n(k){console&&console.warn&&console.warn(k)}var s=Number.isNaN||function(T){return T!==T};function r(){r.init.call(this)}ET.exports=r,ET.exports.once=y,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var o=10;function a(k){if(typeof k!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof k)}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(k){if(typeof k!="number"||k<0||s(k))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+k+".");o=k}}),r.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(T){if(typeof T!="number"||T<0||s(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this};function l(k){return k._maxListeners===void 0?r.defaultMaxListeners:k._maxListeners}r.prototype.getMaxListeners=function(){return l(this)},r.prototype.emit=function(T){for(var R=[],L=1;L<arguments.length;L++)R.push(arguments[L]);var I=T==="error",A=this._events;if(A!==void 0)I=I&&A.error===void 0;else if(!I)return!1;if(I){var B;if(R.length>0&&(B=R[0]),B instanceof Error)throw B;var V=new Error("Unhandled error."+(B?" ("+B.message+")":""));throw V.context=B,V}var U=A[T];if(U===void 0)return!1;if(typeof U=="function")e(U,this,R);else for(var W=U.length,G=p(U,W),L=0;L<W;++L)e(G[L],this,R);return!0};function c(k,T,R,L){var I,A,B;if(a(R),A=k._events,A===void 0?(A=k._events=Object.create(null),k._eventsCount=0):(A.newListener!==void 0&&(k.emit("newListener",T,R.listener?R.listener:R),A=k._events),B=A[T]),B===void 0)B=A[T]=R,++k._eventsCount;else if(typeof B=="function"?B=A[T]=L?[R,B]:[B,R]:L?B.unshift(R):B.push(R),I=l(k),I>0&&B.length>I&&!B.warned){B.warned=!0;var V=new Error("Possible EventEmitter memory leak detected. "+B.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");V.name="MaxListenersExceededWarning",V.emitter=k,V.type=T,V.count=B.length,n(V)}return k}r.prototype.addListener=function(T,R){return c(this,T,R,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(T,R){return c(this,T,R,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(k,T,R){var L={fired:!1,wrapFn:void 0,target:k,type:T,listener:R},I=u.bind(L);return I.listener=R,L.wrapFn=I,I}r.prototype.once=function(T,R){return a(R),this.on(T,d(this,T,R)),this},r.prototype.prependOnceListener=function(T,R){return a(R),this.prependListener(T,d(this,T,R)),this},r.prototype.removeListener=function(T,R){var L,I,A,B,V;if(a(R),I=this._events,I===void 0)return this;if(L=I[T],L===void 0)return this;if(L===R||L.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete I[T],I.removeListener&&this.emit("removeListener",T,L.listener||R));else if(typeof L!="function"){for(A=-1,B=L.length-1;B>=0;B--)if(L[B]===R||L[B].listener===R){V=L[B].listener,A=B;break}if(A<0)return this;A===0?L.shift():_(L,A),L.length===1&&(I[T]=L[0]),I.removeListener!==void 0&&this.emit("removeListener",T,V||R)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(T){var R,L,I;if(L=this._events,L===void 0)return this;if(L.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):L[T]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete L[T]),this;if(arguments.length===0){var A=Object.keys(L),B;for(I=0;I<A.length;++I)B=A[I],B!=="removeListener"&&this.removeAllListeners(B);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=L[T],typeof R=="function")this.removeListener(T,R);else if(R!==void 0)for(I=R.length-1;I>=0;I--)this.removeListener(T,R[I]);return this};function h(k,T,R){var L=k._events;if(L===void 0)return[];var I=L[T];return I===void 0?[]:typeof I=="function"?R?[I.listener||I]:[I]:R?v(I):p(I,I.length)}r.prototype.listeners=function(T){return h(this,T,!0)},r.prototype.rawListeners=function(T){return h(this,T,!1)},r.listenerCount=function(k,T){return typeof k.listenerCount=="function"?k.listenerCount(T):g.call(k,T)},r.prototype.listenerCount=g;function g(k){var T=this._events;if(T!==void 0){var R=T[k];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}r.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function p(k,T){for(var R=new Array(T),L=0;L<T;++L)R[L]=k[L];return R}function _(k,T){for(;T+1<k.length;T++)k[T]=k[T+1];k.pop()}function v(k){for(var T=new Array(k.length),R=0;R<T.length;++R)T[R]=k[R].listener||k[R];return T}function y(k,T){return new Promise(function(R,L){function I(B){k.removeListener(T,A),L(B)}function A(){typeof k.removeListener=="function"&&k.removeListener("error",I),R([].slice.call(arguments))}x(k,T,A,{once:!0}),T!=="error"&&w(k,I,{once:!0})})}function w(k,T,R){typeof k.on=="function"&&x(k,"error",T,R)}function x(k,T,R,L){if(typeof k.on=="function")L.once?k.once(T,R):k.on(T,R);else if(typeof k.addEventListener=="function")k.addEventListener(T,function I(A){L.once&&k.removeEventListener(T,I),R(A)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof k)}return ET.exports}var qd=Wot();let T0e=!0,L0e=!0;function PL(i,e,t){const n=i.match(e);return n&&n.length>=t&&parseInt(n[t],10)}function V1(i,e,t){if(!i.RTCPeerConnection)return;const n=i.RTCPeerConnection.prototype,s=n.addEventListener;n.addEventListener=function(o,a){if(o!==e)return s.apply(this,arguments);const l=c=>{const u=t(c);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,l),s.apply(this,[o,l])};const r=n.removeEventListener;n.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return r.apply(this,arguments);if(!this._eventMap[e].has(a))return r.apply(this,arguments);const l=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,r.apply(this,[o,l])},Object.defineProperty(n,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function Hot(i){return typeof i!="boolean"?new Error("Argument type: "+typeof i+". Please use a boolean."):(T0e=i,i?"adapter.js logging disabled":"adapter.js logging enabled")}function Uot(i){return typeof i!="boolean"?new Error("Argument type: "+typeof i+". Please use a boolean."):(L0e=!i,"adapter.js deprecation warnings "+(i?"disabled":"enabled"))}function I0e(){if(typeof window=="object"){if(T0e)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function rj(i,e){L0e&&console.warn(i+" is deprecated, please use "+e+" instead.")}function zot(i){const e={browser:null,version:null};if(typeof i>"u"||!i.navigator||!i.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:t}=i;if(t.userAgentData&&t.userAgentData.brands){const n=t.userAgentData.brands.find(s=>s.brand==="Chromium");if(n)return{browser:"chrome",version:parseInt(n.version,10)}}if(t.mozGetUserMedia)e.browser="firefox",e.version=PL(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||i.isSecureContext===!1&&i.webkitRTCPeerConnection)e.browser="chrome",e.version=PL(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(i.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=PL(t.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=i.RTCRtpTransceiver&&"currentDirection"in i.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function une(i){return Object.prototype.toString.call(i)==="[object Object]"}function D0e(i){return une(i)?Object.keys(i).reduce(function(e,t){const n=une(i[t]),s=n?D0e(i[t]):i[t],r=n&&!Object.keys(s).length;return s===void 0||r?e:Object.assign(e,{[t]:s})},{}):i}function MB(i,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(n=>{n.endsWith("Id")?MB(i,i.get(e[n]),t):n.endsWith("Ids")&&e[n].forEach(s=>{MB(i,i.get(s),t)})}))}function dne(i,e,t){const n=t?"outbound-rtp":"inbound-rtp",s=new Map;if(e===null)return s;const r=[];return i.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&r.push(o)}),r.forEach(o=>{i.forEach(a=>{a.type===n&&a.trackId===o.id&&MB(i,a,s)})}),s}const hne=I0e;function N0e(i,e){const t=i&&i.navigator;if(!t.mediaDevices)return;const n=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const l={};return Object.keys(a).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const u=typeof a[c]=="object"?a[c]:{ideal:a[c]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(h,g){return h?h+g.charAt(0).toUpperCase()+g.slice(1):g==="deviceId"?"sourceId":g};if(u.ideal!==void 0){l.optional=l.optional||[];let h={};typeof u.ideal=="number"?(h[d("min",c)]=u.ideal,l.optional.push(h),h={},h[d("max",c)]=u.ideal,l.optional.push(h)):(h[d("",c)]=u.ideal,l.optional.push(h))}u.exact!==void 0&&typeof u.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[d("",c)]=u.exact):["min","max"].forEach(h=>{u[h]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[d(h,c)]=u[h])})}),a.advanced&&(l.optional=(l.optional||[]).concat(a.advanced)),l},s=function(a,l){if(e.version>=61)return l(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const c=function(u,d,h){d in u&&!(h in u)&&(u[h]=u[d],delete u[d])};a=JSON.parse(JSON.stringify(a)),c(a.audio,"autoGainControl","googAutoGainControl"),c(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=n(a.audio)}if(a&&typeof a.video=="object"){let c=a.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const u=e.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let d;if(c.exact==="environment"||c.ideal==="environment"?d=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(d=["front"]),d)return t.mediaDevices.enumerateDevices().then(h=>{h=h.filter(p=>p.kind==="videoinput");let g=h.find(p=>d.some(_=>p.label.toLowerCase().includes(_)));return!g&&h.length&&d.includes("back")&&(g=h[h.length-1]),g&&(a.video.deviceId=c.exact?{exact:g.deviceId}:{ideal:g.deviceId}),a.video=n(a.video),hne("chrome: "+JSON.stringify(a)),l(a)})}a.video=n(a.video)}return hne("chrome: "+JSON.stringify(a)),l(a)},r=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,l,c){s(a,u=>{t.webkitGetUserMedia(u,l,d=>{c&&c(r(d))})})};if(t.getUserMedia=o.bind(t),t.mediaDevices.getUserMedia){const a=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(l){return s(l,c=>a(c).then(u=>{if(c.audio&&!u.getAudioTracks().length||c.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(r(u))))}}}function R0e(i){i.MediaStream=i.MediaStream||i.webkitMediaStream}function A0e(i){if(typeof i=="object"&&i.RTCPeerConnection&&!("ontrack"in i.RTCPeerConnection.prototype)){Object.defineProperty(i.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=i.RTCPeerConnection.prototype.setRemoteDescription;i.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",s=>{let r;i.RTCPeerConnection.prototype.getReceivers?r=this.getReceivers().find(a=>a.track&&a.track.id===s.track.id):r={track:s.track};const o=new Event("track");o.track=s.track,o.receiver=r,o.transceiver={receiver:r},o.streams=[n.stream],this.dispatchEvent(o)}),n.stream.getTracks().forEach(s=>{let r;i.RTCPeerConnection.prototype.getReceivers?r=this.getReceivers().find(a=>a.track&&a.track.id===s.id):r={track:s};const o=new Event("track");o.track=s,o.receiver=r,o.transceiver={receiver:r},o.streams=[n.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else V1(i,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function P0e(i){if(typeof i=="object"&&i.RTCPeerConnection&&!("getSenders"in i.RTCPeerConnection.prototype)&&"createDTMFSender"in i.RTCPeerConnection.prototype){const e=function(s,r){return{track:r,get dtmf(){return this._dtmf===void 0&&(r.kind==="audio"?this._dtmf=s.createDTMFSender(r):this._dtmf=null),this._dtmf},_pc:s}};if(!i.RTCPeerConnection.prototype.getSenders){i.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const s=i.RTCPeerConnection.prototype.addTrack;i.RTCPeerConnection.prototype.addTrack=function(a,l){let c=s.apply(this,arguments);return c||(c=e(this,a),this._senders.push(c)),c};const r=i.RTCPeerConnection.prototype.removeTrack;i.RTCPeerConnection.prototype.removeTrack=function(a){r.apply(this,arguments);const l=this._senders.indexOf(a);l!==-1&&this._senders.splice(l,1)}}const t=i.RTCPeerConnection.prototype.addStream;i.RTCPeerConnection.prototype.addStream=function(r){this._senders=this._senders||[],t.apply(this,[r]),r.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const n=i.RTCPeerConnection.prototype.removeStream;i.RTCPeerConnection.prototype.removeStream=function(r){this._senders=this._senders||[],n.apply(this,[r]),r.getTracks().forEach(o=>{const a=this._senders.find(l=>l.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof i=="object"&&i.RTCPeerConnection&&"getSenders"in i.RTCPeerConnection.prototype&&"createDTMFSender"in i.RTCPeerConnection.prototype&&i.RTCRtpSender&&!("dtmf"in i.RTCRtpSender.prototype)){const e=i.RTCPeerConnection.prototype.getSenders;i.RTCPeerConnection.prototype.getSenders=function(){const n=e.apply(this,[]);return n.forEach(s=>s._pc=this),n},Object.defineProperty(i.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function M0e(i){if(!(typeof i=="object"&&i.RTCPeerConnection&&i.RTCRtpSender&&i.RTCRtpReceiver))return;if(!("getStats"in i.RTCRtpSender.prototype)){const t=i.RTCPeerConnection.prototype.getSenders;t&&(i.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(o=>o._pc=this),r});const n=i.RTCPeerConnection.prototype.addTrack;n&&(i.RTCPeerConnection.prototype.addTrack=function(){const r=n.apply(this,arguments);return r._pc=this,r}),i.RTCRtpSender.prototype.getStats=function(){const r=this;return this._pc.getStats().then(o=>dne(o,r.track,!0))}}if(!("getStats"in i.RTCRtpReceiver.prototype)){const t=i.RTCPeerConnection.prototype.getReceivers;t&&(i.RTCPeerConnection.prototype.getReceivers=function(){const s=t.apply(this,[]);return s.forEach(r=>r._pc=this),s}),V1(i,"track",n=>(n.receiver._pc=n.srcElement,n)),i.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(r=>dne(r,s.track,!1))}}if(!("getStats"in i.RTCRtpSender.prototype&&"getStats"in i.RTCRtpReceiver.prototype))return;const e=i.RTCPeerConnection.prototype.getStats;i.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof i.MediaStreamTrack){const n=arguments[0];let s,r,o;return this.getSenders().forEach(a=>{a.track===n&&(s?o=!0:s=a)}),this.getReceivers().forEach(a=>(a.track===n&&(r?o=!0:r=a),a.track===n)),o||s&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function O0e(i){i.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=i.RTCPeerConnection.prototype.addTrack;i.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const l=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(l)===-1&&this._shimmedLocalStreams[a.id].push(l):this._shimmedLocalStreams[a.id]=[a,l],l};const t=i.RTCPeerConnection.prototype.addStream;i.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(c=>{if(this.getSenders().find(d=>d.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();t.apply(this,arguments);const l=this.getSenders().filter(c=>a.indexOf(c)===-1);this._shimmedLocalStreams[o.id]=[o].concat(l)};const n=i.RTCPeerConnection.prototype.removeStream;i.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],n.apply(this,arguments)};const s=i.RTCPeerConnection.prototype.removeTrack;i.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const l=this._shimmedLocalStreams[a].indexOf(o);l!==-1&&this._shimmedLocalStreams[a].splice(l,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),s.apply(this,arguments)}}function F0e(i,e){if(!i.RTCPeerConnection)return;if(i.RTCPeerConnection.prototype.addTrack&&e.version>=65)return O0e(i);const t=i.RTCPeerConnection.prototype.getLocalStreams;i.RTCPeerConnection.prototype.getLocalStreams=function(){const u=t.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const n=i.RTCPeerConnection.prototype.addStream;i.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(g=>g.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new i.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}n.apply(this,[u])};const s=i.RTCPeerConnection.prototype.removeStream;i.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},i.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const h=[].slice.call(arguments,1);if(h.length!==1||!h[0].getTracks().find(_=>_===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(_=>_.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const p=this._streams[d.id];if(p)p.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const _=new i.MediaStream([u]);this._streams[d.id]=_,this._reverseStreams[_.id]=d,this.addStream(_)}return this.getSenders().find(_=>_.track===u)};function r(c,u){let d=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(h=>{const g=c._reverseStreams[h],p=c._streams[g.id];d=d.replace(new RegExp(p.id,"g"),g.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function o(c,u){let d=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(h=>{const g=c._reverseStreams[h],p=c._streams[g.id];d=d.replace(new RegExp(g.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(c){const u=i.RTCPeerConnection.prototype[c],d={[c](){const h=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[p=>{const _=r(this,p);h[0].apply(null,[_])},p=>{h[1]&&h[1].apply(null,p)},arguments[2]]):u.apply(this,arguments).then(p=>r(this,p))}};i.RTCPeerConnection.prototype[c]=d[c]});const a=i.RTCPeerConnection.prototype.setLocalDescription;i.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};const l=Object.getOwnPropertyDescriptor(i.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(i.RTCPeerConnection.prototype,"localDescription",{get(){const c=l.get.apply(this);return c.type===""?c:r(this,c)}}),i.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let h;Object.keys(this._streams).forEach(g=>{this._streams[g].getTracks().find(_=>u.track===_)&&(h=this._streams[g])}),h&&(h.getTracks().length===1?this.removeStream(this._reverseStreams[h.id]):h.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function OB(i,e){!i.RTCPeerConnection&&i.webkitRTCPeerConnection&&(i.RTCPeerConnection=i.webkitRTCPeerConnection),i.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const n=i.RTCPeerConnection.prototype[t],s={[t](){return arguments[0]=new(t==="addIceCandidate"?i.RTCIceCandidate:i.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};i.RTCPeerConnection.prototype[t]=s[t]})}function B0e(i,e){V1(i,"negotiationneeded",t=>{const n=t.target;if(!((e.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return t})}var fne=Object.freeze({__proto__:null,fixNegotiationNeeded:B0e,shimAddTrackRemoveTrack:F0e,shimAddTrackRemoveTrackWithNative:O0e,shimGetSendersWithDtmf:P0e,shimGetUserMedia:N0e,shimMediaStream:R0e,shimOnTrack:A0e,shimPeerConnection:OB,shimSenderReceiverGetStats:M0e});function V0e(i,e){const t=i&&i.navigator,n=i&&i.MediaStreamTrack;if(t.getUserMedia=function(s,r,o){rj("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(s).then(r,o)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const s=function(o,a,l){a in o&&!(l in o)&&(o[l]=o[a],delete o[a])},r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),s(o.audio,"autoGainControl","mozAutoGainControl"),s(o.audio,"noiseSuppression","mozNoiseSuppression")),r(o)},n&&n.prototype.getSettings){const o=n.prototype.getSettings;n.prototype.getSettings=function(){const a=o.apply(this,arguments);return s(a,"mozAutoGainControl","autoGainControl"),s(a,"mozNoiseSuppression","noiseSuppression"),a}}if(n&&n.prototype.applyConstraints){const o=n.prototype.applyConstraints;n.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),s(a,"autoGainControl","mozAutoGainControl"),s(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function jot(i,e){i.navigator.mediaDevices&&"getDisplayMedia"in i.navigator.mediaDevices||i.navigator.mediaDevices&&(i.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Promise.reject(s)}return n.video===!0?n.video={mediaSource:e}:n.video.mediaSource=e,i.navigator.mediaDevices.getUserMedia(n)})}function W0e(i){typeof i=="object"&&i.RTCTrackEvent&&"receiver"in i.RTCTrackEvent.prototype&&!("transceiver"in i.RTCTrackEvent.prototype)&&Object.defineProperty(i.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function FB(i,e){if(typeof i!="object"||!(i.RTCPeerConnection||i.mozRTCPeerConnection))return;!i.RTCPeerConnection&&i.mozRTCPeerConnection&&(i.RTCPeerConnection=i.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const r=i.RTCPeerConnection.prototype[s],o={[s](){return arguments[0]=new(s==="addIceCandidate"?i.RTCIceCandidate:i.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};i.RTCPeerConnection.prototype[s]=o[s]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=i.RTCPeerConnection.prototype.getStats;i.RTCPeerConnection.prototype.getStats=function(){const[r,o,a]=arguments;return n.apply(this,[r||null]).then(l=>{if(e.version<53&&!o)try{l.forEach(c=>{c.type=t[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;l.forEach((u,d)=>{l.set(d,Object.assign({},u,{type:t[u.type]||u.type}))})}return l}).then(o,a)}}function H0e(i){if(!(typeof i=="object"&&i.RTCPeerConnection&&i.RTCRtpSender)||i.RTCRtpSender&&"getStats"in i.RTCRtpSender.prototype)return;const e=i.RTCPeerConnection.prototype.getSenders;e&&(i.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(r=>r._pc=this),s});const t=i.RTCPeerConnection.prototype.addTrack;t&&(i.RTCPeerConnection.prototype.addTrack=function(){const s=t.apply(this,arguments);return s._pc=this,s}),i.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function U0e(i){if(!(typeof i=="object"&&i.RTCPeerConnection&&i.RTCRtpSender)||i.RTCRtpSender&&"getStats"in i.RTCRtpReceiver.prototype)return;const e=i.RTCPeerConnection.prototype.getReceivers;e&&(i.RTCPeerConnection.prototype.getReceivers=function(){const n=e.apply(this,[]);return n.forEach(s=>s._pc=this),n}),V1(i,"track",t=>(t.receiver._pc=t.srcElement,t)),i.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function z0e(i){!i.RTCPeerConnection||"removeStream"in i.RTCPeerConnection.prototype||(i.RTCPeerConnection.prototype.removeStream=function(t){rj("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&t.getTracks().includes(n.track)&&this.removeTrack(n)})})}function j0e(i){i.DataChannel&&!i.RTCDataChannel&&(i.RTCDataChannel=i.DataChannel)}function $0e(i){if(!(typeof i=="object"&&i.RTCPeerConnection))return;const e=i.RTCPeerConnection.prototype.addTransceiver;e&&(i.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let n=arguments[1]&&arguments[1].sendEncodings;n===void 0&&(n=[]),n=[...n];const s=n.length>0;s&&n.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const r=e.apply(this,arguments);if(s){const{sender:o}=r,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=n,o.sendEncodings=n,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return r})}function q0e(i){if(!(typeof i=="object"&&i.RTCRtpSender))return;const e=i.RTCRtpSender.prototype.getParameters;e&&(i.RTCRtpSender.prototype.getParameters=function(){const n=e.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function K0e(i){if(!(typeof i=="object"&&i.RTCPeerConnection))return;const e=i.RTCPeerConnection.prototype.createOffer;i.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function G0e(i){if(!(typeof i=="object"&&i.RTCPeerConnection))return;const e=i.RTCPeerConnection.prototype.createAnswer;i.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var gne=Object.freeze({__proto__:null,shimAddTransceiver:$0e,shimCreateAnswer:G0e,shimCreateOffer:K0e,shimGetDisplayMedia:jot,shimGetParameters:q0e,shimGetUserMedia:V0e,shimOnTrack:W0e,shimPeerConnection:FB,shimRTCDataChannel:j0e,shimReceiverGetStats:U0e,shimRemoveStream:z0e,shimSenderGetStats:H0e});function Y0e(i){if(!(typeof i!="object"||!i.RTCPeerConnection)){if("getLocalStreams"in i.RTCPeerConnection.prototype||(i.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in i.RTCPeerConnection.prototype)){const e=i.RTCPeerConnection.prototype.addTrack;i.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(s=>e.call(this,s,n)),n.getVideoTracks().forEach(s=>e.call(this,s,n))},i.RTCPeerConnection.prototype.addTrack=function(n){for(var s=arguments.length,r=new Array(s>1?s-1:0),o=1;o<s;o++)r[o-1]=arguments[o];return r&&r.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in i.RTCPeerConnection.prototype||(i.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(t);if(n===-1)return;this._localStreams.splice(n,1);const s=t.getTracks();this.getSenders().forEach(r=>{s.includes(r.track)&&this.removeTrack(r)})})}}function Q0e(i){if(!(typeof i!="object"||!i.RTCPeerConnection)&&("getRemoteStreams"in i.RTCPeerConnection.prototype||(i.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in i.RTCPeerConnection.prototype))){Object.defineProperty(i.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(s=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(s))return;this._remoteStreams.push(s);const r=new Event("addstream");r.stream=s,this.dispatchEvent(r)})})}});const e=i.RTCPeerConnection.prototype.setRemoteDescription;i.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(r=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(r)>=0)return;n._remoteStreams.push(r);const o=new Event("addstream");o.stream=r,n.dispatchEvent(o)})}),e.apply(n,arguments)}}}function X0e(i){if(typeof i!="object"||!i.RTCPeerConnection)return;const e=i.RTCPeerConnection.prototype,t=e.createOffer,n=e.createAnswer,s=e.setLocalDescription,r=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],h=t.apply(this,[d]);return u?(h.then(c,u),Promise.resolve()):h},e.createAnswer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],h=n.apply(this,[d]);return u?(h.then(c,u),Promise.resolve()):h};let a=function(l,c,u){const d=s.apply(this,[l]);return u?(d.then(c,u),Promise.resolve()):d};e.setLocalDescription=a,a=function(l,c,u){const d=r.apply(this,[l]);return u?(d.then(c,u),Promise.resolve()):d},e.setRemoteDescription=a,a=function(l,c,u){const d=o.apply(this,[l]);return u?(d.then(c,u),Promise.resolve()):d},e.addIceCandidate=a}function Z0e(i){const e=i&&i.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,n=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=s=>n(J0e(s))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(n,s,r){e.mediaDevices.getUserMedia(n).then(s,r)}).bind(e))}function J0e(i){return i&&i.video!==void 0?Object.assign({},i,{video:D0e(i.video)}):i}function e1e(i){if(!i.RTCPeerConnection)return;const e=i.RTCPeerConnection;i.RTCPeerConnection=function(n,s){if(n&&n.iceServers){const r=[];for(let o=0;o<n.iceServers.length;o++){let a=n.iceServers[o];a.urls===void 0&&a.url?(rj("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,r.push(a)):r.push(n.iceServers[o])}n.iceServers=r}return new e(n,s)},i.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(i.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function t1e(i){typeof i=="object"&&i.RTCTrackEvent&&"receiver"in i.RTCTrackEvent.prototype&&!("transceiver"in i.RTCTrackEvent.prototype)&&Object.defineProperty(i.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function n1e(i){const e=i.RTCPeerConnection.prototype.createOffer;i.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):n.offerToReceiveAudio===!0&&!s&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const r=this.getTransceivers().find(o=>o.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):n.offerToReceiveVideo===!0&&!r&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function i1e(i){typeof i!="object"||i.AudioContext||(i.AudioContext=i.webkitAudioContext)}var mne=Object.freeze({__proto__:null,shimAudioContext:i1e,shimCallbacksAPI:X0e,shimConstraints:J0e,shimCreateOfferLegacy:n1e,shimGetUserMedia:Z0e,shimLocalStreamsAPI:Y0e,shimRTCIceServerUrls:e1e,shimRemoteStreamsAPI:Q0e,shimTrackEventTransceiver:t1e}),q6={exports:{}},pne;function $ot(){return pne||(pne=1,function(i){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split(`
`).map(n=>n.trim())},e.splitSections=function(t){return t.split(`
m=`).map((s,r)=>(r>0?"m="+s:s).trim()+`\r
`)},e.getDescription=function(t){const n=e.splitSections(t);return n&&n[0]},e.getMediaSections=function(t){const n=e.splitSections(t);return n.shift(),n},e.matchPrefix=function(t,n){return e.splitLines(t).filter(s=>s.indexOf(n)===0)},e.parseCandidate=function(t){let n;t.indexOf("a=candidate:")===0?n=t.substring(12).split(" "):n=t.substring(10).split(" ");const s={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let r=8;r<n.length;r+=2)switch(n[r]){case"raddr":s.relatedAddress=n[r+1];break;case"rport":s.relatedPort=parseInt(n[r+1],10);break;case"tcptype":s.tcpType=n[r+1];break;case"ufrag":s.ufrag=n[r+1],s.usernameFragment=n[r+1];break;default:s[n[r]]===void 0&&(s[n[r]]=n[r+1]);break}return s},e.writeCandidate=function(t){const n=[];n.push(t.foundation);const s=t.component;s==="rtp"?n.push(1):s==="rtcp"?n.push(2):n.push(s),n.push(t.protocol.toUpperCase()),n.push(t.priority),n.push(t.address||t.ip),n.push(t.port);const r=t.type;return n.push("typ"),n.push(r),r!=="host"&&t.relatedAddress&&t.relatedPort&&(n.push("raddr"),n.push(t.relatedAddress),n.push("rport"),n.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(n.push("ufrag"),n.push(t.usernameFragment||t.ufrag)),"candidate:"+n.join(" ")},e.parseIceOptions=function(t){return t.substring(14).split(" ")},e.parseRtpMap=function(t){let n=t.substring(9).split(" ");const s={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),s.name=n[0],s.clockRate=parseInt(n[1],10),s.channels=n.length===3?parseInt(n[2],10):1,s.numChannels=s.channels,s},e.writeRtpMap=function(t){let n=t.payloadType;t.preferredPayloadType!==void 0&&(n=t.preferredPayloadType);const s=t.channels||t.numChannels||1;return"a=rtpmap:"+n+" "+t.name+"/"+t.clockRate+(s!==1?"/"+s:"")+`\r
`},e.parseExtmap=function(t){const n=t.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`},e.parseFmtp=function(t){const n={};let s;const r=t.substring(t.indexOf(" ")+1).split(";");for(let o=0;o<r.length;o++)s=r[o].trim().split("="),n[s[0].trim()]=s[1];return n},e.writeFmtp=function(t){let n="",s=t.payloadType;if(t.preferredPayloadType!==void 0&&(s=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const r=[];Object.keys(t.parameters).forEach(o=>{t.parameters[o]!==void 0?r.push(o+"="+t.parameters[o]):r.push(o)}),n+="a=fmtp:"+s+" "+r.join(";")+`\r
`}return n},e.parseRtcpFb=function(t){const n=t.substring(t.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},e.writeRtcpFb=function(t){let n="",s=t.payloadType;return t.preferredPayloadType!==void 0&&(s=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(r=>{n+="a=rtcp-fb:"+s+" "+r.type+(r.parameter&&r.parameter.length?" "+r.parameter:"")+`\r
`}),n},e.parseSsrcMedia=function(t){const n=t.indexOf(" "),s={ssrc:parseInt(t.substring(7,n),10)},r=t.indexOf(":",n);return r>-1?(s.attribute=t.substring(n+1,r),s.value=t.substring(r+1)):s.attribute=t.substring(n+1),s},e.parseSsrcGroup=function(t){const n=t.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(s=>parseInt(s,10))}},e.getMid=function(t){const n=e.matchPrefix(t,"a=mid:")[0];if(n)return n.substring(6)},e.parseFingerprint=function(t){const n=t.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},e.getDtlsParameters=function(t,n){return{role:"auto",fingerprints:e.matchPrefix(t+n,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,n){let s="a=setup:"+n+`\r
`;return t.fingerprints.forEach(r=>{s+="a=fingerprint:"+r.algorithm+" "+r.value+`\r
`}),s},e.parseCryptoLine=function(t){const n=t.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const n=t.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,n){return e.matchPrefix(t+n,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,n){const s=e.matchPrefix(t+n,"a=ice-ufrag:")[0],r=e.matchPrefix(t+n,"a=ice-pwd:")[0];return s&&r?{usernameFragment:s.substring(12),password:r.substring(10)}:null},e.writeIceParameters=function(t){let n="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(n+=`a=ice-lite\r
`),n},e.parseRtpParameters=function(t){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=e.splitLines(t)[0].split(" ");n.profile=r[2];for(let a=3;a<r.length;a++){const l=r[a],c=e.matchPrefix(t,"a=rtpmap:"+l+" ")[0];if(c){const u=e.parseRtpMap(c),d=e.matchPrefix(t,"a=fmtp:"+l+" ");switch(u.parameters=d.length?e.parseFmtp(d[0]):{},u.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+l+" ").map(e.parseRtcpFb),n.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(u.name.toUpperCase());break}}}e.matchPrefix(t,"a=extmap:").forEach(a=>{n.headerExtensions.push(e.parseExtmap(a))});const o=e.matchPrefix(t,"a=rtcp-fb:* ").map(e.parseRtcpFb);return n.codecs.forEach(a=>{o.forEach(l=>{a.rtcpFeedback.find(u=>u.type===l.type&&u.parameter===l.parameter)||a.rtcpFeedback.push(l)})}),n},e.writeRtpDescription=function(t,n){let s="";s+="m="+t+" ",s+=n.codecs.length>0?"9":"0",s+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",s+=n.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,s+=`c=IN IP4 0.0.0.0\r
`,s+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(o=>{s+=e.writeRtpMap(o),s+=e.writeFmtp(o),s+=e.writeRtcpFb(o)});let r=0;return n.codecs.forEach(o=>{o.maxptime>r&&(r=o.maxptime)}),r>0&&(s+="a=maxptime:"+r+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(o=>{s+=e.writeExtmap(o)}),s},e.parseRtpEncodingParameters=function(t){const n=[],s=e.parseRtpParameters(t),r=s.fecMechanisms.indexOf("RED")!==-1,o=s.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(t,"a=ssrc:").map(h=>e.parseSsrcMedia(h)).filter(h=>h.attribute==="cname"),l=a.length>0&&a[0].ssrc;let c;const u=e.matchPrefix(t,"a=ssrc-group:FID").map(h=>h.substring(17).split(" ").map(p=>parseInt(p,10)));u.length>0&&u[0].length>1&&u[0][0]===l&&(c=u[0][1]),s.codecs.forEach(h=>{if(h.name.toUpperCase()==="RTX"&&h.parameters.apt){let g={ssrc:l,codecPayloadType:parseInt(h.parameters.apt,10)};l&&c&&(g.rtx={ssrc:c}),n.push(g),r&&(g=JSON.parse(JSON.stringify(g)),g.fec={ssrc:l,mechanism:o?"red+ulpfec":"red"},n.push(g))}}),n.length===0&&l&&n.push({ssrc:l});let d=e.matchPrefix(t,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-50*40*8:d=void 0,n.forEach(h=>{h.maxBitrate=d})),n},e.parseRtcpParameters=function(t){const n={},s=e.matchPrefix(t,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];s&&(n.cname=s.value,n.ssrc=s.ssrc);const r=e.matchPrefix(t,"a=rtcp-rsize");n.reducedSize=r.length>0,n.compound=r.length===0;const o=e.matchPrefix(t,"a=rtcp-mux");return n.mux=o.length>0,n},e.writeRtcpParameters=function(t){let n="";return t.reducedSize&&(n+=`a=rtcp-rsize\r
`),t.mux&&(n+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(n+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),n},e.parseMsid=function(t){let n;const s=e.matchPrefix(t,"a=msid:");if(s.length===1)return n=s[0].substring(7).split(" "),{stream:n[0],track:n[1]};const r=e.matchPrefix(t,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(r.length>0)return n=r[0].value.split(" "),{stream:n[0],track:n[1]}},e.parseSctpDescription=function(t){const n=e.parseMLine(t),s=e.matchPrefix(t,"a=max-message-size:");let r;s.length>0&&(r=parseInt(s[0].substring(19),10)),isNaN(r)&&(r=65536);const o=e.matchPrefix(t,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:n.fmt,maxMessageSize:r};const a=e.matchPrefix(t,"a=sctpmap:");if(a.length>0){const l=a[0].substring(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:r}}},e.writeSctpDescription=function(t,n){let s=[];return t.protocol!=="DTLS/SCTP"?s=["m="+t.kind+" 9 "+t.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:s=["m="+t.kind+" 9 "+t.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&s.push("a=max-message-size:"+n.maxMessageSize+`\r
`),s.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(t,n,s){let r;const o=n!==void 0?n:2;return t?r=t:r=e.generateSessionId(),`v=0\r
o=`+(s||"thisisadapterortc")+" "+r+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(t,n){const s=e.splitLines(t);for(let r=0;r<s.length;r++)switch(s[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return s[r].substring(2)}return n?e.getDirection(n):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substring(2)},e.isRejected=function(t){return t.split(" ",2)[1]==="0"},e.parseMLine=function(t){const s=e.splitLines(t)[0].substring(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},e.parseOLine=function(t){const s=e.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},e.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const n=e.splitLines(t);for(let s=0;s<n.length;s++)if(n[s].length<2||n[s].charAt(1)!=="=")return!1;return!0},i.exports=e}(q6)),q6.exports}var s1e=$ot(),bb=Aot(s1e),qot=rrt({__proto__:null,default:bb},[s1e]);function ML(i){if(!i.RTCIceCandidate||i.RTCIceCandidate&&"foundation"in i.RTCIceCandidate.prototype)return;const e=i.RTCIceCandidate;i.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substring(2)),n.candidate&&n.candidate.length){const s=new e(n),r=bb.parseCandidate(n.candidate);for(const o in r)o in s||Object.defineProperty(s,o,{value:r[o]});return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new e(n)},i.RTCIceCandidate.prototype=e.prototype,V1(i,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new i.RTCIceCandidate(t.candidate),writable:"false"}),t))}function BB(i){!i.RTCIceCandidate||i.RTCIceCandidate&&"relayProtocol"in i.RTCIceCandidate.prototype||V1(i,"icecandidate",e=>{if(e.candidate){const t=bb.parseCandidate(e.candidate.candidate);t.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function OL(i,e){if(!i.RTCPeerConnection)return;"sctp"in i.RTCPeerConnection.prototype||Object.defineProperty(i.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(a){if(!a||!a.sdp)return!1;const l=bb.splitSections(a.sdp);return l.shift(),l.some(c=>{const u=bb.parseMLine(c);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},n=function(a){const l=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;const c=parseInt(l[1],10);return c!==c?-1:c},s=function(a){let l=65536;return e.browser==="firefox"&&(e.version<57?a===-1?l=16384:l=2147483637:e.version<60?l=e.version===57?65535:65536:l=2147483637),l},r=function(a,l){let c=65536;e.browser==="firefox"&&e.version===57&&(c=65535);const u=bb.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?c=parseInt(u[0].substring(19),10):e.browser==="firefox"&&l!==-1&&(c=2147483637),c},o=i.RTCPeerConnection.prototype.setRemoteDescription;i.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:l}=this.getConfiguration();l==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const l=n(arguments[0]),c=s(l),u=r(arguments[0],l);let d;c===0&&u===0?d=Number.POSITIVE_INFINITY:c===0||u===0?d=Math.max(c,u):d=Math.min(c,u);const h={};Object.defineProperty(h,"maxMessageSize",{get(){return d}}),this._sctp=h}return o.apply(this,arguments)}}function FL(i){if(!(i.RTCPeerConnection&&"createDataChannel"in i.RTCPeerConnection.prototype))return;function e(n,s){const r=n.send;n.send=function(){const a=arguments[0],l=a.length||a.size||a.byteLength;if(n.readyState==="open"&&s.sctp&&l>s.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+s.sctp.maxMessageSize+" bytes)");return r.apply(n,arguments)}}const t=i.RTCPeerConnection.prototype.createDataChannel;i.RTCPeerConnection.prototype.createDataChannel=function(){const s=t.apply(this,arguments);return e(s,this),s},V1(i,"datachannel",n=>(e(n.channel,n.target),n))}function VB(i){if(!i.RTCPeerConnection||"connectionState"in i.RTCPeerConnection.prototype)return;const e=i.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const n=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=s=>{const r=s.target;if(r._lastConnectionState!==r.connectionState){r._lastConnectionState=r.connectionState;const o=new Event("connectionstatechange",s);r.dispatchEvent(o)}return s},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function WB(i,e){if(!i.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const t=i.RTCPeerConnection.prototype.setRemoteDescription;i.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const r=s.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);i.RTCSessionDescription&&s instanceof i.RTCSessionDescription?arguments[0]=new i.RTCSessionDescription({type:s.type,sdp:r}):s.sdp=r}return t.apply(this,arguments)}}function BL(i,e){if(!(i.RTCPeerConnection&&i.RTCPeerConnection.prototype))return;const t=i.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(i.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function VL(i,e){if(!(i.RTCPeerConnection&&i.RTCPeerConnection.prototype))return;const t=i.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(i.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return t.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer";break}return s.sdp||s.type!=="offer"&&s.type!=="answer"?t.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>t.apply(this,[o]))})}var Kot=Object.freeze({__proto__:null,removeExtmapAllowMixed:WB,shimAddIceCandidateNullOrEmpty:BL,shimConnectionState:VB,shimMaxMessageSize:OL,shimParameterlessSetLocalDescription:VL,shimRTCIceCandidate:ML,shimRTCIceCandidateRelayProtocol:BB,shimSendThrowTypeError:FL});function Got(){let{window:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const t=I0e,n=zot(i),s={browserDetails:n,commonShim:Kot,extractVersion:PL,disableLog:Hot,disableWarnings:Uot,sdp:qot};switch(n.browser){case"chrome":if(!fne||!OB||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),s;if(n.version===null)return t("Chrome shim can not determine version, not shimming."),s;t("adapter.js shimming chrome."),s.browserShim=fne,BL(i,n),VL(i),N0e(i,n),R0e(i),OB(i,n),A0e(i),F0e(i,n),P0e(i),M0e(i),B0e(i,n),ML(i),BB(i),VB(i),OL(i,n),FL(i),WB(i,n);break;case"firefox":if(!gne||!FB||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),s;t("adapter.js shimming firefox."),s.browserShim=gne,BL(i,n),VL(i),V0e(i,n),FB(i,n),W0e(i),z0e(i),H0e(i),U0e(i),j0e(i),$0e(i),q0e(i),K0e(i),G0e(i),ML(i),VB(i),OL(i,n),FL(i);break;case"safari":if(!mne||!e.shimSafari)return t("Safari shim is not included in this adapter release."),s;t("adapter.js shimming safari."),s.browserShim=mne,BL(i,n),VL(i),e1e(i),n1e(i),X0e(i),Y0e(i),Q0e(i),t1e(i),Z0e(i),i1e(i),ML(i),BB(i),OL(i,n),FL(i),WB(i,n);break;default:t("Unsupported browser!");break}return s}Got({window:typeof window>"u"?void 0:window});const Yot=10,TT="lk_e2ee",Qot="LKFrameEncryptionKey",Xot={sharedKey:!1,ratchetSalt:Qot,ratchetWindowSize:8,failureTolerance:Yot,keyringSize:16};var om;(function(i){i.SetKey="setKey",i.RatchetRequest="ratchetRequest",i.KeyRatcheted="keyRatcheted"})(om||(om={}));var _ne;(function(i){i.KeyRatcheted="keyRatcheted"})(_ne||(_ne={}));var Kg;(function(i){i.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",i.EncryptionError="encryptionError"})(Kg||(Kg={}));var vne;(function(i){i.Error="cryptorError"})(vne||(vne={}));function Zot(){return Jot()||HB()}function HB(){return typeof window.RTCRtpScriptTransform<"u"}function Jot(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class tdt extends qd.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(t,n)=>{ti.debug("key ratcheted event received",{material:t,keyIndex:n})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},Xot),e),this.on(om.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,t,n){const s={key:e,participantIdentity:t,keyIndex:n};if(!this.options.sharedKey&&!t)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(t??"shared","-").concat(n??0),s),this.emit(om.SetKey,s)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,t){this.emit(om.RatchetRequest,e,t)}}class Km extends Error{constructor(e,t){super(t||"an error has occured"),this.name="LiveKitError",this.code=e}}var di;(function(i){i[i.NotAllowed=0]="NotAllowed",i[i.ServerUnreachable=1]="ServerUnreachable",i[i.InternalError=2]="InternalError",i[i.Cancelled=3]="Cancelled",i[i.LeaveRequest=4]="LeaveRequest"})(di||(di={}));class ji extends Km{constructor(e,t,n,s){super(1,e),this.name="ConnectionError",this.status=n,this.reason=t,this.context=s,this.reasonName=di[t]}}class oj extends Km{constructor(e){super(21,e??"device is unsupported"),this.name="DeviceUnsupportedError"}}class Wh extends Km{constructor(e){super(20,e??"track is invalid"),this.name="TrackInvalidError"}}class eat extends Km{constructor(e){super(10,e??"unsupported server"),this.name="UnsupportedServer"}}class Tr extends Km{constructor(e){super(12,e??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class UB extends Km{constructor(e){super(13,e??"unable to negotiate"),this.name="NegotiationError"}}class tat extends Km{constructor(e,t){super(15,e),this.name="PublishTrackError",this.status=t}}class bne extends Km{constructor(e,t){super(15,e),this.reason=t,this.reasonName=typeof t=="string"?t:sj[t]}}var DN;(function(i){i.PermissionDenied="PermissionDenied",i.NotFound="NotFound",i.DeviceInUse="DeviceInUse",i.Other="Other"})(DN||(DN={}));(function(i){function e(t){if(t&&"name"in t)return t.name==="NotFoundError"||t.name==="DevicesNotFoundError"?i.NotFound:t.name==="NotAllowedError"||t.name==="PermissionDeniedError"?i.PermissionDenied:t.name==="NotReadableError"||t.name==="TrackStartError"?i.DeviceInUse:i.Other}i.getFailure=e})(DN||(DN={}));var yne;(function(i){i[i.InvalidKey=0]="InvalidKey",i[i.MissingKey=1]="MissingKey",i[i.InternalError=2]="InternalError"})(yne||(yne={}));var Je;(function(i){i.Connected="connected",i.Reconnecting="reconnecting",i.SignalReconnecting="signalReconnecting",i.Reconnected="reconnected",i.Disconnected="disconnected",i.ConnectionStateChanged="connectionStateChanged",i.MediaDevicesChanged="mediaDevicesChanged",i.ParticipantConnected="participantConnected",i.ParticipantDisconnected="participantDisconnected",i.TrackPublished="trackPublished",i.TrackSubscribed="trackSubscribed",i.TrackSubscriptionFailed="trackSubscriptionFailed",i.TrackUnpublished="trackUnpublished",i.TrackUnsubscribed="trackUnsubscribed",i.TrackMuted="trackMuted",i.TrackUnmuted="trackUnmuted",i.LocalTrackPublished="localTrackPublished",i.LocalTrackUnpublished="localTrackUnpublished",i.LocalAudioSilenceDetected="localAudioSilenceDetected",i.ActiveSpeakersChanged="activeSpeakersChanged",i.ParticipantMetadataChanged="participantMetadataChanged",i.ParticipantNameChanged="participantNameChanged",i.ParticipantAttributesChanged="participantAttributesChanged",i.RoomMetadataChanged="roomMetadataChanged",i.DataReceived="dataReceived",i.SipDTMFReceived="sipDTMFReceived",i.TranscriptionReceived="transcriptionReceived",i.ConnectionQualityChanged="connectionQualityChanged",i.TrackStreamStateChanged="trackStreamStateChanged",i.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",i.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",i.AudioPlaybackStatusChanged="audioPlaybackChanged",i.VideoPlaybackStatusChanged="videoPlaybackChanged",i.MediaDevicesError="mediaDevicesError",i.ParticipantPermissionsChanged="participantPermissionsChanged",i.SignalConnected="signalConnected",i.RecordingStatusChanged="recordingStatusChanged",i.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",i.EncryptionError="encryptionError",i.DCBufferStatusChanged="dcBufferStatusChanged",i.ActiveDeviceChanged="activeDeviceChanged",i.ChatMessage="chatMessage",i.LocalTrackSubscribed="localTrackSubscribed",i.MetricsReceived="metricsReceived"})(Je||(Je={}));var ut;(function(i){i.TrackPublished="trackPublished",i.TrackSubscribed="trackSubscribed",i.TrackSubscriptionFailed="trackSubscriptionFailed",i.TrackUnpublished="trackUnpublished",i.TrackUnsubscribed="trackUnsubscribed",i.TrackMuted="trackMuted",i.TrackUnmuted="trackUnmuted",i.LocalTrackPublished="localTrackPublished",i.LocalTrackUnpublished="localTrackUnpublished",i.ParticipantMetadataChanged="participantMetadataChanged",i.ParticipantNameChanged="participantNameChanged",i.DataReceived="dataReceived",i.SipDTMFReceived="sipDTMFReceived",i.TranscriptionReceived="transcriptionReceived",i.IsSpeakingChanged="isSpeakingChanged",i.ConnectionQualityChanged="connectionQualityChanged",i.TrackStreamStateChanged="trackStreamStateChanged",i.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",i.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",i.MediaDevicesError="mediaDevicesError",i.AudioStreamAcquired="audioStreamAcquired",i.ParticipantPermissionsChanged="participantPermissionsChanged",i.PCTrackAdded="pcTrackAdded",i.AttributesChanged="attributesChanged",i.LocalTrackSubscribed="localTrackSubscribed",i.ChatMessage="chatMessage"})(ut||(ut={}));var lt;(function(i){i.TransportsCreated="transportsCreated",i.Connected="connected",i.Disconnected="disconnected",i.Resuming="resuming",i.Resumed="resumed",i.Restarting="restarting",i.Restarted="restarted",i.SignalResumed="signalResumed",i.SignalRestarted="signalRestarted",i.Closing="closing",i.MediaTrackAdded="mediaTrackAdded",i.ActiveSpeakersUpdate="activeSpeakersUpdate",i.DataPacketReceived="dataPacketReceived",i.RTPVideoMapUpdate="rtpVideoMapUpdate",i.DCBufferStatusChanged="dcBufferStatusChanged",i.ParticipantUpdate="participantUpdate",i.RoomUpdate="roomUpdate",i.SpeakersChanged="speakersChanged",i.StreamStateChanged="streamStateChanged",i.ConnectionQualityUpdate="connectionQualityUpdate",i.SubscriptionError="subscriptionError",i.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",i.RemoteMute="remoteMute",i.SubscribedQualityUpdate="subscribedQualityUpdate",i.LocalTrackUnpublished="localTrackUnpublished",i.LocalTrackSubscribed="localTrackSubscribed",i.Offline="offline",i.SignalRequestResponse="signalRequestResponse"})(lt||(lt={}));var tt;(function(i){i.Message="message",i.Muted="muted",i.Unmuted="unmuted",i.Restarted="restarted",i.Ended="ended",i.Subscribed="subscribed",i.Unsubscribed="unsubscribed",i.UpdateSettings="updateSettings",i.UpdateSubscription="updateSubscription",i.AudioPlaybackStarted="audioPlaybackStarted",i.AudioPlaybackFailed="audioPlaybackFailed",i.AudioSilenceDetected="audioSilenceDetected",i.VisibilityChanged="visibilityChanged",i.VideoDimensionsChanged="videoDimensionsChanged",i.VideoPlaybackStarted="videoPlaybackStarted",i.VideoPlaybackFailed="videoPlaybackFailed",i.ElementAttached="elementAttached",i.ElementDetached="elementDetached",i.UpstreamPaused="upstreamPaused",i.UpstreamResumed="upstreamResumed",i.SubscriptionPermissionChanged="subscriptionPermissionChanged",i.SubscriptionStatusChanged="subscriptionStatusChanged",i.SubscriptionFailed="subscriptionFailed",i.TrackProcessorUpdate="trackProcessorUpdate",i.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",i.TranscriptionReceived="transcriptionReceived",i.TimeSyncUpdate="timeSyncUpdate"})(tt||(tt={}));function nat(i){if(!(typeof i>"u"))return typeof structuredClone=="function"?structuredClone(i):JSON.parse(JSON.stringify(i))}const iat=/version\/(\d+(\.?_?\d+)+)/i;let K6;function wu(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const t=navigator.userAgent.toLowerCase();if(K6===void 0||e){const n=sat.find(s=>{let{test:r}=s;return r.test(t)});K6=n==null?void 0:n.describe(t)}return K6}const sat=[{test:/firefox|iceweasel|fxios/i,describe(i){return{name:"Firefox",version:WL(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,i),os:i.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:G6(i)}}},{test:/chrom|crios|crmo/i,describe(i){return{name:"Chrome",version:WL(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,i),os:i.toLowerCase().includes("crios")?"iOS":void 0,osVersion:G6(i)}}},{test:/safari|applewebkit/i,describe(i){return{name:"Safari",version:WL(iat,i),os:i.includes("mobile/")?"iOS":"macOS",osVersion:G6(i)}}}];function WL(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const n=e.match(i);return n&&n.length>=t&&n[t]||""}function G6(i){return i.includes("mac os")?WL(/\(.+?(\d+_\d+(:?_\d+)?)/,i,1).replace(/_/g,"."):void 0}var rat="2.10.0";const oat=rat,aat=15;class Co{}Co.setTimeout=function(){return setTimeout(...arguments)};Co.setInterval=function(){return setInterval(...arguments)};Co.clearTimeout=function(){return clearTimeout(...arguments)};Co.clearInterval=function(){return clearInterval(...arguments)};const lat=5e3,iC=[];var dc;(function(i){i[i.LOW=0]="LOW",i[i.MEDIUM=1]="MEDIUM",i[i.HIGH=2]="HIGH"})(dc||(dc={}));class Fe extends qd.EventEmitter{constructor(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var s;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=Fe.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=ti,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),lat):this.handleAppVisibilityChanged()},this.log=Sf((s=n.loggerName)!==null&&s!==void 0?s:yu.Track),this.loggerContextCb=n.loggerContextCb,this.setMaxListeners(100),this.kind=t,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=Fe.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),Ni(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let t="audio";this.kind===Fe.Kind.Video&&(t="video"),this.attachedElements.length===0&&this.kind===Fe.Kind.Video&&this.addAppVisibilityListener(),e||(t==="audio"&&(iC.forEach(r=>{r.parentElement===null&&!e&&(e=r)}),e&&iC.splice(iC.indexOf(e),1)),e||(e=document.createElement(t))),this.attachedElements.includes(e)||this.attachedElements.push(e),bv(this.mediaStreamTrack,e);const n=e.srcObject.getTracks(),s=n.some(r=>r.kind==="audio");return e.play().then(()=>{this.emit(s?tt.AudioPlaybackStarted:tt.VideoPlaybackStarted)}).catch(r=>{r.name==="NotAllowedError"?this.emit(s?tt.AudioPlaybackFailed:tt.VideoPlaybackFailed,r):r.name==="AbortError"?ti.debug("".concat(s?"audio":"video"," playback aborted, likely due to new play request")):ti.warn("could not playback ".concat(s?"audio":"video"),r),s&&e&&n.some(o=>o.kind==="video")&&r.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(tt.ElementAttached,e),e}detach(e){try{if(e){yb(this.mediaStreamTrack,e);const n=this.attachedElements.indexOf(e);return n>=0&&(this.attachedElements.splice(n,1),this.recycleElement(e),this.emit(tt.ElementDetached,e)),e}const t=[];return this.attachedElements.forEach(n=>{yb(this.mediaStreamTrack,n),t.push(n),this.recycleElement(n),this.emit(tt.ElementDetached,n)}),this.attachedElements=[],t}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=Sf(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let t=!0;e.pause(),iC.forEach(n=>{n.parentElement||(t=!1)}),t&&iC.push(e)}}handleAppVisibilityChanged(){return re(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===Fe.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(e=>e.play().catch(()=>{})),0)})}addAppVisibilityListener(){Xa()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){Xa()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function bv(i,e){let t;e.srcObject instanceof MediaStream?t=e.srcObject:t=new MediaStream;let n;i.kind==="audio"?n=t.getAudioTracks():n=t.getVideoTracks(),n.includes(i)||(n.forEach(s=>{t.removeTrack(s)}),t.addTrack(i)),(!Bm()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=t.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==t&&(e.srcObject=t,(Bm()||hy())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=t,e.play().catch(()=>{})},0))}function yb(i,e){if(e.srcObject instanceof MediaStream){const t=e.srcObject;t.removeTrack(i),t.getTracks().length>0?e.srcObject=t:e.srcObject=null}}(function(i){let e;(function(c){c.Audio="audio",c.Video="video",c.Unknown="unknown"})(e=i.Kind||(i.Kind={}));let t;(function(c){c.Camera="camera",c.Microphone="microphone",c.ScreenShare="screen_share",c.ScreenShareAudio="screen_share_audio",c.Unknown="unknown"})(t=i.Source||(i.Source={}));let n;(function(c){c.Active="active",c.Paused="paused",c.Unknown="unknown"})(n=i.StreamState||(i.StreamState={}));function s(c){switch(c){case e.Audio:return Jc.AUDIO;case e.Video:return Jc.VIDEO;default:return Jc.DATA}}i.kindToProto=s;function r(c){switch(c){case Jc.AUDIO:return e.Audio;case Jc.VIDEO:return e.Video;default:return e.Unknown}}i.kindFromProto=r;function o(c){switch(c){case t.Camera:return gr.CAMERA;case t.Microphone:return gr.MICROPHONE;case t.ScreenShare:return gr.SCREEN_SHARE;case t.ScreenShareAudio:return gr.SCREEN_SHARE_AUDIO;default:return gr.UNKNOWN}}i.sourceToProto=o;function a(c){switch(c){case gr.CAMERA:return t.Camera;case gr.MICROPHONE:return t.Microphone;case gr.SCREEN_SHARE:return t.ScreenShare;case gr.SCREEN_SHARE_AUDIO:return t.ScreenShareAudio;default:return t.Unknown}}i.sourceFromProto=a;function l(c){switch(c){case NB.ACTIVE:return n.Active;case NB.PAUSED:return n.Paused;default:return n.Unknown}}i.streamStateFromProto=l})(Fe||(Fe={}));class Pi{constructor(e,t,n,s,r){if(typeof e=="object")this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else if(t!==void 0&&n!==void 0)this.width=e,this.height=t,this.aspectRatio=e/t,this.encoding={maxBitrate:n,maxFramerate:s,priority:r};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const cat=["vp8","h264"],uat=["vp8","h264","vp9","av1"];function dat(i){return!!cat.find(e=>e===i)}var wne;(function(i){i[i.PREFER_REGRESSION=0]="PREFER_REGRESSION",i[i.SIMULCAST=1]="SIMULCAST",i[i.REGRESSION=2]="REGRESSION"})(wne||(wne={}));var zB;(function(i){i.telephone={maxBitrate:12e3},i.speech={maxBitrate:24e3},i.music={maxBitrate:48e3},i.musicStereo={maxBitrate:64e3},i.musicHighQuality={maxBitrate:96e3},i.musicHighQualityStereo={maxBitrate:128e3}})(zB||(zB={}));const dy={h90:new Pi(160,90,9e4,20),h180:new Pi(320,180,16e4,20),h216:new Pi(384,216,18e4,20),h360:new Pi(640,360,45e4,20),h540:new Pi(960,540,8e5,25),h720:new Pi(1280,720,17e5,30),h1080:new Pi(1920,1080,3e6,30),h1440:new Pi(2560,1440,5e6,30),h2160:new Pi(3840,2160,8e6,30)},jB={h120:new Pi(160,120,7e4,20),h180:new Pi(240,180,125e3,20),h240:new Pi(320,240,14e4,20),h360:new Pi(480,360,33e4,20),h480:new Pi(640,480,5e5,20),h540:new Pi(720,540,6e5,25),h720:new Pi(960,720,13e5,30),h1080:new Pi(1440,1080,23e5,30),h1440:new Pi(1920,1440,38e5,30)},aj={h360fps3:new Pi(640,360,2e5,3,"medium"),h360fps15:new Pi(640,360,4e5,15,"medium"),h720fps5:new Pi(1280,720,8e5,5,"medium"),h720fps15:new Pi(1280,720,15e5,15,"medium"),h720fps30:new Pi(1280,720,2e6,30,"medium"),h1080fps15:new Pi(1920,1080,25e5,15,"medium"),h1080fps30:new Pi(1920,1080,5e6,30,"medium"),original:new Pi(0,0,7e6,30,"medium")},hat="|",Cne="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function fat(i){const e=i.split(hat);return e.length>1?[e[0],i.substr(e[0].length+1)]:[i,""]}function ol(i){return re(this,void 0,void 0,function*(){return new Promise(e=>Co.setTimeout(e,i))})}function $B(){return"addTransceiver"in RTCPeerConnection.prototype}function qB(){return"addTrack"in RTCPeerConnection.prototype}function gat(){if(!("getCapabilities"in RTCRtpSender)||Bm())return!1;const i=RTCRtpSender.getCapabilities("video");let e=!1;if(i){for(const t of i.codecs)if(t.mimeType==="video/AV1"){e=!0;break}}return e}function mat(){if(!("getCapabilities"in RTCRtpSender)||hy())return!1;if(Bm()){const t=wu();if(t!=null&&t.version&&d1(t.version,"16")<0)return!1}const i=RTCRtpSender.getCapabilities("video");let e=!1;if(i){for(const t of i.codecs)if(t.mimeType==="video/VP9"){e=!0;break}}return e}function CS(i){return i==="av1"||i==="vp9"}function KB(i){return document?(i||(i=document.createElement("audio")),"setSinkId"in i):!1}function pat(){return typeof RTCPeerConnection>"u"?!1:$B()||qB()}function hy(){var i;return((i=wu())===null||i===void 0?void 0:i.name)==="Firefox"}function Bm(){var i;return((i=wu())===null||i===void 0?void 0:i.name)==="Safari"}function _at(){const i=wu();return(i==null?void 0:i.name)==="Safari"&&i.version.startsWith("17.")}function r1e(){var i,e;return Xa()?(e=(i=navigator.userAgentData)===null||i===void 0?void 0:i.mobile)!==null&&e!==void 0?e:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function vat(){const i=wu(),e="17.2";if(i)return i.name!=="Safari"&&i.os!=="iOS"||i.os==="iOS"&&i.osVersion&&d1(e,i.osVersion)>=0?!0:i.name==="Safari"&&d1(e,i.version)>=0}function Xa(){return typeof document<"u"}function Od(){return navigator.product=="ReactNative"}function GB(i){return i.hostname.endsWith(".livekit.cloud")||i.hostname.endsWith(".livekit.run")}function o1e(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function a1e(){if(!Od())return;let i=o1e();if(i)return i.platform}function Sne(){if(Xa())return window.devicePixelRatio;if(Od()){let i=o1e();if(i)return i.devicePixelRatio}return 1}function d1(i,e){const t=i.split("."),n=e.split("."),s=Math.min(t.length,n.length);for(let r=0;r<s;++r){const o=parseInt(t[r],10),a=parseInt(n[r],10);if(o>a)return 1;if(o<a)return-1;if(r===s-1&&o===a)return 0}return i===""&&e!==""?-1:e===""?1:t.length==n.length?0:t.length<n.length?-1:1}function bat(i){for(const e of i)e.target.handleResize(e)}function yat(i){for(const e of i)e.target.handleVisibilityChanged(e)}let Y6=null;const kne=()=>(Y6||(Y6=new ResizeObserver(bat)),Y6);let Q6=null;const xne=()=>(Q6||(Q6=new IntersectionObserver(yat,{root:null,rootMargin:"0px"})),Q6);function wat(){var i;const e=new cot({sdk:h0e.JS,protocol:aat,version:oat});return Od()&&(e.os=(i=a1e())!==null&&i!==void 0?i:""),e}function Ene(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const s=document.createElement("canvas");s.width=i,s.height=e;const r=s.getContext("2d");r==null||r.fillRect(0,0,s.width,s.height),n&&r&&(r.beginPath(),r.arc(i/2,e/2,50,0,Math.PI*2,!0),r.closePath(),r.fillStyle="grey",r.fill());const o=s.captureStream(),[a]=o.getTracks();if(!a)throw Error("Could not get empty media stream video track");return a.enabled=t,a}let sC;function X6(){if(!sC){const i=new AudioContext,e=i.createOscillator(),t=i.createGain();t.gain.setValueAtTime(0,0);const n=i.createMediaStreamDestination();if(e.connect(t),t.connect(n),e.start(),[sC]=n.stream.getAudioTracks(),!sC)throw Error("Could not get empty media stream audio track");sC.enabled=!1}return sC.clone()}class l1e{constructor(e,t){this.onFinally=t,this.promise=new Promise((n,s)=>re(this,void 0,void 0,function*(){this.resolve=n,this.reject=s,e&&(yield e(n,s))})).finally(()=>{var n;return(n=this.onFinally)===null||n===void 0?void 0:n.call(this)})}}function Cat(i){return uat.includes(i)}function am(i){if(typeof i=="string"||typeof i=="number")return i;if(Array.isArray(i))return i[0];if(i.exact)return Array.isArray(i.exact)?i.exact[0]:i.exact;if(i.ideal)return Array.isArray(i.ideal)?i.ideal[0]:i.ideal;throw Error("could not unwrap constraint")}function YB(i){return i.startsWith("ws")?i.replace(/^(ws)/,"http"):i}function Sat(i,e){return i.segments.map(t=>{let{id:n,text:s,language:r,startTime:o,endTime:a,final:l}=t;var c;const u=(c=e.get(n))!==null&&c!==void 0?c:Date.now(),d=Date.now();return l?e.delete(n):e.set(n,u),{id:n,text:s,startTime:Number.parseInt(o.toString()),endTime:Number.parseInt(a.toString()),final:l,language:r,firstReceivedTime:u,lastReceivedTime:d}})}function kat(i){const{id:e,timestamp:t,message:n,editTimestamp:s}=i;return{id:e,timestamp:Number.parseInt(t.toString()),editTimestamp:s?Number.parseInt(s.toString()):void 0,message:n}}function Tne(i){switch(i.reason){case di.LeaveRequest:return i.context;case di.Cancelled:return ru.CLIENT_INITIATED;case di.NotAllowed:return ru.USER_REJECTED;case di.ServerUnreachable:return ru.JOIN_FAILURE;default:return ru.UNKNOWN_REASON}}function HL(i){return i!==void 0?Number(i):void 0}function Np(i){return i!==void 0?BigInt(i):void 0}function wb(i){return!!i&&!(i instanceof MediaStreamTrack)&&i.isLocal}function kf(i){return!!i&&i.kind==Fe.Kind.Audio}function Xy(i){return!!i&&i.kind==Fe.Kind.Video}function hg(i){return wb(i)&&Xy(i)}function Rp(i){return wb(i)&&kf(i)}function QB(i){return!!i&&!i.isLocal}function xat(i){return!!i&&!i.isLocal}function Z6(i){return QB(i)&&Xy(i)}function Eat(i){return i.isLocal}function Tat(i,e){const t=[];let n=new TextEncoder().encode(i);for(;n.length>e;){let s=e;for(;s>0;){const r=n[s];if(r!==void 0&&(r&192)!==128)break;s--}t.push(n.slice(0,s)),n=n.slice(s)}return n.length>0&&t.push(n),t}function c1e(i,e,t){var n,s,r,o,a;const{optionsWithoutProcessor:l,audioProcessor:c,videoProcessor:u}=lj(i??{}),d=e==null?void 0:e.processor,h=t==null?void 0:t.processor,g=(n=nat(l))!==null&&n!==void 0?n:{};return g.audio===!0&&(g.audio={}),g.video===!0&&(g.video={}),g.audio&&(XB(g.audio,e),(s=(o=g.audio).deviceId)!==null&&s!==void 0||(o.deviceId="default"),(c||d)&&(g.audio.processor=c??d)),g.video&&(XB(g.video,t),(r=(a=g.video).deviceId)!==null&&r!==void 0||(a.deviceId="default"),(u||h)&&(g.video.processor=u??h)),g}function XB(i,e){return Object.keys(e).forEach(t=>{i[t]===void 0&&(i[t]=e[t])}),i}function jA(i){var e,t,n,s;const r={};if(i.video)if(typeof i.video=="object"){const o={},a=o,l=i.video;Object.keys(l).forEach(c=>{switch(c){case"resolution":XB(a,l.resolution);break;default:a[c]=l[c]}}),r.video=o,(e=(n=r.video).deviceId)!==null&&e!==void 0||(n.deviceId="default")}else r.video=i.video?{deviceId:"default"}:!1;else r.video=!1;return i.audio?typeof i.audio=="object"?(r.audio=i.audio,(t=(s=r.audio).deviceId)!==null&&t!==void 0||(s.deviceId="default")):r.audio={deviceId:"default"}:r.audio=!1,r}function u1e(i){return re(this,arguments,void 0,function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return function*(){const n=d1e();if(n){const s=n.createAnalyser();s.fftSize=2048;const r=s.frequencyBinCount,o=new Uint8Array(r);n.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(s),yield ol(t),s.getByteTimeDomainData(o);const l=o.some(c=>c!==128&&c!==0);return n.close(),!l}return!1}()})}function d1e(){var i;const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e){const t=new e({latencyHint:"interactive"});if(t.state==="suspended"&&typeof window<"u"&&(!((i=window.document)===null||i===void 0)&&i.body)){const n=()=>re(this,void 0,void 0,function*(){var s;try{t.state==="suspended"&&(yield t.resume())}catch(r){console.warn("Error trying to auto-resume audio context",r)}(s=window.document.body)===null||s===void 0||s.removeEventListener("click",n)});window.document.body.addEventListener("click",n)}return t}}function Lne(i){return i===Fe.Source.Microphone?"audioinput":i===Fe.Source.Camera?"videoinput":void 0}function Lat(i){var e,t;let n=(e=i.video)!==null&&e!==void 0?e:!0;return i.resolution&&i.resolution.width>0&&i.resolution.height>0&&(n=typeof n=="boolean"?{}:n,Bm()?n=Object.assign(Object.assign({},n),{width:{max:i.resolution.width},height:{max:i.resolution.height},frameRate:i.resolution.frameRate}):n=Object.assign(Object.assign({},n),{width:{ideal:i.resolution.width},height:{ideal:i.resolution.height},frameRate:i.resolution.frameRate})),{audio:(t=i.audio)!==null&&t!==void 0?t:!1,video:n,controller:i.controller,selfBrowserSurface:i.selfBrowserSurface,surfaceSwitching:i.surfaceSwitching,systemAudio:i.systemAudio,preferCurrentTab:i.preferCurrentTab}}function UL(i){return i.split("/")[1].toLowerCase()}function Iat(i){const e=[];return i.forEach(t=>{t.track!==void 0&&e.push(new nj({cid:t.track.mediaStreamID,track:t.trackInfo}))}),e}function Ni(i){return"mediaStreamTrack"in i?{trackID:i.sid,source:i.source,muted:i.isMuted,enabled:i.mediaStreamTrack.enabled,kind:i.kind,streamID:i.mediaStreamID,streamTrackID:i.mediaStreamTrack.id}:{trackID:i.trackSid,enabled:i.isEnabled,muted:i.isMuted,trackInfo:Object.assign({mimeType:i.mimeType,name:i.trackName,encrypted:i.isEncrypted,kind:i.kind,source:i.source},i.track?Ni(i.track):{})}}function Dat(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function Nat(i,e){var t;i===void 0&&(i={}),e===void 0&&(e={});const n=[...Object.keys(e),...Object.keys(i)],s={};for(const r of n)i[r]!==e[r]&&(s[r]=(t=e[r])!==null&&t!==void 0?t:"");return s}function lj(i){const e=Object.assign({},i);let t,n;return typeof e.audio=="object"&&e.audio.processor&&(t=e.audio.processor,e.audio=Object.assign(Object.assign({},e.audio),{processor:void 0})),typeof e.video=="object"&&e.video.processor&&(n=e.video.processor,e.video=Object.assign(Object.assign({},e.video),{processor:void 0})),{audioProcessor:t,videoProcessor:n,optionsWithoutProcessor:e}}function Rat(i){switch(i){case gr.CAMERA:return Fe.Source.Camera;case gr.MICROPHONE:return Fe.Source.Microphone;case gr.SCREEN_SHARE:return Fe.Source.ScreenShare;case gr.SCREEN_SHARE_AUDIO:return Fe.Source.ScreenShareAudio;default:return Fe.Source.Unknown}}class Aat extends qd.EventEmitter{constructor(e){super(),this.onWorkerMessage=t=>{var n,s;const{kind:r,data:o}=t.data;switch(r){case"error":ti.error(o.error.message),this.emit(Kg.EncryptionError,o.error);break;case"initAck":o.enabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)});break;case"enable":if(o.enabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)}),this.encryptionEnabled!==o.enabled&&o.participantIdentity===((n=this.room)===null||n===void 0?void 0:n.localParticipant.identity))this.emit(Kg.ParticipantEncryptionStatusChanged,o.enabled,this.room.localParticipant),this.encryptionEnabled=o.enabled;else if(o.participantIdentity){const a=(s=this.room)===null||s===void 0?void 0:s.getParticipantByIdentity(o.participantIdentity);if(!a)throw TypeError("couldn't set encryption status, participant not found".concat(o.participantIdentity));this.emit(Kg.ParticipantEncryptionStatusChanged,o.enabled,a)}break;case"ratchetKey":this.keyProvider.emit(om.KeyRatcheted,o.material,o.keyIndex);break}},this.onWorkerError=t=>{ti.error("e2ee worker encountered an error:",{error:t.error}),this.emit(Kg.EncryptionError,t.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1}setup(e){if(!Zot())throw new oj("tried to setup end-to-end encryption on an unsupported browser");if(ti.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const t={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:Oot.getLevel()}};this.worker&&(ti.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(t))}}setParticipantCryptorEnabled(e,t){ti.debug("set e2ee to ".concat(e," for participant ").concat(t)),this.postEnable(e,t)}setSifTrailer(e){!e||e.length===0?ti.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(lt.RTPVideoMapUpdate,t=>{this.postRTPMap(t)})}setupEventListeners(e,t){e.on(Je.TrackPublished,(n,s)=>this.setParticipantCryptorEnabled(n.trackInfo.encryption!==xl.NONE,s.identity)),e.on(Je.ConnectionStateChanged,n=>{n===wi.Connected&&e.remoteParticipants.forEach(s=>{s.trackPublications.forEach(r=>{this.setParticipantCryptorEnabled(r.trackInfo.encryption!==xl.NONE,s.identity)})})}).on(Je.TrackUnsubscribed,(n,s,r)=>{var o;const a={kind:"removeTransform",data:{participantIdentity:r.identity,trackId:n.mediaStreamID}};(o=this.worker)===null||o===void 0||o.postMessage(a)}).on(Je.TrackSubscribed,(n,s,r)=>{this.setupE2EEReceiver(n,r.identity,s.trackInfo)}).on(Je.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");t.getKeys().forEach(n=>{this.postKey(n)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),e.localParticipant.on(ut.LocalTrackPublished,n=>re(this,void 0,void 0,function*(){this.setupE2EESender(n.track,n.track.sender)})),t.on(om.SetKey,n=>this.postKey(n)).on(om.RatchetRequest,(n,s)=>this.postRatchetRequest(n,s))}postRatchetRequest(e,t){if(!this.worker)throw Error("could not ratchet key, worker is missing");const n={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:t}};this.worker.postMessage(n)}postKey(e){let{key:t,participantIdentity:n,keyIndex:s}=e;var r;if(!this.worker)throw Error("could not set key, worker is missing");const o={kind:"setKey",data:{participantIdentity:n,isPublisher:n===((r=this.room)===null||r===void 0?void 0:r.localParticipant.identity),key:t,keyIndex:s}};this.worker.postMessage(o)}postEnable(e,t){if(this.worker){const n={kind:"enable",data:{enabled:e,participantIdentity:t}};this.worker.postMessage(n)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var t;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((t=this.room)===null||t===void 0)&&t.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const n={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(n)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const t={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(t)}setupE2EEReceiver(e,t,n){if(e.receiver){if(!(n!=null&&n.mimeType)||n.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,t,e.kind==="video"?UL(n.mimeType):void 0)}}setupE2EESender(e,t){if(!wb(e)||!t){t||ti.warn("early return because sender is not ready");return}this.handleSender(t,e.mediaStreamID,void 0)}handleReceiver(e,t,n,s){return re(this,void 0,void 0,function*(){if(this.worker){if(HB()){const r={kind:"decode",participantIdentity:n,trackId:t,codec:s};e.transform=new RTCRtpScriptTransform(this.worker,r)}else{if(TT in e&&s){const l={kind:"updateCodec",data:{trackId:t,codec:s,participantIdentity:n}};this.worker.postMessage(l);return}let r=e.writableStream,o=e.readableStream;if(!r||!o){const l=e.createEncodedStreams();e.writableStream=l.writable,r=l.writable,e.readableStream=l.readable,o=l.readable}const a={kind:"decode",data:{readableStream:o,writableStream:r,trackId:t,codec:s,participantIdentity:n}};this.worker.postMessage(a,[o,r])}e[TT]=!0}})}handleSender(e,t,n){var s;if(!(TT in e||!this.worker)){if(!(!((s=this.room)===null||s===void 0)&&s.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(HB()){ti.info("initialize script transform");const r={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:t,codec:n};e.transform=new RTCRtpScriptTransform(this.worker,r)}else{ti.info("initialize encoded streams");const r=e.createEncodedStreams(),o={kind:"encode",data:{readableStream:r.readable,writableStream:r.writable,codec:n,trackId:t,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(o,[r.readable,r.writable])}e[TT]=!0}}}const J6="default";class to{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new to),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return re(this,arguments,void 0,function(t){var n=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var r;if(((r=to.userMediaPromiseMap)===null||r===void 0?void 0:r.size)>0){ti.debug("awaiting getUserMedia promise");try{t?yield to.userMediaPromiseMap.get(t):yield Promise.all(to.userMediaPromiseMap.values())}catch{ti.warn("error waiting for media permissons")}}let o=yield navigator.mediaDevices.enumerateDevices();if(s&&!(Bm()&&n.hasDeviceInUse(t))&&(o.filter(l=>l.kind===t).length===0||o.some(l=>{const c=l.label==="",u=t?l.kind===t:!0;return c&&u}))){const l={video:t!=="audioinput"&&t!=="audiooutput",audio:t!=="videoinput"&&{deviceId:"default"}},c=yield navigator.mediaDevices.getUserMedia(l);o=yield navigator.mediaDevices.enumerateDevices(),c.getTracks().forEach(u=>{u.stop()})}return n._previousDevices=o,t&&(o=o.filter(a=>a.kind===t)),o}()})}normalizeDeviceId(e,t,n){return re(this,void 0,void 0,function*(){if(t!==J6)return t;const s=yield this.getDevices(e),r=s.find(a=>a.deviceId===J6);if(!r){ti.warn("could not reliably determine default device");return}const o=s.find(a=>a.deviceId!==J6&&a.groupId===(n??r.groupId));if(!o){ti.warn("could not reliably determine default device");return}return o==null?void 0:o.deviceId})}hasDeviceInUse(e){return e?to.userMediaPromiseMap.has(e):to.userMediaPromiseMap.size>0}}to.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];to.userMediaPromiseMap=new Map;var SS;(function(i){i[i.WAITING=0]="WAITING",i[i.RUNNING=1]="RUNNING",i[i.COMPLETED=2]="COMPLETED"})(SS||(SS={}));class Pat{constructor(){this.pendingTasks=new Map,this.taskMutex=new Al,this.nextTaskIndex=0}run(e){return re(this,void 0,void 0,function*(){const t={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:SS.WAITING};this.pendingTasks.set(t.id,t);const n=yield this.taskMutex.lock();try{return t.executedAt=Date.now(),t.status=SS.RUNNING,yield e()}finally{t.status=SS.COMPLETED,this.pendingTasks.delete(t.id),n()}})}flush(){return re(this,void 0,void 0,function*(){return this.run(()=>re(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}function Mat(i,e){const t=new URL(i);return e.forEach((n,s)=>{t.searchParams.set(s,n)}),h1e(t,"rtc")}function Oat(i){const e=new URL(YB(i));return h1e(e,"validate")}function Fat(i){return i.endsWith("/")?i:"".concat(i,"/")}function h1e(i,e){const t="".concat(i.protocol,"//").concat(i.host).concat(Fat(i.pathname)).concat(e);return i.searchParams.size>0?"".concat(t,"?").concat(i.searchParams.toString()):t}const Bat=["syncState","trickle","offer","answer","simulate","leave"];function Vat(i){const e=Bat.indexOf(i.case)>=0;return ti.trace("request allowed to bypass queue:",{canPass:e,req:i}),e}var hs;(function(i){i[i.CONNECTING=0]="CONNECTING",i[i.CONNECTED=1]="CONNECTED",i[i.RECONNECTING=2]="RECONNECTING",i[i.DISCONNECTING=3]="DISCONNECTING",i[i.DISCONNECTED=4]="DISCONNECTED"})(hs||(hs={}));class cj{get currentState(){return this.state}get isDisconnected(){return this.state===hs.DISCONNECTING||this.state===hs.DISCONNECTED}get isEstablishingConnection(){return this.state===hs.CONNECTING||this.state===hs.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var n;this.rtt=0,this.state=hs.DISCONNECTED,this.log=ti,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=Sf((n=t.loggerName)!==null&&n!==void 0?n:yu.Signal),this.loggerContextCb=t.loggerContextCb,this.useJSON=e,this.requestQueue=new Pat,this.queuedRequests=[],this.closingLock=new Al,this.connectionLock=new Al,this.state=hs.DISCONNECTED}get logContext(){var e,t;return(t=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&t!==void 0?t:{}}join(e,t,n,s){return re(this,void 0,void 0,function*(){return this.state=hs.CONNECTING,this.options=n,yield this.connect(e,t,n,s)})}reconnect(e,t,n,s){return re(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=hs.RECONNECTING,this.clearPingInterval(),yield this.connect(e,t,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:n,reconnectReason:s}))})}connect(e,t,n,s){this.connectOptions=n;const r=wat(),o=Wat(t,r,n),a=Mat(e,o),l=Oat(a);return new Promise((c,u)=>re(this,void 0,void 0,function*(){const d=yield this.connectionLock.lock();try{const h=()=>re(this,void 0,void 0,function*(){this.close(),clearTimeout(g),u(new ji("room connection has been cancelled (signal)",di.Cancelled))}),g=setTimeout(()=>{this.close(),u(new ji("room connection has timed out (signal)",di.ServerUnreachable))},n.websocketTimeout);s!=null&&s.aborted&&h(),s==null||s.addEventListener("abort",h);const p=new URL(a);p.searchParams.has("access_token")&&p.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(p),Object.assign({reconnect:n.reconnect,reconnectReason:n.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(a),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(g)},this.ws.onerror=_=>re(this,void 0,void 0,function*(){if(this.state!==hs.CONNECTED){this.state=hs.DISCONNECTED,clearTimeout(g);try{const v=yield fetch(l);if(v.status.toFixed(0).startsWith("4")){const y=yield v.text();u(new ji(y,di.NotAllowed,v.status))}else u(new ji("Encountered unknown websocket error during connection: ".concat(_.toString()),di.InternalError,v.status))}catch(v){u(new ji(v instanceof Error?v.message:"server was not reachable",di.ServerUnreachable))}return}this.handleWSError(_)}),this.ws.onmessage=_=>re(this,void 0,void 0,function*(){var v,y,w;let x;if(typeof _.data=="string"){const k=JSON.parse(_.data);x=one.fromJson(k,{ignoreUnknownFields:!0})}else if(_.data instanceof ArrayBuffer)x=one.fromBinary(new Uint8Array(_.data));else{this.log.error("could not decode websocket message: ".concat(typeof _.data),this.logContext);return}if(this.state!==hs.CONNECTED){let k=!1;if(((v=x.message)===null||v===void 0?void 0:v.case)==="join"?(this.state=hs.CONNECTED,s==null||s.removeEventListener("abort",h),this.pingTimeoutDuration=x.message.value.pingTimeout,this.pingIntervalDuration=x.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),c(x.message.value)):this.state===hs.RECONNECTING&&x.message.case!=="leave"?(this.state=hs.CONNECTED,s==null||s.removeEventListener("abort",h),this.startPingInterval(),((y=x.message)===null||y===void 0?void 0:y.case)==="reconnect"?c(x.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),c(void 0),k=!0)):this.isEstablishingConnection&&x.message.case==="leave"?u(new ji("Received leave request while trying to (re)connect",di.LeaveRequest,void 0,x.message.value.reason)):n.reconnect||u(new ji("did not receive join response, got ".concat((w=x.message)===null||w===void 0?void 0:w.case," instead"),di.InternalError)),!k)return}this.signalLatency&&(yield ol(this.signalLatency)),this.handleSignalResponse(x)}),this.ws.onclose=_=>{this.isEstablishingConnection&&u(new ji("Websocket got closed during a (re)connection attempt",di.InternalError)),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:_.reason,code:_.code,wasClean:_.wasClean,state:this.state})),this.handleOnClose(_.reason)}}finally{d()}}))}close(){return re(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const n=yield e.closingLock.lock();try{if(e.clearPingInterval(),t&&(e.state=hs.DISCONNECTING),e.ws){e.ws.onmessage=null,e.ws.onopen=null,e.ws.onclose=null;const s=new Promise(r=>{e.ws?e.ws.onclose=()=>{r()}:r()});e.ws.readyState<e.ws.CLOSING&&(e.ws.close(),yield Promise.race([s,ol(250)])),e.ws=void 0}}finally{t&&(e.state=hs.DISCONNECTED),n()}}()})}sendOffer(e){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:NN(e)})}sendAnswer(e){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:NN(e)})}sendIceCandidate(e,t){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new ej({candidateInit:JSON.stringify(e),target:t})})}sendMuteTrack(e,t){return this.sendRequest({case:"mute",value:new tj({sid:e,muted:t})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,t){return re(this,arguments,void 0,function(n,s){var r=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){const a=r.getNextRequestId();return yield r.sendRequest({case:"updateMetadata",value:new y0e({requestId:a,metadata:n,name:s,attributes:o})}),a}()})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,t){return this.sendRequest({case:"updateLayers",value:new b0e({trackSid:e,layers:t})})}sendUpdateSubscriptionPermissions(e,t){return this.sendRequest({case:"subscriptionPermission",value:new S0e({allParticipants:e,trackPermissions:t})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:gs.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new E0e({timestamp:gs.parse(Date.now()),rtt:gs.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,t){return this.sendRequest({case:"updateAudioTrack",value:new v0e({trackSid:e,features:t})})}sendLeave(){return this.sendRequest({case:"leave",value:new UA({reason:ru.CLIENT_INITIATED,action:vb.DISCONNECT})})}sendRequest(e){return re(this,arguments,void 0,function(t){var n=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function*(){if(!s&&!Vat(t)&&n.state===hs.RECONNECTING){n.queuedRequests.push(()=>re(n,void 0,void 0,function*(){yield this.sendRequest(t,!0)}));return}if(s||(yield n.requestQueue.flush()),n.signalLatency&&(yield ol(n.signalLatency)),!n.ws||n.ws.readyState!==n.ws.OPEN){n.log.error("cannot send signal request before connected, type: ".concat(t==null?void 0:t.case),n.logContext);return}const o=new hot({message:t});try{n.useJSON?n.ws.send(o.toJsonString()):n.ws.send(o.toBinary())}catch(a){n.log.error("error sending signal message",Object.assign(Object.assign({},n.logContext),{error:a}))}}()})}handleSignalResponse(e){var t,n;const s=e.message;if(s==null){this.log.debug("received unsupported message",this.logContext);return}let r=!1;if(s.case==="answer"){const o=Ine(s.value);this.onAnswer&&this.onAnswer(o)}else if(s.case==="offer"){const o=Ine(s.value);this.onOffer&&this.onOffer(o)}else if(s.case==="trickle"){const o=JSON.parse(s.value.candidateInit);this.onTrickle&&this.onTrickle(o,s.value.target)}else s.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((t=s.value.participants)!==null&&t!==void 0?t:[]):s.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(s.value):s.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((n=s.value.speakers)!==null&&n!==void 0?n:[]):s.case==="leave"?this.onLeave&&this.onLeave(s.value):s.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(s.value.sid,s.value.muted):s.case==="roomUpdate"?this.onRoomUpdate&&s.value.room&&this.onRoomUpdate(s.value.room):s.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(s.value):s.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(s.value):s.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(s.value):s.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(s.value):s.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(s.value):s.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(s.value):s.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(s.value):s.case==="pong"||(s.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(s.value.lastPingTimestamp.toString()),this.resetPingTimeout(),r=!0):s.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(s.value):s.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(s.value.trackSid):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:s.case})));r||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return re(this,void 0,void 0,function*(){if(this.state===hs.DISCONNECTED)return;const t=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),t&&t(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=Co.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&Co.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=Co.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&Co.clearInterval(this.pingInterval)}}function Ine(i){const e={type:"offer",sdp:i.sdp};switch(i.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=i.type;break}return e}function NN(i){return new u1({sdp:i.sdp,type:i.type})}function Wat(i,e,t){var n;const s=new URLSearchParams;return s.set("access_token",i),t.reconnect&&(s.set("reconnect","1"),t.sid&&s.set("sid",t.sid)),s.set("auto_subscribe",t.autoSubscribe?"1":"0"),s.set("sdk",Od()?"reactnative":"js"),s.set("version",e.version),s.set("protocol",e.protocol.toString()),e.deviceModel&&s.set("device_model",e.deviceModel),e.os&&s.set("os",e.os),e.osVersion&&s.set("os_version",e.osVersion),e.browser&&s.set("browser",e.browser),e.browserVersion&&s.set("browser_version",e.browserVersion),t.adaptiveStream&&s.set("adaptive_stream","1"),t.reconnectReason&&s.set("reconnect_reason",t.reconnectReason.toString()),!((n=navigator.connection)===null||n===void 0)&&n.type&&s.set("network",navigator.connection.type),s}var Bc={},e5={},t5={exports:{}},Dne;function uj(){if(Dne)return t5.exports;Dne=1;var i=t5.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=e.raddr!=null?" raddr %s rport %d":"%v%v",t+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(t+=" generation %d"),t+=e["network-id"]!=null?" network-id %d":"%v",t+=e["network-cost"]!=null?" network-cost %d":"%v",t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return e.attribute!=null&&(t+=" %s",e.value!=null&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=e.id!=null?"id=%s %s":"%v%s",t+=e.mediaClockValue!=null?"=%s":"",t+=e.rateNumerator!=null?" rate=%s":"",t+=e.rateDenominator!=null?"/%s":"",t}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(i).forEach(function(e){var t=i[e];t.forEach(function(n){n.reg||(n.reg=/(.*)/),n.format||(n.format="%s")})}),t5.exports}var Nne;function Hat(){return Nne||(Nne=1,function(i){var e=function(a){return String(Number(a))===a?Number(a):a},t=function(a,l,c,u){if(u&&!c)l[u]=e(a[1]);else for(var d=0;d<c.length;d+=1)a[d+1]!=null&&(l[c[d]]=e(a[d+1]))},n=function(a,l,c){var u=a.name&&a.names;a.push&&!l[a.push]?l[a.push]=[]:u&&!l[a.name]&&(l[a.name]={});var d=a.push?{}:u?l[a.name]:l;t(c.match(a.reg),d,a.names,a.name),a.push&&l[a.push].push(d)},s=uj(),r=RegExp.prototype.test.bind(/^([a-z])=(.*)/);i.parse=function(a){var l={},c=[],u=l;return a.split(/(\r\n|\r|\n)/).filter(r).forEach(function(d){var h=d[0],g=d.slice(2);h==="m"&&(c.push({rtp:[],fmtp:[]}),u=c[c.length-1]);for(var p=0;p<(s[h]||[]).length;p+=1){var _=s[h][p];if(_.reg.test(g))return n(_,u,g)}}),l.media=c,l};var o=function(a,l){var c=l.split(/=(.+)/,2);return c.length===2?a[c[0]]=e(c[1]):c.length===1&&l.length>1&&(a[c[0]]=void 0),a};i.parseParams=function(a){return a.split(/;\s?/).reduce(o,{})},i.parseFmtpConfig=i.parseParams,i.parsePayloads=function(a){return a.toString().split(" ").map(Number)},i.parseRemoteCandidates=function(a){for(var l=[],c=a.split(" ").map(e),u=0;u<c.length;u+=3)l.push({component:c[u],ip:c[u+1],port:c[u+2]});return l},i.parseImageAttributes=function(a){return a.split(" ").map(function(l){return l.substring(1,l.length-1).split(",").reduce(o,{})})},i.parseSimulcastStreamList=function(a){return a.split(";").map(function(l){return l.split(",").map(function(c){var u,d=!1;return c[0]!=="~"?u=e(c):(u=e(c.substring(1,c.length)),d=!0),{scid:u,paused:d}})})}}(e5)),e5}var n5,Rne;function Uat(){if(Rne)return n5;Rne=1;var i=uj(),e=/%[sdv%]/g,t=function(o){var a=1,l=arguments,c=l.length;return o.replace(e,function(u){if(a>=c)return u;var d=l[a];switch(a+=1,u){case"%%":return"%";case"%s":return String(d);case"%d":return Number(d);case"%v":return""}})},n=function(o,a,l){var c=a.format instanceof Function?a.format(a.push?l:l[a.name]):a.format,u=[o+"="+c];if(a.names)for(var d=0;d<a.names.length;d+=1){var h=a.names[d];a.name?u.push(l[a.name][h]):u.push(l[a.names[d]])}else u.push(l[a.name]);return t.apply(null,u)},s=["v","o","s","i","u","e","p","c","b","t","r","z","a"],r=["i","c","b","a"];return n5=function(o,a){a=a||{},o.version==null&&(o.version=0),o.name==null&&(o.name=" "),o.media.forEach(function(d){d.payloads==null&&(d.payloads="")});var l=a.outerOrder||s,c=a.innerOrder||r,u=[];return l.forEach(function(d){i[d].forEach(function(h){h.name in o&&o[h.name]!=null?u.push(n(d,h,o)):h.push in o&&o[h.push]!=null&&o[h.push].forEach(function(g){u.push(n(d,h,g))})})}),o.media.forEach(function(d){u.push(n("m",i.m[0],d)),c.forEach(function(h){i[h].forEach(function(g){g.name in d&&d[g.name]!=null?u.push(n(h,g,d)):g.push in d&&d[g.push]!=null&&d[g.push].forEach(function(p){u.push(n(h,g,p))})})})}),u.join(`\r
`)+`\r
`},n5}var Ane;function zat(){if(Ane)return Bc;Ane=1;var i=Hat(),e=Uat(),t=uj();return Bc.grammar=t,Bc.write=e,Bc.parse=i.parse,Bc.parseParams=i.parseParams,Bc.parseFmtpConfig=i.parseFmtpConfig,Bc.parsePayloads=i.parsePayloads,Bc.parseRemoteCandidates=i.parseRemoteCandidates,Bc.parseImageAttributes=i.parseImageAttributes,Bc.parseSimulcastStreamList=i.parseSimulcastStreamList,Bc}var _g=zat();function dj(i,e,t){var n,s,r;e===void 0&&(e=50),t===void 0&&(t={});var o=(n=t.isImmediate)!=null&&n,a=(s=t.callback)!=null&&s,l=t.maxWait,c=Date.now(),u=[];function d(){if(l!==void 0){var g=Date.now()-c;if(g+e>=l)return l-g}return e}var h=function(){var g=[].slice.call(arguments),p=this;return new Promise(function(_,v){var y=o&&r===void 0;if(r!==void 0&&clearTimeout(r),r=setTimeout(function(){if(r=void 0,c=Date.now(),!o){var x=i.apply(p,g);a&&a(x),u.forEach(function(k){return(0,k.resolve)(x)}),u=[]}},d()),y){var w=i.apply(p,g);return a&&a(w),_(w)}u.push({resolve:_,reject:v})})};return h.cancel=function(g){r!==void 0&&clearTimeout(r),u.forEach(function(p){return(0,p.reject)(g)}),u=[]},h}const jat=.7,$at=20,Cb={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class Pne extends qd.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var n;super(),this.log=ti,this.ddExtID=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=dj(s=>re(this,void 0,void 0,function*(){this.emit(Cb.NegotiationStarted);try{yield this.createAndSendOffer()}catch(r){if(s)s(r);else throw r}}),$at),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Sf((n=t.loggerName)!==null&&n!==void 0?n:yu.PCTransport),this.loggerOptions=t,this.config=e,this._pc=this.createPC()}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=t=>{var n;t.candidate&&((n=this.onIceCandidate)===null||n===void 0||n.call(this,t.candidate))},e.onicecandidateerror=t=>{var n;(n=this.onIceCandidateError)===null||n===void 0||n.call(this,t)},e.oniceconnectionstatechange=()=>{var t;(t=this.onIceConnectionStateChange)===null||t===void 0||t.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var t;(t=this.onSignalingStatechange)===null||t===void 0||t.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var t;(t=this.onConnectionStateChange)===null||t===void 0||t.call(this,e.connectionState)},e.ondatachannel=t=>{var n;(n=this.onDataChannel)===null||n===void 0||n.call(this,t)},e.ontrack=t=>{var n;(n=this.onTrack)===null||n===void 0||n.call(this,t)},e}get logContext(){var e,t;return Object.assign({},(t=(e=this.loggerOptions).loggerContextCb)===null||t===void 0?void 0:t.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return re(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e){return re(this,void 0,void 0,function*(){var t;let n;if(e.type==="offer"){let{stereoMids:s,nackMids:r}=qat(e);this.remoteStereoMids=s,this.remoteNackMids=r}else if(e.type==="answer"){const s=_g.parse((t=e.sdp)!==null&&t!==void 0?t:"");s.media.forEach(r=>{r.type==="audio"&&this.trackBitrates.some(o=>{if(!o.transceiver||r.mid!=o.transceiver.mid)return!1;let a=0;if(r.rtp.some(c=>c.codec.toUpperCase()===o.codec.toUpperCase()?(a=c.payload,!0):!1),a===0)return!0;let l=!1;for(const c of r.fmtp)if(c.payload===a){c.config=c.config.split(";").filter(u=>!u.includes("maxaveragebitrate")).join(";"),o.maxbr>0&&(c.config+=";maxaveragebitrate=".concat(o.maxbr*1e3)),l=!0;break}return l||o.maxbr>0&&r.fmtp.push({payload:a,config:"maxaveragebitrate=".concat(o.maxbr*1e3)}),!0})}),n=_g.write(s)}yield this.setMungedSDP(e,n,!0),this.pendingCandidates.forEach(s=>{this.pc.addIceCandidate(s)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(Cb.NegotiationComplete),e.sdp&&_g.parse(e.sdp).media.forEach(r=>{r.type==="video"&&this.emit(Cb.RTPVideoPayloadTypes,r.rtp)}))})}createAndSendOffer(e){return re(this,void 0,void 0,function*(){var t;if(this.onOffer===void 0)return;if(e!=null&&e.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const r=this._pc.remoteDescription;if(e!=null&&e.iceRestart&&r)yield this._pc.setRemoteDescription(r);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const n=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:n.sdp},this.logContext));const s=_g.parse((t=n.sdp)!==null&&t!==void 0?t:"");s.media.forEach(r=>{One(r),r.type==="audio"?Mne(r,[],[]):r.type==="video"&&this.trackBitrates.some(o=>{if(!r.msid||!o.cid||!r.msid.includes(o.cid))return!1;let a=0;if(r.rtp.some(c=>c.codec.toUpperCase()===o.codec.toUpperCase()?(a=c.payload,!0):!1),a===0||(CS(o.codec)&&this.ensureVideoDDExtensionForSVC(r,s),o.codec!=="av1"))return!0;const l=Math.round(o.maxbr*jat);for(const c of r.fmtp)if(c.payload===a){c.config.includes("x-google-start-bitrate")||(c.config+=";x-google-start-bitrate=".concat(l));break}return!0})}),yield this.setMungedSDP(n,_g.write(s)),this.onOffer(n)})}createAndSetAnswer(){return re(this,void 0,void 0,function*(){var e;const t=yield this.pc.createAnswer(),n=_g.parse((e=t.sdp)!==null&&e!==void 0?e:"");return n.media.forEach(s=>{One(s),s.type==="audio"&&Mne(s,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(t,_g.write(n)),t})}createDataChannel(e,t){return this.pc.createDataChannel(e,t)}addTransceiver(e,t){return this.pc.addTransceiver(e,t)}addTrack(e){if(!this._pc)throw new Tr("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var t;if(!this._pc)throw new Tr("PC closed, cannot configure");return(t=this._pc)===null||t===void 0?void 0:t.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var t;return(t=this._pc)===null||t===void 0?void 0:t.removeTrack(e)}getConnectionState(){var e,t;return(t=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&t!==void 0?t:"closed"}getICEConnectionState(){var e,t;return(t=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&t!==void 0?t:"closed"}getSignallingState(){var e,t;return(t=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&t!==void 0?t:"closed"}getTransceivers(){var e,t;return(t=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&t!==void 0?t:[]}getSenders(){var e,t;return(t=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&t!==void 0?t:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return re(this,void 0,void 0,function*(){var e;if(!this._pc)return;let t="";const n=new Map,s=new Map;if((yield this._pc.getStats()).forEach(a=>{switch(a.type){case"transport":t=a.selectedCandidatePairId;break;case"candidate-pair":t===""&&a.selected&&(t=a.id),n.set(a.id,a);break;case"remote-candidate":s.set(a.id,"".concat(a.address,":").concat(a.port));break}}),t==="")return;const o=(e=n.get(t))===null||e===void 0?void 0:e.remoteCandidateId;if(o!==void 0)return s.get(o)})}setMungedSDP(e,t,n){return re(this,void 0,void 0,function*(){if(t){const s=e.sdp;e.sdp=t;try{this.log.debug("setting munged ".concat(n?"remote":"local"," description"),this.logContext),n?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(r){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:r,sdp:t})),e.sdp=s}}try{n?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(s){let r="unknown error";s instanceof Error?r=s.message:typeof s=="string"&&(r=s);const o={error:r,sdp:e.sdp};throw!n&&this.pc.remoteDescription&&(o.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:o})),new UB(r)}})}ensureVideoDDExtensionForSVC(e,t){var n,s;if(!((n=e.ext)===null||n===void 0?void 0:n.some(o=>o.uri===Cne))){if(this.ddExtID===0){let o=0;t.media.forEach(a=>{var l;a.type==="video"&&((l=a.ext)===null||l===void 0||l.forEach(c=>{c.value>o&&(o=c.value)}))}),this.ddExtID=o+1}(s=e.ext)===null||s===void 0||s.push({value:this.ddExtID,uri:Cne})}}}function Mne(i,e,t){let n=0;i.rtp.some(s=>s.codec==="opus"?(n=s.payload,!0):!1),n>0&&(i.rtcpFb||(i.rtcpFb=[]),t.includes(i.mid)&&!i.rtcpFb.some(s=>s.payload===n&&s.type==="nack")&&i.rtcpFb.push({payload:n,type:"nack"}),e.includes(i.mid)&&i.fmtp.some(s=>s.payload===n?(s.config.includes("stereo=1")||(s.config+=";stereo=1"),!0):!1))}function qat(i){var e;const t=[],n=[],s=_g.parse((e=i.sdp)!==null&&e!==void 0?e:"");let r=0;return s.media.forEach(o=>{var a;o.type==="audio"&&(o.rtp.some(l=>l.codec==="opus"?(r=l.payload,!0):!1),!((a=o.rtcpFb)===null||a===void 0)&&a.some(l=>l.payload===r&&l.type==="nack")&&n.push(o.mid),o.fmtp.some(l=>l.payload===r?(l.config.includes("sprop-stereo=1")&&t.push(o.mid),!0):!1))}),{stereoMids:t,nackMids:n}}function One(i){if(i.connection){const e=i.connection.ip.indexOf(":")>=0;(i.connection.version===4&&e||i.connection.version===6&&!e)&&(i.connection.ip="0.0.0.0",i.connection.version=4)}}const ZB="vp8",Kat={audioPreset:zB.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:aj.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:ZB,backupCodec:!0},f1e={deviceId:"default",autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},g1e={deviceId:"default",resolution:dy.h720.resolution},Gat={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new Bot,disconnectOnPageLeave:!0,webAudioMix:!1},hj={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var Rs;(function(i){i[i.NEW=0]="NEW",i[i.CONNECTING=1]="CONNECTING",i[i.CONNECTED=2]="CONNECTED",i[i.FAILED=3]="FAILED",i[i.CLOSING=4]="CLOSING",i[i.CLOSED=5]="CLOSED"})(Rs||(Rs={}));class Yat{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,t,n){var s;this.peerConnectionTimeout=hj.peerConnectionTimeout,this.log=ti,this.updateState=()=>{var r;const o=this.state,a=this.requiredTransports.map(l=>l.getConnectionState());a.every(l=>l==="connected")?this.state=Rs.CONNECTED:a.some(l=>l==="failed")?this.state=Rs.FAILED:a.some(l=>l==="connecting")?this.state=Rs.CONNECTING:a.every(l=>l==="closed")?this.state=Rs.CLOSED:a.some(l=>l==="closed")?this.state=Rs.CLOSING:a.every(l=>l==="new")&&(this.state=Rs.NEW),o!==this.state&&(this.log.debug("pc state change: from ".concat(Rs[o]," to ").concat(Rs[this.state]),this.logContext),(r=this.onStateChange)===null||r===void 0||r.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=Sf((s=n.loggerName)!==null&&s!==void 0?s:yu.PCManager),this.loggerOptions=n,this.isPublisherConnectionRequired=!t,this.isSubscriberConnectionRequired=t,this.publisher=new Pne(e,n),this.subscriber=new Pne(e,n),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=r=>{var o;(o=this.onIceCandidate)===null||o===void 0||o.call(this,r,eu.PUBLISHER)},this.subscriber.onIceCandidate=r=>{var o;(o=this.onIceCandidate)===null||o===void 0||o.call(this,r,eu.SUBSCRIBER)},this.subscriber.onDataChannel=r=>{var o;(o=this.onDataChannel)===null||o===void 0||o.call(this,r)},this.subscriber.onTrack=r=>{var o;(o=this.onTrack)===null||o===void 0||o.call(this,r)},this.publisher.onOffer=r=>{var o;(o=this.onPublisherOffer)===null||o===void 0||o.call(this,r)},this.state=Rs.NEW,this.connectionLock=new Al,this.remoteOfferLock=new Al}get logContext(){var e,t;return Object.assign({},(t=(e=this.loggerOptions).loggerContextCb)===null||t===void 0?void 0:t.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e){return this.publisher.setRemoteDescription(e)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return re(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const e=this.publisher;for(const t of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(t)}catch(n){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:n}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return re(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,t){return re(this,void 0,void 0,function*(){t===eu.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e){return re(this,void 0,void 0,function*(){this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()}));const t=yield this.remoteOfferLock.lock();try{return yield this.subscriber.setRemoteDescription(e),yield this.subscriber.createAndSetAnswer()}finally{t()}})}updateConfiguration(e,t){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),t&&this.triggerIceRestart()}ensurePCTransportConnection(e,t){return re(this,void 0,void 0,function*(){var n;const s=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((n=this.requiredTransports)===null||n===void 0?void 0:n.map(r=>this.ensureTransportConnected(r,e,t)))}finally{s()}})}negotiate(e){return re(this,void 0,void 0,function*(){return new Promise((t,n)=>re(this,void 0,void 0,function*(){const s=setTimeout(()=>{n("negotiation timed out")},this.peerConnectionTimeout),r=()=>{clearTimeout(s),n("negotiation aborted")};e.signal.addEventListener("abort",r),this.publisher.once(Cb.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(Cb.NegotiationComplete,()=>{clearTimeout(s),t()})}),yield this.publisher.negotiate(o=>{clearTimeout(s),n(o)})}))})}addPublisherTransceiver(e,t){return this.publisher.addTransceiver(e,t)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,t){return this.publisher.createDataChannel(e,t)}getConnectedAddress(e){return e===eu.PUBLISHER?this.publisher.getConnectedAddress():e===eu.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,t){return re(this,arguments,void 0,function(n,s){var r=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return function*(){if(n.getConnectionState()!=="connected")return new Promise((l,c)=>re(r,void 0,void 0,function*(){const u=()=>{this.log.warn("abort transport connection",this.logContext),Co.clearTimeout(d),c(new ji("room connection has been cancelled",di.Cancelled))};s!=null&&s.signal.aborted&&u(),s==null||s.signal.addEventListener("abort",u);const d=Co.setTimeout(()=>{s==null||s.signal.removeEventListener("abort",u),c(new ji("could not establish pc connection",di.InternalError))},o);for(;this.state!==Rs.CONNECTED;)if(yield ol(50),s!=null&&s.signal.aborted){c(new ji("room connection has been cancelled",di.Cancelled));return}Co.clearTimeout(d),s==null||s.signal.removeEventListener("abort",u),l()}))}()})}}class Os extends Error{constructor(e,t,n){super(t),this.code=e,this.message=Fne(t,Os.MAX_MESSAGE_BYTES),this.data=n?Fne(n,Os.MAX_DATA_BYTES):void 0}static fromProto(e){return new Os(e.code,e.message,e.data)}toProto(){return new c0e({code:this.code,message:this.message,data:this.data})}static builtIn(e,t){return new Os(Os.ErrorCode[e],Os.ErrorMessage[e],t)}}Os.MAX_MESSAGE_BYTES=256;Os.MAX_DATA_BYTES=15360;Os.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};Os.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const m1e=15360;function fj(i){return new TextEncoder().encode(i).length}function Fne(i,e){if(fj(i)<=e)return i;let t=0,n=i.length;const s=new TextEncoder;for(;t<n;){const r=Math.floor((t+n+1)/2);s.encode(i.slice(0,r)).length<=e?t=r:n=r-1}return i.slice(0,t)}const gj=2e3;function $A(i,e){if(!e)return 0;let t,n;return"bytesReceived"in i?(t=i.bytesReceived,n=e.bytesReceived):"bytesSent"in i&&(t=i.bytesSent,n=e.bytesSent),t===void 0||n===void 0||i.timestamp===void 0||e.timestamp===void 0?0:(t-n)*8*1e3/(i.timestamp-e.timestamp)}const Qat=1e3;class p1e extends Fe{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}constructor(e,t,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=arguments.length>4?arguments[4]:void 0;super(e,t,r),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=dj(()=>re(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>re(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(tt.Ended,this)},this.reacquireTrack=!1,this.providedByUser=s,this.muteLock=new Al,this.pauseUpstreamLock=new Al,this.processorLock=new Al,this.restartLock=new Al,this.setMediaStreamTrack(e,!0),this._constraints=e.getConstraints(),n&&(this._constraints=n)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==Fe.Kind.Video)return;const{width:e,height:t}=this._mediaStreamTrack.getSettings();if(e&&t)return{width:e,height:t}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,t;return(t=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&t!==void 0?t:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,t){return re(this,void 0,void 0,function*(){var n;if(e===this._mediaStreamTrack&&!t)return;this._mediaStreamTrack&&(this.attachedElements.forEach(r=>{yb(this._mediaStreamTrack,r)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let s;if(this.processor&&e){const r=yield this.processorLock.lock();try{if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(bv(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),s=this.processor.processedTrack}finally{r()}}this.sender&&((n=this.sender.transport)===null||n===void 0?void 0:n.state)!=="closed"&&(yield this.sender.replaceTrack(s??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(r=>{bv(s??e,r)}))})}waitForDimensions(){return re(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Qat;return function*(){var n;if(e.kind===Fe.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((n=wu())===null||n===void 0?void 0:n.os)==="iOS"&&(yield ol(10));const s=Date.now();for(;Date.now()-s<t;){const r=e.dimensions;if(r)return r;yield ol(50)}throw new Wh("unable to get track dimensions after timeout")}()})}setDeviceId(e){return re(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===am(e)||(this._constraints.deviceId=e,this.isMuted)?!0:(yield this.restartTrack(),am(e)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return re(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){if(e.source===Fe.Source.ScreenShare)return;const{deviceId:n,groupId:s}=e._mediaStreamTrack.getSettings(),r=e.kind===Fe.Kind.Audio?"audioinput":"videoinput";return t?to.getInstance().normalizeDeviceId(r,n,s):n}()})}mute(){return re(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return re(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e,t){return re(this,void 0,void 0,function*(){if(!this.sender)throw new Wh("unable to replace an unpublished track");let n,s;return typeof t=="boolean"?n=t:t!==void 0&&(n=t.userProvidedTrack,s=t.stopProcessor),this.providedByUser=n??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),s&&this.processor&&(yield this.stopProcessor()),this})}restart(e){return re(this,void 0,void 0,function*(){this.manuallyStopped=!1;const t=yield this.restartLock.lock();try{e||(e=this._constraints);const{deviceId:n,facingMode:s}=e,r=Vot(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const o={audio:!1,video:!1};this.kind===Fe.Kind.Video?o.video=n||s?{deviceId:n,facingMode:s}:!0:o.audio=n?{deviceId:n}:!0,this.attachedElements.forEach(c=>{yb(this.mediaStreamTrack,c)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const l=(yield navigator.mediaDevices.getUserMedia(o)).getTracks()[0];return yield l.applyConstraints(r),l.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(l),this._constraints=e,this.emit(tt.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{t()}})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?tt.Muted:tt.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return re(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),r1e()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return re(this,void 0,void 0,function*(){var e;const t=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(tt.UpstreamPaused,this);const n=wu();if((n==null?void 0:n.name)==="Safari"&&d1(n.version,"12.0")<0)throw new oj("pauseUpstream is not supported on Safari < 12.");((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{t()}})}resumeUpstream(){return re(this,void 0,void 0,function*(){var e;const t=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(tt.UpstreamResumed,this),((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{t()}})}getRTCStatsReport(){return re(this,void 0,void 0,function*(){var e;return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){return re(this,arguments,void 0,function(t){var n=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var r;const o=yield n.processorLock.lock();try{n.log.debug("setting up processor",n.logContext);const a=document.createElement(n.kind),l={kind:n.kind,track:n._mediaStreamTrack,element:a,audioContext:n.audioContext};if(yield t.init(l),n.log.debug("processor initialized",n.logContext),n.processor&&(yield n.stopProcessor()),n.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(bv(n._mediaStreamTrack,a),a.muted=!0,a.play().catch(c=>n.log.error("failed to play processor element",Object.assign(Object.assign({},n.logContext),{error:c}))),n.processor=t,n.processorElement=a,n.processor.processedTrack){for(const c of n.attachedElements)c!==n.processorElement&&s&&(yb(n._mediaStreamTrack,c),bv(n.processor.processedTrack,c));yield(r=n.sender)===null||r===void 0?void 0:r.replaceTrack(n.processor.processedTrack)}n.emit(tt.TrackProcessorUpdate,n.processor)}finally{o()}}()})}getProcessor(){return this.processor}stopProcessor(){return re(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var n,s;e.processor&&(e.log.debug("stopping processor",e.logContext),(n=e.processor.processedTrack)===null||n===void 0||n.stop(),yield e.processor.destroy(),e.processor=void 0,t||((s=e.processorElement)===null||s===void 0||s.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(tt.TrackProcessorUpdate))}()})}}class RN extends p1e{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;super(e,Fe.Kind.Audio,t,n,r),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>re(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}o&&this.prevStats&&(this._currentBitrate=$A(o,this.prevStats)),this.prevStats=o}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(tt.AudioTrackFeatureUpdate,this,cd.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(tt.AudioTrackFeatureUpdate,this,cd.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=s,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return re(this,void 0,void 0,function*(){const t=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===Fe.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{t()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return re(this,void 0,void 0,function*(){const t=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const n=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==am(this._constraints.deviceId);return this.source===Fe.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||n)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{t()}})}restartTrack(e){return re(this,void 0,void 0,function*(){let t;if(e){const n=jA({audio:e});typeof n.audio!="boolean"&&(t=n.audio)}yield this.restart(t)})}restart(e){const t=Object.create(null,{restart:{get:()=>super.restart}});return re(this,void 0,void 0,function*(){const n=yield t.restart.call(this,e);return this.checkForSilence(),n})}startMonitor(){Xa()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},gj)))}setProcessor(e){return re(this,void 0,void 0,function*(){var t;const n=yield this.processorLock.lock();try{if(!Od()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.stopProcessor());const s={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(s),this.processor=e,this.processor.processedTrack&&(yield(t=this.sender)===null||t===void 0?void 0:t.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(tt.TrackProcessorUpdate,this.processor)}finally{n()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){return re(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const t=yield this.sender.getStats();let n;return t.forEach(s=>{s.type==="outbound-rtp"&&(n={type:"audio",streamId:s.id,packetsSent:s.packetsSent,packetsLost:s.packetsLost,bytesSent:s.bytesSent,timestamp:s.timestamp,roundTripTime:s.roundTripTime,jitter:s.jitter})}),n})}checkForSilence(){return re(this,void 0,void 0,function*(){const e=yield u1e(this);return e&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(tt.AudioSilenceDetected)),e})}}function _1e(i,e,t){switch(i.kind){case"audio":return new RN(i,e,!1,void 0,t);case"video":return new PN(i,e,!1,t);default:throw new Wh("unsupported track type: ".concat(i.kind))}}const Xat=Object.values(dy),Zat=Object.values(jB),Jat=Object.values(aj),elt=[dy.h180,dy.h360],tlt=[jB.h180,jB.h360],nlt=i=>[{scaleResolutionDownBy:2,fps:i.encoding.maxFramerate}].map(t=>{var n,s;return new Pi(Math.floor(i.width/t.scaleResolutionDownBy),Math.floor(i.height/t.scaleResolutionDownBy),Math.max(15e4,Math.floor(i.encoding.maxBitrate/(Math.pow(t.scaleResolutionDownBy,2)*(((n=i.encoding.maxFramerate)!==null&&n!==void 0?n:30)/((s=t.fps)!==null&&s!==void 0?s:30))))),t.fps,i.encoding.priority)}),JB=["q","h","f"];function eV(i,e,t,n){var s,r;let o=n==null?void 0:n.videoEncoding;i&&(o=n==null?void 0:n.screenShareEncoding);const a=n==null?void 0:n.simulcast,l=n==null?void 0:n.scalabilityMode,c=n==null?void 0:n.videoCodec;if(!o&&!a&&!l||!e||!t)return[{}];o||(o=slt(i,e,t,c),ti.debug("using video encoding",o));const u=o.maxFramerate,d=new Pi(e,t,o.maxBitrate,o.maxFramerate,o.priority);if(l&&CS(c)){const p=new AN(l),_=[];if(p.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(l));const v=wu();if(Bm()||Od()||(v==null?void 0:v.name)==="Chrome"&&d1(v==null?void 0:v.version,"113")<0){const y=p.suffix=="h"?2:3;for(let w=0;w<p.spatial;w+=1)_.push({rid:JB[2-w],maxBitrate:o.maxBitrate/Math.pow(y,w),maxFramerate:d.encoding.maxFramerate});_[0].scalabilityMode=l}else _.push({maxBitrate:o.maxBitrate,maxFramerate:d.encoding.maxFramerate,scalabilityMode:l});return d.encoding.priority&&(_[0].priority=d.encoding.priority,_[0].networkPriority=d.encoding.priority),ti.debug("using svc encoding",{encodings:_}),_}if(!a)return[o];let h=[];i?h=(s=Vne(n==null?void 0:n.screenShareSimulcastLayers))!==null&&s!==void 0?s:Bne(i,d):h=(r=Vne(n==null?void 0:n.videoSimulcastLayers))!==null&&r!==void 0?r:Bne(i,d);let g;if(h.length>0){const p=h[0];h.length>1&&([,g]=h);const _=Math.max(e,t);if(_>=960&&g)return i5(e,t,[p,g,d],u);if(_>=480)return i5(e,t,[p,d],u)}return i5(e,t,[d])}function ilt(i,e,t){var n,s,r,o;if(!t.backupCodec||t.backupCodec===!0||t.backupCodec.codec===t.videoCodec)return;e!==t.backupCodec.codec&&ti.warn("requested a different codec than specified as backup",{serverRequested:e,backup:t.backupCodec.codec}),t.videoCodec=e,t.videoEncoding=t.backupCodec.encoding;const a=i.mediaStreamTrack.getSettings(),l=(n=a.width)!==null&&n!==void 0?n:(s=i.dimensions)===null||s===void 0?void 0:s.width,c=(r=a.height)!==null&&r!==void 0?r:(o=i.dimensions)===null||o===void 0?void 0:o.height;return i.source===Fe.Source.ScreenShare&&t.simulcast&&(t.simulcast=!1),eV(i.source===Fe.Source.ScreenShare,l,c,t)}function slt(i,e,t,n){const s=rlt(i,e,t);let{encoding:r}=s[0];const o=Math.max(e,t);for(let a=0;a<s.length;a+=1){const l=s[a];if(r=l.encoding,l.width>=o)break}if(n)switch(n){case"av1":r=Object.assign({},r),r.maxBitrate=r.maxBitrate*.7;break;case"vp9":r=Object.assign({},r),r.maxBitrate=r.maxBitrate*.85;break}return r}function rlt(i,e,t){if(i)return Jat;const n=e>t?e/t:t/e;return Math.abs(n-16/9)<Math.abs(n-4/3)?Xat:Zat}function Bne(i,e){if(i)return nlt(e);const{width:t,height:n}=e,s=t>n?t/n:n/t;return Math.abs(s-16/9)<Math.abs(s-4/3)?elt:tlt}function i5(i,e,t,n){const s=[];if(t.forEach((r,o)=>{if(o>=JB.length)return;const a=Math.min(i,e),c={rid:JB[o],scaleResolutionDownBy:Math.max(1,a/Math.min(r.width,r.height)),maxBitrate:r.encoding.maxBitrate},u=n&&r.encoding.maxFramerate?Math.min(n,r.encoding.maxFramerate):r.encoding.maxFramerate;u&&(c.maxFramerate=u);const d=hy()||o===0;r.encoding.priority&&d&&(c.priority=r.encoding.priority,c.networkPriority=r.encoding.priority),s.push(c)}),Od()&&a1e()==="ios"){let r;s.forEach(a=>{r?a.maxFramerate&&a.maxFramerate>r&&(r=a.maxFramerate):r=a.maxFramerate});let o=!0;s.forEach(a=>{var l;a.maxFramerate!=r&&(o&&(o=!1,ti.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),ti.info('Setting framerate of encoding "'.concat((l=a.rid)!==null&&l!==void 0?l:"",'" to ').concat(r)),a.maxFramerate=r)})}return s}function Vne(i){if(i)return i.sort((e,t)=>{const{encoding:n}=e,{encoding:s}=t;return n.maxBitrate>s.maxBitrate?1:n.maxBitrate<s.maxBitrate?-1:n.maxBitrate===s.maxBitrate&&n.maxFramerate&&s.maxFramerate?n.maxFramerate>s.maxFramerate?1:-1:0})}class AN{constructor(e){const t=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!t)throw new Error("invalid scalability mode");if(this.spatial=parseInt(t[1]),this.temporal=parseInt(t[2]),t.length>3)switch(t[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=t[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}function olt(i){return i.source===Fe.Source.ScreenShare||i.constraints.height&&am(i.constraints.height)>=1080?"maintain-resolution":"balanced"}const alt=5e3;class PN extends p1e{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=arguments.length>3?arguments[3]:void 0;super(e,Fe.Kind.Video,t,n,s),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.monitorSender=()=>re(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let r;try{r=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}const o=new Map(r.map(a=>[a.rid,a]));if(this.prevStats){let a=0;o.forEach((l,c)=>{var u;const d=(u=this.prevStats)===null||u===void 0?void 0:u.get(c);a+=$A(l,d)}),this._currentBitrate=a}this.prevStats=o}),this.senderLock=new Al}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var t;if(this.signalClient=e,!Xa())return;const n=(t=this.sender)===null||t===void 0?void 0:t.getParameters();n&&(this.encodings=n.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},gj))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return re(this,void 0,void 0,function*(){var t,n,s,r,o;yield e.pauseUpstream.call(this);try{for(var a=!0,l=Mg(this.simulcastCodecs.values()),c;c=yield l.next(),t=c.done,!t;a=!0)r=c.value,a=!1,yield(o=r.sender)===null||o===void 0?void 0:o.replaceTrack(null)}catch(u){n={error:u}}finally{try{!a&&!t&&(s=l.return)&&(yield s.call(l))}finally{if(n)throw n.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return re(this,void 0,void 0,function*(){var t,n,s,r,o;yield e.resumeUpstream.call(this);try{for(var a=!0,l=Mg(this.simulcastCodecs.values()),c;c=yield l.next(),t=c.done,!t;a=!0){r=c.value,a=!1;const u=r;yield(o=u.sender)===null||o===void 0?void 0:o.replaceTrack(u.mediaStreamTrack)}}catch(u){n={error:u}}finally{try{!a&&!t&&(s=l.return)&&(yield s.call(l))}finally{if(n)throw n.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return re(this,void 0,void 0,function*(){const t=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===Fe.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{t()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return re(this,void 0,void 0,function*(){const t=yield this.muteLock.lock();try{return this.isMuted?(this.source===Fe.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{t()}})}setTrackMuted(e){super.setTrackMuted(e);for(const t of this.simulcastCodecs.values())t.mediaStreamTrack.enabled=!e}getSenderStats(){return re(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const t=[],n=yield this.sender.getStats();return n.forEach(s=>{var r;if(s.type==="outbound-rtp"){const o={type:"video",streamId:s.id,frameHeight:s.frameHeight,frameWidth:s.frameWidth,framesPerSecond:s.framesPerSecond,framesSent:s.framesSent,firCount:s.firCount,pliCount:s.pliCount,nackCount:s.nackCount,packetsSent:s.packetsSent,bytesSent:s.bytesSent,qualityLimitationReason:s.qualityLimitationReason,qualityLimitationDurations:s.qualityLimitationDurations,qualityLimitationResolutionChanges:s.qualityLimitationResolutionChanges,rid:(r=s.rid)!==null&&r!==void 0?r:s.id,retransmittedPacketsSent:s.retransmittedPacketsSent,targetBitrate:s.targetBitrate,timestamp:s.timestamp},a=n.get(s.remoteId);a&&(o.jitter=a.jitter,o.packetsLost=a.packetsLost,o.roundTripTime=a.roundTripTime),t.push(o)}}),t.sort((s,r)=>{var o,a;return((o=r.frameWidth)!==null&&o!==void 0?o:0)-((a=s.frameWidth)!==null&&a!==void 0?a:0)}),t})}setPublishingQuality(e){const t=[];for(let n=dc.LOW;n<=dc.HIGH;n+=1)t.push(new ij({quality:n,enabled:n<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(t)}restartTrack(e){return re(this,void 0,void 0,function*(){var t,n,s,r,o;let a;if(e){const d=jA({video:e});typeof d.video!="boolean"&&(a=d.video)}yield this.restart(a);try{for(var l=!0,c=Mg(this.simulcastCodecs.values()),u;u=yield c.next(),t=u.done,!t;l=!0){r=u.value,l=!1;const d=r;d.sender&&((o=d.sender.transport)===null||o===void 0?void 0:o.state)!=="closed"&&(d.mediaStreamTrack=this.mediaStreamTrack.clone(),yield d.sender.replaceTrack(d.mediaStreamTrack))}}catch(d){n={error:d}}finally{try{!l&&!t&&(s=c.return)&&(yield s.call(c))}finally{if(n)throw n.error}}})}setProcessor(e){const t=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return re(this,arguments,void 0,function(n){var s=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var o,a,l,c,u,d;if(yield t.setProcessor.call(s,n,r),!((u=s.processor)===null||u===void 0)&&u.processedTrack)try{for(var h=!0,g=Mg(s.simulcastCodecs.values()),p;p=yield g.next(),o=p.done,!o;h=!0)c=p.value,h=!1,yield(d=c.sender)===null||d===void 0?void 0:d.replaceTrack(s.processor.processedTrack)}catch(_){a={error:_}}finally{try{!h&&!o&&(l=g.return)&&(yield l.call(g))}finally{if(a)throw a.error}}}()})}setDegradationPreference(e){return re(this,void 0,void 0,function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const t=this.sender.getParameters();t.degradationPreference=e,this.sender.setParameters(t)}catch(t){this.log.warn("failed to set degradationPreference",Object.assign({error:t},this.logContext))}})}addSimulcastTrack(e,t){if(this.simulcastCodecs.has(e)){this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);return}const n={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:t};return this.simulcastCodecs.set(e,n),n}setSimulcastTrackSender(e,t){const n=this.simulcastCodecs.get(e);n&&(n.sender=t,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},alt))}setPublishingCodecs(e){return re(this,void 0,void 0,function*(){var t,n,s,r,o,a,l;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(e[0].qualities),[];this.subscribedCodecs=e;const c=[];try{for(t=!0,n=Mg(e);s=yield n.next(),r=s.done,!r;t=!0){l=s.value,t=!1;const u=l;if(!this.codec||this.codec===u.codec)yield this.setPublishingLayers(u.qualities);else{const d=this.simulcastCodecs.get(u.codec);if(this.log.debug("try setPublishingCodec for ".concat(u.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:d})),!d||!d.sender){for(const h of u.qualities)if(h.enabled){c.push(u.codec);break}}else d.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(u.codec),this.logContext),yield Wne(d.sender,d.encodings,u.qualities,this.senderLock,this.log,this.logContext))}}}catch(u){o={error:u}}finally{try{!t&&!r&&(a=n.return)&&(yield a.call(n))}finally{if(o)throw o.error}}return c})}setPublishingLayers(e){return re(this,void 0,void 0,function*(){this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:e})),!(!this.sender||!this.encodings)&&(yield Wne(this.sender,this.encodings,e,this.senderLock,this.log,this.logContext))})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return re(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),r1e()&&this.isInBackground&&this.source===Fe.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function Wne(i,e,t,n,s,r){return re(this,void 0,void 0,function*(){const o=yield n.lock();s.debug("setPublishingLayersForSender",Object.assign(Object.assign({},r),{sender:i,qualities:t,senderEncodings:e}));try{const a=i.getParameters(),{encodings:l}=a;if(!l)return;if(l.length!==e.length){s.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},r),{encodings:l,senderEncodings:e}));return}let c=!1;const u=wu();if((u==null?void 0:u.name)==="Chrome"&&d1(u==null?void 0:u.version,"133")>0&&l[0].scalabilityMode){const h=l[0],g=new AN(h.scalabilityMode);let p=_b.OFF;if(t.forEach(_=>{_.enabled&&(p===_b.OFF||_.quality>p)&&(p=_.quality)}),p===_b.OFF)h.active&&(h.active=!1,c=!0);else if(!h.active||g.spatial!==p+1){c=!0,h.active=!0;const _=new AN(e[0].scalabilityMode);g.spatial=p+1,g.suffix=_.suffix,g.spatial===1&&(g.suffix=void 0),h.scalabilityMode=g.toString(),h.scaleResolutionDownBy=Math.pow(2,2-p),e[0].maxBitrate&&(h.maxBitrate=e[0].maxBitrate/(h.scaleResolutionDownBy*h.scaleResolutionDownBy))}}else l.forEach((h,g)=>{var p;let _=(p=h.rid)!==null&&p!==void 0?p:"";_===""&&(_="q");const v=v1e(_),y=t.find(w=>w.quality===v);y&&h.active!==y.enabled&&(c=!0,h.active=y.enabled,s.debug("setting layer ".concat(y.quality," to ").concat(h.active?"enabled":"disabled"),r),hy()&&(y.enabled?(h.scaleResolutionDownBy=e[g].scaleResolutionDownBy,h.maxBitrate=e[g].maxBitrate,h.maxFrameRate=e[g].maxFrameRate):(h.scaleResolutionDownBy=4,h.maxBitrate=10,h.maxFrameRate=2)))});c&&(a.encodings=l,s.debug("setting encodings",Object.assign(Object.assign({},r),{encodings:a.encodings})),yield i.setParameters(a))}finally{o()}})}function v1e(i){switch(i){case"f":return dc.HIGH;case"h":return dc.MEDIUM;case"q":return dc.LOW;default:return dc.HIGH}}function Hne(i,e,t,n){if(!t)return[new x0({quality:dc.HIGH,width:i,height:e,bitrate:0,ssrc:0})];if(n){const s=t[0].scalabilityMode,r=new AN(s),o=[],a=r.suffix=="h"?1.5:2,l=r.suffix=="h"?2:3;for(let c=0;c<r.spatial;c+=1)o.push(new x0({quality:Math.min(dc.HIGH,r.spatial-1)-c,width:Math.ceil(i/Math.pow(a,c)),height:Math.ceil(e/Math.pow(a,c)),bitrate:t[0].maxBitrate?Math.ceil(t[0].maxBitrate/Math.pow(l,c)):0,ssrc:0}));return o}return t.map(s=>{var r,o,a;const l=(r=s.scaleResolutionDownBy)!==null&&r!==void 0?r:1;let c=v1e((o=s.rid)!==null&&o!==void 0?o:"");return new x0({quality:c,width:Math.ceil(i/l),height:Math.ceil(e/l),bitrate:(a=s.maxBitrate)!==null&&a!==void 0?a:0,ssrc:0})})}const Une="_lossy",zne="_reliable",llt=2*1e3,s5="leave-reconnect";var $c;(function(i){i[i.New=0]="New",i[i.Connected=1]="Connected",i[i.Disconnected=2]="Disconnected",i[i.Reconnecting=3]="Reconnecting",i[i.Closed=4]="Closed"})($c||($c={}));class clt extends qd.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var t;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=hj.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=$c.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=ti,this.handleDataChannel=n=>re(this,[n],void 0,function(s){var r=this;let{channel:o}=s;return function*(){if(o){if(o.label===zne)r.reliableDCSub=o;else if(o.label===Une)r.lossyDCSub=o;else return;r.log.debug("on data channel ".concat(o.id,", ").concat(o.label),r.logContext),o.onmessage=r.handleDataMessage}}()}),this.handleDataMessage=n=>re(this,void 0,void 0,function*(){var s,r;const o=yield this.dataProcessLock.lock();try{let a;if(n.data instanceof ArrayBuffer)a=n.data;else if(n.data instanceof Blob)a=yield n.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:n.data}));return}const l=Ha.fromBinary(new Uint8Array(a));((s=l.value)===null||s===void 0?void 0:s.case)==="speaker"?this.emit(lt.ActiveSpeakersUpdate,l.value.value.speakers):(((r=l.value)===null||r===void 0?void 0:r.case)==="user"&&dlt(l,l.value.value),this.emit(lt.DataPacketReceived,l))}finally{o()}}),this.handleDataError=n=>{const r=n.currentTarget.maxRetransmits===0?"lossy":"reliable";if(n instanceof ErrorEvent&&n.error){const{error:o}=n.error;this.log.error("DataChannel error on ".concat(r,": ").concat(n.message),Object.assign(Object.assign({},this.logContext),{error:o}))}else this.log.error("Unknown DataChannel error on ".concat(r),Object.assign(Object.assign({},this.logContext),{event:n}))},this.handleBufferedAmountLow=n=>{const r=n.currentTarget.maxRetransmits===0?pi.LOSSY:pi.RELIABLE;this.updateAndEmitDCBufferStatus(r)},this.handleDisconnect=(n,s)=>{if(this._isClosed)return;this.log.warn("".concat(n," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const r=l=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(l,"ms. giving up"),this.logContext),this.emit(lt.Disconnected),this.close()},o=Date.now()-this.reconnectStart;let a=this.getNextRetryDelay({elapsedMs:o,retryCount:this.reconnectAttempts});if(a===null){r(o);return}n===s5&&(a=0),this.log.debug("reconnecting in ".concat(a,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=Co.setTimeout(()=>this.attemptReconnect(s).finally(()=>this.reconnectTimeout=void 0),a)},this.waitForRestarted=()=>new Promise((n,s)=>{this.pcState===$c.Connected&&n();const r=()=>{this.off(lt.Disconnected,o),n()},o=()=>{this.off(lt.Restarted,r),s()};this.once(lt.Restarted,r),this.once(lt.Disconnected,o)}),this.updateAndEmitDCBufferStatus=n=>{const s=this.isBufferStatusLow(n);typeof s<"u"&&s!==this.dcBufferStatus.get(n)&&(this.dcBufferStatus.set(n,s),this.emit(lt.DCBufferStatusChanged,s,n))},this.isBufferStatusLow=n=>{const s=this.dataChannelForKind(n);if(s)return s.bufferedAmount<=s.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===hs.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(F_.RR_SIGNAL_DISCONNECTED))},this.log=Sf((t=e.loggerName)!==null&&t!==void 0?t:yu.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new cj(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new Al,this.dataProcessLock=new Al,this.dcBufferStatus=new Map([[pi.LOSSY,!0],[pi.RELIABLE,!0]]),this.client.onParticipantUpdate=n=>this.emit(lt.ParticipantUpdate,n),this.client.onConnectionQuality=n=>this.emit(lt.ConnectionQualityUpdate,n),this.client.onRoomUpdate=n=>this.emit(lt.RoomUpdate,n),this.client.onSubscriptionError=n=>this.emit(lt.SubscriptionError,n),this.client.onSubscriptionPermissionUpdate=n=>this.emit(lt.SubscriptionPermissionUpdate,n),this.client.onSpeakersChanged=n=>this.emit(lt.SpeakersChanged,n),this.client.onStreamStateUpdate=n=>this.emit(lt.StreamStateChanged,n),this.client.onRequestResponse=n=>this.emit(lt.SignalRequestResponse,n)}get logContext(){var e,t,n,s,r,o,a,l;return{room:(t=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||t===void 0?void 0:t.name,roomID:(s=(n=this.latestJoinResponse)===null||n===void 0?void 0:n.room)===null||s===void 0?void 0:s.sid,participant:(o=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.participant)===null||o===void 0?void 0:o.identity,pID:(l=(a=this.latestJoinResponse)===null||a===void 0?void 0:a.participant)===null||l===void 0?void 0:l.sid}}join(e,t,n,s){return re(this,void 0,void 0,function*(){this.url=e,this.token=t,this.signalOpts=n,this.maxJoinAttempts=n.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const r=yield this.client.join(e,t,n,s);return this._isClosed=!1,this.latestJoinResponse=r,this.subscriberPrimary=r.subscriberPrimary,this.pcManager||(yield this.configure(r)),(!this.subscriberPrimary||r.fastPublish)&&this.negotiate(),this.clientConfiguration=r.clientConfiguration,r}catch(r){if(r instanceof ji&&r.reason===di.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,t,n,s);throw r}})}close(){return re(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(lt.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){return re(this,void 0,void 0,function*(){var e;yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const t=n=>{n&&(n.close(),n.onbufferedamountlow=null,n.onclose=null,n.onclosing=null,n.onerror=null,n.onmessage=null,n.onopen=null)};t(this.lossyDC),t(this.lossyDCSub),t(this.reliableDC),t(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0})}cleanupClient(){return re(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new Wh("a track with the same ID has already been published");return new Promise((t,n)=>{const s=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],n(new ji("publication of local track timed out, no response from server",di.InternalError))},1e4);this.pendingTrackResolvers[e.cid]={resolve:r=>{clearTimeout(s),t(r)},reject:()=>{clearTimeout(s),n(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:t}=this.pendingTrackResolvers[e.track.id];t&&t(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(t){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:t}))}return!1}updateMuteStatus(e,t){this.client.sendMuteTrack(e,t)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){return re(this,void 0,void 0,function*(){var e;return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return re(this,void 0,void 0,function*(){var t,n;if(this.pcManager&&this.pcManager.currentState!==Rs.NEW)return;this.participantSid=(t=e.participant)===null||t===void 0?void 0:t.sid;const s=this.makeRTCConfiguration(e);this.pcManager=new Yat(s,e.subscriberPrimary,this.loggerOptions),this.emit(lt.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(r,o)=>{this.client.sendIceCandidate(r,o)},this.pcManager.onPublisherOffer=r=>{this.client.sendOffer(r)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(r,o,a)=>re(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(r),this.logContext),["closed","disconnected","failed"].includes(o)&&(this.publisherConnectionPromise=void 0),r===Rs.CONNECTED){const u=this.pcState===$c.New;this.pcState=$c.Connected,u&&this.emit(lt.Connected,e)}else r===Rs.FAILED&&this.pcState===$c.Connected&&(this.pcState=$c.Disconnected,this.handleDisconnect("peerconnection failed",a==="failed"?F_.RR_SUBSCRIBER_FAILED:F_.RR_PUBLISHER_FAILED));const l=this.client.isDisconnected||this.client.currentState===hs.RECONNECTING,c=[Rs.FAILED,Rs.CLOSING,Rs.CLOSED].includes(r);l&&c&&!this._isClosed&&this.emit(lt.Offline)}),this.pcManager.onTrack=r=>{this.emit(lt.MediaTrackAdded,r.track,r.streams[0],r.receiver)},ult((n=e.serverInfo)===null||n===void 0?void 0:n.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=e=>re(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e))}),this.client.onTrickle=(e,t)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:t})),this.pcManager.addIceCandidate(e,t))},this.client.onOffer=e=>re(this,void 0,void 0,function*(){if(!this.pcManager)return;const t=yield this.pcManager.createSubscriberAnswerFromOffer(e);this.client.sendAnswer(t)}),this.client.onLocalTrackPublished=e=>{var t;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(t=e.track)===null||t===void 0?void 0:t.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:n}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],n(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(lt.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(lt.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,t)=>{this.emit(lt.RemoteMute,e,t)},this.client.onSubscribedQualityUpdate=e=>{this.emit(lt.SubscribedQualityUpdate,e)},this.client.onClose=()=>{this.handleDisconnect("signal",F_.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e==null?void 0:e.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(e.regions)),e.action){case vb.DISCONNECT:this.emit(lt.Disconnected,e==null?void 0:e.reason),this.close();break;case vb.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(s5);break;case vb.RESUME:this.handleDisconnect(s5)}}}makeRTCConfiguration(e){var t;const n=Object.assign({},this.rtcConfig);if(!((t=this.signalOpts)===null||t===void 0)&&t.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),n.encodedInsertableStreams=!0),e.iceServers&&!n.iceServers){const s=[];e.iceServers.forEach(r=>{const o={urls:r.urls};r.username&&(o.username=r.username),r.credential&&(o.credential=r.credential),s.push(o)}),n.iceServers=s}return e.clientConfiguration&&e.clientConfiguration.forceRelay===s2.ENABLED&&(n.iceTransportPolicy="relay"),n.sdpSemantics="unified-plan",n.continualGatheringPolicy="gather_continually",n}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(Une,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(zne,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(e,t,n){return re(this,void 0,void 0,function*(){if($B())return yield this.createTransceiverRTCRtpSender(e,t,n);if(qB())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new Tr("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,t,n,s){return re(this,void 0,void 0,function*(){if($B())return this.createSimulcastTransceiverSender(e,t,n,s);if(qB())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new Tr("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,t,n){return re(this,void 0,void 0,function*(){if(!this.pcManager)throw new Tr("publisher is closed");const s=[];e.mediaStream&&s.push(e.mediaStream),Xy(e)&&(e.codec=t.videoCodec);const r={direction:"sendonly",streams:s};return n&&(r.sendEncodings=n),(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,r)).sender})}createSimulcastTransceiverSender(e,t,n,s){return re(this,void 0,void 0,function*(){if(!this.pcManager)throw new Tr("publisher is closed");const r={direction:"sendonly"};s&&(r.sendEncodings=s);const o=yield this.pcManager.addPublisherTransceiver(t.mediaStreamTrack,r);if(n.videoCodec)return e.setSimulcastTrackSender(n.videoCodec,o.sender),o.sender})}createRTCRtpSender(e){return re(this,void 0,void 0,function*(){if(!this.pcManager)throw new Tr("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){return re(this,void 0,void 0,function*(){var t,n,s;if(!this._isClosed){if(this.attemptingReconnect){ti.warn("already attempting reconnect, returning early",this.logContext);return}(((t=this.clientConfiguration)===null||t===void 0?void 0:t.resumeConnection)===s2.DISABLED||((s=(n=this.pcManager)===null||n===void 0?void 0:n.currentState)!==null&&s!==void 0?s:Rs.NEW)===Rs.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(r){this.reconnectAttempts+=1;let o=!0;r instanceof Tr?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:r})),o=!1):r instanceof B_||(this.fullReconnectOnNext=!0),o?this.handleDisconnect("reconnect",F_.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(lt.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(t){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:t}))}return null}restartConnection(e){return re(this,void 0,void 0,function*(){var t,n,s;try{if(!this.url||!this.token)throw new Tr("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(lt.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let r;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new B_;r=yield this.join(e??this.url,this.token,this.signalOpts)}catch(o){throw o instanceof ji&&o.reason===di.NotAllowed?new Tr("could not reconnect, token might be expired"):new B_}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(lt.SignalRestarted,r),yield this.waitForPCReconnected(),this.client.currentState!==hs.CONNECTED)throw new B_("Signal connection got severed during reconnect");(t=this.regionUrlProvider)===null||t===void 0||t.resetAttempts(),this.emit(lt.Restarted)}catch(r){const o=yield(n=this.regionUrlProvider)===null||n===void 0?void 0:n.getNextBestRegionUrl();if(o){yield this.restartConnection(o);return}else throw(s=this.regionUrlProvider)===null||s===void 0||s.resetAttempts(),r}})}resumeConnection(e){return re(this,void 0,void 0,function*(){var t;if(!this.url||!this.token)throw new Tr("could not reconnect, url or token not saved");if(!this.pcManager)throw new Tr("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(lt.Resuming);let n;try{this.setupSignalClientCallbacks(),n=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(s){let r="";throw s instanceof Error&&(r=s.message,this.log.error(s.message,Object.assign(Object.assign({},this.logContext),{error:s}))),s instanceof ji&&s.reason===di.NotAllowed?new Tr("could not reconnect, token might be expired"):s instanceof ji&&s.reason===di.LeaveRequest?s:new B_(r)}if(this.emit(lt.SignalResumed),n){const s=this.makeRTCConfiguration(n);this.pcManager.updateConfiguration(s)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==hs.CONNECTED)throw new B_("Signal connection got severed during reconnect");this.client.setReconnected(),((t=this.reliableDC)===null||t===void 0?void 0:t.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),this.emit(lt.Resumed)})}waitForPCInitialConnection(e,t){return re(this,void 0,void 0,function*(){if(!this.pcManager)throw new Tr("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(t,e)})}waitForPCReconnected(){return re(this,void 0,void 0,function*(){this.pcState=$c.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield ol(llt),!this.pcManager)throw new Tr("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=$c.Connected}catch(e){throw this.pcState=$c.Disconnected,new ji("could not establish PC connection, ".concat(e.message),di.InternalError)}})}publishRpcResponse(e,t,n,s){return re(this,void 0,void 0,function*(){const r=new Ha({destinationIdentities:[e],kind:pi.RELIABLE,value:{case:"rpcResponse",value:new l0e({requestId:t,value:s?{case:"error",value:s.toProto()}:{case:"payload",value:n??""}})}});yield this.sendDataPacket(r,pi.RELIABLE)})}publishRpcAck(e,t){return re(this,void 0,void 0,function*(){const n=new Ha({destinationIdentities:[e],kind:pi.RELIABLE,value:{case:"rpcAck",value:new a0e({requestId:t})}});yield this.sendDataPacket(n,pi.RELIABLE)})}sendDataPacket(e,t){return re(this,void 0,void 0,function*(){const n=e.toBinary();yield this.ensurePublisherConnected(t);const s=this.dataChannelForKind(t);s&&s.send(n),this.updateAndEmitDCBufferStatus(t)})}waitForBufferStatusLow(e){return new Promise((t,n)=>re(this,void 0,void 0,function*(){if(this.isBufferStatusLow(e))t();else{const s=()=>n("Engine closed");for(this.once(lt.Closing,s);!this.dcBufferStatus.get(e);)yield ol(10);this.off(lt.Closing,s),t()}}))}ensureDataTransportConnected(e){return re(this,arguments,void 0,function(t){var n=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return function*(){var r;if(!n.pcManager)throw new Tr("PC manager is closed");const o=s?n.pcManager.subscriber:n.pcManager.publisher,a=s?"Subscriber":"Publisher";if(!o)throw new ji("".concat(a," connection not set"),di.InternalError);let l=!1;!s&&!n.dataChannelForKind(t,s)&&(n.createDataChannels(),l=!0),!l&&!s&&!n.pcManager.publisher.isICEConnected&&n.pcManager.publisher.getICEConnectionState()!=="checking"&&(l=!0),l&&n.negotiate();const c=n.dataChannelForKind(t,s);if((c==null?void 0:c.readyState)==="open")return;const u=new Date().getTime()+n.peerConnectionTimeout;for(;new Date().getTime()<u;){if(o.isICEConnected&&((r=n.dataChannelForKind(t,s))===null||r===void 0?void 0:r.readyState)==="open")return;yield ol(50)}throw new ji("could not establish ".concat(a," connection, state: ").concat(o.getICEConnectionState()),di.InternalError)}()})}ensurePublisherConnected(e){return re(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==Rs.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return re(this,void 0,void 0,function*(){return new Promise((e,t)=>re(this,void 0,void 0,function*(){if(!this.pcManager){t(new UB("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const n=new AbortController,s=()=>{n.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&t("cannot negotiate on closed engine"),this.on(lt.Closing,s),this.pcManager.publisher.once(Cb.RTPVideoPayloadTypes,r=>{const o=new Map;r.forEach(a=>{const l=a.codec.toLowerCase();Cat(l)&&o.set(a.payload,l)}),this.emit(lt.RTPVideoMapUpdate,o)});try{yield this.pcManager.negotiate(n),e()}catch(r){r instanceof UB&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",F_.RR_UNKNOWN),t(r)}finally{this.off(lt.Closing,s)}}))})}dataChannelForKind(e,t){if(t){if(e===pi.LOSSY)return this.lossyDCSub;if(e===pi.RELIABLE)return this.reliableDCSub}else{if(e===pi.LOSSY)return this.lossyDC;if(e===pi.RELIABLE)return this.reliableDC}}sendSyncState(e,t){var n,s;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const r=this.pcManager.subscriber.getLocalDescription(),o=this.pcManager.subscriber.getRemoteDescription(),a=(s=(n=this.signalOpts)===null||n===void 0?void 0:n.autoSubscribe)!==null&&s!==void 0?s:!0,l=new Array,c=new Array;e.forEach(u=>{u.isDesired!==a&&l.push(u.trackSid),u.isEnabled||c.push(u.trackSid)}),this.client.sendSyncState(new k0e({answer:r?NN({sdp:r.sdp,type:r.type}):void 0,offer:o?NN({sdp:o.sdp,type:o.type}):void 0,subscription:new HA({trackSids:l,subscribe:!a,participantTracks:[]}),publishTracks:Iat(t),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:c}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],t=(n,s)=>{(n==null?void 0:n.id)!==void 0&&n.id!==null&&e.push(new x0e({label:n.label,id:n.id,target:s}))};return t(this.dataChannelForKind(pi.LOSSY),eu.PUBLISHER),t(this.dataChannelForKind(pi.RELIABLE),eu.PUBLISHER),t(this.dataChannelForKind(pi.LOSSY,!0),eu.SUBSCRIBER),t(this.dataChannelForKind(pi.RELIABLE,!0),eu.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&Co.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){Xa()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){Xa()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class B_ extends Error{}function ult(i){return i!==void 0&&i>13}function dlt(i,e){const t=i.participantIdentity?i.participantIdentity:e.participantIdentity;i.participantIdentity=t,e.participantIdentity=t;const n=i.destinationIdentities.length!==0?i.destinationIdentities:e.destinationIdentities;i.destinationIdentities=n,e.destinationIdentities=n}class tV{constructor(e,t){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=t}updateToken(e){this.token=e}isCloud(){return GB(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return re(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const t=this.regionSettings.regions.filter(n=>!this.attemptedRegions.find(s=>s.url===n.url));if(t.length>0){const n=t[0];return this.attemptedRegions.push(n),ti.debug("next region: ".concat(n.region)),n.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return re(this,void 0,void 0,function*(){const t=yield fetch("".concat(hlt(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(t.ok){const n=yield t.json();return this.lastUpdateAt=Date.now(),n}else throw new ji("Could not fetch region settings: ".concat(t.statusText),t.status===401?di.NotAllowed:di.InternalError,t.status)})}setServerReportedRegions(e){this.regionSettings=e,this.lastUpdateAt=Date.now()}}function hlt(i){return"".concat(i.protocol.replace("ws","http"),"//").concat(i.host,"/settings")}class b1e{get info(){return this._info}constructor(e,t,n){this.reader=t,this.totalByteSize=n,this._info=e,this.bytesReceived=0}}class flt extends b1e{handleChunkReceived(e){var t;this.bytesReceived+=e.content.byteLength;const n=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(t=this.onProgress)===null||t===void 0||t.call(this,n)}[Symbol.asyncIterator](){const e=this.reader.getReader();return{next:()=>re(this,void 0,void 0,function*(){try{const{done:t,value:n}=yield e.read();return t?{done:!0,value:void 0}:(this.handleChunkReceived(n),{done:!1,value:n.content})}catch{return{done:!0,value:void 0}}}),return(){return re(this,void 0,void 0,function*(){return e.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return re(this,void 0,void 0,function*(){var e,t,n,s;let r=new Set;try{for(var o=!0,a=Mg(this),l;l=yield a.next(),e=l.done,!e;o=!0){s=l.value,o=!1;const c=s;r.add(c)}}catch(c){t={error:c}}finally{try{!o&&!e&&(n=a.return)&&(yield n.call(a))}finally{if(t)throw t.error}}return Array.from(r)})}}class glt extends b1e{constructor(e,t,n){super(e,t,n),this.receivedChunks=new Map}handleChunkReceived(e){var t;const n=HL(e.chunkIndex),s=this.receivedChunks.get(n);if(s&&s.version>e.version)return;this.receivedChunks.set(n,e),this.bytesReceived+=e.content.byteLength;const r=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(t=this.onProgress)===null||t===void 0||t.call(this,r)}[Symbol.asyncIterator](){const e=this.reader.getReader(),t=new TextDecoder;return{next:()=>re(this,void 0,void 0,function*(){try{const{done:n,value:s}=yield e.read();return n?{done:!0,value:void 0}:(this.handleChunkReceived(s),{done:!1,value:t.decode(s.content)})}catch{return{done:!0,value:void 0}}}),return(){return re(this,void 0,void 0,function*(){return e.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return re(this,void 0,void 0,function*(){var e,t,n,s;let r="";try{for(var o=!0,a=Mg(this),l;l=yield a.next(),e=l.done,!e;o=!0)s=l.value,o=!1,r+=s}catch(c){t={error:c}}finally{try{!o&&!e&&(n=a.return)&&(yield n.call(a))}finally{if(t)throw t.error}}return r})}}class mlt{constructor(e,t,n){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=n,this.info=t}write(e){return this.defaultWriter.write(e)}close(){return re(this,void 0,void 0,function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(e=this.onClose)===null||e===void 0||e.call(this)})}}class plt extends mlt{}class y1e extends Fe{constructor(e,t,n,s,r){super(e,n,r),this.sid=t,this.receiver=s}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?tt.Muted:tt.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const t=n=>{n.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",t),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(tt.Ended,this))};e.addEventListener("removetrack",t)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return re(this,void 0,void 0,function*(){var e;return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),gj)),Dat()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var t;this.timeSyncHandle=requestAnimationFrame(()=>e());const n=(t=this.receiver)===null||t===void 0?void 0:t.getSynchronizationSources()[0];if(n){const{timestamp:s,rtpTimestamp:r}=n;r&&this.rtpTimestamp!==r&&(this.emit(tt.TimeSyncUpdate,{timestamp:s,rtpTimestamp:r}),this.rtpTimestamp=r)}};e()}}class _lt extends y1e{constructor(e,t,n,s,r,o){super(e,t,Fe.Kind.Audio,n,o),this.monitorReceiver=()=>re(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const a=yield this.getReceiverStats();a&&this.prevStats&&this.receiver&&(this._currentBitrate=$A(a,this.prevStats)),this.prevStats=a}),this.audioContext=s,this.webAudioPluginNodes=[],r&&(this.sinkId=r.deviceId)}setVolume(e){var t;for(const n of this.attachedElements)this.audioContext?(t=this.gainNode)===null||t===void 0||t.gain.setTargetAtTime(e,0,.1):n.volume=e;Od()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(Od())return 1;let e=0;return this.attachedElements.forEach(t=>{t.volume>e&&(e=t.volume)}),e}setSinkId(e){return re(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(t=>{if(KB(t))return t.setSinkId(e)}))})}attach(e){const t=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&KB(e)&&e.setSinkId(this.sinkId),this.audioContext&&t&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let t;return e?(t=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(t=super.detach(),this.disconnectWebAudio()),t}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,t){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(t.srcObject);let n=this.sourceNode;this.webAudioPluginNodes.forEach(s=>{n.connect(s),n=s}),this.gainNode=e.createGain(),n.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(tt.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(s=>{this.emit(tt.AudioPlaybackFailed,s)})}disconnectWebAudio(){var e,t;(e=this.gainNode)===null||e===void 0||e.disconnect(),(t=this.sourceNode)===null||t===void 0||t.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return re(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let t;return e.forEach(n=>{n.type==="inbound-rtp"&&(t={type:"audio",streamId:n.id,timestamp:n.timestamp,jitter:n.jitter,bytesReceived:n.bytesReceived,concealedSamples:n.concealedSamples,concealmentEvents:n.concealmentEvents,silentConcealedSamples:n.silentConcealedSamples,silentConcealmentEvents:n.silentConcealmentEvents,totalAudioEnergy:n.totalAudioEnergy,totalSamplesDuration:n.totalSamplesDuration})}),t})}}const r5=100;class vlt extends y1e{constructor(e,t,n,s,r){super(e,t,Fe.Kind.Video,n,r),this.elementInfos=[],this.monitorReceiver=()=>re(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const o=yield this.getReceiverStats();o&&this.prevStats&&this.receiver&&(this._currentBitrate=$A(o,this.prevStats)),this.prevStats=o}),this.debouncedHandleResize=dj(()=>{this.updateDimensions()},r5),this.adaptiveStreamSettings=s}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(t=>{e?yb(this._mediaStreamTrack,t):bv(this._mediaStreamTrack,t)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(t=>t.element===e)===void 0){const t=new blt(e);this.observeElementInfo(t)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(t=>t===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const t=this.elementInfos.filter(n=>n===e);for(const n of t)n.stopObserving();this.elementInfos=this.elementInfos.filter(n=>n!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let t=[];if(e)return this.stopObservingElement(e),super.detach(e);t=super.detach();for(const n of t)this.stopObservingElement(n);return t}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return re(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let t,n="",s=new Map;return e.forEach(r=>{r.type==="inbound-rtp"?(n=r.codecId,t={type:"video",streamId:r.id,framesDecoded:r.framesDecoded,framesDropped:r.framesDropped,framesReceived:r.framesReceived,packetsReceived:r.packetsReceived,packetsLost:r.packetsLost,frameWidth:r.frameWidth,frameHeight:r.frameHeight,pliCount:r.pliCount,firCount:r.firCount,nackCount:r.nackCount,jitter:r.jitter,timestamp:r.timestamp,bytesReceived:r.bytesReceived,decoderImplementation:r.decoderImplementation}):r.type==="codec"&&s.set(r.id,r)}),t&&n!==""&&s.get(n)&&(t.mimeType=s.get(n).mimeType),t})}stopObservingElement(e){const t=this.elementInfos.filter(n=>n.element===e);for(const n of t)this.stopObservingElementInfo(n)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return re(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var e,t;const n=this.elementInfos.reduce((a,l)=>Math.max(a,l.visibilityChangedAt||0),0),s=!((t=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pauseVideoInBackground)!==null&&t!==void 0)||t?this.isInBackground:!1,r=this.elementInfos.some(a=>a.pictureInPicture),o=this.elementInfos.some(a=>a.visible)&&!s||r;if(this.lastVisible!==o){if(!o&&Date.now()-n<r5){Co.setTimeout(()=>{this.updateVisibility()},r5);return}this.lastVisible=o,this.emit(tt.VisibilityChanged,o,this)}}updateDimensions(){var e,t;let n=0,s=0;const r=this.getPixelDensity();for(const o of this.elementInfos){const a=o.width()*r,l=o.height()*r;a+l>n+s&&(n=a,s=l)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===n&&((t=this.lastDimensions)===null||t===void 0?void 0:t.height)===s||(this.lastDimensions={width:n,height:s},this.emit(tt.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const t=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return t==="screen"?Sne():t||(Sne()>2?2:1)}}class blt{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,t){this.onVisibilityChanged=n=>{var s;const{target:r,isIntersecting:o}=n;r===this.element&&(this.isIntersecting=o,this.isPiP=rC(this.element),this.visibilityChangedAt=Date.now(),(s=this.handleVisibilityChanged)===null||s===void 0||s.call(this))},this.onEnterPiP=()=>{var n,s,r;(s=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||s===void 0||s.addEventListener("pagehide",this.onLeavePiP),this.isPiP=rC(this.element),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.onLeavePiP=()=>{var n;this.isPiP=rC(this.element),(n=this.handleVisibilityChanged)===null||n===void 0||n.call(this)},this.element=e,this.isIntersecting=t??nV(e),this.isPiP=Xa()&&rC(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,t,n;this.isIntersecting=nV(this.element),this.isPiP=rC(this.element),this.element.handleResize=()=>{var s;(s=this.handleResize)===null||s===void 0||s.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,xne().observe(this.element),kne().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(e=window.documentPictureInPicture)===null||e===void 0||e.addEventListener("enter",this.onEnterPiP),(n=(t=window.documentPictureInPicture)===null||t===void 0?void 0:t.window)===null||n===void 0||n.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,t,n,s,r;(e=xne())===null||e===void 0||e.unobserve(this.element),(t=kne())===null||t===void 0||t.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(n=window.documentPictureInPicture)===null||n===void 0||n.removeEventListener("enter",this.onEnterPiP),(r=(s=window.documentPictureInPicture)===null||s===void 0?void 0:s.window)===null||r===void 0||r.removeEventListener("pagehide",this.onLeavePiP)}}function rC(i){var e,t;return document.pictureInPictureElement===i?!0:!((e=window.documentPictureInPicture)===null||e===void 0)&&e.window?nV(i,(t=window.documentPictureInPicture)===null||t===void 0?void 0:t.window):!1}function nV(i,e){const t=e||window;let n=i.offsetTop,s=i.offsetLeft;const r=i.offsetWidth,o=i.offsetHeight,{hidden:a}=i,{display:l}=getComputedStyle(i);for(;i.offsetParent;)i=i.offsetParent,n+=i.offsetTop,s+=i.offsetLeft;return n<t.pageYOffset+t.innerHeight&&s<t.pageXOffset+t.innerWidth&&n+o>t.pageYOffset&&s+r>t.pageXOffset&&!a&&l!=="none"}class Ih extends qd.EventEmitter{constructor(e,t,n,s){var r;super(),this.metadataMuted=!1,this.encryption=xl.NONE,this.log=ti,this.handleMuted=()=>{this.emit(tt.Muted)},this.handleUnmuted=()=>{this.emit(tt.Unmuted)},this.log=Sf((r=s==null?void 0:s.loggerName)!==null&&r!==void 0?r:yu.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=t,this.trackName=n,this.source=Fe.Source.Unknown}setTrack(e){this.track&&(this.track.off(tt.Muted,this.handleMuted),this.track.off(tt.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(tt.Muted,this.handleMuted),e.on(tt.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),Ni(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==xl.NONE}get audioTrack(){if(kf(this.track))return this.track}get videoTrack(){if(Xy(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=Fe.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===Fe.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(i){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(i.SubscriptionStatus||(i.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(i.PermissionStatus||(i.PermissionStatus={}))})(Ih||(Ih={}));class iV extends Ih{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,t,n,s){super(e,t.sid,t.name,s),this.track=void 0,this.handleTrackEnded=()=>{this.emit(tt.Ended)},this.updateInfo(t),this.setTrack(n)}setTrack(e){this.track&&this.track.off(tt.Ended,this.handleTrackEnded),super.setTrack(e),e&&e.on(tt.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return re(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){return re(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){return re(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){return re(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}getTrackFeatures(){var e;if(kf(this.track)){const t=this.track.getSourceTrackSettings(),n=new Set;return t.autoGainControl&&n.add(cd.TF_AUTO_GAIN_CONTROL),t.echoCancellation&&n.add(cd.TF_ECHO_CANCELLATION),t.noiseSuppression&&n.add(cd.TF_NOISE_SUPPRESSION),t.channelCount&&t.channelCount>1&&n.add(cd.TF_STEREO),!((e=this.options)===null||e===void 0)&&e.dtx||n.add(cd.TF_NO_DTX),this.track.enhancedNoiseCancellation&&n.add(cd.TF_ENHANCED_NOISE_CANCELLATION),Array.from(n.values())}else return[]}}var Og;(function(i){i.Excellent="excellent",i.Good="good",i.Poor="poor",i.Lost="lost",i.Unknown="unknown"})(Og||(Og={}));function ylt(i){switch(i){case TC.EXCELLENT:return Og.Excellent;case TC.GOOD:return Og.Good;case TC.POOR:return Og.Poor;case TC.LOST:return Og.Lost;default:return Og.Unknown}}class w1e extends qd.EventEmitter{get logContext(){var e,t;return Object.assign({},(t=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||t===void 0?void 0:t.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(e=>e.isEncrypted)}get isAgent(){var e;return((e=this.permissions)===null||e===void 0?void 0:e.agent)||this.kind===IN.AGENT}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,t,n,s,r,o){let a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:IN.STANDARD;var l;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=Og.Unknown,this.log=ti,this.log=Sf((l=o==null?void 0:o.loggerName)!==null&&l!==void 0?l:yu.Participant),this.loggerOptions=o,this.setMaxListeners(100),this.sid=e,this.identity=t,this.name=n,this.metadata=s,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=a,this._attributes=r??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,t]of this.trackPublications)if(t.source===e)return t}getTrackPublicationByName(e){for(const[,t]of this.trackPublications)if(t.trackName===e)return t}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const t=this.getTrackPublication(Fe.Source.Camera);return!(!((e=t==null?void 0:t.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const t=this.getTrackPublication(Fe.Source.Microphone);return!(!((e=t==null?void 0:t.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(Fe.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,this.log.trace("update participant info",Object.assign(Object.assign({},this.logContext),{info:e})),!0)}_setMetadata(e){const t=this.metadata!==e,n=this.metadata;this.metadata=e,t&&this.emit(ut.ParticipantMetadataChanged,n)}_setName(e){const t=this.name!==e;this.name=e,t&&this.emit(ut.ParticipantNameChanged,e)}_setAttributes(e){const t=Nat(this.attributes,e);this._attributes=e,Object.keys(t).length>0&&this.emit(ut.AttributesChanged,t)}setPermissions(e){var t,n,s,r,o,a;const l=this.permissions,c=e.canPublish!==((t=this.permissions)===null||t===void 0?void 0:t.canPublish)||e.canSubscribe!==((n=this.permissions)===null||n===void 0?void 0:n.canSubscribe)||e.canPublishData!==((s=this.permissions)===null||s===void 0?void 0:s.canPublishData)||e.hidden!==((r=this.permissions)===null||r===void 0?void 0:r.hidden)||e.recorder!==((o=this.permissions)===null||o===void 0?void 0:o.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((u,d)=>{var h;return u!==((h=this.permissions)===null||h===void 0?void 0:h.canPublishSources[d])})||e.canSubscribeMetrics!==((a=this.permissions)===null||a===void 0?void 0:a.canSubscribeMetrics);return this.permissions=e,c&&this.emit(ut.ParticipantPermissionsChanged,l),c}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(ut.IsSpeakingChanged,e))}setConnectionQuality(e){const t=this._connectionQuality;this._connectionQuality=ylt(e),t!==this._connectionQuality&&this.emit(ut.ConnectionQualityChanged,this._connectionQuality)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach(t=>kf(t.track)&&t.track.setAudioContext(e))}addTrackPublication(e){e.on(tt.Muted,()=>{this.emit(ut.TrackMuted,e)}),e.on(tt.Unmuted,()=>{this.emit(ut.TrackUnmuted,e)});const t=e;switch(t.track&&(t.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case Fe.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case Fe.Kind.Video:this.videoTrackPublications.set(e.trackSid,e);break}}}function wlt(i){var e,t,n;if(!i.participantSid&&!i.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new C0e({participantIdentity:(e=i.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(t=i.participantSid)!==null&&t!==void 0?t:"",allTracks:(n=i.allowAll)!==null&&n!==void 0?n:!1,trackSids:i.allowedTrackSids||[]})}const LT=15e3;class Clt extends w1e{constructor(e,t,n,s,r){super(e,t,void 0,void 0,void 0,{loggerName:s.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=xl.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new l1e)},this.handleReconnected=()=>{var o,a;(a=(o=this.reconnectFuture)===null||o===void 0?void 0:o.resolve)===null||a===void 0||a.call(o),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var o,a;this.reconnectFuture&&(this.reconnectFuture.promise.catch(l=>this.log.warn(l.message,this.logContext)),(a=(o=this.reconnectFuture)===null||o===void 0?void 0:o.reject)===null||a===void 0||a.call(o,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0)},this.handleSignalRequestResponse=o=>{const{requestId:a,reason:l,message:c}=o,u=this.pendingSignalRequests.get(a);u&&(l!==sj.OK&&u.reject(new bne(c,l)),this.pendingSignalRequests.delete(a))},this.handleDataPacket=o=>{switch(o.value.case){case"rpcResponse":let a=o.value.value,l=null,c=null;a.value.case==="payload"?l=a.value.value:a.value.case==="error"&&(c=Os.fromProto(a.value.value)),this.handleIncomingRpcResponse(a.requestId,l,c);break;case"rpcAck":let u=o.value.value;this.handleIncomingRpcAck(u.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(o=>wlt(o)))},this.onTrackUnmuted=o=>{this.onTrackMuted(o,o.isUpstreamPaused)},this.onTrackMuted=(o,a)=>{if(a===void 0&&(a=!0),!o.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),Ni(o)));return}this.engine.updateMuteStatus(o.sid,a)},this.onTrackUpstreamPaused=o=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),Ni(o))),this.onTrackMuted(o,!0)},this.onTrackUpstreamResumed=o=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),Ni(o))),this.onTrackMuted(o,o.isMuted)},this.onTrackFeatureUpdate=o=>{const a=this.audioTrackPublications.get(o.sid);if(!a){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(o.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(a.trackSid,a.getTrackFeatures())},this.handleSubscribedQualityUpdate=o=>re(this,void 0,void 0,function*(){var a,l,c,u,d,h;if(!(!((d=this.roomOptions)===null||d===void 0)&&d.dynacast))return;const g=this.videoTrackPublications.get(o.trackSid);if(!g){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}if(o.subscribedCodecs.length>0){if(!g.videoTrack)return;const y=yield g.videoTrack.setPublishingCodecs(o.subscribedCodecs);try{for(var p=!0,_=Mg(y),v;v=yield _.next(),a=v.done,!a;p=!0){u=v.value,p=!1;const w=u;dat(w)&&(this.log.debug("publish ".concat(w," for ").concat(g.videoTrack.sid),Object.assign(Object.assign({},this.logContext),Ni(g))),yield this.publishAdditionalCodecForTrack(g.videoTrack,w,g.options))}}catch(w){l={error:w}}finally{try{!p&&!a&&(c=_.return)&&(yield c.call(_))}finally{if(l)throw l.error}}}else o.subscribedQualities.length>0&&(yield(h=g.videoTrack)===null||h===void 0?void 0:h.setPublishingLayers(o.subscribedQualities))}),this.handleLocalTrackUnpublished=o=>{const a=this.trackPublications.get(o.trackSid);if(!a){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}this.unpublishTrack(a.track)},this.handleTrackEnded=o=>re(this,void 0,void 0,function*(){if(o.source===Fe.Source.ScreenShare||o.source===Fe.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),Ni(o))),this.unpublishTrack(o);else if(o.isUserProvided)yield o.mute();else if(Rp(o)||hg(o))try{if(Xa())try{const a=yield navigator==null?void 0:navigator.permissions.query({name:o.source===Fe.Source.Camera?"camera":"microphone"});if(a&&a.state==="denied")throw this.log.warn("user has revoked access to ".concat(o.source),Object.assign(Object.assign({},this.logContext),Ni(o))),a.onchange=()=>{a.state!=="denied"&&(o.isMuted||o.restartTrack(),a.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}o.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),Ni(o))),Rp(o)?yield o.restartTrack({deviceId:"default"}):yield o.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),Ni(o))),yield o.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=n,this.roomOptions=s,this.setupEngine(n),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=r}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==xl.NONE}getTrackPublication(e){const t=super.getTrackPublication(e);if(t)return t}getTrackPublicationByName(e){const t=super.getTrackPublicationByName(e);if(t)return t}setupEngine(e){this.engine=e,this.engine.on(lt.RemoteMute,(t,n)=>{const s=this.trackPublications.get(t);!s||!s.track||(n?s.mute():s.unmute())}),this.engine.on(lt.Connected,this.handleReconnected).on(lt.SignalRestarted,this.handleReconnected).on(lt.SignalResumed,this.handleReconnected).on(lt.Restarting,this.handleReconnecting).on(lt.Resuming,this.handleReconnecting).on(lt.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(lt.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(lt.Disconnected,this.handleDisconnected).on(lt.SignalRequestResponse,this.handleSignalRequestResponse).on(lt.DataPacketReceived,this.handleDataPacket)}setMetadata(e){return re(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:e})})}setName(e){return re(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:e})})}setAttributes(e){return re(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:e})})}requestMetadataUpdate(e){return re(this,arguments,void 0,function(t){var n=this;let{metadata:s,name:r,attributes:o}=t;return function*(){return new Promise((a,l)=>re(n,void 0,void 0,function*(){var c,u;try{let d=!1;const h=yield this.engine.client.sendUpdateLocalMetadata((c=s??this.metadata)!==null&&c!==void 0?c:"",(u=r??this.name)!==null&&u!==void 0?u:"",o),g=performance.now();for(this.pendingSignalRequests.set(h,{resolve:a,reject:p=>{l(p),d=!0},values:{name:r,metadata:s,attributes:o}});performance.now()-g<5e3&&!d;){if((!r||this.name===r)&&(!s||this.metadata===s)&&(!o||Object.entries(o).every(p=>{let[_,v]=p;return this.attributes[_]===v||v===""&&!this.attributes[_]}))){this.pendingSignalRequests.delete(h),a();return}yield ol(50)}l(new bne("Request to update local metadata timed out","TimeoutError"))}catch(d){d instanceof Error&&l(d)}}))}()})}setCameraEnabled(e,t,n){return this.setTrackEnabled(Fe.Source.Camera,e,t,n)}setMicrophoneEnabled(e,t,n){return this.setTrackEnabled(Fe.Source.Microphone,e,t,n)}setScreenShareEnabled(e,t,n){return this.setTrackEnabled(Fe.Source.ScreenShare,e,t,n)}setPermissions(e){const t=this.permissions,n=super.setPermissions(e);return n&&t&&this.emit(ut.ParticipantPermissionsChanged,t),n}setE2EEEnabled(e){return re(this,void 0,void 0,function*(){this.encryptionType=e?xl.GCM:xl.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,t,n,s){return re(this,void 0,void 0,function*(){var r,o;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:t})),this.republishPromise&&(yield this.republishPromise);let a=this.getTrackPublication(e);if(t)if(a)yield a.unmute();else{let l;if(this.pendingPublishing.has(e)){const c=yield this.waitForPendingPublicationOfSource(e);return c||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield c==null?void 0:c.unmute(),c}this.pendingPublishing.add(e);try{switch(e){case Fe.Source.Camera:l=yield this.createTracks({video:(r=n)!==null&&r!==void 0?r:!0});break;case Fe.Source.Microphone:l=yield this.createTracks({audio:(o=n)!==null&&o!==void 0?o:!0});break;case Fe.Source.ScreenShare:l=yield this.createScreenTracks(Object.assign({},n));break;default:throw new Wh(e)}}catch(c){throw l==null||l.forEach(u=>{u.stop()}),c instanceof Error&&this.emit(ut.MediaDevicesError,c),this.pendingPublishing.delete(e),c}try{const c=[];for(const d of l)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),Ni(d))),c.push(this.publishTrack(d,s));[a]=yield Promise.all(c)}catch(c){throw l==null||l.forEach(u=>{u.stop()}),c}finally{this.pendingPublishing.delete(e)}}else if(!(a!=null&&a.track)&&this.pendingPublishing.has(e)&&(a=yield this.waitForPendingPublicationOfSource(e),a||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),a&&a.track)if(e===Fe.Source.ScreenShare){a=yield this.unpublishTrack(a.track);const l=this.getTrackPublication(Fe.Source.ScreenShareAudio);l&&l.track&&this.unpublishTrack(l.track)}else yield a.mute();return a})}enableCameraAndMicrophone(){return re(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(Fe.Source.Camera)||this.pendingPublishing.has(Fe.Source.Microphone))){this.pendingPublishing.add(Fe.Source.Camera),this.pendingPublishing.add(Fe.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(t=>this.publishTrack(t)))}finally{this.pendingPublishing.delete(Fe.Source.Camera),this.pendingPublishing.delete(Fe.Source.Microphone)}}})}createTracks(e){return re(this,void 0,void 0,function*(){var t,n;e??(e={});const s=c1e(e,(t=this.roomOptions)===null||t===void 0?void 0:t.audioCaptureDefaults,(n=this.roomOptions)===null||n===void 0?void 0:n.videoCaptureDefaults),{audioProcessor:r,videoProcessor:o,optionsWithoutProcessor:a}=lj(s),l=jA(a);let c;try{c=yield navigator.mediaDevices.getUserMedia(l)}catch(u){throw u instanceof Error&&(l.audio&&(this.microphoneError=u),l.video&&(this.cameraError=u)),u}return l.audio&&(this.microphoneError=void 0,this.emit(ut.AudioStreamAcquired)),l.video&&(this.cameraError=void 0),Promise.all(c.getTracks().map(u=>re(this,void 0,void 0,function*(){const d=u.kind==="audio";let h;const g=d?l.audio:l.video;typeof g!="boolean"&&(h=g);const p=_1e(u,h,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return p.kind===Fe.Kind.Video?p.source=Fe.Source.Camera:p.kind===Fe.Kind.Audio&&(p.source=Fe.Source.Microphone,p.setAudioContext(this.audioContext)),p.mediaStream=c,kf(p)&&r?yield p.setProcessor(r):Xy(p)&&o&&(yield p.setProcessor(o)),p})))})}createScreenTracks(e){return re(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new oj("getDisplayMedia not supported");e.resolution===void 0&&!_at()&&(e.resolution=aj.h1080fps30.resolution);const t=Lat(e),n=yield navigator.mediaDevices.getDisplayMedia(t),s=n.getVideoTracks();if(s.length===0)throw new Wh("no video track found");const r=new PN(s[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});r.source=Fe.Source.ScreenShare,e.contentHint&&(r.mediaStreamTrack.contentHint=e.contentHint);const o=[r];if(n.getAudioTracks().length>0){this.emit(ut.AudioStreamAcquired);const a=new RN(n.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});a.source=Fe.Source.ScreenShareAudio,o.push(a)}return o})}publishTrack(e,t){return re(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(e,t)})}publishOrRepublishTrack(e,t){return re(this,arguments,void 0,function(n,s){var r=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var a,l,c,u;Rp(n)&&n.setAudioContext(r.audioContext),yield(a=r.reconnectFuture)===null||a===void 0?void 0:a.promise,r.republishPromise&&!o&&(yield r.republishPromise),wb(n)&&r.pendingPublishPromises.has(n)&&(yield r.pendingPublishPromises.get(n));let d;if(n instanceof MediaStreamTrack)d=n.getConstraints();else{d=n.constraints;let y;switch(n.source){case Fe.Source.Microphone:y="audioinput";break;case Fe.Source.Camera:y="videoinput"}y&&r.activeDeviceMap.has(y)&&(d=Object.assign(Object.assign({},d),{deviceId:r.activeDeviceMap.get(y)}))}if(n instanceof MediaStreamTrack)switch(n.kind){case"audio":n=new RN(n,d,!0,r.audioContext,{loggerName:r.roomOptions.loggerName,loggerContextCb:()=>r.logContext});break;case"video":n=new PN(n,d,!0,{loggerName:r.roomOptions.loggerName,loggerContextCb:()=>r.logContext});break;default:throw new Wh("unsupported MediaStreamTrack kind ".concat(n.kind))}else n.updateLoggerOptions({loggerName:r.roomOptions.loggerName,loggerContextCb:()=>r.logContext});let h;if(r.trackPublications.forEach(y=>{y.track&&y.track===n&&(h=y)}),h)return r.log.warn("track has already been published, skipping",Object.assign(Object.assign({},r.logContext),Ni(h))),h;const g="channelCount"in n.mediaStreamTrack.getSettings()&&n.mediaStreamTrack.getSettings().channelCount===2||n.mediaStreamTrack.getConstraints().channelCount===2,p=(l=s==null?void 0:s.forceStereo)!==null&&l!==void 0?l:g;p&&(s||(s={}),s.dtx===void 0&&r.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},r.logContext),Ni(n))),s.red===void 0&&r.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(c=s.dtx)!==null&&c!==void 0||(s.dtx=!1),(u=s.red)!==null&&u!==void 0||(s.red=!1));const _=Object.assign(Object.assign({},r.roomOptions.publishDefaults),s);!vat()&&r.roomOptions.e2ee&&(r.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},r.logContext)),_.simulcast=!1),_.source&&(n.source=_.source);const v=r.publish(n,_,p);r.pendingPublishPromises.set(n,v);try{return yield v}catch(y){throw y}finally{r.pendingPublishPromises.delete(n)}}()})}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),Ni(e))),!1;const{canPublish:t,canPublishSources:n}=this.permissions;return t&&(n.length===0||n.map(s=>Rat(s)).includes(e.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),Ni(e))),!1)}publish(e,t,n){return re(this,void 0,void 0,function*(){var s,r,o,a,l,c,u,d,h,g;if(!this.hasPermissionsToPublish(e))throw new tat("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(T=>wb(e)&&T.source===e.source)&&e.source!==Fe.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),Ni(e))),t.stopMicTrackOnMute&&kf(e)&&(e.stopOnMute=!0),e.source===Fe.Source.ScreenShare&&hy()&&(t.simulcast=!1),t.videoCodec==="av1"&&!gat()&&(t.videoCodec=void 0),t.videoCodec==="vp9"&&!mat()&&(t.videoCodec=void 0),t.videoCodec===void 0&&(t.videoCodec=ZB),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(T=>t.videoCodec===UL(T.mime))||(t.videoCodec=UL(this.enabledPublishVideoCodecs[0].mime)));const _=t.videoCodec;e.on(tt.Muted,this.onTrackMuted),e.on(tt.Unmuted,this.onTrackUnmuted),e.on(tt.Ended,this.handleTrackEnded),e.on(tt.UpstreamPaused,this.onTrackUpstreamPaused),e.on(tt.UpstreamResumed,this.onTrackUpstreamResumed),e.on(tt.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const v=new AB({cid:e.mediaStreamTrack.id,name:t.name,type:Fe.kindToProto(e.kind),muted:e.isMuted,source:Fe.sourceToProto(e.source),disableDtx:!(!((s=t.dtx)!==null&&s!==void 0)||s),encryption:this.encryptionType,stereo:n,disableRed:this.isE2EEEnabled||!(!((r=t.red)!==null&&r!==void 0)||r),stream:t==null?void 0:t.stream,backupCodecPolicy:t==null?void 0:t.backupCodecPolicy});let y;if(e.kind===Fe.Kind.Video){let T={width:0,height:0};try{T=yield e.waitForDimensions()}catch{const L=(a=(o=this.roomOptions.videoCaptureDefaults)===null||o===void 0?void 0:o.resolution)!==null&&a!==void 0?a:dy.h720.resolution;T={width:L.width,height:L.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),Ni(e)),{dims:T}))}v.width=T.width,v.height=T.height,hg(e)&&(CS(_)&&(e.source===Fe.Source.ScreenShare&&(t.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),Ni(e))))),t.scalabilityMode=(l=t.scalabilityMode)!==null&&l!==void 0?l:"L3T3_KEY"),v.simulcastCodecs=[new RB({codec:_,cid:e.mediaStreamTrack.id})],t.backupCodec===!0&&(t.backupCodec={codec:ZB}),t.backupCodec&&_!==t.backupCodec.codec&&v.encryption===xl.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),v.simulcastCodecs.push(new RB({codec:t.backupCodec.codec,cid:""})))),y=eV(e.source===Fe.Source.ScreenShare,v.width,v.height,t),v.layers=Hne(v.width,v.height,y,CS(t.videoCodec))}else e.kind===Fe.Kind.Audio&&(y=[{maxBitrate:(c=t.audioPreset)===null||c===void 0?void 0:c.maxBitrate,priority:(d=(u=t.audioPreset)===null||u===void 0?void 0:u.priority)!==null&&d!==void 0?d:"high",networkPriority:(g=(h=t.audioPreset)===null||h===void 0?void 0:h.priority)!==null&&g!==void 0?g:"high"}]);if(!this.engine||this.engine.isClosed)throw new Tr("cannot publish track when not connected");const w=()=>re(this,void 0,void 0,function*(){var T,R,L;if(!this.engine.pcManager)throw new Tr("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,t,y),hg(e)&&((T=t.degradationPreference)!==null&&T!==void 0||(t.degradationPreference=olt(e)),e.setDegradationPreference(t.degradationPreference)),y)if(hy()&&e.kind===Fe.Kind.Audio){let I;for(const A of this.engine.pcManager.publisher.getTransceivers())if(A.sender===e.sender){I=A;break}I&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:I,codec:"opus",maxbr:!((R=y[0])===null||R===void 0)&&R.maxBitrate?y[0].maxBitrate/1e3:0})}else e.codec&&CS(e.codec)&&(!((L=y[0])===null||L===void 0)&&L.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:v.cid,codec:e.codec,maxbr:y[0].maxBitrate/1e3});yield this.engine.negotiate()});let x;if(this.enabledPublishVideoCodecs.length>0)x=(yield Promise.all([this.engine.addTrack(v),w()]))[0];else{x=yield this.engine.addTrack(v);let T;if(x.codecs.forEach(R=>{T===void 0&&(T=R.mimeType)}),T&&e.kind===Fe.Kind.Video){const R=UL(T);R!==_&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),Ni(e)),{codec:R})),t.videoCodec=R,y=eV(e.source===Fe.Source.ScreenShare,v.width,v.height,t))}yield w()}const k=new iV(e.kind,x,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return k.options=t,e.sid=x.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:y,trackInfo:x})),hg(e)?e.startMonitor(this.engine.client):Rp(e)&&e.startMonitor(),this.addTrackPublication(k),this.emit(ut.LocalTrackPublished,k),k})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,t,n){return re(this,void 0,void 0,function*(){var s;if(this.encryptionType!==xl.NONE)return;let r;if(this.trackPublications.forEach(g=>{g.track&&g.track===e&&(r=g)}),!r)throw new Wh("track is not published");if(!hg(e))throw new Wh("track is not a video track");const o=Object.assign(Object.assign({},(s=this.roomOptions)===null||s===void 0?void 0:s.publishDefaults),n),a=ilt(e,t,o);if(!a){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),Ni(e)));return}const l=e.addSimulcastTrack(t,a);if(!l)return;const c=new AB({cid:l.mediaStreamTrack.id,type:Fe.kindToProto(e.kind),muted:e.isMuted,source:Fe.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:o.videoCodec,cid:l.mediaStreamTrack.id}]});if(c.layers=Hne(c.width,c.height,a),!this.engine||this.engine.isClosed)throw new Tr("cannot publish track when not connected");const u=()=>re(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(e,l,o,a),yield this.engine.negotiate()}),h=(yield Promise.all([this.engine.addTrack(c),u()]))[0];this.log.debug("published ".concat(t," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:a,trackInfo:h}))})}unpublishTrack(e,t){return re(this,void 0,void 0,function*(){var n,s;if(wb(e)){const c=this.pendingPublishPromises.get(e);c&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),Ni(e))),yield c)}const r=this.getPublicationForTrack(e),o=r?Ni(r):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),o)),!r||!r.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),o));return}e=r.track,e.off(tt.Muted,this.onTrackMuted),e.off(tt.Unmuted,this.onTrackUnmuted),e.off(tt.Ended,this.handleTrackEnded),e.off(tt.UpstreamPaused,this.onTrackUpstreamPaused),e.off(tt.UpstreamResumed,this.onTrackUpstreamResumed),e.off(tt.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),t===void 0&&(t=(s=(n=this.roomOptions)===null||n===void 0?void 0:n.stopLocalTrackOnUnpublish)!==null&&s!==void 0?s:!0),t?e.stop():e.stopMonitor();let a=!1;const l=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<Rs.FAILED&&l)try{for(const c of this.engine.pcManager.publisher.getTransceivers())c.sender===l&&(c.direction="inactive",a=!0);if(this.engine.removeTrack(l)&&(a=!0),hg(e)){for(const[,c]of e.simulcastCodecs)c.sender&&(this.engine.removeTrack(c.sender)&&(a=!0),c.sender=void 0);e.simulcastCodecs.clear()}}catch(c){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),o),{error:c}))}switch(this.trackPublications.delete(r.trackSid),r.kind){case Fe.Kind.Audio:this.audioTrackPublications.delete(r.trackSid);break;case Fe.Kind.Video:this.videoTrackPublications.delete(r.trackSid);break}return this.emit(ut.LocalTrackUnpublished,r),r.setTrack(void 0),a&&(yield this.engine.negotiate()),r})}unpublishTracks(e){return re(this,void 0,void 0,function*(){return(yield Promise.all(e.map(n=>this.unpublishTrack(n)))).filter(n=>!!n)})}republishAllTracks(e){return re(this,arguments,void 0,function(t){var n=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){n.republishPromise&&(yield n.republishPromise),n.republishPromise=new Promise((r,o)=>re(n,void 0,void 0,function*(){try{const a=[];this.trackPublications.forEach(l=>{l.track&&(t&&(l.options=Object.assign(Object.assign({},l.options),t)),a.push(l))}),yield Promise.all(a.map(l=>re(this,void 0,void 0,function*(){const c=l.track;yield this.unpublishTrack(c,!1),s&&!c.isMuted&&c.source!==Fe.Source.ScreenShare&&c.source!==Fe.Source.ScreenShareAudio&&(Rp(c)||hg(c))&&!c.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:l.trackSid})),yield c.restartTrack()),yield this.publishOrRepublishTrack(c,l.options,!0)}))),r()}catch(a){o(a)}finally{this.republishPromise=void 0}})),yield n.republishPromise}()})}publishData(e){return re(this,arguments,void 0,function(t){var n=this;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const r=s.reliable?pi.RELIABLE:pi.LOSSY,o=s.destinationIdentities,a=s.topic,l=new Ha({kind:r,value:{case:"user",value:new s0e({participantIdentity:n.identity,payload:t,destinationIdentities:o,topic:a})}});yield n.engine.sendDataPacket(l,r)}()})}publishDtmf(e,t){return re(this,void 0,void 0,function*(){const n=new Ha({kind:pi.RELIABLE,value:{case:"sipDtmf",value:new r0e({code:e,digit:t})}});yield this.engine.sendDataPacket(n,pi.RELIABLE)})}sendChatMessage(e,t){return re(this,void 0,void 0,function*(){const n={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:t==null?void 0:t.attachments},s=new Ha({value:{case:"chatMessage",value:new EB(Object.assign(Object.assign({},n),{timestamp:gs.parse(n.timestamp)}))}});return yield this.engine.sendDataPacket(s,pi.RELIABLE),this.emit(ut.ChatMessage,n),n})}editChatMessage(e,t){return re(this,void 0,void 0,function*(){const n=Object.assign(Object.assign({},t),{message:e,editTimestamp:Date.now()}),s=new Ha({value:{case:"chatMessage",value:new EB(Object.assign(Object.assign({},n),{timestamp:gs.parse(n.timestamp),editTimestamp:gs.parse(n.editTimestamp)}))}});return yield this.engine.sendDataPacket(s,pi.RELIABLE),this.emit(ut.ChatMessage,n),n})}sendText(e,t){return re(this,void 0,void 0,function*(){var n;const s=crypto.randomUUID(),o=new TextEncoder().encode(e).byteLength,a=(n=t==null?void 0:t.attachments)===null||n===void 0?void 0:n.map(()=>crypto.randomUUID()),l=new Array(a?a.length+1:1).fill(0),c=(d,h)=>{var g;l[h]=d;const p=l.reduce((_,v)=>_+v,0);(g=t==null?void 0:t.onProgress)===null||g===void 0||g.call(t,p)},u=yield this.streamText({streamId:s,totalSize:o,destinationIdentities:t==null?void 0:t.destinationIdentities,topic:t==null?void 0:t.topic,attachedStreamIds:a,attributes:t==null?void 0:t.attributes});return yield u.write(e),c(1,0),yield u.close(),t!=null&&t.attachments&&a&&(yield Promise.all(t.attachments.map((d,h)=>re(this,void 0,void 0,function*(){return this._sendFile(a[h],d,{topic:t.topic,mimeType:d.type,onProgress:g=>{c(g,h+1)}})})))),u.info})}streamText(e){return re(this,void 0,void 0,function*(){var t,n;const s=(t=e==null?void 0:e.streamId)!==null&&t!==void 0?t:crypto.randomUUID(),r={id:s,mimeType:"text/plain",timestamp:Date.now(),topic:(n=e==null?void 0:e.topic)!==null&&n!==void 0?n:"",size:e==null?void 0:e.totalSize,attributes:e==null?void 0:e.attributes},o=new LB({streamId:s,mimeType:r.mimeType,topic:r.topic,timestamp:Np(r.timestamp),totalLength:Np(e==null?void 0:e.totalSize),attributes:r.attributes,contentHeader:{case:"textHeader",value:new m0e({version:e==null?void 0:e.version,attachedStreamIds:e==null?void 0:e.attachedStreamIds,replyToStreamId:e==null?void 0:e.replyToStreamId,operationType:(e==null?void 0:e.type)==="update"?TB.UPDATE:TB.CREATE})}}),a=e==null?void 0:e.destinationIdentities,l=new Ha({destinationIdentities:a,value:{case:"streamHeader",value:o}});yield this.engine.sendDataPacket(l,pi.RELIABLE);let c=0;const u=this,d=new WritableStream({write(p){return re(this,void 0,void 0,function*(){for(const _ of Tat(p,LT)){yield u.engine.waitForBufferStatusLow(pi.RELIABLE);const v=new IB({content:_,streamId:s,chunkIndex:Np(c)}),y=new Ha({destinationIdentities:a,value:{case:"streamChunk",value:v}});yield u.engine.sendDataPacket(y,pi.RELIABLE),c+=1}})},close(){return re(this,void 0,void 0,function*(){const p=new DB({streamId:s}),_=new Ha({destinationIdentities:a,value:{case:"streamTrailer",value:p}});yield u.engine.sendDataPacket(_,pi.RELIABLE)})},abort(p){console.log("Sink error:",p)}});let h=()=>re(this,void 0,void 0,function*(){yield g.close()});u.engine.once(lt.Closing,h);const g=new plt(d,r,()=>this.engine.off(lt.Closing,h));return g})}sendFile(e,t){return re(this,void 0,void 0,function*(){const n=crypto.randomUUID();return yield this._sendFile(n,e,t),{id:n}})}_sendFile(e,t,n){return re(this,void 0,void 0,function*(){var s,r;const o=t.size,a=new LB({totalLength:Np(o),mimeType:(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:t.type,streamId:e,topic:n==null?void 0:n.topic,encryptionType:n==null?void 0:n.encryptionType,timestamp:Np(Date.now()),contentHeader:{case:"byteHeader",value:new p0e({name:t.name})}}),l=n==null?void 0:n.destinationIdentities,c=new Ha({destinationIdentities:l,value:{case:"streamHeader",value:a}});yield this.engine.sendDataPacket(c,pi.RELIABLE);function u(p){return new Promise(_=>{const v=new FileReader;v.onload=()=>{_(new Uint8Array(v.result))},v.readAsArrayBuffer(p)})}const d=Math.ceil(o/LT);for(let p=0;p<d;p++){const _=yield u(t.slice(p*LT,Math.min((p+1)*LT,o)));yield this.engine.waitForBufferStatusLow(pi.RELIABLE);const v=new IB({content:_,streamId:e,chunkIndex:Np(p)}),y=new Ha({destinationIdentities:l,value:{case:"streamChunk",value:v}});yield this.engine.sendDataPacket(y,pi.RELIABLE),(r=n==null?void 0:n.onProgress)===null||r===void 0||r.call(n,(p+1)/d)}const h=new DB({streamId:e}),g=new Ha({destinationIdentities:l,value:{case:"streamTrailer",value:h}});yield this.engine.sendDataPacket(g,pi.RELIABLE)})}performRpc(e){return re(this,arguments,void 0,function(t){var n=this;let{destinationIdentity:s,method:r,payload:o,responseTimeout:a=1e4}=t;return function*(){return new Promise((c,u)=>re(n,void 0,void 0,function*(){var d,h,g,p;if(fj(o)>m1e){u(Os.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((h=(d=this.engine.latestJoinResponse)===null||d===void 0?void 0:d.serverInfo)===null||h===void 0)&&h.version&&d1((p=(g=this.engine.latestJoinResponse)===null||g===void 0?void 0:g.serverInfo)===null||p===void 0?void 0:p.version,"1.8.0")<0){u(Os.builtIn("UNSUPPORTED_SERVER"));return}const _=crypto.randomUUID();yield this.publishRpcRequest(s,_,r,o,a-2e3);const v=setTimeout(()=>{this.pendingAcks.delete(_),u(Os.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(_),clearTimeout(y)},2e3);this.pendingAcks.set(_,{resolve:()=>{clearTimeout(v)},participantIdentity:s});const y=setTimeout(()=>{this.pendingResponses.delete(_),u(Os.builtIn("RESPONSE_TIMEOUT"))},a);this.pendingResponses.set(_,{resolve:(w,x)=>{clearTimeout(y),this.pendingAcks.has(_)&&(console.warn("RPC response received before ack",_),this.pendingAcks.delete(_),clearTimeout(v)),x?u(x):c(w??"")},participantIdentity:s})}))}()})}registerRpcMethod(e,t){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,t)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=t,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const t=this.pendingAcks.get(e);t?(t.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,t,n){const s=this.pendingResponses.get(e);s?(s.resolve(t,n),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,t,n,s,r){return re(this,void 0,void 0,function*(){const o=new Ha({destinationIdentities:[e],kind:pi.RELIABLE,value:{case:"rpcRequest",value:new o0e({id:t,method:n,payload:s,responseTimeoutMs:r,version:1})}});yield this.engine.sendDataPacket(o,pi.RELIABLE)})}handleParticipantDisconnected(e){for(const[t,{participantIdentity:n}]of this.pendingAcks)n===e&&this.pendingAcks.delete(t);for(const[t,{participantIdentity:n,resolve:s}]of this.pendingResponses)n===e&&(s(null,Os.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(t))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter(t=>t.mime.split("/")[0].toLowerCase()==="video")}updateInfo(e){return e.sid!==this.sid||!super.updateInfo(e)?!1:(e.tracks.forEach(t=>{var n,s;const r=this.trackPublications.get(t.sid);if(r){const o=r.isMuted||((s=(n=r.track)===null||n===void 0?void 0:n.isUpstreamPaused)!==null&&s!==void 0?s:!1);o!==t.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),Ni(r)),{mutedOnServer:o})),this.engine.client.sendMuteTrack(t.sid,o))}}),!0)}getPublicationForTrack(e){let t;return this.trackPublications.forEach(n=>{const s=n.track;s&&(e instanceof MediaStreamTrack?(Rp(s)||hg(s))&&s.mediaStreamTrack===e&&(t=n):e===s&&(t=n))}),t}waitForPendingPublicationOfSource(e){return re(this,void 0,void 0,function*(){const n=Date.now();for(;Date.now()<n+1e4;){const s=Array.from(this.pendingPublishPromises.entries()).find(r=>{let[o]=r;return o.source===e});if(s)return s[1];yield ol(20)}})}}class Slt extends Ih{constructor(e,t,n,s){super(e,t.sid,t.name,s),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=dc.HIGH,this.handleEnded=r=>{this.setTrack(void 0),this.emit(tt.Ended,r)},this.handleVisibilityChange=r=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(r),this.logContext),this.disabled=!r,this.emitTrackUpdate()},this.handleVideoDimensionsChange=r=>{this.log.debug("adaptivestream video dimensions ".concat(r.width,"x").concat(r.height),this.logContext),this.videoDimensions=r,this.emitTrackUpdate()},this.subscribed=n,this.updateInfo(t)}setSubscribed(e){const t=this.subscriptionStatus,n=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const s=new HA({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new u0e({participantSid:"",trackSids:[this.trackSid]})]});this.emit(tt.UpdateSubscription,s),this.emitSubscriptionUpdateIfChanged(t),this.emitPermissionUpdateIfChanged(n)}get subscriptionStatus(){return this.subscribed===!1?Ih.SubscriptionStatus.Unsubscribed:super.isSubscribed?Ih.SubscriptionStatus.Subscribed:Ih.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?Ih.PermissionStatus.Allowed:Ih.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}get isLocal(){return!1}setEnabled(e){!this.isManualOperationAllowed()||this.disabled===!e||(this.disabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.currentVideoQuality===e||(this.currentVideoQuality=e,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var t,n;this.isManualOperationAllowed()&&(((t=this.videoDimensions)===null||t===void 0?void 0:t.width)===e.width&&((n=this.videoDimensions)===null||n===void 0?void 0:n.height)===e.height||(Z6(this.track)&&(this.videoDimensions=e),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&Z6(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(e){const t=this.subscriptionStatus,n=this.permissionStatus,s=this.track;s!==e&&(s&&(s.off(tt.VideoDimensionsChanged,this.handleVideoDimensionsChange),s.off(tt.VisibilityChanged,this.handleVisibilityChange),s.off(tt.Ended,this.handleEnded),s.detach(),s.stopMonitor(),this.emit(tt.Unsubscribed,s)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(tt.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(tt.VisibilityChanged,this.handleVisibilityChange),e.on(tt.Ended,this.handleEnded),this.emit(tt.Subscribed,e)),this.emitPermissionUpdateIfChanged(n),this.emitSubscriptionUpdateIfChanged(t))}setAllowed(e){const t=this.subscriptionStatus,n=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(n),this.emitSubscriptionUpdateIfChanged(t)}setSubscriptionError(e){this.emit(tt.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const t=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):t!==e.muted&&this.emit(e.muted?tt.Muted:tt.Unmuted)}emitSubscriptionUpdateIfChanged(e){const t=this.subscriptionStatus;e!==t&&this.emit(tt.SubscriptionStatusChanged,t,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(tt.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.kind===Fe.Kind.Video&&this.isAdaptiveStream?(this.log.warn("adaptive stream is enabled, cannot change video track settings",this.logContext),!1):this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return Z6(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new _0e({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(e.width=Math.ceil(this.videoDimensions.width),e.height=Math.ceil(this.videoDimensions.height)):this.currentVideoQuality!==void 0?e.quality=this.currentVideoQuality:e.quality=dc.HIGH,this.emit(tt.UpdateSettings,e)}}class MN extends w1e{static fromParticipantInfo(e,t,n){return new MN(e,t.sid,t.identity,t.name,t.metadata,t.attributes,n,t.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,t,n,s,r,o,a){let l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:IN.STANDARD;super(t,n||"",s,r,o,a,l),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(tt.UpdateSettings,t=>{this.log.debug("send update settings",Object.assign(Object.assign({},this.logContext),Ni(e))),this.signalClient.sendUpdateTrackSettings(t)}),e.on(tt.UpdateSubscription,t=>{t.participantTracks.forEach(n=>{n.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(t)}),e.on(tt.SubscriptionPermissionChanged,t=>{this.emit(ut.TrackSubscriptionPermissionChanged,e,t)}),e.on(tt.SubscriptionStatusChanged,t=>{this.emit(ut.TrackSubscriptionStatusChanged,e,t)}),e.on(tt.Subscribed,t=>{this.emit(ut.TrackSubscribed,t,e)}),e.on(tt.Unsubscribed,t=>{this.emit(ut.TrackUnsubscribed,t,e)}),e.on(tt.SubscriptionFailed,t=>{this.emit(ut.TrackSubscriptionFailed,e.trackSid,t)})}getTrackPublication(e){const t=super.getTrackPublication(e);if(t)return t}getTrackPublicationByName(e){const t=super.getTrackPublicationByName(e);if(t)return t}setVolume(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fe.Source.Microphone;this.volumeMap.set(t,e);const n=this.getTrackPublication(t);n&&n.track&&n.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Fe.Source.Microphone;const t=this.getTrackPublication(e);return t&&t.track?t.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,t,n,s,r,o){let a=this.getTrackPublicationBySid(t);if(a||t.startsWith("TR")||this.trackPublications.forEach(u=>{!a&&e.kind===u.kind.toString()&&(a=u)}),!a){if(o===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:t})),this.emit(ut.TrackSubscriptionFailed,t);return}o===void 0&&(o=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,t,n,s,r,o-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),Ni(a))),this.emit(ut.TrackSubscriptionFailed,t);return}const l=e.kind==="video";let c;return l?c=new vlt(e,t,s,r):c=new _lt(e,t,s,this.audioContext,this.audioOutput),c.source=a.source,c.isMuted=a.isMuted,c.setMediaStream(n),c.start(),a.setTrack(c),this.volumeMap.has(a.source)&&QB(c)&&kf(c)&&c.setVolume(this.volumeMap.get(a.source)),a}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const t=new Map,n=new Map;return e.tracks.forEach(s=>{var r,o;let a=this.getTrackPublicationBySid(s.sid);if(a)a.updateInfo(s);else{const l=Fe.kindFromProto(s.type);if(!l)return;a=new Slt(l,s,(r=this.signalClient.connectOptions)===null||r===void 0?void 0:r.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(o=this.loggerOptions)===null||o===void 0?void 0:o.loggerName}),a.updateInfo(s),n.set(s.sid,a);const c=Array.from(this.trackPublications.values()).find(u=>u.source===(a==null?void 0:a.source));c&&a.source!==Fe.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(a.source),Object.assign(Object.assign({},this.logContext),{oldTrack:Ni(c),newTrack:Ni(a)})),this.addTrackPublication(a)}t.set(s.sid,a)}),this.trackPublications.forEach(s=>{t.has(s.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),Ni(s))),this.unpublishTrack(s.trackSid,!0))}),n.forEach(s=>{this.emit(ut.TrackPublished,s)}),!0}unpublishTrack(e,t){const n=this.trackPublications.get(e);if(!n)return;const{track:s}=n;switch(s&&(s.stop(),n.setTrack(void 0)),this.trackPublications.delete(e),n.kind){case Fe.Kind.Audio:this.audioTrackPublications.delete(e);break;case Fe.Kind.Video:this.videoTrackPublications.delete(e);break}t&&this.emit(ut.TrackUnpublished,n)}setAudioOutput(e){return re(this,void 0,void 0,function*(){this.audioOutput=e;const t=[];this.audioTrackPublications.forEach(n=>{var s;kf(n.track)&&QB(n.track)&&t.push(n.track.setSinkId((s=e.deviceId)!==null&&s!==void 0?s:"default"))}),yield Promise.all(t)})}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:n})),super.emit(e,...n)}}var wi;(function(i){i.Disconnected="disconnected",i.Connecting="connecting",i.Connected="connected",i.Reconnecting="reconnecting",i.SignalReconnecting="signalReconnecting"})(wi||(wi={}));const klt=4*1e3;class fy extends qd.EventEmitter{constructor(e){var t,n,s,r;if(super(),t=this,this.state=wi.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=ti,this.bufferedEvents=[],this.isResuming=!1,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map,this.rpcHandlers=new Map,this.connect=(o,a,l)=>re(this,void 0,void 0,function*(){var c;if(!pat())throw Od()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const u=yield this.disconnectLock.lock();if(this.state===wi.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),u(),Promise.resolve();if(this.connectFuture)return u(),this.connectFuture.promise;this.setAndEmitConnectionState(wi.Connecting),((c=this.regionUrlProvider)===null||c===void 0?void 0:c.getServerUrl().toString())!==o&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),GB(new URL(o))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new tV(o,a):this.regionUrlProvider.updateToken(a),this.regionUrlProvider.fetchRegionSettings().then(g=>{var p;(p=this.regionUrlProvider)===null||p===void 0||p.setServerReportedRegions(g)}).catch(g=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:g}))}));const d=(g,p,_)=>re(this,void 0,void 0,function*(){var v,y;this.abortController&&this.abortController.abort();const w=new AbortController;this.abortController=w,u==null||u();try{yield this.attemptConnection(_??o,a,l,w),this.abortController=void 0,g()}catch(x){if(this.regionUrlProvider&&x instanceof ji&&x.reason!==di.Cancelled&&x.reason!==di.NotAllowed){let k=null;try{k=yield this.regionUrlProvider.getNextBestRegionUrl((v=this.abortController)===null||v===void 0?void 0:v.signal)}catch(T){if(T instanceof ji&&(T.status===401||T.reason===di.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),p(T);return}}k&&!(!((y=this.abortController)===null||y===void 0)&&y.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(x.message,". Retrying with another region: ").concat(k),this.logContext),this.recreateEngine(),yield d(g,p,k)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Tne(x)),p(x))}else{let k=ru.UNKNOWN_REASON;x instanceof ji&&(k=Tne(x)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,k),p(x)}}}),h=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new l1e((g,p)=>{d(g,p,h)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(o,a,l,c,u,d)=>re(this,void 0,void 0,function*(){var h,g,p;const _=yield l.join(o,a,{autoSubscribe:c.autoSubscribe,adaptiveStream:typeof u.adaptiveStream=="object"?!0:u.adaptiveStream,maxRetries:c.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:c.websocketTimeout},d.signal);let v=_.serverInfo;if(v||(v={version:_.serverVersion,region:_.serverRegion}),this.serverInfo=v,this.log.debug("connected to Livekit Server ".concat(Object.entries(v).map(y=>{let[w,x]=y;return"".concat(w,": ").concat(x)}).join(", ")),{room:(h=_.room)===null||h===void 0?void 0:h.name,roomSid:(g=_.room)===null||g===void 0?void 0:g.sid,identity:(p=_.participant)===null||p===void 0?void 0:p.identity}),!v.version)throw new eat("unknown server version");return v.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),u.dynacast=!1),_}),this.applyJoinResponse=o=>{const a=o.participant;if(this.localParticipant.sid=a.sid,this.localParticipant.identity=a.identity,this.localParticipant.setEnabledPublishCodecs(o.enabledPublishCodecs),this.options.e2ee&&this.e2eeManager)try{this.e2eeManager.setSifTrailer(o.sifTrailer)}catch(l){this.log.error(l instanceof Error?l.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:l}))}this.handleParticipantUpdates([a,...o.otherParticipants]),o.room&&this.handleRoomUpdate(o.room)},this.attemptConnection=(o,a,l,c)=>re(this,void 0,void 0,function*(){var u,d;this.state===wi.Reconnecting||this.isResuming||!((u=this.engine)===null||u===void 0)&&u.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((d=this.regionUrlProvider)===null||d===void 0)&&d.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},hj),l),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const h=yield this.connectSignal(o,a,this.engine,this.connOptions,this.options,c);this.applyJoinResponse(h),this.setupLocalParticipantEvents(),this.emit(Je.SignalConnected)}catch(h){yield this.engine.close(),this.recreateEngine();const g=new ji("could not establish signal connection",di.ServerUnreachable);throw h instanceof Error&&(g.message="".concat(g.message,": ").concat(h.message)),h instanceof ji&&(g.reason=h.reason,g.status=h.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:h})),g}if(c.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new ji("Connection attempt aborted",di.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,c)}catch(h){throw yield this.engine.close(),this.recreateEngine(),h}Xa()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),Xa()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(wi.Connected),this.emit(Je.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return re(t,[...a],void 0,function(){var c=this;let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var d,h,g,p;const _=yield c.disconnectLock.lock();try{if(c.state===wi.Disconnected){c.log.debug("already disconnected",c.logContext);return}c.log.info("disconnect from room",Object.assign({},c.logContext)),(c.state===wi.Connecting||c.state===wi.Reconnecting||c.isResuming)&&(c.log.warn("abort connection attempt",c.logContext),(d=c.abortController)===null||d===void 0||d.abort(),(g=(h=c.connectFuture)===null||h===void 0?void 0:h.reject)===null||g===void 0||g.call(h,new ji("Client initiated disconnect",di.Cancelled)),c.connectFuture=void 0),!((p=c.engine)===null||p===void 0)&&p.client.isDisconnected||(yield c.engine.client.sendLeave()),c.engine&&(yield c.engine.close()),c.handleDisconnect(u,ru.CLIENT_INITIATED),c.engine=void 0}finally{_()}}()})},this.onPageLeave=()=>re(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>re(this,void 0,void 0,function*(){const o=[],a=wu();if(a&&a.os==="iOS"){const l="livekit-dummy-audio-el";let c=document.getElementById(l);if(!c){c=document.createElement("audio"),c.id=l,c.autoplay=!0,c.hidden=!0;const u=X6();u.enabled=!0;const d=new MediaStream([u]);c.srcObject=d,document.addEventListener("visibilitychange",()=>{c&&(c.srcObject=document.hidden?null:d,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(c),this.once(Je.Disconnected,()=>{c==null||c.remove(),c=null})}o.push(c)}this.remoteParticipants.forEach(l=>{l.audioTrackPublications.forEach(c=>{c.track&&c.track.attachedElements.forEach(u=>{o.push(u)})})});try{yield Promise.all([this.acquireAudioContext(),...o.map(l=>(l.muted=!1,l.play()))]),this.handleAudioPlaybackStarted()}catch(l){throw this.handleAudioPlaybackFailed(l),l}}),this.startVideo=()=>re(this,void 0,void 0,function*(){const o=[];for(const a of this.remoteParticipants.values())a.videoTrackPublications.forEach(l=>{var c;(c=l.track)===null||c===void 0||c.attachedElements.forEach(u=>{o.includes(u)||o.push(u)})});yield Promise.all(o.map(a=>a.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(a=>{a.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const o of this.remoteParticipants.values())this.handleParticipantDisconnected(o.identity,o);this.setAndEmitConnectionState(wi.Reconnecting)&&this.emit(Je.Reconnecting)},this.handleSignalRestarted=o=>re(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(o.serverRegion),Object.assign(Object.assign({},this.logContext),{region:o.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(o);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(a){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:a}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:o.serverRegion}))}catch{return}this.setAndEmitConnectionState(wi.Connected),this.emit(Je.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=o=>{o.forEach(a=>{var l;if(a.identity===this.localParticipant.identity){this.localParticipant.updateInfo(a);return}a.identity===""&&(a.identity=(l=this.sidToIdentity.get(a.sid))!==null&&l!==void 0?l:"");let c=this.remoteParticipants.get(a.identity);a.state===xB.DISCONNECTED?this.handleParticipantDisconnected(a.identity,c):c=this.getOrCreateParticipant(a.identity,a)})},this.handleActiveSpeakersUpdate=o=>{const a=[],l={};o.forEach(c=>{if(l[c.sid]=!0,c.sid===this.localParticipant.sid)this.localParticipant.audioLevel=c.level,this.localParticipant.setIsSpeaking(!0),a.push(this.localParticipant);else{const u=this.getRemoteParticipantBySid(c.sid);u&&(u.audioLevel=c.level,u.setIsSpeaking(!0),a.push(u))}}),l[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(c=>{l[c.sid]||(c.audioLevel=0,c.setIsSpeaking(!1))}),this.activeSpeakers=a,this.emitWhenConnected(Je.ActiveSpeakersChanged,a)},this.handleSpeakersChanged=o=>{const a=new Map;this.activeSpeakers.forEach(c=>{const u=this.remoteParticipants.get(c.identity);u&&u.sid!==c.sid||a.set(c.sid,c)}),o.forEach(c=>{let u=this.getRemoteParticipantBySid(c.sid);c.sid===this.localParticipant.sid&&(u=this.localParticipant),u&&(u.audioLevel=c.level,u.setIsSpeaking(c.active),c.active?a.set(c.sid,u):a.delete(c.sid))});const l=Array.from(a.values());l.sort((c,u)=>u.audioLevel-c.audioLevel),this.activeSpeakers=l,this.emitWhenConnected(Je.ActiveSpeakersChanged,l)},this.handleStreamStateUpdate=o=>{o.streamStates.forEach(a=>{const l=this.getRemoteParticipantBySid(a.participantSid);if(!l)return;const c=l.getTrackPublicationBySid(a.trackSid);if(!c||!c.track)return;const u=Fe.streamStateFromProto(a.state);u!==c.track.streamState&&(c.track.streamState=u,l.emit(ut.TrackStreamStateChanged,c,c.track.streamState),this.emitWhenConnected(Je.TrackStreamStateChanged,c,c.track.streamState,l))})},this.handleSubscriptionPermissionUpdate=o=>{const a=this.getRemoteParticipantBySid(o.participantSid);if(!a)return;const l=a.getTrackPublicationBySid(o.trackSid);l&&l.setAllowed(o.allowed)},this.handleSubscriptionError=o=>{const a=Array.from(this.remoteParticipants.values()).find(c=>c.trackPublications.has(o.trackSid));if(!a)return;const l=a.getTrackPublicationBySid(o.trackSid);l&&l.setSubscriptionError(o.err)},this.handleDataPacket=o=>{const a=this.remoteParticipants.get(o.participantIdentity);if(o.value.case==="user")this.handleUserPacket(a,o.value.value,o.kind);else if(o.value.case==="transcription")this.handleTranscription(a,o.value.value);else if(o.value.case==="sipDtmf")this.handleSipDtmf(a,o.value.value);else if(o.value.case==="chatMessage")this.handleChatMessage(a,o.value.value);else if(o.value.case==="metrics")this.handleMetrics(o.value.value,a);else if(o.value.case==="streamHeader")this.handleStreamHeader(o.value.value,o.participantIdentity);else if(o.value.case==="streamChunk")this.handleStreamChunk(o.value.value);else if(o.value.case==="streamTrailer")this.handleStreamTrailer(o.value.value);else if(o.value.case==="rpcRequest"){const l=o.value.value;this.handleIncomingRpcRequest(o.participantIdentity,l.id,l.method,l.payload,l.responseTimeoutMs,l.version)}},this.handleUserPacket=(o,a,l)=>{this.emit(Je.DataReceived,a.payload,o,l,a.topic),o==null||o.emit(ut.DataReceived,a.payload,l)},this.handleSipDtmf=(o,a)=>{this.emit(Je.SipDTMFReceived,a,o),o==null||o.emit(ut.SipDTMFReceived,a)},this.bufferedSegments=new Map,this.handleTranscription=(o,a)=>{const l=a.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(a.transcribedParticipantIdentity),c=l==null?void 0:l.trackPublications.get(a.trackId),u=Sat(a,this.transcriptionReceivedTimes);c==null||c.emit(tt.TranscriptionReceived,u),l==null||l.emit(ut.TranscriptionReceived,u,c),this.emit(Je.TranscriptionReceived,u,l,c)},this.handleChatMessage=(o,a)=>{const l=kat(a);this.emit(Je.ChatMessage,l,o)},this.handleMetrics=(o,a)=>{this.emit(Je.MetricsReceived,o,a)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(Je.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=o=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:o})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(Je.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(Je.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(Je.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>re(this,void 0,void 0,function*(){var o,a;const l=to.getInstance().previousDevices,c=yield to.getInstance().getDevices(void 0,!1),u=wu();if((u==null?void 0:u.name)==="Chrome"&&u.os!=="iOS")for(let h of c){const g=l.find(p=>p.deviceId===h.deviceId);g&&g.label!==""&&g.kind===h.kind&&g.label!==h.label&&this.getActiveDevice(h.kind)==="default"&&this.emit(Je.ActiveDeviceChanged,h.kind,h.deviceId)}const d=["audiooutput","audioinput","videoinput"];for(let h of d){const g=c.filter(_=>_.kind===h),p=this.getActiveDevice(h);if(p===((o=l.filter(_=>_.kind===h)[0])===null||o===void 0?void 0:o.deviceId)&&g.length>0&&((a=g[0])===null||a===void 0?void 0:a.deviceId)!==p){yield this.switchActiveDevice(h,g[0].deviceId);continue}h==="audioinput"&&!Bm()||h==="videoinput"||g.length>0&&!g.find(_=>_.deviceId===this.getActiveDevice(h))&&(yield this.switchActiveDevice(h,g[0].deviceId))}this.emit(Je.MediaDevicesChanged)}),this.handleRoomUpdate=o=>{const a=this.roomInfo;this.roomInfo=o,a&&a.metadata!==o.metadata&&this.emitWhenConnected(Je.RoomMetadataChanged,o.metadata),(a==null?void 0:a.activeRecording)!==o.activeRecording&&this.emitWhenConnected(Je.RecordingStatusChanged,o.activeRecording)},this.handleConnectionQualityUpdate=o=>{o.updates.forEach(a=>{if(a.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(a.quality);return}const l=this.getRemoteParticipantBySid(a.participantSid);l&&l.setConnectionQuality(a.quality)})},this.onLocalParticipantMetadataChanged=o=>{this.emit(Je.ParticipantMetadataChanged,o,this.localParticipant)},this.onLocalParticipantNameChanged=o=>{this.emit(Je.ParticipantNameChanged,o,this.localParticipant)},this.onLocalAttributesChanged=o=>{this.emit(Je.ParticipantAttributesChanged,o,this.localParticipant)},this.onLocalTrackMuted=o=>{this.emit(Je.TrackMuted,o,this.localParticipant)},this.onLocalTrackUnmuted=o=>{this.emit(Je.TrackUnmuted,o,this.localParticipant)},this.onTrackProcessorUpdate=o=>{var a;(a=o==null?void 0:o.onPublish)===null||a===void 0||a.call(o,this)},this.onLocalTrackPublished=o=>re(this,void 0,void 0,function*(){var a,l,c,u,d,h;(a=o.track)===null||a===void 0||a.on(tt.TrackProcessorUpdate,this.onTrackProcessorUpdate),(l=o.track)===null||l===void 0||l.on(tt.Restarted,this.onLocalTrackRestarted),(d=(u=(c=o.track)===null||c===void 0?void 0:c.getProcessor())===null||u===void 0?void 0:u.onPublish)===null||d===void 0||d.call(u,this),this.emit(Je.LocalTrackPublished,o,this.localParticipant),Rp(o.track)&&(yield o.track.checkForSilence())&&this.emit(Je.LocalAudioSilenceDetected,o);const g=yield(h=o.track)===null||h===void 0?void 0:h.getDeviceId(!1),p=Lne(o.source);p&&g&&g!==this.localParticipant.activeDeviceMap.get(p)&&(this.localParticipant.activeDeviceMap.set(p,g),this.emit(Je.ActiveDeviceChanged,p,g))}),this.onLocalTrackUnpublished=o=>{var a,l;(a=o.track)===null||a===void 0||a.off(tt.TrackProcessorUpdate,this.onTrackProcessorUpdate),(l=o.track)===null||l===void 0||l.off(tt.Restarted,this.onLocalTrackRestarted),this.emit(Je.LocalTrackUnpublished,o,this.localParticipant)},this.onLocalTrackRestarted=o=>re(this,void 0,void 0,function*(){const a=yield o.getDeviceId(!1),l=Lne(o.source);l&&a&&a!==this.localParticipant.activeDeviceMap.get(l)&&(this.log.debug("local track restarted, setting ".concat(l," ").concat(a," active"),this.logContext),this.localParticipant.activeDeviceMap.set(l,a),this.emit(Je.ActiveDeviceChanged,l,a))}),this.onLocalConnectionQualityChanged=o=>{this.emit(Je.ConnectionQualityChanged,o,this.localParticipant)},this.onMediaDevicesError=o=>{this.emit(Je.MediaDevicesError,o)},this.onLocalParticipantPermissionsChanged=o=>{this.emit(Je.ParticipantPermissionsChanged,o,this.localParticipant)},this.onLocalChatMessageSent=o=>{this.emit(Je.ChatMessage,o,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},Gat),e),this.log=Sf((n=this.options.loggerName)!==null&&n!==void 0?n:yu.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},f1e),e==null?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},g1e),e==null?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},Kat),e==null?void 0:e.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new Al,this.localParticipant=new Clt("","",this.engine,this.options,this.rpcHandlers),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",am(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",am(this.options.audioCaptureDefaults.deviceId)),!((s=this.options.audioOutput)===null||s===void 0)&&s.deviceId&&this.switchActiveDevice("audiooutput",am(this.options.audioOutput.deviceId)).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),this.options.e2ee&&this.setupE2EE(),Xa()){const o=new AbortController;(r=navigator.mediaDevices)===null||r===void 0||r.addEventListener("devicechange",this.handleDeviceChange,{signal:o.signal}),fy.cleanupRegistry&&fy.cleanupRegistry.register(this,()=>{o.abort()})}}registerTextStreamHandler(e,t){if(this.textStreamHandlers.has(e))throw new TypeError('A text stream handler for topic "'.concat(e,'" has already been set.'));this.textStreamHandlers.set(e,t)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,t){if(this.byteStreamHandlers.has(e))throw new TypeError('A byte stream handler for topic "'.concat(e,'" has already been set.'));this.byteStreamHandlers.set(e,t)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}registerRpcMethod(e,t){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,t)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}handleIncomingRpcRequest(e,t,n,s,r,o){return re(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(e,t),o!==1){yield this.engine.publishRpcResponse(e,t,null,Os.builtIn("UNSUPPORTED_VERSION"));return}const a=this.rpcHandlers.get(n);if(!a){yield this.engine.publishRpcResponse(e,t,null,Os.builtIn("UNSUPPORTED_METHOD"));return}let l=null,c=null;try{const u=yield a({requestId:t,callerIdentity:e,payload:s,responseTimeout:r});fj(u)>m1e?(l=Os.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(n))):c=u}catch(u){u instanceof Os?l=u:(console.warn("Uncaught error returned by RPC handler for ".concat(n,". Returning APPLICATION_ERROR instead."),u),l=Os.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,t,c,l)})}setE2EEEnabled(e){return re(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;this.options.e2ee&&("e2eeManager"in this.options.e2ee?this.e2eeManager=this.options.e2ee.e2eeManager:this.e2eeManager=new Aat(this.options.e2ee),this.e2eeManager.on(Kg.ParticipantEncryptionStatusChanged,(t,n)=>{Eat(n)&&(this.isE2EEEnabled=t),this.emit(Je.ParticipantEncryptionStatusChanged,t,n)}),this.e2eeManager.on(Kg.EncryptionError,t=>this.emit(Je.EncryptionError,t)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:(e=this.roomInfo)===null||e===void 0?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,t;return(t=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&t!==void 0?t:!1}getSid(){return re(this,void 0,void 0,function*(){return this.state===wi.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((e,t)=>{const n=s=>{s.sid!==""&&(this.engine.off(lt.RoomUpdate,n),e(s.sid))};this.engine.on(lt.RoomUpdate,n),this.once(Je.Disconnected,()=>{this.engine.off(lt.RoomUpdate,n),t("Room disconnected before room server id was available")})})})}get name(){var e,t;return(t=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&t!==void 0?t:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,t;return(t=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&t!==void 0?t:0}get numPublishers(){var e,t;return(t=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&t!==void 0?t:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new clt(this.options),this.engine.on(lt.ParticipantUpdate,this.handleParticipantUpdates).on(lt.RoomUpdate,this.handleRoomUpdate).on(lt.SpeakersChanged,this.handleSpeakersChanged).on(lt.StreamStateChanged,this.handleStreamStateUpdate).on(lt.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(lt.SubscriptionError,this.handleSubscriptionError).on(lt.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(lt.MediaTrackAdded,(e,t,n)=>{this.onTrackAdded(e,t,n)}).on(lt.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(lt.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(lt.DataPacketReceived,this.handleDataPacket).on(lt.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(wi.SignalReconnecting)&&this.emit(Je.SignalReconnecting)}).on(lt.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(wi.Connected)&&this.emit(Je.Reconnected)}).on(lt.SignalResumed,()=>{this.bufferedEvents=[],(this.state===wi.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(lt.Restarting,this.handleRestarting).on(lt.SignalRestarted,this.handleSignalRestarted).on(lt.Offline,()=>{this.setAndEmitConnectionState(wi.Reconnecting)&&this.emit(Je.Reconnecting)}).on(lt.DCBufferStatusChanged,(e,t)=>{this.emit(Je.DCBufferStatusChanged,e,t)}).on(lt.LocalTrackSubscribed,e=>{const t=this.localParticipant.getTrackPublications().find(n=>{let{trackSid:s}=n;return s===e});if(!t){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(ut.LocalTrackSubscribed,t),this.emitWhenConnected(Je.LocalTrackSubscribed,t,this.localParticipant)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return to.getInstance().getDevices(e,t)}prepareConnection(e,t){return re(this,void 0,void 0,function*(){if(this.state===wi.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(GB(new URL(e))&&t){this.regionUrlProvider=new tV(e,t);const n=yield this.regionUrlProvider.getNextBestRegionUrl();n&&this.state===wi.Disconnected&&(this.regionUrl=n,yield fetch(YB(n),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(n),this.logContext))}else yield fetch(YB(e),{method:"HEAD"})}catch(n){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:n}))}}})}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,t){return re(this,void 0,void 0,function*(){let n=()=>{},s;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":s=new Gu({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":s=new Gu({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":s=new Gu({scenario:{case:"serverLeave",value:!0}});break;case"migration":s=new Gu({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":n=()=>re(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),s=new Gu({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":n=()=>re(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),s=new Gu({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":s=new Gu({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),n=()=>re(this,void 0,void 0,function*(){const r=this.engine.client.onLeave;r&&r(new UA({reason:ru.CLIENT_INITIATED,action:vb.RECONNECT}))});break;case"subscriber-bandwidth":if(t===void 0||typeof t!="number")throw new Error("subscriber-bandwidth requires a number as argument");s=new Gu({scenario:{case:"subscriberBandwidth",value:Np(t)}});break;case"leave-full-reconnect":s=new Gu({scenario:{case:"leaveRequestFullReconnect",value:!0}})}s&&(yield this.engine.client.sendSimulateScenario(s),yield n())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,t){return re(this,arguments,void 0,function(n,s){var r=this;let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var a,l,c,u,d,h,g,p;let _=!0,v=!1;const y=o?{exact:s}:s;if(n==="audioinput"){v=r.localParticipant.audioTrackPublications.size===0;const w=(a=r.getActiveDevice(n))!==null&&a!==void 0?a:r.options.audioCaptureDefaults.deviceId;r.options.audioCaptureDefaults.deviceId=y;const x=Array.from(r.localParticipant.audioTrackPublications.values()).filter(k=>k.source===Fe.Source.Microphone);try{_=(yield Promise.all(x.map(k=>{var T;return(T=k.audioTrack)===null||T===void 0?void 0:T.setDeviceId(y)}))).every(k=>k===!0)}catch(k){throw r.options.audioCaptureDefaults.deviceId=w,k}}else if(n==="videoinput"){v=r.localParticipant.videoTrackPublications.size===0;const w=(l=r.getActiveDevice(n))!==null&&l!==void 0?l:r.options.videoCaptureDefaults.deviceId;r.options.videoCaptureDefaults.deviceId=y;const x=Array.from(r.localParticipant.videoTrackPublications.values()).filter(k=>k.source===Fe.Source.Camera);try{_=(yield Promise.all(x.map(k=>{var T;return(T=k.videoTrack)===null||T===void 0?void 0:T.setDeviceId(y)}))).every(k=>k===!0)}catch(k){throw r.options.videoCaptureDefaults.deviceId=w,k}}else if(n==="audiooutput"){if(!KB()&&!r.options.webAudioMix||r.options.webAudioMix&&r.audioContext&&!("setSinkId"in r.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");r.options.webAudioMix&&(s=(c=yield to.getInstance().normalizeDeviceId("audiooutput",s))!==null&&c!==void 0?c:""),(u=(p=r.options).audioOutput)!==null&&u!==void 0||(p.audioOutput={});const w=(d=r.getActiveDevice(n))!==null&&d!==void 0?d:r.options.audioOutput.deviceId;r.options.audioOutput.deviceId=s;try{r.options.webAudioMix&&((h=r.audioContext)===null||h===void 0||h.setSinkId(s)),yield Promise.all(Array.from(r.remoteParticipants.values()).map(x=>x.setAudioOutput({deviceId:s})))}catch(x){throw r.options.audioOutput.deviceId=w,x}}return(v||n==="audiooutput")&&(r.localParticipant.activeDeviceMap.set(n,n==="audiooutput"&&((g=r.options.audioOutput)===null||g===void 0?void 0:g.deviceId)||s),r.emit(Je.ActiveDeviceChanged,n,s)),_}()})}setupLocalParticipantEvents(){this.localParticipant.on(ut.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(ut.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(ut.AttributesChanged,this.onLocalAttributesChanged).on(ut.TrackMuted,this.onLocalTrackMuted).on(ut.TrackUnmuted,this.onLocalTrackUnmuted).on(ut.LocalTrackPublished,this.onLocalTrackPublished).on(ut.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(ut.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(ut.MediaDevicesError,this.onMediaDevicesError).on(ut.AudioStreamAcquired,this.startAudio).on(ut.ChatMessage,this.onLocalChatMessageSent).on(ut.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,t,n){if(this.state===wi.Connecting||this.state===wi.Reconnecting){const u=()=>{this.onTrackAdded(e,t,n),d()},d=()=>{this.off(Je.Reconnected,u),this.off(Je.Connected,u),this.off(Je.Disconnected,d)};this.once(Je.Reconnected,u),this.once(Je.Connected,u),this.once(Je.Disconnected,d);return}if(this.state===wi.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(e.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const s=fat(t.id),r=s[0];let o=s[1],a=e.id;if(o&&o.startsWith("TR")&&(a=o),r===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const l=Array.from(this.remoteParticipants.values()).find(u=>u.sid===r);if(!l){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(r),this.logContext);return}let c;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?c=this.options.adaptiveStream:c={}),l.addSubscribedMediaTrack(e,a,t,n,c)}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1?arguments[1]:void 0;var n;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.state!==wi.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(s=>{s.trackPublications.forEach(r=>{s.unpublishTrack(r.trackSid)})}),this.localParticipant.trackPublications.forEach(s=>{var r,o,a;s.track&&this.localParticipant.unpublishTrack(s.track,e),e?((r=s.track)===null||r===void 0||r.detach(),(o=s.track)===null||o===void 0||o.stop()):(a=s.track)===null||a===void 0||a.stopMonitor()}),this.localParticipant.off(ut.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(ut.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(ut.AttributesChanged,this.onLocalAttributesChanged).off(ut.TrackMuted,this.onLocalTrackMuted).off(ut.TrackUnmuted,this.onLocalTrackUnmuted).off(ut.LocalTrackPublished,this.onLocalTrackPublished).off(ut.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(ut.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(ut.MediaDevicesError,this.onMediaDevicesError).off(ut.AudioStreamAcquired,this.startAudio).off(ut.ChatMessage,this.onLocalChatMessageSent).off(ut.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),Xa()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(n=navigator.mediaDevices)===null||n===void 0||n.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(wi.Disconnected),this.emit(Je.Disconnected,t)}}}handleParticipantDisconnected(e,t){var n;this.remoteParticipants.delete(e),t&&(t.trackPublications.forEach(s=>{t.unpublishTrack(s.trackSid,!0)}),this.emit(Je.ParticipantDisconnected,t),(n=this.localParticipant)===null||n===void 0||n.handleParticipantDisconnected(t.identity))}handleStreamHeader(e,t){return re(this,void 0,void 0,function*(){var n;if(e.contentHeader.case==="byteHeader"){const s=this.byteStreamHandlers.get(e.topic);if(!s){this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);return}let r;const o={id:e.streamId,name:(n=e.contentHeader.value.name)!==null&&n!==void 0?n:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:HL(e.timestamp),attributes:e.attributes},a=new ReadableStream({start:l=>{r=l,this.byteStreamControllers.set(e.streamId,{info:o,controller:r,startTime:Date.now()})}});s(new flt(o,a,HL(e.totalLength)),{identity:t})}else if(e.contentHeader.case==="textHeader"){const s=this.textStreamHandlers.get(e.topic);if(!s){this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);return}let r;const o={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes},a=new ReadableStream({start:l=>{r=l,this.textStreamControllers.set(e.streamId,{info:o,controller:r,startTime:Date.now()})}});s(new glt(o,a,HL(e.totalLength)),{identity:t})}})}handleStreamChunk(e){const t=this.byteStreamControllers.get(e.streamId);t&&e.content.length>0&&t.controller.enqueue(e);const n=this.textStreamControllers.get(e.streamId);n&&e.content.length>0&&n.controller.enqueue(e)}handleStreamTrailer(e){const t=this.textStreamControllers.get(e.streamId);t&&(t.info.attributes=Object.assign(Object.assign({},t.info.attributes),e.attributes),t.controller.close(),this.textStreamControllers.delete(e.streamId));const n=this.byteStreamControllers.get(e.streamId);n&&(n.info.attributes=Object.assign(Object.assign({},n.info.attributes),e.attributes),n.controller.close(),this.byteStreamControllers.delete(e.streamId))}acquireAudioContext(){return re(this,void 0,void 0,function*(){var e,t;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=d1e())!==null&&e!==void 0?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(s=>s.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),ol(200)])}catch(s){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:s}))}const n=((t=this.audioContext)===null||t===void 0?void 0:t.state)==="running";n!==this.canPlaybackAudio&&(this.audioEnabled=n,this.emit(Je.AudioPlaybackStatusChanged,n))})}createParticipant(e,t){var n;let s;return t?s=MN.fromParticipantInfo(this.engine.client,t,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):s=new MN(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&s.setAudioContext(this.audioContext),!((n=this.options.audioOutput)===null||n===void 0)&&n.deviceId&&s.setAudioOutput(this.options.audioOutput).catch(r=>this.log.warn("Could not set audio output: ".concat(r.message),this.logContext)),s}getOrCreateParticipant(e,t){if(this.remoteParticipants.has(e)){const s=this.remoteParticipants.get(e);return t&&s.updateInfo(t)&&this.sidToIdentity.set(t.sid,t.identity),s}const n=this.createParticipant(e,t);return this.remoteParticipants.set(e,n),this.sidToIdentity.set(t.sid,t.identity),this.emitWhenConnected(Je.ParticipantConnected,n),n.on(ut.TrackPublished,s=>{this.emitWhenConnected(Je.TrackPublished,s,n)}).on(ut.TrackSubscribed,(s,r)=>{s.kind===Fe.Kind.Audio?(s.on(tt.AudioPlaybackStarted,this.handleAudioPlaybackStarted),s.on(tt.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):s.kind===Fe.Kind.Video&&(s.on(tt.VideoPlaybackFailed,this.handleVideoPlaybackFailed),s.on(tt.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(Je.TrackSubscribed,s,r,n)}).on(ut.TrackUnpublished,s=>{this.emit(Je.TrackUnpublished,s,n)}).on(ut.TrackUnsubscribed,(s,r)=>{this.emit(Je.TrackUnsubscribed,s,r,n)}).on(ut.TrackMuted,s=>{this.emitWhenConnected(Je.TrackMuted,s,n)}).on(ut.TrackUnmuted,s=>{this.emitWhenConnected(Je.TrackUnmuted,s,n)}).on(ut.ParticipantMetadataChanged,s=>{this.emitWhenConnected(Je.ParticipantMetadataChanged,s,n)}).on(ut.ParticipantNameChanged,s=>{this.emitWhenConnected(Je.ParticipantNameChanged,s,n)}).on(ut.AttributesChanged,s=>{this.emitWhenConnected(Je.ParticipantAttributesChanged,s,n)}).on(ut.ConnectionQualityChanged,s=>{this.emitWhenConnected(Je.ConnectionQualityChanged,s,n)}).on(ut.ParticipantPermissionsChanged,s=>{this.emitWhenConnected(Je.ParticipantPermissionsChanged,s,n)}).on(ut.TrackSubscriptionStatusChanged,(s,r)=>{this.emitWhenConnected(Je.TrackSubscriptionStatusChanged,s,r,n)}).on(ut.TrackSubscriptionFailed,(s,r)=>{this.emit(Je.TrackSubscriptionFailed,s,n,r)}).on(ut.TrackSubscriptionPermissionChanged,(s,r)=>{this.emitWhenConnected(Je.TrackSubscriptionPermissionChanged,s,r,n)}),t&&n.updateInfo(t),n}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce((n,s)=>(n.push(...s.getTrackPublications()),n),[]),t=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,t)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const t of e.videoTrackPublications.values())t.isSubscribed&&xat(t)&&t.emitTrackUpdate()}getRemoteParticipantBySid(e){const t=this.sidToIdentity.get(e);if(t)return this.remoteParticipants.get(t)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=Co.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,ru.STATE_MISMATCH))):e=0},klt)}clearConnectionReconcile(){this.connectionReconcileInterval&&Co.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(Je.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[t,n]=e;this.emit(t,...n)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(this.state===wi.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,n]);else if(this.state===wi.Connected)return this.emit(e,...n);return!1}simulateParticipants(e){return re(this,void 0,void 0,function*(){var t,n;const s=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),r=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new Jz({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:gs.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new r2({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(Je.SignalConnected),this.emit(Je.Connected),this.setAndEmitConnectionState(wi.Connected),s.video){const o=new iV(Fe.Kind.Video,new vv({source:gr.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Jc.AUDIO,name:"video-dummy"}),new PN(s.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:Ene(160*((t=r.aspectRatios[0])!==null&&t!==void 0?t:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(o),this.localParticipant.emit(ut.LocalTrackPublished,o)}if(s.audio){const o=new iV(Fe.Kind.Audio,new vv({source:gr.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Jc.AUDIO}),new RN(s.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:X6(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(o),this.localParticipant.emit(ut.LocalTrackPublished,o)}for(let o=0;o<r.count-1;o+=1){let a=new r2({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(o),state:xB.ACTIVE,tracks:[],joinedAt:gs.parse(Date.now())});const l=this.getOrCreateParticipant(a.identity,a);if(r.video){const c=Ene(160*((n=r.aspectRatios[o%r.aspectRatios.length])!==null&&n!==void 0?n:1),160,!1,!0),u=new vv({source:gr.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Jc.AUDIO});l.addSubscribedMediaTrack(c,u.sid,new MediaStream([c]),new RTCRtpReceiver),a.tracks=[...a.tracks,u]}if(r.audio){const c=X6(),u=new vv({source:gr.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Jc.AUDIO});l.addSubscribedMediaTrack(c,u.sid,new MediaStream([c]),new RTCRtpReceiver),a.tracks=[...a.tracks,u]}l.updateInfo(a)}})}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e!==Je.ActiveSpeakersChanged&&e!==Je.TranscriptionReceived){const r=C1e(n).filter(o=>o!==void 0);this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:r}))}return super.emit(e,...n)}}fy.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(i=>{i()});function C1e(i){return i.map(e=>{if(e)return Array.isArray(e)?C1e(e):typeof e=="object"?"logContext"in e?e.logContext:void 0:e})}var Gc;(function(i){i[i.IDLE=0]="IDLE",i[i.RUNNING=1]="RUNNING",i[i.SKIPPED=2]="SKIPPED",i[i.SUCCESS=3]="SUCCESS",i[i.FAILED=4]="FAILED"})(Gc||(Gc={}));class Gm extends qd.EventEmitter{constructor(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=Gc.IDLE,this.logs=[],this.options={},this.url=e,this.token=t,this.name=this.constructor.name,this.room=new fy(n.roomOptions),this.connectOptions=n.connectOptions,this.options=n}run(e){return re(this,void 0,void 0,function*(){if(this.status!==Gc.IDLE)throw Error("check is running already");this.setStatus(Gc.RUNNING);try{yield this.perform()}catch(t){t instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(t.message):this.appendError(t.message))}return yield this.disconnect(),yield new Promise(t=>setTimeout(t,500)),this.status!==Gc.SKIPPED&&this.setStatus(this.isSuccess()?Gc.SUCCESS:Gc.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(e){return re(this,void 0,void 0,function*(){return this.room.state===wi.Connected?this.room:(e||(e=this.url),yield this.room.connect(e,this.token,this.connectOptions),this.room)})}disconnect(){return re(this,void 0,void 0,function*(){this.room&&this.room.state!==wi.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(Gc.SKIPPED)}switchProtocol(e){return re(this,void 0,void 0,function*(){let t=!1,n=!1;if(this.room.on(Je.Reconnecting,()=>{t=!0}),this.room.once(Je.Reconnected,()=>{n=!0}),this.room.simulateScenario("force-".concat(e)),yield new Promise(r=>setTimeout(r,1e3)),!t)return;const s=Date.now()+1e4;for(;Date.now()<s;){if(n)return;yield ol(100)}throw new Error("Could not reconnect using ".concat(e," protocol after 10 seconds"))})}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class xlt extends Gm{get description(){return"Cloud regions"}perform(){return re(this,void 0,void 0,function*(){const e=new tV(this.url,this.token);if(!e.isCloud()){this.skip();return}const t=[],n=new Set;for(let r=0;r<3;r++){const o=yield e.getNextBestRegionUrl();if(!o)break;if(n.has(o))continue;n.add(o);const a=yield this.checkCloudRegion(o);this.appendMessage("".concat(a.region," RTT: ").concat(a.rtt,"ms, duration: ").concat(a.duration,"ms")),t.push(a)}t.sort((r,o)=>(r.duration-o.duration)*.5+(r.rtt-o.rtt)*.5);const s=t[0];this.bestStats=s,this.appendMessage("best Cloud region: ".concat(s.region))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkCloudRegion(e){return re(this,void 0,void 0,function*(){var t,n;yield this.connect(e),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const s=(t=this.room.serverInfo)===null||t===void 0?void 0:t.region;if(!s)throw new Error("Region not found");const r=yield this.room.localParticipant.streamText({topic:"test"}),o=1e3,l=1e6/o,c="A".repeat(o),u=Date.now();for(let p=0;p<l;p++)yield r.write(c);yield r.close();const d=Date.now(),h=yield(n=this.room.engine.pcManager)===null||n===void 0?void 0:n.publisher.getStats(),g={region:s,rtt:1e4,duration:d-u};return h==null||h.forEach(p=>{p.type==="candidate-pair"&&p.nominated&&(g.rtt=p.currentRoundTripTime*1e3)}),yield this.disconnect(),g})}}const o5=1e4;class Elt extends Gm{get description(){return"Connection via UDP vs TCP"}perform(){return re(this,void 0,void 0,function*(){const e=yield this.checkConnectionProtocol("udp"),t=yield this.checkConnectionProtocol("tcp");this.bestStats=e,e.qualityLimitationDurations.bandwidth-t.qualityLimitationDurations.bandwidth>.5||(e.packetsLost-t.packetsLost)/e.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=t):this.appendMessage("best connection quality via udp");const n=this.bestStats;this.appendMessage("upstream bitrate: ".concat((n.bitrateTotal/n.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((n.rttTotal/n.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((n.jitterTotal/n.count*1e3).toFixed(2)," ms")),n.packetsLost>0&&this.appendWarning("packets lost: ".concat((n.packetsLost/n.packetsSent*100).toFixed(2),"%")),n.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((n.qualityLimitationDurations.bandwidth/(o5/1e3)*100).toFixed(2),"%")),n.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((n.qualityLimitationDurations.cpu/(o5/1e3)*100).toFixed(2),"%"))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkConnectionProtocol(e){return re(this,void 0,void 0,function*(){yield this.connect(),e==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const t=document.createElement("canvas");t.width=1280,t.height=720;const n=t.getContext("2d");if(!n)throw new Error("Could not get canvas context");let s=0;const r=()=>{s=(s+1)%360,n.fillStyle="hsl(".concat(s,", 100%, 50%)"),n.fillRect(0,0,t.width,t.height),requestAnimationFrame(r)};r();const a=t.captureStream(30).getVideoTracks()[0],c=(yield this.room.localParticipant.publishTrack(a,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,u={protocol:e,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},d=setInterval(()=>re(this,void 0,void 0,function*(){const h=yield c.getRTCStatsReport();h==null||h.forEach(g=>{g.type==="outbound-rtp"?(u.packetsSent=g.packetsSent,u.qualityLimitationDurations=g.qualityLimitationDurations,u.bitrateTotal+=g.targetBitrate,u.count++):g.type==="remote-inbound-rtp"&&(u.packetsLost=g.packetsLost,u.rttTotal+=g.roundTripTime,u.jitterTotal+=g.jitter)})}),1e3);return yield new Promise(h=>setTimeout(h,o5)),clearInterval(d),a.stop(),t.remove(),yield this.disconnect(),u})}}function S1e(i){return re(this,void 0,void 0,function*(){var e,t;i??(i={}),(e=i.audio)!==null&&e!==void 0||(i.audio={deviceId:"default"}),(t=i.video)!==null&&t!==void 0||(i.video={deviceId:"default"});const{audioProcessor:n,videoProcessor:s}=lj(i),r=c1e(i,f1e,g1e),o=jA(r),a=navigator.mediaDevices.getUserMedia(o);i.audio&&(to.userMediaPromiseMap.set("audioinput",a),a.catch(()=>to.userMediaPromiseMap.delete("audioinput"))),i.video&&(to.userMediaPromiseMap.set("videoinput",a),a.catch(()=>to.userMediaPromiseMap.delete("videoinput")));const l=yield a;return Promise.all(l.getTracks().map(c=>re(this,void 0,void 0,function*(){const u=c.kind==="audio";u?r.audio:r.video;let d;const h=u?o.audio:o.video;typeof h!="boolean"&&(d=h);const g=c.getSettings().deviceId;d!=null&&d.deviceId&&am(d.deviceId)!==g?d.deviceId=g:d||(d={deviceId:g});const p=_1e(c,d);return p.kind===Fe.Kind.Video?p.source=Fe.Source.Camera:p.kind===Fe.Kind.Audio&&(p.source=Fe.Source.Microphone),p.mediaStream=l,kf(p)&&n?yield p.setProcessor(n):Xy(p)&&s&&(yield p.setProcessor(s)),p})))})}function Tlt(i){return re(this,void 0,void 0,function*(){return(yield S1e({audio:!1,video:i}))[0]})}function Llt(i){return re(this,void 0,void 0,function*(){return(yield S1e({audio:i,video:!1}))[0]})}class Ilt extends Gm{get description(){return"Can publish audio"}perform(){return re(this,void 0,void 0,function*(){var e;const t=yield this.connect(),n=yield Llt();if(yield u1e(n,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),t.localParticipant.publishTrack(n),yield new Promise(a=>setTimeout(a,3e3));const r=yield(e=n.sender)===null||e===void 0?void 0:e.getStats();if(!r)throw new Error("Could not get RTCStats");let o=0;if(r.forEach(a=>{a.type==="outbound-rtp"&&(a.kind==="audio"||!a.kind&&a.mediaType==="audio")&&(o=a.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," audio packets"))})}}class Dlt extends Gm{get description(){return"Can publish video"}perform(){return re(this,void 0,void 0,function*(){var e;const t=yield this.connect(),n=yield Tlt();yield this.checkForVideo(n.mediaStreamTrack),t.localParticipant.publishTrack(n),yield new Promise(o=>setTimeout(o,5e3));const s=yield(e=n.sender)===null||e===void 0?void 0:e.getStats();if(!s)throw new Error("Could not get RTCStats");let r=0;if(s.forEach(o=>{o.type==="outbound-rtp"&&(o.kind==="video"||!o.kind&&o.mediaType==="video")&&(r+=o.packetsSent)}),r===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(r," video packets"))})}checkForVideo(e){return re(this,void 0,void 0,function*(){const t=new MediaStream;t.addTrack(e.clone());const n=document.createElement("video");n.srcObject=t,n.muted=!0,yield new Promise(s=>{n.onplay=()=>{setTimeout(()=>{var r,o,a,l;const c=document.createElement("canvas"),u=e.getSettings(),d=(o=(r=u.width)!==null&&r!==void 0?r:n.videoWidth)!==null&&o!==void 0?o:1280,h=(l=(a=u.height)!==null&&a!==void 0?a:n.videoHeight)!==null&&l!==void 0?l:720;c.width=d,c.height=h;const g=c.getContext("2d");g.drawImage(n,0,0);const _=g.getImageData(0,0,c.width,c.height).data;let v=!0;for(let y=0;y<_.length;y+=4)if(_[y]!==0||_[y+1]!==0||_[y+2]!==0){v=!1;break}v?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),s()},1e3)},n.play()}),n.remove()})}}class Nlt extends Gm{get description(){return"Resuming connection after interruption"}perform(){return re(this,void 0,void 0,function*(){var e;const t=yield this.connect();let n=!1,s=!1,r;const o=new Promise(c=>{setTimeout(c,5e3),r=c}),a=()=>{n=!0};t.on(Je.SignalReconnecting,a).on(Je.Reconnecting,a).on(Je.Reconnected,()=>{s=!0,r(!0)}),(e=t.engine.client.ws)===null||e===void 0||e.close();const l=t.engine.client.onClose;if(l&&l(""),yield o,n){if(!s||t.state!==wi.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class Rlt extends Gm{get description(){return"Can connect via TURN"}perform(){return re(this,void 0,void 0,function*(){var e,t;const n=new cj,s=yield n.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let r=!1,o=!1,a=!1;for(let l of s.iceServers)for(let c of l.urls)c.startsWith("turn:")?(o=!0,a=!0):c.startsWith("turns:")&&(o=!0,a=!0,r=!0),c.startsWith("stun:")&&(a=!0);a?o&&!r&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield n.close(),!((t=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||t===void 0)&&t.iceServers||o?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(l=>setTimeout(l,0)))})}}class Alt extends Gm{get description(){return"Establishing WebRTC connection"}perform(){return re(this,void 0,void 0,function*(){let e=!1,t=!1;this.room.on(Je.SignalConnected,()=>{const n=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(s,r)=>{if(s.candidate){const o=new RTCIceCandidate(s);let a="".concat(o.protocol," ").concat(o.address,":").concat(o.port," ").concat(o.type);o.address&&(Plt(o.address)?a+=" (private)":o.protocol==="tcp"&&o.tcpType==="passive"?(e=!0,a+=" (passive)"):o.protocol==="udp"&&(t=!0)),this.appendMessage(a)}n&&n(s,r)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=s=>{s instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(s.errorCode," ").concat(s.errorText," ").concat(s.url))})});try{yield this.connect(),ti.info("now the room is connected")}catch(n){throw this.appendWarning("ports need to be open on firewall in order to connect."),n}e||this.appendWarning("Server is not configured for ICE/TCP"),t||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function Plt(i){const e=i.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const t=parseInt(e[1],10);if(t>=16&&t<=31)return!0}}return!1}class Mlt extends Gm{get description(){return"Connecting to signal connection via WebSocket"}perform(){return re(this,void 0,void 0,function*(){var e,t,n;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let s=new cj;const r=yield s.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(r.serverVersion,".")),((e=r.serverInfo)===null||e===void 0?void 0:e.edition)===d0e.Cloud&&(!((t=r.serverInfo)===null||t===void 0)&&t.region)&&this.appendMessage("LiveKit Cloud: ".concat((n=r.serverInfo)===null||n===void 0?void 0:n.region)),yield s.close()})}}class ndt extends qd.EventEmitter{constructor(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=e,this.token=t,this.options=n}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:Gc.IDLE,name:"",description:""}),e}updateCheck(e,t){this.checkResults.set(e,t),this.emit("checkUpdate",e,t)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==Gc.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return re(this,void 0,void 0,function*(){const t=this.getNextCheckId(),n=new e(this.url,this.token,this.options),s=o=>{this.updateCheck(t,o)};n.on("update",s);const r=yield n.run();return n.off("update",s),r})}checkWebsocket(){return re(this,void 0,void 0,function*(){return this.createAndRunCheck(Mlt)})}checkWebRTC(){return re(this,void 0,void 0,function*(){return this.createAndRunCheck(Alt)})}checkTURN(){return re(this,void 0,void 0,function*(){return this.createAndRunCheck(Rlt)})}checkReconnect(){return re(this,void 0,void 0,function*(){return this.createAndRunCheck(Nlt)})}checkPublishAudio(){return re(this,void 0,void 0,function*(){return this.createAndRunCheck(Ilt)})}checkPublishVideo(){return re(this,void 0,void 0,function*(){return this.createAndRunCheck(Dlt)})}checkConnectionProtocol(){return re(this,void 0,void 0,function*(){const e=yield this.createAndRunCheck(Elt);if(e.data&&"protocol"in e.data){const t=e.data;this.options.protocol=t.protocol}return e})}checkCloudRegion(){return re(this,void 0,void 0,function*(){return this.createAndRunCheck(xlt)})}}const Olt=`
  .participant-container {
    position: relative;
    padding: 8px;
    border-radius: 6px;
    transition: background-color 0.3s ease;
  }

  .participant-container.active::before {
    content: '';
    position: absolute;
    inset: -2px;
    border-radius: 8px;
    padding: 2px;
    background: linear-gradient(45deg, #00ff00, #00cc00, #009900, #00ff00);
    background-size: 200% 200%;
    animation: rotateGradient 2s linear infinite;
    z-index: -1;
  }

  @keyframes rotateGradient {
    0% { background-position: 0% 0%; }
    50% { background-position: 100% 100%; }
    100% { background-position: 0% 0%; }
  }

  .video-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 8px;
    width: 100%;
  }
  
  .video-wrapper {
    position: relative;
    padding-bottom: 56.25%;
    height: 0;
    width: 100%;
    background-color: #333;
    border-radius: 4px;
  }
  
  .video-wrapper video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 4px;
  }

  .video-off-placeholder {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #333;
    border-radius: 4px;
    color: #fff;
    font-size: 14px;
  }

  .right-sidebar-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  .chat-container {
    display: flex;
    flex-direction: column;
    height: 100%;
    position: relative;
  }

  .chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
    display: flex;
    flex-direction: column-reverse;
    gap: 10px;
  }

  .new-messages-indicator {
    position: sticky;
    bottom: 60px;
    width: 100%;
    display: flex;
    justify-content: center;
    padding: 4px;
    pointer-events: none;
    z-index: 10;
  }

  .new-messages-button {
    pointer-events: all;
    background: #3182ce;
    color: white;
    padding: 4px 12px;
    border-radius: 16px;
    display: flex;
    align-items: center;
    gap: 4px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    cursor: pointer;
  }

  .message {
    display: flex;
    align-items: flex-end;
  }

  .message.sent {
    justify-content: flex-end;
  }

  .message.received {
    justify-content: flex-start;
  }

  .message-content {
    max-width: 70%;
    padding: 8px 12px;
    border-radius: 10px;
    background-color: #fff;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }

  .message.sent .message-content {
    background-color: #dcf8c6;
  }

  .message.received .message-content {
    background-color: #ffffff;
  }

  .sender {
    font-size: 12px;
    font-weight: bold;
    color: #333;
    display: block;
  }

  .message-content p {
    margin: 4px 0;
    word-wrap: break-word;
  }

  .timestamp {
    font-size: 10px;
    color: #888;
    display: block;
    text-align: right;
  }

  .chat-input-container {
    position: sticky;
    bottom: 0;
    padding: 10px;
    background: inherit;
    border-top: 1px solid #e5e7eb; //
  }
`,k1e=document.createElement("style");k1e.textContent=Olt;document.head.appendChild(k1e);const Flt=async(i,e)=>{const t=await fetch(`https://collabx-token.azurewebsites.net/get-token?roomName=${encodeURIComponent(i)}&participantName=${encodeURIComponent(e)}`);if(!t.ok){const s=await t.text();throw new Error(`Failed to get token: ${t.status} - ${s}`)}const n=await t.json();if(!n.success||!n.token)throw new Error("Invalid token response");return n.token},Blt=()=>{var oi;const{sessionId:i}=vve(),e=_y(),t=ku(),n=((oi=t.state)==null?void 0:oi.targetLanguage)||"javascript",[s,r]=F.useState(!0),[o,a]=F.useState(!0),[l,c]=F.useState(200),[u,d]=F.useState(!1),[h,g]=F.useState(!1),[p,_]=F.useState(!1),[v,y]=F.useState("video"),[w,x]=F.useState(!1),[k,T]=F.useState(!1),[R,L]=F.useState(null),[I,A]=F.useState(n),[B,V]=F.useState(n),[U,W]=F.useState(null),[G,Z]=F.useState(null),[ne,fe]=F.useState({x:20,y:20}),[te,ce]=F.useState(!1),[ve,X]=F.useState({x:0,y:0}),oe=F.useRef({}),[Ne,Ie]=F.useState(!1),[Oe,it]=F.useState(""),[We,at]=F.useState(!1),[Ft,_t]=F.useState(null),{theme:Nt,setTheme:Zt}=DMe(),[on,zn]=F.useState(18),[sr,Or]=F.useState(2),[Ts,No]=F.useState("vs-dark"),[Hs,wr]=F.useState(!1),[Ro,jl]=F.useState(void 0),[aa,Ao]=F.useState([]),[Fr,yi]=F.useState(new Set),[Ti,Po]=F.useState([]),[La,Cr]=F.useState(""),[cs,Us]=F.useState(null),[lo,Ci]=F.useState(null),[ft,Ia]=F.useState(null),[Br,hn]=F.useState("disconnected"),[Vr,ns]=F.useState({}),[Wr,ri]=F.useState(0),[Sr,la]=F.useState(!0),Bi=F.useRef(null),rr=F.useRef(null),kt=F.useRef(null),$=F.useRef(null),q=F.useRef(null),Q=F.useRef(new Map);F.useRef(null);const ie=F.useRef(null),ae=["javascript","typescript","python","java","cpp","csharp","php","swift","kotlin","dart","go","ruby","scala","rust","erlang","elixir"];F.useEffect(()=>{const st=ki.onAuthStateChanged(Be=>{jl(!!Be),Be||e("/")});return()=>st()},[e]),F.useEffect(()=>{if(!ki.currentUser||!i)return;const st=W5(dI(Fv,"sessions",i),Be=>{Be.exists()&&Ao(Be.data().participants||[])},Be=>{console.error("Firestore session listener error:",Be),_t("Failed to load session data. Please try again.")});return()=>st()},[i]),F.useEffect(()=>{if(!ki.currentUser||!i)return;const st=V5(Fv,"sessions",i,"messages"),Be=DTe(st,NTe("timestamp","asc")),vt=W5(Be,ct=>{const fn=ct.docs.map(Gt=>({id:Gt.id,...Gt.data()}));Po(fn),ie.current&&Sr?setTimeout(()=>{ie.current.scrollTop=0},0):ri(Gt=>Gt+ct.docChanges().length)},ct=>{console.error("Firestore messages listener error:",ct),_t("Failed to load chat messages. Please try again.")});return()=>vt()},[i,Sr]);const me=st=>{if(!st||!st.localParticipant){console.error("Cannot initialize tracks: Room or local participant not available");return}const Be={...Vr};Be[st.localParticipant.identity]={identity:st.localParticipant.identity,videoEnabled:!1,audioEnabled:!1,stream:null,trackSid:null,audioTrackSid:null},st.localParticipant.tracks&&st.localParticipant.tracks.forEach(vt=>{vt.track&&(vt.kind==="video"?(Be[st.localParticipant.identity]={...Be[st.localParticipant.identity],videoEnabled:!0,stream:vt.track.mediaStream,trackSid:vt.trackSid},oe.current[vt.trackSid]&&(oe.current[vt.trackSid].srcObject=vt.track.mediaStream,oe.current[vt.trackSid].play().catch(ct=>console.error("Local video play failed:",ct)))):vt.kind==="audio"&&(Be[st.localParticipant.identity]={...Be[st.localParticipant.identity],audioEnabled:!0,audioTrackSid:vt.trackSid}))}),st.participants&&st.participants.forEach(vt=>{Be[vt.identity]={identity:vt.identity,videoEnabled:!1,audioEnabled:!1,stream:null,trackSid:null,audioTrackSid:null},vt.tracks&&vt.tracks.forEach(ct=>{ct.track&&ct.isSubscribed&&(ct.kind==="video"?(Be[vt.identity]={...Be[vt.identity],videoEnabled:!0,stream:ct.track.mediaStream,trackSid:ct.trackSid},oe.current[ct.trackSid]&&(oe.current[ct.trackSid].srcObject=ct.track.mediaStream,oe.current[ct.trackSid].play().catch(fn=>console.error("Remote video play failed:",fn)))):ct.kind==="audio"&&(Be[vt.identity]={...Be[vt.identity],audioEnabled:!0,audioTrackSid:ct.trackSid},ct.track.attach()))})}),ns(Be)},Ce=async(st=0,Be=3)=>{if(!ki.currentUser||!i){console.error("Cannot join room: Missing auth or sessionId");return}try{hn("connecting"),console.log(`Attempting to join room, attempt ${st+1}/${Be}`);const vt=await Flt(i,ki.currentUser.uid),ct=new fy({adaptiveStream:!0,dynacast:!0,videoCaptureDefaults:{resolution:dy.h720.resolution}});await ct.connect("wss://video-chat-application-7u5wc7ae.livekit.cloud",vt,{autoSubscribe:!0}),console.log("Successfully connected to room");try{await ct.localParticipant.setMetadata(JSON.stringify({displayName:ki.currentUser.displayName||"User"+Math.floor(Math.random()*1e3)})),console.log("Participant metadata set")}catch(fn){console.warn("Failed to set metadata:",fn.message)}Ia(ct),hn("connected"),me(ct);try{await ct.localParticipant.setMicrophoneEnabled(!1),await ct.localParticipant.setCameraEnabled(!1)}catch(fn){console.warn("Failed to disable mic/camera:",fn.message)}}catch(vt){if(console.error("Failed to join room:",vt),hn("disconnected"),st<Be&&vt.message.includes("could not establish pc connection")){const ct=Math.pow(2,st)*1e3;console.log(`Retrying in ${ct}ms...`),setTimeout(()=>Ce(st+1,Be),ct)}else console.error("Max retries reached or non-retryable error"),_t("Failed to connect to video chat. Please try again later.")}};F.useEffect(()=>(Ce(),()=>{ft&&(ze(),ft.disconnect())}),[i]);const ze=()=>{ns({}),Object.keys(oe.current).forEach(st=>{oe.current[st]&&(oe.current[st].srcObject=null)}),oe.current={},Z(null),L(null),q.current&&(q.current.destroy(),q.current=null),$.current&&($.current.destroy(),$.current=null),kt.current&&(kt.current.destroy(),kt.current=null),Q.current.clear()};F.useEffect(()=>{if(!ft)return;const st=Ot=>{ns(xn=>({...xn,[Ot.identity]:{identity:Ot.identity,videoEnabled:!1,audioEnabled:!1,stream:null,trackSid:null,audioTrackSid:null}})),Ot.tracks&&Ot.tracks.forEach(xn=>{xn.track&&xn.isSubscribed&&(xn.kind==="video"?(ns(Fn=>({...Fn,[Ot.identity]:{...Fn[Ot.identity],videoEnabled:!0,stream:xn.track.mediaStream,trackSid:xn.trackSid}})),oe.current[xn.trackSid]&&(oe.current[xn.trackSid].srcObject=xn.track.mediaStream,oe.current[xn.trackSid].play().catch(Fn=>console.error("Video play failed:",Fn)))):xn.kind==="audio"&&(ns(Fn=>({...Fn,[Ot.identity]:{...Fn[Ot.identity],audioEnabled:!0,audioTrackSid:xn.trackSid}})),xn.track.attach()))})},Be=Ot=>{ns(xn=>{const Fn={...xn};return delete Fn[Ot.identity],Fn}),G===Ot.identity&&Z(null)},vt=(Ot,xn,Fn)=>{var Mo;Ot.kind==="video"?(ns(Yi=>({...Yi,[Fn.identity]:{...Yi[Fn.identity],videoEnabled:!0,stream:Ot.mediaStream,trackSid:Ot.sid}})),oe.current[Ot.sid]&&(oe.current[Ot.sid].srcObject=Ot.mediaStream,oe.current[Ot.sid].play().catch(Yi=>console.error("Video play failed:",Yi)))):Ot.kind==="audio"&&Fn.identity!==((Mo=ki.currentUser)==null?void 0:Mo.uid)&&(ns(Yi=>({...Yi,[Fn.identity]:{...Yi[Fn.identity],audioEnabled:!0,audioTrackSid:Ot.sid}})),Ot.attach())},ct=(Ot,xn,Fn)=>{Ot.kind==="video"?(ns(Mo=>({...Mo,[Fn.identity]:{...Mo[Fn.identity],videoEnabled:!1,stream:null,trackSid:null}})),oe.current[Ot.sid]&&(oe.current[Ot.sid].srcObject=null)):Ot.kind==="audio"&&(ns(Mo=>({...Mo,[Fn.identity]:{...Mo[Fn.identity],audioEnabled:!1,audioTrackSid:null}})),Ot.detach())},fn=Ot=>{Ot.track.kind==="video"?(ns(xn=>({...xn,[ft.localParticipant.identity]:{...xn[ft.localParticipant.identity],videoEnabled:!0,stream:Ot.track.mediaStream,trackSid:Ot.trackSid}})),oe.current[Ot.trackSid]&&(oe.current[Ot.trackSid].srcObject=Ot.track.mediaStream,oe.current[Ot.trackSid].play().catch(xn=>console.error("Video play failed:",xn)))):Ot.track.kind==="audio"&&ns(xn=>({...xn,[ft.localParticipant.identity]:{...xn[ft.localParticipant.identity],audioEnabled:!0,audioTrackSid:Ot.trackSid}}))},Gt=Ot=>{Ot.track.kind==="video"?(ns(xn=>({...xn,[ft.localParticipant.identity]:{...xn[ft.localParticipant.identity],videoEnabled:!1,stream:null,trackSid:null}})),oe.current[Ot.trackSid]&&(oe.current[Ot.trackSid].srcObject=null),L(null)):Ot.track.kind==="audio"&&(ns(xn=>({...xn,[ft.localParticipant.identity]:{...xn[ft.localParticipant.identity],audioEnabled:!1,audioTrackSid:null}})),Ot.track.detach())},zs=()=>{console.log("Room disconnected, attempting to reconnect..."),hn("disconnected"),ze(),Ce()};return ft.on("participantConnected",st),ft.on("participantDisconnected",Be),ft.on("trackSubscribed",vt),ft.on("trackUnsubscribed",ct),ft.on("localTrackPublished",fn),ft.on("localTrackUnpublished",Gt),ft.on("disconnected",zs),()=>{ft.off("participantConnected",st),ft.off("participantDisconnected",Be),ft.off("trackSubscribed",vt),ft.off("trackUnsubscribed",ct),ft.off("localTrackPublished",fn),ft.off("localTrackUnpublished",Gt),ft.off("disconnected",zs)}},[ft,G]);const Ye=F.useMemo(()=>{if(!ft||!ft.participants)return{};const st={};return ft.localParticipant&&(st[ft.localParticipant.identity]=ft.localParticipant),ft.participants.forEach(Be=>{st[Be.identity]=Be}),st},[ft]),Rt=st=>{var Yi,Of;if(!Bi.current||!rr.current)return;q.current&&q.current.destroy();const Be=`${i}-${st}`,ct=`wss://collabx-websocket.azurewebsites.net/?sessionId=${encodeURIComponent(Be)}`,fn=new My;kt.current=fn,$.current=new g9e(ct,Be,fn,{resyncInterval:2e3});const Gt=fn.getText("monaco");q.current=new srt(Gt,Bi.current.getModel(),new Set([Bi.current]),$.current.awareness),Gt.observe(ul=>{var Gd;const Kd=ul.transaction;let Da=Kd.local?$.current.awareness.clientID:(Gd=Array.from(Kd.afterState||[]).find(([dl,hl])=>!Kd.beforeState.has(dl)||Kd.beforeState.get(dl)<hl))==null?void 0:Gd[0];if(Da){yi(hl=>{const Yd=new Set(hl);return Yd.add(Da),Yd}),Q.current.has(Da)&&clearTimeout(Q.current.get(Da));const dl=setTimeout(()=>{yi(hl=>{const Yd=new Set(hl);return Yd.delete(Da),Yd}),Q.current.delete(Da)},250);Q.current.set(Da,dl)}});const zs=Bi.current,Ot=$.current.awareness,xn="#"+Math.floor(Math.random()*16777215).toString(16),Fn=((Yi=ki.currentUser)==null?void 0:Yi.displayName)||"User"+Math.floor(Math.random()*1e3);Ot.setLocalStateField("user",{name:Fn,color:xn,id:(Of=ki.currentUser)==null?void 0:Of.uid});const Mo=ul=>{Ot.setLocalStateField("cursor",{line:ul.lineNumber,column:ul.column})};zs.onDidChangeCursorPosition(ul=>Mo(ul.position)),zs.onDidChangeCursorSelection(ul=>Mo(ul.selection.getPosition()))},vn=(st,Be)=>{Bi.current=st,rr.current=Be,Be.editor.defineTheme("night-owl",wNe),No(Nt==="dark"?"night-owl":"vs-light"),wr(!0)};F.useEffect(()=>{var st,Be;if(Hs&&Bi.current&&rr.current){Rt(I);const vt=(st=t.state)==null?void 0:st.translatedCode,ct=(Be=t.state)==null?void 0:Be.targetLanguage;ct&&ct!==I&&(V(I),A(ct),rr.current.editor.setModelLanguage(Bi.current.getModel(),ct),Rt(ct),vt===""&&Bi.current&&Bi.current.setValue("")),vt!==void 0&&vt!==""&&Bi.current&&Bi.current.getValue()!==vt&&(Bi.current.setValue(vt),Bi.current.getAction("editor.action.formatDocument").run())}return()=>{q.current&&q.current.destroy(),$.current&&$.current.destroy(),kt.current&&kt.current.destroy(),Q.current.clear()}},[Hs,I,i]),F.useEffect(()=>{rr.current&&rr.current.editor.setTheme(Nt==="dark"?"night-owl":"vs-light"),No(Nt==="dark"?"night-owl":"vs-light")},[Nt]);const an=async(st="")=>{try{if(at(!0),_t(null),W(null),Us(null),Ci(null),!Bi.current||!Bi.current.getValue().trim())throw new Error("No code to execute!");const Be=performance.now(),vt=await c6e(Bi.current.getValue(),I,st),ct=performance.now();vt.isError=vt.status!=="Accepted"&&(!vt.exitCode||vt.exitCode!==0),W(vt),Us((ct-Be).toFixed(2)),Ci("O(n)")}catch(Be){_t(Be)}finally{at(!1)}},Qn=async st=>{if(!(!st.trim()||!ki.currentUser))try{const Be=V5(Fv,"sessions",i,"messages");await MTe(Be,{text:st,senderId:ki.currentUser.uid,senderName:ki.currentUser.displayName||"Anonymous",timestamp:new Date().toISOString()}),de()}catch(Be){console.error("Error sending message:",Be)}},kn=st=>{if(te){const Be=Math.max(0,Math.min(st.clientX-ve.x,window.innerWidth-240)),vt=Math.max(0,Math.min(st.clientY-ve.y,window.innerHeight-180));fe({x:Be,y:vt})}},is=()=>{ce(!1)},Vi=()=>{Zt(Nt==="dark"?"light":"dark")},cl=st=>{if(u){const Be=window.innerHeight-st.clientY;c(Math.max(100,Math.min(Be,window.innerHeight-200)))}},mt=()=>{d(!1)},de=()=>{ie.current&&(ie.current.scrollTop=0,ri(0))},je=async()=>{var st,Be,vt;if(!ft||!ft.localParticipant||ft.state!=="connected"){console.error("Cannot toggle video: Room not connected or participant unavailable"),T(!1),L(null);return}try{if(k){console.log("Disabling video..."),console.log("Current tracks:",Array.from(((st=ft.localParticipant.tracks)==null?void 0:st.entries())||[])),console.log("Stored videoTrackSid:",R);let ct=null;if(R&&ft.localParticipant.tracks&&(ct=ft.localParticipant.tracks.get(R)),!ct&&ft.localParticipant.tracks&&(ct=Array.from(ft.localParticipant.tracks.values()).find(fn=>fn.kind==="video")),ct&&ct.track){const fn=ct.track,Gt=ct.trackSid;console.log("Found video track to unpublish:",Gt),await ft.localParticipant.unpublishTrack(fn),console.log("Video track unpublished:",Gt),fn.stop();const zs=fn.mediaStream;zs&&zs.getTracks().forEach(Ot=>Ot.stop()),oe.current[Gt]&&(oe.current[Gt].srcObject=null,delete oe.current[Gt]),T(!1),L(null)}else{console.warn("No video track found to unpublish, stopping all video tracks...");try{const fn=(Be=oe.current[R])==null?void 0:Be.srcObject;fn&&fn.getTracks().forEach(Gt=>Gt.stop()),R&&oe.current[R]&&(oe.current[R].srcObject=null,delete oe.current[R])}catch(fn){console.error("Error stopping video tracks:",fn)}T(!1),L(null)}}else{console.log("Enabling video...");const ct=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:30}}}),fn=ct.getVideoTracks()[0];if(!fn)throw new Error("No video track available");const Gt=await ft.localParticipant.publishTrack(fn,{source:Fe.Source.Camera});console.log("Video track published:",Gt.trackSid),T(!0),L(Gt.trackSid);const zs=Gt.trackSid;oe.current[zs]&&(oe.current[zs].srcObject=ct,oe.current[zs].play().catch(Ot=>console.error("Video play failed:",Ot)))}}catch(ct){console.error("Error toggling video:",ct),T(!1),L(null),R&&oe.current[R]&&((vt=oe.current[R].srcObject)==null||vt.getTracks().forEach(fn=>fn.stop()),oe.current[R].srcObject=null,delete oe.current[R])}},dt=async()=>{if(!ft||!ft.localParticipant||ft.state!=="connected"){console.error("Cannot toggle mic: Room not connected or participant unavailable"),x(!1);return}try{if(w){console.log("Disabling mic...");const st=ft.localParticipant.tracks?Array.from(ft.localParticipant.tracks.values()).find(Be=>Be.kind==="audio"):null;st&&st.track?(await ft.localParticipant.unpublishTrack(st.track),st.track.stop(),x(!1)):(console.warn("No audio track found to unpublish"),x(!1))}else{console.log("Enabling mic...");const Be=(await navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0];await ft.localParticipant.publishTrack(Be),x(!0)}}catch(st){console.error("Error toggling mic:",st),x(!1)}};return F.useEffect(()=>(window.addEventListener("mousemove",cl),window.addEventListener("mouseup",mt),()=>{window.removeEventListener("mousemove",cl),window.removeEventListener("mouseup",mt)}),[u]),F.useEffect(()=>{ie.current&&Ti.length>0&&de()},[]),Ro===void 0?D.jsx("div",{children:"Loading..."}):D.jsxs("div",{className:`flex flex-col h-screen coding-envi ${Nt==="dark"?"dark":""}`,onMouseMove:kn,onMouseUp:is,children:[D.jsx(tPe,{theme:Nt,leftSidebarOpen:s,setLeftSidebarOpen:r,rightSidebarOpen:o,setRightSidebarOpen:a,rightSidebarTab:v,selectedLanguage:I,setSelectedLanguage:A,handleRunCode:()=>an(),isLoading:We,showRunWithInput:Ne,setShowRunWithInput:Ie,toggleTheme:Vi,setVersionControlExpanded:_,versionControlExpanded:p,setSettingsExpanded:g,settingsExpanded:h,sessionId:i,languages:ae}),D.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[D.jsx(GNe,{theme:Nt,leftSidebarOpen:s,participants:aa,activeEditors:Fr,livekitParticipants:Ye,providerRef:$}),D.jsx(EMe,{selectedLanguage:I,theme:Nt,monacoTheme:Ts,fontSize:on,tabSize:sr,showRunWithInput:Ne,setShowRunWithInput:Ie,codeInput:Oe,setCodeInput:it,notesHeight:l,setNotesHeight:c,isResizing:u,setIsResizing:d,settingsExpanded:h,setSettingsExpanded:g,versionControlExpanded:p,setVersionControlExpanded:_,codeOutput:U,isLoading:We,error:Ft,fetchTime:cs,complexity:lo,handleRunCode:an,handleEditorDidMount:vn}),D.jsx(TMe,{theme:Nt,rightSidebarOpen:o,rightSidebarTab:v,setRightSidebarTab:y,participantStates:Vr,livekitParticipants:Ye,pinnedVideo:G,setPinnedVideo:Z,auth:ki,chatMessages:Ti,handleSendMessage:Qn,newMessageCount:Wr,isAtBottom:Sr,scrollToBottom:de,videoRefs:oe})]}),D.jsx(LMe,{theme:Nt,micEnabled:w,toggleMic:dt,videoEnabled:k,toggleVideo:je,room:ft,cleanupSession:ze,navigate:e}),D.jsx(iPe,{pinnedVideo:G,participantState:Vr[G],livekitParticipants:Ye,auth:ki,pinnedVideoPosition:ne,setPinnedVideoPosition:fe,setPinnedVideo:Z,videoRefs:oe,isDragging:te,setIsDragging:ce,dragOffset:ve,setDragOffset:X})]})};function jne(){return D.jsx(IMe,{defaultTheme:"light",children:D.jsx(Blt,{})})}const a5=({children:i})=>{const[e,t]=ZR(ki),n=ku();return t?D.jsx("div",{className:"flex justify-center items-center min-h-screen",children:"Loading..."}):e&&n.pathname==="/auth"?D.jsx(VS,{to:"/",replace:!0}):e?i:D.jsx(VS,{to:"/",replace:!0})},Vlt=({children:i})=>{const[e,t]=ZR(ki);return t?D.jsx("div",{className:"flex justify-center items-center min-h-screen",children:"Loading..."}):e?D.jsx(VS,{to:"/",replace:!0}):i},Wlt=()=>{const[i,e]=ZR(ki);return e?D.jsx("div",{className:"flex justify-center items-center min-h-screen",children:"Loading..."}):i?D.jsx(VS,{to:"/dashboard",replace:!0}):D.jsx(pNe,{})};document.querySelectorAll('a[href^="#"]').forEach(i=>{i.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("href"),n=document.querySelector(t);n&&n.scrollIntoView({behavior:"smooth"})})});U_e.createRoot(document.getElementById("root")).render(D.jsx(vo.StrictMode,{children:D.jsx(nbe,{children:D.jsxs(Ave,{children:[D.jsx(wp,{path:"/",element:D.jsx(Wlt,{})}),D.jsx(wp,{path:"/auth",element:D.jsx(Vlt,{children:D.jsx(ULe,{})})}),D.jsx(wp,{path:"/dashboard",element:D.jsx(a5,{children:D.jsx(mNe,{})})}),D.jsx(wp,{path:"/coding-environment",element:D.jsx(a5,{children:D.jsx(jne,{})})}),D.jsx(wp,{path:"/session/:sessionId",element:D.jsx(a5,{children:D.jsx(jne,{})})}),D.jsx(wp,{path:"*",element:D.jsx(VS,{to:"/",replace:!0})})]})})}))});export default Hlt();
